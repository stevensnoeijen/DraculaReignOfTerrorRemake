var Ge=Object.defineProperty,ke=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var Xe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var Fe=(s,a,l)=>a in s?Ge(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,we=(s,a)=>{for(var l in a||(a={}))Xe.call(a,l)&&Fe(s,l,a[l]);if($e)for(var l of $e(a))Ve.call(a,l)&&Fe(s,l,a[l]);return s},Oe=(s,a)=>ke(s,He(a));var H=(s,a,l)=>(Fe(s,typeof a!="symbol"?a+"":a,l),l);const p$2=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))h(d);new MutationObserver(d=>{for(const v of d)if(v.type==="childList")for(const _ of v.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&h(_)}).observe(document,{childList:!0,subtree:!0});function l(d){const v={};return d.integrity&&(v.integrity=d.integrity),d.referrerpolicy&&(v.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?v.credentials="include":d.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function h(d){if(d.ep)return;d.ep=!0;const v=l(d);fetch(d.href,v)}};p$2();function makeMap(s,a){const l=Object.create(null),h=s.split(",");for(let d=0;d<h.length;d++)l[h[d]]=!0;return a?d=>!!l[d.toLowerCase()]:d=>!!l[d]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(s){return!!s||s===""}function normalizeStyle(s){if(isArray$1(s)){const a={};for(let l=0;l<s.length;l++){const h=s[l],d=isString(h)?parseStringStyle(h):normalizeStyle(h);if(d)for(const v in d)a[v]=d[v]}return a}else{if(isString(s))return s;if(isObject(s))return s}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(s){const a={};return s.split(listDelimiterRE).forEach(l=>{if(l){const h=l.split(propertyDelimiterRE);h.length>1&&(a[h[0].trim()]=h[1].trim())}}),a}function normalizeClass(s){let a="";if(isString(s))a=s;else if(isArray$1(s))for(let l=0;l<s.length;l++){const h=normalizeClass(s[l]);h&&(a+=h+" ")}else if(isObject(s))for(const l in s)s[l]&&(a+=l+" ");return a.trim()}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=s=>onRE.test(s),isModelListener=s=>s.startsWith("onUpdate:"),extend=Object.assign,remove=(s,a)=>{const l=s.indexOf(a);l>-1&&s.splice(l,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(s,a)=>hasOwnProperty$2.call(s,a),isArray$1=Array.isArray,isMap=s=>toTypeString(s)==="[object Map]",isSet=s=>toTypeString(s)==="[object Set]",isFunction=s=>typeof s=="function",isString=s=>typeof s=="string",isSymbol=s=>typeof s=="symbol",isObject=s=>s!==null&&typeof s=="object",isPromise=s=>isObject(s)&&isFunction(s.then)&&isFunction(s.catch),objectToString=Object.prototype.toString,toTypeString=s=>objectToString.call(s),toRawType=s=>toTypeString(s).slice(8,-1),isPlainObject=s=>toTypeString(s)==="[object Object]",isIntegerKey=s=>isString(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=s=>{const a=Object.create(null);return l=>a[l]||(a[l]=s(l))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(s=>s.replace(camelizeRE,(a,l)=>l?l.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(s=>s.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(s=>s.charAt(0).toUpperCase()+s.slice(1)),toHandlerKey=cacheStringFunction(s=>s?`on${capitalize(s)}`:""),hasChanged=(s,a)=>!Object.is(s,a),invokeArrayFns=(s,a)=>{for(let l=0;l<s.length;l++)s[l](a)},def=(s,a,l)=>{Object.defineProperty(s,a,{configurable:!0,enumerable:!1,value:l})},toNumber=s=>{const a=parseFloat(s);return isNaN(a)?s:a};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(a=!1){this.active=!0,this.effects=[],this.cleanups=[],!a&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(a){if(this.active){const l=activeEffectScope;try{return activeEffectScope=this,a()}finally{activeEffectScope=l}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(a){if(this.active){let l,h;for(l=0,h=this.effects.length;l<h;l++)this.effects[l].stop();for(l=0,h=this.cleanups.length;l<h;l++)this.cleanups[l]();if(this.scopes)for(l=0,h=this.scopes.length;l<h;l++)this.scopes[l].stop(!0);if(this.parent&&!a){const d=this.parent.scopes.pop();d&&d!==this&&(this.parent.scopes[this.index]=d,d.index=this.index)}this.active=!1}}}function recordEffectScope(s,a=activeEffectScope){a&&a.active&&a.effects.push(s)}const createDep=s=>{const a=new Set(s);return a.w=0,a.n=0,a},wasTracked=s=>(s.w&trackOpBit)>0,newTracked=s=>(s.n&trackOpBit)>0,initDepMarkers=({deps:s})=>{if(s.length)for(let a=0;a<s.length;a++)s[a].w|=trackOpBit},finalizeDepMarkers=s=>{const{deps:a}=s;if(a.length){let l=0;for(let h=0;h<a.length;h++){const d=a[h];wasTracked(d)&&!newTracked(d)?d.delete(s):a[l++]=d,d.w&=~trackOpBit,d.n&=~trackOpBit}a.length=l}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(a,l=null,h){this.fn=a,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,h)}run(){if(!this.active)return this.fn();let a=activeEffect,l=shouldTrack;for(;a;){if(a===this)return;a=a.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(s){const{deps:a}=s;if(a.length){for(let l=0;l<a.length;l++)a[l].delete(s);a.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const s=trackStack.pop();shouldTrack=s===void 0?!0:s}function track(s,a,l){if(shouldTrack&&activeEffect){let h=targetMap.get(s);h||targetMap.set(s,h=new Map);let d=h.get(l);d||h.set(l,d=createDep()),trackEffects(d)}}function trackEffects(s,a){let l=!1;effectTrackDepth<=maxMarkerBits?newTracked(s)||(s.n|=trackOpBit,l=!wasTracked(s)):l=!s.has(activeEffect),l&&(s.add(activeEffect),activeEffect.deps.push(s))}function trigger(s,a,l,h,d,v){const _=targetMap.get(s);if(!_)return;let m=[];if(a==="clear")m=[..._.values()];else if(l==="length"&&isArray$1(s))_.forEach((g,y)=>{(y==="length"||y>=h)&&m.push(g)});else switch(l!==void 0&&m.push(_.get(l)),a){case"add":isArray$1(s)?isIntegerKey(l)&&m.push(_.get("length")):(m.push(_.get(ITERATE_KEY)),isMap(s)&&m.push(_.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(s)||(m.push(_.get(ITERATE_KEY)),isMap(s)&&m.push(_.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(s)&&m.push(_.get(ITERATE_KEY));break}if(m.length===1)m[0]&&triggerEffects(m[0]);else{const g=[];for(const y of m)y&&g.push(...y);triggerEffects(createDep(g))}}function triggerEffects(s,a){for(const l of isArray$1(s)?s:[...s])(l!==activeEffect||l.allowRecurse)&&(l.scheduler?l.scheduler():l.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(s=>Symbol[s]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const s={};return["includes","indexOf","lastIndexOf"].forEach(a=>{s[a]=function(...l){const h=toRaw(this);for(let v=0,_=this.length;v<_;v++)track(h,"get",v+"");const d=h[a](...l);return d===-1||d===!1?h[a](...l.map(toRaw)):d}}),["push","pop","shift","unshift","splice"].forEach(a=>{s[a]=function(...l){pauseTracking();const h=toRaw(this)[a].apply(this,l);return resetTracking(),h}}),s}function createGetter(s=!1,a=!1){return function(h,d,v){if(d==="__v_isReactive")return!s;if(d==="__v_isReadonly")return s;if(d==="__v_isShallow")return a;if(d==="__v_raw"&&v===(s?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(h))return h;const _=isArray$1(h);if(!s&&_&&hasOwn(arrayInstrumentations,d))return Reflect.get(arrayInstrumentations,d,v);const m=Reflect.get(h,d,v);return(isSymbol(d)?builtInSymbols.has(d):isNonTrackableKeys(d))||(s||track(h,"get",d),a)?m:isRef(m)?!_||!isIntegerKey(d)?m.value:m:isObject(m)?s?readonly(m):reactive(m):m}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(s=!1){return function(l,h,d,v){let _=l[h];if(isReadonly(_)&&isRef(_)&&!isRef(d))return!1;if(!s&&!isReadonly(d)&&(isShallow(d)||(d=toRaw(d),_=toRaw(_)),!isArray$1(l)&&isRef(_)&&!isRef(d)))return _.value=d,!0;const m=isArray$1(l)&&isIntegerKey(h)?Number(h)<l.length:hasOwn(l,h),g=Reflect.set(l,h,d,v);return l===toRaw(v)&&(m?hasChanged(d,_)&&trigger(l,"set",h,d):trigger(l,"add",h,d)),g}}function deleteProperty(s,a){const l=hasOwn(s,a);s[a];const h=Reflect.deleteProperty(s,a);return h&&l&&trigger(s,"delete",a,void 0),h}function has(s,a){const l=Reflect.has(s,a);return(!isSymbol(a)||!builtInSymbols.has(a))&&track(s,"has",a),l}function ownKeys(s){return track(s,"iterate",isArray$1(s)?"length":ITERATE_KEY),Reflect.ownKeys(s)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(s,a){return!0},deleteProperty(s,a){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=s=>s,getProto=s=>Reflect.getPrototypeOf(s);function get$1(s,a,l=!1,h=!1){s=s.__v_raw;const d=toRaw(s),v=toRaw(a);a!==v&&!l&&track(d,"get",a),!l&&track(d,"get",v);const{has:_}=getProto(d),m=h?toShallow:l?toReadonly:toReactive;if(_.call(d,a))return m(s.get(a));if(_.call(d,v))return m(s.get(v));s!==d&&s.get(a)}function has$1(s,a=!1){const l=this.__v_raw,h=toRaw(l),d=toRaw(s);return s!==d&&!a&&track(h,"has",s),!a&&track(h,"has",d),s===d?l.has(s):l.has(s)||l.has(d)}function size(s,a=!1){return s=s.__v_raw,!a&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)}function add(s){s=toRaw(s);const a=toRaw(this);return getProto(a).has.call(a,s)||(a.add(s),trigger(a,"add",s,s)),this}function set$1(s,a){a=toRaw(a);const l=toRaw(this),{has:h,get:d}=getProto(l);let v=h.call(l,s);v||(s=toRaw(s),v=h.call(l,s));const _=d.call(l,s);return l.set(s,a),v?hasChanged(a,_)&&trigger(l,"set",s,a):trigger(l,"add",s,a),this}function deleteEntry(s){const a=toRaw(this),{has:l,get:h}=getProto(a);let d=l.call(a,s);d||(s=toRaw(s),d=l.call(a,s)),h&&h.call(a,s);const v=a.delete(s);return d&&trigger(a,"delete",s,void 0),v}function clear(){const s=toRaw(this),a=s.size!==0,l=s.clear();return a&&trigger(s,"clear",void 0,void 0),l}function createForEach(s,a){return function(h,d){const v=this,_=v.__v_raw,m=toRaw(_),g=a?toShallow:s?toReadonly:toReactive;return!s&&track(m,"iterate",ITERATE_KEY),_.forEach((y,T)=>h.call(d,g(y),g(T),v))}}function createIterableMethod(s,a,l){return function(...h){const d=this.__v_raw,v=toRaw(d),_=isMap(v),m=s==="entries"||s===Symbol.iterator&&_,g=s==="keys"&&_,y=d[s](...h),T=l?toShallow:a?toReadonly:toReactive;return!a&&track(v,"iterate",g?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:E,done:b}=y.next();return b?{value:E,done:b}:{value:m?[T(E[0]),T(E[1])]:T(E),done:b}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(s){return function(...a){return s==="delete"?!1:this}}function createInstrumentations(){const s={get(v){return get$1(this,v)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},a={get(v){return get$1(this,v,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},l={get(v){return get$1(this,v,!0)},get size(){return size(this,!0)},has(v){return has$1.call(this,v,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},h={get(v){return get$1(this,v,!0,!0)},get size(){return size(this,!0)},has(v){return has$1.call(this,v,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(v=>{s[v]=createIterableMethod(v,!1,!1),l[v]=createIterableMethod(v,!0,!1),a[v]=createIterableMethod(v,!1,!0),h[v]=createIterableMethod(v,!0,!0)}),[s,l,a,h]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(s,a){const l=a?s?shallowReadonlyInstrumentations:shallowInstrumentations:s?readonlyInstrumentations:mutableInstrumentations;return(h,d,v)=>d==="__v_isReactive"?!s:d==="__v_isReadonly"?s:d==="__v_raw"?h:Reflect.get(hasOwn(l,d)&&d in h?l:h,d,v)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(s){return s.__v_skip||!Object.isExtensible(s)?0:targetTypeMap(toRawType(s))}function reactive(s){return isReadonly(s)?s:createReactiveObject(s,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(s){return createReactiveObject(s,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(s){return createReactiveObject(s,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(s,a,l,h,d){if(!isObject(s)||s.__v_raw&&!(a&&s.__v_isReactive))return s;const v=d.get(s);if(v)return v;const _=getTargetType(s);if(_===0)return s;const m=new Proxy(s,_===2?h:l);return d.set(s,m),m}function isReactive(s){return isReadonly(s)?isReactive(s.__v_raw):!!(s&&s.__v_isReactive)}function isReadonly(s){return!!(s&&s.__v_isReadonly)}function isShallow(s){return!!(s&&s.__v_isShallow)}function isProxy(s){return isReactive(s)||isReadonly(s)}function toRaw(s){const a=s&&s.__v_raw;return a?toRaw(a):s}function markRaw(s){return def(s,"__v_skip",!0),s}const toReactive=s=>isObject(s)?reactive(s):s,toReadonly=s=>isObject(s)?readonly(s):s;function trackRefValue(s){shouldTrack&&activeEffect&&(s=toRaw(s),trackEffects(s.dep||(s.dep=createDep())))}function triggerRefValue(s,a){s=toRaw(s),s.dep&&triggerEffects(s.dep)}function isRef(s){return!!(s&&s.__v_isRef===!0)}function ref(s){return createRef(s,!1)}function createRef(s,a){return isRef(s)?s:new RefImpl(s,a)}class RefImpl{constructor(a,l){this.__v_isShallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?a:toRaw(a),this._value=l?a:toReactive(a)}get value(){return trackRefValue(this),this._value}set value(a){a=this.__v_isShallow?a:toRaw(a),hasChanged(a,this._rawValue)&&(this._rawValue=a,this._value=this.__v_isShallow?a:toReactive(a),triggerRefValue(this))}}function unref(s){return isRef(s)?s.value:s}const shallowUnwrapHandlers={get:(s,a,l)=>unref(Reflect.get(s,a,l)),set:(s,a,l,h)=>{const d=s[a];return isRef(d)&&!isRef(l)?(d.value=l,!0):Reflect.set(s,a,l,h)}};function proxyRefs(s){return isReactive(s)?s:new Proxy(s,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(a,l,h,d){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(a,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!d,this.__v_isReadonly=h}get value(){const a=toRaw(this);return trackRefValue(a),(a._dirty||!a._cacheable)&&(a._dirty=!1,a._value=a.effect.run()),a._value}set value(a){this._setter(a)}}function computed$1(s,a,l=!1){let h,d;const v=isFunction(s);return v?(h=s,d=NOOP):(h=s.get,d=s.set),new ComputedRefImpl(h,d,v||!d,l)}function callWithErrorHandling(s,a,l,h){let d;try{d=h?s(...h):s()}catch(v){handleError(v,a,l)}return d}function callWithAsyncErrorHandling(s,a,l,h){if(isFunction(s)){const v=callWithErrorHandling(s,a,l,h);return v&&isPromise(v)&&v.catch(_=>{handleError(_,a,l)}),v}const d=[];for(let v=0;v<s.length;v++)d.push(callWithAsyncErrorHandling(s[v],a,l,h));return d}function handleError(s,a,l,h=!0){const d=a?a.vnode:null;if(a){let v=a.parent;const _=a.proxy,m=l;for(;v;){const y=v.ec;if(y){for(let T=0;T<y.length;T++)if(y[T](s,_,m)===!1)return}v=v.parent}const g=a.appContext.config.errorHandler;if(g){callWithErrorHandling(g,null,10,[s,_,m]);return}}logError(s,l,d,h)}function logError(s,a,l,h=!0){console.error(s)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(s){const a=currentFlushPromise||resolvedPromise;return s?a.then(this?s.bind(this):s):a}function findInsertionIndex(s){let a=flushIndex+1,l=queue.length;for(;a<l;){const h=a+l>>>1;getId(queue[h])<s?a=h+1:l=h}return a}function queueJob(s){(!queue.length||!queue.includes(s,isFlushing&&s.allowRecurse?flushIndex+1:flushIndex))&&s!==currentPreFlushParentJob&&(s.id==null?queue.push(s):queue.splice(findInsertionIndex(s.id),0,s),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(s){const a=queue.indexOf(s);a>flushIndex&&queue.splice(a,1)}function queueCb(s,a,l,h){isArray$1(s)?l.push(...s):(!a||!a.includes(s,s.allowRecurse?h+1:h))&&l.push(s),queueFlush()}function queuePreFlushCb(s){queueCb(s,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(s){queueCb(s,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(s,a=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=a,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(s,a)}}function flushPostFlushCbs(s){if(pendingPostFlushCbs.length){const a=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...a);return}for(activePostFlushCbs=a,activePostFlushCbs.sort((l,h)=>getId(l)-getId(h)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=s=>s.id==null?1/0:s.id;function flushJobs(s){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(s),queue.sort((l,h)=>getId(l)-getId(h));const a=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const l=queue[flushIndex];l&&l.active!==!1&&callWithErrorHandling(l,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(s)}}function emit$1(s,a,...l){if(s.isUnmounted)return;const h=s.vnode.props||EMPTY_OBJ;let d=l;const v=a.startsWith("update:"),_=v&&a.slice(7);if(_&&_ in h){const T=`${_==="modelValue"?"model":_}Modifiers`,{number:E,trim:b}=h[T]||EMPTY_OBJ;b?d=l.map(R=>R.trim()):E&&(d=l.map(toNumber))}let m,g=h[m=toHandlerKey(a)]||h[m=toHandlerKey(camelize(a))];!g&&v&&(g=h[m=toHandlerKey(hyphenate(a))]),g&&callWithAsyncErrorHandling(g,s,6,d);const y=h[m+"Once"];if(y){if(!s.emitted)s.emitted={};else if(s.emitted[m])return;s.emitted[m]=!0,callWithAsyncErrorHandling(y,s,6,d)}}function normalizeEmitsOptions(s,a,l=!1){const h=a.emitsCache,d=h.get(s);if(d!==void 0)return d;const v=s.emits;let _={},m=!1;if(!isFunction(s)){const g=y=>{const T=normalizeEmitsOptions(y,a,!0);T&&(m=!0,extend(_,T))};!l&&a.mixins.length&&a.mixins.forEach(g),s.extends&&g(s.extends),s.mixins&&s.mixins.forEach(g)}return!v&&!m?(h.set(s,null),null):(isArray$1(v)?v.forEach(g=>_[g]=null):extend(_,v),h.set(s,_),_)}function isEmitListener(s,a){return!s||!isOn(a)?!1:(a=a.slice(2).replace(/Once$/,""),hasOwn(s,a[0].toLowerCase()+a.slice(1))||hasOwn(s,hyphenate(a))||hasOwn(s,a))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(s){const a=currentRenderingInstance;return currentRenderingInstance=s,currentScopeId=s&&s.type.__scopeId||null,a}function withCtx(s,a=currentRenderingInstance,l){if(!a||s._n)return s;const h=(...d)=>{h._d&&setBlockTracking(-1);const v=setCurrentRenderingInstance(a),_=s(...d);return setCurrentRenderingInstance(v),h._d&&setBlockTracking(1),_};return h._n=!0,h._c=!0,h._d=!0,h}function markAttrsAccessed(){}function renderComponentRoot(s){const{type:a,vnode:l,proxy:h,withProxy:d,props:v,propsOptions:[_],slots:m,attrs:g,emit:y,render:T,renderCache:E,data:b,setupState:R,ctx:I,inheritAttrs:P}=s;let C,S;const O=setCurrentRenderingInstance(s);try{if(l.shapeFlag&4){const U=d||h;C=normalizeVNode(T.call(U,U,E,v,R,b,I)),S=g}else{const U=a;C=normalizeVNode(U.length>1?U(v,{attrs:g,slots:m,emit:y}):U(v,null)),S=a.props?g:getFunctionalFallthrough(g)}}catch(U){blockStack.length=0,handleError(U,s,1),C=createVNode(Comment)}let w=C;if(S&&P!==!1){const U=Object.keys(S),{shapeFlag:F}=w;U.length&&F&7&&(_&&U.some(isModelListener)&&(S=filterModelListeners(S,_)),w=cloneVNode(w,S))}return l.dirs&&(w.dirs=w.dirs?w.dirs.concat(l.dirs):l.dirs),l.transition&&(w.transition=l.transition),C=w,setCurrentRenderingInstance(O),C}const getFunctionalFallthrough=s=>{let a;for(const l in s)(l==="class"||l==="style"||isOn(l))&&((a||(a={}))[l]=s[l]);return a},filterModelListeners=(s,a)=>{const l={};for(const h in s)(!isModelListener(h)||!(h.slice(9)in a))&&(l[h]=s[h]);return l};function shouldUpdateComponent(s,a,l){const{props:h,children:d,component:v}=s,{props:_,children:m,patchFlag:g}=a,y=v.emitsOptions;if(a.dirs||a.transition)return!0;if(l&&g>=0){if(g&1024)return!0;if(g&16)return h?hasPropsChanged(h,_,y):!!_;if(g&8){const T=a.dynamicProps;for(let E=0;E<T.length;E++){const b=T[E];if(_[b]!==h[b]&&!isEmitListener(y,b))return!0}}}else return(d||m)&&(!m||!m.$stable)?!0:h===_?!1:h?_?hasPropsChanged(h,_,y):!0:!!_;return!1}function hasPropsChanged(s,a,l){const h=Object.keys(a);if(h.length!==Object.keys(s).length)return!0;for(let d=0;d<h.length;d++){const v=h[d];if(a[v]!==s[v]&&!isEmitListener(l,v))return!0}return!1}function updateHOCHostEl({vnode:s,parent:a},l){for(;a&&a.subTree===s;)(s=a.vnode).el=l,a=a.parent}const isSuspense=s=>s.__isSuspense;function queueEffectWithSuspense(s,a){a&&a.pendingBranch?isArray$1(s)?a.effects.push(...s):a.effects.push(s):queuePostFlushCb(s)}function provide(s,a){if(currentInstance){let l=currentInstance.provides;const h=currentInstance.parent&&currentInstance.parent.provides;h===l&&(l=currentInstance.provides=Object.create(h)),l[s]=a}}function inject(s,a,l=!1){const h=currentInstance||currentRenderingInstance;if(h){const d=h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides;if(d&&s in d)return d[s];if(arguments.length>1)return l&&isFunction(a)?a.call(h.proxy):a}}const INITIAL_WATCHER_VALUE={};function watch(s,a,l){return doWatch(s,a,l)}function doWatch(s,a,{immediate:l,deep:h,flush:d,onTrack:v,onTrigger:_}=EMPTY_OBJ){const m=currentInstance;let g,y=!1,T=!1;if(isRef(s)?(g=()=>s.value,y=isShallow(s)):isReactive(s)?(g=()=>s,h=!0):isArray$1(s)?(T=!0,y=s.some(isReactive),g=()=>s.map(S=>{if(isRef(S))return S.value;if(isReactive(S))return traverse(S);if(isFunction(S))return callWithErrorHandling(S,m,2)})):isFunction(s)?a?g=()=>callWithErrorHandling(s,m,2):g=()=>{if(!(m&&m.isUnmounted))return E&&E(),callWithAsyncErrorHandling(s,m,3,[b])}:g=NOOP,a&&h){const S=g;g=()=>traverse(S())}let E,b=S=>{E=C.onStop=()=>{callWithErrorHandling(S,m,4)}};if(isInSSRComponentSetup)return b=NOOP,a?l&&callWithAsyncErrorHandling(a,m,3,[g(),T?[]:void 0,b]):g(),NOOP;let R=T?[]:INITIAL_WATCHER_VALUE;const I=()=>{if(!!C.active)if(a){const S=C.run();(h||y||(T?S.some((O,w)=>hasChanged(O,R[w])):hasChanged(S,R)))&&(E&&E(),callWithAsyncErrorHandling(a,m,3,[S,R===INITIAL_WATCHER_VALUE?void 0:R,b]),R=S)}else C.run()};I.allowRecurse=!!a;let P;d==="sync"?P=I:d==="post"?P=()=>queuePostRenderEffect(I,m&&m.suspense):P=()=>{!m||m.isMounted?queuePreFlushCb(I):I()};const C=new ReactiveEffect(g,P);return a?l?I():R=C.run():d==="post"?queuePostRenderEffect(C.run.bind(C),m&&m.suspense):C.run(),()=>{C.stop(),m&&m.scope&&remove(m.scope.effects,C)}}function instanceWatch(s,a,l){const h=this.proxy,d=isString(s)?s.includes(".")?createPathGetter(h,s):()=>h[s]:s.bind(h,h);let v;isFunction(a)?v=a:(v=a.handler,l=a);const _=currentInstance;setCurrentInstance(this);const m=doWatch(d,v.bind(h),l);return _?setCurrentInstance(_):unsetCurrentInstance(),m}function createPathGetter(s,a){const l=a.split(".");return()=>{let h=s;for(let d=0;d<l.length&&h;d++)h=h[l[d]];return h}}function traverse(s,a){if(!isObject(s)||s.__v_skip||(a=a||new Set,a.has(s)))return s;if(a.add(s),isRef(s))traverse(s.value,a);else if(isArray$1(s))for(let l=0;l<s.length;l++)traverse(s[l],a);else if(isSet(s)||isMap(s))s.forEach(l=>{traverse(l,a)});else if(isPlainObject(s))for(const l in s)traverse(s[l],a);return s}function useTransitionState(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{s.isMounted=!0}),onBeforeUnmount(()=>{s.isUnmounting=!0}),s}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(s,{slots:a}){const l=getCurrentInstance(),h=useTransitionState();let d;return()=>{const v=a.default&&getTransitionRawChildren(a.default(),!0);if(!v||!v.length)return;let _=v[0];if(v.length>1){for(const P of v)if(P.type!==Comment){_=P;break}}const m=toRaw(s),{mode:g}=m;if(h.isLeaving)return emptyPlaceholder(_);const y=getKeepAliveChild(_);if(!y)return emptyPlaceholder(_);const T=resolveTransitionHooks(y,m,h,l);setTransitionHooks(y,T);const E=l.subTree,b=E&&getKeepAliveChild(E);let R=!1;const{getTransitionKey:I}=y.type;if(I){const P=I();d===void 0?d=P:P!==d&&(d=P,R=!0)}if(b&&b.type!==Comment&&(!isSameVNodeType(y,b)||R)){const P=resolveTransitionHooks(b,m,h,l);if(setTransitionHooks(b,P),g==="out-in")return h.isLeaving=!0,P.afterLeave=()=>{h.isLeaving=!1,l.update()},emptyPlaceholder(_);g==="in-out"&&y.type!==Comment&&(P.delayLeave=(C,S,O)=>{const w=getLeavingNodesForType(h,b);w[String(b.key)]=b,C._leaveCb=()=>{S(),C._leaveCb=void 0,delete T.delayedLeave},T.delayedLeave=O})}return _}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(s,a){const{leavingVNodes:l}=s;let h=l.get(a.type);return h||(h=Object.create(null),l.set(a.type,h)),h}function resolveTransitionHooks(s,a,l,h){const{appear:d,mode:v,persisted:_=!1,onBeforeEnter:m,onEnter:g,onAfterEnter:y,onEnterCancelled:T,onBeforeLeave:E,onLeave:b,onAfterLeave:R,onLeaveCancelled:I,onBeforeAppear:P,onAppear:C,onAfterAppear:S,onAppearCancelled:O}=a,w=String(s.key),U=getLeavingNodesForType(l,s),F=($,j)=>{$&&callWithAsyncErrorHandling($,h,9,j)},M={mode:v,persisted:_,beforeEnter($){let j=m;if(!l.isMounted)if(d)j=P||m;else return;$._leaveCb&&$._leaveCb(!0);const D=U[w];D&&isSameVNodeType(s,D)&&D.el._leaveCb&&D.el._leaveCb(),F(j,[$])},enter($){let j=g,D=y,X=T;if(!l.isMounted)if(d)j=C||g,D=S||y,X=O||T;else return;let Z=!1;const ee=$._enterCb=se=>{Z||(Z=!0,se?F(X,[$]):F(D,[$]),M.delayedLeave&&M.delayedLeave(),$._enterCb=void 0)};j?(j($,ee),j.length<=1&&ee()):ee()},leave($,j){const D=String(s.key);if($._enterCb&&$._enterCb(!0),l.isUnmounting)return j();F(E,[$]);let X=!1;const Z=$._leaveCb=ee=>{X||(X=!0,j(),ee?F(I,[$]):F(R,[$]),$._leaveCb=void 0,U[D]===s&&delete U[D])};U[D]=s,b?(b($,Z),b.length<=1&&Z()):Z()},clone($){return resolveTransitionHooks($,a,l,h)}};return M}function emptyPlaceholder(s){if(isKeepAlive(s))return s=cloneVNode(s),s.children=null,s}function getKeepAliveChild(s){return isKeepAlive(s)?s.children?s.children[0]:void 0:s}function setTransitionHooks(s,a){s.shapeFlag&6&&s.component?setTransitionHooks(s.component.subTree,a):s.shapeFlag&128?(s.ssContent.transition=a.clone(s.ssContent),s.ssFallback.transition=a.clone(s.ssFallback)):s.transition=a}function getTransitionRawChildren(s,a=!1,l){let h=[],d=0;for(let v=0;v<s.length;v++){let _=s[v];const m=l==null?_.key:String(l)+String(_.key!=null?_.key:v);_.type===Fragment?(_.patchFlag&128&&d++,h=h.concat(getTransitionRawChildren(_.children,a,m))):(a||_.type!==Comment)&&h.push(m!=null?cloneVNode(_,{key:m}):_)}if(d>1)for(let v=0;v<h.length;v++)h[v].patchFlag=-2;return h}function defineComponent(s){return isFunction(s)?{setup:s,name:s.name}:s}const isAsyncWrapper=s=>!!s.type.__asyncLoader,isKeepAlive=s=>s.type.__isKeepAlive;function onActivated(s,a){registerKeepAliveHook(s,"a",a)}function onDeactivated(s,a){registerKeepAliveHook(s,"da",a)}function registerKeepAliveHook(s,a,l=currentInstance){const h=s.__wdc||(s.__wdc=()=>{let d=l;for(;d;){if(d.isDeactivated)return;d=d.parent}return s()});if(injectHook(a,h,l),l){let d=l.parent;for(;d&&d.parent;)isKeepAlive(d.parent.vnode)&&injectToKeepAliveRoot(h,a,l,d),d=d.parent}}function injectToKeepAliveRoot(s,a,l,h){const d=injectHook(a,s,h,!0);onUnmounted(()=>{remove(h[a],d)},l)}function injectHook(s,a,l=currentInstance,h=!1){if(l){const d=l[s]||(l[s]=[]),v=a.__weh||(a.__weh=(..._)=>{if(l.isUnmounted)return;pauseTracking(),setCurrentInstance(l);const m=callWithAsyncErrorHandling(a,l,s,_);return unsetCurrentInstance(),resetTracking(),m});return h?d.unshift(v):d.push(v),v}}const createHook=s=>(a,l=currentInstance)=>(!isInSSRComponentSetup||s==="sp")&&injectHook(s,a,l),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(s,a=currentInstance){injectHook("ec",s,a)}let shouldCacheAccess=!0;function applyOptions(s){const a=resolveMergedOptions(s),l=s.proxy,h=s.ctx;shouldCacheAccess=!1,a.beforeCreate&&callHook(a.beforeCreate,s,"bc");const{data:d,computed:v,methods:_,watch:m,provide:g,inject:y,created:T,beforeMount:E,mounted:b,beforeUpdate:R,updated:I,activated:P,deactivated:C,beforeDestroy:S,beforeUnmount:O,destroyed:w,unmounted:U,render:F,renderTracked:M,renderTriggered:$,errorCaptured:j,serverPrefetch:D,expose:X,inheritAttrs:Z,components:ee,directives:se,filters:_e}=a;if(y&&resolveInjections(y,h,null,s.appContext.config.unwrapInjectedRef),_)for(const Q in _){const ae=_[Q];isFunction(ae)&&(h[Q]=ae.bind(l))}if(d){const Q=d.call(l,l);isObject(Q)&&(s.data=reactive(Q))}if(shouldCacheAccess=!0,v)for(const Q in v){const ae=v[Q],he=isFunction(ae)?ae.bind(l,l):isFunction(ae.get)?ae.get.bind(l,l):NOOP,k=!isFunction(ae)&&isFunction(ae.set)?ae.set.bind(l):NOOP,re=computed({get:he,set:k});Object.defineProperty(h,Q,{enumerable:!0,configurable:!0,get:()=>re.value,set:oe=>re.value=oe})}if(m)for(const Q in m)createWatcher(m[Q],h,l,Q);if(g){const Q=isFunction(g)?g.call(l):g;Reflect.ownKeys(Q).forEach(ae=>{provide(ae,Q[ae])})}T&&callHook(T,s,"c");function q(Q,ae){isArray$1(ae)?ae.forEach(he=>Q(he.bind(l))):ae&&Q(ae.bind(l))}if(q(onBeforeMount,E),q(onMounted,b),q(onBeforeUpdate,R),q(onUpdated,I),q(onActivated,P),q(onDeactivated,C),q(onErrorCaptured,j),q(onRenderTracked,M),q(onRenderTriggered,$),q(onBeforeUnmount,O),q(onUnmounted,U),q(onServerPrefetch,D),isArray$1(X))if(X.length){const Q=s.exposed||(s.exposed={});X.forEach(ae=>{Object.defineProperty(Q,ae,{get:()=>l[ae],set:he=>l[ae]=he})})}else s.exposed||(s.exposed={});F&&s.render===NOOP&&(s.render=F),Z!=null&&(s.inheritAttrs=Z),ee&&(s.components=ee),se&&(s.directives=se)}function resolveInjections(s,a,l=NOOP,h=!1){isArray$1(s)&&(s=normalizeInject(s));for(const d in s){const v=s[d];let _;isObject(v)?"default"in v?_=inject(v.from||d,v.default,!0):_=inject(v.from||d):_=inject(v),isRef(_)&&h?Object.defineProperty(a,d,{enumerable:!0,configurable:!0,get:()=>_.value,set:m=>_.value=m}):a[d]=_}}function callHook(s,a,l){callWithAsyncErrorHandling(isArray$1(s)?s.map(h=>h.bind(a.proxy)):s.bind(a.proxy),a,l)}function createWatcher(s,a,l,h){const d=h.includes(".")?createPathGetter(l,h):()=>l[h];if(isString(s)){const v=a[s];isFunction(v)&&watch(d,v)}else if(isFunction(s))watch(d,s.bind(l));else if(isObject(s))if(isArray$1(s))s.forEach(v=>createWatcher(v,a,l,h));else{const v=isFunction(s.handler)?s.handler.bind(l):a[s.handler];isFunction(v)&&watch(d,v,s)}}function resolveMergedOptions(s){const a=s.type,{mixins:l,extends:h}=a,{mixins:d,optionsCache:v,config:{optionMergeStrategies:_}}=s.appContext,m=v.get(a);let g;return m?g=m:!d.length&&!l&&!h?g=a:(g={},d.length&&d.forEach(y=>mergeOptions(g,y,_,!0)),mergeOptions(g,a,_)),v.set(a,g),g}function mergeOptions(s,a,l,h=!1){const{mixins:d,extends:v}=a;v&&mergeOptions(s,v,l,!0),d&&d.forEach(_=>mergeOptions(s,_,l,!0));for(const _ in a)if(!(h&&_==="expose")){const m=internalOptionMergeStrats[_]||l&&l[_];s[_]=m?m(s[_],a[_]):a[_]}return s}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(s,a){return a?s?function(){return extend(isFunction(s)?s.call(this,this):s,isFunction(a)?a.call(this,this):a)}:a:s}function mergeInject(s,a){return mergeObjectOptions(normalizeInject(s),normalizeInject(a))}function normalizeInject(s){if(isArray$1(s)){const a={};for(let l=0;l<s.length;l++)a[s[l]]=s[l];return a}return s}function mergeAsArray(s,a){return s?[...new Set([].concat(s,a))]:a}function mergeObjectOptions(s,a){return s?extend(extend(Object.create(null),s),a):a}function mergeWatchOptions(s,a){if(!s)return a;if(!a)return s;const l=extend(Object.create(null),s);for(const h in a)l[h]=mergeAsArray(s[h],a[h]);return l}function initProps(s,a,l,h=!1){const d={},v={};def(v,InternalObjectKey,1),s.propsDefaults=Object.create(null),setFullProps(s,a,d,v);for(const _ in s.propsOptions[0])_ in d||(d[_]=void 0);l?s.props=h?d:shallowReactive(d):s.type.props?s.props=d:s.props=v,s.attrs=v}function updateProps(s,a,l,h){const{props:d,attrs:v,vnode:{patchFlag:_}}=s,m=toRaw(d),[g]=s.propsOptions;let y=!1;if((h||_>0)&&!(_&16)){if(_&8){const T=s.vnode.dynamicProps;for(let E=0;E<T.length;E++){let b=T[E];if(isEmitListener(s.emitsOptions,b))continue;const R=a[b];if(g)if(hasOwn(v,b))R!==v[b]&&(v[b]=R,y=!0);else{const I=camelize(b);d[I]=resolvePropValue(g,m,I,R,s,!1)}else R!==v[b]&&(v[b]=R,y=!0)}}}else{setFullProps(s,a,d,v)&&(y=!0);let T;for(const E in m)(!a||!hasOwn(a,E)&&((T=hyphenate(E))===E||!hasOwn(a,T)))&&(g?l&&(l[E]!==void 0||l[T]!==void 0)&&(d[E]=resolvePropValue(g,m,E,void 0,s,!0)):delete d[E]);if(v!==m)for(const E in v)(!a||!hasOwn(a,E)&&!0)&&(delete v[E],y=!0)}y&&trigger(s,"set","$attrs")}function setFullProps(s,a,l,h){const[d,v]=s.propsOptions;let _=!1,m;if(a)for(let g in a){if(isReservedProp(g))continue;const y=a[g];let T;d&&hasOwn(d,T=camelize(g))?!v||!v.includes(T)?l[T]=y:(m||(m={}))[T]=y:isEmitListener(s.emitsOptions,g)||(!(g in h)||y!==h[g])&&(h[g]=y,_=!0)}if(v){const g=toRaw(l),y=m||EMPTY_OBJ;for(let T=0;T<v.length;T++){const E=v[T];l[E]=resolvePropValue(d,g,E,y[E],s,!hasOwn(y,E))}}return _}function resolvePropValue(s,a,l,h,d,v){const _=s[l];if(_!=null){const m=hasOwn(_,"default");if(m&&h===void 0){const g=_.default;if(_.type!==Function&&isFunction(g)){const{propsDefaults:y}=d;l in y?h=y[l]:(setCurrentInstance(d),h=y[l]=g.call(null,a),unsetCurrentInstance())}else h=g}_[0]&&(v&&!m?h=!1:_[1]&&(h===""||h===hyphenate(l))&&(h=!0))}return h}function normalizePropsOptions(s,a,l=!1){const h=a.propsCache,d=h.get(s);if(d)return d;const v=s.props,_={},m=[];let g=!1;if(!isFunction(s)){const T=E=>{g=!0;const[b,R]=normalizePropsOptions(E,a,!0);extend(_,b),R&&m.push(...R)};!l&&a.mixins.length&&a.mixins.forEach(T),s.extends&&T(s.extends),s.mixins&&s.mixins.forEach(T)}if(!v&&!g)return h.set(s,EMPTY_ARR),EMPTY_ARR;if(isArray$1(v))for(let T=0;T<v.length;T++){const E=camelize(v[T]);validatePropName(E)&&(_[E]=EMPTY_OBJ)}else if(v)for(const T in v){const E=camelize(T);if(validatePropName(E)){const b=v[T],R=_[E]=isArray$1(b)||isFunction(b)?{type:b}:b;if(R){const I=getTypeIndex(Boolean,R.type),P=getTypeIndex(String,R.type);R[0]=I>-1,R[1]=P<0||I<P,(I>-1||hasOwn(R,"default"))&&m.push(E)}}}const y=[_,m];return h.set(s,y),y}function validatePropName(s){return s[0]!=="$"}function getType(s){const a=s&&s.toString().match(/^\s*function (\w+)/);return a?a[1]:s===null?"null":""}function isSameType(s,a){return getType(s)===getType(a)}function getTypeIndex(s,a){return isArray$1(a)?a.findIndex(l=>isSameType(l,s)):isFunction(a)&&isSameType(a,s)?0:-1}const isInternalKey=s=>s[0]==="_"||s==="$stable",normalizeSlotValue=s=>isArray$1(s)?s.map(normalizeVNode):[normalizeVNode(s)],normalizeSlot=(s,a,l)=>{const h=withCtx((...d)=>normalizeSlotValue(a(...d)),l);return h._c=!1,h},normalizeObjectSlots=(s,a,l)=>{const h=s._ctx;for(const d in s){if(isInternalKey(d))continue;const v=s[d];if(isFunction(v))a[d]=normalizeSlot(d,v,h);else if(v!=null){const _=normalizeSlotValue(v);a[d]=()=>_}}},normalizeVNodeSlots=(s,a)=>{const l=normalizeSlotValue(a);s.slots.default=()=>l},initSlots=(s,a)=>{if(s.vnode.shapeFlag&32){const l=a._;l?(s.slots=toRaw(a),def(a,"_",l)):normalizeObjectSlots(a,s.slots={})}else s.slots={},a&&normalizeVNodeSlots(s,a);def(s.slots,InternalObjectKey,1)},updateSlots=(s,a,l)=>{const{vnode:h,slots:d}=s;let v=!0,_=EMPTY_OBJ;if(h.shapeFlag&32){const m=a._;m?l&&m===1?v=!1:(extend(d,a),!l&&m===1&&delete d._):(v=!a.$stable,normalizeObjectSlots(a,d)),_=a}else a&&(normalizeVNodeSlots(s,a),_={default:1});if(v)for(const m in d)!isInternalKey(m)&&!(m in _)&&delete d[m]};function invokeDirectiveHook(s,a,l,h){const d=s.dirs,v=a&&a.dirs;for(let _=0;_<d.length;_++){const m=d[_];v&&(m.oldValue=v[_].value);let g=m.dir[h];g&&(pauseTracking(),callWithAsyncErrorHandling(g,l,8,[s.el,m,s,a]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(s,a){return function(h,d=null){isFunction(h)||(h=Object.assign({},h)),d!=null&&!isObject(d)&&(d=null);const v=createAppContext(),_=new Set;let m=!1;const g=v.app={_uid:uid$1++,_component:h,_props:d,_container:null,_context:v,_instance:null,version,get config(){return v.config},set config(y){},use(y,...T){return _.has(y)||(y&&isFunction(y.install)?(_.add(y),y.install(g,...T)):isFunction(y)&&(_.add(y),y(g,...T))),g},mixin(y){return v.mixins.includes(y)||v.mixins.push(y),g},component(y,T){return T?(v.components[y]=T,g):v.components[y]},directive(y,T){return T?(v.directives[y]=T,g):v.directives[y]},mount(y,T,E){if(!m){const b=createVNode(h,d);return b.appContext=v,T&&a?a(b,y):s(b,y,E),m=!0,g._container=y,y.__vue_app__=g,getExposeProxy(b.component)||b.component.proxy}},unmount(){m&&(s(null,g._container),delete g._container.__vue_app__)},provide(y,T){return v.provides[y]=T,g}};return g}}function setRef(s,a,l,h,d=!1){if(isArray$1(s)){s.forEach((b,R)=>setRef(b,a&&(isArray$1(a)?a[R]:a),l,h,d));return}if(isAsyncWrapper(h)&&!d)return;const v=h.shapeFlag&4?getExposeProxy(h.component)||h.component.proxy:h.el,_=d?null:v,{i:m,r:g}=s,y=a&&a.r,T=m.refs===EMPTY_OBJ?m.refs={}:m.refs,E=m.setupState;if(y!=null&&y!==g&&(isString(y)?(T[y]=null,hasOwn(E,y)&&(E[y]=null)):isRef(y)&&(y.value=null)),isFunction(g))callWithErrorHandling(g,m,12,[_,T]);else{const b=isString(g),R=isRef(g);if(b||R){const I=()=>{if(s.f){const P=b?T[g]:g.value;d?isArray$1(P)&&remove(P,v):isArray$1(P)?P.includes(v)||P.push(v):b?(T[g]=[v],hasOwn(E,g)&&(E[g]=T[g])):(g.value=[v],s.k&&(T[s.k]=g.value))}else b?(T[g]=_,hasOwn(E,g)&&(E[g]=_)):isRef(g)&&(g.value=_,s.k&&(T[s.k]=_))};_?(I.id=-1,queuePostRenderEffect(I,l)):I()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(s){return baseCreateRenderer(s)}function baseCreateRenderer(s,a){const l=getGlobalThis();l.__VUE__=!0;const{insert:h,remove:d,patchProp:v,createElement:_,createText:m,createComment:g,setText:y,setElementText:T,parentNode:E,nextSibling:b,setScopeId:R=NOOP,cloneNode:I,insertStaticContent:P}=s,C=(A,N,L,B=null,G=null,Y=null,K=!1,z=null,W=!!N.dynamicChildren)=>{if(A===N)return;A&&!isSameVNodeType(A,N)&&(B=Re(A),le(A,G,Y,!0),A=null),N.patchFlag===-2&&(W=!1,N.dynamicChildren=null);const{type:V,ref:ne,shapeFlag:te}=N;switch(V){case Text$1:S(A,N,L,B);break;case Comment:O(A,N,L,B);break;case Static:A==null&&w(N,L,B,K);break;case Fragment:se(A,N,L,B,G,Y,K,z,W);break;default:te&1?M(A,N,L,B,G,Y,K,z,W):te&6?_e(A,N,L,B,G,Y,K,z,W):(te&64||te&128)&&V.process(A,N,L,B,G,Y,K,z,W,ge)}ne!=null&&G&&setRef(ne,A&&A.ref,Y,N||A,!N)},S=(A,N,L,B)=>{if(A==null)h(N.el=m(N.children),L,B);else{const G=N.el=A.el;N.children!==A.children&&y(G,N.children)}},O=(A,N,L,B)=>{A==null?h(N.el=g(N.children||""),L,B):N.el=A.el},w=(A,N,L,B)=>{[A.el,A.anchor]=P(A.children,N,L,B,A.el,A.anchor)},U=({el:A,anchor:N},L,B)=>{let G;for(;A&&A!==N;)G=b(A),h(A,L,B),A=G;h(N,L,B)},F=({el:A,anchor:N})=>{let L;for(;A&&A!==N;)L=b(A),d(A),A=L;d(N)},M=(A,N,L,B,G,Y,K,z,W)=>{K=K||N.type==="svg",A==null?$(N,L,B,G,Y,K,z,W):X(A,N,G,Y,K,z,W)},$=(A,N,L,B,G,Y,K,z)=>{let W,V;const{type:ne,props:te,shapeFlag:ie,transition:ue,patchFlag:fe,dirs:be}=A;if(A.el&&I!==void 0&&fe===-1)W=A.el=I(A.el);else{if(W=A.el=_(A.type,Y,te&&te.is,te),ie&8?T(W,A.children):ie&16&&D(A.children,W,null,B,G,Y&&ne!=="foreignObject",K,z),be&&invokeDirectiveHook(A,null,B,"created"),te){for(const Ee in te)Ee!=="value"&&!isReservedProp(Ee)&&v(W,Ee,null,te[Ee],Y,A.children,B,G,ve);"value"in te&&v(W,"value",null,te.value),(V=te.onVnodeBeforeMount)&&invokeVNodeHook(V,B,A)}j(W,A,A.scopeId,K,B)}be&&invokeDirectiveHook(A,null,B,"beforeMount");const ye=(!G||G&&!G.pendingBranch)&&ue&&!ue.persisted;ye&&ue.beforeEnter(W),h(W,N,L),((V=te&&te.onVnodeMounted)||ye||be)&&queuePostRenderEffect(()=>{V&&invokeVNodeHook(V,B,A),ye&&ue.enter(W),be&&invokeDirectiveHook(A,null,B,"mounted")},G)},j=(A,N,L,B,G)=>{if(L&&R(A,L),B)for(let Y=0;Y<B.length;Y++)R(A,B[Y]);if(G){let Y=G.subTree;if(N===Y){const K=G.vnode;j(A,K,K.scopeId,K.slotScopeIds,G.parent)}}},D=(A,N,L,B,G,Y,K,z,W=0)=>{for(let V=W;V<A.length;V++){const ne=A[V]=z?cloneIfMounted(A[V]):normalizeVNode(A[V]);C(null,ne,N,L,B,G,Y,K,z)}},X=(A,N,L,B,G,Y,K)=>{const z=N.el=A.el;let{patchFlag:W,dynamicChildren:V,dirs:ne}=N;W|=A.patchFlag&16;const te=A.props||EMPTY_OBJ,ie=N.props||EMPTY_OBJ;let ue;L&&toggleRecurse(L,!1),(ue=ie.onVnodeBeforeUpdate)&&invokeVNodeHook(ue,L,N,A),ne&&invokeDirectiveHook(N,A,L,"beforeUpdate"),L&&toggleRecurse(L,!0);const fe=G&&N.type!=="foreignObject";if(V?Z(A.dynamicChildren,V,z,L,B,fe,Y):K||he(A,N,z,null,L,B,fe,Y,!1),W>0){if(W&16)ee(z,N,te,ie,L,B,G);else if(W&2&&te.class!==ie.class&&v(z,"class",null,ie.class,G),W&4&&v(z,"style",te.style,ie.style,G),W&8){const be=N.dynamicProps;for(let ye=0;ye<be.length;ye++){const Ee=be[ye],Pe=te[Ee],Ae=ie[Ee];(Ae!==Pe||Ee==="value")&&v(z,Ee,Pe,Ae,G,A.children,L,B,ve)}}W&1&&A.children!==N.children&&T(z,N.children)}else!K&&V==null&&ee(z,N,te,ie,L,B,G);((ue=ie.onVnodeUpdated)||ne)&&queuePostRenderEffect(()=>{ue&&invokeVNodeHook(ue,L,N,A),ne&&invokeDirectiveHook(N,A,L,"updated")},B)},Z=(A,N,L,B,G,Y,K)=>{for(let z=0;z<N.length;z++){const W=A[z],V=N[z],ne=W.el&&(W.type===Fragment||!isSameVNodeType(W,V)||W.shapeFlag&70)?E(W.el):L;C(W,V,ne,null,B,G,Y,K,!0)}},ee=(A,N,L,B,G,Y,K)=>{if(L!==B){for(const z in B){if(isReservedProp(z))continue;const W=B[z],V=L[z];W!==V&&z!=="value"&&v(A,z,V,W,K,N.children,G,Y,ve)}if(L!==EMPTY_OBJ)for(const z in L)!isReservedProp(z)&&!(z in B)&&v(A,z,L[z],null,K,N.children,G,Y,ve);"value"in B&&v(A,"value",L.value,B.value)}},se=(A,N,L,B,G,Y,K,z,W)=>{const V=N.el=A?A.el:m(""),ne=N.anchor=A?A.anchor:m("");let{patchFlag:te,dynamicChildren:ie,slotScopeIds:ue}=N;ue&&(z=z?z.concat(ue):ue),A==null?(h(V,L,B),h(ne,L,B),D(N.children,L,ne,G,Y,K,z,W)):te>0&&te&64&&ie&&A.dynamicChildren?(Z(A.dynamicChildren,ie,L,G,Y,K,z),(N.key!=null||G&&N===G.subTree)&&traverseStaticChildren(A,N,!0)):he(A,N,L,ne,G,Y,K,z,W)},_e=(A,N,L,B,G,Y,K,z,W)=>{N.slotScopeIds=z,A==null?N.shapeFlag&512?G.ctx.activate(N,L,B,K,W):J(N,L,B,G,Y,K,W):q(A,N,W)},J=(A,N,L,B,G,Y,K)=>{const z=A.component=createComponentInstance(A,B,G);if(isKeepAlive(A)&&(z.ctx.renderer=ge),setupComponent(z),z.asyncDep){if(G&&G.registerDep(z,Q),!A.el){const W=z.subTree=createVNode(Comment);O(null,W,N,L)}return}Q(z,A,N,L,G,Y,K)},q=(A,N,L)=>{const B=N.component=A.component;if(shouldUpdateComponent(A,N,L))if(B.asyncDep&&!B.asyncResolved){ae(B,N,L);return}else B.next=N,invalidateJob(B.update),B.update();else N.component=A.component,N.el=A.el,B.vnode=N},Q=(A,N,L,B,G,Y,K)=>{const z=()=>{if(A.isMounted){let{next:ne,bu:te,u:ie,parent:ue,vnode:fe}=A,be=ne,ye;toggleRecurse(A,!1),ne?(ne.el=fe.el,ae(A,ne,K)):ne=fe,te&&invokeArrayFns(te),(ye=ne.props&&ne.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ye,ue,ne,fe),toggleRecurse(A,!0);const Ee=renderComponentRoot(A),Pe=A.subTree;A.subTree=Ee,C(Pe,Ee,E(Pe.el),Re(Pe),A,G,Y),ne.el=Ee.el,be===null&&updateHOCHostEl(A,Ee.el),ie&&queuePostRenderEffect(ie,G),(ye=ne.props&&ne.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ye,ue,ne,fe),G)}else{let ne;const{el:te,props:ie}=N,{bm:ue,m:fe,parent:be}=A,ye=isAsyncWrapper(N);if(toggleRecurse(A,!1),ue&&invokeArrayFns(ue),!ye&&(ne=ie&&ie.onVnodeBeforeMount)&&invokeVNodeHook(ne,be,N),toggleRecurse(A,!0),te&&me){const Ee=()=>{A.subTree=renderComponentRoot(A),me(te,A.subTree,A,G,null)};ye?N.type.__asyncLoader().then(()=>!A.isUnmounted&&Ee()):Ee()}else{const Ee=A.subTree=renderComponentRoot(A);C(null,Ee,L,B,A,G,Y),N.el=Ee.el}if(fe&&queuePostRenderEffect(fe,G),!ye&&(ne=ie&&ie.onVnodeMounted)){const Ee=N;queuePostRenderEffect(()=>invokeVNodeHook(ne,be,Ee),G)}N.shapeFlag&256&&A.a&&queuePostRenderEffect(A.a,G),A.isMounted=!0,N=L=B=null}},W=A.effect=new ReactiveEffect(z,()=>queueJob(A.update),A.scope),V=A.update=W.run.bind(W);V.id=A.uid,toggleRecurse(A,!0),V()},ae=(A,N,L)=>{N.component=A;const B=A.vnode.props;A.vnode=N,A.next=null,updateProps(A,N.props,B,L),updateSlots(A,N.children,L),pauseTracking(),flushPreFlushCbs(void 0,A.update),resetTracking()},he=(A,N,L,B,G,Y,K,z,W=!1)=>{const V=A&&A.children,ne=A?A.shapeFlag:0,te=N.children,{patchFlag:ie,shapeFlag:ue}=N;if(ie>0){if(ie&128){re(V,te,L,B,G,Y,K,z,W);return}else if(ie&256){k(V,te,L,B,G,Y,K,z,W);return}}ue&8?(ne&16&&ve(V,G,Y),te!==V&&T(L,te)):ne&16?ue&16?re(V,te,L,B,G,Y,K,z,W):ve(V,G,Y,!0):(ne&8&&T(L,""),ue&16&&D(te,L,B,G,Y,K,z,W))},k=(A,N,L,B,G,Y,K,z,W)=>{A=A||EMPTY_ARR,N=N||EMPTY_ARR;const V=A.length,ne=N.length,te=Math.min(V,ne);let ie;for(ie=0;ie<te;ie++){const ue=N[ie]=W?cloneIfMounted(N[ie]):normalizeVNode(N[ie]);C(A[ie],ue,L,null,G,Y,K,z,W)}V>ne?ve(A,G,Y,!0,!1,te):D(N,L,B,G,Y,K,z,W,te)},re=(A,N,L,B,G,Y,K,z,W)=>{let V=0;const ne=N.length;let te=A.length-1,ie=ne-1;for(;V<=te&&V<=ie;){const ue=A[V],fe=N[V]=W?cloneIfMounted(N[V]):normalizeVNode(N[V]);if(isSameVNodeType(ue,fe))C(ue,fe,L,null,G,Y,K,z,W);else break;V++}for(;V<=te&&V<=ie;){const ue=A[te],fe=N[ie]=W?cloneIfMounted(N[ie]):normalizeVNode(N[ie]);if(isSameVNodeType(ue,fe))C(ue,fe,L,null,G,Y,K,z,W);else break;te--,ie--}if(V>te){if(V<=ie){const ue=ie+1,fe=ue<ne?N[ue].el:B;for(;V<=ie;)C(null,N[V]=W?cloneIfMounted(N[V]):normalizeVNode(N[V]),L,fe,G,Y,K,z,W),V++}}else if(V>ie)for(;V<=te;)le(A[V],G,Y,!0),V++;else{const ue=V,fe=V,be=new Map;for(V=fe;V<=ie;V++){const Ie=N[V]=W?cloneIfMounted(N[V]):normalizeVNode(N[V]);Ie.key!=null&&be.set(Ie.key,V)}let ye,Ee=0;const Pe=ie-fe+1;let Ae=!1,Le=0;const Ne=new Array(Pe);for(V=0;V<Pe;V++)Ne[V]=0;for(V=ue;V<=te;V++){const Ie=A[V];if(Ee>=Pe){le(Ie,G,Y,!0);continue}let Se;if(Ie.key!=null)Se=be.get(Ie.key);else for(ye=fe;ye<=ie;ye++)if(Ne[ye-fe]===0&&isSameVNodeType(Ie,N[ye])){Se=ye;break}Se===void 0?le(Ie,G,Y,!0):(Ne[Se-fe]=V+1,Se>=Le?Le=Se:Ae=!0,C(Ie,N[Se],L,null,G,Y,K,z,W),Ee++)}const Be=Ae?getSequence(Ne):EMPTY_ARR;for(ye=Be.length-1,V=Pe-1;V>=0;V--){const Ie=fe+V,Se=N[Ie],De=Ie+1<ne?N[Ie+1].el:B;Ne[V]===0?C(null,Se,L,De,G,Y,K,z,W):Ae&&(ye<0||V!==Be[ye]?oe(Se,L,De,2):ye--)}}},oe=(A,N,L,B,G=null)=>{const{el:Y,type:K,transition:z,children:W,shapeFlag:V}=A;if(V&6){oe(A.component.subTree,N,L,B);return}if(V&128){A.suspense.move(N,L,B);return}if(V&64){K.move(A,N,L,ge);return}if(K===Fragment){h(Y,N,L);for(let te=0;te<W.length;te++)oe(W[te],N,L,B);h(A.anchor,N,L);return}if(K===Static){U(A,N,L);return}if(B!==2&&V&1&&z)if(B===0)z.beforeEnter(Y),h(Y,N,L),queuePostRenderEffect(()=>z.enter(Y),G);else{const{leave:te,delayLeave:ie,afterLeave:ue}=z,fe=()=>h(Y,N,L),be=()=>{te(Y,()=>{fe(),ue&&ue()})};ie?ie(Y,fe,be):be()}else h(Y,N,L)},le=(A,N,L,B=!1,G=!1)=>{const{type:Y,props:K,ref:z,children:W,dynamicChildren:V,shapeFlag:ne,patchFlag:te,dirs:ie}=A;if(z!=null&&setRef(z,null,L,A,!0),ne&256){N.ctx.deactivate(A);return}const ue=ne&1&&ie,fe=!isAsyncWrapper(A);let be;if(fe&&(be=K&&K.onVnodeBeforeUnmount)&&invokeVNodeHook(be,N,A),ne&6)pe(A.component,L,B);else{if(ne&128){A.suspense.unmount(L,B);return}ue&&invokeDirectiveHook(A,null,N,"beforeUnmount"),ne&64?A.type.remove(A,N,L,G,ge,B):V&&(Y!==Fragment||te>0&&te&64)?ve(V,N,L,!1,!0):(Y===Fragment&&te&384||!G&&ne&16)&&ve(W,N,L),B&&de(A)}(fe&&(be=K&&K.onVnodeUnmounted)||ue)&&queuePostRenderEffect(()=>{be&&invokeVNodeHook(be,N,A),ue&&invokeDirectiveHook(A,null,N,"unmounted")},L)},de=A=>{const{type:N,el:L,anchor:B,transition:G}=A;if(N===Fragment){xe(L,B);return}if(N===Static){F(A);return}const Y=()=>{d(L),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(A.shapeFlag&1&&G&&!G.persisted){const{leave:K,delayLeave:z}=G,W=()=>K(L,Y);z?z(A.el,Y,W):W()}else Y()},xe=(A,N)=>{let L;for(;A!==N;)L=b(A),d(A),A=L;d(N)},pe=(A,N,L)=>{const{bum:B,scope:G,update:Y,subTree:K,um:z}=A;B&&invokeArrayFns(B),G.stop(),Y&&(Y.active=!1,le(K,A,N,L)),z&&queuePostRenderEffect(z,N),queuePostRenderEffect(()=>{A.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},ve=(A,N,L,B=!1,G=!1,Y=0)=>{for(let K=Y;K<A.length;K++)le(A[K],N,L,B,G)},Re=A=>A.shapeFlag&6?Re(A.component.subTree):A.shapeFlag&128?A.suspense.next():b(A.anchor||A.el),Te=(A,N,L)=>{A==null?N._vnode&&le(N._vnode,null,null,!0):C(N._vnode||null,A,N,null,null,null,L),flushPostFlushCbs(),N._vnode=A},ge={p:C,um:le,m:oe,r:de,mt:J,mc:D,pc:he,pbc:Z,n:Re,o:s};let ce,me;return a&&([ce,me]=a(ge)),{render:Te,hydrate:ce,createApp:createAppAPI(Te,ce)}}function toggleRecurse({effect:s,update:a},l){s.allowRecurse=a.allowRecurse=l}function traverseStaticChildren(s,a,l=!1){const h=s.children,d=a.children;if(isArray$1(h)&&isArray$1(d))for(let v=0;v<h.length;v++){const _=h[v];let m=d[v];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=d[v]=cloneIfMounted(d[v]),m.el=_.el),l||traverseStaticChildren(_,m))}}function getSequence(s){const a=s.slice(),l=[0];let h,d,v,_,m;const g=s.length;for(h=0;h<g;h++){const y=s[h];if(y!==0){if(d=l[l.length-1],s[d]<y){a[h]=d,l.push(h);continue}for(v=0,_=l.length-1;v<_;)m=v+_>>1,s[l[m]]<y?v=m+1:_=m;y<s[l[v]]&&(v>0&&(a[h]=l[v-1]),l[v]=h)}}for(v=l.length,_=l[v-1];v-- >0;)l[v]=_,_=a[_];return l}const isTeleport=s=>s.__isTeleport,NULL_DYNAMIC_COMPONENT=Symbol(),Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(s=!1){blockStack.push(currentBlock=s?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(s){isBlockTreeEnabled+=s}function setupBlock(s){return s.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(s),s}function createElementBlock(s,a,l,h,d,v){return setupBlock(createBaseVNode(s,a,l,h,d,v,!0))}function createBlock(s,a,l,h,d){return setupBlock(createVNode(s,a,l,h,d,!0))}function isVNode(s){return s?s.__v_isVNode===!0:!1}function isSameVNodeType(s,a){return s.type===a.type&&s.key===a.key}const InternalObjectKey="__vInternal",normalizeKey=({key:s})=>s!=null?s:null,normalizeRef=({ref:s,ref_key:a,ref_for:l})=>s!=null?isString(s)||isRef(s)||isFunction(s)?{i:currentRenderingInstance,r:s,k:a,f:!!l}:s:null;function createBaseVNode(s,a=null,l=null,h=0,d=null,v=s===Fragment?0:1,_=!1,m=!1){const g={__v_isVNode:!0,__v_skip:!0,type:s,props:a,key:a&&normalizeKey(a),ref:a&&normalizeRef(a),scopeId:currentScopeId,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:v,patchFlag:h,dynamicProps:d,dynamicChildren:null,appContext:null};return m?(normalizeChildren(g,l),v&128&&s.normalize(g)):l&&(g.shapeFlag|=isString(l)?8:16),isBlockTreeEnabled>0&&!_&&currentBlock&&(g.patchFlag>0||v&6)&&g.patchFlag!==32&&currentBlock.push(g),g}const createVNode=_createVNode;function _createVNode(s,a=null,l=null,h=0,d=null,v=!1){if((!s||s===NULL_DYNAMIC_COMPONENT)&&(s=Comment),isVNode(s)){const m=cloneVNode(s,a,!0);return l&&normalizeChildren(m,l),m}if(isClassComponent(s)&&(s=s.__vccOpts),a){a=guardReactiveProps(a);let{class:m,style:g}=a;m&&!isString(m)&&(a.class=normalizeClass(m)),isObject(g)&&(isProxy(g)&&!isArray$1(g)&&(g=extend({},g)),a.style=normalizeStyle(g))}const _=isString(s)?1:isSuspense(s)?128:isTeleport(s)?64:isObject(s)?4:isFunction(s)?2:0;return createBaseVNode(s,a,l,h,d,_,v,!0)}function guardReactiveProps(s){return s?isProxy(s)||InternalObjectKey in s?extend({},s):s:null}function cloneVNode(s,a,l=!1){const{props:h,ref:d,patchFlag:v,children:_}=s,m=a?mergeProps(h||{},a):h;return{__v_isVNode:!0,__v_skip:!0,type:s.type,props:m,key:m&&normalizeKey(m),ref:a&&a.ref?l&&d?isArray$1(d)?d.concat(normalizeRef(a)):[d,normalizeRef(a)]:normalizeRef(a):d,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:_,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:a&&s.type!==Fragment?v===-1?16:v|16:v,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:s.transition,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&cloneVNode(s.ssContent),ssFallback:s.ssFallback&&cloneVNode(s.ssFallback),el:s.el,anchor:s.anchor}}function createTextVNode(s=" ",a=0){return createVNode(Text$1,null,s,a)}function normalizeVNode(s){return s==null||typeof s=="boolean"?createVNode(Comment):isArray$1(s)?createVNode(Fragment,null,s.slice()):typeof s=="object"?cloneIfMounted(s):createVNode(Text$1,null,String(s))}function cloneIfMounted(s){return s.el===null||s.memo?s:cloneVNode(s)}function normalizeChildren(s,a){let l=0;const{shapeFlag:h}=s;if(a==null)a=null;else if(isArray$1(a))l=16;else if(typeof a=="object")if(h&65){const d=a.default;d&&(d._c&&(d._d=!1),normalizeChildren(s,d()),d._c&&(d._d=!0));return}else{l=32;const d=a._;!d&&!(InternalObjectKey in a)?a._ctx=currentRenderingInstance:d===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?a._=1:(a._=2,s.patchFlag|=1024))}else isFunction(a)?(a={default:a,_ctx:currentRenderingInstance},l=32):(a=String(a),h&64?(l=16,a=[createTextVNode(a)]):l=8);s.children=a,s.shapeFlag|=l}function mergeProps(...s){const a={};for(let l=0;l<s.length;l++){const h=s[l];for(const d in h)if(d==="class")a.class!==h.class&&(a.class=normalizeClass([a.class,h.class]));else if(d==="style")a.style=normalizeStyle([a.style,h.style]);else if(isOn(d)){const v=a[d],_=h[d];_&&v!==_&&!(isArray$1(v)&&v.includes(_))&&(a[d]=v?[].concat(v,_):_)}else d!==""&&(a[d]=h[d])}return a}function invokeVNodeHook(s,a,l,h=null){callWithAsyncErrorHandling(s,a,7,[l,h])}const getPublicInstance=s=>s?isStatefulComponent(s)?getExposeProxy(s)||s.proxy:getPublicInstance(s.parent):null,publicPropertiesMap=extend(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>getPublicInstance(s.parent),$root:s=>getPublicInstance(s.root),$emit:s=>s.emit,$options:s=>resolveMergedOptions(s),$forceUpdate:s=>()=>queueJob(s.update),$nextTick:s=>nextTick.bind(s.proxy),$watch:s=>instanceWatch.bind(s)}),PublicInstanceProxyHandlers={get({_:s},a){const{ctx:l,setupState:h,data:d,props:v,accessCache:_,type:m,appContext:g}=s;let y;if(a[0]!=="$"){const R=_[a];if(R!==void 0)switch(R){case 1:return h[a];case 2:return d[a];case 4:return l[a];case 3:return v[a]}else{if(h!==EMPTY_OBJ&&hasOwn(h,a))return _[a]=1,h[a];if(d!==EMPTY_OBJ&&hasOwn(d,a))return _[a]=2,d[a];if((y=s.propsOptions[0])&&hasOwn(y,a))return _[a]=3,v[a];if(l!==EMPTY_OBJ&&hasOwn(l,a))return _[a]=4,l[a];shouldCacheAccess&&(_[a]=0)}}const T=publicPropertiesMap[a];let E,b;if(T)return a==="$attrs"&&track(s,"get",a),T(s);if((E=m.__cssModules)&&(E=E[a]))return E;if(l!==EMPTY_OBJ&&hasOwn(l,a))return _[a]=4,l[a];if(b=g.config.globalProperties,hasOwn(b,a))return b[a]},set({_:s},a,l){const{data:h,setupState:d,ctx:v}=s;return d!==EMPTY_OBJ&&hasOwn(d,a)?(d[a]=l,!0):h!==EMPTY_OBJ&&hasOwn(h,a)?(h[a]=l,!0):hasOwn(s.props,a)||a[0]==="$"&&a.slice(1)in s?!1:(v[a]=l,!0)},has({_:{data:s,setupState:a,accessCache:l,ctx:h,appContext:d,propsOptions:v}},_){let m;return!!l[_]||s!==EMPTY_OBJ&&hasOwn(s,_)||a!==EMPTY_OBJ&&hasOwn(a,_)||(m=v[0])&&hasOwn(m,_)||hasOwn(h,_)||hasOwn(publicPropertiesMap,_)||hasOwn(d.config.globalProperties,_)},defineProperty(s,a,l){return l.get!=null?s._.accessCache[a]=0:hasOwn(l,"value")&&this.set(s,a,l.value,null),Reflect.defineProperty(s,a,l)}},emptyAppContext=createAppContext();let uid$1$1=0;function createComponentInstance(s,a,l){const h=s.type,d=(a?a.appContext:s.appContext)||emptyAppContext,v={uid:uid$1$1++,vnode:s,type:h,parent:a,appContext:d,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(d.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(h,d),emitsOptions:normalizeEmitsOptions(h,d),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:h.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return v.ctx={_:v},v.root=a?a.root:v,v.emit=emit$1.bind(null,v),s.ce&&s.ce(v),v}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=s=>{currentInstance=s,s.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(s){return s.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(s,a=!1){isInSSRComponentSetup=a;const{props:l,children:h}=s.vnode,d=isStatefulComponent(s);initProps(s,l,d,a),initSlots(s,h);const v=d?setupStatefulComponent(s,a):void 0;return isInSSRComponentSetup=!1,v}function setupStatefulComponent(s,a){const l=s.type;s.accessCache=Object.create(null),s.proxy=markRaw(new Proxy(s.ctx,PublicInstanceProxyHandlers));const{setup:h}=l;if(h){const d=s.setupContext=h.length>1?createSetupContext(s):null;setCurrentInstance(s),pauseTracking();const v=callWithErrorHandling(h,s,0,[s.props,d]);if(resetTracking(),unsetCurrentInstance(),isPromise(v)){if(v.then(unsetCurrentInstance,unsetCurrentInstance),a)return v.then(_=>{handleSetupResult(s,_,a)}).catch(_=>{handleError(_,s,0)});s.asyncDep=v}else handleSetupResult(s,v,a)}else finishComponentSetup(s,a)}function handleSetupResult(s,a,l){isFunction(a)?s.type.__ssrInlineRender?s.ssrRender=a:s.render=a:isObject(a)&&(s.setupState=proxyRefs(a)),finishComponentSetup(s,l)}let compile;function finishComponentSetup(s,a,l){const h=s.type;if(!s.render){if(!a&&compile&&!h.render){const d=h.template;if(d){const{isCustomElement:v,compilerOptions:_}=s.appContext.config,{delimiters:m,compilerOptions:g}=h,y=extend(extend({isCustomElement:v,delimiters:m},_),g);h.render=compile(d,y)}}s.render=h.render||NOOP}setCurrentInstance(s),pauseTracking(),applyOptions(s),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(s){return new Proxy(s.attrs,{get(a,l){return track(s,"get","$attrs"),a[l]}})}function createSetupContext(s){const a=h=>{s.exposed=h||{}};let l;return{get attrs(){return l||(l=createAttrsProxy(s))},slots:s.slots,emit:s.emit,expose:a}}function getExposeProxy(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(proxyRefs(markRaw(s.exposed)),{get(a,l){if(l in a)return a[l];if(l in publicPropertiesMap)return publicPropertiesMap[l](s)}}))}function isClassComponent(s){return isFunction(s)&&"__vccOpts"in s}const computed=(s,a)=>computed$1(s,a,isInSSRComponentSetup),version="3.2.33",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(s,a,l)=>{a.insertBefore(s,l||null)},remove:s=>{const a=s.parentNode;a&&a.removeChild(s)},createElement:(s,a,l,h)=>{const d=a?doc.createElementNS(svgNS,s):doc.createElement(s,l?{is:l}:void 0);return s==="select"&&h&&h.multiple!=null&&d.setAttribute("multiple",h.multiple),d},createText:s=>doc.createTextNode(s),createComment:s=>doc.createComment(s),setText:(s,a)=>{s.nodeValue=a},setElementText:(s,a)=>{s.textContent=a},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>doc.querySelector(s),setScopeId(s,a){s.setAttribute(a,"")},cloneNode(s){const a=s.cloneNode(!0);return"_value"in s&&(a._value=s._value),a},insertStaticContent(s,a,l,h,d,v){const _=l?l.previousSibling:a.lastChild;if(d&&(d===v||d.nextSibling))for(;a.insertBefore(d.cloneNode(!0),l),!(d===v||!(d=d.nextSibling)););else{templateContainer.innerHTML=h?`<svg>${s}</svg>`:s;const m=templateContainer.content;if(h){const g=m.firstChild;for(;g.firstChild;)m.appendChild(g.firstChild);m.removeChild(g)}a.insertBefore(m,l)}return[_?_.nextSibling:a.firstChild,l?l.previousSibling:a.lastChild]}};function patchClass(s,a,l){const h=s._vtc;h&&(a=(a?[a,...h]:[...h]).join(" ")),a==null?s.removeAttribute("class"):l?s.setAttribute("class",a):s.className=a}function patchStyle(s,a,l){const h=s.style,d=isString(l);if(l&&!d){for(const v in l)setStyle(h,v,l[v]);if(a&&!isString(a))for(const v in a)l[v]==null&&setStyle(h,v,"")}else{const v=h.display;d?a!==l&&(h.cssText=l):a&&s.removeAttribute("style"),"_vod"in s&&(h.display=v)}}const importantRE=/\s*!important$/;function setStyle(s,a,l){if(isArray$1(l))l.forEach(h=>setStyle(s,a,h));else if(l==null&&(l=""),a.startsWith("--"))s.setProperty(a,l);else{const h=autoPrefix(s,a);importantRE.test(l)?s.setProperty(hyphenate(h),l.replace(importantRE,""),"important"):s[h]=l}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(s,a){const l=prefixCache[a];if(l)return l;let h=camelize(a);if(h!=="filter"&&h in s)return prefixCache[a]=h;h=capitalize(h);for(let d=0;d<prefixes.length;d++){const v=prefixes[d]+h;if(v in s)return prefixCache[a]=v}return a}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(s,a,l,h,d){if(h&&a.startsWith("xlink:"))l==null?s.removeAttributeNS(xlinkNS,a.slice(6,a.length)):s.setAttributeNS(xlinkNS,a,l);else{const v=isSpecialBooleanAttr(a);l==null||v&&!includeBooleanAttr(l)?s.removeAttribute(a):s.setAttribute(a,v?"":l)}}function patchDOMProp(s,a,l,h,d,v,_){if(a==="innerHTML"||a==="textContent"){h&&_(h,d,v),s[a]=l==null?"":l;return}if(a==="value"&&s.tagName!=="PROGRESS"&&!s.tagName.includes("-")){s._value=l;const g=l==null?"":l;(s.value!==g||s.tagName==="OPTION")&&(s.value=g),l==null&&s.removeAttribute(a);return}let m=!1;if(l===""||l==null){const g=typeof s[a];g==="boolean"?l=includeBooleanAttr(l):l==null&&g==="string"?(l="",m=!0):g==="number"&&(l=0,m=!0)}try{s[a]=l}catch{}m&&s.removeAttribute(a)}const[_getNow,skipTimestampCheck]=(()=>{let s=Date.now,a=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(s=()=>performance.now());const l=navigator.userAgent.match(/firefox\/(\d+)/i);a=!!(l&&Number(l[1])<=53)}return[s,a]})();let cachedNow=0;const p$1=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$1.then(reset),cachedNow=_getNow());function addEventListener(s,a,l,h){s.addEventListener(a,l,h)}function removeEventListener(s,a,l,h){s.removeEventListener(a,l,h)}function patchEvent(s,a,l,h,d=null){const v=s._vei||(s._vei={}),_=v[a];if(h&&_)_.value=h;else{const[m,g]=parseName(a);if(h){const y=v[a]=createInvoker(h,d);addEventListener(s,m,y,g)}else _&&(removeEventListener(s,m,_,g),v[a]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(s){let a;if(optionsModifierRE.test(s)){a={};let l;for(;l=s.match(optionsModifierRE);)s=s.slice(0,s.length-l[0].length),a[l[0].toLowerCase()]=!0}return[hyphenate(s.slice(2)),a]}function createInvoker(s,a){const l=h=>{const d=h.timeStamp||_getNow();(skipTimestampCheck||d>=l.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(h,l.value),a,5,[h])};return l.value=s,l.attached=getNow(),l}function patchStopImmediatePropagation(s,a){if(isArray$1(a)){const l=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{l.call(s),s._stopped=!0},a.map(h=>d=>!d._stopped&&h&&h(d))}else return a}const nativeOnRE=/^on[a-z]/,patchProp=(s,a,l,h,d=!1,v,_,m,g)=>{a==="class"?patchClass(s,h,d):a==="style"?patchStyle(s,l,h):isOn(a)?isModelListener(a)||patchEvent(s,a,l,h,_):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):shouldSetAsProp(s,a,h,d))?patchDOMProp(s,a,h,v,_,m,g):(a==="true-value"?s._trueValue=h:a==="false-value"&&(s._falseValue=h),patchAttr(s,a,h,d))};function shouldSetAsProp(s,a,l,h){return h?!!(a==="innerHTML"||a==="textContent"||a in s&&nativeOnRE.test(a)&&isFunction(l)):a==="spellcheck"||a==="draggable"||a==="translate"||a==="form"||a==="list"&&s.tagName==="INPUT"||a==="type"&&s.tagName==="TEXTAREA"||nativeOnRE.test(a)&&isString(l)?!1:a in s}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...s)=>{const a=ensureRenderer().createApp(...s),{mount:l}=a;return a.mount=h=>{const d=normalizeContainer(h);if(!d)return;const v=a._component;!isFunction(v)&&!v.render&&!v.template&&(v.template=d.innerHTML),d.innerHTML="";const _=l(d,!1,d instanceof SVGElement);return d instanceof Element&&(d.removeAttribute("v-cloak"),d.setAttribute("data-v-app","")),_},a};function normalizeContainer(s){return isString(s)?document.querySelector(s):s}function finallyConstructor(s){var a=this.constructor;return this.then(function(l){return a.resolve(s()).then(function(){return l})},function(l){return a.resolve(s()).then(function(){return a.reject(l)})})}function allSettled(s){var a=this;return new a(function(l,h){if(!(s&&typeof s.length!="undefined"))return h(new TypeError(typeof s+" "+s+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var d=Array.prototype.slice.call(s);if(d.length===0)return l([]);var v=d.length;function _(g,y){if(y&&(typeof y=="object"||typeof y=="function")){var T=y.then;if(typeof T=="function"){T.call(y,function(E){_(g,E)},function(E){d[g]={status:"rejected",reason:E},--v===0&&l(d)});return}}d[g]={status:"fulfilled",value:y},--v===0&&l(d)}for(var m=0;m<d.length;m++)_(m,d[m])})}var setTimeoutFunc=setTimeout;function isArray(s){return Boolean(s&&typeof s.length!="undefined")}function noop(){}function bind(s,a){return function(){s.apply(a,arguments)}}function Promise$1(s){if(!(this instanceof Promise$1))throw new TypeError("Promises must be constructed via new");if(typeof s!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(s,this)}function handle(s,a){for(;s._state===3;)s=s._value;if(s._state===0){s._deferreds.push(a);return}s._handled=!0,Promise$1._immediateFn(function(){var l=s._state===1?a.onFulfilled:a.onRejected;if(l===null){(s._state===1?resolve$1:reject)(a.promise,s._value);return}var h;try{h=l(s._value)}catch(d){reject(a.promise,d);return}resolve$1(a.promise,h)})}function resolve$1(s,a){try{if(a===s)throw new TypeError("A promise cannot be resolved with itself.");if(a&&(typeof a=="object"||typeof a=="function")){var l=a.then;if(a instanceof Promise$1){s._state=3,s._value=a,finale(s);return}else if(typeof l=="function"){doResolve(bind(l,a),s);return}}s._state=1,s._value=a,finale(s)}catch(h){reject(s,h)}}function reject(s,a){s._state=2,s._value=a,finale(s)}function finale(s){s._state===2&&s._deferreds.length===0&&Promise$1._immediateFn(function(){s._handled||Promise$1._unhandledRejectionFn(s._value)});for(var a=0,l=s._deferreds.length;a<l;a++)handle(s,s._deferreds[a]);s._deferreds=null}function Handler(s,a,l){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof a=="function"?a:null,this.promise=l}function doResolve(s,a){var l=!1;try{s(function(h){l||(l=!0,resolve$1(a,h))},function(h){l||(l=!0,reject(a,h))})}catch(h){if(l)return;l=!0,reject(a,h)}}Promise$1.prototype.catch=function(s){return this.then(null,s)};Promise$1.prototype.then=function(s,a){var l=new this.constructor(noop);return handle(this,new Handler(s,a,l)),l};Promise$1.prototype.finally=finallyConstructor;Promise$1.all=function(s){return new Promise$1(function(a,l){if(!isArray(s))return l(new TypeError("Promise.all accepts an array"));var h=Array.prototype.slice.call(s);if(h.length===0)return a([]);var d=h.length;function v(m,g){try{if(g&&(typeof g=="object"||typeof g=="function")){var y=g.then;if(typeof y=="function"){y.call(g,function(T){v(m,T)},l);return}}h[m]=g,--d===0&&a(h)}catch(T){l(T)}}for(var _=0;_<h.length;_++)v(_,h[_])})};Promise$1.allSettled=allSettled;Promise$1.resolve=function(s){return s&&typeof s=="object"&&s.constructor===Promise$1?s:new Promise$1(function(a){a(s)})};Promise$1.reject=function(s){return new Promise$1(function(a,l){l(s)})};Promise$1.race=function(s){return new Promise$1(function(a,l){if(!isArray(s))return l(new TypeError("Promise.race accepts an array"));for(var h=0,d=s.length;h<d;h++)Promise$1.resolve(s[h]).then(a,l)})};Promise$1._immediateFn=typeof setImmediate=="function"&&function(s){setImmediate(s)}||function(s){setTimeoutFunc(s,0)};Promise$1._unhandledRejectionFn=function(a){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(s){if(s.__esModule)return s;var a=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(l){var h=Object.getOwnPropertyDescriptor(s,l);Object.defineProperty(a,l,h.get?h:{enumerable:!0,get:function(){return s[l]}})}),a}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function shouldUseNative(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},l=0;l<10;l++)a["_"+String.fromCharCode(l)]=l;var h=Object.getOwnPropertyNames(a).map(function(v){return a[v]});if(h.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(v){d[v]=v}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(s,a){for(var l,h=toObject(s),d,v=1;v<arguments.length;v++){l=Object(arguments[v]);for(var _ in l)hasOwnProperty$1.call(l,_)&&(h[_]=l[_]);if(getOwnPropertySymbols){d=getOwnPropertySymbols(l);for(var m=0;m<d.length;m++)propIsEnumerable.call(l,d[m])&&(h[d[m]]=l[d[m]])}}return h};/*!
 * @pixi/polyfill - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof global!="undefined"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Promise$1);Object.assign||(Object.assign=objectAssign);var ONE_FRAME_TIME=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var startTime_1=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-startTime_1}}var lastTime=Date.now(),vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!globalThis.requestAnimationFrame;++x){var p=vendors[x];globalThis.requestAnimationFrame=globalThis[p+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[p+"CancelAnimationFrame"]||globalThis[p+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(s){if(typeof s!="function")throw new TypeError(s+"is not a function");var a=Date.now(),l=ONE_FRAME_TIME+lastTime-a;return l<0&&(l=0),lastTime=a,globalThis.self.setTimeout(function(){lastTime=Date.now(),s(performance.now())},l)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(s){return clearTimeout(s)});Math.sign||(Math.sign=function(a){return a=Number(a),a===0||isNaN(a)?a:a>0?1:-1});Number.isInteger||(Number.isInteger=function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);var appleIphone$1=/iPhone/i,appleIpod$1=/iPod/i,appleTablet$1=/iPad/i,appleUniversal$1=/\biOS-universal(?:.+)Mac\b/i,androidPhone$1=/\bAndroid(?:.+)Mobile\b/i,androidTablet$1=/Android/i,amazonPhone$1=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet$1=/Silk/i,windowsPhone$1=/Windows Phone/i,windowsTablet$1=/\bWindows(?:.+)ARM\b/i,otherBlackBerry$1=/BlackBerry/i,otherBlackBerry10$1=/BB10/i,otherOpera$1=/Opera Mini/i,otherChrome$1=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox$1=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13$1=function(s){return typeof s!="undefined"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream=="undefined"};function createMatch$1(s){return function(a){return a.test(s)}}function isMobile$3(s){var a={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator!="undefined"?a={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?a.userAgent=s:s&&s.userAgent&&(a={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var l=a.userAgent,h=l.split("[FBAN");typeof h[1]!="undefined"&&(l=h[0]),h=l.split("Twitter"),typeof h[1]!="undefined"&&(l=h[0]);var d=createMatch$1(l),v={apple:{phone:d(appleIphone$1)&&!d(windowsPhone$1),ipod:d(appleIpod$1),tablet:!d(appleIphone$1)&&(d(appleTablet$1)||isAppleTabletOnIos13$1(a))&&!d(windowsPhone$1),universal:d(appleUniversal$1),device:(d(appleIphone$1)||d(appleIpod$1)||d(appleTablet$1)||d(appleUniversal$1)||isAppleTabletOnIos13$1(a))&&!d(windowsPhone$1)},amazon:{phone:d(amazonPhone$1),tablet:!d(amazonPhone$1)&&d(amazonTablet$1),device:d(amazonPhone$1)||d(amazonTablet$1)},android:{phone:!d(windowsPhone$1)&&d(amazonPhone$1)||!d(windowsPhone$1)&&d(androidPhone$1),tablet:!d(windowsPhone$1)&&!d(amazonPhone$1)&&!d(androidPhone$1)&&(d(amazonTablet$1)||d(androidTablet$1)),device:!d(windowsPhone$1)&&(d(amazonPhone$1)||d(amazonTablet$1)||d(androidPhone$1)||d(androidTablet$1))||d(/\bokhttp\b/i)},windows:{phone:d(windowsPhone$1),tablet:d(windowsTablet$1),device:d(windowsPhone$1)||d(windowsTablet$1)},other:{blackberry:d(otherBlackBerry$1),blackberry10:d(otherBlackBerry10$1),opera:d(otherOpera$1),firefox:d(otherFirefox$1),chrome:d(otherChrome$1),device:d(otherBlackBerry$1)||d(otherBlackBerry10$1)||d(otherOpera$1)||d(otherFirefox$1)||d(otherChrome$1)},any:!1,phone:!1,tablet:!1};return v.any=v.apple.device||v.android.device||v.windows.device||v.other.device,v.phone=v.apple.phone||v.android.phone||v.windows.phone,v.tablet=v.apple.tablet||v.android.tablet||v.windows.tablet,v}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var isMobile$2=isMobile$3(globalThis.navigator);function maxRecommendedTextures$1(s){var a=!0;if(isMobile$2.tablet||isMobile$2.phone){if(isMobile$2.apple.device){var l=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(l){var h=parseInt(l[1],10);h<11&&(a=!1)}}if(isMobile$2.android.device){var l=navigator.userAgent.match(/Android\s([0-9.]*)/);if(l){var h=parseInt(l[1],10);h<7&&(a=!1)}}}return a?s:4}function canUploadSameBuffer$1(){return!isMobile$2.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$5;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$5||(ENV$5={}));var RENDERER_TYPE$5;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$5||(RENDERER_TYPE$5={}));var BUFFER_BITS$5;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$5||(BUFFER_BITS$5={}));var BLEND_MODES$5;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$5||(BLEND_MODES$5={}));var DRAW_MODES$5;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$5||(DRAW_MODES$5={}));var FORMATS$5;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$5||(FORMATS$5={}));var TARGETS$5;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$5||(TARGETS$5={}));var TYPES$5;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$5||(TYPES$5={}));var SAMPLER_TYPES$5;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$5||(SAMPLER_TYPES$5={}));var SCALE_MODES$5;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$5||(SCALE_MODES$5={}));var WRAP_MODES$5;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$5||(WRAP_MODES$5={}));var MIPMAP_MODES$5;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$5||(MIPMAP_MODES$5={}));var ALPHA_MODES$5;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$5||(ALPHA_MODES$5={}));var CLEAR_MODES$5;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$5||(CLEAR_MODES$5={}));var GC_MODES$5;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$5||(GC_MODES$5={}));var PRECISION$5;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$5||(PRECISION$5={}));var MASK_TYPES$5;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE"})(MASK_TYPES$5||(MASK_TYPES$5={}));var MSAA_QUALITY$5;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$5||(MSAA_QUALITY$5={}));var BUFFER_TYPE$5;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$5||(BUFFER_TYPE$5={}));var settings$1={MIPMAP_TEXTURES:MIPMAP_MODES$5.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$5.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures$1(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$5.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$5.CLAMP,SCALE_MODE:SCALE_MODES$5.LINEAR,PRECISION_VERTEX:PRECISION$5.HIGH,PRECISION_FRAGMENT:isMobile$2.apple.device?PRECISION$5.HIGH:PRECISION$5.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer$1(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},eventemitter3={exports:{}};(function(s){var a=Object.prototype.hasOwnProperty,l="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(l=!1));function d(g,y,T){this.fn=g,this.context=y,this.once=T||!1}function v(g,y,T,E,b){if(typeof T!="function")throw new TypeError("The listener must be a function");var R=new d(T,E||g,b),I=l?l+y:y;return g._events[I]?g._events[I].fn?g._events[I]=[g._events[I],R]:g._events[I].push(R):(g._events[I]=R,g._eventsCount++),g}function _(g,y){--g._eventsCount===0?g._events=new h:delete g._events[y]}function m(){this._events=new h,this._eventsCount=0}m.prototype.eventNames=function(){var y=[],T,E;if(this._eventsCount===0)return y;for(E in T=this._events)a.call(T,E)&&y.push(l?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(T)):y},m.prototype.listeners=function(y){var T=l?l+y:y,E=this._events[T];if(!E)return[];if(E.fn)return[E.fn];for(var b=0,R=E.length,I=new Array(R);b<R;b++)I[b]=E[b].fn;return I},m.prototype.listenerCount=function(y){var T=l?l+y:y,E=this._events[T];return E?E.fn?1:E.length:0},m.prototype.emit=function(y,T,E,b,R,I){var P=l?l+y:y;if(!this._events[P])return!1;var C=this._events[P],S=arguments.length,O,w;if(C.fn){switch(C.once&&this.removeListener(y,C.fn,void 0,!0),S){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,T),!0;case 3:return C.fn.call(C.context,T,E),!0;case 4:return C.fn.call(C.context,T,E,b),!0;case 5:return C.fn.call(C.context,T,E,b,R),!0;case 6:return C.fn.call(C.context,T,E,b,R,I),!0}for(w=1,O=new Array(S-1);w<S;w++)O[w-1]=arguments[w];C.fn.apply(C.context,O)}else{var U=C.length,F;for(w=0;w<U;w++)switch(C[w].once&&this.removeListener(y,C[w].fn,void 0,!0),S){case 1:C[w].fn.call(C[w].context);break;case 2:C[w].fn.call(C[w].context,T);break;case 3:C[w].fn.call(C[w].context,T,E);break;case 4:C[w].fn.call(C[w].context,T,E,b);break;default:if(!O)for(F=1,O=new Array(S-1);F<S;F++)O[F-1]=arguments[F];C[w].fn.apply(C[w].context,O)}}return!0},m.prototype.on=function(y,T,E){return v(this,y,T,E,!1)},m.prototype.once=function(y,T,E){return v(this,y,T,E,!0)},m.prototype.removeListener=function(y,T,E,b){var R=l?l+y:y;if(!this._events[R])return this;if(!T)return _(this,R),this;var I=this._events[R];if(I.fn)I.fn===T&&(!b||I.once)&&(!E||I.context===E)&&_(this,R);else{for(var P=0,C=[],S=I.length;P<S;P++)(I[P].fn!==T||b&&!I[P].once||E&&I[P].context!==E)&&C.push(I[P]);C.length?this._events[R]=C.length===1?C[0]:C:_(this,R)}return this},m.prototype.removeAllListeners=function(y){var T;return y?(T=l?l+y:y,this._events[T]&&_(this,T)):(this._events=new h,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=l,m.EventEmitter=m,s.exports=m})(eventemitter3);var EventEmitter=eventemitter3.exports,earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(s,a,l){l=l||2;var h=a&&a.length,d=h?a[0]*l:s.length,v=linkedList(s,0,d,l,!0),_=[];if(!v||v.next===v.prev)return _;var m,g,y,T,E,b,R;if(h&&(v=eliminateHoles(s,a,v,l)),s.length>80*l){m=y=s[0],g=T=s[1];for(var I=l;I<d;I+=l)E=s[I],b=s[I+1],E<m&&(m=E),b<g&&(g=b),E>y&&(y=E),b>T&&(T=b);R=Math.max(y-m,T-g),R=R!==0?32767/R:0}return earcutLinked(v,_,l,m,g,R,0),_}function linkedList(s,a,l,h,d){var v,_;if(d===signedArea(s,a,l,h)>0)for(v=a;v<l;v+=h)_=insertNode(v,s[v],s[v+1],_);else for(v=l-h;v>=a;v-=h)_=insertNode(v,s[v],s[v+1],_);return _&&equals(_,_.next)&&(removeNode(_),_=_.next),_}function filterPoints(s,a){if(!s)return s;a||(a=s);var l=s,h;do if(h=!1,!l.steiner&&(equals(l,l.next)||area(l.prev,l,l.next)===0)){if(removeNode(l),l=a=l.prev,l===l.next)break;h=!0}else l=l.next;while(h||l!==a);return a}function earcutLinked(s,a,l,h,d,v,_){if(!!s){!_&&v&&indexCurve(s,h,d,v);for(var m=s,g,y;s.prev!==s.next;){if(g=s.prev,y=s.next,v?isEarHashed(s,h,d,v):isEar(s)){a.push(g.i/l|0),a.push(s.i/l|0),a.push(y.i/l|0),removeNode(s),s=y.next,m=y.next;continue}if(s=y,s===m){_?_===1?(s=cureLocalIntersections(filterPoints(s),a,l),earcutLinked(s,a,l,h,d,v,2)):_===2&&splitEarcut(s,a,l,h,d,v):earcutLinked(filterPoints(s),a,l,h,d,v,1);break}}}}function isEar(s){var a=s.prev,l=s,h=s.next;if(area(a,l,h)>=0)return!1;for(var d=a.x,v=l.x,_=h.x,m=a.y,g=l.y,y=h.y,T=d<v?d<_?d:_:v<_?v:_,E=m<g?m<y?m:y:g<y?g:y,b=d>v?d>_?d:_:v>_?v:_,R=m>g?m>y?m:y:g>y?g:y,I=h.next;I!==a;){if(I.x>=T&&I.x<=b&&I.y>=E&&I.y<=R&&pointInTriangle(d,m,v,g,_,y,I.x,I.y)&&area(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function isEarHashed(s,a,l,h){var d=s.prev,v=s,_=s.next;if(area(d,v,_)>=0)return!1;for(var m=d.x,g=v.x,y=_.x,T=d.y,E=v.y,b=_.y,R=m<g?m<y?m:y:g<y?g:y,I=T<E?T<b?T:b:E<b?E:b,P=m>g?m>y?m:y:g>y?g:y,C=T>E?T>b?T:b:E>b?E:b,S=zOrder(R,I,a,l,h),O=zOrder(P,C,a,l,h),w=s.prevZ,U=s.nextZ;w&&w.z>=S&&U&&U.z<=O;){if(w.x>=R&&w.x<=P&&w.y>=I&&w.y<=C&&w!==d&&w!==_&&pointInTriangle(m,T,g,E,y,b,w.x,w.y)&&area(w.prev,w,w.next)>=0||(w=w.prevZ,U.x>=R&&U.x<=P&&U.y>=I&&U.y<=C&&U!==d&&U!==_&&pointInTriangle(m,T,g,E,y,b,U.x,U.y)&&area(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;w&&w.z>=S;){if(w.x>=R&&w.x<=P&&w.y>=I&&w.y<=C&&w!==d&&w!==_&&pointInTriangle(m,T,g,E,y,b,w.x,w.y)&&area(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;U&&U.z<=O;){if(U.x>=R&&U.x<=P&&U.y>=I&&U.y<=C&&U!==d&&U!==_&&pointInTriangle(m,T,g,E,y,b,U.x,U.y)&&area(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function cureLocalIntersections(s,a,l){var h=s;do{var d=h.prev,v=h.next.next;!equals(d,v)&&intersects(d,h,h.next,v)&&locallyInside(d,v)&&locallyInside(v,d)&&(a.push(d.i/l|0),a.push(h.i/l|0),a.push(v.i/l|0),removeNode(h),removeNode(h.next),h=s=v),h=h.next}while(h!==s);return filterPoints(h)}function splitEarcut(s,a,l,h,d,v){var _=s;do{for(var m=_.next.next;m!==_.prev;){if(_.i!==m.i&&isValidDiagonal(_,m)){var g=splitPolygon(_,m);_=filterPoints(_,_.next),g=filterPoints(g,g.next),earcutLinked(_,a,l,h,d,v,0),earcutLinked(g,a,l,h,d,v,0);return}m=m.next}_=_.next}while(_!==s)}function eliminateHoles(s,a,l,h){var d=[],v,_,m,g,y;for(v=0,_=a.length;v<_;v++)m=a[v]*h,g=v<_-1?a[v+1]*h:s.length,y=linkedList(s,m,g,h,!1),y===y.next&&(y.steiner=!0),d.push(getLeftmost(y));for(d.sort(compareX),v=0;v<d.length;v++)l=eliminateHole(d[v],l);return l}function compareX(s,a){return s.x-a.x}function eliminateHole(s,a){var l=findHoleBridge(s,a);if(!l)return a;var h=splitPolygon(l,s);return filterPoints(h,h.next),filterPoints(l,l.next)}function findHoleBridge(s,a){var l=a,h=s.x,d=s.y,v=-1/0,_;do{if(d<=l.y&&d>=l.next.y&&l.next.y!==l.y){var m=l.x+(d-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(m<=h&&m>v&&(v=m,_=l.x<l.next.x?l:l.next,m===h))return _}l=l.next}while(l!==a);if(!_)return null;var g=_,y=_.x,T=_.y,E=1/0,b;l=_;do h>=l.x&&l.x>=y&&h!==l.x&&pointInTriangle(d<T?h:v,d,y,T,d<T?v:h,d,l.x,l.y)&&(b=Math.abs(d-l.y)/(h-l.x),locallyInside(l,s)&&(b<E||b===E&&(l.x>_.x||l.x===_.x&&sectorContainsSector(_,l)))&&(_=l,E=b)),l=l.next;while(l!==g);return _}function sectorContainsSector(s,a){return area(s.prev,s,a.prev)<0&&area(a.next,s,s.next)<0}function indexCurve(s,a,l,h){var d=s;do d.z===0&&(d.z=zOrder(d.x,d.y,a,l,h)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next;while(d!==s);d.prevZ.nextZ=null,d.prevZ=null,sortLinked(d)}function sortLinked(s){var a,l,h,d,v,_,m,g,y=1;do{for(l=s,s=null,v=null,_=0;l;){for(_++,h=l,m=0,a=0;a<y&&(m++,h=h.nextZ,!!h);a++);for(g=y;m>0||g>0&&h;)m!==0&&(g===0||!h||l.z<=h.z)?(d=l,l=l.nextZ,m--):(d=h,h=h.nextZ,g--),v?v.nextZ=d:s=d,d.prevZ=v,v=d;l=h}v.nextZ=null,y*=2}while(_>1);return s}function zOrder(s,a,l,h,d){return s=(s-l)*d|0,a=(a-h)*d|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,s|a<<1}function getLeftmost(s){var a=s,l=s;do(a.x<l.x||a.x===l.x&&a.y<l.y)&&(l=a),a=a.next;while(a!==s);return l}function pointInTriangle(s,a,l,h,d,v,_,m){return(d-_)*(a-m)>=(s-_)*(v-m)&&(s-_)*(h-m)>=(l-_)*(a-m)&&(l-_)*(v-m)>=(d-_)*(h-m)}function isValidDiagonal(s,a){return s.next.i!==a.i&&s.prev.i!==a.i&&!intersectsPolygon(s,a)&&(locallyInside(s,a)&&locallyInside(a,s)&&middleInside(s,a)&&(area(s.prev,s,a.prev)||area(s,a.prev,a))||equals(s,a)&&area(s.prev,s,s.next)>0&&area(a.prev,a,a.next)>0)}function area(s,a,l){return(a.y-s.y)*(l.x-a.x)-(a.x-s.x)*(l.y-a.y)}function equals(s,a){return s.x===a.x&&s.y===a.y}function intersects(s,a,l,h){var d=sign$1(area(s,a,l)),v=sign$1(area(s,a,h)),_=sign$1(area(l,h,s)),m=sign$1(area(l,h,a));return!!(d!==v&&_!==m||d===0&&onSegment(s,l,a)||v===0&&onSegment(s,h,a)||_===0&&onSegment(l,s,h)||m===0&&onSegment(l,a,h))}function onSegment(s,a,l){return a.x<=Math.max(s.x,l.x)&&a.x>=Math.min(s.x,l.x)&&a.y<=Math.max(s.y,l.y)&&a.y>=Math.min(s.y,l.y)}function sign$1(s){return s>0?1:s<0?-1:0}function intersectsPolygon(s,a){var l=s;do{if(l.i!==s.i&&l.next.i!==s.i&&l.i!==a.i&&l.next.i!==a.i&&intersects(l,l.next,s,a))return!0;l=l.next}while(l!==s);return!1}function locallyInside(s,a){return area(s.prev,s,s.next)<0?area(s,a,s.next)>=0&&area(s,s.prev,a)>=0:area(s,a,s.prev)<0||area(s,s.next,a)<0}function middleInside(s,a){var l=s,h=!1,d=(s.x+a.x)/2,v=(s.y+a.y)/2;do l.y>v!=l.next.y>v&&l.next.y!==l.y&&d<(l.next.x-l.x)*(v-l.y)/(l.next.y-l.y)+l.x&&(h=!h),l=l.next;while(l!==s);return h}function splitPolygon(s,a){var l=new Node$2(s.i,s.x,s.y),h=new Node$2(a.i,a.x,a.y),d=s.next,v=a.prev;return s.next=a,a.prev=s,l.next=d,d.prev=l,h.next=l,l.prev=h,v.next=h,h.prev=v,h}function insertNode(s,a,l,h){var d=new Node$2(s,a,l);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function removeNode(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Node$2(s,a,l){this.i=s,this.x=a,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(s,a,l,h){var d=a&&a.length,v=d?a[0]*l:s.length,_=Math.abs(signedArea(s,0,v,l));if(d)for(var m=0,g=a.length;m<g;m++){var y=a[m]*l,T=m<g-1?a[m+1]*l:s.length;_-=Math.abs(signedArea(s,y,T,l))}var E=0;for(m=0;m<h.length;m+=3){var b=h[m]*l,R=h[m+1]*l,I=h[m+2]*l;E+=Math.abs((s[b]-s[I])*(s[R+1]-s[b+1])-(s[b]-s[R])*(s[I+1]-s[b+1]))}return _===0&&E===0?0:Math.abs((E-_)/_)};function signedArea(s,a,l,h){for(var d=0,v=a,_=l-h;v<l;v+=h)d+=(s[_]-s[v])*(s[v+1]+s[_+1]),_=v;return d}earcut.flatten=function(s){for(var a=s[0][0].length,l={vertices:[],holes:[],dimensions:a},h=0,d=0;d<s.length;d++){for(var v=0;v<s[d].length;v++)for(var _=0;_<a;_++)l.vertices.push(s[d][v][_]);d>0&&(h+=s[d-1].length,l.holes.push(h))}return l};var earcut$1=earcut$2.exports,punycode$1={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(s,a){(function(l){var h=a&&!a.nodeType&&a,d=s&&!s.nodeType&&s,v=typeof commonjsGlobal=="object"&&commonjsGlobal;(v.global===v||v.window===v||v.self===v)&&(l=v);var _,m=2147483647,g=36,y=1,T=26,E=38,b=700,R=72,I=128,P="-",C=/^xn--/,S=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=g-y,F=Math.floor,M=String.fromCharCode,$;function j(k){throw RangeError(w[k])}function D(k,re){for(var oe=k.length,le=[];oe--;)le[oe]=re(k[oe]);return le}function X(k,re){var oe=k.split("@"),le="";oe.length>1&&(le=oe[0]+"@",k=oe[1]),k=k.replace(O,".");var de=k.split("."),xe=D(de,re).join(".");return le+xe}function Z(k){for(var re=[],oe=0,le=k.length,de,xe;oe<le;)de=k.charCodeAt(oe++),de>=55296&&de<=56319&&oe<le?(xe=k.charCodeAt(oe++),(xe&64512)==56320?re.push(((de&1023)<<10)+(xe&1023)+65536):(re.push(de),oe--)):re.push(de);return re}function ee(k){return D(k,function(re){var oe="";return re>65535&&(re-=65536,oe+=M(re>>>10&1023|55296),re=56320|re&1023),oe+=M(re),oe}).join("")}function se(k){return k-48<10?k-22:k-65<26?k-65:k-97<26?k-97:g}function _e(k,re){return k+22+75*(k<26)-((re!=0)<<5)}function J(k,re,oe){var le=0;for(k=oe?F(k/b):k>>1,k+=F(k/re);k>U*T>>1;le+=g)k=F(k/U);return F(le+(U+1)*k/(k+E))}function q(k){var re=[],oe=k.length,le,de=0,xe=I,pe=R,ve,Re,Te,ge,ce,me,A,N,L;for(ve=k.lastIndexOf(P),ve<0&&(ve=0),Re=0;Re<ve;++Re)k.charCodeAt(Re)>=128&&j("not-basic"),re.push(k.charCodeAt(Re));for(Te=ve>0?ve+1:0;Te<oe;){for(ge=de,ce=1,me=g;Te>=oe&&j("invalid-input"),A=se(k.charCodeAt(Te++)),(A>=g||A>F((m-de)/ce))&&j("overflow"),de+=A*ce,N=me<=pe?y:me>=pe+T?T:me-pe,!(A<N);me+=g)L=g-N,ce>F(m/L)&&j("overflow"),ce*=L;le=re.length+1,pe=J(de-ge,le,ge==0),F(de/le)>m-xe&&j("overflow"),xe+=F(de/le),de%=le,re.splice(de++,0,xe)}return ee(re)}function Q(k){var re,oe,le,de,xe,pe,ve,Re,Te,ge,ce,me=[],A,N,L,B;for(k=Z(k),A=k.length,re=I,oe=0,xe=R,pe=0;pe<A;++pe)ce=k[pe],ce<128&&me.push(M(ce));for(le=de=me.length,de&&me.push(P);le<A;){for(ve=m,pe=0;pe<A;++pe)ce=k[pe],ce>=re&&ce<ve&&(ve=ce);for(N=le+1,ve-re>F((m-oe)/N)&&j("overflow"),oe+=(ve-re)*N,re=ve,pe=0;pe<A;++pe)if(ce=k[pe],ce<re&&++oe>m&&j("overflow"),ce==re){for(Re=oe,Te=g;ge=Te<=xe?y:Te>=xe+T?T:Te-xe,!(Re<ge);Te+=g)B=Re-ge,L=g-ge,me.push(M(_e(ge+B%L,0))),Re=F(B/L);me.push(M(_e(Re,0))),xe=J(oe,N,le==de),oe=0,++le}++oe,++re}return me.join("")}function ae(k){return X(k,function(re){return C.test(re)?q(re.slice(4).toLowerCase()):re})}function he(k){return X(k,function(re){return S.test(re)?"xn--"+Q(re):re})}if(_={version:"1.3.2",ucs2:{decode:Z,encode:ee},decode:q,encode:Q,toASCII:he,toUnicode:ae},h&&d)if(s.exports==h)d.exports=_;else for($ in _)_.hasOwnProperty($)&&(h[$]=_[$]);else l.punycode=_})(commonjsGlobal)})(punycode$1,punycode$1.exports);var util$1={isString:function(s){return typeof s=="string"},isObject:function(s){return typeof s=="object"&&s!==null},isNull:function(s){return s===null},isNullOrUndefined:function(s){return s==null}},querystring$1={};function hasOwnProperty(s,a){return Object.prototype.hasOwnProperty.call(s,a)}var decode=function(s,a,l,h){a=a||"&",l=l||"=";var d={};if(typeof s!="string"||s.length===0)return d;var v=/\+/g;s=s.split(a);var _=1e3;h&&typeof h.maxKeys=="number"&&(_=h.maxKeys);var m=s.length;_>0&&m>_&&(m=_);for(var g=0;g<m;++g){var y=s[g].replace(v,"%20"),T=y.indexOf(l),E,b,R,I;T>=0?(E=y.substr(0,T),b=y.substr(T+1)):(E=y,b=""),R=decodeURIComponent(E),I=decodeURIComponent(b),hasOwnProperty(d,R)?Array.isArray(d[R])?d[R].push(I):d[R]=[d[R],I]:d[R]=I}return d},stringifyPrimitive=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}},encode=function(s,a,l,h){return a=a||"&",l=l||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(d){var v=encodeURIComponent(stringifyPrimitive(d))+l;return Array.isArray(s[d])?s[d].map(function(_){return v+encodeURIComponent(stringifyPrimitive(_))}).join(a):v+encodeURIComponent(stringifyPrimitive(s[d]))}).join(a):h?encodeURIComponent(stringifyPrimitive(h))+l+encodeURIComponent(stringifyPrimitive(s)):""};querystring$1.decode=querystring$1.parse=decode;querystring$1.encode=querystring$1.stringify=encode;var punycode=punycode$1.exports,util=util$1,parse=urlParse,resolve=urlResolve,format=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=querystring$1;function urlParse(s,a,l){if(s&&util.isObject(s)&&s instanceof Url)return s;var h=new Url;return h.parse(s,a,l),h}Url.prototype.parse=function(s,a,l){if(!util.isString(s))throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var h=s.indexOf("?"),d=h!==-1&&h<s.indexOf("#")?"?":"#",v=s.split(d),_=/\\/g;v[0]=v[0].replace(_,"/"),s=v.join(d);var m=s;if(m=m.trim(),!l&&s.split("#").length===1){var g=simplePathPattern.exec(m);if(g)return this.path=m,this.href=m,this.pathname=g[1],g[2]?(this.search=g[2],a?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):a&&(this.search="",this.query={}),this}var y=protocolPattern.exec(m);if(y){y=y[0];var T=y.toLowerCase();this.protocol=T,m=m.substr(y.length)}if(l||y||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var E=m.substr(0,2)==="//";E&&!(y&&hostlessProtocol[y])&&(m=m.substr(2),this.slashes=!0)}if(!hostlessProtocol[y]&&(E||y&&!slashedProtocol[y])){for(var b=-1,R=0;R<hostEndingChars.length;R++){var I=m.indexOf(hostEndingChars[R]);I!==-1&&(b===-1||I<b)&&(b=I)}var P,C;b===-1?C=m.lastIndexOf("@"):C=m.lastIndexOf("@",b),C!==-1&&(P=m.slice(0,C),m=m.slice(C+1),this.auth=decodeURIComponent(P)),b=-1;for(var R=0;R<nonHostChars.length;R++){var I=m.indexOf(nonHostChars[R]);I!==-1&&(b===-1||I<b)&&(b=I)}b===-1&&(b=m.length),this.host=m.slice(0,b),m=m.slice(b),this.parseHost(),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S)for(var O=this.hostname.split(/\./),R=0,w=O.length;R<w;R++){var U=O[R];if(!!U&&!U.match(hostnamePartPattern)){for(var F="",M=0,$=U.length;M<$;M++)U.charCodeAt(M)>127?F+="x":F+=U[M];if(!F.match(hostnamePartPattern)){var j=O.slice(0,R),D=O.slice(R+1),X=U.match(hostnamePartStart);X&&(j.push(X[1]),D.unshift(X[2])),D.length&&(m="/"+D.join(".")+m),this.hostname=j.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=punycode.toASCII(this.hostname));var Z=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+Z,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),m[0]!=="/"&&(m="/"+m))}if(!unsafeProtocol[T])for(var R=0,w=autoEscape.length;R<w;R++){var se=autoEscape[R];if(m.indexOf(se)!==-1){var _e=encodeURIComponent(se);_e===se&&(_e=escape(se)),m=m.split(se).join(_e)}}var J=m.indexOf("#");J!==-1&&(this.hash=m.substr(J),m=m.slice(0,J));var q=m.indexOf("?");if(q!==-1?(this.search=m.substr(q),this.query=m.substr(q+1),a&&(this.query=querystring.parse(this.query)),m=m.slice(0,q)):a&&(this.search="",this.query={}),m&&(this.pathname=m),slashedProtocol[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Z=this.pathname||"",Q=this.search||"";this.path=Z+Q}return this.href=this.format(),this};function urlFormat(s){return util.isString(s)&&(s=urlParse(s)),s instanceof Url?s.format():Url.prototype.format.call(s)}Url.prototype.format=function(){var s=this.auth||"";s&&(s=encodeURIComponent(s),s=s.replace(/%3A/i,":"),s+="@");var a=this.protocol||"",l=this.pathname||"",h=this.hash||"",d=!1,v="";this.host?d=s+this.host:this.hostname&&(d=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(d+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(v=querystring.stringify(this.query));var _=this.search||v&&"?"+v||"";return a&&a.substr(-1)!==":"&&(a+=":"),this.slashes||(!a||slashedProtocol[a])&&d!==!1?(d="//"+(d||""),l&&l.charAt(0)!=="/"&&(l="/"+l)):d||(d=""),h&&h.charAt(0)!=="#"&&(h="#"+h),_&&_.charAt(0)!=="?"&&(_="?"+_),l=l.replace(/[?#]/g,function(m){return encodeURIComponent(m)}),_=_.replace("#","%23"),a+d+l+_+h};function urlResolve(s,a){return urlParse(s,!1,!0).resolve(a)}Url.prototype.resolve=function(s){return this.resolveObject(urlParse(s,!1,!0)).format()};Url.prototype.resolveObject=function(s){if(util.isString(s)){var a=new Url;a.parse(s,!1,!0),s=a}for(var l=new Url,h=Object.keys(this),d=0;d<h.length;d++){var v=h[d];l[v]=this[v]}if(l.hash=s.hash,s.href==="")return l.href=l.format(),l;if(s.slashes&&!s.protocol){for(var _=Object.keys(s),m=0;m<_.length;m++){var g=_[m];g!=="protocol"&&(l[g]=s[g])}return slashedProtocol[l.protocol]&&l.hostname&&!l.pathname&&(l.path=l.pathname="/"),l.href=l.format(),l}if(s.protocol&&s.protocol!==l.protocol){if(!slashedProtocol[s.protocol]){for(var y=Object.keys(s),T=0;T<y.length;T++){var E=y[T];l[E]=s[E]}return l.href=l.format(),l}if(l.protocol=s.protocol,!s.host&&!hostlessProtocol[s.protocol]){for(var w=(s.pathname||"").split("/");w.length&&!(s.host=w.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),l.pathname=w.join("/")}else l.pathname=s.pathname;if(l.search=s.search,l.query=s.query,l.host=s.host||"",l.auth=s.auth,l.hostname=s.hostname||s.host,l.port=s.port,l.pathname||l.search){var b=l.pathname||"",R=l.search||"";l.path=b+R}return l.slashes=l.slashes||s.slashes,l.href=l.format(),l}var I=l.pathname&&l.pathname.charAt(0)==="/",P=s.host||s.pathname&&s.pathname.charAt(0)==="/",C=P||I||l.host&&s.pathname,S=C,O=l.pathname&&l.pathname.split("/")||[],w=s.pathname&&s.pathname.split("/")||[],U=l.protocol&&!slashedProtocol[l.protocol];if(U&&(l.hostname="",l.port=null,l.host&&(O[0]===""?O[0]=l.host:O.unshift(l.host)),l.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(w[0]===""?w[0]=s.host:w.unshift(s.host)),s.host=null),C=C&&(w[0]===""||O[0]==="")),P)l.host=s.host||s.host===""?s.host:l.host,l.hostname=s.hostname||s.hostname===""?s.hostname:l.hostname,l.search=s.search,l.query=s.query,O=w;else if(w.length)O||(O=[]),O.pop(),O=O.concat(w),l.search=s.search,l.query=s.query;else if(!util.isNullOrUndefined(s.search)){if(U){l.hostname=l.host=O.shift();var F=l.host&&l.host.indexOf("@")>0?l.host.split("@"):!1;F&&(l.auth=F.shift(),l.host=l.hostname=F.shift())}return l.search=s.search,l.query=s.query,(!util.isNull(l.pathname)||!util.isNull(l.search))&&(l.path=(l.pathname?l.pathname:"")+(l.search?l.search:"")),l.href=l.format(),l}if(!O.length)return l.pathname=null,l.search?l.path="/"+l.search:l.path=null,l.href=l.format(),l;for(var M=O.slice(-1)[0],$=(l.host||s.host||O.length>1)&&(M==="."||M==="..")||M==="",j=0,D=O.length;D>=0;D--)M=O[D],M==="."?O.splice(D,1):M===".."?(O.splice(D,1),j++):j&&(O.splice(D,1),j--);if(!C&&!S)for(;j--;j)O.unshift("..");C&&O[0]!==""&&(!O[0]||O[0].charAt(0)!=="/")&&O.unshift(""),$&&O.join("/").substr(-1)!=="/"&&O.push("");var X=O[0]===""||O[0]&&O[0].charAt(0)==="/";if(U){l.hostname=l.host=X?"":O.length?O.shift():"";var F=l.host&&l.host.indexOf("@")>0?l.host.split("@"):!1;F&&(l.auth=F.shift(),l.host=l.hostname=F.shift())}return C=C||l.host&&O.length,C&&!X&&O.unshift(""),O.length?l.pathname=O.join("/"):(l.pathname=null,l.path=null),(!util.isNull(l.pathname)||!util.isNull(l.search))&&(l.path=(l.pathname?l.pathname:"")+(l.search?l.search:"")),l.auth=s.auth||l.auth,l.slashes=l.slashes||s.slashes,l.href=l.format(),l};Url.prototype.parseHost=function(){var s=this.host,a=portPattern.exec(s);a&&(a=a[0],a!==":"&&(this.port=a.substr(1)),s=s.substr(0,s.length-a.length)),s&&(this.hostname=s)};/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$4;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$4||(ENV$4={}));var RENDERER_TYPE$4;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$4||(RENDERER_TYPE$4={}));var BUFFER_BITS$4;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$4||(BUFFER_BITS$4={}));var BLEND_MODES$4;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$4||(BLEND_MODES$4={}));var DRAW_MODES$4;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$4||(DRAW_MODES$4={}));var FORMATS$4;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$4||(FORMATS$4={}));var TARGETS$4;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$4||(TARGETS$4={}));var TYPES$4;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$4||(TYPES$4={}));var SAMPLER_TYPES$4;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$4||(SAMPLER_TYPES$4={}));var SCALE_MODES$4;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$4||(SCALE_MODES$4={}));var WRAP_MODES$4;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$4||(WRAP_MODES$4={}));var MIPMAP_MODES$4;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$4||(MIPMAP_MODES$4={}));var ALPHA_MODES$4;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$4||(ALPHA_MODES$4={}));var CLEAR_MODES$4;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$4||(CLEAR_MODES$4={}));var GC_MODES$4;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$4||(GC_MODES$4={}));var PRECISION$4;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$4||(PRECISION$4={}));var MASK_TYPES$4;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE"})(MASK_TYPES$4||(MASK_TYPES$4={}));var MSAA_QUALITY$4;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$4||(MSAA_QUALITY$4={}));var BUFFER_TYPE$4;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$4||(BUFFER_TYPE$4={}));/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var url={parse,format,resolve};settings$1.RETINA_PREFIX=/@([0-9\.]+)x/;settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var saidHello=!1,VERSION$1="6.4.2";function skipHello(){saidHello=!0}function sayHello(s){var a;if(!saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var l=[`
 %c %c %c PixiJS `+VERSION$1+" - \u2730 "+s+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(a=globalThis.console).log.apply(a,l)}else globalThis.console&&globalThis.console.log("PixiJS "+VERSION$1+" - "+s+" - http://www.pixijs.com/");saidHello=!0}}var supported;function isWebGLSupported(){return typeof supported=="undefined"&&(supported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var l=document.createElement("canvas"),h=l.getContext("webgl",a)||l.getContext("experimental-webgl",a),d=!!(h&&h.getContextAttributes().stencil);if(h){var v=h.getExtension("WEBGL_lose_context");v&&v.loseContext()}return h=null,d}catch{return!1}}()),supported}var aliceblue="#f0f8ff",antiquewhite="#faebd7",aqua="#00ffff",aquamarine="#7fffd4",azure="#f0ffff",beige="#f5f5dc",bisque="#ffe4c4",black="#000000",blanchedalmond="#ffebcd",blue="#0000ff",blueviolet="#8a2be2",brown="#a52a2a",burlywood="#deb887",cadetblue="#5f9ea0",chartreuse="#7fff00",chocolate="#d2691e",coral="#ff7f50",cornflowerblue="#6495ed",cornsilk="#fff8dc",crimson="#dc143c",cyan="#00ffff",darkblue="#00008b",darkcyan="#008b8b",darkgoldenrod="#b8860b",darkgray="#a9a9a9",darkgreen="#006400",darkgrey="#a9a9a9",darkkhaki="#bdb76b",darkmagenta="#8b008b",darkolivegreen="#556b2f",darkorange="#ff8c00",darkorchid="#9932cc",darkred="#8b0000",darksalmon="#e9967a",darkseagreen="#8fbc8f",darkslateblue="#483d8b",darkslategray="#2f4f4f",darkslategrey="#2f4f4f",darkturquoise="#00ced1",darkviolet="#9400d3",deeppink="#ff1493",deepskyblue="#00bfff",dimgray="#696969",dimgrey="#696969",dodgerblue="#1e90ff",firebrick="#b22222",floralwhite="#fffaf0",forestgreen="#228b22",fuchsia="#ff00ff",gainsboro="#dcdcdc",ghostwhite="#f8f8ff",goldenrod="#daa520",gold="#ffd700",gray="#808080",green="#008000",greenyellow="#adff2f",grey="#808080",honeydew="#f0fff0",hotpink="#ff69b4",indianred="#cd5c5c",indigo="#4b0082",ivory="#fffff0",khaki="#f0e68c",lavenderblush="#fff0f5",lavender="#e6e6fa",lawngreen="#7cfc00",lemonchiffon="#fffacd",lightblue="#add8e6",lightcoral="#f08080",lightcyan="#e0ffff",lightgoldenrodyellow="#fafad2",lightgray="#d3d3d3",lightgreen="#90ee90",lightgrey="#d3d3d3",lightpink="#ffb6c1",lightsalmon="#ffa07a",lightseagreen="#20b2aa",lightskyblue="#87cefa",lightslategray="#778899",lightslategrey="#778899",lightsteelblue="#b0c4de",lightyellow="#ffffe0",lime="#00ff00",limegreen="#32cd32",linen="#faf0e6",magenta="#ff00ff",maroon="#800000",mediumaquamarine="#66cdaa",mediumblue="#0000cd",mediumorchid="#ba55d3",mediumpurple="#9370db",mediumseagreen="#3cb371",mediumslateblue="#7b68ee",mediumspringgreen="#00fa9a",mediumturquoise="#48d1cc",mediumvioletred="#c71585",midnightblue="#191970",mintcream="#f5fffa",mistyrose="#ffe4e1",moccasin="#ffe4b5",navajowhite="#ffdead",navy="#000080",oldlace="#fdf5e6",olive="#808000",olivedrab="#6b8e23",orange="#ffa500",orangered="#ff4500",orchid="#da70d6",palegoldenrod="#eee8aa",palegreen="#98fb98",paleturquoise="#afeeee",palevioletred="#db7093",papayawhip="#ffefd5",peachpuff="#ffdab9",peru="#cd853f",pink="#ffc0cb",plum="#dda0dd",powderblue="#b0e0e6",purple="#800080",rebeccapurple="#663399",red="#ff0000",rosybrown="#bc8f8f",royalblue="#4169e1",saddlebrown="#8b4513",salmon="#fa8072",sandybrown="#f4a460",seagreen="#2e8b57",seashell="#fff5ee",sienna="#a0522d",silver="#c0c0c0",skyblue="#87ceeb",slateblue="#6a5acd",slategray="#708090",slategrey="#708090",snow="#fffafa",springgreen="#00ff7f",steelblue="#4682b4",tan="#d2b48c",teal="#008080",thistle="#d8bfd8",tomato="#ff6347",turquoise="#40e0d0",violet="#ee82ee",wheat="#f5deb3",white="#ffffff",whitesmoke="#f5f5f5",yellow="#ffff00",yellowgreen="#9acd32",cssColorNames={aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,goldenrod,gold,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavenderblush,lavender,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen};function hex2rgb(s,a){return a===void 0&&(a=[]),a[0]=(s>>16&255)/255,a[1]=(s>>8&255)/255,a[2]=(s&255)/255,a}function hex2string(s){var a=s.toString(16);return a="000000".substring(0,6-a.length)+a,"#"+a}function string2hex(s){return typeof s=="string"&&(s=cssColorNames[s.toLowerCase()]||s,s[0]==="#"&&(s=s.slice(1))),parseInt(s,16)}function rgb2hex(s){return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)}function mapPremultipliedBlendModes(){for(var s=[],a=[],l=0;l<32;l++)s[l]=l,a[l]=l;s[BLEND_MODES$4.NORMAL_NPM]=BLEND_MODES$4.NORMAL,s[BLEND_MODES$4.ADD_NPM]=BLEND_MODES$4.ADD,s[BLEND_MODES$4.SCREEN_NPM]=BLEND_MODES$4.SCREEN,a[BLEND_MODES$4.NORMAL]=BLEND_MODES$4.NORMAL_NPM,a[BLEND_MODES$4.ADD]=BLEND_MODES$4.ADD_NPM,a[BLEND_MODES$4.SCREEN]=BLEND_MODES$4.SCREEN_NPM;var h=[];return h.push(a),h.push(s),h}var premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(s,a){return premultiplyBlendMode[a?1:0][s]}function premultiplyRgba(s,a,l,h){return l=l||new Float32Array(4),h||h===void 0?(l[0]=s[0]*a,l[1]=s[1]*a,l[2]=s[2]*a):(l[0]=s[0],l[1]=s[1],l[2]=s[2]),l[3]=a,l}function premultiplyTint(s,a){if(a===1)return(a*255<<24)+s;if(a===0)return 0;var l=s>>16&255,h=s>>8&255,d=s&255;return l=l*a+.5|0,h=h*a+.5|0,d=d*a+.5|0,(a*255<<24)+(l<<16)+(h<<8)+d}function premultiplyTintToRgba(s,a,l,h){return l=l||new Float32Array(4),l[0]=(s>>16&255)/255,l[1]=(s>>8&255)/255,l[2]=(s&255)/255,(h||h===void 0)&&(l[0]*=a,l[1]*=a,l[2]*=a),l[3]=a,l}function createIndicesForQuads(s,a){a===void 0&&(a=null);var l=s*6;if(a=a||new Uint16Array(l),a.length!==l)throw new Error("Out buffer length is incorrect, got "+a.length+" and expected "+l);for(var h=0,d=0;h<l;h+=6,d+=4)a[h+0]=d+0,a[h+1]=d+1,a[h+2]=d+2,a[h+3]=d+0,a[h+4]=d+2,a[h+5]=d+3;return a}function getBufferType(s){if(s.BYTES_PER_ELEMENT===4)return s instanceof Float32Array?"Float32Array":s instanceof Uint32Array?"Uint32Array":"Int32Array";if(s.BYTES_PER_ELEMENT===2){if(s instanceof Uint16Array)return"Uint16Array"}else if(s.BYTES_PER_ELEMENT===1&&s instanceof Uint8Array)return"Uint8Array";return null}var map$2={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays$1(s,a){for(var l=0,h=0,d={},v=0;v<s.length;v++)h+=a[v],l+=s[v].length;for(var _=new ArrayBuffer(l*4),m=null,g=0,v=0;v<s.length;v++){var y=a[v],T=s[v],E=getBufferType(T);d[E]||(d[E]=new map$2[E](_)),m=d[E];for(var b=0;b<T.length;b++){var R=(b/y|0)*h+g,I=b%y;m[R+I]=T[b]}g+=y}return new Float32Array(_)}function nextPow2(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function isPow2(s){return!(s&s-1)&&!!s}function log2(s){var a=(s>65535?1:0)<<4;s>>>=a;var l=(s>255?1:0)<<3;return s>>>=l,a|=l,l=(s>15?1:0)<<2,s>>>=l,a|=l,l=(s>3?1:0)<<1,s>>>=l,a|=l,a|s>>1}function removeItems(s,a,l){var h=s.length,d;if(!(a>=h||l===0)){l=a+l>h?h-a:l;var v=h-l;for(d=a;d<v;++d)s[d]=s[d+l];s.length=v}}function sign(s){return s===0?0:s<0?-1:1}var nextUid=0;function uid(){return++nextUid}var warnings={};function deprecation(s,a,l){if(l===void 0&&(l=3),!warnings[a]){var h=new Error().stack;typeof h=="undefined"?console.warn("PixiJS Deprecation Warning: ",a+`
Deprecated since v`+s):(h=h.split(`
`).splice(l).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a+`
Deprecated since v`+s),console.warn(h),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",a+`
Deprecated since v`+s),console.warn(h))),warnings[a]=!0}}var ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);function destroyTextureCache(){var s;for(s in TextureCache)TextureCache[s].destroy();for(s in BaseTextureCache)BaseTextureCache[s].destroy()}function clearTextureCache(){var s;for(s in TextureCache)delete TextureCache[s];for(s in BaseTextureCache)delete BaseTextureCache[s]}var CanvasRenderTarget=function(){function s(a,l,h){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=h||settings$1.RESOLUTION,this.resize(a,l)}return s.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.resize=function(a,l){this.canvas.width=Math.round(a*this.resolution),this.canvas.height=Math.round(l*this.resolution)},s.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(s.prototype,"width",{get:function(){return this.canvas.width},set:function(a){this.canvas.width=Math.round(a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this.canvas.height},set:function(a){this.canvas.height=Math.round(a)},enumerable:!1,configurable:!0}),s}();function trimCanvas(s){var a=s.width,l=s.height,h=s.getContext("2d"),d=h.getImageData(0,0,a,l),v=d.data,_=v.length,m={top:null,left:null,right:null,bottom:null},g=null,y,T,E;for(y=0;y<_;y+=4)v[y+3]!==0&&(T=y/4%a,E=~~(y/4/a),m.top===null&&(m.top=E),(m.left===null||T<m.left)&&(m.left=T),(m.right===null||m.right<T)&&(m.right=T+1),(m.bottom===null||m.bottom<E)&&(m.bottom=E));return m.top!==null&&(a=m.right-m.left,l=m.bottom-m.top+1,g=h.getImageData(m.left,m.top,a,l)),{height:l,width:a,data:g}}var DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function decomposeDataUri(s){var a=DATA_URI.exec(s);if(a)return{mediaType:a[1]?a[1].toLowerCase():void 0,subType:a[2]?a[2].toLowerCase():void 0,charset:a[3]?a[3].toLowerCase():void 0,encoding:a[4]?a[4].toLowerCase():void 0,data:a[5]}}var tempAnchor$1;function determineCrossOrigin(s,a){if(a===void 0&&(a=globalThis.location),s.indexOf("data:")===0)return"";a=a||globalThis.location,tempAnchor$1||(tempAnchor$1=document.createElement("a")),tempAnchor$1.href=s;var l=url.parse(tempAnchor$1.href),h=!l.port&&a.port===""||l.port===a.port;return l.hostname!==a.hostname||!h||l.protocol!==a.protocol?"anonymous":""}function getResolutionOfUrl(s,a){var l=settings$1.RETINA_PREFIX.exec(s);return l?parseFloat(l[1]):a!==void 0?a:1}var utils=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache,CanvasRenderTarget,DATA_URI,ProgramCache,TextureCache,clearTextureCache,correctBlendMode,createIndicesForQuads,decomposeDataUri,deprecation,destroyTextureCache,determineCrossOrigin,getBufferType,getResolutionOfUrl,hex2rgb,hex2string,interleaveTypedArrays:interleaveTypedArrays$1,isPow2,isWebGLSupported,log2,nextPow2,premultiplyBlendMode,premultiplyRgba,premultiplyTint,premultiplyTintToRgba,removeItems,rgb2hex,sayHello,sign,skipHello,string2hex,trimCanvas,uid,url,isMobile:isMobile$2,EventEmitter,earcut:earcut$1},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180,SHAPES;(function(s){s[s.POLY=0]="POLY",s[s.RECT=1]="RECT",s[s.CIRC=2]="CIRC",s[s.ELIP=3]="ELIP",s[s.RREC=4]="RREC"})(SHAPES||(SHAPES={}));var Point=function(){function s(a,l){a===void 0&&(a=0),l===void 0&&(l=0),this.x=0,this.y=0,this.x=a,this.y=l}return s.prototype.clone=function(){return new s(this.x,this.y)},s.prototype.copyFrom=function(a){return this.set(a.x,a.y),this},s.prototype.copyTo=function(a){return a.set(this.x,this.y),a},s.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},s.prototype.set=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.x=a,this.y=l,this},s.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},s}(),tempPoints$1=[new Point,new Point,new Point,new Point],Rectangle=function(){function s(a,l,h,d){a===void 0&&(a=0),l===void 0&&(l=0),h===void 0&&(h=0),d===void 0&&(d=0),this.x=Number(a),this.y=Number(l),this.width=Number(h),this.height=Number(d),this.type=SHAPES.RECT}return Object.defineProperty(s.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(s,"EMPTY",{get:function(){return new s(0,0,0,0)},enumerable:!1,configurable:!0}),s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.copyFrom=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},s.prototype.copyTo=function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},s.prototype.contains=function(a,l){return this.width<=0||this.height<=0?!1:a>=this.x&&a<this.x+this.width&&l>=this.y&&l<this.y+this.height},s.prototype.intersects=function(a,l){if(!l){var h=this.x<a.x?a.x:this.x,d=this.right>a.right?a.right:this.right;if(d<=h)return!1;var v=this.y<a.y?a.y:this.y,_=this.bottom>a.bottom?a.bottom:this.bottom;return _>v}var m=this.left,g=this.right,y=this.top,T=this.bottom;if(g<=m||T<=y)return!1;var E=tempPoints$1[0].set(a.left,a.top),b=tempPoints$1[1].set(a.left,a.bottom),R=tempPoints$1[2].set(a.right,a.top),I=tempPoints$1[3].set(a.right,a.bottom);if(R.x<=E.x||b.y<=E.y)return!1;var P=Math.sign(l.a*l.d-l.b*l.c);if(P===0||(l.apply(E,E),l.apply(b,b),l.apply(R,R),l.apply(I,I),Math.max(E.x,b.x,R.x,I.x)<=m||Math.min(E.x,b.x,R.x,I.x)>=g||Math.max(E.y,b.y,R.y,I.y)<=y||Math.min(E.y,b.y,R.y,I.y)>=T))return!1;var C=P*(b.y-E.y),S=P*(E.x-b.x),O=C*m+S*y,w=C*g+S*y,U=C*m+S*T,F=C*g+S*T;if(Math.max(O,w,U,F)<=C*E.x+S*E.y||Math.min(O,w,U,F)>=C*I.x+S*I.y)return!1;var M=P*(E.y-R.y),$=P*(R.x-E.x),j=M*m+$*y,D=M*g+$*y,X=M*m+$*T,Z=M*g+$*T;return!(Math.max(j,D,X,Z)<=M*E.x+$*E.y||Math.min(j,D,X,Z)>=M*I.x+$*I.y)},s.prototype.pad=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.x-=a,this.y-=l,this.width+=a*2,this.height+=l*2,this},s.prototype.fit=function(a){var l=Math.max(this.x,a.x),h=Math.min(this.x+this.width,a.x+a.width),d=Math.max(this.y,a.y),v=Math.min(this.y+this.height,a.y+a.height);return this.x=l,this.width=Math.max(h-l,0),this.y=d,this.height=Math.max(v-d,0),this},s.prototype.ceil=function(a,l){a===void 0&&(a=1),l===void 0&&(l=.001);var h=Math.ceil((this.x+this.width-l)*a)/a,d=Math.ceil((this.y+this.height-l)*a)/a;return this.x=Math.floor((this.x+l)*a)/a,this.y=Math.floor((this.y+l)*a)/a,this.width=h-this.x,this.height=d-this.y,this},s.prototype.enlarge=function(a){var l=Math.min(this.x,a.x),h=Math.max(this.x+this.width,a.x+a.width),d=Math.min(this.y,a.y),v=Math.max(this.y+this.height,a.y+a.height);return this.x=l,this.width=h-l,this.y=d,this.height=v-d,this},s.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},s}(),Circle=function(){function s(a,l,h){a===void 0&&(a=0),l===void 0&&(l=0),h===void 0&&(h=0),this.x=a,this.y=l,this.radius=h,this.type=SHAPES.CIRC}return s.prototype.clone=function(){return new s(this.x,this.y,this.radius)},s.prototype.contains=function(a,l){if(this.radius<=0)return!1;var h=this.radius*this.radius,d=this.x-a,v=this.y-l;return d*=d,v*=v,d+v<=h},s.prototype.getBounds=function(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},s.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},s}(),Ellipse=function(){function s(a,l,h,d){a===void 0&&(a=0),l===void 0&&(l=0),h===void 0&&(h=0),d===void 0&&(d=0),this.x=a,this.y=l,this.width=h,this.height=d,this.type=SHAPES.ELIP}return s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.contains=function(a,l){if(this.width<=0||this.height<=0)return!1;var h=(a-this.x)/this.width,d=(l-this.y)/this.height;return h*=h,d*=d,h+d<=1},s.prototype.getBounds=function(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},s.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},s}(),Polygon=function(){function s(){for(var a=arguments,l=[],h=0;h<arguments.length;h++)l[h]=a[h];var d=Array.isArray(l[0])?l[0]:l;if(typeof d[0]!="number"){for(var v=[],_=0,m=d.length;_<m;_++)v.push(d[_].x,d[_].y);d=v}this.points=d,this.type=SHAPES.POLY,this.closeStroke=!0}return s.prototype.clone=function(){var a=this.points.slice(),l=new s(a);return l.closeStroke=this.closeStroke,l},s.prototype.contains=function(a,l){for(var h=!1,d=this.points.length/2,v=0,_=d-1;v<d;_=v++){var m=this.points[v*2],g=this.points[v*2+1],y=this.points[_*2],T=this.points[_*2+1],E=g>l!=T>l&&a<(y-m)*((l-g)/(T-g))+m;E&&(h=!h)}return h},s.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(a,l){return a+", "+l},"")+"]")},s}(),RoundedRectangle=function(){function s(a,l,h,d,v){a===void 0&&(a=0),l===void 0&&(l=0),h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=20),this.x=a,this.y=l,this.width=h,this.height=d,this.radius=v,this.type=SHAPES.RREC}return s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.radius)},s.prototype.contains=function(a,l){if(this.width<=0||this.height<=0)return!1;if(a>=this.x&&a<=this.x+this.width&&l>=this.y&&l<=this.y+this.height){var h=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(l>=this.y+h&&l<=this.y+this.height-h||a>=this.x+h&&a<=this.x+this.width-h)return!0;var d=a-(this.x+h),v=l-(this.y+h),_=h*h;if(d*d+v*v<=_||(d=a-(this.x+this.width-h),d*d+v*v<=_)||(v=l-(this.y+this.height-h),d*d+v*v<=_)||(d=a-(this.x+h),d*d+v*v<=_))return!0}return!1},s.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},s}(),ObservablePoint=function(){function s(a,l,h,d){h===void 0&&(h=0),d===void 0&&(d=0),this._x=h,this._y=d,this.cb=a,this.scope=l}return s.prototype.clone=function(a,l){return a===void 0&&(a=this.cb),l===void 0&&(l=this.scope),new s(a,l,this._x,this._y)},s.prototype.set=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),(this._x!==a||this._y!==l)&&(this._x=a,this._y=l,this.cb.call(this.scope)),this},s.prototype.copyFrom=function(a){return(this._x!==a.x||this._y!==a.y)&&(this._x=a.x,this._y=a.y,this.cb.call(this.scope)),this},s.prototype.copyTo=function(a){return a.set(this._x,this._y),a},s.prototype.equals=function(a){return a.x===this._x&&a.y===this._y},s.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(s.prototype,"x",{get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"y",{get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),s}(),Matrix=function(){function s(a,l,h,d,v,_){a===void 0&&(a=1),l===void 0&&(l=0),h===void 0&&(h=0),d===void 0&&(d=1),v===void 0&&(v=0),_===void 0&&(_=0),this.array=null,this.a=a,this.b=l,this.c=h,this.d=d,this.tx=v,this.ty=_}return s.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},s.prototype.set=function(a,l,h,d,v,_){return this.a=a,this.b=l,this.c=h,this.d=d,this.tx=v,this.ty=_,this},s.prototype.toArray=function(a,l){this.array||(this.array=new Float32Array(9));var h=l||this.array;return a?(h[0]=this.a,h[1]=this.b,h[2]=0,h[3]=this.c,h[4]=this.d,h[5]=0,h[6]=this.tx,h[7]=this.ty,h[8]=1):(h[0]=this.a,h[1]=this.c,h[2]=this.tx,h[3]=this.b,h[4]=this.d,h[5]=this.ty,h[6]=0,h[7]=0,h[8]=1),h},s.prototype.apply=function(a,l){l=l||new Point;var h=a.x,d=a.y;return l.x=this.a*h+this.c*d+this.tx,l.y=this.b*h+this.d*d+this.ty,l},s.prototype.applyInverse=function(a,l){l=l||new Point;var h=1/(this.a*this.d+this.c*-this.b),d=a.x,v=a.y;return l.x=this.d*h*d+-this.c*h*v+(this.ty*this.c-this.tx*this.d)*h,l.y=this.a*h*v+-this.b*h*d+(-this.ty*this.a+this.tx*this.b)*h,l},s.prototype.translate=function(a,l){return this.tx+=a,this.ty+=l,this},s.prototype.scale=function(a,l){return this.a*=a,this.d*=l,this.c*=a,this.b*=l,this.tx*=a,this.ty*=l,this},s.prototype.rotate=function(a){var l=Math.cos(a),h=Math.sin(a),d=this.a,v=this.c,_=this.tx;return this.a=d*l-this.b*h,this.b=d*h+this.b*l,this.c=v*l-this.d*h,this.d=v*h+this.d*l,this.tx=_*l-this.ty*h,this.ty=_*h+this.ty*l,this},s.prototype.append=function(a){var l=this.a,h=this.b,d=this.c,v=this.d;return this.a=a.a*l+a.b*d,this.b=a.a*h+a.b*v,this.c=a.c*l+a.d*d,this.d=a.c*h+a.d*v,this.tx=a.tx*l+a.ty*d+this.tx,this.ty=a.tx*h+a.ty*v+this.ty,this},s.prototype.setTransform=function(a,l,h,d,v,_,m,g,y){return this.a=Math.cos(m+y)*v,this.b=Math.sin(m+y)*v,this.c=-Math.sin(m-g)*_,this.d=Math.cos(m-g)*_,this.tx=a-(h*this.a+d*this.c),this.ty=l-(h*this.b+d*this.d),this},s.prototype.prepend=function(a){var l=this.tx;if(a.a!==1||a.b!==0||a.c!==0||a.d!==1){var h=this.a,d=this.c;this.a=h*a.a+this.b*a.c,this.b=h*a.b+this.b*a.d,this.c=d*a.a+this.d*a.c,this.d=d*a.b+this.d*a.d}return this.tx=l*a.a+this.ty*a.c+a.tx,this.ty=l*a.b+this.ty*a.d+a.ty,this},s.prototype.decompose=function(a){var l=this.a,h=this.b,d=this.c,v=this.d,_=a.pivot,m=-Math.atan2(-d,v),g=Math.atan2(h,l),y=Math.abs(m+g);return y<1e-5||Math.abs(PI_2-y)<1e-5?(a.rotation=g,a.skew.x=a.skew.y=0):(a.rotation=0,a.skew.x=m,a.skew.y=g),a.scale.x=Math.sqrt(l*l+h*h),a.scale.y=Math.sqrt(d*d+v*v),a.position.x=this.tx+(_.x*l+_.y*d),a.position.y=this.ty+(_.x*h+_.y*v),a},s.prototype.invert=function(){var a=this.a,l=this.b,h=this.c,d=this.d,v=this.tx,_=a*d-l*h;return this.a=d/_,this.b=-l/_,this.c=-h/_,this.d=a/_,this.tx=(h*this.ty-d*v)/_,this.ty=-(a*this.ty-l*v)/_,this},s.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},s.prototype.clone=function(){var a=new s;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},s.prototype.copyTo=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},s.prototype.copyFrom=function(a){return this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.tx=a.tx,this.ty=a.ty,this},s.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(s,"IDENTITY",{get:function(){return new s},enumerable:!1,configurable:!0}),Object.defineProperty(s,"TEMP_MATRIX",{get:function(){return new s},enumerable:!1,configurable:!0}),s}(),ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(var s=0;s<16;s++){var a=[];rotationCayley.push(a);for(var l=0;l<16;l++)for(var h=signum(ux[s]*ux[l]+vx[s]*uy[l]),d=signum(uy[s]*ux[l]+vy[s]*uy[l]),v=signum(ux[s]*vx[l]+vx[s]*vy[l]),_=signum(uy[s]*vx[l]+vy[s]*vy[l]),m=0;m<16;m++)if(ux[m]===h&&uy[m]===d&&vx[m]===v&&vy[m]===_){a.push(m);break}}for(var s=0;s<16;s++){var g=new Matrix;g.set(ux[s],uy[s],vx[s],vy[s],0,0),rotationMatrices.push(g)}}init();var groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(s){return ux[s]},uY:function(s){return uy[s]},vX:function(s){return vx[s]},vY:function(s){return vy[s]},inv:function(s){return s&8?s&15:-s&7},add:function(s,a){return rotationCayley[s][a]},sub:function(s,a){return rotationCayley[s][groupD8.inv(a)]},rotate180:function(s){return s^4},isVertical:function(s){return(s&3)===2},byDirection:function(s,a){return Math.abs(s)*2<=Math.abs(a)?a>=0?groupD8.S:groupD8.N:Math.abs(a)*2<=Math.abs(s)?s>0?groupD8.E:groupD8.W:a>0?s>0?groupD8.SE:groupD8.SW:s>0?groupD8.NE:groupD8.NW},matrixAppendRotationInv:function(s,a,l,h){l===void 0&&(l=0),h===void 0&&(h=0);var d=rotationMatrices[groupD8.inv(a)];d.tx=l,d.ty=h,s.append(d)}},Transform=function(){function s(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return s.prototype.onChange=function(){this._localID++},s.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},s.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},s.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale.x,a.b=this._sx*this.scale.x,a.c=this._cy*this.scale.y,a.d=this._sy*this.scale.y,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d),this._currentLocalID=this._localID,this._parentID=-1)},s.prototype.updateTransform=function(a){var l=this.localTransform;if(this._localID!==this._currentLocalID&&(l.a=this._cx*this.scale.x,l.b=this._sx*this.scale.x,l.c=this._cy*this.scale.y,l.d=this._sy*this.scale.y,l.tx=this.position.x-(this.pivot.x*l.a+this.pivot.y*l.c),l.ty=this.position.y-(this.pivot.x*l.b+this.pivot.y*l.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var h=a.worldTransform,d=this.worldTransform;d.a=l.a*h.a+l.b*h.c,d.b=l.a*h.b+l.b*h.d,d.c=l.c*h.a+l.d*h.c,d.d=l.c*h.b+l.d*h.d,d.tx=l.tx*h.a+l.ty*h.c+h.tx,d.ty=l.tx*h.b+l.ty*h.d+h.ty,this._parentID=a._worldID,this._worldID++}},s.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},Object.defineProperty(s.prototype,"rotation",{get:function(){return this._rotation},set:function(a){this._rotation!==a&&(this._rotation=a,this.updateSkew())},enumerable:!1,configurable:!0}),s.IDENTITY=new s,s}();/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.SORTABLE_CHILDREN=!1;var Bounds$2=function(){function s(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return s.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},s.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},s.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(a=a||new Rectangle(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},s.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},s.prototype.addPointMatrix=function(a,l){var h=a.a,d=a.b,v=a.c,_=a.d,m=a.tx,g=a.ty,y=h*l.x+v*l.y+m,T=d*l.x+_*l.y+g;this.minX=Math.min(this.minX,y),this.maxX=Math.max(this.maxX,y),this.minY=Math.min(this.minY,T),this.maxY=Math.max(this.maxY,T)},s.prototype.addQuad=function(a){var l=this.minX,h=this.minY,d=this.maxX,v=this.maxY,_=a[0],m=a[1];l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,_=a[2],m=a[3],l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,_=a[4],m=a[5],l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,_=a[6],m=a[7],l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,this.minX=l,this.minY=h,this.maxX=d,this.maxY=v},s.prototype.addFrame=function(a,l,h,d,v){this.addFrameMatrix(a.worldTransform,l,h,d,v)},s.prototype.addFrameMatrix=function(a,l,h,d,v){var _=a.a,m=a.b,g=a.c,y=a.d,T=a.tx,E=a.ty,b=this.minX,R=this.minY,I=this.maxX,P=this.maxY,C=_*l+g*h+T,S=m*l+y*h+E;b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,C=_*d+g*h+T,S=m*d+y*h+E,b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,C=_*l+g*v+T,S=m*l+y*v+E,b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,C=_*d+g*v+T,S=m*d+y*v+E,b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,this.minX=b,this.minY=R,this.maxX=I,this.maxY=P},s.prototype.addVertexData=function(a,l,h){for(var d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=l;g<h;g+=2){var y=a[g],T=a[g+1];d=y<d?y:d,v=T<v?T:v,_=y>_?y:_,m=T>m?T:m}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},s.prototype.addVertices=function(a,l,h,d){this.addVerticesMatrix(a.worldTransform,l,h,d)},s.prototype.addVerticesMatrix=function(a,l,h,d,v,_){v===void 0&&(v=0),_===void 0&&(_=v);for(var m=a.a,g=a.b,y=a.c,T=a.d,E=a.tx,b=a.ty,R=this.minX,I=this.minY,P=this.maxX,C=this.maxY,S=h;S<d;S+=2){var O=l[S],w=l[S+1],U=m*O+y*w+E,F=T*w+g*O+b;R=Math.min(R,U-v),P=Math.max(P,U+v),I=Math.min(I,F-_),C=Math.max(C,F+_)}this.minX=R,this.minY=I,this.maxX=P,this.maxY=C},s.prototype.addBounds=function(a){var l=this.minX,h=this.minY,d=this.maxX,v=this.maxY;this.minX=a.minX<l?a.minX:l,this.minY=a.minY<h?a.minY:h,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>v?a.maxY:v},s.prototype.addBoundsMask=function(a,l){var h=a.minX>l.minX?a.minX:l.minX,d=a.minY>l.minY?a.minY:l.minY,v=a.maxX<l.maxX?a.maxX:l.maxX,_=a.maxY<l.maxY?a.maxY:l.maxY;if(h<=v&&d<=_){var m=this.minX,g=this.minY,y=this.maxX,T=this.maxY;this.minX=h<m?h:m,this.minY=d<g?d:g,this.maxX=v>y?v:y,this.maxY=_>T?_:T}},s.prototype.addBoundsMatrix=function(a,l){this.addFrameMatrix(l,a.minX,a.minY,a.maxX,a.maxY)},s.prototype.addBoundsArea=function(a,l){var h=a.minX>l.x?a.minX:l.x,d=a.minY>l.y?a.minY:l.y,v=a.maxX<l.x+l.width?a.maxX:l.x+l.width,_=a.maxY<l.y+l.height?a.maxY:l.y+l.height;if(h<=v&&d<=_){var m=this.minX,g=this.minY,y=this.maxX,T=this.maxY;this.minX=h<m?h:m,this.minY=d<g?d:g,this.maxX=v>y?v:y,this.maxY=_>T?_:T}},s.prototype.pad=function(a,l){a===void 0&&(a=0),l===void 0&&(l=a),this.isEmpty()||(this.minX-=a,this.maxX+=a,this.minY-=l,this.maxY+=l)},s.prototype.addFramePad=function(a,l,h,d,v,_){a-=v,l-=_,h+=v,d+=_,this.minX=this.minX<a?this.minX:a,this.maxX=this.maxX>h?this.maxX:h,this.minY=this.minY<l?this.minY:l,this.maxY=this.maxY>d?this.maxY:d},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$k=function(s,a){return extendStatics$k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$k(s,a)};function __extends$k(s,a){extendStatics$k(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var DisplayObject$1=function(s){__extends$k(a,s);function a(){var l=s.call(this)||this;return l.tempDisplayObjectParent=null,l.transform=new Transform,l.alpha=1,l.visible=!0,l.renderable=!0,l.cullable=!1,l.cullArea=null,l.parent=null,l.worldAlpha=1,l._lastSortedIndex=0,l._zIndex=0,l.filterArea=null,l.filters=null,l._enabledFilters=null,l._bounds=new Bounds$2,l._localBounds=null,l._boundsID=0,l._boundsRect=null,l._localBoundsRect=null,l._mask=null,l._maskRefCount=0,l._destroyed=!1,l.isSprite=!1,l.isMask=!1,l}return a.mixin=function(l){for(var h=Object.keys(l),d=0;d<h.length;++d){var v=h[d];Object.defineProperty(a.prototype,v,Object.getOwnPropertyDescriptor(l,v))}},Object.defineProperty(a.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),a.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},a.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},a.prototype.getBounds=function(l,h){return l||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),h||(this._boundsRect||(this._boundsRect=new Rectangle),h=this._boundsRect),this._bounds.getRectangle(h)},a.prototype.getLocalBounds=function(l){l||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),l=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds$2);var h=this.transform,d=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var v=this._bounds,_=this._boundsID;this._bounds=this._localBounds;var m=this.getBounds(!1,l);return this.parent=d,this.transform=h,this._bounds=v,this._bounds.updateID+=this._boundsID-_,m},a.prototype.toGlobal=function(l,h,d){return d===void 0&&(d=!1),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(l,h)},a.prototype.toLocal=function(l,h,d,v){return h&&(l=h.toGlobal(l,d,v)),v||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(l,d)},a.prototype.setParent=function(l){if(!l||!l.addChild)throw new Error("setParent: Argument must be a Container");return l.addChild(this),l},a.prototype.setTransform=function(l,h,d,v,_,m,g,y,T){return l===void 0&&(l=0),h===void 0&&(h=0),d===void 0&&(d=1),v===void 0&&(v=1),_===void 0&&(_=0),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=0),this.position.x=l,this.position.y=h,this.scale.x=d||1,this.scale.y=v||1,this.rotation=_,this.skew.x=m,this.skew.y=g,this.pivot.x=y,this.pivot.y=T,this},a.prototype.destroy=function(l){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(a.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject$1),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),a.prototype.enableTempParent=function(){var l=this.parent;return this.parent=this._tempDisplayObjectParent,l},a.prototype.disableTempParent=function(l){this.parent=l},Object.defineProperty(a.prototype,"x",{get:function(){return this.position.x},set:function(l){this.transform.position.x=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.position.y},set:function(l){this.transform.position.y=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this.transform.position},set:function(l){this.transform.position.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this.transform.scale},set:function(l){this.transform.scale.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(l){this.transform.pivot.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"skew",{get:function(){return this.transform.skew},set:function(l){this.transform.skew.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(l){this.transform.rotation=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.transform.rotation*RAD_TO_DEG},set:function(l){this.transform.rotation=l*DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"zIndex",{get:function(){return this._zIndex},set:function(l){this._zIndex=l,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"worldVisible",{get:function(){var l=this;do{if(!l.visible)return!1;l=l.parent}while(l);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mask",{get:function(){return this._mask},set:function(l){if(this._mask!==l){if(this._mask){var h=this._mask.maskObject||this._mask;h._maskRefCount--,h._maskRefCount===0&&(h.renderable=!0,h.isMask=!1)}if(this._mask=l,this._mask){var h=this._mask.maskObject||this._mask;h._maskRefCount===0&&(h.renderable=!1,h.isMask=!0),h._maskRefCount++}}},enumerable:!1,configurable:!0}),a}(EventEmitter),TemporaryDisplayObject$1=function(s){__extends$k(a,s);function a(){var l=s!==null&&s.apply(this,arguments)||this;return l.sortDirty=null,l}return a}(DisplayObject$1);DisplayObject$1.prototype.displayObjectUpdateTransform=DisplayObject$1.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$3;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$3||(ENV$3={}));var RENDERER_TYPE$3;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$3||(RENDERER_TYPE$3={}));var BUFFER_BITS$3;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$3||(BUFFER_BITS$3={}));var BLEND_MODES$3;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$3||(BLEND_MODES$3={}));var DRAW_MODES$3;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$3||(DRAW_MODES$3={}));var FORMATS$3;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$3||(FORMATS$3={}));var TARGETS$3;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$3||(TARGETS$3={}));var TYPES$3;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$3||(TYPES$3={}));var SAMPLER_TYPES$3;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$3||(SAMPLER_TYPES$3={}));var SCALE_MODES$3;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$3||(SCALE_MODES$3={}));var WRAP_MODES$3;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$3||(WRAP_MODES$3={}));var MIPMAP_MODES$3;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$3||(MIPMAP_MODES$3={}));var ALPHA_MODES$3;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$3||(ALPHA_MODES$3={}));var CLEAR_MODES$3;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$3||(CLEAR_MODES$3={}));var GC_MODES$3;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$3||(GC_MODES$3={}));var PRECISION$3;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$3||(PRECISION$3={}));var MASK_TYPES$3;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE"})(MASK_TYPES$3||(MASK_TYPES$3={}));var MSAA_QUALITY$3;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$3||(MSAA_QUALITY$3={}));var BUFFER_TYPE$3;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$3||(BUFFER_TYPE$3={}));function sortChildren$1(s,a){return s.zIndex===a.zIndex?s._lastSortedIndex-a._lastSortedIndex:s.zIndex-a.zIndex}var Container$1=function(s){__extends$k(a,s);function a(){var l=s.call(this)||this;return l.children=[],l.sortableChildren=settings$1.SORTABLE_CHILDREN,l.sortDirty=!1,l}return a.prototype.onChildrenChange=function(l){},a.prototype.addChild=function(){for(var l=arguments,h=[],d=0;d<arguments.length;d++)h[d]=l[d];if(h.length>1)for(var v=0;v<h.length;v++)this.addChild(h[v]);else{var _=h[0];_.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.push(_),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",_,this,this.children.length-1),_.emit("added",this)}return h[0]},a.prototype.addChildAt=function(l,h){if(h<0||h>this.children.length)throw new Error(l+"addChildAt: The index "+h+" supplied is out of bounds "+this.children.length);return l.parent&&l.parent.removeChild(l),l.parent=this,this.sortDirty=!0,l.transform._parentID=-1,this.children.splice(h,0,l),this._boundsID++,this.onChildrenChange(h),l.emit("added",this),this.emit("childAdded",l,this,h),l},a.prototype.swapChildren=function(l,h){if(l!==h){var d=this.getChildIndex(l),v=this.getChildIndex(h);this.children[d]=h,this.children[v]=l,this.onChildrenChange(d<v?d:v)}},a.prototype.getChildIndex=function(l){var h=this.children.indexOf(l);if(h===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return h},a.prototype.setChildIndex=function(l,h){if(h<0||h>=this.children.length)throw new Error("The index "+h+" supplied is out of bounds "+this.children.length);var d=this.getChildIndex(l);removeItems(this.children,d,1),this.children.splice(h,0,l),this.onChildrenChange(h)},a.prototype.getChildAt=function(l){if(l<0||l>=this.children.length)throw new Error("getChildAt: Index ("+l+") does not exist.");return this.children[l]},a.prototype.removeChild=function(){for(var l=arguments,h=[],d=0;d<arguments.length;d++)h[d]=l[d];if(h.length>1)for(var v=0;v<h.length;v++)this.removeChild(h[v]);else{var _=h[0],m=this.children.indexOf(_);if(m===-1)return null;_.parent=null,_.transform._parentID=-1,removeItems(this.children,m,1),this._boundsID++,this.onChildrenChange(m),_.emit("removed",this),this.emit("childRemoved",_,this,m)}return h[0]},a.prototype.removeChildAt=function(l){var h=this.getChildAt(l);return h.parent=null,h.transform._parentID=-1,removeItems(this.children,l,1),this._boundsID++,this.onChildrenChange(l),h.emit("removed",this),this.emit("childRemoved",h,this,l),h},a.prototype.removeChildren=function(l,h){l===void 0&&(l=0),h===void 0&&(h=this.children.length);var d=l,v=h,_=v-d,m;if(_>0&&_<=v){m=this.children.splice(d,_);for(var g=0;g<m.length;++g)m[g].parent=null,m[g].transform&&(m[g].transform._parentID=-1);this._boundsID++,this.onChildrenChange(l);for(var g=0;g<m.length;++g)m[g].emit("removed",this),this.emit("childRemoved",m[g],this,g);return m}else if(_===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},a.prototype.sortChildren=function(){for(var l=!1,h=0,d=this.children.length;h<d;++h){var v=this.children[h];v._lastSortedIndex=h,!l&&v.zIndex!==0&&(l=!0)}l&&this.children.length>1&&this.children.sort(sortChildren$1),this.sortDirty=!1},a.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var l=0,h=this.children.length;l<h;++l){var d=this.children[l];d.visible&&d.updateTransform()}},a.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var l=0;l<this.children.length;l++){var h=this.children[l];if(!(!h.visible||!h.renderable))if(h.calculateBounds(),h._mask){var d=h._mask.maskObject||h._mask;d.calculateBounds(),this._bounds.addBoundsMask(h._bounds,d._bounds)}else h.filterArea?this._bounds.addBoundsArea(h._bounds,h.filterArea):this._bounds.addBounds(h._bounds)}this._bounds.updateID=this._boundsID},a.prototype.getLocalBounds=function(l,h){h===void 0&&(h=!1);var d=s.prototype.getLocalBounds.call(this,l);if(!h)for(var v=0,_=this.children.length;v<_;++v){var m=this.children[v];m.visible&&m.updateTransform()}return d},a.prototype._calculateBounds=function(){},a.prototype._renderWithCulling=function(l){var h=l.renderTexture.sourceFrame;if(h.width>0&&h.height>0){var d,v;if(this.cullArea?(d=this.cullArea,v=this.worldTransform):this._render!==a.prototype._render&&(d=this.getBounds(!0)),d&&h.intersects(d,v))this._render(l);else if(this.cullArea)return;for(var _=0,m=this.children.length;_<m;++_){var g=this.children[_],y=g.cullable;g.cullable=y||!this.cullArea,g.render(l),g.cullable=y}}},a.prototype.render=function(l){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(l);else if(this.cullable)this._renderWithCulling(l);else{this._render(l);for(var h=0,d=this.children.length;h<d;++h)this.children[h].render(l)}},a.prototype.renderAdvanced=function(l){var h=this.filters,d=this._mask;if(h){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var v=0;v<h.length;v++)h[v].enabled&&this._enabledFilters.push(h[v])}var _=h&&this._enabledFilters&&this._enabledFilters.length||d&&(!d.isMaskData||d.enabled&&(d.autoDetect||d.type!==MASK_TYPES$3.NONE));if(_&&l.batch.flush(),h&&this._enabledFilters&&this._enabledFilters.length&&l.filter.push(this,this._enabledFilters),d&&l.mask.push(this,this._mask),this.cullable)this._renderWithCulling(l);else{this._render(l);for(var v=0,m=this.children.length;v<m;++v)this.children[v].render(l)}_&&l.batch.flush(),d&&l.mask.pop(this),h&&this._enabledFilters&&this._enabledFilters.length&&l.filter.pop()},a.prototype._render=function(l){},a.prototype.destroy=function(l){s.prototype.destroy.call(this),this.sortDirty=!1;var h=typeof l=="boolean"?l:l&&l.children,d=this.removeChildren(0,this.children.length);if(h)for(var v=0;v<d.length;++v)d[v].destroy(l)},Object.defineProperty(a.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(l){var h=this.getLocalBounds().width;h!==0?this.scale.x=l/h:this.scale.x=1,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(l){var h=this.getLocalBounds().height;h!==0?this.scale.y=l/h:this.scale.y=1,this._height=l},enumerable:!1,configurable:!0}),a}(DisplayObject$1);Container$1.prototype.containerUpdateTransform=Container$1.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject$1.mixin(accessibleTarget);var KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,AccessibilityManager=function(){function s(a){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile$2.tablet||isMobile$2.phone)&&this.createTouchHook();var l=document.createElement("div");l.style.width=DIV_TOUCH_SIZE+"px",l.style.height=DIV_TOUCH_SIZE+"px",l.style.position="absolute",l.style.top=DIV_TOUCH_POS_X+"px",l.style.left=DIV_TOUCH_POS_Y+"px",l.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=l,this.renderer=a,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(s.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),s.prototype.createTouchHook=function(){var a=this,l=document.createElement("button");l.style.width=DIV_HOOK_SIZE+"px",l.style.height=DIV_HOOK_SIZE+"px",l.style.position="absolute",l.style.top=DIV_HOOK_POS_X+"px",l.style.left=DIV_HOOK_POS_Y+"px",l.style.zIndex=DIV_HOOK_ZINDEX.toString(),l.style.backgroundColor="#FF0000",l.title="select to enable accessibility for this content",l.addEventListener("focus",function(){a._isMobileAccessibility=!0,a.activate(),a.destroyTouchHook()}),document.body.appendChild(l),this._hookDiv=l},s.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},s.prototype.activate=function(){var a;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(a=this.renderer.view.parentNode)===null||a===void 0||a.appendChild(this.div))},s.prototype.deactivate=function(){var a;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(a=this.div.parentNode)===null||a===void 0||a.removeChild(this.div))},s.prototype.updateAccessibleObjects=function(a){if(!(!a.visible||!a.accessibleChildren)){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);var l=a.children;if(l)for(var h=0;h<l.length;h++)this.updateAccessibleObjects(l[h])}},s.prototype.update=function(){var a=performance.now();if(!(isMobile$2.android.device&&a<this.androidUpdateCount)&&(this.androidUpdateCount=a+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var l=this.renderer.view.getBoundingClientRect(),h=l.left,d=l.top,v=l.width,_=l.height,m=this.renderer,g=m.width,y=m.height,T=m.resolution,E=v/g*T,b=_/y*T,R=this.div;R.style.left=h+"px",R.style.top=d+"px",R.style.width=g+"px",R.style.height=y+"px";for(var I=0;I<this.children.length;I++){var P=this.children[I];if(P.renderId!==this.renderId)P._accessibleActive=!1,removeItems(this.children,I,1),this.div.removeChild(P._accessibleDiv),this.pool.push(P._accessibleDiv),P._accessibleDiv=null,I--;else{R=P._accessibleDiv;var C=P.hitArea,S=P.worldTransform;P.hitArea?(R.style.left=(S.tx+C.x*S.a)*E+"px",R.style.top=(S.ty+C.y*S.d)*b+"px",R.style.width=C.width*S.a*E+"px",R.style.height=C.height*S.d*b+"px"):(C=P.getBounds(),this.capHitArea(C),R.style.left=C.x*E+"px",R.style.top=C.y*b+"px",R.style.width=C.width*E+"px",R.style.height=C.height*b+"px",R.title!==P.accessibleTitle&&P.accessibleTitle!==null&&(R.title=P.accessibleTitle),R.getAttribute("aria-label")!==P.accessibleHint&&P.accessibleHint!==null&&R.setAttribute("aria-label",P.accessibleHint)),(P.accessibleTitle!==R.title||P.tabIndex!==R.tabIndex)&&(R.title=P.accessibleTitle,R.tabIndex=P.tabIndex,this.debug&&this.updateDebugHTML(R))}}this.renderId++}},s.prototype.updateDebugHTML=function(a){a.innerHTML="type: "+a.type+"</br> title : "+a.title+"</br> tabIndex: "+a.tabIndex},s.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0);var l=this.renderer,h=l.width,d=l.height;a.x+a.width>h&&(a.width=h-a.x),a.y+a.height>d&&(a.height=d-a.y)},s.prototype.addChild=function(a){var l=this.pool.pop();l||(l=document.createElement("button"),l.style.width=DIV_TOUCH_SIZE+"px",l.style.height=DIV_TOUCH_SIZE+"px",l.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",l.style.position="absolute",l.style.zIndex=DIV_TOUCH_ZINDEX.toString(),l.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?l.setAttribute("aria-live","off"):l.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?l.setAttribute("aria-relevant","additions"):l.setAttribute("aria-relevant","text"),l.addEventListener("click",this._onClick.bind(this)),l.addEventListener("focus",this._onFocus.bind(this)),l.addEventListener("focusout",this._onFocusOut.bind(this))),l.style.pointerEvents=a.accessiblePointerEvents,l.type=a.accessibleType,a.accessibleTitle&&a.accessibleTitle!==null?l.title=a.accessibleTitle:(!a.accessibleHint||a.accessibleHint===null)&&(l.title="displayObject "+a.tabIndex),a.accessibleHint&&a.accessibleHint!==null&&l.setAttribute("aria-label",a.accessibleHint),this.debug&&this.updateDebugHTML(l),a._accessibleActive=!0,a._accessibleDiv=l,l.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},s.prototype._onClick=function(a){var l=this.renderer.plugins.interaction,h=a.target.displayObject,d=l.eventData;l.dispatchEvent(h,"click",d),l.dispatchEvent(h,"pointertap",d),l.dispatchEvent(h,"tap",d)},s.prototype._onFocus=function(a){a.target.getAttribute("aria-live")||a.target.setAttribute("aria-live","assertive");var l=this.renderer.plugins.interaction,h=a.target.displayObject,d=l.eventData;l.dispatchEvent(h,"mouseover",d)},s.prototype._onFocusOut=function(a){a.target.getAttribute("aria-live")||a.target.setAttribute("aria-live","polite");var l=this.renderer.plugins.interaction,h=a.target.displayObject,d=l.eventData;l.dispatchEvent(h,"mouseout",d)},s.prototype._onKeyDown=function(a){a.keyCode===KEY_CODE_TAB&&this.activate()},s.prototype._onMouseMove=function(a){a.movementX===0&&a.movementY===0||this.deactivate()},s.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},s}();/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.TARGET_FPMS=.06;var UPDATE_PRIORITY;(function(s){s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY"})(UPDATE_PRIORITY||(UPDATE_PRIORITY={}));var TickerListener=function(){function s(a,l,h,d){l===void 0&&(l=null),h===void 0&&(h=0),d===void 0&&(d=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=a,this.context=l,this.priority=h,this.once=d}return s.prototype.match=function(a,l){return l===void 0&&(l=null),this.fn===a&&this.context===l},s.prototype.emit=function(a){this.fn&&(this.context?this.fn.call(this.context,a):this.fn(a));var l=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),l},s.prototype.connect=function(a){this.previous=a,a.next&&(a.next.previous=this),this.next=a.next,a.next=this},s.prototype.destroy=function(a){a===void 0&&(a=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var l=this.next;return this.next=a?null:l,this.previous=null,l},s}(),Ticker=function(){function s(){var a=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/settings$1.TARGET_FPMS,this.elapsedMS=1/settings$1.TARGET_FPMS,this._tick=function(l){a._requestId=null,a.started&&(a.update(l),a.started&&a._requestId===null&&a._head.next&&(a._requestId=requestAnimationFrame(a._tick)))}}return s.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},s.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},s.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},s.prototype.add=function(a,l,h){return h===void 0&&(h=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(a,l,h))},s.prototype.addOnce=function(a,l,h){return h===void 0&&(h=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(a,l,h,!0))},s.prototype._addListener=function(a){var l=this._head.next,h=this._head;if(!l)a.connect(h);else{for(;l;){if(a.priority>l.priority){a.connect(h);break}h=l,l=l.next}a.previous||a.connect(h)}return this._startIfPossible(),this},s.prototype.remove=function(a,l){for(var h=this._head.next;h;)h.match(a,l)?h=h.destroy():h=h.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(s.prototype,"count",{get:function(){if(!this._head)return 0;for(var a=0,l=this._head;l=l.next;)a++;return a},enumerable:!1,configurable:!0}),s.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},s.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},s.prototype.destroy=function(){if(!this._protected){this.stop();for(var a=this._head.next;a;)a=a.destroy(!0);this._head.destroy(),this._head=null}},s.prototype.update=function(a){a===void 0&&(a=performance.now());var l;if(a>this.lastTime){if(l=this.elapsedMS=a-this.lastTime,l>this._maxElapsedMS&&(l=this._maxElapsedMS),l*=this.speed,this._minElapsedMS){var h=a-this._lastFrame|0;if(h<this._minElapsedMS)return;this._lastFrame=a-h%this._minElapsedMS}this.deltaMS=l,this.deltaTime=this.deltaMS*settings$1.TARGET_FPMS;for(var d=this._head,v=d.next;v;)v=v.emit(this.deltaTime);d.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=a},Object.defineProperty(s.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var l=Math.min(this.maxFPS,a),h=Math.min(Math.max(0,l)/1e3,settings$1.TARGET_FPMS);this._maxElapsedMS=1/h},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(a){if(a===0)this._minElapsedMS=0;else{var l=Math.max(this.minFPS,a);this._minElapsedMS=1/(l/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(s,"shared",{get:function(){if(!s._shared){var a=s._shared=new s;a.autoStart=!0,a._protected=!0}return s._shared},enumerable:!1,configurable:!0}),Object.defineProperty(s,"system",{get:function(){if(!s._system){var a=s._system=new s;a.autoStart=!0,a._protected=!0}return s._system},enumerable:!1,configurable:!0}),s}(),TickerPlugin=function(){function s(){}return s.init=function(a){var l=this;a=Object.assign({autoStart:!0,sharedTicker:!1},a),Object.defineProperty(this,"ticker",{set:function(h){this._ticker&&this._ticker.remove(this.render,this),this._ticker=h,h&&h.add(this.render,this,UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){l._ticker.stop()},this.start=function(){l._ticker.start()},this._ticker=null,this.ticker=a.sharedTicker?Ticker.shared:new Ticker,a.autoStart&&this.start()},s.destroy=function(){if(this._ticker){var a=this._ticker;this.ticker=null,a.destroy()}},s}();/*!
 * @pixi/interaction - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var InteractionData=function(){function s(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(s.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),s.prototype.getLocalPosition=function(a,l,h){return a.worldTransform.applyInverse(h||this.global,l)},s.prototype.copyEvent=function(a){"isPrimary"in a&&a.isPrimary&&(this.isPrimary=!0),this.button="button"in a&&a.button;var l="buttons"in a&&a.buttons;this.buttons=Number.isInteger(l)?l:"which"in a&&a.which,this.width="width"in a&&a.width,this.height="height"in a&&a.height,this.tiltX="tiltX"in a&&a.tiltX,this.tiltY="tiltY"in a&&a.tiltY,this.pointerType="pointerType"in a&&a.pointerType,this.pressure="pressure"in a&&a.pressure,this.rotationAngle="rotationAngle"in a&&a.rotationAngle,this.twist="twist"in a&&a.twist||0,this.tangentialPressure="tangentialPressure"in a&&a.tangentialPressure||0},s.prototype.reset=function(){this.isPrimary=!1},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$j=function(s,a){return extendStatics$j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$j(s,a)};function __extends$j(s,a){extendStatics$j(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var InteractionEvent=function(){function s(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return s.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},s.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},s}(),InteractionTrackingData=function(){function s(a){this._pointerId=a,this._flags=s.FLAGS.NONE}return s.prototype._doSet=function(a,l){l?this._flags=this._flags|a:this._flags=this._flags&~a},Object.defineProperty(s.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"flags",{get:function(){return this._flags},set:function(a){this._flags=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"none",{get:function(){return this._flags===s.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"over",{get:function(){return(this._flags&s.FLAGS.OVER)!==0},set:function(a){this._doSet(s.FLAGS.OVER,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"rightDown",{get:function(){return(this._flags&s.FLAGS.RIGHT_DOWN)!==0},set:function(a){this._doSet(s.FLAGS.RIGHT_DOWN,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"leftDown",{get:function(){return(this._flags&s.FLAGS.LEFT_DOWN)!==0},set:function(a){this._doSet(s.FLAGS.LEFT_DOWN,a)},enumerable:!1,configurable:!0}),s.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),s}(),TreeSearch=function(){function s(){this._tempPoint=new Point}return s.prototype.recursiveFindHit=function(a,l,h,d,v){if(!l||!l.visible)return!1;var _=a.data.global;v=l.interactive||v;var m=!1,g=v,y=!0;if(l.hitArea?(d&&(l.worldTransform.applyInverse(_,this._tempPoint),l.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?m=!0:(d=!1,y=!1)),g=!1):l._mask&&d&&(l._mask.containsPoint&&l._mask.containsPoint(_)||(d=!1)),y&&l.interactiveChildren&&l.children)for(var T=l.children,E=T.length-1;E>=0;E--){var b=T[E],R=this.recursiveFindHit(a,b,h,d,g);if(R){if(!b.parent)continue;g=!1,R&&(a.target&&(d=!1),m=!0)}}return v&&(d&&!a.target&&!l.hitArea&&l.containsPoint&&l.containsPoint(_)&&(m=!0),l.interactive&&(m&&!a.target&&(a.target=l),h&&h(a,l,!!m))),m},s.prototype.findHit=function(a,l,h,d){this.recursiveFindHit(a,l,h,d,!1)},s}(),interactiveTarget={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(s){s?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};DisplayObject$1.mixin(interactiveTarget);var MOUSE_POINTER_ID=1,hitTestEvent={target:null,data:{global:null}},InteractionManager=function(s){__extends$j(a,s);function a(l,h){var d=s.call(this)||this;return h=h||{},d.renderer=l,d.autoPreventDefault=h.autoPreventDefault!==void 0?h.autoPreventDefault:!0,d.interactionFrequency=h.interactionFrequency||10,d.mouse=new InteractionData,d.mouse.identifier=MOUSE_POINTER_ID,d.mouse.global.set(-999999),d.activeInteractionData={},d.activeInteractionData[MOUSE_POINTER_ID]=d.mouse,d.interactionDataPool=[],d.eventData=new InteractionEvent,d.interactionDOMElement=null,d.moveWhenInside=!1,d.eventsAdded=!1,d.tickerAdded=!1,d.mouseOverRenderer=!("PointerEvent"in globalThis),d.supportsTouchEvents="ontouchstart"in globalThis,d.supportsPointerEvents=!!globalThis.PointerEvent,d.onPointerUp=d.onPointerUp.bind(d),d.processPointerUp=d.processPointerUp.bind(d),d.onPointerCancel=d.onPointerCancel.bind(d),d.processPointerCancel=d.processPointerCancel.bind(d),d.onPointerDown=d.onPointerDown.bind(d),d.processPointerDown=d.processPointerDown.bind(d),d.onPointerMove=d.onPointerMove.bind(d),d.processPointerMove=d.processPointerMove.bind(d),d.onPointerOut=d.onPointerOut.bind(d),d.processPointerOverOut=d.processPointerOverOut.bind(d),d.onPointerOver=d.onPointerOver.bind(d),d.cursorStyles={default:"inherit",pointer:"pointer"},d.currentCursorMode=null,d.cursor=null,d.resolution=1,d.delayedEvents=[],d.search=new TreeSearch,d._tempDisplayObject=new TemporaryDisplayObject$1,d._eventListenerOptions={capture:!0,passive:!1},d._useSystemTicker=h.useSystemTicker!==void 0?h.useSystemTicker:!0,d.setTargetElement(d.renderer.view,d.renderer.resolution),d}return Object.defineProperty(a.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(l){this._useSystemTicker=l,l?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),a.prototype.hitTest=function(l,h){return hitTestEvent.target=null,hitTestEvent.data.global=l,h||(h=this.lastObjectRendered),this.processInteractive(hitTestEvent,h,null,!0),hitTestEvent.target},a.prototype.setTargetElement=function(l,h){h===void 0&&(h=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=l,this.resolution=h,this.addEvents(),this.addTickerListener()},a.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},a.prototype.removeTickerListener=function(){!this.tickerAdded||(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},a.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var l=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(l.msContentZooming="none",l.msTouchAction="none"):this.supportsPointerEvents&&(l.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},a.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var l=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(l.msContentZooming="",l.msTouchAction=""):this.supportsPointerEvents&&(l.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},a.prototype.tickerUpdate=function(l){this._deltaTime+=l,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},a.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var l in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(l)){var h=this.activeInteractionData[l];if(h.originalEvent&&h.pointerType!=="touch"){var d=this.configureInteractionEventForDOMEvent(this.eventData,h.originalEvent,h);this.processInteractive(d,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},a.prototype.setCursorMode=function(l){l=l||"default";var h=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(h=!1),this.currentCursorMode!==l){this.currentCursorMode=l;var d=this.cursorStyles[l];if(d)switch(typeof d){case"string":h&&(this.interactionDOMElement.style.cursor=d);break;case"function":d(l);break;case"object":h&&Object.assign(this.interactionDOMElement.style,d);break}else h&&typeof l=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,l)&&(this.interactionDOMElement.style.cursor=l)}},a.prototype.dispatchEvent=function(l,h,d){(!d.stopPropagationHint||l===d.stopsPropagatingAt)&&(d.currentTarget=l,d.type=h,l.emit(h,d),l[h]&&l[h](d))},a.prototype.delayDispatchEvent=function(l,h,d){this.delayedEvents.push({displayObject:l,eventString:h,eventData:d})},a.prototype.mapPositionToPoint=function(l,h,d){var v;this.interactionDOMElement.parentElement?v=this.interactionDOMElement.getBoundingClientRect():v={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var _=1/this.resolution;l.x=(h-v.left)*(this.interactionDOMElement.width/v.width)*_,l.y=(d-v.top)*(this.interactionDOMElement.height/v.height)*_},a.prototype.processInteractive=function(l,h,d,v){var _=this.search.findHit(l,h,d,v),m=this.delayedEvents;if(!m.length)return _;l.stopPropagationHint=!1;var g=m.length;this.delayedEvents=[];for(var y=0;y<g;y++){var T=m[y],E=T.displayObject,b=T.eventString,R=T.eventData;R.stopsPropagatingAt===E&&(R.stopPropagationHint=!0),this.dispatchEvent(E,b,R)}return _},a.prototype.onPointerDown=function(l){if(!(this.supportsTouchEvents&&l.pointerType==="touch")){var h=this.normalizeToPointerData(l);if(this.autoPreventDefault&&h[0].isNormalized){var d=l.cancelable||!("cancelable"in l);d&&l.preventDefault()}for(var v=h.length,_=0;_<v;_++){var m=h[_],g=this.getInteractionDataForPointerId(m),y=this.configureInteractionEventForDOMEvent(this.eventData,m,g);if(y.data.originalEvent=l,this.processInteractive(y,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",y),m.pointerType==="touch")this.emit("touchstart",y);else if(m.pointerType==="mouse"||m.pointerType==="pen"){var T=m.button===2;this.emit(T?"rightdown":"mousedown",this.eventData)}}}},a.prototype.processPointerDown=function(l,h,d){var v=l.data,_=l.data.identifier;if(d){if(h.trackedPointers[_]||(h.trackedPointers[_]=new InteractionTrackingData(_)),this.dispatchEvent(h,"pointerdown",l),v.pointerType==="touch")this.dispatchEvent(h,"touchstart",l);else if(v.pointerType==="mouse"||v.pointerType==="pen"){var m=v.button===2;m?h.trackedPointers[_].rightDown=!0:h.trackedPointers[_].leftDown=!0,this.dispatchEvent(h,m?"rightdown":"mousedown",l)}}},a.prototype.onPointerComplete=function(l,h,d){for(var v=this.normalizeToPointerData(l),_=v.length,m=l.target!==this.interactionDOMElement?"outside":"",g=0;g<_;g++){var y=v[g],T=this.getInteractionDataForPointerId(y),E=this.configureInteractionEventForDOMEvent(this.eventData,y,T);if(E.data.originalEvent=l,this.processInteractive(E,this.lastObjectRendered,d,h||!m),this.emit(h?"pointercancel":"pointerup"+m,E),y.pointerType==="mouse"||y.pointerType==="pen"){var b=y.button===2;this.emit(b?"rightup"+m:"mouseup"+m,E)}else y.pointerType==="touch"&&(this.emit(h?"touchcancel":"touchend"+m,E),this.releaseInteractionDataForPointerId(y.pointerId))}},a.prototype.onPointerCancel=function(l){this.supportsTouchEvents&&l.pointerType==="touch"||this.onPointerComplete(l,!0,this.processPointerCancel)},a.prototype.processPointerCancel=function(l,h){var d=l.data,v=l.data.identifier;h.trackedPointers[v]!==void 0&&(delete h.trackedPointers[v],this.dispatchEvent(h,"pointercancel",l),d.pointerType==="touch"&&this.dispatchEvent(h,"touchcancel",l))},a.prototype.onPointerUp=function(l){this.supportsTouchEvents&&l.pointerType==="touch"||this.onPointerComplete(l,!1,this.processPointerUp)},a.prototype.processPointerUp=function(l,h,d){var v=l.data,_=l.data.identifier,m=h.trackedPointers[_],g=v.pointerType==="touch",y=v.pointerType==="mouse"||v.pointerType==="pen",T=!1;if(y){var E=v.button===2,b=InteractionTrackingData.FLAGS,R=E?b.RIGHT_DOWN:b.LEFT_DOWN,I=m!==void 0&&m.flags&R;d?(this.dispatchEvent(h,E?"rightup":"mouseup",l),I&&(this.dispatchEvent(h,E?"rightclick":"click",l),T=!0)):I&&this.dispatchEvent(h,E?"rightupoutside":"mouseupoutside",l),m&&(E?m.rightDown=!1:m.leftDown=!1)}d?(this.dispatchEvent(h,"pointerup",l),g&&this.dispatchEvent(h,"touchend",l),m&&((!y||T)&&this.dispatchEvent(h,"pointertap",l),g&&(this.dispatchEvent(h,"tap",l),m.over=!1))):m&&(this.dispatchEvent(h,"pointerupoutside",l),g&&this.dispatchEvent(h,"touchendoutside",l)),m&&m.none&&delete h.trackedPointers[_]},a.prototype.onPointerMove=function(l){if(!(this.supportsTouchEvents&&l.pointerType==="touch")){var h=this.normalizeToPointerData(l);(h[0].pointerType==="mouse"||h[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var d=h.length,v=0;v<d;v++){var _=h[v],m=this.getInteractionDataForPointerId(_),g=this.configureInteractionEventForDOMEvent(this.eventData,_,m);g.data.originalEvent=l,this.processInteractive(g,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",g),_.pointerType==="touch"&&this.emit("touchmove",g),(_.pointerType==="mouse"||_.pointerType==="pen")&&this.emit("mousemove",g)}h[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},a.prototype.processPointerMove=function(l,h,d){var v=l.data,_=v.pointerType==="touch",m=v.pointerType==="mouse"||v.pointerType==="pen";m&&this.processPointerOverOut(l,h,d),(!this.moveWhenInside||d)&&(this.dispatchEvent(h,"pointermove",l),_&&this.dispatchEvent(h,"touchmove",l),m&&this.dispatchEvent(h,"mousemove",l))},a.prototype.onPointerOut=function(l){if(!(this.supportsTouchEvents&&l.pointerType==="touch")){var h=this.normalizeToPointerData(l),d=h[0];d.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var v=this.getInteractionDataForPointerId(d),_=this.configureInteractionEventForDOMEvent(this.eventData,d,v);_.data.originalEvent=d,this.processInteractive(_,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",_),d.pointerType==="mouse"||d.pointerType==="pen"?this.emit("mouseout",_):this.releaseInteractionDataForPointerId(v.identifier)}},a.prototype.processPointerOverOut=function(l,h,d){var v=l.data,_=l.data.identifier,m=v.pointerType==="mouse"||v.pointerType==="pen",g=h.trackedPointers[_];d&&!g&&(g=h.trackedPointers[_]=new InteractionTrackingData(_)),g!==void 0&&(d&&this.mouseOverRenderer?(g.over||(g.over=!0,this.delayDispatchEvent(h,"pointerover",l),m&&this.delayDispatchEvent(h,"mouseover",l)),m&&this.cursor===null&&(this.cursor=h.cursor)):g.over&&(g.over=!1,this.dispatchEvent(h,"pointerout",this.eventData),m&&this.dispatchEvent(h,"mouseout",l),g.none&&delete h.trackedPointers[_]))},a.prototype.onPointerOver=function(l){var h=this.normalizeToPointerData(l),d=h[0],v=this.getInteractionDataForPointerId(d),_=this.configureInteractionEventForDOMEvent(this.eventData,d,v);_.data.originalEvent=d,d.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",_),(d.pointerType==="mouse"||d.pointerType==="pen")&&this.emit("mouseover",_)},a.prototype.getInteractionDataForPointerId=function(l){var h=l.pointerId,d;return h===MOUSE_POINTER_ID||l.pointerType==="mouse"?d=this.mouse:this.activeInteractionData[h]?d=this.activeInteractionData[h]:(d=this.interactionDataPool.pop()||new InteractionData,d.identifier=h,this.activeInteractionData[h]=d),d.copyEvent(l),d},a.prototype.releaseInteractionDataForPointerId=function(l){var h=this.activeInteractionData[l];h&&(delete this.activeInteractionData[l],h.reset(),this.interactionDataPool.push(h))},a.prototype.configureInteractionEventForDOMEvent=function(l,h,d){return l.data=d,this.mapPositionToPoint(d.global,h.clientX,h.clientY),h.pointerType==="touch"&&(h.globalX=d.global.x,h.globalY=d.global.y),d.originalEvent=h,l.reset(),l},a.prototype.normalizeToPointerData=function(l){var h=[];if(this.supportsTouchEvents&&l instanceof TouchEvent)for(var d=0,v=l.changedTouches.length;d<v;d++){var _=l.changedTouches[d];typeof _.button=="undefined"&&(_.button=l.touches.length?1:0),typeof _.buttons=="undefined"&&(_.buttons=l.touches.length?1:0),typeof _.isPrimary=="undefined"&&(_.isPrimary=l.touches.length===1&&l.type==="touchstart"),typeof _.width=="undefined"&&(_.width=_.radiusX||1),typeof _.height=="undefined"&&(_.height=_.radiusY||1),typeof _.tiltX=="undefined"&&(_.tiltX=0),typeof _.tiltY=="undefined"&&(_.tiltY=0),typeof _.pointerType=="undefined"&&(_.pointerType="touch"),typeof _.pointerId=="undefined"&&(_.pointerId=_.identifier||0),typeof _.pressure=="undefined"&&(_.pressure=_.force||.5),typeof _.twist=="undefined"&&(_.twist=0),typeof _.tangentialPressure=="undefined"&&(_.tangentialPressure=0),typeof _.layerX=="undefined"&&(_.layerX=_.offsetX=_.clientX),typeof _.layerY=="undefined"&&(_.layerY=_.offsetY=_.clientY),_.isNormalized=!0,h.push(_)}else if(!globalThis.MouseEvent||l instanceof MouseEvent&&(!this.supportsPointerEvents||!(l instanceof globalThis.PointerEvent))){var m=l;typeof m.isPrimary=="undefined"&&(m.isPrimary=!0),typeof m.width=="undefined"&&(m.width=1),typeof m.height=="undefined"&&(m.height=1),typeof m.tiltX=="undefined"&&(m.tiltX=0),typeof m.tiltY=="undefined"&&(m.tiltY=0),typeof m.pointerType=="undefined"&&(m.pointerType="mouse"),typeof m.pointerId=="undefined"&&(m.pointerId=MOUSE_POINTER_ID),typeof m.pressure=="undefined"&&(m.pressure=.5),typeof m.twist=="undefined"&&(m.twist=0),typeof m.tangentialPressure=="undefined"&&(m.tangentialPressure=0),m.isNormalized=!0,h.push(m)}else h.push(l);return h},a.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},a}(EventEmitter);/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Runner=function(){function s(a){this.items=[],this._name=a,this._aliasCount=0}return s.prototype.emit=function(a,l,h,d,v,_,m,g){if(arguments.length>8)throw new Error("max arguments reached");var y=this,T=y.name,E=y.items;this._aliasCount++;for(var b=0,R=E.length;b<R;b++)E[b][T](a,l,h,d,v,_,m,g);return E===this.items&&this._aliasCount--,this},s.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},s.prototype.add=function(a){return a[this._name]&&(this.ensureNonAliasedItems(),this.remove(a),this.items.push(a)),this},s.prototype.remove=function(a){var l=this.items.indexOf(a);return l!==-1&&(this.ensureNonAliasedItems(),this.items.splice(l,1)),this},s.prototype.contains=function(a){return this.items.indexOf(a)!==-1},s.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},s.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(s.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),s}();Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.PREFER_ENV=isMobile$2.any?ENV$4.WEBGL:ENV$4.WEBGL2;settings$1.STRICT_TEXTURE_CACHE=!1;var INSTALLED=[];function autoDetectResource(s,a){if(!s)return null;var l="";if(typeof s=="string"){var h=/\.(\w{3,4})(?:$|\?|#)/i.exec(s);h&&(l=h[1].toLowerCase())}for(var d=INSTALLED.length-1;d>=0;--d){var v=INSTALLED[d];if(v.test&&v.test(s,l))return new v(s,a)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$i=function(s,a){return extendStatics$i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$i(s,a)};function __extends$i(s,a){extendStatics$i(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var __assign$1=function(){return __assign$1=Object.assign||function(a){for(var l=arguments,h,d=1,v=arguments.length;d<v;d++){h=l[d];for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(a[_]=h[_])}return a},__assign$1.apply(this,arguments)};function __rest(s,a){var l={};for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&a.indexOf(h)<0&&(l[h]=s[h]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,h=Object.getOwnPropertySymbols(s);d<h.length;d++)a.indexOf(h[d])<0&&(l[h[d]]=s[h[d]]);return l}var Resource=function(){function s(a,l){a===void 0&&(a=0),l===void 0&&(l=0),this._width=a,this._height=l,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}return s.prototype.bind=function(a){this.onResize.add(a),this.onUpdate.add(a),this.onError.add(a),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},s.prototype.unbind=function(a){this.onResize.remove(a),this.onUpdate.remove(a),this.onError.remove(a)},s.prototype.resize=function(a,l){(a!==this._width||l!==this._height)&&(this._width=a,this._height=l,this.onResize.emit(a,l))},Object.defineProperty(s.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),s.prototype.update=function(){this.destroyed||this.onUpdate.emit()},s.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(s.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),s.prototype.style=function(a,l,h){return!1},s.prototype.dispose=function(){},s.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},s.test=function(a,l){return!1},s}(),BufferResource=function(s){__extends$i(a,s);function a(l,h){var d=this,v=h||{},_=v.width,m=v.height;if(!_||!m)throw new Error("BufferResource width or height invalid");return d=s.call(this,_,m)||this,d.data=l,d}return a.prototype.upload=function(l,h,d){var v=l.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.alphaMode===ALPHA_MODES$4.UNPACK);var _=h.realWidth,m=h.realHeight;return d.width===_&&d.height===m?v.texSubImage2D(h.target,0,0,0,_,m,h.format,d.type,this.data):(d.width=_,d.height=m,v.texImage2D(h.target,0,d.internalFormat,_,m,0,h.format,d.type,this.data)),!0},a.prototype.dispose=function(){this.data=null},a.test=function(l){return l instanceof Float32Array||l instanceof Uint8Array||l instanceof Uint32Array},a}(Resource),defaultBufferOptions={scaleMode:SCALE_MODES$4.NEAREST,format:FORMATS$4.RGBA,alphaMode:ALPHA_MODES$4.NPM},BaseTexture=function(s){__extends$i(a,s);function a(l,h){l===void 0&&(l=null),h===void 0&&(h=null);var d=s.call(this)||this;h=h||{};var v=h.alphaMode,_=h.mipmap,m=h.anisotropicLevel,g=h.scaleMode,y=h.width,T=h.height,E=h.wrapMode,b=h.format,R=h.type,I=h.target,P=h.resolution,C=h.resourceOptions;return l&&!(l instanceof Resource)&&(l=autoDetectResource(l,C),l.internal=!0),d.resolution=P||settings$1.RESOLUTION,d.width=Math.round((y||0)*d.resolution)/d.resolution,d.height=Math.round((T||0)*d.resolution)/d.resolution,d._mipmap=_!==void 0?_:settings$1.MIPMAP_TEXTURES,d.anisotropicLevel=m!==void 0?m:settings$1.ANISOTROPIC_LEVEL,d._wrapMode=E||settings$1.WRAP_MODE,d._scaleMode=g!==void 0?g:settings$1.SCALE_MODE,d.format=b||FORMATS$4.RGBA,d.type=R||TYPES$4.UNSIGNED_BYTE,d.target=I||TARGETS$4.TEXTURE_2D,d.alphaMode=v!==void 0?v:ALPHA_MODES$4.UNPACK,d.uid=uid(),d.touched=0,d.isPowerOfTwo=!1,d._refreshPOT(),d._glTextures={},d.dirtyId=0,d.dirtyStyleId=0,d.cacheId=null,d.valid=y>0&&T>0,d.textureCacheIds=[],d.destroyed=!1,d.resource=null,d._batchEnabled=0,d._batchLocation=0,d.parentTextureArray=null,d.setResource(l),d}return Object.defineProperty(a.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mipmap",{get:function(){return this._mipmap},set:function(l){this._mipmap!==l&&(this._mipmap=l,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(l){this._scaleMode!==l&&(this._scaleMode=l,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(l){this._wrapMode!==l&&(this._wrapMode=l,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),a.prototype.setStyle=function(l,h){var d;return l!==void 0&&l!==this.scaleMode&&(this.scaleMode=l,d=!0),h!==void 0&&h!==this.mipmap&&(this.mipmap=h,d=!0),d&&this.dirtyStyleId++,this},a.prototype.setSize=function(l,h,d){return d=d||this.resolution,this.setRealSize(l*d,h*d,d)},a.prototype.setRealSize=function(l,h,d){return this.resolution=d||this.resolution,this.width=Math.round(l)/this.resolution,this.height=Math.round(h)/this.resolution,this._refreshPOT(),this.update(),this},a.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},a.prototype.setResolution=function(l){var h=this.resolution;return h===l?this:(this.resolution=l,this.valid&&(this.width=Math.round(this.width*h)/l,this.height=Math.round(this.height*h)/l,this.emit("update",this)),this._refreshPOT(),this)},a.prototype.setResource=function(l){if(this.resource===l)return this;if(this.resource)throw new Error("Resource can be set only once");return l.bind(this),this.resource=l,this},a.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},a.prototype.onError=function(l){this.emit("error",this,l)},a.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.dispose(),a.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},a.prototype.dispose=function(){this.emit("dispose",this)},a.prototype.castToBaseTexture=function(){return this},a.from=function(l,h,d){d===void 0&&(d=settings$1.STRICT_TEXTURE_CACHE);var v=typeof l=="string",_=null;if(v)_=l;else{if(!l._pixiId){var m=h&&h.pixiIdPrefix||"pixiid";l._pixiId=m+"_"+uid()}_=l._pixiId}var g=BaseTextureCache[_];if(v&&d&&!g)throw new Error('The cacheId "'+_+'" does not exist in BaseTextureCache.');return g||(g=new a(l,h),g.cacheId=_,a.addToCache(g,_)),g},a.fromBuffer=function(l,h,d,v){l=l||new Float32Array(h*d*4);var _=new BufferResource(l,{width:h,height:d}),m=l instanceof Float32Array?TYPES$4.FLOAT:TYPES$4.UNSIGNED_BYTE;return new a(_,Object.assign(defaultBufferOptions,v||{width:h,height:d,type:m}))},a.addToCache=function(l,h){h&&(l.textureCacheIds.indexOf(h)===-1&&l.textureCacheIds.push(h),BaseTextureCache[h]&&console.warn("BaseTexture added to the cache with an id ["+h+"] that already had an entry"),BaseTextureCache[h]=l)},a.removeFromCache=function(l){if(typeof l=="string"){var h=BaseTextureCache[l];if(h){var d=h.textureCacheIds.indexOf(l);return d>-1&&h.textureCacheIds.splice(d,1),delete BaseTextureCache[l],h}}else if(l&&l.textureCacheIds){for(var v=0;v<l.textureCacheIds.length;++v)delete BaseTextureCache[l.textureCacheIds[v]];return l.textureCacheIds.length=0,l}return null},a._globalBatch=0,a}(EventEmitter),AbstractMultiResource=function(s){__extends$i(a,s);function a(l,h){var d=this,v=h||{},_=v.width,m=v.height;d=s.call(this,_,m)||this,d.items=[],d.itemDirtyIds=[];for(var g=0;g<l;g++){var y=new BaseTexture;d.items.push(y),d.itemDirtyIds.push(-2)}return d.length=l,d._load=null,d.baseTexture=null,d}return a.prototype.initFromArray=function(l,h){for(var d=0;d<this.length;d++)!l[d]||(l[d].castToBaseTexture?this.addBaseTextureAt(l[d].castToBaseTexture(),d):l[d]instanceof Resource?this.addResourceAt(l[d],d):this.addResourceAt(autoDetectResource(l[d],h),d))},a.prototype.dispose=function(){for(var l=0,h=this.length;l<h;l++)this.items[l].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},a.prototype.addResourceAt=function(l,h){if(!this.items[h])throw new Error("Index "+h+" is out of bounds");return l.valid&&!this.valid&&this.resize(l.width,l.height),this.items[h].setResource(l),this},a.prototype.bind=function(l){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");s.prototype.bind.call(this,l);for(var h=0;h<this.length;h++)this.items[h].parentTextureArray=l,this.items[h].on("update",l.update,l)},a.prototype.unbind=function(l){s.prototype.unbind.call(this,l);for(var h=0;h<this.length;h++)this.items[h].parentTextureArray=null,this.items[h].off("update",l.update,l)},a.prototype.load=function(){var l=this;if(this._load)return this._load;var h=this.items.map(function(v){return v.resource}).filter(function(v){return v}),d=h.map(function(v){return v.load()});return this._load=Promise.all(d).then(function(){var v=l.items[0],_=v.realWidth,m=v.realHeight;return l.resize(_,m),Promise.resolve(l)}),this._load},a}(Resource),ArrayResource=function(s){__extends$i(a,s);function a(l,h){var d=this,v=h||{},_=v.width,m=v.height,g,y;return Array.isArray(l)?(g=l,y=l.length):y=l,d=s.call(this,y,{width:_,height:m})||this,g&&d.initFromArray(g,h),d}return a.prototype.addBaseTextureAt=function(l,h){if(l.resource)this.addResourceAt(l.resource,h);else throw new Error("ArrayResource does not support RenderTexture");return this},a.prototype.bind=function(l){s.prototype.bind.call(this,l),l.target=TARGETS$4.TEXTURE_2D_ARRAY},a.prototype.upload=function(l,h,d){var v=this,_=v.length,m=v.itemDirtyIds,g=v.items,y=l.gl;d.dirtyId<0&&y.texImage3D(y.TEXTURE_2D_ARRAY,0,d.internalFormat,this._width,this._height,_,0,h.format,d.type,null);for(var T=0;T<_;T++){var E=g[T];m[T]<E.dirtyId&&(m[T]=E.dirtyId,E.valid&&y.texSubImage3D(y.TEXTURE_2D_ARRAY,0,0,0,T,E.resource.width,E.resource.height,1,h.format,d.type,E.resource.source))}return!0},a}(AbstractMultiResource),BaseImageResource=function(s){__extends$i(a,s);function a(l){var h=this,d=l,v=d.naturalWidth||d.videoWidth||d.width,_=d.naturalHeight||d.videoHeight||d.height;return h=s.call(this,v,_)||this,h.source=l,h.noSubImage=!1,h}return a.crossOrigin=function(l,h,d){d===void 0&&h.indexOf("data:")!==0?l.crossOrigin=determineCrossOrigin(h):d!==!1&&(l.crossOrigin=typeof d=="string"?d:"anonymous")},a.prototype.upload=function(l,h,d,v){var _=l.gl,m=h.realWidth,g=h.realHeight;if(v=v||this.source,v instanceof HTMLImageElement){if(!v.complete||v.naturalWidth===0)return!1}else if(v instanceof HTMLVideoElement&&v.readyState<=1)return!1;return _.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.alphaMode===ALPHA_MODES$4.UNPACK),!this.noSubImage&&h.target===_.TEXTURE_2D&&d.width===m&&d.height===g?_.texSubImage2D(_.TEXTURE_2D,0,0,0,h.format,d.type,v):(d.width=m,d.height=g,_.texImage2D(h.target,0,d.internalFormat,h.format,d.type,v)),!0},a.prototype.update=function(){if(!this.destroyed){var l=this.source,h=l.naturalWidth||l.videoWidth||l.width,d=l.naturalHeight||l.videoHeight||l.height;this.resize(h,d),s.prototype.update.call(this)}},a.prototype.dispose=function(){this.source=null},a}(Resource),CanvasResource=function(s){__extends$i(a,s);function a(l){return s.call(this,l)||this}return a.test=function(l){var h=globalThis.OffscreenCanvas;return h&&l instanceof h?!0:globalThis.HTMLCanvasElement&&l instanceof HTMLCanvasElement},a}(BaseImageResource),CubeResource=function(s){__extends$i(a,s);function a(l,h){var d=this,v=h||{},_=v.width,m=v.height,g=v.autoLoad,y=v.linkBaseTexture;if(l&&l.length!==a.SIDES)throw new Error("Invalid length. Got "+l.length+", expected 6");d=s.call(this,6,{width:_,height:m})||this;for(var T=0;T<a.SIDES;T++)d.items[T].target=TARGETS$4.TEXTURE_CUBE_MAP_POSITIVE_X+T;return d.linkBaseTexture=y!==!1,l&&d.initFromArray(l,h),g!==!1&&d.load(),d}return a.prototype.bind=function(l){s.prototype.bind.call(this,l),l.target=TARGETS$4.TEXTURE_CUBE_MAP},a.prototype.addBaseTextureAt=function(l,h,d){if(!this.items[h])throw new Error("Index "+h+" is out of bounds");if(!this.linkBaseTexture||l.parentTextureArray||Object.keys(l._glTextures).length>0)if(l.resource)this.addResourceAt(l.resource,h);else throw new Error("CubeResource does not support copying of renderTexture.");else l.target=TARGETS$4.TEXTURE_CUBE_MAP_POSITIVE_X+h,l.parentTextureArray=this.baseTexture,this.items[h]=l;return l.valid&&!this.valid&&this.resize(l.realWidth,l.realHeight),this.items[h]=l,this},a.prototype.upload=function(l,h,d){for(var v=this.itemDirtyIds,_=0;_<a.SIDES;_++){var m=this.items[_];v[_]<m.dirtyId&&(m.valid&&m.resource?(m.resource.upload(l,m,d),v[_]=m.dirtyId):v[_]<-1&&(l.gl.texImage2D(m.target,0,d.internalFormat,h.realWidth,h.realHeight,0,h.format,d.type,null),v[_]=-1))}return!0},a.test=function(l){return Array.isArray(l)&&l.length===a.SIDES},a.SIDES=6,a}(AbstractMultiResource),ImageResource=function(s){__extends$i(a,s);function a(l,h){var d=this;if(h=h||{},!(l instanceof HTMLImageElement)){var v=new Image;BaseImageResource.crossOrigin(v,l,h.crossorigin),v.src=l,l=v}return d=s.call(this,l)||this,!l.complete&&!!d._width&&!!d._height&&(d._width=0,d._height=0),d.url=l.src,d._process=null,d.preserveBitmap=!1,d.createBitmap=(h.createBitmap!==void 0?h.createBitmap:settings$1.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,d.alphaMode=typeof h.alphaMode=="number"?h.alphaMode:null,d.bitmap=null,d._load=null,h.autoLoad!==!1&&d.load(),d}return a.prototype.load=function(l){var h=this;return this._load?this._load:(l!==void 0&&(this.createBitmap=l),this._load=new Promise(function(d,v){var _=h.source;h.url=_.src;var m=function(){h.destroyed||(_.onload=null,_.onerror=null,h.resize(_.width,_.height),h._load=null,h.createBitmap?d(h.process()):d(h))};_.complete&&_.src?m():(_.onload=m,_.onerror=function(g){v(g),h.onError.emit(g)})}),this._load)},a.prototype.process=function(){var l=this,h=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var d=globalThis.createImageBitmap,v=!h.crossOrigin||h.crossOrigin==="anonymous";return this._process=fetch(h.src,{mode:v?"cors":"no-cors"}).then(function(_){return _.blob()}).then(function(_){return d(_,0,0,h.width,h.height,{premultiplyAlpha:l.alphaMode===ALPHA_MODES$4.UNPACK?"premultiply":"none"})}).then(function(_){return l.destroyed?Promise.reject():(l.bitmap=_,l.update(),l._process=null,Promise.resolve(l))}),this._process},a.prototype.upload=function(l,h,d){if(typeof this.alphaMode=="number"&&(h.alphaMode=this.alphaMode),!this.createBitmap)return s.prototype.upload.call(this,l,h,d);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(s.prototype.upload.call(this,l,h,d,this.bitmap),!this.preserveBitmap){var v=!0,_=h._glTextures;for(var m in _){var g=_[m];if(g!==d&&g.dirtyId!==h.dirtyId){v=!1;break}}v&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},a.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,s.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},a.test=function(l){return typeof l=="string"||l instanceof HTMLImageElement},a}(BaseImageResource),SVGResource=function(s){__extends$i(a,s);function a(l,h){var d=this;return h=h||{},d=s.call(this,document.createElement("canvas"))||this,d._width=0,d._height=0,d.svg=l,d.scale=h.scale||1,d._overrideWidth=h.width,d._overrideHeight=h.height,d._resolve=null,d._crossorigin=h.crossorigin,d._load=null,h.autoLoad!==!1&&d.load(),d}return a.prototype.load=function(){var l=this;return this._load?this._load:(this._load=new Promise(function(h){if(l._resolve=function(){l.resize(l.source.width,l.source.height),h(l)},a.SVG_XML.test(l.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");l.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(l.svg)))}l._loadSvg()}),this._load)},a.prototype._loadSvg=function(){var l=this,h=new Image;BaseImageResource.crossOrigin(h,this.svg,this._crossorigin),h.src=this.svg,h.onerror=function(d){!l._resolve||(h.onerror=null,l.onError.emit(d))},h.onload=function(){if(!!l._resolve){var d=h.width,v=h.height;if(!d||!v)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var _=d*l.scale,m=v*l.scale;(l._overrideWidth||l._overrideHeight)&&(_=l._overrideWidth||l._overrideHeight/v*d,m=l._overrideHeight||l._overrideWidth/d*v),_=Math.round(_),m=Math.round(m);var g=l.source;g.width=_,g.height=m,g._pixiId="canvas_"+uid(),g.getContext("2d").drawImage(h,0,0,d,v,0,0,_,m),l._resolve(),l._resolve=null}}},a.getSize=function(l){var h=a.SVG_SIZE.exec(l),d={};return h&&(d[h[1]]=Math.round(parseFloat(h[3])),d[h[5]]=Math.round(parseFloat(h[7]))),d},a.prototype.dispose=function(){s.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},a.test=function(l,h){return h==="svg"||typeof l=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(l)||typeof l=="string"&&a.SVG_XML.test(l)},a.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,a.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,a}(BaseImageResource),VideoResource=function(s){__extends$i(a,s);function a(l,h){var d=this;if(h=h||{},!(l instanceof HTMLVideoElement)){var v=document.createElement("video");v.setAttribute("preload","auto"),v.setAttribute("webkit-playsinline",""),v.setAttribute("playsinline",""),typeof l=="string"&&(l=[l]);var _=l[0].src||l[0];BaseImageResource.crossOrigin(v,_,h.crossorigin);for(var m=0;m<l.length;++m){var g=document.createElement("source"),y=l[m],T=y.src,E=y.mime;T=T||l[m];var b=T.split("?").shift().toLowerCase(),R=b.slice(b.lastIndexOf(".")+1);E=E||a.MIME_TYPES[R]||"video/"+R,g.src=T,g.type=E,v.appendChild(g)}l=v}return d=s.call(this,l)||this,d.noSubImage=!0,d._autoUpdate=!0,d._isConnectedToTicker=!1,d._updateFPS=h.updateFPS||0,d._msToNextUpdate=0,d.autoPlay=h.autoPlay!==!1,d._load=null,d._resolve=null,d._onCanPlay=d._onCanPlay.bind(d),d._onError=d._onError.bind(d),h.autoLoad!==!1&&d.load(),d}return a.prototype.update=function(l){if(!this.destroyed){var h=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-h),(!this._updateFPS||this._msToNextUpdate<=0)&&(s.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},a.prototype.load=function(){var l=this;if(this._load)return this._load;var h=this.source;return(h.readyState===h.HAVE_ENOUGH_DATA||h.readyState===h.HAVE_FUTURE_DATA)&&h.width&&h.height&&(h.complete=!0),h.addEventListener("play",this._onPlayStart.bind(this)),h.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(h.addEventListener("canplay",this._onCanPlay),h.addEventListener("canplaythrough",this._onCanPlay),h.addEventListener("error",this._onError,!0)),this._load=new Promise(function(d){l.valid?d(l):(l._resolve=d,h.load())}),this._load},a.prototype._onError=function(l){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(l)},a.prototype._isSourcePlaying=function(){var l=this.source;return l.currentTime>0&&l.paused===!1&&l.ended===!1&&l.readyState>2},a.prototype._isSourceReady=function(){var l=this.source;return l.readyState===3||l.readyState===4},a.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},a.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},a.prototype._onCanPlay=function(){var l=this.source;l.removeEventListener("canplay",this._onCanPlay),l.removeEventListener("canplaythrough",this._onCanPlay);var h=this.valid;this.resize(l.videoWidth,l.videoHeight),!h&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&l.play()},a.prototype.dispose=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var l=this.source;l&&(l.removeEventListener("error",this._onError,!0),l.pause(),l.src="",l.load()),s.prototype.dispose.call(this)},Object.defineProperty(a.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(l){l!==this._autoUpdate&&(this._autoUpdate=l,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(l){l!==this._updateFPS&&(this._updateFPS=l)},enumerable:!1,configurable:!0}),a.test=function(l,h){return globalThis.HTMLVideoElement&&l instanceof HTMLVideoElement||a.TYPES.indexOf(h)>-1},a.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],a.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},a}(BaseImageResource),ImageBitmapResource=function(s){__extends$i(a,s);function a(l){return s.call(this,l)||this}return a.test=function(l){return!!globalThis.createImageBitmap&&l instanceof ImageBitmap},a}(BaseImageResource);INSTALLED.push(ImageResource,ImageBitmapResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);var _resources={__proto__:null,Resource,BaseImageResource,INSTALLED,autoDetectResource,AbstractMultiResource,ArrayResource,BufferResource,CanvasResource,CubeResource,ImageResource,SVGResource,VideoResource,ImageBitmapResource},DepthResource=function(s){__extends$i(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.prototype.upload=function(l,h,d){var v=l.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.alphaMode===ALPHA_MODES$4.UNPACK);var _=h.realWidth,m=h.realHeight;return d.width===_&&d.height===m?v.texSubImage2D(h.target,0,0,0,_,m,h.format,d.type,this.data):(d.width=_,d.height=m,v.texImage2D(h.target,0,d.internalFormat,_,m,0,h.format,d.type,this.data)),!0},a}(BufferResource),Framebuffer=function(){function s(a,l){this.width=Math.round(a||100),this.height=Math.round(l||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY$4.NONE}return Object.defineProperty(s.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),s.prototype.addColorTexture=function(a,l){return a===void 0&&(a=0),this.colorTextures[a]=l||new BaseTexture(null,{scaleMode:SCALE_MODES$4.NEAREST,resolution:1,mipmap:MIPMAP_MODES$4.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},s.prototype.addDepthTexture=function(a){return this.depthTexture=a||new BaseTexture(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES$4.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES$4.OFF,format:FORMATS$4.DEPTH_COMPONENT,type:TYPES$4.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},s.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},s.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},s.prototype.resize=function(a,l){if(a=Math.round(a),l=Math.round(l),!(a===this.width&&l===this.height)){this.width=a,this.height=l,this.dirtyId++,this.dirtySize++;for(var h=0;h<this.colorTextures.length;h++){var d=this.colorTextures[h],v=d.resolution;d.setSize(a/v,l/v)}if(this.depthTexture){var v=this.depthTexture.resolution;this.depthTexture.setSize(a/v,l/v)}}},s.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},s.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},s}(),BaseRenderTexture=function(s){__extends$i(a,s);function a(l){l===void 0&&(l={});var h=this;if(typeof l=="number"){var d=arguments[0],v=arguments[1],_=arguments[2],m=arguments[3];l={width:d,height:v,scaleMode:_,resolution:m}}return l.width=l.width||100,l.height=l.height||100,l.multisample=l.multisample!==void 0?l.multisample:MSAA_QUALITY$4.NONE,h=s.call(this,null,l)||this,h.mipmap=MIPMAP_MODES$4.OFF,h.valid=!0,h.clearColor=[0,0,0,0],h.framebuffer=new Framebuffer(h.realWidth,h.realHeight).addColorTexture(0,h),h.framebuffer.multisample=l.multisample,h.maskStack=[],h.filterStack=[{}],h}return a.prototype.resize=function(l,h){this.framebuffer.resize(l*this.resolution,h*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},a.prototype.dispose=function(){this.framebuffer.dispose(),s.prototype.dispose.call(this)},a.prototype.destroy=function(){s.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},a}(BaseTexture),TextureUvs=function(){function s(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return s.prototype.set=function(a,l,h){var d=l.width,v=l.height;if(h){var _=a.width/2/d,m=a.height/2/v,g=a.x/d+_,y=a.y/v+m;h=groupD8.add(h,groupD8.NW),this.x0=g+_*groupD8.uX(h),this.y0=y+m*groupD8.uY(h),h=groupD8.add(h,2),this.x1=g+_*groupD8.uX(h),this.y1=y+m*groupD8.uY(h),h=groupD8.add(h,2),this.x2=g+_*groupD8.uX(h),this.y2=y+m*groupD8.uY(h),h=groupD8.add(h,2),this.x3=g+_*groupD8.uX(h),this.y3=y+m*groupD8.uY(h)}else this.x0=a.x/d,this.y0=a.y/v,this.x1=(a.x+a.width)/d,this.y1=a.y/v,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/v,this.x3=a.x/d,this.y3=(a.y+a.height)/v;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},s.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},s}(),DEFAULT_UVS=new TextureUvs;function removeAllHandlers(s){s.destroy=function(){},s.on=function(){},s.once=function(){},s.emit=function(){}}var Texture=function(s){__extends$i(a,s);function a(l,h,d,v,_,m){var g=s.call(this)||this;if(g.noFrame=!1,h||(g.noFrame=!0,h=new Rectangle(0,0,1,1)),l instanceof a&&(l=l.baseTexture),g.baseTexture=l,g._frame=h,g.trim=v,g.valid=!1,g._uvs=DEFAULT_UVS,g.uvMatrix=null,g.orig=d||h,g._rotate=Number(_||0),_===!0)g._rotate=2;else if(g._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return g.defaultAnchor=m?new Point(m.x,m.y):new Point(0,0),g._updateID=0,g.textureCacheIds=[],l.valid?g.noFrame?l.valid&&g.onBaseTextureUpdated(l):g.frame=h:l.once("loaded",g.onBaseTextureUpdated,g),g.noFrame&&l.on("update",g.onBaseTextureUpdated,g),g}return a.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},a.prototype.onBaseTextureUpdated=function(l){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=l.width,this._frame.height=l.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},a.prototype.destroy=function(l){if(this.baseTexture){if(l){var h=this.baseTexture.resource;h&&h.url&&TextureCache[h.url]&&a.removeFromCache(h.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,a.removeFromCache(this),this.textureCacheIds=null},a.prototype.clone=function(){var l=this._frame.clone(),h=this._frame===this.orig?l:this.orig.clone(),d=new a(this.baseTexture,!this.noFrame&&l,h,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(d._frame=l),d},a.prototype.updateUvs=function(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},a.from=function(l,h,d){h===void 0&&(h={}),d===void 0&&(d=settings$1.STRICT_TEXTURE_CACHE);var v=typeof l=="string",_=null;if(v)_=l;else if(l instanceof BaseTexture){if(!l.cacheId){var m=h&&h.pixiIdPrefix||"pixiid";l.cacheId=m+"-"+uid(),BaseTexture.addToCache(l,l.cacheId)}_=l.cacheId}else{if(!l._pixiId){var m=h&&h.pixiIdPrefix||"pixiid";l._pixiId=m+"_"+uid()}_=l._pixiId}var g=TextureCache[_];if(v&&d&&!g)throw new Error('The cacheId "'+_+'" does not exist in TextureCache.');return!g&&!(l instanceof BaseTexture)?(h.resolution||(h.resolution=getResolutionOfUrl(l)),g=new a(new BaseTexture(l,h)),g.baseTexture.cacheId=_,BaseTexture.addToCache(g.baseTexture,_),a.addToCache(g,_)):!g&&l instanceof BaseTexture&&(g=new a(l),a.addToCache(g,_)),g},a.fromURL=function(l,h){var d=Object.assign({autoLoad:!1},h==null?void 0:h.resourceOptions),v=a.from(l,Object.assign({resourceOptions:d},h),!1),_=v.baseTexture.resource;return v.baseTexture.valid?Promise.resolve(v):_.load().then(function(){return Promise.resolve(v)})},a.fromBuffer=function(l,h,d,v){return new a(BaseTexture.fromBuffer(l,h,d,v))},a.fromLoader=function(l,h,d,v){var _=new BaseTexture(l,Object.assign({scaleMode:settings$1.SCALE_MODE,resolution:getResolutionOfUrl(h)},v)),m=_.resource;m instanceof ImageResource&&(m.url=h);var g=new a(_);return d||(d=h),BaseTexture.addToCache(g.baseTexture,d),a.addToCache(g,d),d!==h&&(BaseTexture.addToCache(g.baseTexture,h),a.addToCache(g,h)),g.baseTexture.valid?Promise.resolve(g):new Promise(function(y){g.baseTexture.once("loaded",function(){return y(g)})})},a.addToCache=function(l,h){h&&(l.textureCacheIds.indexOf(h)===-1&&l.textureCacheIds.push(h),TextureCache[h]&&console.warn("Texture added to the cache with an id ["+h+"] that already had an entry"),TextureCache[h]=l)},a.removeFromCache=function(l){if(typeof l=="string"){var h=TextureCache[l];if(h){var d=h.textureCacheIds.indexOf(l);return d>-1&&h.textureCacheIds.splice(d,1),delete TextureCache[l],h}}else if(l&&l.textureCacheIds){for(var v=0;v<l.textureCacheIds.length;++v)TextureCache[l.textureCacheIds[v]]===l&&delete TextureCache[l.textureCacheIds[v]];return l.textureCacheIds.length=0,l}return null},Object.defineProperty(a.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"frame",{get:function(){return this._frame},set:function(l){this._frame=l,this.noFrame=!1;var h=l.x,d=l.y,v=l.width,_=l.height,m=h+v>this.baseTexture.width,g=d+_>this.baseTexture.height;if(m||g){var y=m&&g?"and":"or",T="X: "+h+" + "+v+" = "+(h+v)+" > "+this.baseTexture.width,E="Y: "+d+" + "+_+" = "+(d+_)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(T+" "+y+" "+E))}this.valid=v&&_&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=l),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rotate",{get:function(){return this._rotate},set:function(l){this._rotate=l,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),a.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(a,"EMPTY",{get:function(){return a._EMPTY||(a._EMPTY=new a(new BaseTexture),removeAllHandlers(a._EMPTY),removeAllHandlers(a._EMPTY.baseTexture)),a._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(a,"WHITE",{get:function(){if(!a._WHITE){var l=document.createElement("canvas"),h=l.getContext("2d");l.width=16,l.height=16,h.fillStyle="white",h.fillRect(0,0,16,16),a._WHITE=new a(new BaseTexture(new CanvasResource(l))),removeAllHandlers(a._WHITE),removeAllHandlers(a._WHITE.baseTexture)}return a._WHITE},enumerable:!1,configurable:!0}),a}(EventEmitter),RenderTexture=function(s){__extends$i(a,s);function a(l,h){var d=s.call(this,l,h)||this;return d.valid=!0,d.filterFrame=null,d.filterPoolKey=null,d.updateUvs(),d}return Object.defineProperty(a.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(l){this.framebuffer.multisample=l},enumerable:!1,configurable:!0}),a.prototype.resize=function(l,h,d){d===void 0&&(d=!0);var v=this.baseTexture.resolution,_=Math.round(l*v)/v,m=Math.round(h*v)/v;this.valid=_>0&&m>0,this._frame.width=this.orig.width=_,this._frame.height=this.orig.height=m,d&&this.baseTexture.resize(_,m),this.updateUvs()},a.prototype.setResolution=function(l){var h=this.baseTexture;h.resolution!==l&&(h.setResolution(l),this.resize(h.width,h.height,!1))},a.create=function(l){for(var h=arguments,d=[],v=1;v<arguments.length;v++)d[v-1]=h[v];return typeof l=="number"&&(deprecation("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),l={width:l,height:d[0],scaleMode:d[1],resolution:d[2]}),new a(new BaseRenderTexture(l))},a}(Texture),RenderTexturePool=function(){function s(a){this.texturePool={},this.textureOptions=a||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return s.prototype.createTexture=function(a,l,h){h===void 0&&(h=MSAA_QUALITY$4.NONE);var d=new BaseRenderTexture(Object.assign({width:a,height:l,resolution:1,multisample:h},this.textureOptions));return new RenderTexture(d)},s.prototype.getOptimalTexture=function(a,l,h,d){h===void 0&&(h=1),d===void 0&&(d=MSAA_QUALITY$4.NONE);var v;a=Math.ceil(a*h-1e-6),l=Math.ceil(l*h-1e-6),!this.enableFullScreen||a!==this._pixelsWidth||l!==this._pixelsHeight?(a=nextPow2(a),l=nextPow2(l),v=((a&65535)<<16|l&65535)>>>0,d>1&&(v+=d*4294967296)):v=d>1?-d:-1,this.texturePool[v]||(this.texturePool[v]=[]);var _=this.texturePool[v].pop();return _||(_=this.createTexture(a,l,d)),_.filterPoolKey=v,_.setResolution(h),_},s.prototype.getFilterTexture=function(a,l,h){var d=this.getOptimalTexture(a.width,a.height,l||a.resolution,h||MSAA_QUALITY$4.NONE);return d.filterFrame=a.filterFrame,d},s.prototype.returnTexture=function(a){var l=a.filterPoolKey;a.filterFrame=null,this.texturePool[l].push(a)},s.prototype.returnFilterTexture=function(a){this.returnTexture(a)},s.prototype.clear=function(a){if(a=a!==!1,a)for(var l in this.texturePool){var h=this.texturePool[l];if(h)for(var d=0;d<h.length;d++)h[d].destroy(!0)}this.texturePool={}},s.prototype.setScreenSize=function(a){if(!(a.width===this._pixelsWidth&&a.height===this._pixelsHeight)){this.enableFullScreen=a.width>0&&a.height>0;for(var l in this.texturePool)if(Number(l)<0){var h=this.texturePool[l];if(h)for(var d=0;d<h.length;d++)h[d].destroy(!0);this.texturePool[l]=[]}this._pixelsWidth=a.width,this._pixelsHeight=a.height}},s.SCREEN_KEY=-1,s}(),Attribute=function(){function s(a,l,h,d,v,_,m){l===void 0&&(l=0),h===void 0&&(h=!1),d===void 0&&(d=TYPES$4.FLOAT),this.buffer=a,this.size=l,this.normalized=h,this.type=d,this.stride=v,this.start=_,this.instance=m}return s.prototype.destroy=function(){this.buffer=null},s.from=function(a,l,h,d,v){return new s(a,l,h,d,v)},s}(),UID$4=0,Buffer=function(){function s(a,l,h){l===void 0&&(l=!0),h===void 0&&(h=!1),this.data=a||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=h,this.static=l,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}return s.prototype.update=function(a){a instanceof Array&&(a=new Float32Array(a)),this.data=a||this.data,this._updateID++},s.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},s.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(s.prototype,"index",{get:function(){return this.type===BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER},set:function(a){this.type=a?BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE$4.ARRAY_BUFFER},enumerable:!1,configurable:!0}),s.from=function(a){return a instanceof Array&&(a=new Float32Array(a)),new s(a)},s}(),map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(s,a){for(var l=0,h=0,d={},v=0;v<s.length;v++)h+=a[v],l+=s[v].length;for(var _=new ArrayBuffer(l*4),m=null,g=0,v=0;v<s.length;v++){var y=a[v],T=s[v],E=getBufferType(T);d[E]||(d[E]=new map$1[E](_)),m=d[E];for(var b=0;b<T.length;b++){var R=(b/y|0)*h+g,I=b%y;m[R+I]=T[b]}g+=y}return new Float32Array(_)}var byteSizeMap$1={5126:4,5123:2,5121:1},UID$3=0,map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Geometry=function(){function s(a,l){a===void 0&&(a=[]),l===void 0&&(l={}),this.buffers=a,this.indexBuffer=null,this.attributes=l,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}return s.prototype.addAttribute=function(a,l,h,d,v,_,m,g){if(h===void 0&&(h=0),d===void 0&&(d=!1),g===void 0&&(g=!1),!l)throw new Error("You must pass a buffer when creating an attribute");l instanceof Buffer||(l instanceof Array&&(l=new Float32Array(l)),l=new Buffer(l));var y=a.split("|");if(y.length>1){for(var T=0;T<y.length;T++)this.addAttribute(y[T],l,h,d,v);return this}var E=this.buffers.indexOf(l);return E===-1&&(this.buffers.push(l),E=this.buffers.length-1),this.attributes[a]=new Attribute(E,h,d,v,_,m,g),this.instanced=this.instanced||g,this},s.prototype.getAttribute=function(a){return this.attributes[a]},s.prototype.getBuffer=function(a){return this.buffers[this.getAttribute(a).buffer]},s.prototype.addIndex=function(a){return a instanceof Buffer||(a instanceof Array&&(a=new Uint16Array(a)),a=new Buffer(a)),a.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER,this.indexBuffer=a,this.buffers.indexOf(a)===-1&&this.buffers.push(a),this},s.prototype.getIndex=function(){return this.indexBuffer},s.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var a=[],l=[],h=new Buffer,d;for(d in this.attributes){var v=this.attributes[d],_=this.buffers[v.buffer];a.push(_.data),l.push(v.size*byteSizeMap$1[v.type]/4),v.buffer=0}for(h.data=interleaveTypedArrays(a,l),d=0;d<this.buffers.length;d++)this.buffers[d]!==this.indexBuffer&&this.buffers[d].destroy();return this.buffers=[h],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},s.prototype.getSize=function(){for(var a in this.attributes){var l=this.attributes[a],h=this.buffers[l.buffer];return h.data.length/(l.stride/4||l.size)}return 0},s.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},s.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},s.prototype.clone=function(){for(var a=new s,l=0;l<this.buffers.length;l++)a.buffers[l]=new Buffer(this.buffers[l].data.slice(0));for(var l in this.attributes){var h=this.attributes[l];a.attributes[l]=new Attribute(h.buffer,h.size,h.normalized,h.type,h.stride,h.start,h.instance)}return this.indexBuffer&&(a.indexBuffer=a.buffers[this.buffers.indexOf(this.indexBuffer)],a.indexBuffer.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER),a},s.merge=function(a){for(var l=new s,h=[],d=[],v=[],_,m=0;m<a.length;m++){_=a[m];for(var g=0;g<_.buffers.length;g++)d[g]=d[g]||0,d[g]+=_.buffers[g].data.length,v[g]=0}for(var m=0;m<_.buffers.length;m++)h[m]=new map[getBufferType(_.buffers[m].data)](d[m]),l.buffers[m]=new Buffer(h[m]);for(var m=0;m<a.length;m++){_=a[m];for(var g=0;g<_.buffers.length;g++)h[g].set(_.buffers[g].data,v[g]),v[g]+=_.buffers[g].data.length}if(l.attributes=_.attributes,_.indexBuffer){l.indexBuffer=l.buffers[_.buffers.indexOf(_.indexBuffer)],l.indexBuffer.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER;for(var y=0,T=0,E=0,b=0,m=0;m<_.buffers.length;m++)if(_.buffers[m]!==_.indexBuffer){b=m;break}for(var m in _.attributes){var R=_.attributes[m];(R.buffer|0)===b&&(T+=R.size*byteSizeMap$1[R.type]/4)}for(var m=0;m<a.length;m++){for(var I=a[m].indexBuffer.data,g=0;g<I.length;g++)l.indexBuffer.data[g+E]+=y;y+=a[m].buffers[b].data.length/T,E+=I.length}}return l},s}(),Quad=function(s){__extends$i(a,s);function a(){var l=s.call(this)||this;return l.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),l}return a}(Geometry),QuadUv=function(s){__extends$i(a,s);function a(){var l=s.call(this)||this;return l.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),l.uvs=new Float32Array([0,0,1,0,1,1,0,1]),l.vertexBuffer=new Buffer(l.vertices),l.uvBuffer=new Buffer(l.uvs),l.addAttribute("aVertexPosition",l.vertexBuffer).addAttribute("aTextureCoord",l.uvBuffer).addIndex([0,1,2,0,2,3]),l}return a.prototype.map=function(l,h){var d=0,v=0;return this.uvs[0]=d,this.uvs[1]=v,this.uvs[2]=d+h.width/l.width,this.uvs[3]=v,this.uvs[4]=d+h.width/l.width,this.uvs[5]=v+h.height/l.height,this.uvs[6]=d,this.uvs[7]=v+h.height/l.height,d=h.x,v=h.y,this.vertices[0]=d,this.vertices[1]=v,this.vertices[2]=d+h.width,this.vertices[3]=v,this.vertices[4]=d+h.width,this.vertices[5]=v+h.height,this.vertices[6]=d,this.vertices[7]=v+h.height,this.invalidate(),this},a.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},a}(Geometry),UID$2=0,UniformGroup=function(){function s(a,l,h){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$2++,this.static=!!l,this.ubo=!!h,a instanceof Buffer?(this.buffer=a,this.buffer.type=BUFFER_TYPE$4.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=a,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE$4.UNIFORM_BUFFER,this.autoManage=!0))}return s.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},s.prototype.add=function(a,l,h){if(!this.ubo)this.uniforms[a]=new s(l,h);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},s.from=function(a,l,h){return new s(a,l,h)},s.uboFrom=function(a,l){return new s(a,l!=null?l:!0,!0)},s}(),FilterState=function(){function s(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY$4.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}return s.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},s}(),tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix,FilterSystem=function(){function s(a){this.renderer=a,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.texturePool.setScreenSize(a.view),this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return s.prototype.push=function(a,l){for(var h,d,v=this.renderer,_=this.defaultFilterStack,m=this.statePool.pop()||new FilterState,g=this.renderer.renderTexture,y=l[0].resolution,T=l[0].multisample,E=l[0].padding,b=l[0].autoFit,R=(h=l[0].legacy)!==null&&h!==void 0?h:!0,I=1;I<l.length;I++){var P=l[I];y=Math.min(y,P.resolution),T=Math.min(T,P.multisample),E=this.useMaxPadding?Math.max(E,P.padding):E+P.padding,b=b&&P.autoFit,R=R||((d=P.legacy)!==null&&d!==void 0?d:!0)}_.length===1&&(this.defaultFilterStack[0].renderTexture=g.current),_.push(m),m.resolution=y,m.multisample=T,m.legacy=R,m.target=a,m.sourceFrame.copyFrom(a.filterArea||a.getBounds(!0)),m.sourceFrame.pad(E);var C=this.tempRect.copyFrom(g.sourceFrame);v.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(v.projection.transform).invert(),C),b?(m.sourceFrame.fit(C),(m.sourceFrame.width<=0||m.sourceFrame.height<=0)&&(m.sourceFrame.width=0,m.sourceFrame.height=0)):m.sourceFrame.intersects(C)||(m.sourceFrame.width=0,m.sourceFrame.height=0),this.roundFrame(m.sourceFrame,g.current?g.current.resolution:v.resolution,g.sourceFrame,g.destinationFrame,v.projection.transform),m.renderTexture=this.getOptimalFilterTexture(m.sourceFrame.width,m.sourceFrame.height,y,T),m.filters=l,m.destinationFrame.width=m.renderTexture.width,m.destinationFrame.height=m.renderTexture.height;var S=this.tempRect;S.x=0,S.y=0,S.width=m.sourceFrame.width,S.height=m.sourceFrame.height,m.renderTexture.filterFrame=m.sourceFrame,m.bindingSourceFrame.copyFrom(g.sourceFrame),m.bindingDestinationFrame.copyFrom(g.destinationFrame),m.transform=v.projection.transform,v.projection.transform=null,g.bind(m.renderTexture,m.sourceFrame,S),v.framebuffer.clear(0,0,0,0)},s.prototype.pop=function(){var a=this.defaultFilterStack,l=a.pop(),h=l.filters;this.activeState=l;var d=this.globalUniforms.uniforms;d.outputFrame=l.sourceFrame,d.resolution=l.resolution;var v=d.inputSize,_=d.inputPixel,m=d.inputClamp;if(v[0]=l.destinationFrame.width,v[1]=l.destinationFrame.height,v[2]=1/v[0],v[3]=1/v[1],_[0]=Math.round(v[0]*l.resolution),_[1]=Math.round(v[1]*l.resolution),_[2]=1/_[0],_[3]=1/_[1],m[0]=.5*_[2],m[1]=.5*_[3],m[2]=l.sourceFrame.width*v[2]-.5*_[2],m[3]=l.sourceFrame.height*v[3]-.5*_[3],l.legacy){var g=d.filterArea;g[0]=l.destinationFrame.width,g[1]=l.destinationFrame.height,g[2]=l.sourceFrame.x,g[3]=l.sourceFrame.y,d.filterClamp=d.inputClamp}this.globalUniforms.update();var y=a[a.length-1];if(this.renderer.framebuffer.blit(),h.length===1)h[0].apply(this,l.renderTexture,y.renderTexture,CLEAR_MODES$4.BLEND,l),this.returnFilterTexture(l.renderTexture);else{var T=l.renderTexture,E=this.getOptimalFilterTexture(T.width,T.height,l.resolution);E.filterFrame=T.filterFrame;var b=0;for(b=0;b<h.length-1;++b){b===1&&l.multisample>1&&(E=this.getOptimalFilterTexture(T.width,T.height,l.resolution),E.filterFrame=T.filterFrame),h[b].apply(this,T,E,CLEAR_MODES$4.CLEAR,l);var R=T;T=E,E=R}h[b].apply(this,T,y.renderTexture,CLEAR_MODES$4.BLEND,l),b>1&&l.multisample>1&&this.returnFilterTexture(l.renderTexture),this.returnFilterTexture(T),this.returnFilterTexture(E)}l.clear(),this.statePool.push(l)},s.prototype.bindAndClear=function(a,l){l===void 0&&(l=CLEAR_MODES$4.CLEAR);var h=this.renderer,d=h.renderTexture,v=h.state;if(a===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,a&&a.filterFrame){var _=this.tempRect;_.x=0,_.y=0,_.width=a.filterFrame.width,_.height=a.filterFrame.height,d.bind(a,a.filterFrame,_)}else a!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?d.bind(a):this.renderer.renderTexture.bind(a,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var m=v.stateId&1||this.forceClear;(l===CLEAR_MODES$4.CLEAR||l===CLEAR_MODES$4.BLIT&&m)&&this.renderer.framebuffer.clear(0,0,0,0)},s.prototype.applyFilter=function(a,l,h,d){var v=this.renderer;v.state.set(a.state),this.bindAndClear(h,d),a.uniforms.uSampler=l,a.uniforms.filterGlobals=this.globalUniforms,v.shader.bind(a),a.legacy=!!a.program.attributeData.aTextureCoord,a.legacy?(this.quadUv.map(l._frame,l.filterFrame),v.geometry.bind(this.quadUv),v.geometry.draw(DRAW_MODES$4.TRIANGLES)):(v.geometry.bind(this.quad),v.geometry.draw(DRAW_MODES$4.TRIANGLE_STRIP))},s.prototype.calculateSpriteMatrix=function(a,l){var h=this.activeState,d=h.sourceFrame,v=h.destinationFrame,_=l._texture.orig,m=a.set(v.width,0,0,v.height,d.x,d.y),g=l.worldTransform.copyTo(Matrix.TEMP_MATRIX);return g.invert(),m.prepend(g),m.scale(1/_.width,1/_.height),m.translate(l.anchor.x,l.anchor.y),m},s.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},s.prototype.getOptimalFilterTexture=function(a,l,h,d){return h===void 0&&(h=1),d===void 0&&(d=MSAA_QUALITY$4.NONE),this.texturePool.getOptimalTexture(a,l,h,d)},s.prototype.getFilterTexture=function(a,l,h){if(typeof a=="number"){var d=a;a=l,l=d}a=a||this.activeState.renderTexture;var v=this.texturePool.getOptimalTexture(a.width,a.height,l||a.resolution,h||MSAA_QUALITY$4.NONE);return v.filterFrame=a.filterFrame,v},s.prototype.returnFilterTexture=function(a){this.texturePool.returnTexture(a)},s.prototype.emptyPool=function(){this.texturePool.clear(!0)},s.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},s.prototype.transformAABB=function(a,l){var h=tempPoints[0],d=tempPoints[1],v=tempPoints[2],_=tempPoints[3];h.set(l.left,l.top),d.set(l.left,l.bottom),v.set(l.right,l.top),_.set(l.right,l.bottom),a.apply(h,h),a.apply(d,d),a.apply(v,v),a.apply(_,_);var m=Math.min(h.x,d.x,v.x,_.x),g=Math.min(h.y,d.y,v.y,_.y),y=Math.max(h.x,d.x,v.x,_.x),T=Math.max(h.y,d.y,v.y,_.y);l.x=m,l.y=g,l.width=y-m,l.height=T-g},s.prototype.roundFrame=function(a,l,h,d,v){if(!(a.width<=0||a.height<=0||h.width<=0||h.height<=0)){if(v){var _=v.a,m=v.b,g=v.c,y=v.d;if((Math.abs(m)>1e-4||Math.abs(g)>1e-4)&&(Math.abs(_)>1e-4||Math.abs(y)>1e-4))return}v=v?tempMatrix$2.copyFrom(v):tempMatrix$2.identity(),v.translate(-h.x,-h.y).scale(d.width/h.width,d.height/h.height).translate(d.x,d.y),this.transformAABB(v,a),a.ceil(l),this.transformAABB(v.invert(),a)}},s}(),ObjectRenderer=function(){function s(a){this.renderer=a}return s.prototype.flush=function(){},s.prototype.destroy=function(){this.renderer=null},s.prototype.start=function(){},s.prototype.stop=function(){this.flush()},s.prototype.render=function(a){},s}(),BatchSystem=function(){function s(a){this.renderer=a,this.emptyRenderer=new ObjectRenderer(a),this.currentRenderer=this.emptyRenderer}return s.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},s.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},s.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},s.prototype.copyBoundTextures=function(a,l){for(var h=this.renderer.texture.boundTextures,d=l-1;d>=0;--d)a[d]=h[d]||null,a[d]&&(a[d]._batchLocation=d)},s.prototype.boundArray=function(a,l,h,d){for(var v=a.elements,_=a.ids,m=a.count,g=0,y=0;y<m;y++){var T=v[y],E=T._batchLocation;if(E>=0&&E<d&&l[E]===T){_[y]=E;continue}for(;g<d;){var b=l[g];if(b&&b._batchEnabled===h&&b._batchLocation===g){g++;continue}_[y]=g,T._batchLocation=g,l[g]=T;break}}},s.prototype.destroy=function(){this.renderer=null},s}(),CONTEXT_UID_COUNTER=0,ContextSystem=function(){function s(a){this.renderer=a,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),a.view.addEventListener("webglcontextlost",this.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(s.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),s.prototype.contextChange=function(a){this.gl=a,this.renderer.gl=a,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext()},s.prototype.initFromContext=function(a){this.gl=a,this.validateContext(a),this.renderer.gl=a,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(a)},s.prototype.initFromOptions=function(a){var l=this.createContext(this.renderer.view,a);this.initFromContext(l)},s.prototype.createContext=function(a,l){var h;if(settings$1.PREFER_ENV>=ENV$4.WEBGL2&&(h=a.getContext("webgl2",l)),h)this.webGLVersion=2;else if(this.webGLVersion=1,h=a.getContext("webgl",l)||a.getContext("experimental-webgl",l),!h)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=h,this.getExtensions(),this.gl},s.prototype.getExtensions=function(){var a=this.gl,l={anisotropicFiltering:a.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),s3tc:a.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:a.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:a.getExtension("WEBGL_compressed_texture_etc"),etc1:a.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:a.getExtension("WEBGL_compressed_texture_atc"),astc:a.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,l,{drawBuffers:a.getExtension("WEBGL_draw_buffers"),depthTexture:a.getExtension("WEBGL_depth_texture"),loseContext:a.getExtension("WEBGL_lose_context"),vertexArrayObject:a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:a.getExtension("OES_element_index_uint"),floatTexture:a.getExtension("OES_texture_float"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),textureHalfFloat:a.getExtension("OES_texture_half_float"),textureHalfFloatLinear:a.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,l,{colorBufferFloat:a.getExtension("EXT_color_buffer_float")})},s.prototype.handleContextLost=function(a){a.preventDefault()},s.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},s.prototype.destroy=function(){var a=this.renderer.view;this.renderer=null,a.removeEventListener("webglcontextlost",this.handleContextLost),a.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},s.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},s.prototype.validateContext=function(a){var l=a.getContextAttributes(),h="WebGL2RenderingContext"in globalThis&&a instanceof globalThis.WebGL2RenderingContext;h&&(this.webGLVersion=2),l&&!l.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var d=h||!!a.getExtension("OES_element_index_uint");this.supports.uint32Indices=d,d||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},s}(),GLFramebuffer=function(){function s(a){this.framebuffer=a,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY$4.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return s}(),tempRectangle=new Rectangle,FramebufferSystem=function(){function s(a){this.renderer=a,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}return s.prototype.contextChange=function(){var a=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var l=this.renderer.context.extensions.drawBuffers,h=this.renderer.context.extensions.depthTexture;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY&&(l=null,h=null),l?a.drawBuffers=function(d){return l.drawBuffersWEBGL(d)}:(this.hasMRT=!1,a.drawBuffers=function(){}),h||(this.writeDepthTexture=!1)}else this.msaaSamples=a.getInternalformatParameter(a.RENDERBUFFER,a.RGBA8,a.SAMPLES)},s.prototype.bind=function(a,l,h){h===void 0&&(h=0);var d=this.gl;if(a){var v=a.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(a);this.current!==a&&(this.current=a,d.bindFramebuffer(d.FRAMEBUFFER,v.framebuffer)),v.mipLevel!==h&&(a.dirtyId++,a.dirtyFormat++,v.mipLevel=h),v.dirtyId!==a.dirtyId&&(v.dirtyId=a.dirtyId,v.dirtyFormat!==a.dirtyFormat?(v.dirtyFormat=a.dirtyFormat,v.dirtySize=a.dirtySize,this.updateFramebuffer(a,h)):v.dirtySize!==a.dirtySize&&(v.dirtySize=a.dirtySize,this.resizeFramebuffer(a)));for(var _=0;_<a.colorTextures.length;_++){var m=a.colorTextures[_];this.renderer.texture.unbind(m.parentTextureArray||m)}if(a.depthTexture&&this.renderer.texture.unbind(a.depthTexture),l){var g=l.width>>h,y=l.height>>h,T=g/l.width;this.setViewport(l.x*T,l.y*T,g,y)}else{var g=a.width>>h,y=a.height>>h;this.setViewport(0,0,g,y)}}else this.current&&(this.current=null,d.bindFramebuffer(d.FRAMEBUFFER,null)),l?this.setViewport(l.x,l.y,l.width,l.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},s.prototype.setViewport=function(a,l,h,d){var v=this.viewport;a=Math.round(a),l=Math.round(l),h=Math.round(h),d=Math.round(d),(v.width!==h||v.height!==d||v.x!==a||v.y!==l)&&(v.x=a,v.y=l,v.width=h,v.height=d,this.gl.viewport(a,l,h,d))},Object.defineProperty(s.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),s.prototype.clear=function(a,l,h,d,v){v===void 0&&(v=BUFFER_BITS$4.COLOR|BUFFER_BITS$4.DEPTH);var _=this.gl;_.clearColor(a,l,h,d),_.clear(v)},s.prototype.initFramebuffer=function(a){var l=this.gl,h=new GLFramebuffer(l.createFramebuffer());return h.multisample=this.detectSamples(a.multisample),a.glFramebuffers[this.CONTEXT_UID]=h,this.managedFramebuffers.push(a),a.disposeRunner.add(this),h},s.prototype.resizeFramebuffer=function(a){var l=this.gl,h=a.glFramebuffers[this.CONTEXT_UID];h.msaaBuffer&&(l.bindRenderbuffer(l.RENDERBUFFER,h.msaaBuffer),l.renderbufferStorageMultisample(l.RENDERBUFFER,h.multisample,l.RGBA8,a.width,a.height)),h.stencil&&(l.bindRenderbuffer(l.RENDERBUFFER,h.stencil),h.msaaBuffer?l.renderbufferStorageMultisample(l.RENDERBUFFER,h.multisample,l.DEPTH24_STENCIL8,a.width,a.height):l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,a.width,a.height));var d=a.colorTextures,v=d.length;l.drawBuffers||(v=Math.min(v,1));for(var _=0;_<v;_++){var m=d[_],g=m.parentTextureArray||m;this.renderer.texture.bind(g,0)}a.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(a.depthTexture,0)},s.prototype.updateFramebuffer=function(a,l){var h=this.gl,d=a.glFramebuffers[this.CONTEXT_UID],v=a.colorTextures,_=v.length;h.drawBuffers||(_=Math.min(_,1)),d.multisample>1&&this.canMultisampleFramebuffer(a)?(d.msaaBuffer=d.msaaBuffer||h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,d.msaaBuffer),h.renderbufferStorageMultisample(h.RENDERBUFFER,d.multisample,h.RGBA8,a.width,a.height),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,d.msaaBuffer)):d.msaaBuffer&&(h.deleteRenderbuffer(d.msaaBuffer),d.msaaBuffer=null,d.blitFramebuffer&&(d.blitFramebuffer.dispose(),d.blitFramebuffer=null));for(var m=[],g=0;g<_;g++){var y=v[g],T=y.parentTextureArray||y;this.renderer.texture.bind(T,0),!(g===0&&d.msaaBuffer)&&(h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0+g,y.target,T._glTextures[this.CONTEXT_UID].texture,l),m.push(h.COLOR_ATTACHMENT0+g))}if(m.length>1&&h.drawBuffers(m),a.depthTexture){var E=this.writeDepthTexture;if(E){var b=a.depthTexture;this.renderer.texture.bind(b,0),h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.TEXTURE_2D,b._glTextures[this.CONTEXT_UID].texture,l)}}(a.stencil||a.depth)&&!(a.depthTexture&&this.writeDepthTexture)?(d.stencil=d.stencil||h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,d.stencil),d.msaaBuffer?h.renderbufferStorageMultisample(h.RENDERBUFFER,d.multisample,h.DEPTH24_STENCIL8,a.width,a.height):h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,a.width,a.height),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,d.stencil)):d.stencil&&(h.deleteRenderbuffer(d.stencil),d.stencil=null)},s.prototype.canMultisampleFramebuffer=function(a){return this.renderer.context.webGLVersion!==1&&a.colorTextures.length<=1&&!a.depthTexture},s.prototype.detectSamples=function(a){var l=this.msaaSamples,h=MSAA_QUALITY$4.NONE;if(a<=1||l===null)return h;for(var d=0;d<l.length;d++)if(l[d]<=a){h=l[d];break}return h===1&&(h=MSAA_QUALITY$4.NONE),h},s.prototype.blit=function(a,l,h){var d=this,v=d.current,_=d.renderer,m=d.gl,g=d.CONTEXT_UID;if(_.context.webGLVersion===2&&!!v){var y=v.glFramebuffers[g];if(!!y){if(!a){if(!y.msaaBuffer)return;var T=v.colorTextures[0];if(!T)return;y.blitFramebuffer||(y.blitFramebuffer=new Framebuffer(v.width,v.height),y.blitFramebuffer.addColorTexture(0,T)),a=y.blitFramebuffer,a.colorTextures[0]!==T&&(a.colorTextures[0]=T,a.dirtyId++,a.dirtyFormat++),(a.width!==v.width||a.height!==v.height)&&(a.width=v.width,a.height=v.height,a.dirtyId++,a.dirtySize++)}l||(l=tempRectangle,l.width=v.width,l.height=v.height),h||(h=l);var E=l.width===h.width&&l.height===h.height;this.bind(a),m.bindFramebuffer(m.READ_FRAMEBUFFER,y.framebuffer),m.blitFramebuffer(l.left,l.top,l.right,l.bottom,h.left,h.top,h.right,h.bottom,m.COLOR_BUFFER_BIT,E?m.NEAREST:m.LINEAR)}}},s.prototype.disposeFramebuffer=function(a,l){var h=a.glFramebuffers[this.CONTEXT_UID],d=this.gl;if(!!h){delete a.glFramebuffers[this.CONTEXT_UID];var v=this.managedFramebuffers.indexOf(a);v>=0&&this.managedFramebuffers.splice(v,1),a.disposeRunner.remove(this),l||(d.deleteFramebuffer(h.framebuffer),h.msaaBuffer&&d.deleteRenderbuffer(h.msaaBuffer),h.stencil&&d.deleteRenderbuffer(h.stencil)),h.blitFramebuffer&&h.blitFramebuffer.dispose()}},s.prototype.disposeAll=function(a){var l=this.managedFramebuffers;this.managedFramebuffers=[];for(var h=0;h<l.length;h++)this.disposeFramebuffer(l[h],a)},s.prototype.forceStencil=function(){var a=this.current;if(!!a){var l=a.glFramebuffers[this.CONTEXT_UID];if(!(!l||l.stencil)){a.stencil=!0;var h=a.width,d=a.height,v=this.gl,_=v.createRenderbuffer();v.bindRenderbuffer(v.RENDERBUFFER,_),l.msaaBuffer?v.renderbufferStorageMultisample(v.RENDERBUFFER,l.multisample,v.DEPTH24_STENCIL8,h,d):v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,h,d),l.stencil=_,v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,_)}}},s.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle},s.prototype.destroy=function(){this.renderer=null},s}(),byteSizeMap={5126:4,5123:2,5121:1},GeometrySystem=function(){function s(a){this.renderer=a,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return s.prototype.contextChange=function(){this.disposeAll(!0);var a=this.gl=this.renderer.gl,l=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,l.webGLVersion!==2){var h=this.renderer.context.extensions.vertexArrayObject;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY&&(h=null),h?(a.createVertexArray=function(){return h.createVertexArrayOES()},a.bindVertexArray=function(v){return h.bindVertexArrayOES(v)},a.deleteVertexArray=function(v){return h.deleteVertexArrayOES(v)}):(this.hasVao=!1,a.createVertexArray=function(){return null},a.bindVertexArray=function(){return null},a.deleteVertexArray=function(){return null})}if(l.webGLVersion!==2){var d=a.getExtension("ANGLE_instanced_arrays");d?(a.vertexAttribDivisor=function(v,_){return d.vertexAttribDivisorANGLE(v,_)},a.drawElementsInstanced=function(v,_,m,g,y){return d.drawElementsInstancedANGLE(v,_,m,g,y)},a.drawArraysInstanced=function(v,_,m,g){return d.drawArraysInstancedANGLE(v,_,m,g)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=l.webGLVersion===2||!!l.extensions.uint32ElementIndex},s.prototype.bind=function(a,l){l=l||this.renderer.shader.shader;var h=this.gl,d=a.glVertexArrayObjects[this.CONTEXT_UID],v=!1;d||(this.managedGeometries[a.id]=a,a.disposeRunner.add(this),a.glVertexArrayObjects[this.CONTEXT_UID]=d={},v=!0);var _=d[l.program.id]||this.initGeometryVao(a,l,v);this._activeGeometry=a,this._activeVao!==_&&(this._activeVao=_,this.hasVao?h.bindVertexArray(_):this.activateVao(a,l.program)),this.updateBuffers()},s.prototype.reset=function(){this.unbind()},s.prototype.updateBuffers=function(){for(var a=this._activeGeometry,l=this.renderer.buffer,h=0;h<a.buffers.length;h++){var d=a.buffers[h];l.update(d)}},s.prototype.checkCompatibility=function(a,l){var h=a.attributes,d=l.attributeData;for(var v in d)if(!h[v])throw new Error('shader and geometry incompatible, geometry missing the "'+v+'" attribute')},s.prototype.getSignature=function(a,l){var h=a.attributes,d=l.attributeData,v=["g",a.id];for(var _ in h)d[_]&&v.push(_,d[_].location);return v.join("-")},s.prototype.initGeometryVao=function(a,l,h){h===void 0&&(h=!0);var d=this.gl,v=this.CONTEXT_UID,_=this.renderer.buffer,m=l.program;m.glPrograms[v]||this.renderer.shader.generateProgram(l),this.checkCompatibility(a,m);var g=this.getSignature(a,m),y=a.glVertexArrayObjects[this.CONTEXT_UID],T=y[g];if(T)return y[m.id]=T,T;var E=a.buffers,b=a.attributes,R={},I={};for(var P in E)R[P]=0,I[P]=0;for(var P in b)!b[P].size&&m.attributeData[P]?b[P].size=m.attributeData[P].size:b[P].size||console.warn("PIXI Geometry attribute '"+P+"' size cannot be determined (likely the bound shader does not have the attribute)"),R[b[P].buffer]+=b[P].size*byteSizeMap[b[P].type];for(var P in b){var C=b[P],S=C.size;C.stride===void 0&&(R[C.buffer]===S*byteSizeMap[C.type]?C.stride=0:C.stride=R[C.buffer]),C.start===void 0&&(C.start=I[C.buffer],I[C.buffer]+=S*byteSizeMap[C.type])}T=d.createVertexArray(),d.bindVertexArray(T);for(var O=0;O<E.length;O++){var w=E[O];_.bind(w),h&&w._glBuffers[v].refCount++}return this.activateVao(a,m),this._activeVao=T,y[m.id]=T,y[g]=T,T},s.prototype.disposeGeometry=function(a,l){var h;if(!!this.managedGeometries[a.id]){delete this.managedGeometries[a.id];var d=a.glVertexArrayObjects[this.CONTEXT_UID],v=this.gl,_=a.buffers,m=(h=this.renderer)===null||h===void 0?void 0:h.buffer;if(a.disposeRunner.remove(this),!!d){if(m)for(var g=0;g<_.length;g++){var y=_[g]._glBuffers[this.CONTEXT_UID];y&&(y.refCount--,y.refCount===0&&!l&&m.dispose(_[g],l))}if(!l){for(var T in d)if(T[0]==="g"){var E=d[T];this._activeVao===E&&this.unbind(),v.deleteVertexArray(E)}}delete a.glVertexArrayObjects[this.CONTEXT_UID]}}},s.prototype.disposeAll=function(a){for(var l=Object.keys(this.managedGeometries),h=0;h<l.length;h++)this.disposeGeometry(this.managedGeometries[l[h]],a)},s.prototype.activateVao=function(a,l){var h=this.gl,d=this.CONTEXT_UID,v=this.renderer.buffer,_=a.buffers,m=a.attributes;a.indexBuffer&&v.bind(a.indexBuffer);var g=null;for(var y in m){var T=m[y],E=_[T.buffer],b=E._glBuffers[d];if(l.attributeData[y]){g!==b&&(v.bind(E),g=b);var R=l.attributeData[y].location;if(h.enableVertexAttribArray(R),h.vertexAttribPointer(R,T.size,T.type||h.FLOAT,T.normalized,T.stride,T.start),T.instance)if(this.hasInstance)h.vertexAttribDivisor(R,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},s.prototype.draw=function(a,l,h,d){var v=this.gl,_=this._activeGeometry;if(_.indexBuffer){var m=_.indexBuffer.data.BYTES_PER_ELEMENT,g=m===2?v.UNSIGNED_SHORT:v.UNSIGNED_INT;m===2||m===4&&this.canUseUInt32ElementIndex?_.instanced?v.drawElementsInstanced(a,l||_.indexBuffer.data.length,g,(h||0)*m,d||1):v.drawElements(a,l||_.indexBuffer.data.length,g,(h||0)*m):console.warn("unsupported index buffer type: uint32")}else _.instanced?v.drawArraysInstanced(a,h,l||_.getSize(),d||1):v.drawArrays(a,h,l||_.getSize());return this},s.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},s.prototype.destroy=function(){this.renderer=null},s}(),MaskData=function(){function s(a){a===void 0&&(a=null),this.type=MASK_TYPES$4.NONE,this.autoDetect=!0,this.maskObject=a||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=settings$1.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(s.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(a){a?this._filters?this._filters[0]=a:this._filters=[a]:this._filters=null},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES$4.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},s.prototype.copyCountersOrReset=function(a){a?(this._stencilCounter=a._stencilCounter,this._scissorCounter=a._scissorCounter,this._scissorRect=a._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},s}();function compileShader(s,a,l){var h=s.createShader(a);return s.shaderSource(h,l),s.compileShader(h),h}function logPrettyShaderError(s,a){var l=s.getShaderSource(a).split(`
`).map(function(y,T){return T+": "+y}),h=s.getShaderInfoLog(a),d=h.split(`
`),v={},_=d.map(function(y){return parseFloat(y.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(y){return y&&!v[y]?(v[y]=!0,!0):!1}),m=[""];_.forEach(function(y){l[y-1]="%c"+l[y-1]+"%c",m.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var g=l.join(`
`);m[0]=g,console.error(h),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,m),console.groupEnd()}function logProgramError(s,a,l,h){s.getProgramParameter(a,s.LINK_STATUS)||(s.getShaderParameter(l,s.COMPILE_STATUS)||logPrettyShaderError(s,l),s.getShaderParameter(h,s.COMPILE_STATUS)||logPrettyShaderError(s,h),console.error("PixiJS Error: Could not initialize shader."),s.getProgramInfoLog(a)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",s.getProgramInfoLog(a)))}function booleanArray(s){for(var a=new Array(s),l=0;l<a.length;l++)a[l]=!1;return a}function defaultValue(s,a){switch(s){case"float":return 0;case"vec2":return new Float32Array(2*a);case"vec3":return new Float32Array(3*a);case"vec4":return new Float32Array(4*a);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*a);case"ivec3":return new Int32Array(3*a);case"ivec4":return new Int32Array(4*a);case"uvec2":return new Uint32Array(2*a);case"uvec3":return new Uint32Array(3*a);case"uvec4":return new Uint32Array(4*a);case"bool":return!1;case"bvec2":return booleanArray(2*a);case"bvec3":return booleanArray(3*a);case"bvec4":return booleanArray(4*a);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var unknownContext={},context=unknownContext;function getTestContext(){if(context===unknownContext||context&&context.isContextLost()){var s=document.createElement("canvas"),a=void 0;settings$1.PREFER_ENV>=ENV$4.WEBGL2&&(a=s.getContext("webgl2",{})),a||(a=s.getContext("webgl",{})||s.getContext("experimental-webgl",{}),a?a.getExtension("WEBGL_draw_buffers"):a=null),context=a}return context}var maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION$4.MEDIUM;var s=getTestContext();if(s&&s.getShaderPrecisionFormat){var a=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);maxFragmentPrecision=a.precision?PRECISION$4.HIGH:PRECISION$4.MEDIUM}}return maxFragmentPrecision}function setPrecision(s,a,l){if(s.substring(0,9)!=="precision"){var h=a;return a===PRECISION$4.HIGH&&l!==PRECISION$4.HIGH&&(h=PRECISION$4.MEDIUM),"precision "+h+` float;
`+s}else if(l!==PRECISION$4.HIGH&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}var GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(s){return GLSL_TO_SIZE[s]}var GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(s,a){if(!GL_TABLE){var l=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var h=0;h<l.length;++h){var d=l[h];GL_TABLE[s[d]]=GL_TO_GLSL_TYPES[d]}}return GL_TABLE[a]}var uniformParsers=[{test:function(s){return s.type==="float"&&s.size===1},code:function(s){return`
            if(uv["`+s+'"] !== ud["'+s+`"].value)
            {
                ud["`+s+'"].value = uv["'+s+`"]
                gl.uniform1f(ud["`+s+'"].location, uv["'+s+`"])
            }
            `}},{test:function(s){return(s.type==="sampler2D"||s.type==="samplerCube"||s.type==="sampler2DArray")&&s.size===1&&!s.isArray},code:function(s){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+s+`"], t);

            if(ud["`+s+`"].value !== t)
            {
                ud["`+s+`"].value = t;
                gl.uniform1i(ud["`+s+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(s,a){return s.type==="mat3"&&s.size===1&&a.a!==void 0},code:function(s){return`
            gl.uniformMatrix3fv(ud["`+s+'"].location, false, uv["'+s+`"].toArray(true));
            `},codeUbo:function(s){return`
                var `+s+"_matrix = uv."+s+`.toArray(true);

                data[offset] = `+s+`_matrix[0];
                data[offset+1] = `+s+`_matrix[1];
                data[offset+2] = `+s+`_matrix[2];
        
                data[offset + 4] = `+s+`_matrix[3];
                data[offset + 5] = `+s+`_matrix[4];
                data[offset + 6] = `+s+`_matrix[5];
        
                data[offset + 8] = `+s+`_matrix[6];
                data[offset + 9] = `+s+`_matrix[7];
                data[offset + 10] = `+s+`_matrix[8];
            `}},{test:function(s,a){return s.type==="vec2"&&s.size===1&&a.x!==void 0},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+s+`"].location, v.x, v.y);
                }`},codeUbo:function(s){return`
                v = uv.`+s+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(s){return s.type==="vec2"&&s.size===1},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+s+`"].location, v[0], v[1]);
                }
            `}},{test:function(s,a){return s.type==="vec4"&&s.size===1&&a.width!==void 0},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+s+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(s){return`
                    v = uv.`+s+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(s){return s.type==="vec4"&&s.size===1},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+s+`"].location, v[0], v[1], v[2], v[3])
                }`}}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(s,a){var l,h=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var d in s.uniforms){var v=a[d];if(!v){!((l=s.uniforms[d])===null||l===void 0)&&l.group&&(s.uniforms[d].ubo?h.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+d+", '"+d+`');
                    `):h.push(`
                        renderer.shader.syncUniformGroup(uv.`+d+`, syncData);
                    `));continue}for(var _=s.uniforms[d],m=!1,g=0;g<uniformParsers.length;g++)if(uniformParsers[g].test(v,_)){h.push(uniformParsers[g].code(d,_)),m=!0;break}if(!m){var y=v.size===1?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS,T=y[v.type].replace("location",'ud["'+d+'"].location');h.push(`
            cu = ud["`+d+`"];
            cv = cu.value;
            v = uv["`+d+`"];
            `+T+";")}}return new Function("ud","uv","renderer","syncData",h.join(`
`))}var fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(s){for(var a="",l=0;l<s;++l)l>0&&(a+=`
else `),l<s-1&&(a+="if(test == "+l+".0){}");return a}function checkMaxIfStatementsInShader(s,a){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var l=a.createShader(a.FRAGMENT_SHADER);;){var h=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(s));if(a.shaderSource(l,h),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))s=s/2|0;else break}return s}var unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{var s=new Function("param1","param2","param3","return param1[param2] === param3;");unsafeEval=s({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,UID$1=0,nameCache={},Program=function(){function s(a,l,h){h===void 0&&(h="pixi-shader"),this.id=UID$1++,this.vertexSrc=a||s.defaultVertexSrc,this.fragmentSrc=l||s.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(h=h.replace(/\s+/g,"-"),nameCache[h]?(nameCache[h]++,h+="-"+nameCache[h]):nameCache[h]=1,this.vertexSrc="#define SHADER_NAME "+h+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+h+`
`+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,settings$1.PRECISION_VERTEX,PRECISION$4.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,settings$1.PRECISION_FRAGMENT,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(s,"defaultVertexSrc",{get:function(){return defaultVertex$3},enumerable:!1,configurable:!0}),Object.defineProperty(s,"defaultFragmentSrc",{get:function(){return defaultFragment$2},enumerable:!1,configurable:!0}),s.from=function(a,l,h){var d=a+l,v=ProgramCache[d];return v||(ProgramCache[d]=v=new s(a,l,h)),v},s}(),Shader=function(){function s(a,l){this.uniformBindCount=0,this.program=a,l?l instanceof UniformGroup?this.uniformGroup=l:this.uniformGroup=new UniformGroup(l):this.uniformGroup=new UniformGroup({})}return s.prototype.checkUniformExists=function(a,l){if(l.uniforms[a])return!0;for(var h in l.uniforms){var d=l.uniforms[h];if(d.group&&this.checkUniformExists(a,d))return!0}return!1},s.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(s.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),s.from=function(a,l,h){var d=Program.from(a,l);return new s(d,h)},s}(),BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5,State$1=function(){function s(){this.data=0,this.blendMode=BLEND_MODES$4.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(s.prototype,"blend",{get:function(){return!!(this.data&1<<BLEND$1)},set:function(a){!!(this.data&1<<BLEND$1)!==a&&(this.data^=1<<BLEND$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"offsets",{get:function(){return!!(this.data&1<<OFFSET$1)},set:function(a){!!(this.data&1<<OFFSET$1)!==a&&(this.data^=1<<OFFSET$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"culling",{get:function(){return!!(this.data&1<<CULLING$1)},set:function(a){!!(this.data&1<<CULLING$1)!==a&&(this.data^=1<<CULLING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"depthTest",{get:function(){return!!(this.data&1<<DEPTH_TEST$1)},set:function(a){!!(this.data&1<<DEPTH_TEST$1)!==a&&(this.data^=1<<DEPTH_TEST$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"depthMask",{get:function(){return!!(this.data&1<<DEPTH_MASK$1)},set:function(a){!!(this.data&1<<DEPTH_MASK$1)!==a&&(this.data^=1<<DEPTH_MASK$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<WINDING$1)},set:function(a){!!(this.data&1<<WINDING$1)!==a&&(this.data^=1<<WINDING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"blendMode",{get:function(){return this._blendMode},set:function(a){this.blend=a!==BLEND_MODES$4.NONE,this._blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(a){this.offsets=!!a,this._polygonOffset=a},enumerable:!1,configurable:!0}),s.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},s.for2d=function(){var a=new s;return a.depthTest=!1,a.blend=!0,a},s}(),defaultVertex$2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultFragment$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Filter=function(s){__extends$i(a,s);function a(l,h,d){var v=this,_=Program.from(l||a.defaultVertexSrc,h||a.defaultFragmentSrc);return v=s.call(this,_,d)||this,v.padding=0,v.resolution=settings$1.FILTER_RESOLUTION,v.multisample=settings$1.FILTER_MULTISAMPLE,v.enabled=!0,v.autoFit=!0,v.state=new State$1,v}return a.prototype.apply=function(l,h,d,v,_){l.applyFilter(this,h,d,v)},Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resolution",{get:function(){return this._resolution},set:function(l){this._resolution=l},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultVertexSrc",{get:function(){return defaultVertex$2},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultFragmentSrc",{get:function(){return defaultFragment$1},enumerable:!1,configurable:!0}),a}(Shader),vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,tempMat$1=new Matrix,TextureMatrix=function(){function s(a,l){this._texture=a,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof l=="undefined"?.5:l,this.isSimple=!1}return Object.defineProperty(s.prototype,"texture",{get:function(){return this._texture},set:function(a){this._texture=a,this._textureID=-1},enumerable:!1,configurable:!0}),s.prototype.multiplyUvs=function(a,l){l===void 0&&(l=a);for(var h=this.mapCoord,d=0;d<a.length;d+=2){var v=a[d],_=a[d+1];l[d]=v*h.a+_*h.c+h.tx,l[d+1]=v*h.b+_*h.d+h.ty}return l},s.prototype.update=function(a){var l=this._texture;if(!l||!l.valid||!a&&this._textureID===l._updateID)return!1;this._textureID=l._updateID,this._updateID++;var h=l._uvs;this.mapCoord.set(h.x1-h.x0,h.y1-h.y0,h.x3-h.x0,h.y3-h.y0,h.x0,h.y0);var d=l.orig,v=l.trim;v&&(tempMat$1.set(d.width/v.width,0,0,d.height/v.height,-v.x/v.width,-v.y/v.height),this.mapCoord.append(tempMat$1));var _=l.baseTexture,m=this.uClampFrame,g=this.clampMargin/_.resolution,y=this.clampOffset;return m[0]=(l._frame.x+g+y)/_.width,m[1]=(l._frame.y+g+y)/_.height,m[2]=(l._frame.x+l._frame.width-g+y)/_.width,m[3]=(l._frame.y+l._frame.height-g+y)/_.height,this.uClampOffset[0]=y/_.realWidth,this.uClampOffset[1]=y/_.realHeight,this.isSimple=l._frame.width===_.width&&l._frame.height===_.height&&l.rotate===0,!0},s}(),SpriteMaskFilter=function(s){__extends$i(a,s);function a(l,h,d){var v=this,_=null;return typeof l!="string"&&h===void 0&&d===void 0&&(_=l,l=void 0,h=void 0,d=void 0),v=s.call(this,l||vertex$4,h||fragment$7,d)||this,v.maskSprite=_,v.maskMatrix=new Matrix,v}return Object.defineProperty(a.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(l){this._maskSprite=l,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),a.prototype.apply=function(l,h,d,v){var _=this._maskSprite,m=_._texture;!m.valid||(m.uvMatrix||(m.uvMatrix=new TextureMatrix(m,0)),m.uvMatrix.update(),this.uniforms.npmAlpha=m.baseTexture.alphaMode?0:1,this.uniforms.mask=m,this.uniforms.otherMatrix=l.calculateSpriteMatrix(this.maskMatrix,_).prepend(m.uvMatrix.mapCoord),this.uniforms.alpha=_.worldAlpha,this.uniforms.maskClamp=m.uvMatrix.uClampFrame,l.applyFilter(this,h,d,v))},a}(Filter),MaskSystem=function(){function s(a){this.renderer=a,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return s.prototype.setMaskStack=function(a){this.maskStack=a,this.renderer.scissor.setMaskStack(a),this.renderer.stencil.setMaskStack(a)},s.prototype.push=function(a,l){var h=l;if(!h.isMaskData){var d=this.maskDataPool.pop()||new MaskData;d.pooled=!0,d.maskObject=l,h=d}var v=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(h.copyCountersOrReset(v),h.autoDetect&&this.detect(h),h._target=a,h.type!==MASK_TYPES$4.SPRITE&&this.maskStack.push(h),h.enabled)switch(h.type){case MASK_TYPES$4.SCISSOR:this.renderer.scissor.push(h);break;case MASK_TYPES$4.STENCIL:this.renderer.stencil.push(h);break;case MASK_TYPES$4.SPRITE:h.copyCountersOrReset(null),this.pushSpriteMask(h);break}h.type===MASK_TYPES$4.SPRITE&&this.maskStack.push(h)},s.prototype.pop=function(a){var l=this.maskStack.pop();if(!(!l||l._target!==a)){if(l.enabled)switch(l.type){case MASK_TYPES$4.SCISSOR:this.renderer.scissor.pop();break;case MASK_TYPES$4.STENCIL:this.renderer.stencil.pop(l.maskObject);break;case MASK_TYPES$4.SPRITE:this.popSpriteMask(l);break}if(l.reset(),l.pooled&&this.maskDataPool.push(l),this.maskStack.length!==0){var h=this.maskStack[this.maskStack.length-1];h.type===MASK_TYPES$4.SPRITE&&h._filters&&(h._filters[0].maskSprite=h.maskObject)}}},s.prototype.detect=function(a){var l=a.maskObject;l.isSprite?a.type=MASK_TYPES$4.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(a)?a.type=MASK_TYPES$4.SCISSOR:a.type=MASK_TYPES$4.STENCIL},s.prototype.pushSpriteMask=function(a){var l,h,d=a.maskObject,v=a._target,_=a._filters;_||(_=this.alphaMaskPool[this.alphaMaskIndex],_||(_=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]));var m=this.renderer,g=m.renderTexture,y,T;if(g.current){var E=g.current;y=a.resolution||E.resolution,T=(l=a.multisample)!==null&&l!==void 0?l:E.multisample}else y=a.resolution||m.resolution,T=(h=a.multisample)!==null&&h!==void 0?h:m.multisample;_[0].resolution=y,_[0].multisample=T,_[0].maskSprite=d;var b=v.filterArea;v.filterArea=d.getBounds(!0),m.filter.push(v,_),v.filterArea=b,a._filters||this.alphaMaskIndex++},s.prototype.popSpriteMask=function(a){this.renderer.filter.pop(),a._filters?a._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},s.prototype.destroy=function(){this.renderer=null},s}(),AbstractMaskSystem=function(){function s(a){this.renderer=a,this.maskStack=[],this.glConst=0}return s.prototype.getStackLength=function(){return this.maskStack.length},s.prototype.setMaskStack=function(a){var l=this.renderer.gl,h=this.getStackLength();this.maskStack=a;var d=this.getStackLength();d!==h&&(d===0?l.disable(this.glConst):(l.enable(this.glConst),this._useCurrent()))},s.prototype._useCurrent=function(){},s.prototype.destroy=function(){this.renderer=null,this.maskStack=null},s}(),tempMatrix$1=new Matrix,ScissorSystem=function(s){__extends$i(a,s);function a(l){var h=s.call(this,l)||this;return h.glConst=WebGLRenderingContext.SCISSOR_TEST,h}return a.prototype.getStackLength=function(){var l=this.maskStack[this.maskStack.length-1];return l?l._scissorCounter:0},a.prototype.calcScissorRect=function(l){if(!l._scissorRectLocal){var h=l._scissorRect,d=l.maskObject,v=this.renderer,_=v.renderTexture;d.renderable=!0;var m=d.getBounds();this.roundFrameToPixels(m,_.current?_.current.resolution:v.resolution,_.sourceFrame,_.destinationFrame,v.projection.transform),d.renderable=!1,h&&m.fit(h),l._scissorRectLocal=m}},a.isMatrixRotated=function(l){if(!l)return!1;var h=l.a,d=l.b,v=l.c,_=l.d;return(Math.abs(d)>1e-4||Math.abs(v)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(_)>1e-4)},a.prototype.testScissor=function(l){var h=l.maskObject;if(!h.isFastRect||!h.isFastRect()||a.isMatrixRotated(h.worldTransform)||a.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(l);var d=l._scissorRectLocal;return d.width>0&&d.height>0},a.prototype.roundFrameToPixels=function(l,h,d,v,_){a.isMatrixRotated(_)||(_=_?tempMatrix$1.copyFrom(_):tempMatrix$1.identity(),_.translate(-d.x,-d.y).scale(v.width/d.width,v.height/d.height).translate(v.x,v.y),this.renderer.filter.transformAABB(_,l),l.fit(v),l.x=Math.round(l.x*h),l.y=Math.round(l.y*h),l.width=Math.round(l.width*h),l.height=Math.round(l.height*h))},a.prototype.push=function(l){l._scissorRectLocal||this.calcScissorRect(l);var h=this.renderer.gl;l._scissorRect||h.enable(h.SCISSOR_TEST),l._scissorCounter++,l._scissorRect=l._scissorRectLocal,this._useCurrent()},a.prototype.pop=function(){var l=this.renderer.gl;this.getStackLength()>0?this._useCurrent():l.disable(l.SCISSOR_TEST)},a.prototype._useCurrent=function(){var l=this.maskStack[this.maskStack.length-1]._scissorRect,h;this.renderer.renderTexture.current?h=l.y:h=this.renderer.height-l.height-l.y,this.renderer.gl.scissor(l.x,h,l.width,l.height)},a}(AbstractMaskSystem),StencilSystem=function(s){__extends$i(a,s);function a(l){var h=s.call(this,l)||this;return h.glConst=WebGLRenderingContext.STENCIL_TEST,h}return a.prototype.getStackLength=function(){var l=this.maskStack[this.maskStack.length-1];return l?l._stencilCounter:0},a.prototype.push=function(l){var h=l.maskObject,d=this.renderer.gl,v=l._stencilCounter;v===0&&(this.renderer.framebuffer.forceStencil(),d.clearStencil(0),d.clear(d.STENCIL_BUFFER_BIT),d.enable(d.STENCIL_TEST)),l._stencilCounter++,d.colorMask(!1,!1,!1,!1),d.stencilFunc(d.EQUAL,v,4294967295),d.stencilOp(d.KEEP,d.KEEP,d.INCR),h.renderable=!0,h.render(this.renderer),this.renderer.batch.flush(),h.renderable=!1,this._useCurrent()},a.prototype.pop=function(l){var h=this.renderer.gl;this.getStackLength()===0?h.disable(h.STENCIL_TEST):(h.colorMask(!1,!1,!1,!1),h.stencilOp(h.KEEP,h.KEEP,h.DECR),l.renderable=!0,l.render(this.renderer),this.renderer.batch.flush(),l.renderable=!1,this._useCurrent())},a.prototype._useCurrent=function(){var l=this.renderer.gl;l.colorMask(!0,!0,!0,!0),l.stencilFunc(l.EQUAL,this.getStackLength(),4294967295),l.stencilOp(l.KEEP,l.KEEP,l.KEEP)},a}(AbstractMaskSystem),ProjectionSystem=function(){function s(a){this.renderer=a,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}return s.prototype.update=function(a,l,h,d){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=l||this.sourceFrame||a,this.calculateProjection(this.destinationFrame,this.sourceFrame,h,d),this.transform&&this.projectionMatrix.append(this.transform);var v=this.renderer;v.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,v.globalUniforms.update(),v.shader.shader&&v.shader.syncUniformGroup(v.shader.shader.uniforms.globals)},s.prototype.calculateProjection=function(a,l,h,d){var v=this.projectionMatrix,_=d?-1:1;v.identity(),v.a=1/l.width*2,v.d=_*(1/l.height*2),v.tx=-1-l.x*v.a,v.ty=-_-l.y*v.d},s.prototype.setTransform=function(a){},s.prototype.destroy=function(){this.renderer=null},s}(),tempRect=new Rectangle,tempRect2=new Rectangle,RenderTextureSystem=function(){function s(a){this.renderer=a,this.clearColor=a._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}return s.prototype.bind=function(a,l,h){a===void 0&&(a=null);var d=this.renderer;this.current=a;var v,_,m;a?(v=a.baseTexture,m=v.resolution,l||(tempRect.width=a.frame.width,tempRect.height=a.frame.height,l=tempRect),h||(tempRect2.x=a.frame.x,tempRect2.y=a.frame.y,tempRect2.width=l.width,tempRect2.height=l.height,h=tempRect2),_=v.framebuffer):(m=d.resolution,l||(tempRect.width=d.screen.width,tempRect.height=d.screen.height,l=tempRect),h||(h=tempRect,h.width=l.width,h.height=l.height));var g=this.viewportFrame;g.x=h.x*m,g.y=h.y*m,g.width=h.width*m,g.height=h.height*m,a||(g.y=d.view.height-(g.y+g.height)),g.ceil(),this.renderer.framebuffer.bind(_,g),this.renderer.projection.update(h,l,m,!_),a?this.renderer.mask.setMaskStack(v.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(l),this.destinationFrame.copyFrom(h)},s.prototype.clear=function(a,l){this.current?a=a||this.current.baseTexture.clearColor:a=a||this.clearColor;var h=this.destinationFrame,d=this.current?this.current.baseTexture:this.renderer.screen,v=h.width!==d.width||h.height!==d.height;if(v){var _=this.viewportFrame,m=_.x,g=_.y,y=_.width,T=_.height;m=Math.round(m),g=Math.round(g),y=Math.round(y),T=Math.round(T),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(m,g,y,T)}this.renderer.framebuffer.clear(a[0],a[1],a[2],a[3],l),v&&this.renderer.scissor.pop()},s.prototype.resize=function(){this.bind(null)},s.prototype.reset=function(){this.bind(null)},s.prototype.destroy=function(){this.renderer=null},s}();function uboUpdate(s,a,l,h,d){l.buffer.update(d)}var UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(s){for(var a=s.map(function(g){return{data:g,offset:0,dataLen:0,dirty:0}}),l=0,h=0,d=0,v=0;v<a.length;v++){var _=a[v];if(l=GLSL_TO_STD40_SIZE[_.data.type],_.data.size>1&&(l=Math.max(l,16)*_.data.size),_.dataLen=l,h%l!==0&&h<16){var m=h%l%16;h+=m,d+=m}h+l>16?(d=Math.ceil(d/16)*16,_.offset=d,d+=l,h=l):(_.offset=d,h+=l,d+=l)}return d=Math.ceil(d/16)*16,{uboElements:a,size:d}}function getUBOData(s,a){var l=[];for(var h in s)a[h]&&l.push(a[h]);return l.sort(function(d,v){return d.index-v.index}),l}function generateUniformBufferSync(s,a){if(!s.autoManage)return{size:0,syncFunc:uboUpdate};for(var l=getUBOData(s.uniforms,a),h=createUBOElements(l),d=h.uboElements,v=h.size,_=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],m=0;m<d.length;m++){for(var g=d[m],y=s.uniforms[g.data.name],T=g.data.name,E=!1,b=0;b<uniformParsers.length;b++){var R=uniformParsers[b];if(R.codeUbo&&R.test(g.data,y)){_.push("offset = "+g.offset/4+";",uniformParsers[b].codeUbo(g.data.name,y)),E=!0;break}}if(!E)if(g.data.size>1){var I=mapSize(g.data.type),P=Math.max(GLSL_TO_STD40_SIZE[g.data.type]/16,1),C=I/P,S=(4-C%4)%4;_.push(`
                cv = ud.`+T+`.value;
                v = uv.`+T+`;
                offset = `+g.offset/4+`;

                t = 0;

                for(var i=0; i < `+g.data.size*P+`; i++)
                {
                    for(var j = 0; j < `+C+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+S+`;
                }

                `)}else{var O=UBO_TO_SINGLE_SETTERS[g.data.type];_.push(`
                cv = ud.`+T+`.value;
                v = uv.`+T+`;
                offset = `+g.offset/4+`;
                `+O+`;
                `)}}return _.push(`
       renderer.buffer.update(buffer);
    `),{size:v,syncFunc:new Function("ud","uv","renderer","syncData","buffer",_.join(`
`))}}var IGLUniformData=function(){function s(){}return s}(),GLProgram=function(){function s(a,l){this.program=a,this.uniformData=l,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return s.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},s}();function getAttributeData(s,a){for(var l={},h=a.getProgramParameter(s,a.ACTIVE_ATTRIBUTES),d=0;d<h;d++){var v=a.getActiveAttrib(s,d);if(v.name.indexOf("gl_")!==0){var _=mapType(a,v.type),m={type:_,name:v.name,size:mapSize(_),location:a.getAttribLocation(s,v.name)};l[v.name]=m}}return l}function getUniformData(s,a){for(var l={},h=a.getProgramParameter(s,a.ACTIVE_UNIFORMS),d=0;d<h;d++){var v=a.getActiveUniform(s,d),_=v.name.replace(/\[.*?\]$/,""),m=!!v.name.match(/\[.*?\]$/),g=mapType(a,v.type);l[_]={name:_,index:d,type:g,size:v.size,isArray:m,value:defaultValue(g,v.size)}}return l}function generateProgram(s,a){var l=compileShader(s,s.VERTEX_SHADER,a.vertexSrc),h=compileShader(s,s.FRAGMENT_SHADER,a.fragmentSrc),d=s.createProgram();if(s.attachShader(d,l),s.attachShader(d,h),s.linkProgram(d),s.getProgramParameter(d,s.LINK_STATUS)||logProgramError(s,d,l,h),a.attributeData=getAttributeData(d,s),a.uniformData=getUniformData(d,s),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(a.vertexSrc)){var v=Object.keys(a.attributeData);v.sort(function(T,E){return T>E?1:-1});for(var _=0;_<v.length;_++)a.attributeData[v[_]].location=_,s.bindAttribLocation(d,_,v[_]);s.linkProgram(d)}s.deleteShader(l),s.deleteShader(h);var m={};for(var _ in a.uniformData){var g=a.uniformData[_];m[_]={location:s.getUniformLocation(d,_),value:defaultValue(g.type,g.size)}}var y=new GLProgram(d,m);return y}var UID=0,defaultSyncData={textureCount:0,uboCount:0},ShaderSystem=function(){function s(a){this.destroyed=!1,this.renderer=a,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}return s.prototype.systemCheck=function(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},s.prototype.contextChange=function(a){this.gl=a,this.reset()},s.prototype.bind=function(a,l){a.uniforms.globals=this.renderer.globalUniforms;var h=a.program,d=h.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(a);return this.shader=a,this.program!==h&&(this.program=h,this.gl.useProgram(d.program)),l||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(a.uniformGroup,defaultSyncData)),d},s.prototype.setUniforms=function(a){var l=this.shader.program,h=l.glPrograms[this.renderer.CONTEXT_UID];l.syncUniforms(h.uniformData,a,this.renderer)},s.prototype.syncUniformGroup=function(a,l){var h=this.getGlProgram();(!a.static||a.dirtyId!==h.uniformDirtyGroups[a.id])&&(h.uniformDirtyGroups[a.id]=a.dirtyId,this.syncUniforms(a,h,l))},s.prototype.syncUniforms=function(a,l,h){var d=a.syncUniforms[this.shader.program.id]||this.createSyncGroups(a);d(l.uniformData,a.uniforms,this.renderer,h)},s.prototype.createSyncGroups=function(a){var l=this.getSignature(a,this.shader.program.uniformData,"u");return this.cache[l]||(this.cache[l]=generateUniformsSync(a,this.shader.program.uniformData)),a.syncUniforms[this.shader.program.id]=this.cache[l],a.syncUniforms[this.shader.program.id]},s.prototype.syncUniformBufferGroup=function(a,l){var h=this.getGlProgram();if(!a.static||a.dirtyId!==0||!h.uniformGroups[a.id]){a.dirtyId=0;var d=h.uniformGroups[a.id]||this.createSyncBufferGroup(a,h,l);a.buffer.update(),d(h.uniformData,a.uniforms,this.renderer,defaultSyncData,a.buffer)}this.renderer.buffer.bindBufferBase(a.buffer,h.uniformBufferBindings[l])},s.prototype.createSyncBufferGroup=function(a,l,h){var d=this.renderer.gl;this.renderer.buffer.bind(a.buffer);var v=this.gl.getUniformBlockIndex(l.program,h);l.uniformBufferBindings[h]=this.shader.uniformBindCount,d.uniformBlockBinding(l.program,v,this.shader.uniformBindCount),this.shader.uniformBindCount++;var _=this.getSignature(a,this.shader.program.uniformData,"ubo"),m=this._uboCache[_];if(m||(m=this._uboCache[_]=generateUniformBufferSync(a,this.shader.program.uniformData)),a.autoManage){var g=new Float32Array(m.size/4);a.buffer.update(g)}return l.uniformGroups[a.id]=m.syncFunc,l.uniformGroups[a.id]},s.prototype.getSignature=function(a,l,h){var d=a.uniforms,v=[h+"-"];for(var _ in d)v.push(_),l[_]&&v.push(l[_].type);return v.join("-")},s.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},s.prototype.generateProgram=function(a){var l=this.gl,h=a.program,d=generateProgram(l,h);return h.glPrograms[this.renderer.CONTEXT_UID]=d,d},s.prototype.reset=function(){this.program=null,this.shader=null},s.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},s}();function mapWebGLBlendModesToPixi(s,a){return a===void 0&&(a=[]),a[BLEND_MODES$4.NORMAL]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.ADD]=[s.ONE,s.ONE],a[BLEND_MODES$4.MULTIPLY]=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.SCREEN]=[s.ONE,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.OVERLAY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.DARKEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.LIGHTEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.COLOR_DODGE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.COLOR_BURN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.HARD_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.SOFT_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.DIFFERENCE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.EXCLUSION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.HUE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.SATURATION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.COLOR]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.LUMINOSITY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.NONE]=[0,0],a[BLEND_MODES$4.NORMAL_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.ADD_NPM]=[s.SRC_ALPHA,s.ONE,s.ONE,s.ONE],a[BLEND_MODES$4.SCREEN_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.SRC_IN]=[s.DST_ALPHA,s.ZERO],a[BLEND_MODES$4.SRC_OUT]=[s.ONE_MINUS_DST_ALPHA,s.ZERO],a[BLEND_MODES$4.SRC_ATOP]=[s.DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.DST_OVER]=[s.ONE_MINUS_DST_ALPHA,s.ONE],a[BLEND_MODES$4.DST_IN]=[s.ZERO,s.SRC_ALPHA],a[BLEND_MODES$4.DST_OUT]=[s.ZERO,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.DST_ATOP]=[s.ONE_MINUS_DST_ALPHA,s.SRC_ALPHA],a[BLEND_MODES$4.XOR]=[s.ONE_MINUS_DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$4.SUBTRACT]=[s.ONE,s.ONE,s.ONE,s.ONE,s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD],a}var BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,StateSystem=function(){function s(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES$4.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State$1,this.defaultState.blend=!0}return s.prototype.contextChange=function(a){this.gl=a,this.blendModes=mapWebGLBlendModesToPixi(a),this.set(this.defaultState),this.reset()},s.prototype.set=function(a){if(a=a||this.defaultState,this.stateId!==a.data){for(var l=this.stateId^a.data,h=0;l;)l&1&&this.map[h].call(this,!!(a.data&1<<h)),l=l>>1,h++;this.stateId=a.data}for(var h=0;h<this.checks.length;h++)this.checks[h](this,a)},s.prototype.forceState=function(a){a=a||this.defaultState;for(var l=0;l<this.map.length;l++)this.map[l].call(this,!!(a.data&1<<l));for(var l=0;l<this.checks.length;l++)this.checks[l](this,a);this.stateId=a.data},s.prototype.setBlend=function(a){this.updateCheck(s.checkBlendMode,a),this.gl[a?"enable":"disable"](this.gl.BLEND)},s.prototype.setOffset=function(a){this.updateCheck(s.checkPolygonOffset,a),this.gl[a?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},s.prototype.setDepthTest=function(a){this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST)},s.prototype.setDepthMask=function(a){this.gl.depthMask(a)},s.prototype.setCullFace=function(a){this.gl[a?"enable":"disable"](this.gl.CULL_FACE)},s.prototype.setFrontFace=function(a){this.gl.frontFace(this.gl[a?"CW":"CCW"])},s.prototype.setBlendMode=function(a){if(a!==this.blendMode){this.blendMode=a;var l=this.blendModes[a],h=this.gl;l.length===2?h.blendFunc(l[0],l[1]):h.blendFuncSeparate(l[0],l[1],l[2],l[3]),l.length===6?(this._blendEq=!0,h.blendEquationSeparate(l[4],l[5])):this._blendEq&&(this._blendEq=!1,h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD))}},s.prototype.setPolygonOffset=function(a,l){this.gl.polygonOffset(a,l)},s.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},s.prototype.updateCheck=function(a,l){var h=this.checks.indexOf(a);l&&h===-1?this.checks.push(a):!l&&h!==-1&&this.checks.splice(h,1)},s.checkBlendMode=function(a,l){a.setBlendMode(l.blendMode)},s.checkPolygonOffset=function(a,l){a.setPolygonOffset(1,l.polygonOffset)},s.prototype.destroy=function(){this.gl=null},s}(),TextureGCSystem=function(){function s(a){this.renderer=a,this.count=0,this.checkCount=0,this.maxIdle=settings$1.GC_MAX_IDLE,this.checkCountMax=settings$1.GC_MAX_CHECK_COUNT,this.mode=settings$1.GC_MODE}return s.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==GC_MODES$4.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},s.prototype.run=function(){for(var a=this.renderer.texture,l=a.managedTextures,h=!1,d=0;d<l.length;d++){var v=l[d];!v.framebuffer&&this.count-v.touched>this.maxIdle&&(a.destroyTexture(v,!0),l[d]=null,h=!0)}if(h){for(var _=0,d=0;d<l.length;d++)l[d]!==null&&(l[_++]=l[d]);l.length=_}},s.prototype.unload=function(a){var l=this.renderer.texture,h=a._texture;h&&!h.framebuffer&&l.destroyTexture(h);for(var d=a.children.length-1;d>=0;d--)this.unload(a.children[d])},s.prototype.destroy=function(){this.renderer=null},s}();function mapTypeAndFormatToInternalFormat(s){var a,l,h,d,v,_,m,g,y,T,E,b,R,I,P,C,S,O,w,U,F,M,$;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?$=(a={},a[TYPES$4.UNSIGNED_BYTE]=(l={},l[FORMATS$4.RGBA]=s.RGBA8,l[FORMATS$4.RGB]=s.RGB8,l[FORMATS$4.RG]=s.RG8,l[FORMATS$4.RED]=s.R8,l[FORMATS$4.RGBA_INTEGER]=s.RGBA8UI,l[FORMATS$4.RGB_INTEGER]=s.RGB8UI,l[FORMATS$4.RG_INTEGER]=s.RG8UI,l[FORMATS$4.RED_INTEGER]=s.R8UI,l[FORMATS$4.ALPHA]=s.ALPHA,l[FORMATS$4.LUMINANCE]=s.LUMINANCE,l[FORMATS$4.LUMINANCE_ALPHA]=s.LUMINANCE_ALPHA,l),a[TYPES$4.BYTE]=(h={},h[FORMATS$4.RGBA]=s.RGBA8_SNORM,h[FORMATS$4.RGB]=s.RGB8_SNORM,h[FORMATS$4.RG]=s.RG8_SNORM,h[FORMATS$4.RED]=s.R8_SNORM,h[FORMATS$4.RGBA_INTEGER]=s.RGBA8I,h[FORMATS$4.RGB_INTEGER]=s.RGB8I,h[FORMATS$4.RG_INTEGER]=s.RG8I,h[FORMATS$4.RED_INTEGER]=s.R8I,h),a[TYPES$4.UNSIGNED_SHORT]=(d={},d[FORMATS$4.RGBA_INTEGER]=s.RGBA16UI,d[FORMATS$4.RGB_INTEGER]=s.RGB16UI,d[FORMATS$4.RG_INTEGER]=s.RG16UI,d[FORMATS$4.RED_INTEGER]=s.R16UI,d[FORMATS$4.DEPTH_COMPONENT]=s.DEPTH_COMPONENT16,d),a[TYPES$4.SHORT]=(v={},v[FORMATS$4.RGBA_INTEGER]=s.RGBA16I,v[FORMATS$4.RGB_INTEGER]=s.RGB16I,v[FORMATS$4.RG_INTEGER]=s.RG16I,v[FORMATS$4.RED_INTEGER]=s.R16I,v),a[TYPES$4.UNSIGNED_INT]=(_={},_[FORMATS$4.RGBA_INTEGER]=s.RGBA32UI,_[FORMATS$4.RGB_INTEGER]=s.RGB32UI,_[FORMATS$4.RG_INTEGER]=s.RG32UI,_[FORMATS$4.RED_INTEGER]=s.R32UI,_[FORMATS$4.DEPTH_COMPONENT]=s.DEPTH_COMPONENT24,_),a[TYPES$4.INT]=(m={},m[FORMATS$4.RGBA_INTEGER]=s.RGBA32I,m[FORMATS$4.RGB_INTEGER]=s.RGB32I,m[FORMATS$4.RG_INTEGER]=s.RG32I,m[FORMATS$4.RED_INTEGER]=s.R32I,m),a[TYPES$4.FLOAT]=(g={},g[FORMATS$4.RGBA]=s.RGBA32F,g[FORMATS$4.RGB]=s.RGB32F,g[FORMATS$4.RG]=s.RG32F,g[FORMATS$4.RED]=s.R32F,g[FORMATS$4.DEPTH_COMPONENT]=s.DEPTH_COMPONENT32F,g),a[TYPES$4.HALF_FLOAT]=(y={},y[FORMATS$4.RGBA]=s.RGBA16F,y[FORMATS$4.RGB]=s.RGB16F,y[FORMATS$4.RG]=s.RG16F,y[FORMATS$4.RED]=s.R16F,y),a[TYPES$4.UNSIGNED_SHORT_5_6_5]=(T={},T[FORMATS$4.RGB]=s.RGB565,T),a[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=(E={},E[FORMATS$4.RGBA]=s.RGBA4,E),a[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=(b={},b[FORMATS$4.RGBA]=s.RGB5_A1,b),a[TYPES$4.UNSIGNED_INT_2_10_10_10_REV]=(R={},R[FORMATS$4.RGBA]=s.RGB10_A2,R[FORMATS$4.RGBA_INTEGER]=s.RGB10_A2UI,R),a[TYPES$4.UNSIGNED_INT_10F_11F_11F_REV]=(I={},I[FORMATS$4.RGB]=s.R11F_G11F_B10F,I),a[TYPES$4.UNSIGNED_INT_5_9_9_9_REV]=(P={},P[FORMATS$4.RGB]=s.RGB9_E5,P),a[TYPES$4.UNSIGNED_INT_24_8]=(C={},C[FORMATS$4.DEPTH_STENCIL]=s.DEPTH24_STENCIL8,C),a[TYPES$4.FLOAT_32_UNSIGNED_INT_24_8_REV]=(S={},S[FORMATS$4.DEPTH_STENCIL]=s.DEPTH32F_STENCIL8,S),a):$=(O={},O[TYPES$4.UNSIGNED_BYTE]=(w={},w[FORMATS$4.RGBA]=s.RGBA,w[FORMATS$4.RGB]=s.RGB,w[FORMATS$4.ALPHA]=s.ALPHA,w[FORMATS$4.LUMINANCE]=s.LUMINANCE,w[FORMATS$4.LUMINANCE_ALPHA]=s.LUMINANCE_ALPHA,w),O[TYPES$4.UNSIGNED_SHORT_5_6_5]=(U={},U[FORMATS$4.RGB]=s.RGB,U),O[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=(F={},F[FORMATS$4.RGBA]=s.RGBA,F),O[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=(M={},M[FORMATS$4.RGBA]=s.RGBA,M),O),$}var GLTexture=function(){function s(a){this.texture=a,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES$4.UNSIGNED_BYTE,this.internalFormat=FORMATS$4.RGBA,this.samplerType=0}return s}(),TextureSystem=function(){function s(a){this.renderer=a,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}return s.prototype.contextChange=function(){var a=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(a);var l=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=l;for(var h=0;h<l;h++)this.boundTextures[h]=null;this.emptyTextures={};var d=new GLTexture(a.createTexture());a.bindTexture(a.TEXTURE_2D,d.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[a.TEXTURE_2D]=d,this.emptyTextures[a.TEXTURE_CUBE_MAP]=new GLTexture(a.createTexture()),a.bindTexture(a.TEXTURE_CUBE_MAP,this.emptyTextures[a.TEXTURE_CUBE_MAP].texture);for(var h=0;h<6;h++)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);for(var h=0;h<this.boundTextures.length;h++)this.bind(null,h)},s.prototype.bind=function(a,l){l===void 0&&(l=0);var h=this.gl;if(a=a==null?void 0:a.castToBaseTexture(),a&&a.valid&&!a.parentTextureArray){a.touched=this.renderer.textureGC.count;var d=a._glTextures[this.CONTEXT_UID]||this.initTexture(a);this.boundTextures[l]!==a&&(this.currentLocation!==l&&(this.currentLocation=l,h.activeTexture(h.TEXTURE0+l)),h.bindTexture(a.target,d.texture)),d.dirtyId!==a.dirtyId&&(this.currentLocation!==l&&(this.currentLocation=l,h.activeTexture(h.TEXTURE0+l)),this.updateTexture(a)),this.boundTextures[l]=a}else this.currentLocation!==l&&(this.currentLocation=l,h.activeTexture(h.TEXTURE0+l)),h.bindTexture(h.TEXTURE_2D,this.emptyTextures[h.TEXTURE_2D].texture),this.boundTextures[l]=null},s.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var a=0;a<this.boundTextures.length;a++)this.boundTextures[a]=this.unknownTexture},s.prototype.unbind=function(a){var l=this,h=l.gl,d=l.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var v=0;v<d.length;v++)d[v]===this.unknownTexture&&this.bind(null,v)}for(var v=0;v<d.length;v++)d[v]===a&&(this.currentLocation!==v&&(h.activeTexture(h.TEXTURE0+v),this.currentLocation=v),h.bindTexture(a.target,this.emptyTextures[a.target].texture),d[v]=null)},s.prototype.ensureSamplerType=function(a){var l=this,h=l.boundTextures,d=l.hasIntegerTextures,v=l.CONTEXT_UID;if(!!d)for(var _=a-1;_>=0;--_){var m=h[_];if(m){var g=m._glTextures[v];g.samplerType!==SAMPLER_TYPES$4.FLOAT&&this.renderer.texture.unbind(m)}}},s.prototype.initTexture=function(a){var l=new GLTexture(this.gl.createTexture());return l.dirtyId=-1,a._glTextures[this.CONTEXT_UID]=l,this.managedTextures.push(a),a.on("dispose",this.destroyTexture,this),l},s.prototype.initTextureType=function(a,l){var h,d;l.internalFormat=(d=(h=this.internalFormats[a.type])===null||h===void 0?void 0:h[a.format])!==null&&d!==void 0?d:a.format,this.webGLVersion===2&&a.type===TYPES$4.HALF_FLOAT?l.type=this.gl.HALF_FLOAT:l.type=a.type},s.prototype.updateTexture=function(a){var l=a._glTextures[this.CONTEXT_UID];if(!!l){var h=this.renderer;if(this.initTextureType(a,l),a.resource&&a.resource.upload(h,a,l))l.samplerType!==SAMPLER_TYPES$4.FLOAT&&(this.hasIntegerTextures=!0);else{var d=a.realWidth,v=a.realHeight,_=h.gl;(l.width!==d||l.height!==v||l.dirtyId<0)&&(l.width=d,l.height=v,_.texImage2D(a.target,0,l.internalFormat,d,v,0,a.format,l.type,null))}a.dirtyStyleId!==l.dirtyStyleId&&this.updateTextureStyle(a),l.dirtyId=a.dirtyId}},s.prototype.destroyTexture=function(a,l){var h=this.gl;if(a=a.castToBaseTexture(),a._glTextures[this.CONTEXT_UID]&&(this.unbind(a),h.deleteTexture(a._glTextures[this.CONTEXT_UID].texture),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.CONTEXT_UID],!l)){var d=this.managedTextures.indexOf(a);d!==-1&&removeItems(this.managedTextures,d,1)}},s.prototype.updateTextureStyle=function(a){var l=a._glTextures[this.CONTEXT_UID];!l||((a.mipmap===MIPMAP_MODES$4.POW2||this.webGLVersion!==2)&&!a.isPowerOfTwo?l.mipmap=!1:l.mipmap=a.mipmap>=1,this.webGLVersion!==2&&!a.isPowerOfTwo?l.wrapMode=WRAP_MODES$4.CLAMP:l.wrapMode=a.wrapMode,a.resource&&a.resource.style(this.renderer,a,l)||this.setStyle(a,l),l.dirtyStyleId=a.dirtyStyleId)},s.prototype.setStyle=function(a,l){var h=this.gl;if(l.mipmap&&a.mipmap!==MIPMAP_MODES$4.ON_MANUAL&&h.generateMipmap(a.target),h.texParameteri(a.target,h.TEXTURE_WRAP_S,l.wrapMode),h.texParameteri(a.target,h.TEXTURE_WRAP_T,l.wrapMode),l.mipmap){h.texParameteri(a.target,h.TEXTURE_MIN_FILTER,a.scaleMode===SCALE_MODES$4.LINEAR?h.LINEAR_MIPMAP_LINEAR:h.NEAREST_MIPMAP_NEAREST);var d=this.renderer.context.extensions.anisotropicFiltering;if(d&&a.anisotropicLevel>0&&a.scaleMode===SCALE_MODES$4.LINEAR){var v=Math.min(a.anisotropicLevel,h.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT));h.texParameterf(a.target,d.TEXTURE_MAX_ANISOTROPY_EXT,v)}}else h.texParameteri(a.target,h.TEXTURE_MIN_FILTER,a.scaleMode===SCALE_MODES$4.LINEAR?h.LINEAR:h.NEAREST);h.texParameteri(a.target,h.TEXTURE_MAG_FILTER,a.scaleMode===SCALE_MODES$4.LINEAR?h.LINEAR:h.NEAREST)},s.prototype.destroy=function(){this.renderer=null},s}(),_systems={__proto__:null,FilterSystem,BatchSystem,ContextSystem,FramebufferSystem,GeometrySystem,MaskSystem,ScissorSystem,StencilSystem,ProjectionSystem,RenderTextureSystem,ShaderSystem,StateSystem,TextureGCSystem,TextureSystem},tempMatrix=new Matrix,AbstractRenderer=function(s){__extends$i(a,s);function a(l,h){l===void 0&&(l=RENDERER_TYPE$4.UNKNOWN);var d=s.call(this)||this;return h=Object.assign({},settings$1.RENDER_OPTIONS,h),d.options=h,d.type=l,d.screen=new Rectangle(0,0,h.width,h.height),d.view=h.view||document.createElement("canvas"),d.resolution=h.resolution||settings$1.RESOLUTION,d.useContextAlpha=h.useContextAlpha,d.autoDensity=!!h.autoDensity,d.preserveDrawingBuffer=h.preserveDrawingBuffer,d.clearBeforeRender=h.clearBeforeRender,d._backgroundColor=0,d._backgroundColorRgba=[0,0,0,1],d._backgroundColorString="#000000",d.backgroundColor=h.backgroundColor||d._backgroundColor,d.backgroundAlpha=h.backgroundAlpha,h.transparent!==void 0&&(deprecation("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),d.useContextAlpha=h.transparent,d.backgroundAlpha=h.transparent?0:1),d._lastObjectRendered=null,d.plugins={},d}return a.prototype.initPlugins=function(l){for(var h in l)this.plugins[h]=new l[h](this)},Object.defineProperty(a.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),a.prototype.resize=function(l,h){this.view.width=Math.round(l*this.resolution),this.view.height=Math.round(h*this.resolution);var d=this.view.width/this.resolution,v=this.view.height/this.resolution;this.screen.width=d,this.screen.height=v,this.autoDensity&&(this.view.style.width=d+"px",this.view.style.height=v+"px"),this.emit("resize",d,v)},a.prototype.generateTexture=function(l,h,d,v){h===void 0&&(h={}),typeof h=="number"&&(deprecation("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),h={scaleMode:h,resolution:d,region:v});var _=h.region,m=__rest(h,["region"]);v=_||l.getLocalBounds(null,!0),v.width===0&&(v.width=1),v.height===0&&(v.height=1);var g=RenderTexture.create(__assign$1({width:v.width,height:v.height},m));return tempMatrix.tx=-v.x,tempMatrix.ty=-v.y,this.render(l,{renderTexture:g,clear:!1,transform:tempMatrix,skipUpdateTransform:!!l.parent}),g},a.prototype.destroy=function(l){for(var h in this.plugins)this.plugins[h].destroy(),this.plugins[h]=null;l&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var d=this;d.plugins=null,d.type=RENDERER_TYPE$4.UNKNOWN,d.view=null,d.screen=null,d._tempDisplayObjectParent=null,d.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(a.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(l){this._backgroundColor=l,this._backgroundColorString=hex2string(l),hex2rgb(l,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(l){this._backgroundColorRgba[3]=l},enumerable:!1,configurable:!0}),a}(EventEmitter),GLBuffer=function(){function s(a){this.buffer=a||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return s}(),BufferSystem=function(){function s(a){this.renderer=a,this.managedBuffers={},this.boundBufferBases={}}return s.prototype.destroy=function(){this.renderer=null},s.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},s.prototype.bind=function(a){var l=this,h=l.gl,d=l.CONTEXT_UID,v=a._glBuffers[d]||this.createGLBuffer(a);h.bindBuffer(a.type,v.buffer)},s.prototype.bindBufferBase=function(a,l){var h=this,d=h.gl,v=h.CONTEXT_UID;if(this.boundBufferBases[l]!==a){var _=a._glBuffers[v]||this.createGLBuffer(a);this.boundBufferBases[l]=a,d.bindBufferBase(d.UNIFORM_BUFFER,l,_.buffer)}},s.prototype.bindBufferRange=function(a,l,h){var d=this,v=d.gl,_=d.CONTEXT_UID;h=h||0;var m=a._glBuffers[_]||this.createGLBuffer(a);v.bindBufferRange(v.UNIFORM_BUFFER,l||0,m.buffer,h*256,256)},s.prototype.update=function(a){var l=this,h=l.gl,d=l.CONTEXT_UID,v=a._glBuffers[d];if(a._updateID!==v.updateID)if(v.updateID=a._updateID,h.bindBuffer(a.type,v.buffer),v.byteLength>=a.data.byteLength)h.bufferSubData(a.type,0,a.data);else{var _=a.static?h.STATIC_DRAW:h.DYNAMIC_DRAW;v.byteLength=a.data.byteLength,h.bufferData(a.type,a.data,_)}},s.prototype.dispose=function(a,l){if(!!this.managedBuffers[a.id]){delete this.managedBuffers[a.id];var h=a._glBuffers[this.CONTEXT_UID],d=this.gl;a.disposeRunner.remove(this),h&&(l||d.deleteBuffer(h.buffer),delete a._glBuffers[this.CONTEXT_UID])}},s.prototype.disposeAll=function(a){for(var l=Object.keys(this.managedBuffers),h=0;h<l.length;h++)this.dispose(this.managedBuffers[l[h]],a)},s.prototype.createGLBuffer=function(a){var l=this,h=l.CONTEXT_UID,d=l.gl;return a._glBuffers[h]=new GLBuffer(d.createBuffer()),this.managedBuffers[a.id]=a,a.disposeRunner.add(this),a._glBuffers[h]},s}(),Renderer=function(s){__extends$i(a,s);function a(l){var h=s.call(this,RENDERER_TYPE$4.WEBGL,l)||this;return l=h.options,h.gl=null,h.CONTEXT_UID=0,h.runners={destroy:new Runner("destroy"),contextChange:new Runner("contextChange"),reset:new Runner("reset"),update:new Runner("update"),postrender:new Runner("postrender"),prerender:new Runner("prerender"),resize:new Runner("resize")},h.runners.contextChange.add(h),h.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0),h.addSystem(MaskSystem,"mask").addSystem(ContextSystem,"context").addSystem(StateSystem,"state").addSystem(ShaderSystem,"shader").addSystem(TextureSystem,"texture").addSystem(BufferSystem,"buffer").addSystem(GeometrySystem,"geometry").addSystem(FramebufferSystem,"framebuffer").addSystem(ScissorSystem,"scissor").addSystem(StencilSystem,"stencil").addSystem(ProjectionSystem,"projection").addSystem(TextureGCSystem,"textureGC").addSystem(FilterSystem,"filter").addSystem(RenderTextureSystem,"renderTexture").addSystem(BatchSystem,"batch"),h.initPlugins(a.__plugins),h.multisample=void 0,l.context?h.context.initFromContext(l.context):h.context.initFromOptions({alpha:!!h.useContextAlpha,antialias:l.antialias,premultipliedAlpha:h.useContextAlpha&&h.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:l.preserveDrawingBuffer,powerPreference:h.options.powerPreference}),h.renderingToScreen=!0,sayHello(h.context.webGLVersion===2?"WebGL 2":"WebGL 1"),h.resize(h.options.width,h.options.height),h}return a.create=function(l){if(isWebGLSupported())return new a(l);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},a.prototype.contextChange=function(){var l=this.gl,h;if(this.context.webGLVersion===1){var d=l.getParameter(l.FRAMEBUFFER_BINDING);l.bindFramebuffer(l.FRAMEBUFFER,null),h=l.getParameter(l.SAMPLES),l.bindFramebuffer(l.FRAMEBUFFER,d)}else{var d=l.getParameter(l.DRAW_FRAMEBUFFER_BINDING);l.bindFramebuffer(l.DRAW_FRAMEBUFFER,null),h=l.getParameter(l.SAMPLES),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,d)}h>=MSAA_QUALITY$4.HIGH?this.multisample=MSAA_QUALITY$4.HIGH:h>=MSAA_QUALITY$4.MEDIUM?this.multisample=MSAA_QUALITY$4.MEDIUM:h>=MSAA_QUALITY$4.LOW?this.multisample=MSAA_QUALITY$4.LOW:this.multisample=MSAA_QUALITY$4.NONE},a.prototype.addSystem=function(l,h){var d=new l(this);if(this[h])throw new Error('Whoops! The name "'+h+'" is already in use');this[h]=d;for(var v in this.runners)this.runners[v].add(d);return this},a.prototype.render=function(l,h){var d,v,_,m;if(h&&(h instanceof RenderTexture?(deprecation("6.0.0","Renderer#render arguments changed, use options instead."),d=h,v=arguments[2],_=arguments[3],m=arguments[4]):(d=h.renderTexture,v=h.clear,_=h.transform,m=h.skipUpdateTransform)),this.renderingToScreen=!d,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=_,!this.context.isLost){if(d||(this._lastObjectRendered=l),!m){var g=l.enableTempParent();l.updateTransform(),l.disableTempParent(g)}this.renderTexture.bind(d),this.batch.currentRenderer.start(),(v!==void 0?v:this.clearBeforeRender)&&this.renderTexture.clear(),l.render(this),this.batch.currentRenderer.flush(),d&&d.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},a.prototype.generateTexture=function(l,h,d,v){h===void 0&&(h={});var _=s.prototype.generateTexture.call(this,l,h,d,v);return this.framebuffer.blit(),_},a.prototype.resize=function(l,h){s.prototype.resize.call(this,l,h),this.runners.resize.emit(this.screen.height,this.screen.width)},a.prototype.reset=function(){return this.runners.reset.emit(),this},a.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},a.prototype.destroy=function(l){this.runners.destroy.emit();for(var h in this.runners)this.runners[h].destroy();s.prototype.destroy.call(this,l),this.gl=null},Object.defineProperty(a.prototype,"extract",{get:function(){return deprecation("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),a.registerPlugin=function(l,h){a.__plugins=a.__plugins||{},a.__plugins[l]=h},a}(AbstractRenderer);function autoDetectRenderer(s){return Renderer.create(s)}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultVertex$1=$defaultVertex,defaultFilterVertex=$defaultFilterVertex,System$1=function(){function s(a){deprecation("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=a}return s.prototype.destroy=function(){this.renderer=null},s}(),BatchDrawCall=function(){function s(){this.texArray=null,this.blend=0,this.type=DRAW_MODES$4.TRIANGLES,this.start=0,this.size=0,this.data=null}return s}(),BatchTextureArray=function(){function s(){this.elements=[],this.ids=[],this.count=0}return s.prototype.clear=function(){for(var a=0;a<this.count;a++)this.elements[a]=null;this.count=0},s}(),ViewableBuffer=function(){function s(a){typeof a=="number"?this.rawBinaryData=new ArrayBuffer(a):a instanceof Uint8Array?this.rawBinaryData=a.buffer:this.rawBinaryData=a,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(s.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),s.prototype.view=function(a){return this[a+"View"]},s.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},s.sizeOf=function(a){switch(a){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(a+" isn't a valid view type")}},s}(),AbstractBatchRenderer=function(s){__extends$i(a,s);function a(l){var h=s.call(this,l)||this;return h.shaderGenerator=null,h.geometryClass=null,h.vertexSize=null,h.state=State$1.for2d(),h.size=settings$1.SPRITE_BATCH_SIZE*4,h._vertexCount=0,h._indexCount=0,h._bufferedElements=[],h._bufferedTextures=[],h._bufferSize=0,h._shader=null,h._packedGeometries=[],h._packedGeometryPoolSize=2,h._flushId=0,h._aBuffers={},h._iBuffers={},h.MAX_TEXTURES=1,h.renderer.on("prerender",h.onPrerender,h),l.runners.contextChange.add(h),h._dcIndex=0,h._aIndex=0,h._iIndex=0,h._attributeBuffer=null,h._indexBuffer=null,h._tempBoundTextures=[],h}return a.prototype.contextChange=function(){var l=this.renderer.gl;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS),settings$1.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,l)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var h=0;h<this._packedGeometryPoolSize;h++)this._packedGeometries[h]=new this.geometryClass;this.initFlushBuffers()},a.prototype.initFlushBuffers=function(){for(var l=a._drawCallPool,h=a._textureArrayPool,d=this.size/4,v=Math.floor(d/this.MAX_TEXTURES)+1;l.length<d;)l.push(new BatchDrawCall);for(;h.length<v;)h.push(new BatchTextureArray);for(var _=0;_<this.MAX_TEXTURES;_++)this._tempBoundTextures[_]=null},a.prototype.onPrerender=function(){this._flushId=0},a.prototype.render=function(l){!l._texture.valid||(this._vertexCount+l.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=l.vertexData.length/2,this._indexCount+=l.indices.length,this._bufferedTextures[this._bufferSize]=l._texture.baseTexture,this._bufferedElements[this._bufferSize++]=l)},a.prototype.buildTexturesAndDrawCalls=function(){var l=this,h=l._bufferedTextures,d=l.MAX_TEXTURES,v=a._textureArrayPool,_=this.renderer.batch,m=this._tempBoundTextures,g=this.renderer.textureGC.count,y=++BaseTexture._globalBatch,T=0,E=v[0],b=0;_.copyBoundTextures(m,d);for(var R=0;R<this._bufferSize;++R){var I=h[R];h[R]=null,I._batchEnabled!==y&&(E.count>=d&&(_.boundArray(E,m,y,d),this.buildDrawCalls(E,b,R),b=R,E=v[++T],++y),I._batchEnabled=y,I.touched=g,E.elements[E.count++]=I)}E.count>0&&(_.boundArray(E,m,y,d),this.buildDrawCalls(E,b,this._bufferSize),++T,++y);for(var R=0;R<m.length;R++)m[R]=null;BaseTexture._globalBatch=y},a.prototype.buildDrawCalls=function(l,h,d){var v=this,_=v._bufferedElements,m=v._attributeBuffer,g=v._indexBuffer,y=v.vertexSize,T=a._drawCallPool,E=this._dcIndex,b=this._aIndex,R=this._iIndex,I=T[E];I.start=this._iIndex,I.texArray=l;for(var P=h;P<d;++P){var C=_[P],S=C._texture.baseTexture,O=premultiplyBlendMode[S.alphaMode?1:0][C.blendMode];_[P]=null,h<P&&I.blend!==O&&(I.size=R-I.start,h=P,I=T[++E],I.texArray=l,I.start=R),this.packInterleavedGeometry(C,m,g,b,R),b+=C.vertexData.length/2*y,R+=C.indices.length,I.blend=O}h<d&&(I.size=R-I.start,++E),this._dcIndex=E,this._aIndex=b,this._iIndex=R},a.prototype.bindAndClearTexArray=function(l){for(var h=this.renderer.texture,d=0;d<l.count;d++)h.bind(l.elements[d],l.ids[d]),l.elements[d]=null;l.count=0},a.prototype.updateGeometry=function(){var l=this,h=l._packedGeometries,d=l._attributeBuffer,v=l._indexBuffer;settings$1.CAN_UPLOAD_SAME_BUFFER?(h[this._flushId]._buffer.update(d.rawBinaryData),h[this._flushId]._indexBuffer.update(v),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,h[this._flushId]=new this.geometryClass),h[this._flushId]._buffer.update(d.rawBinaryData),h[this._flushId]._indexBuffer.update(v),this.renderer.geometry.bind(h[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},a.prototype.drawBatches=function(){for(var l=this._dcIndex,h=this.renderer,d=h.gl,v=h.state,_=a._drawCallPool,m=null,g=0;g<l;g++){var y=_[g],T=y.texArray,E=y.type,b=y.size,R=y.start,I=y.blend;m!==T&&(m=T,this.bindAndClearTexArray(T)),this.state.blendMode=I,v.set(this.state),d.drawElements(E,b,d.UNSIGNED_SHORT,R*2)}},a.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},a.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),settings$1.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},a.prototype.stop=function(){this.flush()},a.prototype.destroy=function(){for(var l=0;l<this._packedGeometryPoolSize;l++)this._packedGeometries[l]&&this._packedGeometries[l].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),s.prototype.destroy.call(this)},a.prototype.getAttributeBuffer=function(l){var h=nextPow2(Math.ceil(l/8)),d=log2(h),v=h*8;this._aBuffers.length<=d&&(this._iBuffers.length=d+1);var _=this._aBuffers[v];return _||(this._aBuffers[v]=_=new ViewableBuffer(v*this.vertexSize*4)),_},a.prototype.getIndexBuffer=function(l){var h=nextPow2(Math.ceil(l/12)),d=log2(h),v=h*12;this._iBuffers.length<=d&&(this._iBuffers.length=d+1);var _=this._iBuffers[d];return _||(this._iBuffers[d]=_=new Uint16Array(v)),_},a.prototype.packInterleavedGeometry=function(l,h,d,v,_){for(var m=h.uint32View,g=h.float32View,y=v/this.vertexSize,T=l.uvs,E=l.indices,b=l.vertexData,R=l._texture.baseTexture._batchLocation,I=Math.min(l.worldAlpha,1),P=I<1&&l._texture.baseTexture.alphaMode?premultiplyTint(l._tintRGB,I):l._tintRGB+(I*255<<24),C=0;C<b.length;C+=2)g[v++]=b[C],g[v++]=b[C+1],g[v++]=T[C],g[v++]=T[C+1],m[v++]=P,g[v++]=R;for(var C=0;C<E.length;C++)d[_++]=y+E[C]},a._drawCallPool=[],a._textureArrayPool=[],a}(ObjectRenderer),BatchShaderGenerator=function(){function s(a,l){if(this.vertexSrc=a,this.fragTemplate=l,this.programCache={},this.defaultGroupCache={},l.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(l.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return s.prototype.generateShader=function(a){if(!this.programCache[a]){for(var l=new Int32Array(a),h=0;h<a;h++)l[h]=h;this.defaultGroupCache[a]=UniformGroup.from({uSamplers:l},!0);var d=this.fragTemplate;d=d.replace(/%count%/gi,""+a),d=d.replace(/%forloop%/gi,this.generateSampleSrc(a)),this.programCache[a]=new Program(this.vertexSrc,d)}var v={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[a]};return new Shader(this.programCache[a],v)},s.prototype.generateSampleSrc=function(a){var l="";l+=`
`,l+=`
`;for(var h=0;h<a;h++)h>0&&(l+=`
else `),h<a-1&&(l+="if(vTextureId < "+h+".5)"),l+=`
{`,l+=`
	color = texture2D(uSamplers[`+h+"], vTextureCoord);",l+=`
}`;return l+=`
`,l+=`
`,l},s}(),BatchGeometry=function(s){__extends$i(a,s);function a(l){l===void 0&&(l=!1);var h=s.call(this)||this;return h._buffer=new Buffer(null,l,!1),h._indexBuffer=new Buffer(null,l,!0),h.addAttribute("aVertexPosition",h._buffer,2,!1,TYPES$4.FLOAT).addAttribute("aTextureCoord",h._buffer,2,!1,TYPES$4.FLOAT).addAttribute("aColor",h._buffer,4,!0,TYPES$4.UNSIGNED_BYTE).addAttribute("aTextureId",h._buffer,1,!0,TYPES$4.FLOAT).addIndex(h._indexBuffer),h}return a}(Geometry),defaultVertex=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,defaultFragment=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,BatchPluginFactory=function(){function s(){}return s.create=function(a){var l=Object.assign({vertex:defaultVertex,fragment:defaultFragment,geometryClass:BatchGeometry,vertexSize:6},a),h=l.vertex,d=l.fragment,v=l.vertexSize,_=l.geometryClass;return function(m){__extends$i(g,m);function g(y){var T=m.call(this,y)||this;return T.shaderGenerator=new BatchShaderGenerator(h,d),T.geometryClass=_,T.vertexSize=v,T}return g}(AbstractBatchRenderer)},Object.defineProperty(s,"defaultVertexSrc",{get:function(){return defaultVertex},enumerable:!1,configurable:!0}),Object.defineProperty(s,"defaultFragmentTemplate",{get:function(){return defaultFragment},enumerable:!1,configurable:!0}),s}(),BatchRenderer=BatchPluginFactory.create(),resources={},_loop_1=function(s){Object.defineProperty(resources,s,{get:function(){return deprecation("6.0.0","PIXI.systems."+s+" has moved to PIXI."+s),_resources[s]}})};for(var name in _resources)_loop_1(name);var systems={},_loop_2=function(s){Object.defineProperty(systems,s,{get:function(){return deprecation("6.0.0","PIXI.resources."+s+" has moved to PIXI."+s),_systems[s]}})};for(var name in _systems)_loop_2(name);/*!
 * @pixi/app - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Application=function(){function s(a){var l=this;this.stage=new Container$1,a=Object.assign({forceCanvas:!1},a),this.renderer=autoDetectRenderer(a),s._plugins.forEach(function(h){h.init.call(l,a)})}return s.registerPlugin=function(a){s._plugins.push(a)},s.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(s.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),s.prototype.destroy=function(a,l){var h=this,d=s._plugins.slice(0);d.reverse(),d.forEach(function(v){v.destroy.call(h)}),this.stage.destroy(l),this.stage=null,this.renderer.destroy(a),this.renderer=null},s._plugins=[],s}(),ResizePlugin=function(){function s(){}return s.init=function(a){var l=this;Object.defineProperty(this,"resizeTo",{set:function(h){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=h,h&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!l._resizeTo||(l.cancelResize(),l._resizeId=requestAnimationFrame(function(){return l.resize()}))},this.cancelResize=function(){l._resizeId&&(cancelAnimationFrame(l._resizeId),l._resizeId=null)},this.resize=function(){if(!!l._resizeTo){l.cancelResize();var h,d;if(l._resizeTo===globalThis.window)h=globalThis.innerWidth,d=globalThis.innerHeight;else{var v=l._resizeTo,_=v.clientWidth,m=v.clientHeight;h=_,d=m}l.renderer.resize(h,d)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=a.resizeTo||null},s.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},s}();Application.registerPlugin(ResizePlugin);/*!
 * @pixi/extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(s){return typeof s!="undefined"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream=="undefined"};function createMatch(s){return function(a){return a.test(s)}}function isMobile$1(s){var a={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator!="undefined"?a={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?a.userAgent=s:s&&s.userAgent&&(a={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var l=a.userAgent,h=l.split("[FBAN");typeof h[1]!="undefined"&&(l=h[0]),h=l.split("Twitter"),typeof h[1]!="undefined"&&(l=h[0]);var d=createMatch(l),v={apple:{phone:d(appleIphone)&&!d(windowsPhone),ipod:d(appleIpod),tablet:!d(appleIphone)&&(d(appleTablet)||isAppleTabletOnIos13(a))&&!d(windowsPhone),universal:d(appleUniversal),device:(d(appleIphone)||d(appleIpod)||d(appleTablet)||d(appleUniversal)||isAppleTabletOnIos13(a))&&!d(windowsPhone)},amazon:{phone:d(amazonPhone),tablet:!d(amazonPhone)&&d(amazonTablet),device:d(amazonPhone)||d(amazonTablet)},android:{phone:!d(windowsPhone)&&d(amazonPhone)||!d(windowsPhone)&&d(androidPhone),tablet:!d(windowsPhone)&&!d(amazonPhone)&&!d(androidPhone)&&(d(amazonTablet)||d(androidTablet)),device:!d(windowsPhone)&&(d(amazonPhone)||d(amazonTablet)||d(androidPhone)||d(androidTablet))||d(/\bokhttp\b/i)},windows:{phone:d(windowsPhone),tablet:d(windowsTablet),device:d(windowsPhone)||d(windowsTablet)},other:{blackberry:d(otherBlackBerry),blackberry10:d(otherBlackBerry10),opera:d(otherOpera),firefox:d(otherFirefox),chrome:d(otherChrome),device:d(otherBlackBerry)||d(otherBlackBerry10)||d(otherOpera)||d(otherFirefox)||d(otherChrome)},any:!1,phone:!1,tablet:!1};return v.any=v.apple.device||v.android.device||v.windows.device||v.other.device,v.phone=v.apple.phone||v.android.phone||v.windows.phone,v.tablet=v.apple.tablet||v.android.tablet||v.windows.tablet,v}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var isMobile=isMobile$1(globalThis.navigator);function maxRecommendedTextures(s){var a=!0;if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){var l=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(l){var h=parseInt(l[1],10);h<11&&(a=!1)}}if(isMobile.android.device){var l=navigator.userAgent.match(/Android\s([0-9.]*)/);if(l){var h=parseInt(l[1],10);h<7&&(a=!1)}}}return a?s:4}function canUploadSameBuffer(){return!isMobile.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$1$1;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$1$1||(ENV$1$1={}));var RENDERER_TYPE$1$1;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$1$1||(RENDERER_TYPE$1$1={}));var BUFFER_BITS$1$1;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$1$1||(BUFFER_BITS$1$1={}));var BLEND_MODES$1$1;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$1$1||(BLEND_MODES$1$1={}));var DRAW_MODES$1$1;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$1$1||(DRAW_MODES$1$1={}));var FORMATS$1$1;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$1$1||(FORMATS$1$1={}));var TARGETS$1$1;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$1$1||(TARGETS$1$1={}));var TYPES$1$1;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$1$1||(TYPES$1$1={}));var SAMPLER_TYPES$1$1;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$1$1||(SAMPLER_TYPES$1$1={}));var SCALE_MODES$1$1;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$1$1||(SCALE_MODES$1$1={}));var WRAP_MODES$1$1;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$1$1||(WRAP_MODES$1$1={}));var MIPMAP_MODES$1$1;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$1$1||(MIPMAP_MODES$1$1={}));var ALPHA_MODES$1$1;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$1$1||(ALPHA_MODES$1$1={}));var CLEAR_MODES$1$1;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$1$1||(CLEAR_MODES$1$1={}));var GC_MODES$1$1;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$1$1||(GC_MODES$1$1={}));var PRECISION$1$1;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$1$1||(PRECISION$1$1={}));var MASK_TYPES$1$1;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE"})(MASK_TYPES$1$1||(MASK_TYPES$1$1={}));var MSAA_QUALITY$1$1;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$1$1||(MSAA_QUALITY$1$1={}));var BUFFER_TYPE$1$1;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$1$1||(BUFFER_TYPE$1$1={}));var settings={MIPMAP_TEXTURES:MIPMAP_MODES$1$1.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$1$1.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$1$1.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$1$1.CLAMP,SCALE_MODE:SCALE_MODES$1$1.LINEAR,PRECISION_VERTEX:PRECISION$1$1.HIGH,PRECISION_FRAGMENT:isMobile.apple.device?PRECISION$1$1.HIGH:PRECISION$1$1.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.SORTABLE_CHILDREN=!1;var Bounds$1=function(){function s(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return s.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},s.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},s.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(a=a||new Rectangle(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},s.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},s.prototype.addPointMatrix=function(a,l){var h=a.a,d=a.b,v=a.c,_=a.d,m=a.tx,g=a.ty,y=h*l.x+v*l.y+m,T=d*l.x+_*l.y+g;this.minX=Math.min(this.minX,y),this.maxX=Math.max(this.maxX,y),this.minY=Math.min(this.minY,T),this.maxY=Math.max(this.maxY,T)},s.prototype.addQuad=function(a){var l=this.minX,h=this.minY,d=this.maxX,v=this.maxY,_=a[0],m=a[1];l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,_=a[2],m=a[3],l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,_=a[4],m=a[5],l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,_=a[6],m=a[7],l=_<l?_:l,h=m<h?m:h,d=_>d?_:d,v=m>v?m:v,this.minX=l,this.minY=h,this.maxX=d,this.maxY=v},s.prototype.addFrame=function(a,l,h,d,v){this.addFrameMatrix(a.worldTransform,l,h,d,v)},s.prototype.addFrameMatrix=function(a,l,h,d,v){var _=a.a,m=a.b,g=a.c,y=a.d,T=a.tx,E=a.ty,b=this.minX,R=this.minY,I=this.maxX,P=this.maxY,C=_*l+g*h+T,S=m*l+y*h+E;b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,C=_*d+g*h+T,S=m*d+y*h+E,b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,C=_*l+g*v+T,S=m*l+y*v+E,b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,C=_*d+g*v+T,S=m*d+y*v+E,b=C<b?C:b,R=S<R?S:R,I=C>I?C:I,P=S>P?S:P,this.minX=b,this.minY=R,this.maxX=I,this.maxY=P},s.prototype.addVertexData=function(a,l,h){for(var d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=l;g<h;g+=2){var y=a[g],T=a[g+1];d=y<d?y:d,v=T<v?T:v,_=y>_?y:_,m=T>m?T:m}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},s.prototype.addVertices=function(a,l,h,d){this.addVerticesMatrix(a.worldTransform,l,h,d)},s.prototype.addVerticesMatrix=function(a,l,h,d,v,_){v===void 0&&(v=0),_===void 0&&(_=v);for(var m=a.a,g=a.b,y=a.c,T=a.d,E=a.tx,b=a.ty,R=this.minX,I=this.minY,P=this.maxX,C=this.maxY,S=h;S<d;S+=2){var O=l[S],w=l[S+1],U=m*O+y*w+E,F=T*w+g*O+b;R=Math.min(R,U-v),P=Math.max(P,U+v),I=Math.min(I,F-_),C=Math.max(C,F+_)}this.minX=R,this.minY=I,this.maxX=P,this.maxY=C},s.prototype.addBounds=function(a){var l=this.minX,h=this.minY,d=this.maxX,v=this.maxY;this.minX=a.minX<l?a.minX:l,this.minY=a.minY<h?a.minY:h,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>v?a.maxY:v},s.prototype.addBoundsMask=function(a,l){var h=a.minX>l.minX?a.minX:l.minX,d=a.minY>l.minY?a.minY:l.minY,v=a.maxX<l.maxX?a.maxX:l.maxX,_=a.maxY<l.maxY?a.maxY:l.maxY;if(h<=v&&d<=_){var m=this.minX,g=this.minY,y=this.maxX,T=this.maxY;this.minX=h<m?h:m,this.minY=d<g?d:g,this.maxX=v>y?v:y,this.maxY=_>T?_:T}},s.prototype.addBoundsMatrix=function(a,l){this.addFrameMatrix(l,a.minX,a.minY,a.maxX,a.maxY)},s.prototype.addBoundsArea=function(a,l){var h=a.minX>l.x?a.minX:l.x,d=a.minY>l.y?a.minY:l.y,v=a.maxX<l.x+l.width?a.maxX:l.x+l.width,_=a.maxY<l.y+l.height?a.maxY:l.y+l.height;if(h<=v&&d<=_){var m=this.minX,g=this.minY,y=this.maxX,T=this.maxY;this.minX=h<m?h:m,this.minY=d<g?d:g,this.maxX=v>y?v:y,this.maxY=_>T?_:T}},s.prototype.pad=function(a,l){a===void 0&&(a=0),l===void 0&&(l=a),this.isEmpty()||(this.minX-=a,this.maxX+=a,this.minY-=l,this.maxY+=l)},s.prototype.addFramePad=function(a,l,h,d,v,_){a-=v,l-=_,h+=v,d+=_,this.minX=this.minX<a?this.minX:a,this.maxX=this.maxX>h?this.maxX:h,this.minY=this.minY<l?this.minY:l,this.maxY=this.maxY>d?this.maxY:d},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$h=function(s,a){return extendStatics$h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$h(s,a)};function __extends$h(s,a){extendStatics$h(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var DisplayObject=function(s){__extends$h(a,s);function a(){var l=s.call(this)||this;return l.tempDisplayObjectParent=null,l.transform=new Transform,l.alpha=1,l.visible=!0,l.renderable=!0,l.cullable=!1,l.cullArea=null,l.parent=null,l.worldAlpha=1,l._lastSortedIndex=0,l._zIndex=0,l.filterArea=null,l.filters=null,l._enabledFilters=null,l._bounds=new Bounds$1,l._localBounds=null,l._boundsID=0,l._boundsRect=null,l._localBoundsRect=null,l._mask=null,l._maskRefCount=0,l._destroyed=!1,l.isSprite=!1,l.isMask=!1,l}return a.mixin=function(l){for(var h=Object.keys(l),d=0;d<h.length;++d){var v=h[d];Object.defineProperty(a.prototype,v,Object.getOwnPropertyDescriptor(l,v))}},Object.defineProperty(a.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),a.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},a.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},a.prototype.getBounds=function(l,h){return l||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),h||(this._boundsRect||(this._boundsRect=new Rectangle),h=this._boundsRect),this._bounds.getRectangle(h)},a.prototype.getLocalBounds=function(l){l||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),l=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds$1);var h=this.transform,d=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var v=this._bounds,_=this._boundsID;this._bounds=this._localBounds;var m=this.getBounds(!1,l);return this.parent=d,this.transform=h,this._bounds=v,this._bounds.updateID+=this._boundsID-_,m},a.prototype.toGlobal=function(l,h,d){return d===void 0&&(d=!1),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(l,h)},a.prototype.toLocal=function(l,h,d,v){return h&&(l=h.toGlobal(l,d,v)),v||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(l,d)},a.prototype.setParent=function(l){if(!l||!l.addChild)throw new Error("setParent: Argument must be a Container");return l.addChild(this),l},a.prototype.setTransform=function(l,h,d,v,_,m,g,y,T){return l===void 0&&(l=0),h===void 0&&(h=0),d===void 0&&(d=1),v===void 0&&(v=1),_===void 0&&(_=0),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=0),this.position.x=l,this.position.y=h,this.scale.x=d||1,this.scale.y=v||1,this.rotation=_,this.skew.x=m,this.skew.y=g,this.pivot.x=y,this.pivot.y=T,this},a.prototype.destroy=function(l){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(a.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),a.prototype.enableTempParent=function(){var l=this.parent;return this.parent=this._tempDisplayObjectParent,l},a.prototype.disableTempParent=function(l){this.parent=l},Object.defineProperty(a.prototype,"x",{get:function(){return this.position.x},set:function(l){this.transform.position.x=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.position.y},set:function(l){this.transform.position.y=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this.transform.position},set:function(l){this.transform.position.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this.transform.scale},set:function(l){this.transform.scale.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(l){this.transform.pivot.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"skew",{get:function(){return this.transform.skew},set:function(l){this.transform.skew.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(l){this.transform.rotation=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.transform.rotation*RAD_TO_DEG},set:function(l){this.transform.rotation=l*DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"zIndex",{get:function(){return this._zIndex},set:function(l){this._zIndex=l,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"worldVisible",{get:function(){var l=this;do{if(!l.visible)return!1;l=l.parent}while(l);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mask",{get:function(){return this._mask},set:function(l){if(this._mask!==l){if(this._mask){var h=this._mask.maskObject||this._mask;h._maskRefCount--,h._maskRefCount===0&&(h.renderable=!0,h.isMask=!1)}if(this._mask=l,this._mask){var h=this._mask.maskObject||this._mask;h._maskRefCount===0&&(h.renderable=!1,h.isMask=!0),h._maskRefCount++}}},enumerable:!1,configurable:!0}),a}(EventEmitter),TemporaryDisplayObject=function(s){__extends$h(a,s);function a(){var l=s!==null&&s.apply(this,arguments)||this;return l.sortDirty=null,l}return a}(DisplayObject);DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$2;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$2||(ENV$2={}));var RENDERER_TYPE$2;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$2||(RENDERER_TYPE$2={}));var BUFFER_BITS$2;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$2||(BUFFER_BITS$2={}));var BLEND_MODES$2;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$2||(BLEND_MODES$2={}));var DRAW_MODES$2;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$2||(DRAW_MODES$2={}));var FORMATS$2;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$2||(FORMATS$2={}));var TARGETS$2;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$2||(TARGETS$2={}));var TYPES$2;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$2||(TYPES$2={}));var SAMPLER_TYPES$2;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$2||(SAMPLER_TYPES$2={}));var SCALE_MODES$2;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$2||(SCALE_MODES$2={}));var WRAP_MODES$2;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$2||(WRAP_MODES$2={}));var MIPMAP_MODES$2;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$2||(MIPMAP_MODES$2={}));var ALPHA_MODES$2;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$2||(ALPHA_MODES$2={}));var CLEAR_MODES$2;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$2||(CLEAR_MODES$2={}));var GC_MODES$2;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$2||(GC_MODES$2={}));var PRECISION$2;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$2||(PRECISION$2={}));var MASK_TYPES$2;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE"})(MASK_TYPES$2||(MASK_TYPES$2={}));var MSAA_QUALITY$2;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$2||(MSAA_QUALITY$2={}));var BUFFER_TYPE$2;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$2||(BUFFER_TYPE$2={}));function sortChildren(s,a){return s.zIndex===a.zIndex?s._lastSortedIndex-a._lastSortedIndex:s.zIndex-a.zIndex}var Container=function(s){__extends$h(a,s);function a(){var l=s.call(this)||this;return l.children=[],l.sortableChildren=settings.SORTABLE_CHILDREN,l.sortDirty=!1,l}return a.prototype.onChildrenChange=function(l){},a.prototype.addChild=function(){for(var l=arguments,h=[],d=0;d<arguments.length;d++)h[d]=l[d];if(h.length>1)for(var v=0;v<h.length;v++)this.addChild(h[v]);else{var _=h[0];_.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.push(_),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",_,this,this.children.length-1),_.emit("added",this)}return h[0]},a.prototype.addChildAt=function(l,h){if(h<0||h>this.children.length)throw new Error(l+"addChildAt: The index "+h+" supplied is out of bounds "+this.children.length);return l.parent&&l.parent.removeChild(l),l.parent=this,this.sortDirty=!0,l.transform._parentID=-1,this.children.splice(h,0,l),this._boundsID++,this.onChildrenChange(h),l.emit("added",this),this.emit("childAdded",l,this,h),l},a.prototype.swapChildren=function(l,h){if(l!==h){var d=this.getChildIndex(l),v=this.getChildIndex(h);this.children[d]=h,this.children[v]=l,this.onChildrenChange(d<v?d:v)}},a.prototype.getChildIndex=function(l){var h=this.children.indexOf(l);if(h===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return h},a.prototype.setChildIndex=function(l,h){if(h<0||h>=this.children.length)throw new Error("The index "+h+" supplied is out of bounds "+this.children.length);var d=this.getChildIndex(l);removeItems(this.children,d,1),this.children.splice(h,0,l),this.onChildrenChange(h)},a.prototype.getChildAt=function(l){if(l<0||l>=this.children.length)throw new Error("getChildAt: Index ("+l+") does not exist.");return this.children[l]},a.prototype.removeChild=function(){for(var l=arguments,h=[],d=0;d<arguments.length;d++)h[d]=l[d];if(h.length>1)for(var v=0;v<h.length;v++)this.removeChild(h[v]);else{var _=h[0],m=this.children.indexOf(_);if(m===-1)return null;_.parent=null,_.transform._parentID=-1,removeItems(this.children,m,1),this._boundsID++,this.onChildrenChange(m),_.emit("removed",this),this.emit("childRemoved",_,this,m)}return h[0]},a.prototype.removeChildAt=function(l){var h=this.getChildAt(l);return h.parent=null,h.transform._parentID=-1,removeItems(this.children,l,1),this._boundsID++,this.onChildrenChange(l),h.emit("removed",this),this.emit("childRemoved",h,this,l),h},a.prototype.removeChildren=function(l,h){l===void 0&&(l=0),h===void 0&&(h=this.children.length);var d=l,v=h,_=v-d,m;if(_>0&&_<=v){m=this.children.splice(d,_);for(var g=0;g<m.length;++g)m[g].parent=null,m[g].transform&&(m[g].transform._parentID=-1);this._boundsID++,this.onChildrenChange(l);for(var g=0;g<m.length;++g)m[g].emit("removed",this),this.emit("childRemoved",m[g],this,g);return m}else if(_===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},a.prototype.sortChildren=function(){for(var l=!1,h=0,d=this.children.length;h<d;++h){var v=this.children[h];v._lastSortedIndex=h,!l&&v.zIndex!==0&&(l=!0)}l&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},a.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var l=0,h=this.children.length;l<h;++l){var d=this.children[l];d.visible&&d.updateTransform()}},a.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var l=0;l<this.children.length;l++){var h=this.children[l];if(!(!h.visible||!h.renderable))if(h.calculateBounds(),h._mask){var d=h._mask.maskObject||h._mask;d.calculateBounds(),this._bounds.addBoundsMask(h._bounds,d._bounds)}else h.filterArea?this._bounds.addBoundsArea(h._bounds,h.filterArea):this._bounds.addBounds(h._bounds)}this._bounds.updateID=this._boundsID},a.prototype.getLocalBounds=function(l,h){h===void 0&&(h=!1);var d=s.prototype.getLocalBounds.call(this,l);if(!h)for(var v=0,_=this.children.length;v<_;++v){var m=this.children[v];m.visible&&m.updateTransform()}return d},a.prototype._calculateBounds=function(){},a.prototype._renderWithCulling=function(l){var h=l.renderTexture.sourceFrame;if(h.width>0&&h.height>0){var d,v;if(this.cullArea?(d=this.cullArea,v=this.worldTransform):this._render!==a.prototype._render&&(d=this.getBounds(!0)),d&&h.intersects(d,v))this._render(l);else if(this.cullArea)return;for(var _=0,m=this.children.length;_<m;++_){var g=this.children[_],y=g.cullable;g.cullable=y||!this.cullArea,g.render(l),g.cullable=y}}},a.prototype.render=function(l){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(l);else if(this.cullable)this._renderWithCulling(l);else{this._render(l);for(var h=0,d=this.children.length;h<d;++h)this.children[h].render(l)}},a.prototype.renderAdvanced=function(l){var h=this.filters,d=this._mask;if(h){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var v=0;v<h.length;v++)h[v].enabled&&this._enabledFilters.push(h[v])}var _=h&&this._enabledFilters&&this._enabledFilters.length||d&&(!d.isMaskData||d.enabled&&(d.autoDetect||d.type!==MASK_TYPES$2.NONE));if(_&&l.batch.flush(),h&&this._enabledFilters&&this._enabledFilters.length&&l.filter.push(this,this._enabledFilters),d&&l.mask.push(this,this._mask),this.cullable)this._renderWithCulling(l);else{this._render(l);for(var v=0,m=this.children.length;v<m;++v)this.children[v].render(l)}_&&l.batch.flush(),d&&l.mask.pop(this),h&&this._enabledFilters&&this._enabledFilters.length&&l.filter.pop()},a.prototype._render=function(l){},a.prototype.destroy=function(l){s.prototype.destroy.call(this),this.sortDirty=!1;var h=typeof l=="boolean"?l:l&&l.children,d=this.removeChildren(0,this.children.length);if(h)for(var v=0;v<d.length;++v)d[v].destroy(l)},Object.defineProperty(a.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(l){var h=this.getLocalBounds().width;h!==0?this.scale.x=l/h:this.scale.x=1,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(l){var h=this.getLocalBounds().height;h!==0?this.scale.y=l/h:this.scale.y=1,this._height=l},enumerable:!1,configurable:!0}),a}(DisplayObject);Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;var TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,Extract=function(){function s(a){this.renderer=a}return s.prototype.image=function(a,l,h){var d=new Image;return d.src=this.base64(a,l,h),d},s.prototype.base64=function(a,l,h){return this.canvas(a).toDataURL(l,h)},s.prototype.canvas=function(a){var l=this.renderer,h,d,v=!1,_,m=!1;a&&(a instanceof RenderTexture?_=a:(_=this.renderer.generateTexture(a),m=!0)),_?(h=_.baseTexture.resolution,d=_.frame,v=!1,l.renderTexture.bind(_)):(h=this.renderer.resolution,v=!0,d=TEMP_RECT,d.width=this.renderer.width,d.height=this.renderer.height,l.renderTexture.bind(null));var g=Math.floor(d.width*h+1e-4),y=Math.floor(d.height*h+1e-4),T=new CanvasRenderTarget(g,y,1),E=new Uint8Array(BYTES_PER_PIXEL*g*y),b=l.gl;b.readPixels(d.x*h,d.y*h,g,y,b.RGBA,b.UNSIGNED_BYTE,E);var R=T.context.getImageData(0,0,g,y);if(s.arrayPostDivide(E,R.data),T.context.putImageData(R,0,0),v){var I=new CanvasRenderTarget(T.width,T.height,1);I.context.scale(1,-1),I.context.drawImage(T.canvas,0,-y),T.destroy(),T=I}return m&&_.destroy(!0),T.canvas},s.prototype.pixels=function(a,l){var h=this.renderer,d,v,_,m=!1;a&&(a instanceof RenderTexture?_=a:a instanceof DisplayObject&&(_=this.renderer.generateTexture(a),m=!0)),_?l?(d=l.resolution,v=_.frame,h.renderTexture.bind(_)):(d=_.baseTexture.resolution,v=_.frame,h.renderTexture.bind(_)):l?(d=l.resolution,v=TEMP_RECT,v.width=l.width,v.height=l.height,h.renderTexture.bind(null)):(d=h.resolution,v=TEMP_RECT,v.width=h.width,v.height=h.height,h.renderTexture.bind(null));var g=v.width*d,y=v.height*d,T=new Uint8Array(BYTES_PER_PIXEL*g*y),E=h.gl;return E.readPixels(v.x*d,v.y*d,g,y,E.RGBA,E.UNSIGNED_BYTE,T),m&&_.destroy(!0),s.arrayPostDivide(T,T),T},s.prototype.destroy=function(){this.renderer=null},s.arrayPostDivide=function(a,l){for(var h=0;h<a.length;h+=4){var d=l[h+3]=a[h+3];d!==0?(l[h]=Math.round(Math.min(a[h]*255/d,255)),l[h+1]=Math.round(Math.min(a[h+1]*255/d,255)),l[h+2]=Math.round(Math.min(a[h+2]*255/d,255))):(l[h]=a[h],l[h+1]=a[h+1],l[h+2]=a[h+2])}},s}();/*!
 * @pixi/loaders - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var SignalBinding=function(){function s(a,l,h){l===void 0&&(l=!1),this._fn=a,this._once=l,this._thisArg=h,this._next=this._prev=this._owner=null}return s.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},s}();function _addSignalBinding(s,a){return s._head?(s._tail._next=a,a._prev=s._tail,s._tail=a):(s._head=a,s._tail=a),a._owner=s,a}var Signal=function(){function s(){this._head=this._tail=void 0}return s.prototype.handlers=function(a){a===void 0&&(a=!1);var l=this._head;if(a)return!!l;for(var h=[];l;)h.push(l),l=l._next;return h},s.prototype.has=function(a){if(!(a instanceof SignalBinding))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return a._owner===this},s.prototype.dispatch=function(){for(var a=arguments,l=[],h=0;h<arguments.length;h++)l[h]=a[h];var d=this._head;if(!d)return!1;for(;d;)d._once&&this.detach(d),d._fn.apply(d._thisArg,l),d=d._next;return!0},s.prototype.add=function(a,l){if(l===void 0&&(l=null),typeof a!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(a,!1,l))},s.prototype.once=function(a,l){if(l===void 0&&(l=null),typeof a!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(a,!0,l))},s.prototype.detach=function(a){if(!(a instanceof SignalBinding))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return a._owner!==this?this:(a._prev&&(a._prev._next=a._next),a._next&&(a._next._prev=a._prev),a===this._head?(this._head=a._next,a._next===null&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null),a._owner=null,this)},s.prototype.detachAll=function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;return this},s}();function parseUri(s,a){a=a||{};for(var l={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},h=l.parser[a.strictMode?"strict":"loose"].exec(s),d={},v=14;v--;)d[l.key[v]]=h[v]||"";return d[l.q.name]={},d[l.key[12]].replace(l.q.parser,function(_,m,g){m&&(d[l.q.name][m]=g)}),d}var useXdr,tempAnchor=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204,STATUS_IE_BUG_EMPTY=1223,STATUS_TYPE_OK=2;function _noop$1(){}function setExtMap(s,a,l){a&&a.indexOf(".")===0&&(a=a.substring(1)),a&&(s[a]=l)}function reqType(s){return s.toString().replace("object ","")}var LoaderResource=function(){function s(a,l,h){if(this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof a!="string"||typeof l!="string")throw new Error("Both name and url are required for constructing a resource.");h=h||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,l.indexOf("data:")===0),this.name=a,this.url=l,this.extension=this._getExtension(),this.data=null,this.crossOrigin=h.crossOrigin===!0?"anonymous":h.crossOrigin,this.timeout=h.timeout||0,this.loadType=h.loadType||this._determineLoadType(),this.xhrType=h.xhrType,this.metadata=h.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Signal,this.onProgress=new Signal,this.onComplete=new Signal,this.onAfterMiddleware=new Signal}return s.setExtensionLoadType=function(a,l){setExtMap(s._loadTypeMap,a,l)},s.setExtensionXhrType=function(a,l){setExtMap(s._xhrTypeMap,a,l)},Object.defineProperty(s.prototype,"isDataUrl",{get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isComplete",{get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isLoading",{get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),s.prototype.complete=function(){this._clearEvents(),this._finish()},s.prototype.abort=function(a){if(!this.error){if(this.error=new Error(a),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},s.prototype.load=function(a){var l=this;if(!this.isLoading){if(this.isComplete){a&&setTimeout(function(){return a(l)},1);return}else a&&this.onComplete.once(a);switch(this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:typeof useXdr=="undefined"&&(useXdr=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},s.prototype._hasFlag=function(a){return(this._flags&a)!==0},s.prototype._setFlag=function(a,l){this._flags=l?this._flags|a:this._flags&~a},s.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},s.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},s.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:a==="image"&&typeof globalThis.Image!="undefined"?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},s.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:a==="audio"&&typeof globalThis.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(a),this.data===null){this.abort("Unsupported element: "+a);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var l=this.metadata.mimeType,h=0;h<this.url.length;++h)this.data.appendChild(this._createSource(a,this.url[h],Array.isArray(l)?l[h]:l));else{var l=this.metadata.mimeType;this.data.appendChild(this._createSource(a,this.url,Array.isArray(l)?l[0]:l))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},s.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(a.withCredentials=!0),a.open("GET",this.url,!0),a.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?a.responseType=s.XHR_RESPONSE_TYPE.TEXT:a.responseType=this.xhrType,a.addEventListener("error",this._boundXhrOnError,!1),a.addEventListener("timeout",this._boundXhrOnTimeout,!1),a.addEventListener("abort",this._boundXhrOnAbort,!1),a.addEventListener("progress",this._boundOnProgress,!1),a.addEventListener("load",this._boundXhrOnLoad,!1),a.send()},s.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var a=this.xhr=new globalThis.XDomainRequest;a.timeout=this.timeout||5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXhrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){return a.send()},1)},s.prototype._createSource=function(a,l,h){h||(h=a+"/"+this._getExtension(l));var d=document.createElement("source");return d.src=l,d.type=h,d},s.prototype._onError=function(a){this.abort("Failed to load element using: "+a.target.nodeName)},s.prototype._onProgress=function(a){a&&a.lengthComputable&&this.onProgress.dispatch(this,a.loaded/a.total)},s.prototype._onTimeout=function(){this.abort("Load timed out.")},s.prototype._xhrOnError=function(){var a=this.xhr;this.abort(reqType(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},s.prototype._xhrOnTimeout=function(){var a=this.xhr;this.abort(reqType(a)+" Request timed out.")},s.prototype._xhrOnAbort=function(){var a=this.xhr;this.abort(reqType(a)+" Request was aborted by the user.")},s.prototype._xhrOnLoad=function(){var a=this.xhr,l="",h=typeof a.status=="undefined"?STATUS_OK:a.status;(a.responseType===""||a.responseType==="text"||typeof a.responseType=="undefined")&&(l=a.responseText),h===STATUS_NONE&&(l.length>0||a.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?h=STATUS_OK:h===STATUS_IE_BUG_EMPTY&&(h=STATUS_EMPTY);var d=h/100|0;if(d===STATUS_TYPE_OK)if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=l,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(l),this.type=s.TYPE.JSON}catch(m){this.abort("Error trying to parse loaded json: "+m);return}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var v=new DOMParser;this.data=v.parseFromString(l,"text/xml")}else{var _=document.createElement("div");_.innerHTML=l,this.data=_}this.type=s.TYPE.XML}catch(m){this.abort("Error trying to parse loaded xml: "+m);return}else this.data=a.response||l;else{this.abort("["+a.status+"] "+a.statusText+": "+a.responseURL);return}this.complete()},s.prototype._determineCrossOrigin=function(a,l){if(a.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";l=l||globalThis.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=a;var h=parseUri(tempAnchor.href,{strictMode:!0}),d=!h.port&&l.port===""||h.port===l.port,v=h.protocol?h.protocol+":":"";return h.host!==l.hostname||!d||v!==l.protocol?"anonymous":""},s.prototype._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},s.prototype._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},s.prototype._getExtension=function(a){a===void 0&&(a=this.url);var l="";if(this.isDataUrl){var h=a.indexOf("/");l=a.substring(h+1,a.indexOf(";",h))}else{var d=a.indexOf("?"),v=a.indexOf("#"),_=Math.min(d>-1?d:a.length,v>-1?v:a.length);a=a.substring(0,_),l=a.substring(a.lastIndexOf(".")+1)}return l.toLowerCase()},s.prototype._getMimeFromXhrType=function(a){switch(a){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},s}();(function(s){(function(a){a[a.NONE=0]="NONE",a[a.DATA_URL=1]="DATA_URL",a[a.COMPLETE=2]="COMPLETE",a[a.LOADING=4]="LOADING"})(s.STATUS_FLAGS||(s.STATUS_FLAGS={})),function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.JSON=1]="JSON",a[a.XML=2]="XML",a[a.IMAGE=3]="IMAGE",a[a.AUDIO=4]="AUDIO",a[a.VIDEO=5]="VIDEO",a[a.TEXT=6]="TEXT"}(s.TYPE||(s.TYPE={})),function(a){a[a.XHR=1]="XHR",a[a.IMAGE=2]="IMAGE",a[a.AUDIO=3]="AUDIO",a[a.VIDEO=4]="VIDEO"}(s.LOAD_TYPE||(s.LOAD_TYPE={})),function(a){a.DEFAULT="text",a.BUFFER="arraybuffer",a.BLOB="blob",a.DOCUMENT="document",a.JSON="json",a.TEXT="text"}(s.XHR_RESPONSE_TYPE||(s.XHR_RESPONSE_TYPE={})),s._loadTypeMap={gif:s.LOAD_TYPE.IMAGE,png:s.LOAD_TYPE.IMAGE,bmp:s.LOAD_TYPE.IMAGE,jpg:s.LOAD_TYPE.IMAGE,jpeg:s.LOAD_TYPE.IMAGE,tif:s.LOAD_TYPE.IMAGE,tiff:s.LOAD_TYPE.IMAGE,webp:s.LOAD_TYPE.IMAGE,tga:s.LOAD_TYPE.IMAGE,svg:s.LOAD_TYPE.IMAGE,"svg+xml":s.LOAD_TYPE.IMAGE,mp3:s.LOAD_TYPE.AUDIO,ogg:s.LOAD_TYPE.AUDIO,wav:s.LOAD_TYPE.AUDIO,mp4:s.LOAD_TYPE.VIDEO,webm:s.LOAD_TYPE.VIDEO},s._xhrTypeMap={xhtml:s.XHR_RESPONSE_TYPE.DOCUMENT,html:s.XHR_RESPONSE_TYPE.DOCUMENT,htm:s.XHR_RESPONSE_TYPE.DOCUMENT,xml:s.XHR_RESPONSE_TYPE.DOCUMENT,tmx:s.XHR_RESPONSE_TYPE.DOCUMENT,svg:s.XHR_RESPONSE_TYPE.DOCUMENT,tsx:s.XHR_RESPONSE_TYPE.DOCUMENT,gif:s.XHR_RESPONSE_TYPE.BLOB,png:s.XHR_RESPONSE_TYPE.BLOB,bmp:s.XHR_RESPONSE_TYPE.BLOB,jpg:s.XHR_RESPONSE_TYPE.BLOB,jpeg:s.XHR_RESPONSE_TYPE.BLOB,tif:s.XHR_RESPONSE_TYPE.BLOB,tiff:s.XHR_RESPONSE_TYPE.BLOB,webp:s.XHR_RESPONSE_TYPE.BLOB,tga:s.XHR_RESPONSE_TYPE.BLOB,json:s.XHR_RESPONSE_TYPE.JSON,text:s.XHR_RESPONSE_TYPE.TEXT,txt:s.XHR_RESPONSE_TYPE.TEXT,ttf:s.XHR_RESPONSE_TYPE.BUFFER,otf:s.XHR_RESPONSE_TYPE.BUFFER},s.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(LoaderResource||(LoaderResource={}));function _noop(){}function onlyOnce(s){return function(){for(var l=arguments,h=[],d=0;d<arguments.length;d++)h[d]=l[d];if(s===null)throw new Error("Callback was already called.");var v=s;s=null,v.apply(this,h)}}var AsyncQueueItem=function(){function s(a,l){this.data=a,this.callback=l}return s}(),AsyncQueue=function(){function s(a,l){var h=this;if(l===void 0&&(l=1),this.workers=0,this.saturated=_noop,this.unsaturated=_noop,this.empty=_noop,this.drain=_noop,this.error=_noop,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(d,v,_){if(_&&typeof _!="function")throw new Error("task callback must be a function");if(h.started=!0,d==null&&h.idle()){setTimeout(function(){return h.drain()},1);return}var m=new AsyncQueueItem(d,typeof _=="function"?_:_noop);v?h._tasks.unshift(m):h._tasks.push(m),setTimeout(h.process,1)},this.process=function(){for(;!h.paused&&h.workers<h.concurrency&&h._tasks.length;){var d=h._tasks.shift();h._tasks.length===0&&h.empty(),h.workers+=1,h.workers===h.concurrency&&h.saturated(),h._worker(d.data,onlyOnce(h._next(d)))}},this._worker=a,l===0)throw new Error("Concurrency must not be zero");this.concurrency=l,this.buffer=l/4}return s.prototype._next=function(a){var l=this;return function(){for(var h=arguments,d=[],v=0;v<arguments.length;v++)d[v]=h[v];l.workers-=1,a.callback.apply(a,d),d[0]!=null&&l.error(d[0],a.data),l.workers<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()}},s.prototype.push=function(a,l){this._insert(a,!1,l)},s.prototype.kill=function(){this.workers=0,this.drain=_noop,this.started=!1,this._tasks=[]},s.prototype.unshift=function(a,l){this._insert(a,!0,l)},s.prototype.length=function(){return this._tasks.length},s.prototype.running=function(){return this.workers},s.prototype.idle=function(){return this._tasks.length+this.workers===0},s.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},s.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var a=1;a<=this.concurrency;a++)this.process()}},s.eachSeries=function(a,l,h,d){var v=0,_=a.length;function m(g){if(g||v===_){h&&h(g);return}d?setTimeout(function(){l(a[v++],m)},1):l(a[v++],m)}m()},s.queue=function(a,l){return new s(a,l)},s}(),MAX_PROGRESS=100,rgxExtractUrlHash=/(#[\w-]+)?$/,Loader=function(){function s(a,l){var h=this;a===void 0&&(a=""),l===void 0&&(l=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(g,y){return h._loadResource(g,y)},this.resources={},this.baseUrl=a,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(g,y){return h._loadResource(g,y)},this._queue=AsyncQueue.queue(this._boundLoadResource,l),this._queue.pause(),this.resources={},this.onProgress=new Signal,this.onError=new Signal,this.onLoad=new Signal,this.onStart=new Signal,this.onComplete=new Signal;for(var d=0;d<s._plugins.length;++d){var v=s._plugins[d],_=v.pre,m=v.use;_&&this.pre(_),m&&this.use(m)}this._protected=!1}return s.prototype._add=function(a,l,h,d){if(this.loading&&(!h||!h.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[a])throw new Error('Resource named "'+a+'" already exists.');if(l=this._prepareUrl(l),this.resources[a]=new LoaderResource(a,l,h),typeof d=="function"&&this.resources[a].onAfterMiddleware.once(d),this.loading){for(var v=h.parentResource,_=[],m=0;m<v.children.length;++m)v.children[m].isComplete||_.push(v.children[m]);var g=v.progressChunk*(_.length+1),y=g/(_.length+2);v.children.push(this.resources[a]),v.progressChunk=y;for(var m=0;m<_.length;++m)_[m].progressChunk=y;this.resources[a].progressChunk=y}return this._queue.push(this.resources[a]),this},s.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},s.prototype.use=function(a){return this._afterMiddleware.push(a),this},s.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var a in this.resources){var l=this.resources[a];l._onLoadBinding&&l._onLoadBinding.detach(),l.isLoading&&l.abort("loader reset")}return this.resources={},this},s.prototype.load=function(a){if(typeof a=="function"&&this.onComplete.once(a),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var l=this._queue._tasks.length,h=MAX_PROGRESS/l,d=0;d<this._queue._tasks.length;++d)this._queue._tasks[d].data.progressChunk=h;this._onStart(),this._queue.resume()}return this},Object.defineProperty(s.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(a){this._queue.concurrency=a},enumerable:!1,configurable:!0}),s.prototype._prepareUrl=function(a){var l=parseUri(a,{strictMode:!0}),h;if(l.protocol||!l.path||a.indexOf("//")===0?h=a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&a.charAt(0)!=="/"?h=this.baseUrl+"/"+a:h=this.baseUrl+a,this.defaultQueryString){var d=rgxExtractUrlHash.exec(h)[0];h=h.slice(0,h.length-d.length),h.indexOf("?")!==-1?h+="&"+this.defaultQueryString:h+="?"+this.defaultQueryString,h+=d}return h},s.prototype._loadResource=function(a,l){var h=this;a._dequeue=l,AsyncQueue.eachSeries(this._beforeMiddleware,function(d,v){d.call(h,a,function(){v(a.isComplete?{}:null)})},function(){a.isComplete?h._onLoad(a):(a._onLoadBinding=a.onComplete.once(h._onLoad,h),a.load())},!0)},s.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},s.prototype._onComplete=function(){this.progress=MAX_PROGRESS,this.loading=!1,this.onComplete.dispatch(this,this.resources)},s.prototype._onLoad=function(a){var l=this;a._onLoadBinding=null,this._resourcesParsing.push(a),a._dequeue(),AsyncQueue.eachSeries(this._afterMiddleware,function(h,d){h.call(l,a,d)},function(){a.onAfterMiddleware.dispatch(a),l.progress=Math.min(MAX_PROGRESS,l.progress+a.progressChunk),l.onProgress.dispatch(l,a),a.error?l.onError.dispatch(a.error,l,a):l.onLoad.dispatch(l,a),l._resourcesParsing.splice(l._resourcesParsing.indexOf(a),1),l._queue.idle()&&l._resourcesParsing.length===0&&l._onComplete()},!0)},s.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(s,"shared",{get:function(){var a=s._shared;return a||(a=new s,a._protected=!0,s._shared=a),a},enumerable:!1,configurable:!0}),s.registerPlugin=function(a){return s._plugins.push(a),a.add&&a.add(),s},s._plugins=[],s}();Loader.prototype.add=function(a,l,h,d){if(Array.isArray(a)){for(var v=0;v<a.length;++v)this.add(a[v]);return this}if(typeof a=="object"&&(h=a,d=l||h.callback||h.onComplete,l=h.url,a=h.name||h.key||h.url),typeof l!="string"&&(d=h,h=l,l=a),typeof l!="string")throw new Error("No url passed to add resource to loader.");return typeof h=="function"&&(d=h,h=null),this._add(a,l,h,d)};var AppLoaderPlugin=function(){function s(){}return s.init=function(a){a=Object.assign({sharedLoader:!1},a),this.loader=a.sharedLoader?Loader.shared:new Loader},s.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},s}(),TextureLoader=function(){function s(){}return s.add=function(){LoaderResource.setExtensionLoadType("svg",LoaderResource.LOAD_TYPE.XHR),LoaderResource.setExtensionXhrType("svg",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},s.use=function(a,l){if(a.data&&(a.type===LoaderResource.TYPE.IMAGE||a.extension==="svg")){var h=a.data,d=a.url,v=a.name,_=a.metadata;Texture.fromLoader(h,d,v,_).then(function(m){a.texture=m,l()}).catch(l)}else l()},s}(),_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encodeBinary(s){for(var a="",l=0;l<s.length;){for(var h=[0,0,0],d=[0,0,0,0],v=0;v<h.length;++v)l<s.length?h[v]=s.charCodeAt(l++)&255:h[v]=0;d[0]=h[0]>>2,d[1]=(h[0]&3)<<4|h[1]>>4,d[2]=(h[1]&15)<<2|h[2]>>6,d[3]=h[2]&63;var _=l-(s.length-1);switch(_){case 2:d[3]=64,d[2]=64;break;case 1:d[3]=64;break}for(var v=0;v<d.length;++v)a+=_keyStr.charAt(d[v])}return a}function parsing(s,a){if(!s.data){a();return}if(s.xhr&&s.xhrType===LoaderResource.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof s.data=="string"){var l=s.xhr.getResponseHeader("content-type");if(l&&l.indexOf("image")===0){s.data=new Image,s.data.src="data:"+l+";base64,"+encodeBinary(s.xhr.responseText),s.type=LoaderResource.TYPE.IMAGE,s.data.onload=function(){s.data.onload=null,a()};return}}else if(s.data.type.indexOf("image")===0){var h=globalThis.URL||globalThis.webkitURL,d=h.createObjectURL(s.data);s.blob=s.data,s.data=new Image,s.data.src=d,s.type=LoaderResource.TYPE.IMAGE,s.data.onload=function(){h.revokeObjectURL(d),s.data.onload=null,a()};return}}a()}Loader.registerPlugin({use:parsing});Loader.registerPlugin(TextureLoader);/*!
 * @pixi/compressed-textures - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _a$2,INTERNAL_FORMATS;(function(s){s[s.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",s[s.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",s[s.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",s[s.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",s[s.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",s[s.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",s[s.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",s[s.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",s[s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",s[s.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",s[s.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",s[s.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(INTERNAL_FORMATS||(INTERNAL_FORMATS={}));var INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=(_a$2={},_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,_a$2);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$g=function(s,a){return extendStatics$g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$g(s,a)};function __extends$g(s,a){extendStatics$g(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}function __awaiter(s,a,l,h){return new(l||(l=Promise))(function(d,v){function _(y){try{g(h.next(y))}catch(T){v(T)}}function m(y){try{g(h.throw(y))}catch(T){v(T)}}function g(y){y.done?d(y.value):new l(function(T){T(y.value)}).then(_,m)}g((h=h.apply(s,a||[])).next())})}function __generator(s,a){var l={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},h,d,v,_;return _={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function m(y){return function(T){return g([y,T])}}function g(y){if(h)throw new TypeError("Generator is already executing.");for(;l;)try{if(h=1,d&&(v=y[0]&2?d.return:y[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,y[1])).done)return v;switch(d=0,v&&(y=[y[0]&2,v.value]),y[0]){case 0:case 1:v=y;break;case 4:return l.label++,{value:y[1],done:!1};case 5:l.label++,d=y[1],y=[0];continue;case 7:y=l.ops.pop(),l.trys.pop();continue;default:if(v=l.trys,!(v=v.length>0&&v[v.length-1])&&(y[0]===6||y[0]===2)){l=0;continue}if(y[0]===3&&(!v||y[1]>v[0]&&y[1]<v[3])){l.label=y[1];break}if(y[0]===6&&l.label<v[1]){l.label=v[1],v=y;break}if(v&&l.label<v[2]){l.label=v[2],l.ops.push(y);break}v[2]&&l.ops.pop(),l.trys.pop();continue}y=a.call(s,l)}catch(T){y=[6,T],d=0}finally{h=v=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var BlobResource=function(s){__extends$g(a,s);function a(l,h){h===void 0&&(h={width:1,height:1,autoLoad:!0});var d=this,v,_;return typeof l=="string"?(v=l,_=new Uint8Array):(v=null,_=l),d=s.call(this,_,h)||this,d.origin=v,d.buffer=_?new ViewableBuffer(_):null,d.origin&&h.autoLoad!==!1&&d.load(),_&&_.length&&(d.loaded=!0,d.onBlobLoaded(d.buffer.rawBinaryData)),d}return a.prototype.onBlobLoaded=function(l){},a.prototype.load=function(){return __awaiter(this,void 0,Promise,function(){var l,h,d;return __generator(this,function(v){switch(v.label){case 0:return[4,fetch(this.origin)];case 1:return l=v.sent(),[4,l.blob()];case 2:return h=v.sent(),[4,h.arrayBuffer()];case 3:return d=v.sent(),this.data=new Uint32Array(d),this.buffer=new ViewableBuffer(d),this.loaded=!0,this.onBlobLoaded(d),this.update(),[2,this]}})})},a}(BufferResource),CompressedTextureResource=function(s){__extends$g(a,s);function a(l,h){var d=s.call(this,l,h)||this;return d.format=h.format,d.levels=h.levels||1,d._width=h.width,d._height=h.height,d._extension=a._formatToExtension(d.format),(h.levelBuffers||d.buffer)&&(d._levelBuffers=h.levelBuffers||a._createLevelBuffers(l instanceof Uint8Array?l:d.buffer.uint8View,d.format,d.levels,4,4,d.width,d.height)),d}return a.prototype.upload=function(l,h,d){var v=l.gl,_=l.context.extensions[this._extension];if(!_)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var m=0,g=this.levels;m<g;m++){var y=this._levelBuffers[m],T=y.levelID,E=y.levelWidth,b=y.levelHeight,R=y.levelBuffer;v.compressedTexImage2D(v.TEXTURE_2D,T,this.format,E,b,0,R)}return!0},a.prototype.onBlobLoaded=function(){this._levelBuffers=a._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},a._formatToExtension=function(l){if(l>=33776&&l<=33779)return"s3tc";if(l>=37488&&l<=37497)return"etc";if(l>=35840&&l<=35843)return"pvrtc";if(l>=36196)return"etc1";if(l>=35986&&l<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},a._createLevelBuffers=function(l,h,d,v,_,m,g){for(var y=new Array(d),T=l.byteOffset,E=m,b=g,R=E+v-1&~(v-1),I=b+_-1&~(_-1),P=R*I*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[h],C=0;C<d;C++)y[C]={levelID:C,levelWidth:d>1?E:R,levelHeight:d>1?b:I,levelBuffer:new Uint8Array(l.buffer,T,P)},T+=P,E=E>>1||1,b=b>>1||1,R=E+v-1&~(v-1),I=b+_-1&~(_-1),P=R*I*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[h];return y},a}(BlobResource),CompressedTextureLoader=function(){function s(){}return s.use=function(a,l){var h=a.data,d=this;if(a.type===LoaderResource.TYPE.JSON&&h&&h.cacheID&&h.textures){for(var v=h.textures,_=void 0,m=void 0,g=0,y=v.length;g<y;g++){var T=v[g],E=T.src,b=T.format;if(b||(m=E),s.textureFormats[b]){_=E;break}}if(_=_||m,!_){l(new Error("Cannot load compressed-textures in "+a.url+", make sure you provide a fallback"));return}if(_===a.url){l(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var R={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata,parentResource:a},I=url.resolve(a.url.replace(d.baseUrl,""),_),P=h.cacheID;d.add(P,I,R,function(C){if(C.error){l(C.error);return}var S=C.texture,O=S===void 0?null:S,w=C.textures,U=w===void 0?{}:w;Object.assign(a,{texture:O,textures:U}),l()})}else l()},Object.defineProperty(s,"textureExtensions",{get:function(){if(!s._textureExtensions){var a=document.createElement("canvas"),l=a.getContext("webgl");if(!l)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var h={s3tc:l.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:l.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:l.getExtension("WEBGL_compressed_texture_etc"),etc1:l.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:l.getExtension("WEBGL_compressed_texture_atc"),astc:l.getExtension("WEBGL_compressed_texture_astc")};s._textureExtensions=h}return s._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(s,"textureFormats",{get:function(){if(!s._textureFormats){var a=s.textureExtensions;s._textureFormats={};for(var l in a){var h=a[l];!h||Object.assign(s._textureFormats,Object.getPrototypeOf(h))}}return s._textureFormats},enumerable:!1,configurable:!0}),s}();function registerCompressedTextures(s,a,l){var h={textures:{},texture:null};if(!a)return h;var d=a.map(function(v){return new Texture(new BaseTexture(v,Object.assign({mipmap:MIPMAP_MODES$4.OFF,alphaMode:ALPHA_MODES$4.NO_PREMULTIPLIED_ALPHA},l)))});return d.forEach(function(v,_){var m=v.baseTexture,g=s+"-"+(_+1);BaseTexture.addToCache(m,g),Texture.addToCache(v,g),_===0&&(BaseTexture.addToCache(m,s),Texture.addToCache(v,s),h.texture=v),h.textures[g]=v}),h}var _a$1,_b$1;LoaderResource.setExtensionXhrType("dds",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},DXGI_FORMAT;(function(s){s[s.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",s[s.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",s[s.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",s[s.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",s[s.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",s[s.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",s[s.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",s[s.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",s[s.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",s[s.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",s[s.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",s[s.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",s[s.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",s[s.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",s[s.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",s[s.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",s[s.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",s[s.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",s[s.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",s[s.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",s[s.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",s[s.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",s[s.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",s[s.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",s[s.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",s[s.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",s[s.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",s[s.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",s[s.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",s[s.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",s[s.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",s[s.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",s[s.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",s[s.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",s[s.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",s[s.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",s[s.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",s[s.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",s[s.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",s[s.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",s[s.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",s[s.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",s[s.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",s[s.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",s[s.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",s[s.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",s[s.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",s[s.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",s[s.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",s[s.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",s[s.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",s[s.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",s[s.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",s[s.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",s[s.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",s[s.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",s[s.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",s[s.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",s[s.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",s[s.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",s[s.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",s[s.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",s[s.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",s[s.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",s[s.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",s[s.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",s[s.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",s[s.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",s[s.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",s[s.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",s[s.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",s[s.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",s[s.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",s[s.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",s[s.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",s[s.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",s[s.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",s[s.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",s[s.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",s[s.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",s[s.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",s[s.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",s[s.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",s[s.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",s[s.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",s[s.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",s[s.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",s[s.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",s[s.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",s[s.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",s[s.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",s[s.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",s[s.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",s[s.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",s[s.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",s[s.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",s[s.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",s[s.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",s[s.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",s[s.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",s[s.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",s[s.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",s[s.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",s[s.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",s[s.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",s[s.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",s[s.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",s[s.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",s[s.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",s[s.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",s[s.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",s[s.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",s[s.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",s[s.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",s[s.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",s[s.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",s[s.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",s[s.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",s[s.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",s[s.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",s[s.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",s[s.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(DXGI_FORMAT||(DXGI_FORMAT={}));var D3D10_RESOURCE_DIMENSION;(function(s){s[s.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",s[s.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",s[s.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(D3D10_RESOURCE_DIMENSION||(D3D10_RESOURCE_DIMENSION={}));var PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT=(_a$1={},_a$1[FOURCC_DXT1]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_a$1[FOURCC_DXT3]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_a$1[FOURCC_DXT5]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_a$1),DXGI_TO_FORMAT=(_b$1={},_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,_b$1),DDSLoader=function(){function s(){}return s.use=function(a,l){if(a.extension==="dds"&&a.data)try{Object.assign(a,registerCompressedTextures(a.name||a.url,s.parse(a.data),a.metadata))}catch(h){l(h);return}l()},s.parse=function(a){var l=new Uint32Array(a),h=l[0];if(h!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");var d=new Uint32Array(a,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),v=d[DDS_FIELDS.HEIGHT],_=d[DDS_FIELDS.WIDTH],m=d[DDS_FIELDS.MIPMAP_COUNT],g=new Uint32Array(a,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),y=g[PF_FLAGS];if(y&DDPF_FOURCC){var T=g[DDS_PF_FIELDS.FOURCC];if(T!==FOURCC_DX10){var E=FOURCC_TO_FORMAT[T],b=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,R=new Uint8Array(a,b),I=new CompressedTextureResource(R,{format:E,width:_,height:v,levels:m});return[I]}var P=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,C=new Uint32Array(l.buffer,P,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),S=C[DDS_DX10_FIELDS.DXGI_FORMAT],O=C[DDS_DX10_FIELDS.RESOURCE_DIMENSION],w=C[DDS_DX10_FIELDS.MISC_FLAG],U=C[DDS_DX10_FIELDS.ARRAY_SIZE],F=DXGI_TO_FORMAT[S];if(F===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+S);if(w===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSLoader does not support cubemap textures");if(O===D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var M=new Array,$=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(U===1)M.push(new Uint8Array(a,$));else{for(var j=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[F],D=0,X=_,Z=v,ee=0;ee<m;ee++){var se=Math.max(1,X+3&-4),_e=Math.max(1,Z+3&-4),J=se*_e*j;D+=J,X=X>>>1,Z=Z>>>1}for(var q=$,ee=0;ee<U;ee++)M.push(new Uint8Array(a,q,D)),q+=D}return M.map(function(Q){return new CompressedTextureResource(Q,{format:F,width:_,height:v,levels:m})})}throw y&DDPF_RGB?new Error("DDSLoader does not support uncompressed texture data."):y&DDPF_YUV?new Error("DDSLoader does not supported YUV uncompressed texture data."):y&DDPF_LUMINANCE?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):y&DDPF_ALPHA?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},s}(),_a$3,_b,_c;LoaderResource.setExtensionXhrType("ktx",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT=(_a$3={},_a$3[TYPES$4.UNSIGNED_BYTE]=1,_a$3[TYPES$4.UNSIGNED_SHORT]=2,_a$3[TYPES$4.INT]=4,_a$3[TYPES$4.UNSIGNED_INT]=4,_a$3[TYPES$4.FLOAT]=4,_a$3[TYPES$4.HALF_FLOAT]=8,_a$3),FORMATS_TO_COMPONENTS=(_b={},_b[FORMATS$4.RGBA]=4,_b[FORMATS$4.RGB]=3,_b[FORMATS$4.RG]=2,_b[FORMATS$4.RED]=1,_b[FORMATS$4.LUMINANCE]=1,_b[FORMATS$4.LUMINANCE_ALPHA]=2,_b[FORMATS$4.ALPHA]=1,_b),TYPES_TO_BYTES_PER_PIXEL=(_c={},_c[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=2,_c[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=2,_c[TYPES$4.UNSIGNED_SHORT_5_6_5]=2,_c),KTXLoader=function(){function s(){}return s.use=function(a,l){if(a.extension==="ktx"&&a.data)try{var h=a.name||a.url,d=s.parse(h,a.data),v=d.compressed,_=d.uncompressed,m=d.kvData;if(v){var g=registerCompressedTextures(h,v,a.metadata);if(m&&g.textures)for(var y in g.textures)g.textures[y].baseTexture.ktxKeyValueData=m;Object.assign(a,g)}else if(_){var T={};_.forEach(function(E,b){var R=new Texture(new BaseTexture(E.resource,{mipmap:MIPMAP_MODES$4.OFF,alphaMode:ALPHA_MODES$4.NO_PREMULTIPLIED_ALPHA,type:E.type,format:E.format})),I=h+"-"+(b+1);m&&(R.baseTexture.ktxKeyValueData=m),BaseTexture.addToCache(R.baseTexture,I),Texture.addToCache(R,I),b===0&&(T[h]=R,BaseTexture.addToCache(R.baseTexture,h),Texture.addToCache(R,h)),T[I]=R}),Object.assign(a,{textures:T})}}catch(E){l(E);return}l()},s.parse=function(a,l){var h=new DataView(l);if(!s.validate(a,h))return null;var d=h.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,v=h.getUint32(KTX_FIELDS.GL_TYPE,d),_=h.getUint32(KTX_FIELDS.GL_FORMAT,d),m=h.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,d),g=h.getUint32(KTX_FIELDS.PIXEL_WIDTH,d),y=h.getUint32(KTX_FIELDS.PIXEL_HEIGHT,d)||1,T=h.getUint32(KTX_FIELDS.PIXEL_DEPTH,d)||1,E=h.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,d)||1,b=h.getUint32(KTX_FIELDS.NUMBER_OF_FACES,d),R=h.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,d),I=h.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,d);if(y===0||T!==1)throw new Error("Only 2D textures are supported");if(b!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(E!==1)throw new Error("WebGL does not support array textures");var P=4,C=4,S=g+3&-4,O=y+3&-4,w=new Array(E),U=g*y;v===0&&(U=S*O);var F;if(v!==0?TYPES_TO_BYTES_PER_COMPONENT[v]?F=TYPES_TO_BYTES_PER_COMPONENT[v]*FORMATS_TO_COMPONENTS[_]:F=TYPES_TO_BYTES_PER_PIXEL[v]:F=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[m],F===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var M=s.loadKeyValueData?s.parseKvData(h,I,d):null,$=U*F,j=$,D=g,X=y,Z=S,ee=O,se=FILE_HEADER_SIZE+I,_e=0;_e<R;_e++){for(var J=h.getUint32(se,d),q=se+4,Q=0;Q<E;Q++){var ae=w[Q];ae||(ae=w[Q]=new Array(R)),ae[_e]={levelID:_e,levelWidth:R>1||v!==0?D:Z,levelHeight:R>1||v!==0?X:ee,levelBuffer:new Uint8Array(l,q,j)},q+=j}se+=J+4,se=se%4!==0?se+4-se%4:se,D=D>>1||1,X=X>>1||1,Z=D+P-1&~(P-1),ee=X+C-1&~(C-1),j=Z*ee*F}return v!==0?{uncompressed:w.map(function(he){var k=he[0].levelBuffer,re=!1;return v===TYPES$4.FLOAT?k=new Float32Array(he[0].levelBuffer.buffer,he[0].levelBuffer.byteOffset,he[0].levelBuffer.byteLength/4):v===TYPES$4.UNSIGNED_INT?(re=!0,k=new Uint32Array(he[0].levelBuffer.buffer,he[0].levelBuffer.byteOffset,he[0].levelBuffer.byteLength/4)):v===TYPES$4.INT&&(re=!0,k=new Int32Array(he[0].levelBuffer.buffer,he[0].levelBuffer.byteOffset,he[0].levelBuffer.byteLength/4)),{resource:new BufferResource(k,{width:he[0].levelWidth,height:he[0].levelHeight}),type:v,format:re?s.convertFormatToInteger(_):_}}),kvData:M}:{compressed:w.map(function(he){return new CompressedTextureResource(null,{format:m,width:g,height:y,levels:R,levelBuffers:he})}),kvData:M}},s.validate=function(a,l){for(var h=0;h<FILE_IDENTIFIER.length;h++)if(l.getUint8(h)!==FILE_IDENTIFIER[h])return console.error(a+" is not a valid *.ktx file!"),!1;return!0},s.convertFormatToInteger=function(a){switch(a){case FORMATS$4.RGBA:return FORMATS$4.RGBA_INTEGER;case FORMATS$4.RGB:return FORMATS$4.RGB_INTEGER;case FORMATS$4.RG:return FORMATS$4.RG_INTEGER;case FORMATS$4.RED:return FORMATS$4.RED_INTEGER;default:return a}},s.parseKvData=function(a,l,h){for(var d=new Map,v=0;v<l;){var _=a.getUint32(FILE_HEADER_SIZE+v,h),m=FILE_HEADER_SIZE+v+4,g=3-(_+3)%4;if(_===0||_>l-v){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var y=0;y<_&&a.getUint8(m+y)!==0;y++);if(y===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var T=new TextDecoder().decode(new Uint8Array(a.buffer,m,y)),E=new DataView(a.buffer,m+y+1,_-y-1);d.set(T,E),v+=4+_+g}return d},s.loadKeyValueData=!1,s}();/*!
 * @pixi/particle-container - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$f=function(s,a){return extendStatics$f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$f(s,a)};function __extends$f(s,a){extendStatics$f(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var ParticleContainer=function(s){__extends$f(a,s);function a(l,h,d,v){l===void 0&&(l=1500),d===void 0&&(d=16384),v===void 0&&(v=!1);var _=s.call(this)||this,m=16384;return d>m&&(d=m),_._properties=[!1,!0,!1,!1,!1],_._maxSize=l,_._batchSize=d,_._buffers=null,_._bufferUpdateIDs=[],_._updateID=0,_.interactiveChildren=!1,_.blendMode=BLEND_MODES$4.NORMAL,_.autoResize=v,_.roundPixels=!0,_.baseTexture=null,_.setProperties(h),_._tint=0,_.tintRgb=new Float32Array(4),_.tint=16777215,_}return a.prototype.setProperties=function(l){l&&(this._properties[0]="vertices"in l||"scale"in l?!!l.vertices||!!l.scale:this._properties[0],this._properties[1]="position"in l?!!l.position:this._properties[1],this._properties[2]="rotation"in l?!!l.rotation:this._properties[2],this._properties[3]="uvs"in l?!!l.uvs:this._properties[3],this._properties[4]="tint"in l||"alpha"in l?!!l.tint||!!l.alpha:this._properties[4])},a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l,hex2rgb(l,this.tintRgb)},enumerable:!1,configurable:!0}),a.prototype.render=function(l){var h=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return h.onChildrenChange(0)})),l.batch.setObjectRenderer(l.plugins.particle),l.plugins.particle.render(this))},a.prototype.onChildrenChange=function(l){for(var h=Math.floor(l/this._batchSize);this._bufferUpdateIDs.length<h;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[h]=++this._updateID},a.prototype.dispose=function(){if(this._buffers){for(var l=0;l<this._buffers.length;++l)this._buffers[l].destroy();this._buffers=null}},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},a}(Container$1),ParticleBuffer=function(){function s(a,l,h){this.geometry=new Geometry,this.indexBuffer=null,this.size=h,this.dynamicProperties=[],this.staticProperties=[];for(var d=0;d<a.length;++d){var v=a[d];v={attributeName:v.attributeName,size:v.size,uploadFunction:v.uploadFunction,type:v.type||TYPES$4.FLOAT,offset:v.offset},l[d]?this.dynamicProperties.push(v):this.staticProperties.push(v)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return s.prototype.initBuffers=function(){var a=this.geometry,l=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),a.addIndex(this.indexBuffer),this.dynamicStride=0;for(var h=0;h<this.dynamicProperties.length;++h){var d=this.dynamicProperties[h];d.offset=l,l+=d.size,this.dynamicStride+=d.size}var v=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(v),this.dynamicDataUint32=new Uint32Array(v),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);var _=0;this.staticStride=0;for(var h=0;h<this.staticProperties.length;++h){var d=this.staticProperties[h];d.offset=_,_+=d.size,this.staticStride+=d.size}var m=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(m),this.staticDataUint32=new Uint32Array(m),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(var h=0;h<this.dynamicProperties.length;++h){var d=this.dynamicProperties[h];a.addAttribute(d.attributeName,this.dynamicBuffer,0,d.type===TYPES$4.UNSIGNED_BYTE,d.type,this.dynamicStride*4,d.offset*4)}for(var h=0;h<this.staticProperties.length;++h){var d=this.staticProperties[h];a.addAttribute(d.attributeName,this.staticBuffer,0,d.type===TYPES$4.UNSIGNED_BYTE,d.type,this.staticStride*4,d.offset*4)}},s.prototype.uploadDynamic=function(a,l,h){for(var d=0;d<this.dynamicProperties.length;d++){var v=this.dynamicProperties[d];v.uploadFunction(a,l,h,v.type===TYPES$4.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,v.offset)}this.dynamicBuffer._updateID++},s.prototype.uploadStatic=function(a,l,h){for(var d=0;d<this.staticProperties.length;d++){var v=this.staticProperties[d];v.uploadFunction(a,l,h,v.type===TYPES$4.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,v.offset)}this.staticBuffer._updateID++},s.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},s}(),fragment$6=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,ParticleRenderer=function(s){__extends$f(a,s);function a(l){var h=s.call(this,l)||this;return h.shader=null,h.properties=null,h.tempMatrix=new Matrix,h.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:h.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:h.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:h.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:h.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES$4.UNSIGNED_BYTE,uploadFunction:h.uploadTint,offset:0}],h.shader=Shader.from(vertex$3,fragment$6,{}),h.state=State$1.for2d(),h}return a.prototype.render=function(l){var h=l.children,d=l._maxSize,v=l._batchSize,_=this.renderer,m=h.length;if(m!==0){m>d&&!l.autoResize&&(m=d);var g=l._buffers;g||(g=l._buffers=this.generateBuffers(l));var y=h[0]._texture.baseTexture;this.state.blendMode=correctBlendMode(l.blendMode,y.alphaMode),_.state.set(this.state);var T=_.gl,E=l.worldTransform.copyTo(this.tempMatrix);E.prepend(_.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=E.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(l.tintRgb,l.worldAlpha,this.shader.uniforms.uColor,y.alphaMode),this.shader.uniforms.uSampler=y,this.renderer.shader.bind(this.shader);for(var b=!1,R=0,I=0;R<m;R+=v,I+=1){var P=m-R;P>v&&(P=v),I>=g.length&&g.push(this._generateOneMoreBuffer(l));var C=g[I];C.uploadDynamic(h,R,P);var S=l._bufferUpdateIDs[I]||0;b=b||C._updateID<S,b&&(C._updateID=l._updateID,C.uploadStatic(h,R,P)),_.geometry.bind(C.geometry),T.drawElements(T.TRIANGLES,P*6,T.UNSIGNED_SHORT,0)}}},a.prototype.generateBuffers=function(l){for(var h=[],d=l._maxSize,v=l._batchSize,_=l._properties,m=0;m<d;m+=v)h.push(new ParticleBuffer(this.properties,_,v));return h},a.prototype._generateOneMoreBuffer=function(l){var h=l._batchSize,d=l._properties;return new ParticleBuffer(this.properties,d,h)},a.prototype.uploadVertices=function(l,h,d,v,_,m){for(var g=0,y=0,T=0,E=0,b=0;b<d;++b){var R=l[h+b],I=R._texture,P=R.scale.x,C=R.scale.y,S=I.trim,O=I.orig;S?(y=S.x-R.anchor.x*O.width,g=y+S.width,E=S.y-R.anchor.y*O.height,T=E+S.height):(g=O.width*(1-R.anchor.x),y=O.width*-R.anchor.x,T=O.height*(1-R.anchor.y),E=O.height*-R.anchor.y),v[m]=y*P,v[m+1]=E*C,v[m+_]=g*P,v[m+_+1]=E*C,v[m+_*2]=g*P,v[m+_*2+1]=T*C,v[m+_*3]=y*P,v[m+_*3+1]=T*C,m+=_*4}},a.prototype.uploadPosition=function(l,h,d,v,_,m){for(var g=0;g<d;g++){var y=l[h+g].position;v[m]=y.x,v[m+1]=y.y,v[m+_]=y.x,v[m+_+1]=y.y,v[m+_*2]=y.x,v[m+_*2+1]=y.y,v[m+_*3]=y.x,v[m+_*3+1]=y.y,m+=_*4}},a.prototype.uploadRotation=function(l,h,d,v,_,m){for(var g=0;g<d;g++){var y=l[h+g].rotation;v[m]=y,v[m+_]=y,v[m+_*2]=y,v[m+_*3]=y,m+=_*4}},a.prototype.uploadUvs=function(l,h,d,v,_,m){for(var g=0;g<d;++g){var y=l[h+g]._texture._uvs;y?(v[m]=y.x0,v[m+1]=y.y0,v[m+_]=y.x1,v[m+_+1]=y.y1,v[m+_*2]=y.x2,v[m+_*2+1]=y.y2,v[m+_*3]=y.x3,v[m+_*3+1]=y.y3,m+=_*4):(v[m]=0,v[m+1]=0,v[m+_]=0,v[m+_+1]=0,v[m+_*2]=0,v[m+_*2+1]=0,v[m+_*3]=0,v[m+_*3+1]=0,m+=_*4)}},a.prototype.uploadTint=function(l,h,d,v,_,m){for(var g=0;g<d;++g){var y=l[h+g],T=y._texture.baseTexture.alphaMode>0,E=y.alpha,b=E<1&&T?premultiplyTint(y._tintRGB,E):y._tintRGB+(E*255<<24);v[m]=b,v[m+_]=b,v[m+_*2]=b,v[m+_*3]=b,m+=_*4}},a.prototype.destroy=function(){s.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},a}(ObjectRenderer);/*!
 * @pixi/graphics - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var LINE_JOIN;(function(s){s.MITER="miter",s.BEVEL="bevel",s.ROUND="round"})(LINE_JOIN||(LINE_JOIN={}));var LINE_CAP;(function(s){s.BUTT="butt",s.ROUND="round",s.SQUARE="square"})(LINE_CAP||(LINE_CAP={}));var GRAPHICS_CURVES={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(s,a){if(a===void 0&&(a=20),!this.adaptive||!s||isNaN(s))return a;var l=Math.ceil(s/this.maxLength);return l<this.minSegments?l=this.minSegments:l>this.maxSegments&&(l=this.maxSegments),l}},FillStyle=function(){function s(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}return s.prototype.clone=function(){var a=new s;return a.color=this.color,a.alpha=this.alpha,a.texture=this.texture,a.matrix=this.matrix,a.visible=this.visible,a},s.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1},s.prototype.destroy=function(){this.texture=null,this.matrix=null},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$e=function(s,a){return extendStatics$e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$e(s,a)};function __extends$e(s,a){extendStatics$e(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}function fixOrientation(s,a){var l,h;a===void 0&&(a=!1);var d=s.length;if(!(d<6)){for(var v=0,_=0,m=s[d-2],g=s[d-1];_<d;_+=2){var y=s[_],T=s[_+1];v+=(y-m)*(T+g),m=y,g=T}if(!a&&v>0||a&&v<=0)for(var E=d/2,_=E+E%2;_<d;_+=2){var b=d-_-2,R=d-_-1,I=_,P=_+1;l=[s[I],s[b]],s[b]=l[0],s[I]=l[1],h=[s[P],s[R]],s[R]=h[0],s[P]=h[1]}}}var buildPoly={build:function(s){s.points=s.shape.points.slice()},triangulate:function(s,a){var l=s.points,h=s.holes,d=a.points,v=a.indices;if(l.length>=6){fixOrientation(l,!1);for(var _=[],m=0;m<h.length;m++){var g=h[m];fixOrientation(g.points,!0),_.push(l.length/2),l=l.concat(g.points)}var y=earcut$1(l,_,2);if(!y)return;for(var T=d.length/2,m=0;m<y.length;m+=3)v.push(y[m]+T),v.push(y[m+1]+T),v.push(y[m+2]+T);for(var m=0;m<l.length;m++)d.push(l[m])}}},buildCircle={build:function(s){var a=s.points,l,h,d,v,_,m;if(s.type===SHAPES.CIRC){var g=s.shape;l=g.x,h=g.y,_=m=g.radius,d=v=0}else if(s.type===SHAPES.ELIP){var y=s.shape;l=y.x,h=y.y,_=y.width,m=y.height,d=v=0}else{var T=s.shape,E=T.width/2,b=T.height/2;l=T.x+E,h=T.y+b,_=m=Math.max(0,Math.min(T.radius,Math.min(E,b))),d=E-_,v=b-m}if(!(_>=0&&m>=0&&d>=0&&v>=0)){a.length=0;return}var R=Math.ceil(2.3*Math.sqrt(_+m)),I=R*8+(d?4:0)+(v?4:0);if(a.length=I,I!==0){if(R===0){a.length=8,a[0]=a[6]=l+d,a[1]=a[3]=h+v,a[2]=a[4]=l-d,a[5]=a[7]=h-v;return}var P=0,C=R*4+(d?2:0)+2,S=C,O=I;{var w=d+_,U=v,F=l+w,M=l-w,$=h+U;if(a[P++]=F,a[P++]=$,a[--C]=$,a[--C]=M,v){var j=h-U;a[S++]=M,a[S++]=j,a[--O]=j,a[--O]=F}}for(var D=1;D<R;D++){var X=Math.PI/2*(D/R),w=d+Math.cos(X)*_,U=v+Math.sin(X)*m,F=l+w,M=l-w,$=h+U,j=h-U;a[P++]=F,a[P++]=$,a[--C]=$,a[--C]=M,a[S++]=M,a[S++]=j,a[--O]=j,a[--O]=F}{var w=d,U=v+m,F=l+w,M=l-w,$=h+U,j=h-U;a[P++]=F,a[P++]=$,a[--O]=j,a[--O]=F,d&&(a[P++]=M,a[P++]=$,a[--O]=j,a[--O]=M)}}},triangulate:function(s,a){var l=s.points,h=a.points,d=a.indices,v=h.length/2,_=v,m,g;if(s.type!==SHAPES.RREC){var y=s.shape;m=y.x,g=y.y}else{var T=s.shape;m=T.x+T.width/2,g=T.y+T.height/2}var E=s.matrix;h.push(s.matrix?E.a*m+E.c*g+E.tx:m,s.matrix?E.b*m+E.d*g+E.ty:g),v++,h.push(l[0],l[1]);for(var b=2;b<l.length;b+=2)h.push(l[b],l[b+1]),d.push(v++,_,v);d.push(_+1,_,v)}},buildRectangle={build:function(s){var a=s.shape,l=a.x,h=a.y,d=a.width,v=a.height,_=s.points;_.length=0,_.push(l,h,l+d,h,l+d,h+v,l,h+v)},triangulate:function(s,a){var l=s.points,h=a.points,d=h.length/2;h.push(l[0],l[1],l[2],l[3],l[6],l[7],l[4],l[5]),a.indices.push(d,d+1,d+2,d+1,d+2,d+3)}};function getPt(s,a,l){var h=a-s;return s+h*l}function quadraticBezierCurve(s,a,l,h,d,v,_){_===void 0&&(_=[]);for(var m=20,g=_,y=0,T=0,E=0,b=0,R=0,I=0,P=0,C=0;P<=m;++P)C=P/m,y=getPt(s,l,C),T=getPt(a,h,C),E=getPt(l,d,C),b=getPt(h,v,C),R=getPt(y,E,C),I=getPt(T,b,C),!(P===0&&g[g.length-2]===R&&g[g.length-1]===I)&&g.push(R,I);return g}var buildRoundedRectangle={build:function(s){if(Graphics.nextRoundedRectBehavior){buildCircle.build(s);return}var a=s.shape,l=s.points,h=a.x,d=a.y,v=a.width,_=a.height,m=Math.max(0,Math.min(a.radius,Math.min(v,_)/2));l.length=0,m?(quadraticBezierCurve(h,d+m,h,d,h+m,d,l),quadraticBezierCurve(h+v-m,d,h+v,d,h+v,d+m,l),quadraticBezierCurve(h+v,d+_-m,h+v,d+_,h+v-m,d+_,l),quadraticBezierCurve(h+m,d+_,h,d+_,h,d+_-m,l)):l.push(h,d,h+v,d,h+v,d+_,h,d+_)},triangulate:function(s,a){if(Graphics.nextRoundedRectBehavior){buildCircle.triangulate(s,a);return}for(var l=s.points,h=a.points,d=a.indices,v=h.length/2,_=earcut$1(l,null,2),m=0,g=_.length;m<g;m+=3)d.push(_[m]+v),d.push(_[m+1]+v),d.push(_[m+2]+v);for(var m=0,g=l.length;m<g;m++)h.push(l[m],l[++m])}};function square(s,a,l,h,d,v,_,m){var g=s-l*d,y=a-h*d,T=s+l*v,E=a+h*v,b,R;_?(b=h,R=-l):(b=-h,R=l);var I=g+b,P=y+R,C=T+b,S=E+R;return m.push(I,P),m.push(C,S),2}function round(s,a,l,h,d,v,_,m){var g=l-s,y=h-a,T=Math.atan2(g,y),E=Math.atan2(d-s,v-a);m&&T<E?T+=Math.PI*2:!m&&T>E&&(E+=Math.PI*2);var b=T,R=E-T,I=Math.abs(R),P=Math.sqrt(g*g+y*y),C=(15*I*Math.sqrt(P)/Math.PI>>0)+1,S=R/C;if(b+=S,m){_.push(s,a),_.push(l,h);for(var O=1,w=b;O<C;O++,w+=S)_.push(s,a),_.push(s+Math.sin(w)*P,a+Math.cos(w)*P);_.push(s,a),_.push(d,v)}else{_.push(l,h),_.push(s,a);for(var O=1,w=b;O<C;O++,w+=S)_.push(s+Math.sin(w)*P,a+Math.cos(w)*P),_.push(s,a);_.push(d,v),_.push(s,a)}return C*2}function buildNonNativeLine(s,a){var l=s.shape,h=s.points||l.points.slice(),d=a.closePointEps;if(h.length!==0){var v=s.lineStyle,_=new Point(h[0],h[1]),m=new Point(h[h.length-2],h[h.length-1]),g=l.type!==SHAPES.POLY||l.closeStroke,y=Math.abs(_.x-m.x)<d&&Math.abs(_.y-m.y)<d;if(g){h=h.slice(),y&&(h.pop(),h.pop(),m.set(h[h.length-2],h[h.length-1]));var T=(_.x+m.x)*.5,E=(m.y+_.y)*.5;h.unshift(T,E),h.push(T,E)}var b=a.points,R=h.length/2,I=h.length,P=b.length/2,C=v.width/2,S=C*C,O=v.miterLimit*v.miterLimit,w=h[0],U=h[1],F=h[2],M=h[3],$=0,j=0,D=-(U-M),X=w-F,Z=0,ee=0,se=Math.sqrt(D*D+X*X);D/=se,X/=se,D*=C,X*=C;var _e=v.alignment,J=(1-_e)*2,q=_e*2;g||(v.cap===LINE_CAP.ROUND?I+=round(w-D*(J-q)*.5,U-X*(J-q)*.5,w-D*J,U-X*J,w+D*q,U+X*q,b,!0)+2:v.cap===LINE_CAP.SQUARE&&(I+=square(w,U,D,X,J,q,!0,b))),b.push(w-D*J,U-X*J),b.push(w+D*q,U+X*q);for(var Q=1;Q<R-1;++Q){w=h[(Q-1)*2],U=h[(Q-1)*2+1],F=h[Q*2],M=h[Q*2+1],$=h[(Q+1)*2],j=h[(Q+1)*2+1],D=-(U-M),X=w-F,se=Math.sqrt(D*D+X*X),D/=se,X/=se,D*=C,X*=C,Z=-(M-j),ee=F-$,se=Math.sqrt(Z*Z+ee*ee),Z/=se,ee/=se,Z*=C,ee*=C;var ae=F-w,he=U-M,k=F-$,re=j-M,oe=he*k-re*ae,le=oe<0;if(Math.abs(oe)<.1){b.push(F-D*J,M-X*J),b.push(F+D*q,M+X*q);continue}var de=(-D+w)*(-X+M)-(-D+F)*(-X+U),xe=(-Z+$)*(-ee+M)-(-Z+F)*(-ee+j),pe=(ae*xe-k*de)/oe,ve=(re*de-he*xe)/oe,Re=(pe-F)*(pe-F)+(ve-M)*(ve-M),Te=F+(pe-F)*J,ge=M+(ve-M)*J,ce=F-(pe-F)*q,me=M-(ve-M)*q,A=Math.min(ae*ae+he*he,k*k+re*re),N=le?J:q,L=A+N*N*S,B=Re<=L;B?v.join===LINE_JOIN.BEVEL||Re/S>O?(le?(b.push(Te,ge),b.push(F+D*q,M+X*q),b.push(Te,ge),b.push(F+Z*q,M+ee*q)):(b.push(F-D*J,M-X*J),b.push(ce,me),b.push(F-Z*J,M-ee*J),b.push(ce,me)),I+=2):v.join===LINE_JOIN.ROUND?le?(b.push(Te,ge),b.push(F+D*q,M+X*q),I+=round(F,M,F+D*q,M+X*q,F+Z*q,M+ee*q,b,!0)+4,b.push(Te,ge),b.push(F+Z*q,M+ee*q)):(b.push(F-D*J,M-X*J),b.push(ce,me),I+=round(F,M,F-D*J,M-X*J,F-Z*J,M-ee*J,b,!1)+4,b.push(F-Z*J,M-ee*J),b.push(ce,me)):(b.push(Te,ge),b.push(ce,me)):(b.push(F-D*J,M-X*J),b.push(F+D*q,M+X*q),v.join===LINE_JOIN.ROUND?le?I+=round(F,M,F+D*q,M+X*q,F+Z*q,M+ee*q,b,!0)+2:I+=round(F,M,F-D*J,M-X*J,F-Z*J,M-ee*J,b,!1)+2:v.join===LINE_JOIN.MITER&&Re/S<=O&&(le?(b.push(ce,me),b.push(ce,me)):(b.push(Te,ge),b.push(Te,ge)),I+=2),b.push(F-Z*J,M-ee*J),b.push(F+Z*q,M+ee*q),I+=2)}w=h[(R-2)*2],U=h[(R-2)*2+1],F=h[(R-1)*2],M=h[(R-1)*2+1],D=-(U-M),X=w-F,se=Math.sqrt(D*D+X*X),D/=se,X/=se,D*=C,X*=C,b.push(F-D*J,M-X*J),b.push(F+D*q,M+X*q),g||(v.cap===LINE_CAP.ROUND?I+=round(F-D*(J-q)*.5,M-X*(J-q)*.5,F-D*J,M-X*J,F+D*q,M+X*q,b,!1)+2:v.cap===LINE_CAP.SQUARE&&(I+=square(F,M,D,X,J,q,!1,b)));for(var G=a.indices,Y=GRAPHICS_CURVES.epsilon*GRAPHICS_CURVES.epsilon,Q=P;Q<I+P-2;++Q)w=b[Q*2],U=b[Q*2+1],F=b[(Q+1)*2],M=b[(Q+1)*2+1],$=b[(Q+2)*2],j=b[(Q+2)*2+1],!(Math.abs(w*(M-j)+F*(j-U)+$*(U-M))<Y)&&G.push(Q,Q+1,Q+2)}}function buildNativeLine(s,a){var l=0,h=s.shape,d=s.points||h.points,v=h.type!==SHAPES.POLY||h.closeStroke;if(d.length!==0){var _=a.points,m=a.indices,g=d.length/2,y=_.length/2,T=y;for(_.push(d[0],d[1]),l=1;l<g;l++)_.push(d[l*2],d[l*2+1]),m.push(T,T+1),T++;v&&m.push(T,y)}}function buildLine(s,a){s.lineStyle.native?buildNativeLine(s,a):buildNonNativeLine(s,a)}var ArcUtils=function(){function s(){}return s.curveTo=function(a,l,h,d,v,_){var m=_[_.length-2],g=_[_.length-1],y=g-l,T=m-a,E=d-l,b=h-a,R=Math.abs(y*b-T*E);if(R<1e-8||v===0)return(_[_.length-2]!==a||_[_.length-1]!==l)&&_.push(a,l),null;var I=y*y+T*T,P=E*E+b*b,C=y*E+T*b,S=v*Math.sqrt(I)/R,O=v*Math.sqrt(P)/R,w=S*C/I,U=O*C/P,F=S*b+O*T,M=S*E+O*y,$=T*(O+w),j=y*(O+w),D=b*(S+U),X=E*(S+U),Z=Math.atan2(j-M,$-F),ee=Math.atan2(X-M,D-F);return{cx:F+a,cy:M+l,radius:v,startAngle:Z,endAngle:ee,anticlockwise:T*E>b*y}},s.arc=function(a,l,h,d,v,_,m,g,y){for(var T=m-_,E=GRAPHICS_CURVES._segmentsCount(Math.abs(T)*v,Math.ceil(Math.abs(T)/PI_2)*40),b=T/(E*2),R=b*2,I=Math.cos(b),P=Math.sin(b),C=E-1,S=C%1/C,O=0;O<=C;++O){var w=O+S*O,U=b+_+R*w,F=Math.cos(U),M=-Math.sin(U);y.push((I*F+P*M)*v+h,(I*-M+P*F)*v+d)}},s}(),BezierUtils=function(){function s(){}return s.curveLength=function(a,l,h,d,v,_,m,g){for(var y=10,T=0,E=0,b=0,R=0,I=0,P=0,C=0,S=0,O=0,w=0,U=0,F=a,M=l,$=1;$<=y;++$)E=$/y,b=E*E,R=b*E,I=1-E,P=I*I,C=P*I,S=C*a+3*P*E*h+3*I*b*v+R*m,O=C*l+3*P*E*d+3*I*b*_+R*g,w=F-S,U=M-O,F=S,M=O,T+=Math.sqrt(w*w+U*U);return T},s.curveTo=function(a,l,h,d,v,_,m){var g=m[m.length-2],y=m[m.length-1];m.length-=2;var T=GRAPHICS_CURVES._segmentsCount(s.curveLength(g,y,a,l,h,d,v,_)),E=0,b=0,R=0,I=0,P=0;m.push(g,y);for(var C=1,S=0;C<=T;++C)S=C/T,E=1-S,b=E*E,R=b*E,I=S*S,P=I*S,m.push(R*g+3*b*S*a+3*E*I*h+P*v,R*y+3*b*S*l+3*E*I*d+P*_)},s}(),QuadraticUtils=function(){function s(){}return s.curveLength=function(a,l,h,d,v,_){var m=a-2*h+v,g=l-2*d+_,y=2*h-2*a,T=2*d-2*l,E=4*(m*m+g*g),b=4*(m*y+g*T),R=y*y+T*T,I=2*Math.sqrt(E+b+R),P=Math.sqrt(E),C=2*E*P,S=2*Math.sqrt(R),O=b/P;return(C*I+P*b*(I-S)+(4*R*E-b*b)*Math.log((2*P+O+I)/(O+S)))/(4*C)},s.curveTo=function(a,l,h,d,v){for(var _=v[v.length-2],m=v[v.length-1],g=GRAPHICS_CURVES._segmentsCount(s.curveLength(_,m,a,l,h,d)),y=0,T=0,E=1;E<=g;++E){var b=E/g;y=_+(a-_)*b,T=m+(l-m)*b,v.push(y+(a+(h-a)*b-y)*b,T+(l+(d-l)*b-T)*b)}},s}(),BatchPart=function(){function s(){this.reset()}return s.prototype.begin=function(a,l,h){this.reset(),this.style=a,this.start=l,this.attribStart=h},s.prototype.end=function(a,l){this.attribSize=l-this.attribStart,this.size=a-this.start},s.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},s}(),_a,FILL_COMMANDS=(_a={},_a[SHAPES.POLY]=buildPoly,_a[SHAPES.CIRC]=buildCircle,_a[SHAPES.ELIP]=buildCircle,_a[SHAPES.RECT]=buildRectangle,_a[SHAPES.RREC]=buildRoundedRectangle,_a),BATCH_POOL=[],DRAW_CALL_POOL=[],GraphicsData=function(){function s(a,l,h,d){l===void 0&&(l=null),h===void 0&&(h=null),d===void 0&&(d=null),this.points=[],this.holes=[],this.shape=a,this.lineStyle=h,this.fillStyle=l,this.matrix=d,this.type=a.type}return s.prototype.clone=function(){return new s(this.shape,this.fillStyle,this.lineStyle,this.matrix)},s.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},s}(),tmpPoint=new Point,tmpBounds=new Bounds$2,GraphicsGeometry=function(s){__extends$e(a,s);function a(){var l=s.call(this)||this;return l.closePointEps=1e-4,l.boundsPadding=0,l.uvsFloat32=null,l.indicesUint16=null,l.batchable=!1,l.points=[],l.colors=[],l.uvs=[],l.indices=[],l.textureIds=[],l.graphicsData=[],l.drawCalls=[],l.batchDirty=-1,l.batches=[],l.dirty=0,l.cacheDirty=-1,l.clearDirty=0,l.shapeIndex=0,l._bounds=new Bounds$2,l.boundsDirty=-1,l}return Object.defineProperty(a.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),a.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var l=0;l<this.drawCalls.length;l++)this.drawCalls[l].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[l]);this.drawCalls.length=0;for(var l=0;l<this.batches.length;l++){var h=this.batches[l];h.reset(),BATCH_POOL.push(h)}this.batches.length=0},a.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},a.prototype.drawShape=function(l,h,d,v){h===void 0&&(h=null),d===void 0&&(d=null),v===void 0&&(v=null);var _=new GraphicsData(l,h,d,v);return this.graphicsData.push(_),this.dirty++,this},a.prototype.drawHole=function(l,h){if(h===void 0&&(h=null),!this.graphicsData.length)return null;var d=new GraphicsData(l,null,null,h),v=this.graphicsData[this.graphicsData.length-1];return d.lineStyle=v.lineStyle,v.holes.push(d),this.dirty++,this},a.prototype.destroy=function(){s.prototype.destroy.call(this);for(var l=0;l<this.graphicsData.length;++l)this.graphicsData[l].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},a.prototype.containsPoint=function(l){for(var h=this.graphicsData,d=0;d<h.length;++d){var v=h[d];if(!!v.fillStyle.visible&&v.shape&&(v.matrix?v.matrix.applyInverse(l,tmpPoint):tmpPoint.copyFrom(l),v.shape.contains(tmpPoint.x,tmpPoint.y))){var _=!1;if(v.holes)for(var m=0;m<v.holes.length;m++){var g=v.holes[m];if(g.shape.contains(tmpPoint.x,tmpPoint.y)){_=!0;break}}if(!_)return!0}}return!1},a.prototype.updateBatches=function(l){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var h=this.uvs,d=this.graphicsData,v=null,_=null;this.batches.length>0&&(v=this.batches[this.batches.length-1],_=v.style);for(var m=this.shapeIndex;m<d.length;m++){this.shapeIndex++;var g=d[m],y=g.fillStyle,T=g.lineStyle,E=FILL_COMMANDS[g.type];E.build(g),g.matrix&&this.transformPoints(g.points,g.matrix),(y.visible||T.visible)&&this.processHoles(g.holes);for(var b=0;b<2;b++){var R=b===0?y:T;if(!!R.visible){var I=R.texture.baseTexture,P=this.indices.length,C=this.points.length/2;I.wrapMode=WRAP_MODES$4.REPEAT,b===0?this.processFill(g):this.processLine(g);var S=this.points.length/2-C;S!==0&&(v&&!this._compareStyles(_,R)&&(v.end(P,C),v=null),v||(v=BATCH_POOL.pop()||new BatchPart,v.begin(R,P,C),this.batches.push(v),_=R),this.addUvs(this.points,h,R.texture,C,S,R.matrix))}}}var O=this.indices.length,w=this.points.length/2;if(v&&v.end(O,w),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var U=w>65535&&l;this.indicesUint16=U?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},a.prototype._compareStyles=function(l,h){return!(!l||!h||l.texture.baseTexture!==h.texture.baseTexture||l.color+l.alpha!==h.color+h.alpha||!!l.native!=!!h.native)},a.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var l=0,h=this.graphicsData.length;l<h;l++){var d=this.graphicsData[l],v=d.fillStyle,_=d.lineStyle;if(v&&!v.texture.baseTexture.valid||_&&!_.texture.baseTexture.valid)return!1}return!0},a.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var l=this.batches,h=0,d=l.length;h<d;h++)for(var v=l[h],_=0;_<v.size;_++){var m=v.start+_;this.indicesUint16[m]=this.indicesUint16[m]-v.attribStart}},a.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var l=this.batches,h=0;h<l.length;h++)if(l[h].style.native)return!1;return this.points.length<a.BATCHABLE_SIZE*2},a.prototype.buildDrawCalls=function(){for(var l=++BaseTexture._globalBatch,h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[h]);this.drawCalls.length=0;var d=this.colors,v=this.textureIds,_=DRAW_CALL_POOL.pop();_||(_=new BatchDrawCall,_.texArray=new BatchTextureArray),_.texArray.count=0,_.start=0,_.size=0,_.type=DRAW_MODES$4.TRIANGLES;var m=0,g=null,y=0,T=!1,E=DRAW_MODES$4.TRIANGLES,b=0;this.drawCalls.push(_);for(var h=0;h<this.batches.length;h++){var R=this.batches[h],I=8,P=R.style,C=P.texture.baseTexture;T!==!!P.native&&(T=!!P.native,E=T?DRAW_MODES$4.LINES:DRAW_MODES$4.TRIANGLES,g=null,m=I,l++),g!==C&&(g=C,C._batchEnabled!==l&&(m===I&&(l++,m=0,_.size>0&&(_=DRAW_CALL_POOL.pop(),_||(_=new BatchDrawCall,_.texArray=new BatchTextureArray),this.drawCalls.push(_)),_.start=b,_.size=0,_.texArray.count=0,_.type=E),C.touched=1,C._batchEnabled=l,C._batchLocation=m,C.wrapMode=WRAP_MODES$4.REPEAT,_.texArray.elements[_.texArray.count++]=C,m++)),_.size+=R.size,b+=R.size,y=C._batchLocation,this.addColors(d,P.color,P.alpha,R.attribSize,R.attribStart),this.addTextureIds(v,y,R.attribSize,R.attribStart)}BaseTexture._globalBatch=l,this.packAttributes()},a.prototype.packAttributes=function(){for(var l=this.points,h=this.uvs,d=this.colors,v=this.textureIds,_=new ArrayBuffer(l.length*3*4),m=new Float32Array(_),g=new Uint32Array(_),y=0,T=0;T<l.length/2;T++)m[y++]=l[T*2],m[y++]=l[T*2+1],m[y++]=h[T*2],m[y++]=h[T*2+1],g[y++]=d[T],m[y++]=v[T];this._buffer.update(_),this._indexBuffer.update(this.indicesUint16)},a.prototype.processFill=function(l){if(l.holes.length)buildPoly.triangulate(l,this);else{var h=FILL_COMMANDS[l.type];h.triangulate(l,this)}},a.prototype.processLine=function(l){buildLine(l,this);for(var h=0;h<l.holes.length;h++)buildLine(l.holes[h],this)},a.prototype.processHoles=function(l){for(var h=0;h<l.length;h++){var d=l[h],v=FILL_COMMANDS[d.type];v.build(d),d.matrix&&this.transformPoints(d.points,d.matrix)}},a.prototype.calculateBounds=function(){var l=this._bounds,h=tmpBounds,d=Matrix.IDENTITY;this._bounds.clear(),h.clear();for(var v=0;v<this.graphicsData.length;v++){var _=this.graphicsData[v],m=_.shape,g=_.type,y=_.lineStyle,T=_.matrix||Matrix.IDENTITY,E=0;if(y&&y.visible&&(E=y.width,g!==SHAPES.POLY||_.fillStyle.visible?E*=Math.max(0,y.alignment):E*=Math.max(y.alignment,1-y.alignment)),d!==T&&(h.isEmpty()||(l.addBoundsMatrix(h,d),h.clear()),d=T),g===SHAPES.RECT||g===SHAPES.RREC){var b=m;h.addFramePad(b.x,b.y,b.x+b.width,b.y+b.height,E,E)}else if(g===SHAPES.CIRC){var R=m;h.addFramePad(R.x,R.y,R.x,R.y,R.radius+E,R.radius+E)}else if(g===SHAPES.ELIP){var I=m;h.addFramePad(I.x,I.y,I.x,I.y,I.width+E,I.height+E)}else{var P=m;l.addVerticesMatrix(d,P.points,0,P.points.length,E,E)}}h.isEmpty()||l.addBoundsMatrix(h,d),l.pad(this.boundsPadding,this.boundsPadding)},a.prototype.transformPoints=function(l,h){for(var d=0;d<l.length/2;d++){var v=l[d*2],_=l[d*2+1];l[d*2]=h.a*v+h.c*_+h.tx,l[d*2+1]=h.b*v+h.d*_+h.ty}},a.prototype.addColors=function(l,h,d,v,_){_===void 0&&(_=0);var m=(h>>16)+(h&65280)+((h&255)<<16),g=premultiplyTint(m,d);l.length=Math.max(l.length,_+v);for(var y=0;y<v;y++)l[_+y]=g},a.prototype.addTextureIds=function(l,h,d,v){v===void 0&&(v=0),l.length=Math.max(l.length,v+d);for(var _=0;_<d;_++)l[v+_]=h},a.prototype.addUvs=function(l,h,d,v,_,m){m===void 0&&(m=null);for(var g=0,y=h.length,T=d.frame;g<_;){var E=l[(v+g)*2],b=l[(v+g)*2+1];if(m){var R=m.a*E+m.c*b+m.tx;b=m.b*E+m.d*b+m.ty,E=R}g++,h.push(E/T.width,b/T.height)}var I=d.baseTexture;(T.width<I.width||T.height<I.height)&&this.adjustUvs(h,d,y,_)},a.prototype.adjustUvs=function(l,h,d,v){for(var _=h.baseTexture,m=1e-6,g=d+v*2,y=h.frame,T=y.width/_.width,E=y.height/_.height,b=y.x/y.width,R=y.y/y.height,I=Math.floor(l[d]+m),P=Math.floor(l[d+1]+m),C=d+2;C<g;C+=2)I=Math.min(I,Math.floor(l[C]+m)),P=Math.min(P,Math.floor(l[C+1]+m));b-=I,R-=P;for(var C=d;C<g;C+=2)l[C]=(l[C]+b)*T,l[C+1]=(l[C+1]+R)*E},a.BATCHABLE_SIZE=100,a}(BatchGeometry),LineStyle=function(s){__extends$e(a,s);function a(){var l=s!==null&&s.apply(this,arguments)||this;return l.width=0,l.alignment=.5,l.native=!1,l.cap=LINE_CAP.BUTT,l.join=LINE_JOIN.MITER,l.miterLimit=10,l}return a.prototype.clone=function(){var l=new a;return l.color=this.color,l.alpha=this.alpha,l.texture=this.texture,l.matrix=this.matrix,l.visible=this.visible,l.width=this.width,l.alignment=this.alignment,l.native=this.native,l.cap=this.cap,l.join=this.join,l.miterLimit=this.miterLimit,l},a.prototype.reset=function(){s.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},a}(FillStyle),temp=new Float32Array(3),DEFAULT_SHADERS={},Graphics=function(s){__extends$e(a,s);function a(l){l===void 0&&(l=null);var h=s.call(this)||this;return h.shader=null,h.pluginName="batch",h.currentPath=null,h.batches=[],h.batchTint=-1,h.batchDirty=-1,h.vertexData=null,h._fillStyle=new FillStyle,h._lineStyle=new LineStyle,h._matrix=null,h._holeMode=!1,h.state=State$1.for2d(),h._geometry=l||new GraphicsGeometry,h._geometry.refCount++,h._transformID=-1,h.tint=16777215,h.blendMode=BLEND_MODES$4.NORMAL,h}return Object.defineProperty(a.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),a.prototype.clone=function(){return this.finishPoly(),new a(this._geometry)},Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),a.prototype.lineStyle=function(l,h,d,v,_){return l===void 0&&(l=null),h===void 0&&(h=0),d===void 0&&(d=1),v===void 0&&(v=.5),_===void 0&&(_=!1),typeof l=="number"&&(l={width:l,color:h,alpha:d,alignment:v,native:_}),this.lineTextureStyle(l)},a.prototype.lineTextureStyle=function(l){l=Object.assign({width:0,texture:Texture.WHITE,color:l&&l.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10},l),this.currentPath&&this.startPoly();var h=l.width>0&&l.alpha>0;return h?(l.matrix&&(l.matrix=l.matrix.clone(),l.matrix.invert()),Object.assign(this._lineStyle,{visible:h},l)):this._lineStyle.reset(),this},a.prototype.startPoly=function(){if(this.currentPath){var l=this.currentPath.points,h=this.currentPath.points.length;h>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(l[h-2],l[h-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1},a.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},a.prototype.moveTo=function(l,h){return this.startPoly(),this.currentPath.points[0]=l,this.currentPath.points[1]=h,this},a.prototype.lineTo=function(l,h){this.currentPath||this.moveTo(0,0);var d=this.currentPath.points,v=d[d.length-2],_=d[d.length-1];return(v!==l||_!==h)&&d.push(l,h),this},a.prototype._initCurve=function(l,h){l===void 0&&(l=0),h===void 0&&(h=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[l,h]):this.moveTo(l,h)},a.prototype.quadraticCurveTo=function(l,h,d,v){this._initCurve();var _=this.currentPath.points;return _.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(l,h,d,v,_),this},a.prototype.bezierCurveTo=function(l,h,d,v,_,m){return this._initCurve(),BezierUtils.curveTo(l,h,d,v,_,m,this.currentPath.points),this},a.prototype.arcTo=function(l,h,d,v,_){this._initCurve(l,h);var m=this.currentPath.points,g=ArcUtils.curveTo(l,h,d,v,_,m);if(g){var y=g.cx,T=g.cy,E=g.radius,b=g.startAngle,R=g.endAngle,I=g.anticlockwise;this.arc(y,T,E,b,R,I)}return this},a.prototype.arc=function(l,h,d,v,_,m){if(m===void 0&&(m=!1),v===_)return this;!m&&_<=v?_+=PI_2:m&&v<=_&&(v+=PI_2);var g=_-v;if(g===0)return this;var y=l+Math.cos(v)*d,T=h+Math.sin(v)*d,E=this._geometry.closePointEps,b=this.currentPath?this.currentPath.points:null;if(b){var R=Math.abs(b[b.length-2]-y),I=Math.abs(b[b.length-1]-T);R<E&&I<E||b.push(y,T)}else this.moveTo(y,T),b=this.currentPath.points;return ArcUtils.arc(y,T,l,h,d,v,_,m,b),this},a.prototype.beginFill=function(l,h){return l===void 0&&(l=0),h===void 0&&(h=1),this.beginTextureFill({texture:Texture.WHITE,color:l,alpha:h})},a.prototype.beginTextureFill=function(l){l=Object.assign({texture:Texture.WHITE,color:16777215,alpha:1,matrix:null},l),this.currentPath&&this.startPoly();var h=l.alpha>0;return h?(l.matrix&&(l.matrix=l.matrix.clone(),l.matrix.invert()),Object.assign(this._fillStyle,{visible:h},l)):this._fillStyle.reset(),this},a.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},a.prototype.drawRect=function(l,h,d,v){return this.drawShape(new Rectangle(l,h,d,v))},a.prototype.drawRoundedRect=function(l,h,d,v,_){return this.drawShape(new RoundedRectangle(l,h,d,v,_))},a.prototype.drawCircle=function(l,h,d){return this.drawShape(new Circle(l,h,d))},a.prototype.drawEllipse=function(l,h,d,v){return this.drawShape(new Ellipse(l,h,d,v))},a.prototype.drawPolygon=function(){for(var l=arguments,h=[],d=0;d<arguments.length;d++)h[d]=l[d];var v,_=!0,m=h[0];m.points?(_=m.closeStroke,v=m.points):Array.isArray(h[0])?v=h[0]:v=h;var g=new Polygon(v);return g.closeStroke=_,this.drawShape(g),this},a.prototype.drawShape=function(l){return this._holeMode?this._geometry.drawHole(l,this._matrix):this._geometry.drawShape(l,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},a.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},a.prototype.isFastRect=function(){var l=this._geometry.graphicsData;return l.length===1&&l[0].shape.type===SHAPES.RECT&&!l[0].matrix&&!l[0].holes.length&&!(l[0].lineStyle.visible&&l[0].lineStyle.width)},a.prototype._render=function(l){this.finishPoly();var h=this._geometry,d=l.context.supports.uint32Indices;h.updateBatches(d),h.batchable?(this.batchDirty!==h.batchDirty&&this._populateBatches(),this._renderBatched(l)):(l.batch.flush(),this._renderDirect(l))},a.prototype._populateBatches=function(){var l=this._geometry,h=this.blendMode,d=l.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=l.batchDirty,this.batches.length=d,this.vertexData=new Float32Array(l.points);for(var v=0;v<d;v++){var _=l.batches[v],m=_.style.color,g=new Float32Array(this.vertexData.buffer,_.attribStart*4*2,_.attribSize*2),y=new Float32Array(l.uvsFloat32.buffer,_.attribStart*4*2,_.attribSize*2),T=new Uint16Array(l.indicesUint16.buffer,_.start*2,_.size),E={vertexData:g,blendMode:h,indices:T,uvs:y,_batchRGB:hex2rgb(m),_tintRGB:m,_texture:_.style.texture,alpha:_.style.alpha,worldAlpha:1};this.batches[v]=E}},a.prototype._renderBatched=function(l){if(!!this.batches.length){l.batch.setObjectRenderer(l.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var h=0,d=this.batches.length;h<d;h++){var v=this.batches[h];v.worldAlpha=this.worldAlpha*v.alpha,l.plugins[this.pluginName].render(v)}}},a.prototype._renderDirect=function(l){var h=this._resolveDirectShader(l),d=this._geometry,v=this.tint,_=this.worldAlpha,m=h.uniforms,g=d.drawCalls;m.translationMatrix=this.transform.worldTransform,m.tint[0]=(v>>16&255)/255*_,m.tint[1]=(v>>8&255)/255*_,m.tint[2]=(v&255)/255*_,m.tint[3]=_,l.shader.bind(h),l.geometry.bind(d,h),l.state.set(this.state);for(var y=0,T=g.length;y<T;y++)this._renderDrawCallDirect(l,d.drawCalls[y])},a.prototype._renderDrawCallDirect=function(l,h){for(var d=h.texArray,v=h.type,_=h.size,m=h.start,g=d.count,y=0;y<g;y++)l.texture.bind(d.elements[y],y);l.geometry.draw(v,_,m)},a.prototype._resolveDirectShader=function(l){var h=this.shader,d=this.pluginName;if(!h){if(!DEFAULT_SHADERS[d]){for(var v=l.plugins[d].MAX_TEXTURES,_=new Int32Array(v),m=0;m<v;m++)_[m]=m;var g={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:_},!0)},y=l.plugins[d]._shader.program;DEFAULT_SHADERS[d]=new Shader(y,g)}h=DEFAULT_SHADERS[d]}return h},a.prototype._calculateBounds=function(){this.finishPoly();var l=this._geometry;if(!!l.graphicsData.length){var h=l.bounds,d=h.minX,v=h.minY,_=h.maxX,m=h.maxY;this._bounds.addFrame(this.transform,d,v,_,m)}},a.prototype.containsPoint=function(l){return this.worldTransform.applyInverse(l,a._TEMP_POINT),this._geometry.containsPoint(a._TEMP_POINT)},a.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var l=hex2rgb(this.tint,temp),h=0;h<this.batches.length;h++){var d=this.batches[h],v=d._batchRGB,_=l[0]*v[0]*255,m=l[1]*v[1]*255,g=l[2]*v[2]*255,y=(_<<16)+(m<<8)+(g|0);d._tintRGB=(y>>16)+(y&65280)+((y&255)<<16)}}},a.prototype.calculateVertices=function(){var l=this.transform._worldID;if(this._transformID!==l){this._transformID=l;for(var h=this.transform.worldTransform,d=h.a,v=h.b,_=h.c,m=h.d,g=h.tx,y=h.ty,T=this._geometry.points,E=this.vertexData,b=0,R=0;R<T.length;R+=2){var I=T[R],P=T[R+1];E[b++]=d*I+_*P+g,E[b++]=m*P+v*I+y}}},a.prototype.closePath=function(){var l=this.currentPath;return l&&(l.closeStroke=!0,this.finishPoly()),this},a.prototype.setMatrix=function(l){return this._matrix=l,this},a.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},a.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},a.prototype.destroy=function(l){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,s.prototype.destroy.call(this,l)},a.nextRoundedRectBehavior=!1,a._TEMP_POINT=new Point,a}(Container$1),graphicsUtils={buildPoly,buildCircle,buildRectangle,buildRoundedRectangle,buildLine,ArcUtils,BezierUtils,QuadraticUtils,BatchPart,FILL_COMMANDS,BATCH_POOL,DRAW_CALL_POOL};/*!
 * @pixi/sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$d=function(s,a){return extendStatics$d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$d(s,a)};function __extends$d(s,a){extendStatics$d(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]),Sprite=function(s){__extends$d(a,s);function a(l){var h=s.call(this)||this;return h._anchor=new ObservablePoint(h._onAnchorUpdate,h,l?l.defaultAnchor.x:0,l?l.defaultAnchor.y:0),h._texture=null,h._width=0,h._height=0,h._tint=null,h._tintRGB=null,h.tint=16777215,h.blendMode=BLEND_MODES$4.NORMAL,h._cachedTint=16777215,h.uvs=null,h.texture=l||Texture.EMPTY,h.vertexData=new Float32Array(8),h.vertexTrimmedData=null,h._transformID=-1,h._textureID=-1,h._transformTrimmedID=-1,h._textureTrimmedID=-1,h.indices=indices,h.pluginName="batch",h.isSprite=!0,h._roundPixels=settings$1.ROUND_PIXELS,h}return a.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)},a.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},a.prototype.calculateVertices=function(){var l=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===l._updateID)){this._textureID!==l._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=l._updateID;var h=this.transform.worldTransform,d=h.a,v=h.b,_=h.c,m=h.d,g=h.tx,y=h.ty,T=this.vertexData,E=l.trim,b=l.orig,R=this._anchor,I=0,P=0,C=0,S=0;if(E?(P=E.x-R._x*b.width,I=P+E.width,S=E.y-R._y*b.height,C=S+E.height):(P=-R._x*b.width,I=P+b.width,S=-R._y*b.height,C=S+b.height),T[0]=d*P+_*S+g,T[1]=m*S+v*P+y,T[2]=d*I+_*S+g,T[3]=m*S+v*I+y,T[4]=d*I+_*C+g,T[5]=m*C+v*I+y,T[6]=d*P+_*C+g,T[7]=m*C+v*P+y,this._roundPixels)for(var O=settings$1.RESOLUTION,w=0;w<T.length;++w)T[w]=Math.round((T[w]*O|0)/O)}},a.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var l=this._texture,h=this.vertexTrimmedData,d=l.orig,v=this._anchor,_=this.transform.worldTransform,m=_.a,g=_.b,y=_.c,T=_.d,E=_.tx,b=_.ty,R=-v._x*d.width,I=R+d.width,P=-v._y*d.height,C=P+d.height;h[0]=m*R+y*P+E,h[1]=T*P+g*R+b,h[2]=m*I+y*P+E,h[3]=T*P+g*I+b,h[4]=m*I+y*C+E,h[5]=T*C+g*I+b,h[6]=m*R+y*C+E,h[7]=T*C+g*R+b},a.prototype._render=function(l){this.calculateVertices(),l.batch.setObjectRenderer(l.plugins[this.pluginName]),l.plugins[this.pluginName].render(this)},a.prototype._calculateBounds=function(){var l=this._texture.trim,h=this._texture.orig;!l||l.width===h.width&&l.height===h.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},a.prototype.getLocalBounds=function(l){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds$2),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),l||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),l=this._localBoundsRect),this._localBounds.getRectangle(l)):s.prototype.getLocalBounds.call(this,l)},a.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,tempPoint$2);var h=this._texture.orig.width,d=this._texture.orig.height,v=-h*this.anchor.x,_=0;return tempPoint$2.x>=v&&tempPoint$2.x<v+h&&(_=-d*this.anchor.y,tempPoint$2.y>=_&&tempPoint$2.y<_+d)},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var h=typeof l=="boolean"?l:l&&l.texture;if(h){var d=typeof l=="boolean"?l:l&&l.baseTexture;this._texture.destroy(!!d)}this._texture=null},a.from=function(l,h){var d=l instanceof Texture?l:Texture.from(l,h);return new a(d)},Object.defineProperty(a.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){this._roundPixels!==l&&(this._transformID=-1),this._roundPixels=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(l){var h=sign(this.scale.x)||1;this.scale.x=h*l/this._texture.orig.width,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(l){var h=sign(this.scale.y)||1;this.scale.y=h*l/this._texture.orig.height,this._height=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"anchor",{get:function(){return this._anchor},set:function(l){this._anchor.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l,this._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"texture",{get:function(){return this._texture},set:function(l){this._texture!==l&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=l||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,l&&(l.baseTexture.valid?this._onTextureUpdate():l.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),a}(Container$1);/*!
 * @pixi/text - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$c=function(s,a){return extendStatics$c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$c(s,a)};function __extends$c(s,a){extendStatics$c(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var TEXT_GRADIENT;(function(s){s[s.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",s[s.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(TEXT_GRADIENT||(TEXT_GRADIENT={}));var defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],TextStyle=function(){function s(a){this.styleID=0,this.reset(),deepCopyProperties(this,a,a)}return s.prototype.clone=function(){var a={};return deepCopyProperties(a,this,defaultStyle),new s(a)},s.prototype.reset=function(){deepCopyProperties(this,defaultStyle,defaultStyle)},Object.defineProperty(s.prototype,"align",{get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"breakWords",{get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(a){this._dropShadowAlpha!==a&&(this._dropShadowAlpha=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(a){var l=getColor(a);this._dropShadowColor!==l&&(this._dropShadowColor=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fill",{get:function(){return this._fill},set:function(a){var l=getColor(a);this._fill!==l&&(this._fill=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(a){areArraysEqual(this._fillGradientStops,a)||(this._fillGradientStops=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontSize",{get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"leading",{get:function(){return this._leading},set:function(a){this._leading!==a&&(this._leading=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"padding",{get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stroke",{get:function(){return this._stroke},set:function(a){var l=getColor(a);this._stroke!==l&&(this._stroke=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"trim",{get:function(){return this._trim},set:function(a){this._trim!==a&&(this._trim=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(a){this._whiteSpace!==a&&(this._whiteSpace=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)},enumerable:!1,configurable:!0}),s.prototype.toFontString=function(){var a=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,l=this.fontFamily;Array.isArray(this.fontFamily)||(l=this.fontFamily.split(","));for(var h=l.length-1;h>=0;h--){var d=l[h].trim();!/([\"\'])[^\'\"]+\1/.test(d)&&genericFontFamilies.indexOf(d)<0&&(d='"'+d+'"'),l[h]=d}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+l.join(",")},s}();function getSingleColor(s){return typeof s=="number"?hex2string(s):(typeof s=="string"&&s.indexOf("0x")===0&&(s=s.replace("0x","#")),s)}function getColor(s){if(Array.isArray(s)){for(var a=0;a<s.length;++a)s[a]=getSingleColor(s[a]);return s}else return getSingleColor(s)}function areArraysEqual(s,a){if(!Array.isArray(s)||!Array.isArray(a)||s.length!==a.length)return!1;for(var l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}function deepCopyProperties(s,a,l){for(var h in l)Array.isArray(a[h])?s[h]=a[h].slice():s[h]=a[h]}var TextMetrics=function(){function s(a,l,h,d,v,_,m,g,y){this.text=a,this.style=l,this.width=h,this.height=d,this.lines=v,this.lineWidths=_,this.lineHeight=m,this.maxLineWidth=g,this.fontProperties=y}return s.measureText=function(a,l,h,d){d===void 0&&(d=s._canvas),h=h==null?l.wordWrap:h;var v=l.toFontString(),_=s.measureFont(v);_.fontSize===0&&(_.fontSize=l.fontSize,_.ascent=l.fontSize);var m=d.getContext("2d");m.font=v;for(var g=h?s.wordWrap(a,l,d):a,y=g.split(/(?:\r\n|\r|\n)/),T=new Array(y.length),E=0,b=0;b<y.length;b++){var R=m.measureText(y[b]).width+(y[b].length-1)*l.letterSpacing;T[b]=R,E=Math.max(E,R)}var I=E+l.strokeThickness;l.dropShadow&&(I+=l.dropShadowDistance);var P=l.lineHeight||_.fontSize+l.strokeThickness,C=Math.max(P,_.fontSize+l.strokeThickness)+(y.length-1)*(P+l.leading);return l.dropShadow&&(C+=l.dropShadowDistance),new s(a,l,I,C,y,T,P+l.leading,E,_)},s.wordWrap=function(a,l,h){h===void 0&&(h=s._canvas);for(var d=h.getContext("2d"),v=0,_="",m="",g=Object.create(null),y=l.letterSpacing,T=l.whiteSpace,E=s.collapseSpaces(T),b=s.collapseNewlines(T),R=!E,I=l.wordWrapWidth+y,P=s.tokenize(a),C=0;C<P.length;C++){var S=P[C];if(s.isNewline(S)){if(!b){m+=s.addLine(_),R=!E,_="",v=0;continue}S=" "}if(E){var O=s.isBreakingSpace(S),w=s.isBreakingSpace(_[_.length-1]);if(O&&w)continue}var U=s.getFromCache(S,y,g,d);if(U>I)if(_!==""&&(m+=s.addLine(_),_="",v=0),s.canBreakWords(S,l.breakWords))for(var F=s.wordWrapSplit(S),M=0;M<F.length;M++){for(var $=F[M],j=1;F[M+j];){var D=F[M+j],X=$[$.length-1];if(!s.canBreakChars(X,D,S,M,l.breakWords))$+=D;else break;j++}M+=$.length-1;var Z=s.getFromCache($,y,g,d);Z+v>I&&(m+=s.addLine(_),R=!1,_="",v=0),_+=$,v+=Z}else{_.length>0&&(m+=s.addLine(_),_="",v=0);var ee=C===P.length-1;m+=s.addLine(S,!ee),R=!1,_="",v=0}else U+v>I&&(R=!1,m+=s.addLine(_),_="",v=0),(_.length>0||!s.isBreakingSpace(S)||R)&&(_+=S,v+=U)}return m+=s.addLine(_,!1),m},s.addLine=function(a,l){return l===void 0&&(l=!0),a=s.trimRight(a),a=l?a+`
`:a,a},s.getFromCache=function(a,l,h,d){var v=h[a];if(typeof v!="number"){var _=a.length*l;v=d.measureText(a).width+_,h[a]=v}return v},s.collapseSpaces=function(a){return a==="normal"||a==="pre-line"},s.collapseNewlines=function(a){return a==="normal"},s.trimRight=function(a){if(typeof a!="string")return"";for(var l=a.length-1;l>=0;l--){var h=a[l];if(!s.isBreakingSpace(h))break;a=a.slice(0,-1)}return a},s.isNewline=function(a){return typeof a!="string"?!1:s._newlines.indexOf(a.charCodeAt(0))>=0},s.isBreakingSpace=function(a,l){return typeof a!="string"?!1:s._breakingSpaces.indexOf(a.charCodeAt(0))>=0},s.tokenize=function(a){var l=[],h="";if(typeof a!="string")return l;for(var d=0;d<a.length;d++){var v=a[d],_=a[d+1];if(s.isBreakingSpace(v,_)||s.isNewline(v)){h!==""&&(l.push(h),h=""),l.push(v);continue}h+=v}return h!==""&&l.push(h),l},s.canBreakWords=function(a,l){return l},s.canBreakChars=function(a,l,h,d,v){return!0},s.wordWrapSplit=function(a){return a.split("")},s.measureFont=function(a){if(s._fonts[a])return s._fonts[a];var l={ascent:0,descent:0,fontSize:0},h=s._canvas,d=s._context;d.font=a;var v=s.METRICS_STRING+s.BASELINE_SYMBOL,_=Math.ceil(d.measureText(v).width),m=Math.ceil(d.measureText(s.BASELINE_SYMBOL).width),g=Math.ceil(s.HEIGHT_MULTIPLIER*m);m=m*s.BASELINE_MULTIPLIER|0,h.width=_,h.height=g,d.fillStyle="#f00",d.fillRect(0,0,_,g),d.font=a,d.textBaseline="alphabetic",d.fillStyle="#000",d.fillText(v,0,m);var y=d.getImageData(0,0,_,g).data,T=y.length,E=_*4,b=0,R=0,I=!1;for(b=0;b<m;++b){for(var P=0;P<E;P+=4)if(y[R+P]!==255){I=!0;break}if(!I)R+=E;else break}for(l.ascent=m-b,R=T-E,I=!1,b=g;b>m;--b){for(var P=0;P<E;P+=4)if(y[R+P]!==255){I=!0;break}if(!I)R-=E;else break}return l.descent=b-m,l.fontSize=l.ascent+l.descent,s._fonts[a]=l,l},s.clearMetrics=function(a){a===void 0&&(a=""),a?delete s._fonts[a]:s._fonts={}},Object.defineProperty(s,"_canvas",{get:function(){if(!s.__canvas){var a=void 0;try{var l=new OffscreenCanvas(0,0),h=l.getContext("2d");if(h&&h.measureText)return s.__canvas=l,l;a=document.createElement("canvas")}catch{a=document.createElement("canvas")}a.width=a.height=10,s.__canvas=a}return s.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(s,"_context",{get:function(){return s.__context||(s.__context=s._canvas.getContext("2d")),s.__context},enumerable:!1,configurable:!0}),s}();TextMetrics._fonts={};TextMetrics.METRICS_STRING="|\xC9q\xC5";TextMetrics.BASELINE_SYMBOL="M";TextMetrics.BASELINE_MULTIPLIER=1.4;TextMetrics.HEIGHT_MULTIPLIER=2;TextMetrics._newlines=[10,13];TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Text=function(s){__extends$c(a,s);function a(l,h,d){var v=this,_=!1;d||(d=document.createElement("canvas"),_=!0),d.width=3,d.height=3;var m=Texture.from(d);return m.orig=new Rectangle,m.trim=new Rectangle,v=s.call(this,m)||this,v._ownCanvas=_,v.canvas=d,v.context=v.canvas.getContext("2d"),v._resolution=settings$1.RESOLUTION,v._autoResolution=!0,v._text=null,v._style=null,v._styleListener=null,v._font="",v.text=l,v.style=h,v.localStyleID=-1,v}return a.prototype.updateText=function(l){var h=this._style;if(this.localStyleID!==h.styleID&&(this.dirty=!0,this.localStyleID=h.styleID),!(!this.dirty&&l)){this._font=this._style.toFontString();var d=this.context,v=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),_=v.width,m=v.height,g=v.lines,y=v.lineHeight,T=v.lineWidths,E=v.maxLineWidth,b=v.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,_)+h.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,m)+h.padding*2)*this._resolution),d.scale(this._resolution,this._resolution),d.clearRect(0,0,this.canvas.width,this.canvas.height),d.font=this._font,d.lineWidth=h.strokeThickness,d.textBaseline=h.textBaseline,d.lineJoin=h.lineJoin,d.miterLimit=h.miterLimit;for(var R,I,P=h.dropShadow?2:1,C=0;C<P;++C){var S=h.dropShadow&&C===0,O=S?Math.ceil(Math.max(1,m)+h.padding*2):0,w=O*this._resolution;if(S){d.fillStyle="black",d.strokeStyle="black";var U=h.dropShadowColor,F=hex2rgb(typeof U=="number"?U:string2hex(U)),M=h.dropShadowBlur*this._resolution,$=h.dropShadowDistance*this._resolution;d.shadowColor="rgba("+F[0]*255+","+F[1]*255+","+F[2]*255+","+h.dropShadowAlpha+")",d.shadowBlur=M,d.shadowOffsetX=Math.cos(h.dropShadowAngle)*$,d.shadowOffsetY=Math.sin(h.dropShadowAngle)*$+w}else d.fillStyle=this._generateFillStyle(h,g,v),d.strokeStyle=h.stroke,d.shadowColor="black",d.shadowBlur=0,d.shadowOffsetX=0,d.shadowOffsetY=0;var j=(y-b.fontSize)/2;(!a.nextLineHeightBehavior||y-b.fontSize<0)&&(j=0);for(var D=0;D<g.length;D++)R=h.strokeThickness/2,I=h.strokeThickness/2+D*y+b.ascent+j,h.align==="right"?R+=E-T[D]:h.align==="center"&&(R+=(E-T[D])/2),h.stroke&&h.strokeThickness&&this.drawLetterSpacing(g[D],R+h.padding,I+h.padding-O,!0),h.fill&&this.drawLetterSpacing(g[D],R+h.padding,I+h.padding-O)}this.updateTexture()}},a.prototype.drawLetterSpacing=function(l,h,d,v){v===void 0&&(v=!1);var _=this._style,m=_.letterSpacing,g=a.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(m===0||g){g&&(this.context.letterSpacing=m,this.context.textLetterSpacing=m),v?this.context.strokeText(l,h,d):this.context.fillText(l,h,d);return}for(var y=h,T=Array.from?Array.from(l):l.split(""),E=this.context.measureText(l).width,b=0,R=0;R<T.length;++R){var I=T[R];v?this.context.strokeText(I,y,d):this.context.fillText(I,y,d);for(var P="",C=R+1;C<T.length;++C)P+=T[C];b=this.context.measureText(P).width,y+=E-b+m,E=b}},a.prototype.updateTexture=function(){var l=this.canvas;if(this._style.trim){var h=trimCanvas(l);h.data&&(l.width=h.width,l.height=h.height,this.context.putImageData(h.data,0,0))}var d=this._texture,v=this._style,_=v.trim?0:v.padding,m=d.baseTexture;d.trim.width=d._frame.width=l.width/this._resolution,d.trim.height=d._frame.height=l.height/this._resolution,d.trim.x=-_,d.trim.y=-_,d.orig.width=d._frame.width-_*2,d.orig.height=d._frame.height-_*2,this._onTextureUpdate(),m.setRealSize(l.width,l.height,this._resolution),d.updateUvs(),this.dirty=!1},a.prototype._render=function(l){this._autoResolution&&this._resolution!==l.resolution&&(this._resolution=l.resolution,this.dirty=!0),this.updateText(!0),s.prototype._render.call(this,l)},a.prototype.updateTransform=function(){this.updateText(!0),s.prototype.updateTransform.call(this)},a.prototype.getBounds=function(l,h){return this.updateText(!0),this._textureID===-1&&(l=!1),s.prototype.getBounds.call(this,l,h)},a.prototype.getLocalBounds=function(l){return this.updateText(!0),s.prototype.getLocalBounds.call(this,l)},a.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},a.prototype._generateFillStyle=function(l,h,d){var v=l.fill;if(Array.isArray(v)){if(v.length===1)return v[0]}else return v;var _,m=l.dropShadow?l.dropShadowDistance:0,g=l.padding||0,y=this.canvas.width/this._resolution-m-g*2,T=this.canvas.height/this._resolution-m-g*2,E=v.slice(),b=l.fillGradientStops.slice();if(!b.length)for(var R=E.length+1,I=1;I<R;++I)b.push(I/R);if(E.unshift(v[0]),b.unshift(0),E.push(v[v.length-1]),b.push(1),l.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){_=this.context.createLinearGradient(y/2,g,y/2,T+g);for(var P=d.fontProperties.fontSize+l.strokeThickness,I=0;I<h.length;I++){var C=d.lineHeight*(I-1)+P,S=d.lineHeight*I,O=S;I>0&&C>S&&(O=(S+C)/2);var w=S+P,U=d.lineHeight*(I+1),F=w;I+1<h.length&&U<w&&(F=(w+U)/2);for(var M=(F-O)/T,$=0;$<E.length;$++){var j=0;typeof b[$]=="number"?j=b[$]:j=$/E.length;var D=Math.min(1,Math.max(0,O/T+j*M));D=Number(D.toFixed(5)),_.addColorStop(D,E[$])}}}else{_=this.context.createLinearGradient(g,T/2,y+g,T/2);for(var X=E.length+1,Z=1,I=0;I<E.length;I++){var ee=void 0;typeof b[I]=="number"?ee=b[I]:ee=Z/X,_.addColorStop(ee,E[I]),Z++}}return _},a.prototype.destroy=function(l){typeof l=="boolean"&&(l={children:l}),l=Object.assign({},defaultDestroyOptions,l),s.prototype.destroy.call(this,l),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(a.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(l){this.updateText(!0);var h=sign(this.scale.x)||1;this.scale.x=h*l/this._texture.orig.width,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(l){this.updateText(!0);var h=sign(this.scale.y)||1;this.scale.y=h*l/this._texture.orig.height,this._height=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"style",{get:function(){return this._style},set:function(l){l=l||{},l instanceof TextStyle?this._style=l:this._style=new TextStyle(l),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(l){l=String(l==null?"":l),this._text!==l&&(this._text=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resolution",{get:function(){return this._resolution},set:function(l){this._autoResolution=!1,this._resolution!==l&&(this._resolution=l,this.dirty=!0)},enumerable:!1,configurable:!0}),a.nextLineHeightBehavior=!1,a.experimentalLetterSpacing=!1,a}(Sprite);/*!
 * @pixi/prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$b=function(s,a){return extendStatics$b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$b(s,a)};function __extends$b(s,a){extendStatics$b(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var CountLimiter=function(){function s(a){this.maxItemsPerFrame=a,this.itemsLeft=0}return s.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},s.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},s}();function findMultipleBaseTextures(s,a){var l=!1;if(s&&s._textures&&s._textures.length){for(var h=0;h<s._textures.length;h++)if(s._textures[h]instanceof Texture){var d=s._textures[h].baseTexture;a.indexOf(d)===-1&&(a.push(d),l=!0)}}return l}function findBaseTexture(s,a){if(s.baseTexture instanceof BaseTexture){var l=s.baseTexture;return a.indexOf(l)===-1&&a.push(l),!0}return!1}function findTexture(s,a){if(s._texture&&s._texture instanceof Texture){var l=s._texture.baseTexture;return a.indexOf(l)===-1&&a.push(l),!0}return!1}function drawText(s,a){return a instanceof Text?(a.updateText(!0),!0):!1}function calculateTextStyle(s,a){if(a instanceof TextStyle){var l=a.toFontString();return TextMetrics.measureFont(l),!0}return!1}function findText(s,a){if(s instanceof Text){a.indexOf(s.style)===-1&&a.push(s.style),a.indexOf(s)===-1&&a.push(s);var l=s._texture.baseTexture;return a.indexOf(l)===-1&&a.push(l),!0}return!1}function findTextStyle(s,a){return s instanceof TextStyle?(a.indexOf(s)===-1&&a.push(s),!0):!1}var BasePrepare=function(){function s(a){var l=this;this.limiter=new CountLimiter(settings$1.UPLOADS_PER_FRAME),this.renderer=a,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!l.queue||l.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return s.prototype.upload=function(a,l){typeof a=="function"&&(l=a,a=null),a&&this.add(a),this.queue.length?(l&&this.completes.push(l),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):l&&l()},s.prototype.tick=function(){setTimeout(this.delayedTick,0)},s.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],l=!1;if(a&&!a._destroyed){for(var h=0,d=this.uploadHooks.length;h<d;h++)if(this.uploadHooks[h](this.uploadHookHelper,a)){this.queue.shift(),l=!0;break}}l||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var v=this.completes.slice(0);this.completes.length=0;for(var h=0,d=v.length;h<d;h++)v[h]()}},s.prototype.registerFindHook=function(a){return a&&this.addHooks.push(a),this},s.prototype.registerUploadHook=function(a){return a&&this.uploadHooks.push(a),this},s.prototype.add=function(a){for(var l=0,h=this.addHooks.length;l<h&&!this.addHooks[l](a,this.queue);l++);if(a instanceof Container$1)for(var l=a.children.length-1;l>=0;l--)this.add(a.children[l]);return this},s.prototype.destroy=function(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},s}();function uploadBaseTextures(s,a){return a instanceof BaseTexture?(a._glTextures[s.CONTEXT_UID]||s.texture.bind(a),!0):!1}function uploadGraphics(s,a){if(!(a instanceof Graphics))return!1;var l=a.geometry;a.finishPoly(),l.updateBatches();for(var h=l.batches,d=0;d<h.length;d++){var v=h[d].style.texture;v&&uploadBaseTextures(s,v.baseTexture)}return l.batchable||s.geometry.bind(l,a._resolveDirectShader(s)),!0}function findGraphics(s,a){return s instanceof Graphics?(a.push(s),!0):!1}var Prepare=function(s){__extends$b(a,s);function a(l){var h=s.call(this,l)||this;return h.uploadHookHelper=h.renderer,h.registerFindHook(findGraphics),h.registerUploadHook(uploadBaseTextures),h.registerUploadHook(uploadGraphics),h}return a}(BasePrepare),TimeLimiter=function(){function s(a){this.maxMilliseconds=a,this.frameStart=0}return s.prototype.beginFrame=function(){this.frameStart=Date.now()},s.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},s}();/*!
 * @pixi/spritesheet - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Spritesheet=function(){function s(a,l,h){h===void 0&&(h=null),this._texture=a instanceof Texture?a:null,this.baseTexture=a instanceof BaseTexture?a:this._texture.baseTexture,this.textures={},this.animations={},this.data=l;var d=this.baseTexture.resource;this.resolution=this._updateResolution(h||(d?d.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return s.prototype._updateResolution=function(a){a===void 0&&(a=null);var l=this.data.meta.scale,h=getResolutionOfUrl(a,null);return h===null&&(h=l!==void 0?parseFloat(l):1),h!==1&&this.baseTexture.setResolution(h),h},s.prototype.parse=function(a){this._batchIndex=0,this._callback=a,this._frameKeys.length<=s.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},s.prototype._processFrames=function(a){for(var l=a,h=s.BATCH_SIZE;l-a<h&&l<this._frameKeys.length;){var d=this._frameKeys[l],v=this._frames[d],_=v.frame;if(_){var m=null,g=null,y=v.trimmed!==!1&&v.sourceSize?v.sourceSize:v.frame,T=new Rectangle(0,0,Math.floor(y.w)/this.resolution,Math.floor(y.h)/this.resolution);v.rotated?m=new Rectangle(Math.floor(_.x)/this.resolution,Math.floor(_.y)/this.resolution,Math.floor(_.h)/this.resolution,Math.floor(_.w)/this.resolution):m=new Rectangle(Math.floor(_.x)/this.resolution,Math.floor(_.y)/this.resolution,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution),v.trimmed!==!1&&v.spriteSourceSize&&(g=new Rectangle(Math.floor(v.spriteSourceSize.x)/this.resolution,Math.floor(v.spriteSourceSize.y)/this.resolution,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution)),this.textures[d]=new Texture(this.baseTexture,m,T,g,v.rotated?2:0,v.anchor),Texture.addToCache(this.textures[d],d)}l++}},s.prototype._processAnimations=function(){var a=this.data.animations||{};for(var l in a){this.animations[l]=[];for(var h=0;h<a[l].length;h++){var d=a[l][h];this.animations[l].push(this.textures[d])}}},s.prototype._parseComplete=function(){var a=this._callback;this._callback=null,this._batchIndex=0,a.call(this,this.textures)},s.prototype._nextBatch=function(){var a=this;this._processFrames(this._batchIndex*s.BATCH_SIZE),this._batchIndex++,setTimeout(function(){a._batchIndex*s.BATCH_SIZE<a._frameKeys.length?a._nextBatch():(a._processAnimations(),a._parseComplete())},0)},s.prototype.destroy=function(a){var l;a===void 0&&(a=!1);for(var h in this.textures)this.textures[h].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,a&&((l=this._texture)===null||l===void 0||l.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},s.BATCH_SIZE=1e3,s}(),SpritesheetLoader=function(){function s(){}return s.use=function(a,l){var h,d,v=this,_=a.name+"_image";if(!a.data||a.type!==LoaderResource.TYPE.JSON||!a.data.frames||v.resources[_]){l();return}var m=(d=(h=a.data)===null||h===void 0?void 0:h.meta)===null||d===void 0?void 0:d.related_multi_packs;if(Array.isArray(m))for(var g=function(I){if(typeof I!="string")return"continue";var P=I.replace(".json",""),C=url.resolve(a.url.replace(v.baseUrl,""),I);if(v.resources[P]||Object.values(v.resources).some(function(O){return url.format(url.parse(O.url))===C}))return"continue";var S={crossOrigin:a.crossOrigin,loadType:LoaderResource.LOAD_TYPE.XHR,xhrType:LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:a,metadata:a.metadata};v.add(P,C,S)},y=0,T=m;y<T.length;y++){var E=T[y];g(E)}var b={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata,parentResource:a},R=s.getResourcePath(a,v.baseUrl);v.add(_,R,b,function(P){if(P.error){l(P.error);return}var C=new Spritesheet(P.texture,a.data,a.url);C.parse(function(){a.spritesheet=C,a.textures=C.textures,l()})})},s.getResourcePath=function(a,l){return a.isDataUrl?a.data.meta.image:url.resolve(a.url.replace(l,""),a.data.meta.image)},s}();/*!
 * @pixi/sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$a=function(s,a){return extendStatics$a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$a(s,a)};function __extends$a(s,a){extendStatics$a(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var tempPoint$1=new Point,TilingSprite=function(s){__extends$a(a,s);function a(l,h,d){h===void 0&&(h=100),d===void 0&&(d=100);var v=s.call(this,l)||this;return v.tileTransform=new Transform,v._width=h,v._height=d,v.uvMatrix=v.texture.uvMatrix||new TextureMatrix(l),v.pluginName="tilingSprite",v.uvRespectAnchor=!1,v}return Object.defineProperty(a.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(l){this.uvMatrix.clampMargin=l,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(l){this.tileTransform.scale.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(l){this.tileTransform.position.copyFrom(l)},enumerable:!1,configurable:!0}),a.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},a.prototype._render=function(l){var h=this._texture;!h||!h.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),l.batch.setObjectRenderer(l.plugins[this.pluginName]),l.plugins[this.pluginName].render(this))},a.prototype._calculateBounds=function(){var l=this._width*-this._anchor._x,h=this._height*-this._anchor._y,d=this._width*(1-this._anchor._x),v=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,l,h,d,v)},a.prototype.getLocalBounds=function(l){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),l||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),l=this._localBoundsRect),this._bounds.getRectangle(l)):s.prototype.getLocalBounds.call(this,l)},a.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,tempPoint$1);var h=this._width,d=this._height,v=-h*this.anchor._x;if(tempPoint$1.x>=v&&tempPoint$1.x<v+h){var _=-d*this.anchor._y;if(tempPoint$1.y>=_&&tempPoint$1.y<_+d)return!0}return!1},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this.tileTransform=null,this.uvMatrix=null},a.from=function(l,h){var d=l instanceof Texture?l:Texture.from(l,h);return new a(d,h.width,h.height)},Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(l){this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(l){this._height=l},enumerable:!1,configurable:!0}),a}(Sprite),fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,tempMat=new Matrix,TilingSpriteRenderer=function(s){__extends$a(a,s);function a(l){var h=s.call(this,l)||this;return l.runners.contextChange.add(h),h.quad=new QuadUv,h.state=State$1.for2d(),h}return a.prototype.contextChange=function(){var l=this.renderer,h={globals:l.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,h),this.shader=l.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,h):Shader.from(gl1VertexSrc,gl1FragmentSrc,h)},a.prototype.render=function(l){var h=this.renderer,d=this.quad,v=d.vertices;v[0]=v[6]=l._width*-l.anchor.x,v[1]=v[3]=l._height*-l.anchor.y,v[2]=v[4]=l._width*(1-l.anchor.x),v[5]=v[7]=l._height*(1-l.anchor.y);var _=l.uvRespectAnchor?l.anchor.x:0,m=l.uvRespectAnchor?l.anchor.y:0;v=d.uvs,v[0]=v[6]=-_,v[1]=v[3]=-m,v[2]=v[4]=1-_,v[5]=v[7]=1-m,d.invalidate();var g=l._texture,y=g.baseTexture,T=l.tileTransform.localTransform,E=l.uvMatrix,b=y.isPowerOfTwo&&g.frame.width===y.width&&g.frame.height===y.height;b&&(y._glTextures[h.CONTEXT_UID]?b=y.wrapMode!==WRAP_MODES$4.CLAMP:y.wrapMode===WRAP_MODES$4.CLAMP&&(y.wrapMode=WRAP_MODES$4.REPEAT));var R=b?this.simpleShader:this.shader,I=g.width,P=g.height,C=l._width,S=l._height;tempMat.set(T.a*I/C,T.b*I/S,T.c*P/C,T.d*P/S,T.tx/C,T.ty/S),tempMat.invert(),b?tempMat.prepend(E.mapCoord):(R.uniforms.uMapCoord=E.mapCoord.toArray(!0),R.uniforms.uClampFrame=E.uClampFrame,R.uniforms.uClampOffset=E.uClampOffset),R.uniforms.uTransform=tempMat.toArray(!0),R.uniforms.uColor=premultiplyTintToRgba(l.tint,l.worldAlpha,R.uniforms.uColor,y.alphaMode),R.uniforms.translationMatrix=l.transform.worldTransform.toArray(!0),R.uniforms.uSampler=g,h.shader.bind(R),h.geometry.bind(d),this.state.blendMode=correctBlendMode(l.blendMode,y.alphaMode),h.state.set(this.state),h.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},a}(ObjectRenderer);/*!
 * @pixi/mesh - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$9=function(s,a){return extendStatics$9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$9(s,a)};function __extends$9(s,a){extendStatics$9(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var MeshBatchUvs=function(){function s(a,l){this.uvBuffer=a,this.uvMatrix=l,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return s.prototype.update=function(a){if(!(!a&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var l=this.uvBuffer.data;(!this.data||this.data.length!==l.length)&&(this.data=new Float32Array(l.length)),this.uvMatrix.multiplyUvs(l,this.data),this._updateID++}},s}(),tempPoint=new Point,tempPolygon=new Polygon,Mesh=function(s){__extends$9(a,s);function a(l,h,d,v){v===void 0&&(v=DRAW_MODES$4.TRIANGLES);var _=s.call(this)||this;return _.geometry=l,_.shader=h,_.state=d||State$1.for2d(),_.drawMode=v,_.start=0,_.size=0,_.uvs=null,_.indices=null,_.vertexData=new Float32Array(1),_.vertexDirty=-1,_._transformID=-1,_._roundPixels=settings$1.ROUND_PIXELS,_.batchUvs=null,_}return Object.defineProperty(a.prototype,"geometry",{get:function(){return this._geometry},set:function(l){this._geometry!==l&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=l,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"material",{get:function(){return this.shader},set:function(l){this.shader=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){this._roundPixels!==l&&(this._transformID=-1),this._roundPixels=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(l){this.shader.tint=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(l){this.shader.texture=l},enumerable:!1,configurable:!0}),a.prototype._render=function(l){var h=this.geometry.buffers[0].data,d=this.shader;d.batchable&&this.drawMode===DRAW_MODES$4.TRIANGLES&&h.length<a.BATCHABLE_SIZE*2?this._renderToBatch(l):this._renderDefault(l)},a.prototype._renderDefault=function(l){var h=this.shader;h.alpha=this.worldAlpha,h.update&&h.update(),l.batch.flush(),h.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),l.shader.bind(h),l.state.set(this.state),l.geometry.bind(this.geometry,h),l.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},a.prototype._renderToBatch=function(l){var h=this.geometry,d=this.shader;d.uvMatrix&&(d.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=h.indexBuffer.data,this._tintRGB=d._tintRGB,this._texture=d.texture;var v=this.material.pluginName;l.batch.setObjectRenderer(l.plugins[v]),l.plugins[v].render(this)},a.prototype.calculateVertices=function(){var l=this.geometry,h=l.buffers[0],d=h.data,v=h._updateID;if(!(v===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==d.length&&(this.vertexData=new Float32Array(d.length));for(var _=this.transform.worldTransform,m=_.a,g=_.b,y=_.c,T=_.d,E=_.tx,b=_.ty,R=this.vertexData,I=0;I<R.length/2;I++){var P=d[I*2],C=d[I*2+1];R[I*2]=m*P+y*C+E,R[I*2+1]=g*P+T*C+b}if(this._roundPixels)for(var S=settings$1.RESOLUTION,I=0;I<R.length;++I)R[I]=Math.round((R[I]*S|0)/S);this.vertexDirty=v}},a.prototype.calculateUvs=function(){var l=this.geometry.buffers[1],h=this.shader;h.uvMatrix.isSimple?this.uvs=l.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(l,h.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},a.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},a.prototype.containsPoint=function(l){if(!this.getBounds().contains(l.x,l.y))return!1;this.worldTransform.applyInverse(l,tempPoint);for(var h=this.geometry.getBuffer("aVertexPosition").data,d=tempPolygon.points,v=this.geometry.getIndex().data,_=v.length,m=this.drawMode===4?3:1,g=0;g+2<_;g+=m){var y=v[g]*2,T=v[g+1]*2,E=v[g+2]*2;if(d[0]=h[y],d[1]=h[y+1],d[2]=h[T],d[3]=h[T+1],d[4]=h[E],d[5]=h[E+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},a.BATCHABLE_SIZE=100,a}(Container$1),fragment$5=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,MeshMaterial=function(s){__extends$9(a,s);function a(l,h){var d=this,v={uSampler:l,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return h=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},h),h.uniforms&&Object.assign(v,h.uniforms),d=s.call(this,h.program||Program.from(vertex$2,fragment$5),v)||this,d._colorDirty=!1,d.uvMatrix=new TextureMatrix(l),d.batchable=h.program===void 0,d.pluginName=h.pluginName,d.tint=h.tint,d.alpha=h.alpha,d}return Object.defineProperty(a.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(l){this.uniforms.uSampler!==l&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!l.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=l,this.uvMatrix.texture=l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this._alpha},set:function(l){l!==this._alpha&&(this._alpha=l,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){l!==this._tint&&(this._tint=l,this._tintRGB=(l>>16)+(l&65280)+((l&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),a.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var l=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,l.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},a}(Shader),MeshGeometry=function(s){__extends$9(a,s);function a(l,h,d){var v=s.call(this)||this,_=new Buffer(l),m=new Buffer(h,!0),g=new Buffer(d,!0,!0);return v.addAttribute("aVertexPosition",_,2,!1,TYPES$4.FLOAT).addAttribute("aTextureCoord",m,2,!1,TYPES$4.FLOAT).addIndex(g),v._updateId=-1,v}return Object.defineProperty(a.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),a}(Geometry);/*!
 * @pixi/text-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$8=function(s,a){return extendStatics$8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$8(s,a)};function __extends$8(s,a){extendStatics$8(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var BitmapFontData=function(){function s(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return s}(),TextFormat=function(){function s(){}return s.test=function(a){return typeof a=="string"&&a.indexOf("info face=")===0},s.parse=function(a){var l=a.match(/^[a-z]+\s+.+$/gm),h={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var d in l){var v=l[d].match(/^[a-z]+/gm)[0],_=l[d].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(var g in _){var y=_[g].split("="),T=y[0],E=y[1].replace(/"/gm,""),b=parseFloat(E),R=isNaN(b)?E:b;m[T]=R}h[v].push(m)}var I=new BitmapFontData;return h.info.forEach(function(P){return I.info.push({face:P.face,size:parseInt(P.size,10)})}),h.common.forEach(function(P){return I.common.push({lineHeight:parseInt(P.lineHeight,10)})}),h.page.forEach(function(P){return I.page.push({id:parseInt(P.id,10),file:P.file})}),h.char.forEach(function(P){return I.char.push({id:parseInt(P.id,10),page:parseInt(P.page,10),x:parseInt(P.x,10),y:parseInt(P.y,10),width:parseInt(P.width,10),height:parseInt(P.height,10),xoffset:parseInt(P.xoffset,10),yoffset:parseInt(P.yoffset,10),xadvance:parseInt(P.xadvance,10)})}),h.kerning.forEach(function(P){return I.kerning.push({first:parseInt(P.first,10),second:parseInt(P.second,10),amount:parseInt(P.amount,10)})}),h.distanceField.forEach(function(P){return I.distanceField.push({distanceRange:parseInt(P.distanceRange,10),fieldType:P.fieldType})}),I},s}(),XMLFormat=function(){function s(){}return s.test=function(a){return a instanceof XMLDocument&&a.getElementsByTagName("page").length&&a.getElementsByTagName("info")[0].getAttribute("face")!==null},s.parse=function(a){for(var l=new BitmapFontData,h=a.getElementsByTagName("info"),d=a.getElementsByTagName("common"),v=a.getElementsByTagName("page"),_=a.getElementsByTagName("char"),m=a.getElementsByTagName("kerning"),g=a.getElementsByTagName("distanceField"),y=0;y<h.length;y++)l.info.push({face:h[y].getAttribute("face"),size:parseInt(h[y].getAttribute("size"),10)});for(var y=0;y<d.length;y++)l.common.push({lineHeight:parseInt(d[y].getAttribute("lineHeight"),10)});for(var y=0;y<v.length;y++)l.page.push({id:parseInt(v[y].getAttribute("id"),10)||0,file:v[y].getAttribute("file")});for(var y=0;y<_.length;y++){var T=_[y];l.char.push({id:parseInt(T.getAttribute("id"),10),page:parseInt(T.getAttribute("page"),10)||0,x:parseInt(T.getAttribute("x"),10),y:parseInt(T.getAttribute("y"),10),width:parseInt(T.getAttribute("width"),10),height:parseInt(T.getAttribute("height"),10),xoffset:parseInt(T.getAttribute("xoffset"),10),yoffset:parseInt(T.getAttribute("yoffset"),10),xadvance:parseInt(T.getAttribute("xadvance"),10)})}for(var y=0;y<m.length;y++)l.kerning.push({first:parseInt(m[y].getAttribute("first"),10),second:parseInt(m[y].getAttribute("second"),10),amount:parseInt(m[y].getAttribute("amount"),10)});for(var y=0;y<g.length;y++)l.distanceField.push({fieldType:g[y].getAttribute("fieldType"),distanceRange:parseInt(g[y].getAttribute("distanceRange"),10)});return l},s}(),XMLStringFormat=function(){function s(){}return s.test=function(a){if(typeof a=="string"&&a.indexOf("<font>")>-1){var l=new globalThis.DOMParser().parseFromString(a,"text/xml");return XMLFormat.test(l)}return!1},s.parse=function(a){var l=new globalThis.DOMParser().parseFromString(a,"text/xml");return XMLFormat.parse(l)},s}(),formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(s){for(var a=0;a<formats.length;a++)if(formats[a].test(s))return formats[a];return null}function generateFillStyle(s,a,l,h,d,v){var _=l.fill;if(Array.isArray(_)){if(_.length===1)return _[0]}else return _;var m,g=l.dropShadow?l.dropShadowDistance:0,y=l.padding||0,T=s.width/h-g-y*2,E=s.height/h-g-y*2,b=_.slice(),R=l.fillGradientStops.slice();if(!R.length)for(var I=b.length+1,P=1;P<I;++P)R.push(P/I);if(b.unshift(_[0]),R.unshift(0),b.push(_[_.length-1]),R.push(1),l.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){m=a.createLinearGradient(T/2,y,T/2,E+y);for(var C=0,S=v.fontProperties.fontSize+l.strokeThickness,O=S/E,P=0;P<d.length;P++)for(var w=v.lineHeight*P,U=0;U<b.length;U++){var F=0;typeof R[U]=="number"?F=R[U]:F=U/b.length;var M=w/E+F*O,$=Math.max(C,M);$=Math.min($,1),m.addColorStop($,b[U]),C=$}}else{m=a.createLinearGradient(y,E/2,T+y,E/2);for(var j=b.length+1,D=1,P=0;P<b.length;P++){var X=void 0;typeof R[P]=="number"?X=R[P]:X=D/j,m.addColorStop(X,b[P]),D++}}return m}function drawGlyph(s,a,l,h,d,v,_){var m=l.text,g=l.fontProperties;a.translate(h,d),a.scale(v,v);var y=_.strokeThickness/2,T=-(_.strokeThickness/2);if(a.font=_.toFontString(),a.lineWidth=_.strokeThickness,a.textBaseline=_.textBaseline,a.lineJoin=_.lineJoin,a.miterLimit=_.miterLimit,a.fillStyle=generateFillStyle(s,a,_,v,[m],l),a.strokeStyle=_.stroke,_.dropShadow){var E=_.dropShadowColor,b=hex2rgb(typeof E=="number"?E:string2hex(E)),R=_.dropShadowBlur*v,I=_.dropShadowDistance*v;a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+_.dropShadowAlpha+")",a.shadowBlur=R,a.shadowOffsetX=Math.cos(_.dropShadowAngle)*I,a.shadowOffsetY=Math.sin(_.dropShadowAngle)*I}else a.shadowColor="black",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;_.stroke&&_.strokeThickness&&a.strokeText(m,y,T+l.lineHeight-g.descent),_.fill&&a.fillText(m,y,T+l.lineHeight-g.descent),a.setTransform(1,0,0,1,0,0),a.fillStyle="rgba(0, 0, 0, 0)"}function splitTextToCharacters(s){return Array.from?Array.from(s):s.split("")}function resolveCharacters(s){typeof s=="string"&&(s=[s]);for(var a=[],l=0,h=s.length;l<h;l++){var d=s[l];if(Array.isArray(d)){if(d.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+d.length+".");var v=d[0].charCodeAt(0),_=d[1].charCodeAt(0);if(_<v)throw new Error("[BitmapFont]: Invalid character range.");for(var m=v,g=_;m<=g;m++)a.push(String.fromCharCode(m))}else a.push.apply(a,splitTextToCharacters(d))}if(a.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return a}function extractCharCode(s){return s.codePointAt?s.codePointAt(0):s.charCodeAt(0)}var BitmapFont=function(){function s(a,l,h){var d,v,_=a.info[0],m=a.common[0],g=a.page[0],y=a.distanceField[0],T=getResolutionOfUrl(g.file),E={};this._ownsTextures=h,this.font=_.face,this.size=_.size,this.lineHeight=m.lineHeight/T,this.chars={},this.pageTextures=E;for(var b=0;b<a.page.length;b++){var R=a.page[b],I=R.id,P=R.file;E[I]=l instanceof Array?l[b]:l[P],(y==null?void 0:y.fieldType)&&y.fieldType!=="none"&&(E[I].baseTexture.alphaMode=ALPHA_MODES$4.NO_PREMULTIPLIED_ALPHA)}for(var b=0;b<a.char.length;b++){var C=a.char[b],I=C.id,S=C.page,O=a.char[b],w=O.x,U=O.y,F=O.width,M=O.height,$=O.xoffset,j=O.yoffset,D=O.xadvance;w/=T,U/=T,F/=T,M/=T,$/=T,j/=T,D/=T;var X=new Rectangle(w+E[S].frame.x/T,U+E[S].frame.y/T,F,M);this.chars[I]={xOffset:$,yOffset:j,xAdvance:D,kerning:{},texture:new Texture(E[S].baseTexture,X),page:S}}for(var b=0;b<a.kerning.length;b++){var Z=a.kerning[b],ee=Z.first,se=Z.second,_e=Z.amount;ee/=T,se/=T,_e/=T,this.chars[se]&&(this.chars[se].kerning[ee]=_e)}this.distanceFieldRange=y==null?void 0:y.distanceRange,this.distanceFieldType=(v=(d=y==null?void 0:y.fieldType)===null||d===void 0?void 0:d.toLowerCase())!==null&&v!==void 0?v:"none"}return s.prototype.destroy=function(){for(var a in this.chars)this.chars[a].texture.destroy(),this.chars[a].texture=null;for(var a in this.pageTextures)this._ownsTextures&&this.pageTextures[a].destroy(!0),this.pageTextures[a]=null;this.chars=null,this.pageTextures=null},s.install=function(a,l,h){var d;if(a instanceof BitmapFontData)d=a;else{var v=autoDetectFormat(a);if(!v)throw new Error("Unrecognized data format for font.");d=v.parse(a)}l instanceof Texture&&(l=[l]);var _=new s(d,l,h);return s.available[_.font]=_,_},s.uninstall=function(a){var l=s.available[a];if(!l)throw new Error("No font found named '"+a+"'");l.destroy(),delete s.available[a]},s.from=function(a,l,h){if(!a)throw new Error("[BitmapFont] Property `name` is required.");var d=Object.assign({},s.defaultOptions,h),v=d.chars,_=d.padding,m=d.resolution,g=d.textureWidth,y=d.textureHeight,T=resolveCharacters(v),E=l instanceof TextStyle?l:new TextStyle(l),b=g,R=new BitmapFontData;R.info[0]={face:E.fontFamily,size:E.fontSize},R.common[0]={lineHeight:E.fontSize};for(var I=0,P=0,C,S,O,w=0,U=[],F=0;F<T.length;F++){C||(C=document.createElement("canvas"),C.width=g,C.height=y,S=C.getContext("2d"),O=new BaseTexture(C,{resolution:m}),U.push(new Texture(O)),R.page.push({id:U.length-1,file:""}));var M=TextMetrics.measureText(T[F],E,!1,C),$=M.width,j=Math.ceil(M.height),D=Math.ceil((E.fontStyle==="italic"?2:1)*$);if(P>=y-j*m){if(P===0)throw new Error("[BitmapFont] textureHeight "+y+"px is "+("too small for "+E.fontSize+"px fonts"));--F,C=null,S=null,O=null,P=0,I=0,w=0;continue}if(w=Math.max(j+M.fontProperties.descent,w),D*m+I>=b){--F,P+=w*m,P=Math.ceil(P),I=0,w=0;continue}drawGlyph(C,S,M,I,P,m,E);var X=extractCharCode(M.text);R.char.push({id:X,page:U.length-1,x:I/m,y:P/m,width:D,height:j,xoffset:0,yoffset:0,xadvance:Math.ceil($-(E.dropShadow?E.dropShadowDistance:0)-(E.stroke?E.strokeThickness:0))}),I+=(D+2*_)*m,I=Math.ceil(I)}for(var F=0,Z=T.length;F<Z;F++)for(var ee=T[F],se=0;se<Z;se++){var _e=T[se],J=S.measureText(ee).width,q=S.measureText(_e).width,Q=S.measureText(ee+_e).width,ae=Q-(J+q);ae&&R.kerning.push({first:extractCharCode(ee),second:extractCharCode(_e),amount:ae})}var he=new s(R,U,!0);return s.available[a]!==void 0&&s.uninstall(a),s.available[a]=he,he},s.ALPHA=[["a","z"],["A","Z"]," "],s.NUMERIC=[["0","9"]],s.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],s.ASCII=[[" ","~"]],s.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:s.ALPHANUMERIC},s.available={},s}(),msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],BitmapText=function(s){__extends$8(a,s);function a(l,h){h===void 0&&(h={});var d=s.call(this)||this;d._tint=16777215;var v=Object.assign({},a.styleDefaults,h),_=v.align,m=v.tint,g=v.maxWidth,y=v.letterSpacing,T=v.fontName,E=v.fontSize;if(!BitmapFont.available[T])throw new Error('Missing BitmapFont "'+T+'"');return d._activePagesMeshData=[],d._textWidth=0,d._textHeight=0,d._align=_,d._tint=m,d._fontName=T,d._fontSize=E||BitmapFont.available[T].size,d.text=l,d._maxWidth=g,d._maxLineHeight=0,d._letterSpacing=y,d._anchor=new ObservablePoint(function(){d.dirty=!0},d,0,0),d._roundPixels=settings$1.ROUND_PIXELS,d.dirty=!0,d._resolution=settings$1.RESOLUTION,d._autoResolution=!0,d._textureCache={},d}return a.prototype.updateText=function(){for(var l,h=BitmapFont.available[this._fontName],d=this._fontSize/h.size,v=new Point,_=[],m=[],g=[],y=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",T=splitTextToCharacters(y),E=this._maxWidth*h.size/this._fontSize,b=h.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData,R=null,I=0,P=0,C=0,S=-1,O=0,w=0,U=0,F=0,M=0;M<T.length;M++){var $=T[M],j=extractCharCode($);if(/(?:\s)/.test($)&&(S=M,O=I,F++),$==="\r"||$===`
`){m.push(I),g.push(-1),P=Math.max(P,I),++C,++w,v.x=0,v.y+=h.lineHeight,R=null,F=0;continue}var D=h.chars[j];if(!!D){R&&D.kerning[R]&&(v.x+=D.kerning[R]);var X=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};X.texture=D.texture,X.line=C,X.charCode=j,X.position.x=v.x+D.xOffset+this._letterSpacing/2,X.position.y=v.y+D.yOffset,X.prevSpaces=F,_.push(X),I=X.position.x+Math.max(D.xAdvance,D.texture.orig.width),v.x+=D.xAdvance+this._letterSpacing,U=Math.max(U,D.yOffset+D.texture.height),R=j,S!==-1&&E>0&&v.x>E&&(++w,removeItems(_,1+S-w,1+M-S),M=S,S=-1,m.push(O),g.push(_.length>0?_[_.length-1].prevSpaces:0),P=Math.max(P,O),C++,v.x=0,v.y+=h.lineHeight,R=null,F=0)}}var Z=T[T.length-1];Z!=="\r"&&Z!==`
`&&(/(?:\s)/.test(Z)&&(I=O),m.push(I),P=Math.max(P,I),g.push(-1));for(var ee=[],M=0;M<=C;M++){var se=0;this._align==="right"?se=P-m[M]:this._align==="center"?se=(P-m[M])/2:this._align==="justify"&&(se=g[M]<0?0:(P-m[M])/g[M]),ee.push(se)}for(var _e=_.length,J={},q=[],Q=this._activePagesMeshData,M=0;M<Q.length;M++)b.push(Q[M]);for(var M=0;M<_e;M++){var ae=_[M].texture,he=ae.baseTexture.uid;if(!J[he]){var k=b.pop();if(!k){var re=new MeshGeometry,oe=void 0,le=void 0;h.distanceFieldType==="none"?(oe=new MeshMaterial(Texture.EMPTY),le=BLEND_MODES$4.NORMAL):(oe=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),le=BLEND_MODES$4.NORMAL_NPM);var de=new Mesh(re,oe);de.blendMode=le,k={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:de,vertices:null,uvs:null,indices:null}}k.index=0,k.indexCount=0,k.vertexCount=0,k.uvsCount=0,k.total=0;var xe=this._textureCache;xe[he]=xe[he]||new Texture(ae.baseTexture),k.mesh.texture=xe[he],k.mesh.tint=this._tint,q.push(k),J[he]=k}J[he].total++}for(var M=0;M<Q.length;M++)q.indexOf(Q[M])===-1&&this.removeChild(Q[M].mesh);for(var M=0;M<q.length;M++)q[M].mesh.parent!==this&&this.addChild(q[M].mesh);this._activePagesMeshData=q;for(var M in J){var k=J[M],pe=k.total;if(!(((l=k.indices)===null||l===void 0?void 0:l.length)>6*pe)||k.vertices.length<Mesh.BATCHABLE_SIZE*2)k.vertices=new Float32Array(4*2*pe),k.uvs=new Float32Array(4*2*pe),k.indices=new Uint16Array(6*pe);else for(var ve=k.total,Re=k.vertices,Te=ve*4*2;Te<Re.length;Te++)Re[Te]=0;k.mesh.size=6*pe}for(var M=0;M<_e;M++){var $=_[M],ge=$.position.x+ee[$.line]*(this._align==="justify"?$.prevSpaces:1);this._roundPixels&&(ge=Math.round(ge));var ce=ge*d,me=$.position.y*d,ae=$.texture,A=J[ae.baseTexture.uid],N=ae.frame,L=ae._uvs,B=A.index++;A.indices[B*6+0]=0+B*4,A.indices[B*6+1]=1+B*4,A.indices[B*6+2]=2+B*4,A.indices[B*6+3]=0+B*4,A.indices[B*6+4]=2+B*4,A.indices[B*6+5]=3+B*4,A.vertices[B*8+0]=ce,A.vertices[B*8+1]=me,A.vertices[B*8+2]=ce+N.width*d,A.vertices[B*8+3]=me,A.vertices[B*8+4]=ce+N.width*d,A.vertices[B*8+5]=me+N.height*d,A.vertices[B*8+6]=ce,A.vertices[B*8+7]=me+N.height*d,A.uvs[B*8+0]=L.x0,A.uvs[B*8+1]=L.y0,A.uvs[B*8+2]=L.x1,A.uvs[B*8+3]=L.y1,A.uvs[B*8+4]=L.x2,A.uvs[B*8+5]=L.y2,A.uvs[B*8+6]=L.x3,A.uvs[B*8+7]=L.y3}this._textWidth=P*d,this._textHeight=(v.y+h.lineHeight)*d;for(var M in J){var k=J[M];if(this.anchor.x!==0||this.anchor.y!==0)for(var G=0,Y=this._textWidth*this.anchor.x,K=this._textHeight*this.anchor.y,z=0;z<k.total;z++)k.vertices[G++]-=Y,k.vertices[G++]-=K,k.vertices[G++]-=Y,k.vertices[G++]-=K,k.vertices[G++]-=Y,k.vertices[G++]-=K,k.vertices[G++]-=Y,k.vertices[G++]-=K;this._maxLineHeight=U*d;var W=k.mesh.geometry.getBuffer("aVertexPosition"),V=k.mesh.geometry.getBuffer("aTextureCoord"),ne=k.mesh.geometry.getIndex();W.data=k.vertices,V.data=k.uvs,ne.data=k.indices,W.update(),V.update(),ne.update()}for(var M=0;M<_.length;M++)charRenderDataPool.push(_[M])},a.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},a.prototype._render=function(l){this._autoResolution&&this._resolution!==l.resolution&&(this._resolution=l.resolution,this.dirty=!0);var h=BitmapFont.available[this._fontName],d=h.distanceFieldRange,v=h.distanceFieldType,_=h.size;if(v!=="none")for(var m=this.worldTransform,g=m.a,y=m.b,T=m.c,E=m.d,b=Math.sqrt(g*g+y*y),R=Math.sqrt(T*T+E*E),I=(Math.abs(b)+Math.abs(R))/2,P=this._fontSize/_,C=0,S=this._activePagesMeshData;C<S.length;C++){var O=S[C];O.mesh.shader.uniforms.uFWidth=I*d*P*this._resolution}s.prototype._render.call(this,l)},a.prototype.getLocalBounds=function(){return this.validate(),s.prototype.getLocalBounds.call(this)},a.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){if(this._tint!==l){this._tint=l;for(var h=0;h<this._activePagesMeshData.length;h++)this._activePagesMeshData[h].mesh.tint=l}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"align",{get:function(){return this._align},set:function(l){this._align!==l&&(this._align=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontName",{get:function(){return this._fontName},set:function(l){if(!BitmapFont.available[l])throw new Error('Missing BitmapFont "'+l+'"');this._fontName!==l&&(this._fontName=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontSize",{get:function(){return this._fontSize},set:function(l){this._fontSize!==l&&(this._fontSize=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"anchor",{get:function(){return this._anchor},set:function(l){typeof l=="number"?this._anchor.set(l):this._anchor.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(l){l=String(l==null?"":l),this._text!==l&&(this._text=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(l){this._maxWidth!==l&&(this._maxWidth=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(l){this._letterSpacing!==l&&(this._letterSpacing=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){l!==this._roundPixels&&(this._roundPixels=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resolution",{get:function(){return this._resolution},set:function(l){this._autoResolution=!1,this._resolution!==l&&(this._resolution=l,this.dirty=!0)},enumerable:!1,configurable:!0}),a.prototype.destroy=function(l){var h=this._textureCache;for(var d in h){var v=h[d];v.destroy(),delete h[d]}this._textureCache=null,s.prototype.destroy.call(this,l)},a.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},a}(Container$1),BitmapFontLoader=function(){function s(){}return s.add=function(){LoaderResource.setExtensionXhrType("fnt",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},s.use=function(a,l){var h=autoDetectFormat(a.data);if(!h){l();return}for(var d=s.getBaseUrl(this,a),v=h.parse(a.data),_={},m=function(P){_[P.metadata.pageFile]=P.texture,Object.keys(_).length===v.page.length&&(a.bitmapFont=BitmapFont.install(v,_,!0),l())},g=0;g<v.page.length;++g){var y=v.page[g].file,T=d+y,E=!1;for(var b in this.resources){var R=this.resources[b];if(R.url===T){R.metadata.pageFile=y,R.texture?m(R):R.onAfterMiddleware.add(m),E=!0;break}}if(!E){var I={crossOrigin:a.crossOrigin,loadType:LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:y},a.metadata.imageMetadata),parentResource:a};this.add(T,I,m)}}},s.getBaseUrl=function(a,l){var h=l.isDataUrl?"":s.dirname(l.url);return l.isDataUrl&&(h==="."&&(h=""),a.baseUrl&&h&&a.baseUrl.charAt(a.baseUrl.length-1)==="/"&&(h+="/")),h=h.replace(a.baseUrl,""),h&&h.charAt(h.length-1)!=="/"&&(h+="/"),h},s.dirname=function(a){var l=a.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return l===a?".":l===""?"/":l},s}();/*!
 * @pixi/filter-alpha - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$7=function(s,a){return extendStatics$7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$7(s,a)};function __extends$7(s,a){extendStatics$7(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment$4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,AlphaFilter=function(s){__extends$7(a,s);function a(l){l===void 0&&(l=1);var h=s.call(this,defaultVertex$1,fragment$4,{uAlpha:1})||this;return h.alpha=l,h}return Object.defineProperty(a.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(l){this.uniforms.uAlpha=l},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/filter-blur - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$6=function(s,a){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$6(s,a)};function __extends$6(s,a){extendStatics$6(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(s,a){var l=Math.ceil(s/2),h=vertTemplate,d="",v;a?v="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":v="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var _=0;_<s;_++){var m=v.replace("%index%",_.toString());m=m.replace("%sampleIndex%",_-(l-1)+".0"),d+=m,d+=`
`}return h=h.replace("%blur%",d),h=h.replace("%size%",s.toString()),h}var GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(s){for(var a=GAUSSIAN_VALUES[s],l=a.length,h=fragTemplate,d="",v="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",_,m=0;m<s;m++){var g=v.replace("%index%",m.toString());_=m,m>=l&&(_=s-m-1),g=g.replace("%value%",a[_].toString()),d+=g,d+=`
`}return h=h.replace("%blur%",d),h=h.replace("%size%",s.toString()),h}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$1;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$1||(ENV$1={}));var RENDERER_TYPE$1;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$1||(RENDERER_TYPE$1={}));var BUFFER_BITS$1;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$1||(BUFFER_BITS$1={}));var BLEND_MODES$1;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$1||(BLEND_MODES$1={}));var DRAW_MODES$1;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$1||(DRAW_MODES$1={}));var FORMATS$1;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$1||(FORMATS$1={}));var TARGETS$1;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$1||(TARGETS$1={}));var TYPES$1;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$1||(TYPES$1={}));var SAMPLER_TYPES$1;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$1||(SAMPLER_TYPES$1={}));var SCALE_MODES$1;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$1||(SCALE_MODES$1={}));var WRAP_MODES$1;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$1||(WRAP_MODES$1={}));var MIPMAP_MODES$1;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$1||(MIPMAP_MODES$1={}));var ALPHA_MODES$1;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$1||(ALPHA_MODES$1={}));var CLEAR_MODES$1;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$1||(CLEAR_MODES$1={}));var GC_MODES$1;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$1||(GC_MODES$1={}));var PRECISION$1;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$1||(PRECISION$1={}));var MASK_TYPES$1;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE"})(MASK_TYPES$1||(MASK_TYPES$1={}));var MSAA_QUALITY$1;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$1||(MSAA_QUALITY$1={}));var BUFFER_TYPE$1;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$1||(BUFFER_TYPE$1={}));var BlurFilterPass=function(s){__extends$6(a,s);function a(l,h,d,v,_){h===void 0&&(h=8),d===void 0&&(d=4),v===void 0&&(v=settings$1.FILTER_RESOLUTION),_===void 0&&(_=5);var m=this,g=generateBlurVertSource(_,l),y=generateBlurFragSource(_);return m=s.call(this,g,y)||this,m.horizontal=l,m.resolution=v,m._quality=0,m.quality=d,m.blur=h,m}return a.prototype.apply=function(l,h,d,v){if(d?this.horizontal?this.uniforms.strength=1/d.width*(d.width/h.width):this.uniforms.strength=1/d.height*(d.height/h.height):this.horizontal?this.uniforms.strength=1/l.renderer.width*(l.renderer.width/h.width):this.uniforms.strength=1/l.renderer.height*(l.renderer.height/h.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)l.applyFilter(this,h,d,v);else{var _=l.getFilterTexture(),m=l.renderer,g=h,y=_;this.state.blend=!1,l.applyFilter(this,g,y,CLEAR_MODES$1.CLEAR);for(var T=1;T<this.passes-1;T++){l.bindAndClear(g,CLEAR_MODES$1.BLIT),this.uniforms.uSampler=y;var E=y;y=g,g=E,m.shader.bind(this),m.geometry.draw(5)}this.state.blend=!0,l.applyFilter(this,y,d,v),l.returnFilterTexture(_)}},Object.defineProperty(a.prototype,"blur",{get:function(){return this.strength},set:function(l){this.padding=1+Math.abs(l)*2,this.strength=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"quality",{get:function(){return this._quality},set:function(l){this._quality=l,this.passes=l},enumerable:!1,configurable:!0}),a}(Filter),BlurFilter=function(s){__extends$6(a,s);function a(l,h,d,v){l===void 0&&(l=8),h===void 0&&(h=4),d===void 0&&(d=settings$1.FILTER_RESOLUTION),v===void 0&&(v=5);var _=s.call(this)||this;return _.blurXFilter=new BlurFilterPass(!0,l,h,d,v),_.blurYFilter=new BlurFilterPass(!1,l,h,d,v),_.resolution=d,_.quality=h,_.blur=l,_.repeatEdgePixels=!1,_}return a.prototype.apply=function(l,h,d,v){var _=Math.abs(this.blurXFilter.strength),m=Math.abs(this.blurYFilter.strength);if(_&&m){var g=l.getFilterTexture();this.blurXFilter.apply(l,h,g,CLEAR_MODES$1.CLEAR),this.blurYFilter.apply(l,g,d,v),l.returnFilterTexture(g)}else m?this.blurYFilter.apply(l,h,d,v):this.blurXFilter.apply(l,h,d,v)},a.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(a.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=this.blurYFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(l){this.blurXFilter.quality=this.blurYFilter.quality=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(l){this.blurYFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(l){this.blurYFilter.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(l){this._repeatEdgePixels=l,this.updatePadding()},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/filter-color-matrix - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$5=function(s,a){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$5(s,a)};function __extends$5(s,a){extendStatics$5(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment$3=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,ColorMatrixFilter=function(s){__extends$5(a,s);function a(){var l=this,h={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return l=s.call(this,defaultFilterVertex,fragment$3,h)||this,l.alpha=1,l}return a.prototype._loadMatrix=function(l,h){h===void 0&&(h=!1);var d=l;h&&(this._multiply(d,this.uniforms.m,l),d=this._colorMatrix(d)),this.uniforms.m=d},a.prototype._multiply=function(l,h,d){return l[0]=h[0]*d[0]+h[1]*d[5]+h[2]*d[10]+h[3]*d[15],l[1]=h[0]*d[1]+h[1]*d[6]+h[2]*d[11]+h[3]*d[16],l[2]=h[0]*d[2]+h[1]*d[7]+h[2]*d[12]+h[3]*d[17],l[3]=h[0]*d[3]+h[1]*d[8]+h[2]*d[13]+h[3]*d[18],l[4]=h[0]*d[4]+h[1]*d[9]+h[2]*d[14]+h[3]*d[19]+h[4],l[5]=h[5]*d[0]+h[6]*d[5]+h[7]*d[10]+h[8]*d[15],l[6]=h[5]*d[1]+h[6]*d[6]+h[7]*d[11]+h[8]*d[16],l[7]=h[5]*d[2]+h[6]*d[7]+h[7]*d[12]+h[8]*d[17],l[8]=h[5]*d[3]+h[6]*d[8]+h[7]*d[13]+h[8]*d[18],l[9]=h[5]*d[4]+h[6]*d[9]+h[7]*d[14]+h[8]*d[19]+h[9],l[10]=h[10]*d[0]+h[11]*d[5]+h[12]*d[10]+h[13]*d[15],l[11]=h[10]*d[1]+h[11]*d[6]+h[12]*d[11]+h[13]*d[16],l[12]=h[10]*d[2]+h[11]*d[7]+h[12]*d[12]+h[13]*d[17],l[13]=h[10]*d[3]+h[11]*d[8]+h[12]*d[13]+h[13]*d[18],l[14]=h[10]*d[4]+h[11]*d[9]+h[12]*d[14]+h[13]*d[19]+h[14],l[15]=h[15]*d[0]+h[16]*d[5]+h[17]*d[10]+h[18]*d[15],l[16]=h[15]*d[1]+h[16]*d[6]+h[17]*d[11]+h[18]*d[16],l[17]=h[15]*d[2]+h[16]*d[7]+h[17]*d[12]+h[18]*d[17],l[18]=h[15]*d[3]+h[16]*d[8]+h[17]*d[13]+h[18]*d[18],l[19]=h[15]*d[4]+h[16]*d[9]+h[17]*d[14]+h[18]*d[19]+h[19],l},a.prototype._colorMatrix=function(l){var h=new Float32Array(l);return h[4]/=255,h[9]/=255,h[14]/=255,h[19]/=255,h},a.prototype.brightness=function(l,h){var d=[l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0];this._loadMatrix(d,h)},a.prototype.tint=function(l,h){var d=l>>16&255,v=l>>8&255,_=l&255,m=[d/255,0,0,0,0,0,v/255,0,0,0,0,0,_/255,0,0,0,0,0,1,0];this._loadMatrix(m,h)},a.prototype.greyscale=function(l,h){var d=[l,l,l,0,0,l,l,l,0,0,l,l,l,0,0,0,0,0,1,0];this._loadMatrix(d,h)},a.prototype.blackAndWhite=function(l){var h=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.hue=function(l,h){l=(l||0)/180*Math.PI;var d=Math.cos(l),v=Math.sin(l),_=Math.sqrt,m=1/3,g=_(m),y=d+(1-d)*m,T=m*(1-d)-g*v,E=m*(1-d)+g*v,b=m*(1-d)+g*v,R=d+m*(1-d),I=m*(1-d)-g*v,P=m*(1-d)-g*v,C=m*(1-d)+g*v,S=d+m*(1-d),O=[y,T,E,0,0,b,R,I,0,0,P,C,S,0,0,0,0,0,1,0];this._loadMatrix(O,h)},a.prototype.contrast=function(l,h){var d=(l||0)+1,v=-.5*(d-1),_=[d,0,0,0,v,0,d,0,0,v,0,0,d,0,v,0,0,0,1,0];this._loadMatrix(_,h)},a.prototype.saturate=function(l,h){l===void 0&&(l=0);var d=l*2/3+1,v=(d-1)*-.5,_=[d,v,v,0,0,v,d,v,0,0,v,v,d,0,0,0,0,0,1,0];this._loadMatrix(_,h)},a.prototype.desaturate=function(){this.saturate(-1)},a.prototype.negative=function(l){var h=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.sepia=function(l){var h=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.technicolor=function(l){var h=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.polaroid=function(l){var h=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.toBGR=function(l){var h=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.kodachrome=function(l){var h=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.browni=function(l){var h=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.vintage=function(l){var h=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.colorTone=function(l,h,d,v,_){l=l||.2,h=h||.15,d=d||16770432,v=v||3375104;var m=(d>>16&255)/255,g=(d>>8&255)/255,y=(d&255)/255,T=(v>>16&255)/255,E=(v>>8&255)/255,b=(v&255)/255,R=[.3,.59,.11,0,0,m,g,y,l,0,T,E,b,h,0,m-T,g-E,y-b,0,0];this._loadMatrix(R,_)},a.prototype.night=function(l,h){l=l||.1;var d=[l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0];this._loadMatrix(d,h)},a.prototype.predator=function(l,h){var d=[11.224130630493164*l,-4.794486999511719*l,-2.8746118545532227*l,0*l,.40342438220977783*l,-3.6330697536468506*l,9.193157196044922*l,-2.951810836791992*l,0*l,-1.316135048866272*l,-3.2184197902679443*l,-4.2375030517578125*l,7.476448059082031*l,0*l,.8044459223747253*l,0,0,0,1,0];this._loadMatrix(d,h)},a.prototype.lsd=function(l){var h=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(h,l)},a.prototype.reset=function(){var l=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(l,!1)},Object.defineProperty(a.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(l){this.uniforms.m=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(l){this.uniforms.uAlpha=l},enumerable:!1,configurable:!0}),a}(Filter);ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$4=function(s,a){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$4(s,a)};function __extends$4(s,a){extendStatics$4(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment$2=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,DisplacementFilter=function(s){__extends$4(a,s);function a(l,h){var d=this,v=new Matrix;return l.renderable=!1,d=s.call(this,vertex$1,fragment$2,{mapSampler:l._texture,filterMatrix:v,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,d.maskSprite=l,d.maskMatrix=v,h==null&&(h=20),d.scale=new Point(h,h),d}return a.prototype.apply=function(l,h,d,v){this.uniforms.filterMatrix=l.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var _=this.maskSprite.worldTransform,m=Math.sqrt(_.a*_.a+_.b*_.b),g=Math.sqrt(_.c*_.c+_.d*_.d);m!==0&&g!==0&&(this.uniforms.rotation[0]=_.a/m,this.uniforms.rotation[1]=_.b/m,this.uniforms.rotation[2]=_.c/g,this.uniforms.rotation[3]=_.d/g),l.applyFilter(this,h,d,v)},Object.defineProperty(a.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(l){this.uniforms.mapSampler=l},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/filter-fxaa - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$3=function(s,a){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$3(s,a)};function __extends$3(s,a){extendStatics$3(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var vertex=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,fragment$1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,FXAAFilter=function(s){__extends$3(a,s);function a(){return s.call(this,vertex,fragment$1)||this}return a}(Filter);/*!
 * @pixi/filter-noise - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$2=function(s,a){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$2(s,a)};function __extends$2(s,a){extendStatics$2(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,NoiseFilter=function(s){__extends$2(a,s);function a(l,h){l===void 0&&(l=.5),h===void 0&&(h=Math.random());var d=s.call(this,defaultFilterVertex,fragment,{uNoise:0,uSeed:0})||this;return d.noise=l,d.seed=h,d}return Object.defineProperty(a.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(l){this.uniforms.uNoise=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(l){this.uniforms.uSeed=l},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/mixin-cache-as-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV||(ENV={}));var RENDERER_TYPE;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE||(RENDERER_TYPE={}));var BUFFER_BITS;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS||(BUFFER_BITS={}));var BLEND_MODES;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES||(BLEND_MODES={}));var DRAW_MODES;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES||(DRAW_MODES={}));var FORMATS;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS||(FORMATS={}));var TARGETS;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS||(TARGETS={}));var TYPES;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES||(TYPES={}));var SAMPLER_TYPES;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES||(SAMPLER_TYPES={}));var SCALE_MODES;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES||(SCALE_MODES={}));var WRAP_MODES;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES||(WRAP_MODES={}));var MIPMAP_MODES;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES||(MIPMAP_MODES={}));var ALPHA_MODES;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES||(ALPHA_MODES={}));var CLEAR_MODES;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES||(CLEAR_MODES={}));var GC_MODES;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES||(GC_MODES={}));var PRECISION;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION||(PRECISION={}));var MASK_TYPES;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE"})(MASK_TYPES||(MASK_TYPES={}));var MSAA_QUALITY;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY||(MSAA_QUALITY={}));var BUFFER_TYPE;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE||(BUFFER_TYPE={}));var _tempMatrix=new Matrix;DisplayObject$1.prototype._cacheAsBitmap=!1;DisplayObject$1.prototype._cacheData=null;DisplayObject$1.prototype._cacheAsBitmapResolution=null;DisplayObject$1.prototype._cacheAsBitmapMultisample=MSAA_QUALITY.NONE;var CacheData=function(){function s(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return s}();Object.defineProperties(DisplayObject$1.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(s){s!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(s){s!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(s){if(this._cacheAsBitmap!==s){this._cacheAsBitmap=s;var a;s?(this._cacheData||(this._cacheData=new CacheData),a=this._cacheData,a.originalRender=this.render,a.originalRenderCanvas=this.renderCanvas,a.originalUpdateTransform=this.updateTransform,a.originalCalculateBounds=this.calculateBounds,a.originalGetLocalBounds=this.getLocalBounds,a.originalDestroy=this.destroy,a.originalContainsPoint=this.containsPoint,a.originalMask=this._mask,a.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(a=this._cacheData,a.sprite&&this._destroyCachedDisplayObject(),this.render=a.originalRender,this.renderCanvas=a.originalRenderCanvas,this.calculateBounds=a.originalCalculateBounds,this.getLocalBounds=a.originalGetLocalBounds,this.destroy=a.originalDestroy,this.updateTransform=a.originalUpdateTransform,this.containsPoint=a.originalContainsPoint,this._mask=a.originalMask,this.filterArea=a.originalFilterArea)}}}});DisplayObject$1.prototype._renderCached=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(a))};DisplayObject$1.prototype._initCachedDisplayObject=function(a){var l;if(!(this._cacheData&&this._cacheData.sprite)){var h=this.alpha;this.alpha=1,a.batch.flush();var d=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var v=this.filters[0].padding;d.pad(v)}d.ceil(settings$1.RESOLUTION);var _=a.renderTexture.current,m=a.renderTexture.sourceFrame.clone(),g=a.renderTexture.destinationFrame.clone(),y=a.projection.transform,T=RenderTexture.create({width:d.width,height:d.height,resolution:this.cacheAsBitmapResolution||a.resolution,multisample:(l=this.cacheAsBitmapMultisample)!==null&&l!==void 0?l:a.multisample}),E="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=E,BaseTexture.addToCache(T.baseTexture,E),Texture.addToCache(T,E);var b=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-d.x,-d.y);this.render=this._cacheData.originalRender,a.render(this,{renderTexture:T,clear:!0,transform:b,skipUpdateTransform:!1}),a.framebuffer.blit(),a.projection.transform=y,a.renderTexture.bind(_,m,g),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=h;var R=new Sprite(T);R.transform.worldTransform=this.transform.worldTransform,R.anchor.x=-(d.x/d.width),R.anchor.y=-(d.y/d.height),R.alpha=h,R._bounds=this._bounds,this._cacheData.sprite=R,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=R.containsPoint.bind(R)}};DisplayObject$1.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(a))};DisplayObject$1.prototype._initCachedDisplayObjectCanvas=function(a){if(!(this._cacheData&&this._cacheData.sprite)){var l=this.getLocalBounds(null,!0),h=this.alpha;this.alpha=1;var d=a.context,v=a._projTransform;l.ceil(settings$1.RESOLUTION);var _=RenderTexture.create({width:l.width,height:l.height}),m="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=m,BaseTexture.addToCache(_.baseTexture,m),Texture.addToCache(_,m);var g=_tempMatrix;this.transform.localTransform.copyTo(g),g.invert(),g.tx-=l.x,g.ty-=l.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,{renderTexture:_,clear:!0,transform:g,skipUpdateTransform:!1}),a.context=d,a._projTransform=v,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=h;var y=new Sprite(_);y.transform.worldTransform=this.transform.worldTransform,y.anchor.x=-(l.x/l.width),y.anchor.y=-(l.y/l.height),y.alpha=h,y._bounds=this._bounds,this._cacheData.sprite=y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=y.containsPoint.bind(y)}};DisplayObject$1.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject$1.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject$1.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject$1.prototype._cacheAsBitmapDestroy=function(a){this.cacheAsBitmap=!1,this.destroy(a)};/*!
 * @pixi/mixin-get-child-by-name - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject$1.prototype.name=null;Container$1.prototype.getChildByName=function(a,l){for(var h=0,d=this.children.length;h<d;h++)if(this.children[h].name===a)return this.children[h];if(l)for(var h=0,d=this.children.length;h<d;h++){var v=this.children[h];if(!!v.getChildByName){var _=this.children[h].getChildByName(a,!0);if(_)return _}}return null};/*!
 * @pixi/mixin-get-global-position - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject$1.prototype.getGlobalPosition=function(a,l){return a===void 0&&(a=new Point),l===void 0&&(l=!1),this.parent?this.parent.toGlobal(this.position,a,l):(a.x=this.position.x,a.y=this.position.y),a};/*!
 * @pixi/mesh-extras - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$1=function(s,a){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics$1(s,a)};function __extends$1(s,a){extendStatics$1(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var PlaneGeometry=function(s){__extends$1(a,s);function a(l,h,d,v){l===void 0&&(l=100),h===void 0&&(h=100),d===void 0&&(d=10),v===void 0&&(v=10);var _=s.call(this)||this;return _.segWidth=d,_.segHeight=v,_.width=l,_.height=h,_.build(),_}return a.prototype.build=function(){for(var l=this.segWidth*this.segHeight,h=[],d=[],v=[],_=this.segWidth-1,m=this.segHeight-1,g=this.width/_,y=this.height/m,T=0;T<l;T++){var E=T%this.segWidth,b=T/this.segWidth|0;h.push(E*g,b*y),d.push(E/_,b/m)}for(var R=_*m,T=0;T<R;T++){var I=T%_,P=T/_|0,C=P*this.segWidth+I,S=P*this.segWidth+I+1,O=(P+1)*this.segWidth+I,w=(P+1)*this.segWidth+I+1;v.push(C,S,O,S,w,O)}this.buffers[0].data=new Float32Array(h),this.buffers[1].data=new Float32Array(d),this.indexBuffer.data=new Uint16Array(v),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},a}(MeshGeometry),RopeGeometry=function(s){__extends$1(a,s);function a(l,h,d){l===void 0&&(l=200),d===void 0&&(d=0);var v=s.call(this,new Float32Array(h.length*4),new Float32Array(h.length*4),new Uint16Array((h.length-1)*6))||this;return v.points=h,v._width=l,v.textureScale=d,v.build(),v}return Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),a.prototype.build=function(){var l=this.points;if(!!l){var h=this.getBuffer("aVertexPosition"),d=this.getBuffer("aTextureCoord"),v=this.getIndex();if(!(l.length<1)){h.data.length/4!==l.length&&(h.data=new Float32Array(l.length*4),d.data=new Float32Array(l.length*4),v.data=new Uint16Array((l.length-1)*6));var _=d.data,m=v.data;_[0]=0,_[1]=0,_[2]=0,_[3]=1;for(var g=0,y=l[0],T=this._width*this.textureScale,E=l.length,b=0;b<E;b++){var R=b*4;if(this.textureScale>0){var I=y.x-l[b].x,P=y.y-l[b].y,C=Math.sqrt(I*I+P*P);y=l[b],g+=C/T}else g=b/(E-1);_[R]=g,_[R+1]=0,_[R+2]=g,_[R+3]=1}for(var S=0,b=0;b<E-1;b++){var R=b*2;m[S++]=R,m[S++]=R+1,m[S++]=R+2,m[S++]=R+2,m[S++]=R+1,m[S++]=R+3}d.update(),v.update(),this.updateVertices()}}},a.prototype.updateVertices=function(){var l=this.points;if(!(l.length<1)){for(var h=l[0],d,v=0,_=0,m=this.buffers[0].data,g=l.length,y=0;y<g;y++){var T=l[y],E=y*4;y<l.length-1?d=l[y+1]:d=T,_=-(d.x-h.x),v=d.y-h.y;var b=Math.sqrt(v*v+_*_),R=this.textureScale>0?this.textureScale*this._width/2:this._width/2;v/=b,_/=b,v*=R,_*=R,m[E]=T.x+v,m[E+1]=T.y+_,m[E+2]=T.x-v,m[E+3]=T.y-_,h=T}this.buffers[0].update()}},a.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},a}(MeshGeometry),SimpleRope=function(s){__extends$1(a,s);function a(l,h,d){d===void 0&&(d=0);var v=this,_=new RopeGeometry(l.height,h,d),m=new MeshMaterial(l);return d>0&&(l.baseTexture.wrapMode=WRAP_MODES$4.REPEAT),v=s.call(this,_,m)||this,v.autoUpdate=!0,v}return a.prototype._render=function(l){var h=this.geometry;(this.autoUpdate||h._width!==this.shader.texture.height)&&(h._width=this.shader.texture.height,h.update()),s.prototype._render.call(this,l)},a}(Mesh),SimplePlane=function(s){__extends$1(a,s);function a(l,h,d){var v=this,_=new PlaneGeometry(l.width,l.height,h,d),m=new MeshMaterial(Texture.WHITE);return v=s.call(this,_,m)||this,v.texture=l,v.autoResize=!0,v}return a.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var l=this.geometry,h=this.shader.texture,d=h.width,v=h.height;this.autoResize&&(l.width!==d||l.height!==v)&&(l.width=this.shader.texture.width,l.height=this.shader.texture.height,l.build())},Object.defineProperty(a.prototype,"texture",{get:function(){return this.shader.texture},set:function(l){this.shader.texture!==l&&(this.shader.texture=l,this._textureID=-1,l.baseTexture.valid?this.textureUpdated():l.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),a.prototype._render=function(l){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),s.prototype._render.call(this,l)},a.prototype.destroy=function(l){this.shader.texture.off("update",this.textureUpdated,this),s.prototype.destroy.call(this,l)},a}(Mesh),SimpleMesh=function(s){__extends$1(a,s);function a(l,h,d,v,_){l===void 0&&(l=Texture.EMPTY);var m=this,g=new MeshGeometry(h,d,v);g.getBuffer("aVertexPosition").static=!1;var y=new MeshMaterial(l);return m=s.call(this,g,y,null,_)||this,m.autoUpdate=!0,m}return Object.defineProperty(a.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(l){this.geometry.getBuffer("aVertexPosition").data=l},enumerable:!1,configurable:!0}),a.prototype._render=function(l){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),s.prototype._render.call(this,l)},a}(Mesh),DEFAULT_BORDER_SIZE=10,NineSlicePlane=function(s){__extends$1(a,s);function a(l,h,d,v,_){h===void 0&&(h=DEFAULT_BORDER_SIZE),d===void 0&&(d=DEFAULT_BORDER_SIZE),v===void 0&&(v=DEFAULT_BORDER_SIZE),_===void 0&&(_=DEFAULT_BORDER_SIZE);var m=s.call(this,Texture.WHITE,4,4)||this;return m._origWidth=l.orig.width,m._origHeight=l.orig.height,m._width=m._origWidth,m._height=m._origHeight,m._leftWidth=h,m._rightWidth=v,m._topHeight=d,m._bottomHeight=_,m.texture=l,m}return a.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(a.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(l){this.geometry.getBuffer("aVertexPosition").data=l},enumerable:!1,configurable:!0}),a.prototype.updateHorizontalVertices=function(){var l=this.vertices,h=this._getMinScale();l[9]=l[11]=l[13]=l[15]=this._topHeight*h,l[17]=l[19]=l[21]=l[23]=this._height-this._bottomHeight*h,l[25]=l[27]=l[29]=l[31]=this._height},a.prototype.updateVerticalVertices=function(){var l=this.vertices,h=this._getMinScale();l[2]=l[10]=l[18]=l[26]=this._leftWidth*h,l[4]=l[12]=l[20]=l[28]=this._width-this._rightWidth*h,l[6]=l[14]=l[22]=l[30]=this._width},a.prototype._getMinScale=function(){var l=this._leftWidth+this._rightWidth,h=this._width>l?1:this._width/l,d=this._topHeight+this._bottomHeight,v=this._height>d?1:this._height/d,_=Math.min(h,v);return _},Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(l){this._width=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(l){this._height=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(l){this._leftWidth=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(l){this._rightWidth=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"topHeight",{get:function(){return this._topHeight},set:function(l){this._topHeight=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(l){this._bottomHeight=l,this._refresh()},enumerable:!1,configurable:!0}),a.prototype._refresh=function(){var l=this.texture,h=this.geometry.buffers[1].data;this._origWidth=l.orig.width,this._origHeight=l.orig.height;var d=1/this._origWidth,v=1/this._origHeight;h[0]=h[8]=h[16]=h[24]=0,h[1]=h[3]=h[5]=h[7]=0,h[6]=h[14]=h[22]=h[30]=1,h[25]=h[27]=h[29]=h[31]=1,h[2]=h[10]=h[18]=h[26]=d*this._leftWidth,h[4]=h[12]=h[20]=h[28]=1-d*this._rightWidth,h[9]=h[11]=h[13]=h[15]=v*this._topHeight,h[17]=h[19]=h[21]=h[23]=1-v*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},a}(SimplePlane);/*!
 * @pixi/sprite-animated - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics=function(s,a){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])},extendStatics(s,a)};function __extends(s,a){extendStatics(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var AnimatedSprite=function(s){__extends(a,s);function a(l,h){h===void 0&&(h=!0);var d=s.call(this,l[0]instanceof Texture?l[0]:l[0].texture)||this;return d._textures=null,d._durations=null,d._autoUpdate=h,d._isConnectedToTicker=!1,d.animationSpeed=1,d.loop=!0,d.updateAnchor=!1,d.onComplete=null,d.onFrameChange=null,d.onLoop=null,d._currentTime=0,d._playing=!1,d._previousFrame=null,d.textures=l,d}return a.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},a.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},a.prototype.gotoAndStop=function(l){this.stop();var h=this.currentFrame;this._currentTime=l,h!==this.currentFrame&&this.updateTexture()},a.prototype.gotoAndPlay=function(l){var h=this.currentFrame;this._currentTime=l,h!==this.currentFrame&&this.updateTexture(),this.play()},a.prototype.update=function(l){if(!!this._playing){var h=this.animationSpeed*l,d=this.currentFrame;if(this._durations!==null){var v=this._currentTime%1*this._durations[this.currentFrame];for(v+=h/60*1e3;v<0;)this._currentTime--,v+=this._durations[this.currentFrame];var _=Math.sign(this.animationSpeed*l);for(this._currentTime=Math.floor(this._currentTime);v>=this._durations[this.currentFrame];)v-=this._durations[this.currentFrame]*_,this._currentTime+=_;this._currentTime+=v/this._durations[this.currentFrame]}else this._currentTime+=h;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):d!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<d?this.onLoop():this.animationSpeed<0&&this.currentFrame>d&&this.onLoop()),this.updateTexture())}},a.prototype.updateTexture=function(){var l=this.currentFrame;this._previousFrame!==l&&(this._previousFrame=l,this._texture=this._textures[l],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},a.prototype.destroy=function(l){this.stop(),s.prototype.destroy.call(this,l),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},a.fromFrames=function(l){for(var h=[],d=0;d<l.length;++d)h.push(Texture.from(l[d]));return new a(h)},a.fromImages=function(l){for(var h=[],d=0;d<l.length;++d)h.push(Texture.from(l[d]));return new a(h)},Object.defineProperty(a.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textures",{get:function(){return this._textures},set:function(l){if(l[0]instanceof Texture)this._textures=l,this._durations=null;else{this._textures=[],this._durations=[];for(var h=0;h<l.length;h++)this._textures.push(l[h].texture),this._durations.push(l[h].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentFrame",{get:function(){var l=Math.floor(this._currentTime)%this._textures.length;return l<0&&(l+=this._textures.length),l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(l){l!==this._autoUpdate&&(this._autoUpdate=l,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),a}(Sprite);/*!
 * pixi.js - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Renderer.registerPlugin("accessibility",AccessibilityManager);Renderer.registerPlugin("extract",Extract);Renderer.registerPlugin("interaction",InteractionManager);Renderer.registerPlugin("particle",ParticleRenderer);Renderer.registerPlugin("prepare",Prepare);Renderer.registerPlugin("batch",BatchRenderer);Renderer.registerPlugin("tilingSprite",TilingSpriteRenderer);Loader.registerPlugin(BitmapFontLoader);Loader.registerPlugin(CompressedTextureLoader);Loader.registerPlugin(DDSLoader);Loader.registerPlugin(KTXLoader);Loader.registerPlugin(SpritesheetLoader);Application.registerPlugin(TickerPlugin);Application.registerPlugin(AppLoaderPlugin);var VERSION="6.4.2",filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter},pixi=Object.freeze(Object.defineProperty({__proto__:null,utils,VERSION,filters,AccessibilityManager,accessibleTarget,InteractionData,InteractionEvent,InteractionManager,InteractionTrackingData,interactiveTarget,Application,AbstractBatchRenderer,AbstractMultiResource,AbstractRenderer,ArrayResource,Attribute,BaseImageResource,BaseRenderTexture,BaseTexture,BatchDrawCall,BatchGeometry,BatchPluginFactory,BatchRenderer,BatchShaderGenerator,BatchSystem,BatchTextureArray,Buffer,BufferResource,CanvasResource,ContextSystem,CubeResource,Filter,FilterState,FilterSystem,Framebuffer,FramebufferSystem,GLFramebuffer,GLProgram,GLTexture,Geometry,GeometrySystem,IGLUniformData,INSTALLED,ImageBitmapResource,ImageResource,MaskData,MaskSystem,ObjectRenderer,Program,ProjectionSystem,Quad,QuadUv,RenderTexture,RenderTexturePool,RenderTextureSystem,Renderer,Resource,SVGResource,ScissorSystem,Shader,ShaderSystem,SpriteMaskFilter,State:State$1,StateSystem,StencilSystem,System:System$1,Texture,TextureGCSystem,TextureMatrix,TextureSystem,TextureUvs,UniformGroup,VideoResource,ViewableBuffer,autoDetectRenderer,autoDetectResource,checkMaxIfStatementsInShader,createUBOElements,defaultFilterVertex,defaultVertex:defaultVertex$1,generateProgram,generateUniformBufferSync,getTestContext,getUBOData,resources,systems,uniformParsers,Extract,AppLoaderPlugin,Loader,get LoaderResource(){return LoaderResource},TextureLoader,BlobResource,CompressedTextureLoader,CompressedTextureResource,DDSLoader,FORMATS_TO_COMPONENTS,get INTERNAL_FORMATS(){return INTERNAL_FORMATS},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,KTXLoader,TYPES_TO_BYTES_PER_COMPONENT,TYPES_TO_BYTES_PER_PIXEL,ParticleContainer,ParticleRenderer,BasePrepare,CountLimiter,Prepare,TimeLimiter,Spritesheet,SpritesheetLoader,TilingSprite,TilingSpriteRenderer,BitmapFont,BitmapFontData,BitmapFontLoader,BitmapText,Ticker,TickerPlugin,get UPDATE_PRIORITY(){return UPDATE_PRIORITY},get ALPHA_MODES(){return ALPHA_MODES$4},get BLEND_MODES(){return BLEND_MODES$4},get BUFFER_BITS(){return BUFFER_BITS$4},get BUFFER_TYPE(){return BUFFER_TYPE$4},get CLEAR_MODES(){return CLEAR_MODES$4},get DRAW_MODES(){return DRAW_MODES$4},get ENV(){return ENV$4},get FORMATS(){return FORMATS$4},get GC_MODES(){return GC_MODES$4},get MASK_TYPES(){return MASK_TYPES$4},get MIPMAP_MODES(){return MIPMAP_MODES$4},get MSAA_QUALITY(){return MSAA_QUALITY$4},get PRECISION(){return PRECISION$4},get RENDERER_TYPE(){return RENDERER_TYPE$4},get SAMPLER_TYPES(){return SAMPLER_TYPES$4},get SCALE_MODES(){return SCALE_MODES$4},get TARGETS(){return TARGETS$4},get TYPES(){return TYPES$4},get WRAP_MODES(){return WRAP_MODES$4},Bounds:Bounds$2,Container:Container$1,DisplayObject:DisplayObject$1,TemporaryDisplayObject:TemporaryDisplayObject$1,FillStyle,GRAPHICS_CURVES,Graphics,GraphicsData,GraphicsGeometry,get LINE_CAP(){return LINE_CAP},get LINE_JOIN(){return LINE_JOIN},LineStyle,graphicsUtils,Circle,DEG_TO_RAD,Ellipse,Matrix,ObservablePoint,PI_2,Point,Polygon,RAD_TO_DEG,Rectangle,RoundedRectangle,get SHAPES(){return SHAPES},Transform,groupD8,Mesh,MeshBatchUvs,MeshGeometry,MeshMaterial,NineSlicePlane,PlaneGeometry,RopeGeometry,SimpleMesh,SimplePlane,SimpleRope,Runner,Sprite,AnimatedSprite,get TEXT_GRADIENT(){return TEXT_GRADIENT},Text,TextMetrics,TextStyle,isMobile:isMobile$2,settings:settings$1},Symbol.toStringTag,{value:"Module"}));const _sfc_main$1=defineComponent({props:{forceCanvas:{type:Boolean},width:null,height:null,view:null,useContextAlpha:{type:[Boolean,String]},autoDensity:{type:Boolean},antialias:{type:Boolean},resolution:null,preserveDrawingBuffer:{type:Boolean},clearBeforeRender:{type:Boolean},backgroundColor:null,backgroundAlpha:null,powerPreference:null,context:null,resizeTo:null},setup(s,{expose:a}){const l=s,h=ref(),d=new Application(Oe(we({},l),{clearBeforeRender:l.clearBeforeRender||!0}));return a({application:d}),onMounted(()=>{var v;(v=h.value)==null||v.appendChild(d.view)}),(v,_)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:h},null,512))}});function queryKey(s){for(var a=[],l=0;l<s.length;l++){var h=s[l];if(!componentRegistered(h))throw new Error("Tried to create a query with an unregistered component");if(typeof h=="object"){var d=h.operator==="not"?"!":h.operator;a.push(d+h.Component._typeId)}else a.push(h._typeId)}return a.sort().join("-")}const hasWindow=typeof window!="undefined",now=hasWindow&&typeof window.performance!="undefined"?performance.now.bind(performance):Date.now.bind(Date);function componentRegistered(s){return typeof s=="object"&&s.Component._typeId!==void 0||s.isComponent&&s._typeId!==void 0}class SystemManager{constructor(a){this._systems=[],this._executeSystems=[],this.world=a,this.lastExecutedSystem=null}registerSystem(a,l){if(!a.isSystem)throw new Error(`System '${a.name}' does not extend 'System' class`);if(this.getSystem(a)!==void 0)return console.warn(`System '${a.getName()}' already registered.`),this;var h=new a(this.world,l);return h.init&&h.init(l),h.order=this._systems.length,this._systems.push(h),h.execute&&(this._executeSystems.push(h),this.sortSystems()),this}unregisterSystem(a){let l=this.getSystem(a);return l===void 0?(console.warn(`Can unregister system '${a.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(l),1),l.execute&&this._executeSystems.splice(this._executeSystems.indexOf(l),1),this)}sortSystems(){this._executeSystems.sort((a,l)=>a.priority-l.priority||a.order-l.order)}getSystem(a){return this._systems.find(l=>l instanceof a)}getSystems(){return this._systems}removeSystem(a){var l=this._systems.indexOf(a);!~l||this._systems.splice(l,1)}executeSystem(a,l,h){if(a.initialized&&a.canExecute()){let d=now();a.execute(l,h),a.executeTime=now()-d,this.lastExecutedSystem=a,a.clearEvents()}}stop(){this._executeSystems.forEach(a=>a.stop())}execute(a,l,h){this._executeSystems.forEach(d=>(h||d.enabled)&&this.executeSystem(d,a,l))}stats(){for(var a={numSystems:this._systems.length,systems:{}},l=0;l<this._systems.length;l++){var h=this._systems[l],d=a.systems[h.getName()]={queries:{},executeTime:h.executeTime};for(var v in h.ctx)d.queries[v]=h.ctx[v].stats()}return a}}class ObjectPool{constructor(a,l){this.freeList=[],this.count=0,this.T=a,this.isObjectPool=!0,typeof l!="undefined"&&this.expand(l)}acquire(){this.freeList.length<=0&&this.expand(Math.round(this.count*.2)+1);var a=this.freeList.pop();return a}release(a){a.reset(),this.freeList.push(a)}expand(a){for(var l=0;l<a;l++){var h=new this.T;h._pool=this,this.freeList.push(h)}this.count+=a}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class EventDispatcher{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(a,l){let h=this._listeners;h[a]===void 0&&(h[a]=[]),h[a].indexOf(l)===-1&&h[a].push(l)}hasEventListener(a,l){return this._listeners[a]!==void 0&&this._listeners[a].indexOf(l)!==-1}removeEventListener(a,l){var h=this._listeners[a];if(h!==void 0){var d=h.indexOf(l);d!==-1&&h.splice(d,1)}}dispatchEvent(a,l,h){this.stats.fired++;var d=this._listeners[a];if(d!==void 0)for(var v=d.slice(0),_=0;_<v.length;_++)v[_].call(this,l,h)}resetCounters(){this.stats.fired=this.stats.handled=0}}class Query{constructor(a,l){if(this.Components=[],this.NotComponents=[],a.forEach(v=>{typeof v=="object"?this.NotComponents.push(v.Component):this.Components.push(v)}),this.Components.length===0)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new EventDispatcher,this.reactive=!1,this.key=queryKey(a);for(var h=0;h<l._entities.length;h++){var d=l._entities[h];this.match(d)&&(d.queries.push(this),this.entities.push(d))}}addEntity(a){a.queries.push(this),this.entities.push(a),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED,a)}removeEntity(a){let l=this.entities.indexOf(a);~l&&(this.entities.splice(l,1),l=a.queries.indexOf(this),a.queries.splice(l,1),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_REMOVED,a))}match(a){return a.hasAllComponents(this.Components)&&!a.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(a=>a.name),not:this.NotComponents.map(a=>a.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}Query.prototype.ENTITY_ADDED="Query#ENTITY_ADDED";Query.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED";Query.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class QueryManager{constructor(a){this._world=a,this._queries={}}onEntityRemoved(a){for(var l in this._queries){var h=this._queries[l];a.queries.indexOf(h)!==-1&&h.removeEntity(a)}}onEntityComponentAdded(a,l){for(var h in this._queries){var d=this._queries[h];if(!!~d.NotComponents.indexOf(l)&&~d.entities.indexOf(a)){d.removeEntity(a);continue}!~d.Components.indexOf(l)||!d.match(a)||~d.entities.indexOf(a)||d.addEntity(a)}}onEntityComponentRemoved(a,l){for(var h in this._queries){var d=this._queries[h];if(!!~d.NotComponents.indexOf(l)&&!~d.entities.indexOf(a)&&d.match(a)){d.addEntity(a);continue}if(!!~d.Components.indexOf(l)&&!!~d.entities.indexOf(a)&&!d.match(a)){d.removeEntity(a);continue}}}getQuery(a){var l=queryKey(a),h=this._queries[l];return h||(this._queries[l]=h=new Query(a,this._world)),h}stats(){var a={};for(var l in this._queries)a[l]=this._queries[l].stats();return a}}class Component{constructor(a){if(a!==!1){const l=this.constructor.schema;for(const h in l)if(a&&a.hasOwnProperty(h))this[h]=a[h];else{const d=l[h];if(d.hasOwnProperty("default"))this[h]=d.type.clone(d.default);else{const v=d.type;this[h]=v.clone(v.default)}}}this._pool=null}copy(a){const l=this.constructor.schema;for(const h in l){const d=l[h];a.hasOwnProperty(h)&&(this[h]=d.type.copy(a[h],this[h]))}return this}clone(){return new this.constructor().copy(this)}reset(){const a=this.constructor.schema;for(const l in a){const h=a[l];if(h.hasOwnProperty("default"))this[l]=h.type.copy(h.default,this[l]);else{const d=h.type;this[l]=d.copy(d.default,this[l])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(a){const l=this.constructor.schema;Object.keys(a).forEach(h=>{l.hasOwnProperty(h)||console.warn(`Trying to set attribute '${h}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)})}}Component.schema={};Component.isComponent=!0;Component.getName=function(){return this.displayName||this.name};class SystemStateComponent extends Component{}SystemStateComponent.isSystemStateComponent=!0;class EntityPool extends ObjectPool{constructor(a,l,h){super(l,void 0),this.entityManager=a,typeof h!="undefined"&&this.expand(h)}expand(a){for(var l=0;l<a;l++){var h=new this.T(this.entityManager);h._pool=this,this.freeList.push(h)}this.count+=a}}class EntityManager{constructor(a){this.world=a,this.componentsManager=a.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new QueryManager(this),this.eventDispatcher=new EventDispatcher,this._entityPool=new EntityPool(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(a){return this._entitiesByNames[a]}createEntity(a){var l=this._entityPool.acquire();return l.alive=!0,l.name=a||"",a&&(this._entitiesByNames[a]?console.warn(`Entity name '${a}' already exist`):this._entitiesByNames[a]=l),this._entities.push(l),this.eventDispatcher.dispatchEvent(ENTITY_CREATED,l),l}entityAddComponent(a,l,h){if(typeof l._typeId=="undefined"&&!this.world.componentsManager._ComponentsMap[l._typeId])throw new Error(`Attempted to add unregistered component "${l.getName()}"`);if(!~a._ComponentTypes.indexOf(l)){a._ComponentTypes.push(l),l.__proto__===SystemStateComponent&&a.numStateComponents++;var d=this.world.componentsManager.getComponentsPool(l),v=d?d.acquire():new l(h);d&&h&&v.copy(h),a._components[l._typeId]=v,this._queryManager.onEntityComponentAdded(a,l),this.world.componentsManager.componentAddedToEntity(l),this.eventDispatcher.dispatchEvent(COMPONENT_ADDED,a,l)}}entityRemoveComponent(a,l,h){var d=a._ComponentTypes.indexOf(l);!~d||(this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE,a,l),h?this._entityRemoveComponentSync(a,l,d):(a._ComponentTypesToRemove.length===0&&this.entitiesWithComponentsToRemove.push(a),a._ComponentTypes.splice(d,1),a._ComponentTypesToRemove.push(l),a._componentsToRemove[l._typeId]=a._components[l._typeId],delete a._components[l._typeId]),this._queryManager.onEntityComponentRemoved(a,l),l.__proto__===SystemStateComponent&&(a.numStateComponents--,a.numStateComponents===0&&!a.alive&&a.remove()))}_entityRemoveComponentSync(a,l,h){a._ComponentTypes.splice(h,1);var d=a._components[l._typeId];delete a._components[l._typeId],d.dispose(),this.world.componentsManager.componentRemovedFromEntity(l)}entityRemoveAllComponents(a,l){let h=a._ComponentTypes;for(let d=h.length-1;d>=0;d--)h[d].__proto__!==SystemStateComponent&&this.entityRemoveComponent(a,h[d],l)}removeEntity(a,l){var h=this._entities.indexOf(a);if(!~h)throw new Error("Tried to remove entity not in list");a.alive=!1,this.entityRemoveAllComponents(a,l),a.numStateComponents===0&&(this.eventDispatcher.dispatchEvent(ENTITY_REMOVED,a),this._queryManager.onEntityRemoved(a),l===!0?this._releaseEntity(a,h):this.entitiesToRemove.push(a))}_releaseEntity(a,l){this._entities.splice(l,1),this._entitiesByNames[a.name]&&delete this._entitiesByNames[a.name],a._pool.release(a)}removeAllEntities(){for(var a=this._entities.length-1;a>=0;a--)this.removeEntity(this._entities[a])}processDeferredRemoval(){if(!!this.deferredRemovalEnabled){for(let l=0;l<this.entitiesToRemove.length;l++){let h=this.entitiesToRemove[l],d=this._entities.indexOf(h);this._releaseEntity(h,d)}this.entitiesToRemove.length=0;for(let l=0;l<this.entitiesWithComponentsToRemove.length;l++){let h=this.entitiesWithComponentsToRemove[l];for(;h._ComponentTypesToRemove.length>0;){let d=h._ComponentTypesToRemove.pop();var a=h._componentsToRemove[d._typeId];delete h._componentsToRemove[d._typeId],a.dispose(),this.world.componentsManager.componentRemovedFromEntity(d)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(a){return this._queryManager.getQuery(a)}count(){return this._entities.length}stats(){var a={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var l in this.componentsManager._componentPool){var h=this.componentsManager._componentPool[l];a.componentPool[h.T.getName()]={used:h.totalUsed(),size:h.count}}return a}}const ENTITY_CREATED="EntityManager#ENTITY_CREATE",ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class ComponentManager{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(a){return this.Components.indexOf(a)!==-1}registerComponent(a,l){if(this.Components.indexOf(a)!==-1){console.warn(`Component type: '${a.getName()}' already registered.`);return}const h=a.schema;if(!h)throw new Error(`Component "${a.getName()}" has no schema property.`);for(const d in h)if(!h[d].type)throw new Error(`Invalid schema for component "${a.getName()}". Missing type for "${d}" property.`);a._typeId=this.nextComponentId++,this.Components.push(a),this._ComponentsMap[a._typeId]=a,this.numComponents[a._typeId]=0,l===void 0?l=new ObjectPool(a):l===!1&&(l=void 0),this._componentPool[a._typeId]=l}componentAddedToEntity(a){this.numComponents[a._typeId]++}componentRemovedFromEntity(a){this.numComponents[a._typeId]--}getComponentsPool(a){return this._componentPool[a._typeId]}}const Version="0.3.1";class Entity{constructor(a){this._entityManager=a||null,this.id=a._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(a,l){var h=this._components[a._typeId];return!h&&l===!0&&(h=this._componentsToRemove[a._typeId]),h}getRemovedComponent(a){return this._componentsToRemove[a._typeId]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(a){var l=this._components[a._typeId];if(!!l){for(var h=0;h<this.queries.length;h++){var d=this.queries[h];d.reactive&&d.Components.indexOf(a)!==-1&&d.eventDispatcher.dispatchEvent(Query.prototype.COMPONENT_CHANGED,this,l)}return l}}addComponent(a,l){return this._entityManager.entityAddComponent(this,a,l),this}removeComponent(a,l){return this._entityManager.entityRemoveComponent(this,a,l),this}hasComponent(a,l){return!!~this._ComponentTypes.indexOf(a)||l===!0&&this.hasRemovedComponent(a)}hasRemovedComponent(a){return!!~this._ComponentTypesToRemove.indexOf(a)}hasAllComponents(a){for(var l=0;l<a.length;l++)if(!this.hasComponent(a[l]))return!1;return!0}hasAnyComponents(a){for(var l=0;l<a.length;l++)if(this.hasComponent(a[l]))return!0;return!1}removeAllComponents(a){return this._entityManager.entityRemoveAllComponents(this,a)}copy(a){for(var l in a._components){var h=a._components[l];this.addComponent(h.constructor);var d=this.getComponent(h.constructor);d.copy(h)}return this}clone(){return new Entity(this._entityManager).copy(this)}reset(){this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0;for(var a in this._components)delete this._components[a]}remove(a){return this._entityManager.removeEntity(this,a)}}const DEFAULT_OPTIONS={entityPoolSize:0,entityClass:Entity};class World{constructor(a={}){if(this.options=Object.assign({},DEFAULT_OPTIONS,a),this.componentsManager=new ComponentManager(this),this.entityManager=new EntityManager(this),this.systemManager=new SystemManager(this),this.enabled=!0,this.eventQueues={},hasWindow&&typeof CustomEvent!="undefined"){var l=new CustomEvent("ecsy-world-created",{detail:{world:this,version:Version}});window.dispatchEvent(l)}this.lastTime=now()/1e3}registerComponent(a,l){return this.componentsManager.registerComponent(a,l),this}registerSystem(a,l){return this.systemManager.registerSystem(a,l),this}hasRegisteredComponent(a){return this.componentsManager.hasComponent(a)}unregisterSystem(a){return this.systemManager.unregisterSystem(a),this}getSystem(a){return this.systemManager.getSystem(a)}getSystems(){return this.systemManager.getSystems()}execute(a,l){a||(l=now()/1e3,a=l-this.lastTime,this.lastTime=l),this.enabled&&(this.systemManager.execute(a,l),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(a){return this.entityManager.createEntity(a)}stats(){var a={entities:this.entityManager.stats(),system:this.systemManager.stats()};return a}}class System{canExecute(){if(this._mandatoryQueries.length===0)return!0;for(let l=0;l<this._mandatoryQueries.length;l++){var a=this._mandatoryQueries[l];if(a.entities.length===0)return!1}return!0}getName(){return this.constructor.getName()}constructor(a,l){if(this.world=a,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,l&&l.priority&&(this.priority=l.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var h in this.constructor.queries){var d=this.constructor.queries[h],v=d.components;if(!v||v.length===0)throw new Error("'components' attribute can't be empty in a query");let g=v.filter(T=>!componentRegistered(T));if(g.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${h}' with unregistered components: [${g.map(T=>T.getName()).join(", ")}]`);var _=this.world.entityManager.queryComponents(v);this._queries[h]=_,d.mandatory===!0&&this._mandatoryQueries.push(_),this.queries[h]={results:_.entities};var m=["added","removed","changed"];const y={added:Query.prototype.ENTITY_ADDED,removed:Query.prototype.ENTITY_REMOVED,changed:Query.prototype.COMPONENT_CHANGED};d.listen&&m.forEach(T=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${m.join(", ")}) for query '${h}' but it does not implement the 'execute' method.`),d.listen[T]){let E=d.listen[T];if(T==="changed"){if(_.reactive=!0,E===!0){let b=this.queries[h][T]=[];_.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,R=>{b.indexOf(R)===-1&&b.push(R)})}else if(Array.isArray(E)){let b=this.queries[h][T]=[];_.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,(R,I)=>{E.indexOf(I.constructor)!==-1&&b.indexOf(R)===-1&&b.push(R)})}}else{let b=this.queries[h][T]=[];_.eventDispatcher.addEventListener(y[T],R=>{b.indexOf(R)===-1&&b.push(R)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let l in this.queries){var a=this.queries[l];if(a.added&&(a.added.length=0),a.removed&&(a.removed.length=0),a.changed)if(Array.isArray(a.changed))a.changed.length=0;else for(let h in a.changed)a.changed[h].length=0}}toJSON(){var a={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var l=this.constructor.queries;for(let h in l){let d=this.queries[h],v=l[h],_=a.queries[h]={key:this._queries[h].key};_.mandatory=v.mandatory===!0,_.reactive=v.listen&&(v.listen.added===!0||v.listen.removed===!0||v.listen.changed===!0||Array.isArray(v.listen.changed)),_.reactive&&(_.listen={},["added","removed","changed"].forEach(g=>{d[g]&&(_.listen[g]={entities:d[g].length})}))}}return a}}System.isSystem=!0;System.getName=function(){return this.displayName||this.name};class TagComponent extends Component{constructor(){super(!1)}}TagComponent.isTagComponent=!0;const copyValue=s=>s,cloneValue=s=>s,copyArray=(s,a)=>{if(!s)return s;if(!a)return s.slice();a.length=0;for(let l=0;l<s.length;l++)a.push(s[l]);return a},cloneArray=s=>s&&s.slice(),copyJSON=s=>JSON.parse(JSON.stringify(s)),cloneJSON=s=>JSON.parse(JSON.stringify(s));function createType(s){var a=["name","default","copy","clone"],l=a.filter(h=>!s.hasOwnProperty(h));if(l.length>0)throw new Error(`createType expects a type definition with the following properties: ${l.join(", ")}`);return s.isType=!0,s}const Types={Number:createType({name:"Number",default:0,copy:copyValue,clone:cloneValue}),Boolean:createType({name:"Boolean",default:!1,copy:copyValue,clone:cloneValue}),String:createType({name:"String",default:"",copy:copyValue,clone:cloneValue}),Array:createType({name:"Array",default:[],copy:copyArray,clone:cloneArray}),Ref:createType({name:"Ref",default:void 0,copy:copyValue,clone:cloneValue}),JSON:createType({name:"JSON",default:null,copy:copyJSON,clone:cloneJSON})};function generateId(s){for(var a="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",h=l.length,d=0;d<s;d++)a+=l.charAt(Math.floor(Math.random()*h));return a}function injectScript(s,a){var l=document.createElement("script");l.src=s,l.onload=a,(document.head||document.documentElement).appendChild(l)}function hookConsoleAndErrors(s){var a=["error","warning","log"];a.forEach(l=>{if(typeof console[l]=="function"){var h=console[l].bind(console);console[l]=(...d)=>(s.send({method:"console",type:l,args:JSON.stringify(d)}),h.apply(null,d))}}),window.addEventListener("error",l=>{s.send({method:"error",error:JSON.stringify({message:l.error.message,stack:l.error.stack})})})}function includeRemoteIdHTML(s){let a=document.createElement("div");return a.style.cssText=`
    align-items: center;
    background-color: #333;
    color: #aaa;
    display:flex;
    font-family: Arial;
    font-size: 1.1em;
    height: 40px;
    justify-content: center;
    left: 0;
    opacity: 0.9;
    position: absolute;
    right: 0;
    text-align: center;
    top: 0;
  `,a.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${s}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(a),a}function enableRemoteDevtools(remoteId){if(!hasWindow){console.warn("Remote devtools not available outside the browser");return}window.generateNewCode=()=>{window.localStorage.clear(),remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=s=>{var a=s.detail.world;Version=s.detail.version,worldsBeforeLoading.push(a)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",function(){infoDiv.innerHTML="Connected",connection.on("data",function(data){if(data.type==="init"){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(s=>{var a=new CustomEvent("ecsy-world-created",{detail:{world:s,version:Version}});window.dispatchEvent(a)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if(data.type==="executeScript"){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value})}})})})})};injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}hasWindow&&new URLSearchParams(window.location.search).has("enable-remote-devtools")&&enableRemoteDevtools();const Ce=class{constructor(a,l){this.x=a,this.y=l}static angle(a,l){return Math.atan2(l.y-a.y,l.x-a.x)*(180/Math.PI)}static distance(a,l){return Math.sqrt(Math.pow(l.x-a.x,2)+Math.pow(l.y-a.y,2))}static scale(a,l){return new Ce(a.x*l.x,a.y*l.y)}static min(a,l){return new Ce(Math.min(a.x,l.x),Math.min(a.y,l.y))}static max(a,l){return new Ce(Math.max(a.x,l.x),Math.max(a.y,l.y))}static lerp(a,l,h){return new Ce(a.x*(1-h)+l.x*h,a.y*(1-h)+l.y*h)}static subtracts(a,l){return new Ce(a.x-l.x,a.y-l.y)}static multiplies(a,l){return new Ce(a.x*l,a.y*l)}static divides(a,l,h){let d=a.x/l,v=a.y/l;return h&&(d=Math[h](d),v=Math[h](v)),new Ce(d,v)}static adds(a,l){return new Ce(a.x+l.x,a.y+l.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalized(){const a=this.magnitude();return new Ce(this.x!==0?this.x/a:0,this.y!==0?this.y/a:0)}equals(a){return this.x===a.x&&this.y===a.y}toString(){return`${this.x},${this.y}`}};let Vector2=Ce;H(Vector2,"ZERO",Object.seal(new Ce(0,0)));class Input{static addKeyStatus(a,l){this.keysStatus[a]=l}static setMouseButton(a,l){l==="click"?this.mouseClick=1:l==="dblclick"?this.mouseClick=2:this.mouseButtons[a]=l}static clearKeysStatus(){for(const a of Object.keys(this.keysStatus))this.keysStatus[a]==="keyup"&&(this.keysStatus[a]=void 0)}static clearMouseStatuses(){for(const a of Object.keys(this.mouseButtons)){const l=parseInt(a);this.mouseButtons[l]==="mouseup"&&(this.mouseButtons[l]=void 0)}this.mouseClick=0}static isKey(a,l){return this.keysStatus[a]===l}static isKeyPressed(a){return this.isKey(a,"keypress")}static isKeyDown(a){return this.isKey(a,"keydown")}static isKeyUp(a){return this.isKey(a,"keyup")}static isMouseButtonUp(a){return this.mouseButtons[a]==="mouseup"}static isMouseButtonDown(a){return this.mouseButtons[a]==="mousedown"}static isMouseClick(){return this.mouseClick===1}static isMouseDblClick(){return this.mouseClick===2}}H(Input,"keysStatus",{}),H(Input,"mousePosition",Vector2.ZERO),H(Input,"mouseButtons",{}),H(Input,"mouseClick",0);class Constants{}H(Constants,"CELL_SIZE",16),H(Constants,"ANIMATION_UNIT_SPEED",250);const filterEmpty=Boolean,getOptions=()=>window.location.hash.substring(1).split("&").filter(filterEmpty).map(s=>s.split("=")).reduce((s,a)=>(s[a[0]]=a[1].split(",").filter(filterEmpty),s),{}),toEqual=s=>a=>a.equals(s),arrayIncludesByEquals=(s,a)=>s.find(toEqual(a))!=null,toWorldPositionCellCenter=s=>new Vector2(s.x-s.x%Constants.CELL_SIZE+Constants.CELL_SIZE/2,s.y-s.y%Constants.CELL_SIZE+Constants.CELL_SIZE/2),toWorldPosition=s=>new Vector2(s.x*Constants.CELL_SIZE+Constants.CELL_SIZE/2,s.y*Constants.CELL_SIZE+Constants.CELL_SIZE/2),cellPositionToVector=(s,a)=>toWorldPosition(new Vector2(s,a)),toGridPosition=s=>Vector2.divides(s,Constants.CELL_SIZE,"floor"),getMouseGridPosition=()=>toGridPosition(Input.mousePosition),convertPathfindingPathToPositions=s=>s.map(({position:a})=>a),getCell=s=>{const a=s.getComponent(TransformComponent),{x:l,y:h}=toGridPosition(a.position);return{x:l,y:h}},falsePredicate=()=>!1,keepOrder=()=>0,not=s=>a=>!s(a);class TransformComponent extends Component{constructor(){super(...arguments);H(this,"position");H(this,"rotation")}get gridPosition(){return toGridPosition(this.position)}distance(l){return Vector2.distance(this.position,l.position)}}H(TransformComponent,"schema",{position:{type:Types.Ref},rotation:{type:Types.Number,default:0}});class SizeComponent extends Component{}H(SizeComponent,"schema",{width:{type:Types.Number,default:0},height:{type:Types.Number,default:0}});class SelectableComponent extends Component{}H(SelectableComponent,"schema",{selected:{type:Types.Boolean,default:!1}});class MovableComponent extends Component{}H(MovableComponent,"schema",{moving:{type:Types.Boolean,default:!1}});class HealthComponent extends Component{constructor(){super(...arguments);H(this,"points");H(this,"maxPoints")}takeHit(l){this.points-=l,console.log("take hit")}}H(HealthComponent,"schema",{points:{type:Types.Number,default:10},maxPoints:{type:Types.Number,default:10}});class MoveTransformVelocityComponent extends Component{constructor(){super(...arguments);H(this,"moveSpeed");H(this,"velocity")}calculateMovement(l){return Vector2.multiplies(this.velocity,this.moveSpeed*(l/1e3))}}H(MoveTransformVelocityComponent,"schema",{moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO}});class MovePositionDirectComponent extends Component{constructor(){super(...arguments);H(this,"movePosition")}}H(MovePositionDirectComponent,"schema",{movePosition:{type:Types.Ref,default:null}});class PlayerMovementMouseComponent extends TagComponent{}class PlayerMovementKeysComponent extends TagComponent{}class MoveVelocityComponent extends Component{constructor(){super(...arguments);H(this,"moveSpeed");H(this,"velocity")}calculateMovement(l){return Vector2.multiplies(this.velocity,this.moveSpeed*(l/1e3))}}H(MoveVelocityComponent,"schema",{moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO}});class Bounds{constructor(a,l){H(this,"extends");H(this,"min");H(this,"max");this.center=a,this.size=l,this.extends=new Vector2(l.x/2,l.y/2),this.min=Vector2.subtracts(this.center,this.extends),this.max=Vector2.adds(this.center,this.extends)}contains(a){return a.x>=this.min.x&&a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y}}class AliveComponent extends Component{}H(AliveComponent,"schema",{alive:{type:Types.Boolean,default:!0}});class EntityHelper{static isAlive(a){const l=a.getComponent(AliveComponent);return(l==null?void 0:l.alive)||!1}static isPositionInsideEntity(a,l,h){const d=a.getComponent(TransformComponent),v=a.getComponent(SizeComponent);return!d||!v?!1:new Bounds(d.position,new Vector2(v.width,v.height)).contains(new Vector2(l,h))}static isObjectInsideContainer(a,l){const h=a.getComponent(TransformComponent);return h?h.position.x>=l.x&&h.position.x<=l.x+l.width&&h.position.y>=l.y&&h.position.y<=l.y+l.height:!1}static deselect(a){const l=a.getMutableComponent(SelectableComponent);!l||(l.selected=!1)}static select(a){const l=a.getMutableComponent(SelectableComponent);!l||(l.selected=!0)}static isSelected(a){const l=a.getComponent(SelectableComponent);return l?l.selected:!1}static isMoving(a){const l=a.getComponent(MovePositionDirectComponent);return l?l.movePosition!==null:!1}}class TeamComponent extends Component{}H(TeamComponent,"schema",{number:{type:Types.Number}});const isInRange=(s,a)=>{if(!s.hasComponent(TransformComponent))return falsePredicate;const l=s.getComponent(TransformComponent).position;return h=>{if(!h.hasComponent(TransformComponent))return!1;const d=h.getComponent(TransformComponent);return Vector2.distance(l,d.position)<=a}},byClosestDistance=s=>{if(!s.hasComponent(TransformComponent))return keepOrder;const a=s.getComponent(TransformComponent);return(l,h)=>{if(!l.hasComponent(TransformComponent)&&!h.hasComponent(TransformComponent))return 0;if(!l.hasComponent(TransformComponent))return 1;if(!h.hasComponent(TransformComponent))return-1;const d=l.getComponent(TransformComponent),v=h.getComponent(TransformComponent);return a.distance(d)-a.distance(v)}},isOnTeam=s=>a=>a.hasComponent(TeamComponent)?a.getComponent(TeamComponent).number===s:!1,isSameEntity=s=>a=>a.id===s.id,getEntityAtPosition=(s,a,l)=>{var h;return(h=s.find(d=>EntityHelper.isPositionInsideEntity(d,a,l)))!=null?h:null},isAlive=()=>s=>{var a,l;return(l=(a=s.getComponent(AliveComponent))==null?void 0:a.alive)!=null?l:!0},Me=class extends System{constructor(l,h){super(l,h);H(this,"startPosition",null);H(this,"deselectEntitiesTimeout",null);H(this,"app");H(this,"rectangle");this.app=h.app,this.rectangle=new Graphics,this.rectangle.visible=!1,this.app.stage.addChild(this.rectangle)}getSelected(){return this.queries.selectable.results.filter(l=>{var h;return((h=l.getComponent(SelectableComponent))==null?void 0:h.selected)||!1})}startSelect(){this.rectangle.visible=!0}updateSelect(){const l=Input.mousePosition.x-this.startPosition.x,h=Input.mousePosition.y-this.startPosition.y;this.getSelected().forEach(EntityHelper.deselect),this.rectangle.clear(),this.rectangle.lineStyle(1,0),this.rectangle.drawRect(this.startPosition.x,this.startPosition.y,l,h)}endSelect(){this.selectEntities(),this.startPosition=null,this.rectangle.visible=!1,this.rectangle.clear()}selectEntities(){this.isSimpleClick()?this.selectOneEntity():this.selectMultipleEntities()}isSimpleClick(){return Vector2.distance(this.startPosition,Input.mousePosition)<Me.SINGLE_UNIT_DISTANCE}selectOneEntity(){const l=this.getEntityAtPosition(Input.mousePosition.x,Input.mousePosition.y);if(l&&isOnTeam(1)(l))EntityHelper.select(l);else{Input.isMouseDblClick()||(this.deselectEntitiesTimeout=setTimeout(()=>{this.getSelected().forEach(EntityHelper.deselect)},300));return}}selectMultipleEntities(){const l=Input.mousePosition.x-this.startPosition.x,h=Input.mousePosition.y-this.startPosition.y;this.queries.selectable.results.filter(d=>EntityHelper.isObjectInsideContainer(d,{x:this.startPosition.x,y:this.startPosition.y,width:l,height:h})).filter(isOnTeam(1)).forEach(d=>EntityHelper.select(d))}getEntityAtPosition(l,h){return getEntityAtPosition(this.queries.selectable.results,l,h)}execute(l,h){Input.isMouseDblClick()&&this.deselectEntitiesTimeout!==null&&clearTimeout(this.deselectEntitiesTimeout),this.startPosition===null?Input.isMouseButtonDown(0)&&(this.startPosition=Input.mousePosition,this.startSelect()):Input.isMouseButtonUp(0)?this.endSelect():Vector2.distance(this.startPosition,Input.mousePosition)>Me.SINGLE_UNIT_DISTANCE&&this.updateSelect()}};let PlayerSelectionSystem=Me;H(PlayerSelectionSystem,"queries",{selectable:{components:[SelectableComponent]}}),H(PlayerSelectionSystem,"SINGLE_UNIT_DISTANCE",5);class HealthSystem extends System{execute(a,l){this.queries.healthy.added!==void 0&&this.queries.healthy.added.forEach(this.updateStatus),this.queries.healthy.changed!==void 0&&this.queries.healthy.changed.forEach(this.updateStatus)}updateStatus(a){const l=a.getComponent(HealthComponent);if(!!l&&!!a.hasComponent(AliveComponent)&&l.points===0){const h=a.getMutableComponent(AliveComponent);if(!h)return;h.alive=!1}}}H(HealthSystem,"queries",{healthy:{components:[HealthComponent],listen:{added:!0,changed:!0}}});class SpriteComponent extends Component{}H(SpriteComponent,"schema",{sprite:{type:Types.Ref}});class PixiJsSystem extends System{constructor(l,h){super(l,h);H(this,"app");this.app=h.app}}class AnimatedSpriteComponent extends Component{constructor(){super(...arguments);H(this,"state")}}H(AnimatedSpriteComponent,"schema",{sprite:{type:Types.Ref},state:{type:Types.String}});class AliveSystem extends PixiJsSystem{execute(a,l){this.queries.alives.changed&&this.queries.alives.changed.forEach(h=>{this.isDead(h)&&this.handleDead(h)})}isDead(a){const l=a.getMutableComponent(AliveComponent);return l?!l.alive:!1}handleDead(a){if(a.removeComponent(SelectableComponent),a.removeComponent(HealthComponent),a.hasComponent(SpriteComponent)){const l=a.getComponent(SpriteComponent);l.sprite.texture=this.app.loader.resources.dead.texture}if(a.hasComponent(AnimatedSpriteComponent)){const l=a.getComponent(AnimatedSpriteComponent);l.sprite.textures=[this.app.loader.resources.dead.texture]}}}H(AliveSystem,"queries",{alives:{components:[AliveComponent],listen:{changed:!0}}});class InputSystem extends System{constructor(l,h){super(l,h);H(this,"canvas");H(this,"keyQueue",[]);H(this,"mouseEvents",[]);this.canvas=h.canvas,this.canvas.addEventListener("mousedown",d=>{this.mouseEvents.push(d)}),this.canvas.addEventListener("mouseup",d=>{this.mouseEvents.push(d)}),this.canvas.addEventListener("click",d=>{this.mouseEvents.push(d)}),this.canvas.addEventListener("dblclick",d=>{this.mouseEvents.push(d)}),this.canvas.addEventListener("mousemove",d=>{Input.mousePosition=new Vector2(d.offsetX,d.offsetY)}),window.addEventListener("keydown",d=>{this.keyQueue.push(d)}),window.addEventListener("keyup",d=>{this.keyQueue.push(d)}),window.addEventListener("keypress",d=>{this.keyQueue.push(d)})}execute(l,h){if(Input.clearMouseStatuses(),this.mouseEvents.length>0){let d;for(;d=this.mouseEvents.shift();)Input.setMouseButton(d.button,d.type)}if(Input.clearKeysStatus(),this.keyQueue.length>0){let d;for(;d=this.keyQueue.pop();)Input.addKeyStatus(d.key,d.type);this.keyQueue=[]}}}class MovePositionDirectSystem extends System{execute(a,l){for(const h of this.queries.entities.results){const d=h.getMutableComponent(MovePositionDirectComponent);if((d==null?void 0:d.movePosition)==null)continue;const v=h.getMutableComponent(TransformComponent);!v||this.moveByMoveVelocity(h,v,d)}}moveByTransformVelocity(a,l,h){const d=a.getMutableComponent(MoveTransformVelocityComponent);if(d){if(Vector2.distance(l.position,h.movePosition)<1){l.position=h.movePosition,h.movePosition=null,d.velocity=Vector2.ZERO;return}d.velocity=Vector2.subtracts(h.movePosition,l.position).normalized()}}moveByMoveVelocity(a,l,h){const d=a.getMutableComponent(MoveVelocityComponent);if(d){if(Vector2.distance(l.position,h.movePosition)<1){l.position=h.movePosition,h.movePosition=null,d.velocity=Vector2.ZERO;return}d.velocity=Vector2.subtracts(h.movePosition,l.position).normalized()}}}H(MovePositionDirectSystem,"queries",{entities:{components:[MovePositionDirectComponent]}});class ControlledComponent extends Component{}H(ControlledComponent,"schema",{by:{type:Types.String,default:null}});class FollowComponent extends Component{constructor(){super(...arguments);H(this,"follow")}}H(FollowComponent,"schema",{follow:{type:Types.Ref,default:null}});class MovePathComponent extends Component{constructor(){super(...arguments);H(this,"path")}}H(MovePathComponent,"schema",{path:{type:Types.Array,default:[]}});const isPositionEqual=(s,a)=>s.x===a.x&&s.y===a.y;class Node$1{constructor(a=null,l){H(this,"g",0);H(this,"h",0);H(this,"f",0);this.parent=a,this.position=l}calculateF(){this.f=this.g+this.h}equals(a){return a instanceof Node$1?isPositionEqual(this.position,a.position):!1}toString(){return this.position.x+","+this.position.y}}const getLowestFNode=s=>{let a=s[0];for(let l=1;l<s.length;l++){const h=s[l];h.f<a.f&&(a=h)}return a!=null?a:null},createPathFromEndNode=s=>{const a=[];a.push(s);let l=s;for(;l.parent!==null;)a.push(l.parent),l=l.parent;return a.reverse(),a},relativeAdjacentPositions=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0},{x:-1,y:-1},{x:-1,y:1},{x:1,y:-1},{x:1,y:1}],isPositionInsideGrid=(s,a)=>a.y>=0&&a.y<s.length&&a.x>=0&&a.x<s[a.y].length,generateAdjacentNodes=(s,a)=>relativeAdjacentPositions.map(l=>{const h={x:a.position.x+l.x,y:a.position.y+l.y};if(!!isPositionInsideGrid(s,h)&&s[h.y][h.x]===0)return new Node$1(a,h)}).filter(filterEmpty),MOVE_STRAIGHT_COST=10,MOVE_DIAGONAL_COST=14,calculateDistanceCost=(s,a)=>{const l=Math.abs(s.position.x-a.position.x),h=Math.abs(s.position.y-a.position.y),d=Math.abs(l-h);return MOVE_DIAGONAL_COST*Math.min(l,h)+MOVE_STRAIGHT_COST*d},astar=(s,a,l)=>{const h=new Node$1(null,a),d=new Node$1(null,l),v=[],_=[];for(v.push(h);v.length>0;){const m=getLowestFNode(v);if(m==null)break;if(v.splice(v.indexOf(m),1),_.push(m),m.equals(d))return createPathFromEndNode(m);const g=generateAdjacentNodes(s,m);for(const y of g)if(!arrayIncludesByEquals(_,y)){if(y.g=m.g+1,y.h=calculateDistanceCost(y,d),y.calculateF(),arrayIncludesByEquals(v,y)){const T=v.find(toEqual(y));if(y.g>T.g)continue}v.push(y)}}return[]};class PlayerMovementMouseSystem extends PixiJsSystem{constructor(l,h){super(l,h);H(this,"map",null);h.eventBus.on("level:loaded",d=>{this.map=d.detail.level.collisionMap})}execute(l,h){if(Input.isMouseButtonUp(2)||Input.isMouseDblClick())for(const d of this.queries.playerEntities.results){const v=d.getComponent(SelectableComponent);if(!v||!v.selected)continue;const _=d.getComponent(TransformComponent);if(!!_&&this.map!=null){const m=getEntityAtPosition(this.queries.entities.results,Input.mousePosition.x,Input.mousePosition.y);if(m!=null){const E=d.getMutableComponent(FollowComponent);if(E!=null){E.follow=m;continue}}const g=d.getMutableComponent(FollowComponent);g!=null&&g.follow!=null&&(g.follow=null);const y=astar(this.map,_.gridPosition,getMouseGridPosition()),T=d.getMutableComponent(MovePathComponent);T.path=convertPathfindingPathToPositions(y.slice(1)),d.hasComponent(ControlledComponent)&&(d.getMutableComponent(ControlledComponent).by="player")}}}}H(PlayerMovementMouseSystem,"queries",{playerEntities:{components:[PlayerMovementMouseComponent]},entities:{components:[TransformComponent,SizeComponent]}});class MoveVelocitySystem extends System{execute(a,l){this.queries.bodies.results.forEach(h=>this.updateEntityBody(h,a))}updateEntityBody(a,l){const h=a.getMutableComponent(MoveVelocityComponent);if((h==null?void 0:h.velocity)==null)return;const d=a.getMutableComponent(TransformComponent);!d||(d.position.x=d.position.x+h.velocity.x,d.position.y=d.position.y+h.velocity.y)}}H(MoveVelocitySystem,"queries",{bodies:{components:[MoveVelocityComponent,TransformComponent],listen:{added:!0}}});class SpriteSystem extends PixiJsSystem{execute(a,l){var h,d,v,_;if(((d=(h=this.queries.sprites.added)==null?void 0:h.length)!=null?d:0)>0)for(const m of this.queries.sprites.added){const g=m.getMutableComponent(SpriteComponent);this.app.stage.addChild(g.sprite)}if(this.queries.sprites.results.forEach(m=>{const g=m.getMutableComponent(SpriteComponent),y=m.getComponent(TransformComponent);y!=null&&g.sprite.position.set(y.position.x,y.position.y)}),((_=(v=this.queries.animatedSprites.added)==null?void 0:v.length)!=null?_:0)>0)for(const m of this.queries.animatedSprites.added){const g=m.getMutableComponent(AnimatedSpriteComponent);this.app.stage.addChild(g.sprite);const y=m.getComponent(TransformComponent);y!=null&&g.sprite.position.set(y.position.x,y.position.y)}this.queries.animatedSprites.results.forEach(m=>{const g=m.getMutableComponent(AnimatedSpriteComponent),y=m.getComponent(TransformComponent);y!=null&&g.sprite.position.set(y.position.x,y.position.y)})}}H(SpriteSystem,"queries",{sprites:{components:[SpriteComponent],listen:{added:!0}},animatedSprites:{components:[AnimatedSpriteComponent],listen:{added:!0}}});class GraphicsComponent extends Component{constructor(){super(...arguments);H(this,"addedToStage",!1)}}H(GraphicsComponent,"schema",{graphics:{type:Types.Ref},addedToStage:{type:Types.Boolean}});class AttackComponent extends Component{constructor(){super(...arguments);H(this,"aggroRange");H(this,"attackRange");H(this,"attackDamage")}attack(l){l.getMutableComponent(HealthComponent).takeHit(this.attackDamage)}}H(AttackComponent,"schema",{aggroRange:{type:Types.Number},attackRange:{type:Types.Number},attackDamage:{type:Types.Number}});const getHealthColor=s=>s>=.66?65280:s>=.33?16776960:16711680;class GraphicsSystem extends PixiJsSystem{constructor(l,h){var d;super(l,h);H(this,"showAllHealth");H(this,"showDebugAggro");this.showAllHealth=h.options.showallhealth!==void 0?h.options.showallhealth[0]=="true":!1,this.showDebugAggro=(d=h.options.debug)==null?void 0:d.includes("aggro")}drawHealthBar(l,h,d){h.beginFill(0),h.drawRect(-8,12,16,5),h.endFill();const v=l.getComponent(HealthComponent);if(v){const _=v.points/v.maxPoints;h.beginFill(getHealthColor(_)),h.drawRect(-7,13,14*_,3),h.endFill()}}drawSelectionIndicators(l,h,d){const v=l.getComponent(SizeComponent),_=4,m=-v.width/2-_,g=-v.height/2-_,y=v.width/2+_;h.lineStyle(1,0).moveTo(m,-6).lineTo(m,g).lineTo(m/2,g),h.lineStyle(1,0).moveTo(y/2,g).lineTo(y,g).lineTo(y,-6)}drawAggroRadius(l,h,d){const v=l.getComponent(AttackComponent);v!=null&&(h.lineStyle(1,16711680),h.drawCircle(0,0,v.aggroRange))}execute(l,h){var d,v,_,m;if(((v=(d=this.queries.graphics.results)==null?void 0:d.length)!=null?v:0)>0)for(const g of this.queries.graphics.results){const y=g.getMutableComponent(GraphicsComponent);if(y.addedToStage||(this.app.stage.addChild(y.graphics),y.addedToStage=!0),g.hasComponent(SelectableComponent)){const T=g.getComponent(TransformComponent).position,E=(m=(_=g.getComponent(SpriteComponent))==null?void 0:_.sprite)!=null?m:g.getComponent(AnimatedSpriteComponent).sprite;y.graphics.clear(),y.graphics.position.set(T.x,T.y),EntityHelper.isSelected(g)&&this.drawSelectionIndicators(g,y.graphics,E),(this.showAllHealth||EntityHelper.isSelected(g))&&this.drawHealthBar(g,y.graphics,E),this.showDebugAggro&&this.drawAggroRadius(g,y.graphics,E)}else y.graphics.clear()}}}H(GraphicsSystem,"queries",{graphics:{components:[GraphicsComponent]}});var require$$0=getAugmentedNamespace(pixi),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(s){for(var a,l=1,h=arguments.length;l<h;l++){a=arguments[l];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(s[d]=a[d])}return s},__assign.apply(this,arguments)},DashLine_1=void 0,PIXI=require$$0,dashLineOptionsDefault={dash:[10,5],width:1,color:16777215,alpha:1,scale:1,useTexture:!1,alignment:.5},DashLine=function(){function s(a,l){l===void 0&&(l={}),this.cursor=new PIXI.Point,this.scale=1,this.graphics=a,l=__assign(__assign({},dashLineOptionsDefault),l),this.dash=l.dash,this.dashSize=this.dash.reduce(function(h,d){return h+d}),this.useTexture=l.useTexture,this.options=l,this.setLineStyle()}return s.prototype.setLineStyle=function(){var a=this.options;if(this.useTexture){var l=s.getTexture(a,this.dashSize);this.graphics.lineTextureStyle({width:a.width*a.scale,color:a.color,alpha:a.alpha,texture:l,alignment:a.alignment}),this.activeTexture=l}else this.graphics.lineStyle({width:a.width*a.scale,color:a.color,alpha:a.alpha,cap:a.cap,join:a.join,alignment:a.alignment});this.scale=a.scale},s.distance=function(a,l,h,d){return Math.sqrt(Math.pow(h-a,2)+Math.pow(d-l,2))},s.prototype.moveTo=function(a,l){return this.lineLength=0,this.cursor.set(a,l),this.start=new PIXI.Point(a,l),this.graphics.moveTo(this.cursor.x,this.cursor.y),this},s.prototype.lineTo=function(a,l,h){typeof this.lineLength===void 0&&this.moveTo(0,0);var d=s.distance(this.cursor.x,this.cursor.y,a,l),v=Math.atan2(l-this.cursor.y,a-this.cursor.x),_=h&&a===this.start.x&&l===this.start.y;if(this.useTexture)if(this.graphics.moveTo(this.cursor.x,this.cursor.y),this.adjustLineStyle(v),_&&this.dash.length%2===0){var m=Math.min(this.dash[this.dash.length-1],d);this.graphics.lineTo(a-Math.cos(v)*m,l-Math.sin(v)*m),this.graphics.closePath()}else this.graphics.lineTo(a,l);else{for(var g=Math.cos(v),y=Math.sin(v),T=this.cursor.x,E=this.cursor.y,b=this.lineLength%(this.dashSize*this.scale),R=0,I=0,P=0,C=0;C<this.dash.length;C++){var S=this.dash[C]*this.scale;if(b<P+S){R=C,I=b-P;break}else P+=S}for(var O=d;O>0;){var S=this.dash[R]*this.scale-I,w=O>S?S:O;if(_){var U=s.distance(T+g*w,E+y*w,this.start.x,this.start.y);if(U<=w){if(R%2===0){var F=s.distance(T,E,this.start.x,this.start.y)-this.dash[this.dash.length-1]*this.scale;T+=g*F,E+=y*F,this.graphics.lineTo(T,E)}break}}T+=g*w,E+=y*w,R%2?this.graphics.moveTo(T,E):this.graphics.lineTo(T,E),O-=w,R++,R=R===this.dash.length?0:R,I=0}}return this.lineLength+=d,this.cursor.set(a,l),this},s.prototype.closePath=function(){this.lineTo(this.start.x,this.start.y,!0)},s.prototype.drawCircle=function(a,l,h,d,v){d===void 0&&(d=80);var _=Math.PI*2/d,m=0,g;v?(g=new PIXI.Point(a+Math.cos(m)*h,l+Math.sin(m)*h),v.apply(g,g),this.moveTo(g[0],g[1])):(g=new PIXI.Point(a+Math.cos(m)*h,l+Math.sin(m)*h),this.moveTo(g.x,g.y)),m+=_;for(var y=1;y<d+1;y++){var T=y===d?g:[a+Math.cos(m)*h,l+Math.sin(m)*h];this.lineTo(T[0],T[1]),m+=_}return this},s.prototype.drawEllipse=function(a,l,h,d,v,_){v===void 0&&(v=80);for(var m=Math.PI*2/v,g,y=new PIXI.Point,T=0;T<Math.PI*2;T+=m){var E=a-h*Math.sin(T),b=l-d*Math.cos(T);_&&(y.set(E,b),_.apply(y,y),E=y.x,b=y.y),T===0?(this.moveTo(E,b),g={x:E,y:b}):this.lineTo(E,b)}return this.lineTo(g.x,g.y,!0),this},s.prototype.drawPolygon=function(a,l){var h=new PIXI.Point;if(typeof a[0]=="number")if(l){h.set(a[0],a[1]),l.apply(h,h),this.moveTo(h.x,h.y);for(var d=2;d<a.length;d+=2)h.set(a[d],a[d+1]),l.apply(h,h),this.lineTo(h.x,h.y,d===a.length-2)}else{this.moveTo(a[0],a[1]);for(var d=2;d<a.length;d+=2)this.lineTo(a[d],a[d+1],d===a.length-2)}else if(l){var v=a[0];h.copyFrom(v),l.apply(h,h),this.moveTo(h.x,h.y);for(var d=1;d<a.length;d++){var _=a[d];h.copyFrom(_),l.apply(h,h),this.lineTo(h.x,h.y,d===a.length-1)}}else{var v=a[0];this.moveTo(v.x,v.y);for(var d=1;d<a.length;d++){var m=a[d];this.lineTo(m.x,m.y,d===a.length-1)}}return this},s.prototype.drawRect=function(a,l,h,d,v){if(v){var _=new PIXI.Point;_.set(a,l),v.apply(_,_),this.moveTo(_.x,_.y),_.set(a+h,l),v.apply(_,_),this.lineTo(_.x,_.y),_.set(a+h,l+d),v.apply(_,_),this.lineTo(_.x,_.y),_.set(a,l+d),v.apply(_,_),this.lineTo(_.x,_.y),_.set(a,l),v.apply(_,_),this.lineTo(_.x,_.y,!0)}else this.moveTo(a,l).lineTo(a+h,l).lineTo(a+h,l+d).lineTo(a,l+d).lineTo(a,l,!0);return this},s.prototype.adjustLineStyle=function(a){var l=this.graphics.line;l.matrix=new PIXI.Matrix,a&&l.matrix.rotate(a),this.scale!==1&&l.matrix.scale(this.scale,this.scale);var h=-this.lineLength;l.matrix.translate(this.cursor.x+h*Math.cos(a),this.cursor.y+h*Math.sin(a)),this.graphics.lineStyle(l)},s.getTexture=function(a,l){var h=a.dash.toString();if(s.dashTextureCache[h])return s.dashTextureCache[h];var d=document.createElement("canvas");d.width=l,d.height=Math.ceil(a.width);var v=d.getContext("2d");if(!v){console.warn("Did not get context from canvas");return}v.strokeStyle="white",v.globalAlpha=a.alpha,v.lineWidth=a.width;var _=0,m=a.width/2;v.moveTo(_,m);for(var g=0;g<a.dash.length;g+=2)_+=a.dash[g],v.lineTo(_,m),a.dash.length!==g+1&&(_+=a.dash[g+1],v.moveTo(_,m));v.stroke();var y=s.dashTextureCache[h]=PIXI.Texture.from(d);return y.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST,y},s.dashTextureCache={},s}();DashLine_1=DashLine;class GridSystem extends PixiJsSystem{constructor(l,h){super(l,h);H(this,"graphics");H(this,"options");this.options=h.options,window.onresize=()=>this.draw(),this.graphics=this.app.stage.addChildAt(new Graphics,0),this.draw()}execute(l,h){}draw(){var h;if(this.graphics.clear(),!((h=this.options.debug)!=null&&h.includes("grid")))return;const l=new DashLine_1(this.graphics,{dash:[5,5],width:1,color:11184810});for(let d=Constants.CELL_SIZE;d<this.app.screen.height;d+=Constants.CELL_SIZE)l.moveTo(0,d).lineTo(this.app.screen.width,d);for(let d=Constants.CELL_SIZE;d<this.app.screen.width;d+=Constants.CELL_SIZE)l.moveTo(d,0).lineTo(d,this.app.screen.height)}}class AssetComponent extends Component{constructor(){super(...arguments);H(this,"animations")}}H(AssetComponent,"schema",{animations:{type:Types.Ref}});class TargetComponent extends Component{}H(TargetComponent,"schema",{target:{type:Types.Ref,default:null}});class CollidableComponent extends TagComponent{}class EntityFactory{constructor(a,l){this.world=a,this.animations=l}createUnit(a){const l=Constants.CELL_SIZE,h=Constants.CELL_SIZE;let d=Math.random()*360;d-=d%90;const v=this.animations[a.color].swordsmen,_=new AnimatedSprite(v.idle.north);return _.anchor.set(.5),_.position.set(a.position.x,a.position.y),_.animationSpeed=.25,_.play(),this.world.createEntity().addComponent(TransformComponent,{position:new Vector2(a.position.x,a.position.y),rotation:d}).addComponent(SizeComponent,{width:l,height:h}).addComponent(MovableComponent).addComponent(SelectableComponent).addComponent(HealthComponent,{points:10,maxPoints:10}).addComponent(AliveComponent).addComponent(MoveVelocityComponent,{moveSpeed:50}).addComponent(PlayerMovementKeysComponent).addComponent(MovePositionDirectComponent).addComponent(PlayerMovementMouseComponent).addComponent(AnimatedSpriteComponent,{sprite:_,state:"idle_north"}).addComponent(GraphicsComponent,{graphics:new Graphics}).addComponent(MovePathComponent,{path:[]}).addComponent(CollidableComponent).addComponent(TeamComponent,a.team).addComponent(FollowComponent).addComponent(AttackComponent,{aggroRange:80,attackRange:16,attackDamage:1}).addComponent(TargetComponent).addComponent(ControlledComponent).addComponent(AssetComponent,{animations:v})}}function t(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);a&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),l.push.apply(l,h)}return l}function e(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?t(Object(l),!0).forEach(function(h){r(s,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(l,h))})}return s}function r(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function n(s){return s.slice(0,-1)}function o(s,a=0){return a?Array.from(Array(a-s).keys()).map(l=>l+s):Array.from(Array(s).keys())}function c(s){return[...new Set(s)]}function u(s,a){const l=c(s.map(_=>_.set)).filter(Boolean),h=(d=o(1,s.length+1),v=l,[d,v].reduce((_,m)=>_.filter(g=>!m.includes(g)))).sort(()=>.5-a());var d,v;s.filter(_=>!_.set).forEach((_,m)=>_.set=h[m])}function f(s,a,l=.5){n(s).forEach((h,d)=>{const v=s[d+1],_=h.set!==v.set,m=a()<=l;_&&m&&(function(g,y,T){g.forEach(E=>{E.set===y&&(E.set=T)})}(s,v.set,h.set),h.right=!1,v.left=!1)})}function i(s=8,a=s,l=!0,h=1){const d=function(y){return function(){let T=y+=1831565813;return T=Math.imul(T^T>>>15,1|T),T^=T+Math.imul(T^T>>>7,61|T),((T^T>>>14)>>>0)/4294967296}}(h),v=[],_=o(s);for(let y=0;y<a;y+=1){const T=_.map(E=>({x:E,y,top:l||y>0,left:l||E>0,bottom:l||y<a-1,right:l||E<s-1}));v.push(T)}n(v).forEach((y,T)=>{u(y,d),f(y,d),function(E,b,R){const I=Object.values(function(C,S){let O=c(C.map(w=>w.set)).reduce((w,U)=>e(e({},w),{},{[U]:[]}),{});return C.forEach(w=>O[w.set].push(w)),O}(E)),{ceil:P}=Math;I.forEach(C=>{(function(S,O,w){O=O==null?1:O;const U=S==null?0:S.length;if(!U||O<1)return[];O=O>U?U:O;let F=-1;const M=U-1,$=[...S];for(;++F<O;){const j=F+Math.floor(w()*(M-F+1)),D=$[j];$[j]=$[F],$[F]=D}return $.slice(0,O)})(C,P(R()*C.length),R).forEach(S=>{if(S){const O=b[S.x];S.bottom=!1,O.top=!1,O.set=S.set}})})}(y,v[T+1],d)});const m=(g=v)[g.length-1];var g;return u(m,d),f(m,d,1),v}const getGridSizeByScreen=s=>({width:Math.ceil(s.screen.width/Constants.CELL_SIZE),height:Math.ceil(s.screen.height/Constants.CELL_SIZE)}),createEmptyGrid=s=>Array.from({length:s.height},()=>Array.from({length:s.width},()=>0)),generateMaze=s=>{const a=i(Math.floor(s.width/2),Math.floor(s.height/2),!0,Math.random()*1e3);return convertEllerMazeToGrid(a)},convertEllerMazeToGrid=s=>{const a=[];for(const l of s){a[l[0].y*2]=[],a[l[0].y*2+1]=[],a[l[0].y*2+2]=[];for(const h of l)a[h.y*2][h.x*2]=1,a[h.y*2+1][h.x*2]=h.left?1:0,a[h.y*2][h.x*2+1]=h.top?1:0,a[h.y*2][h.x*2+2]=1,a[h.y*2+1][h.x*2+1]=0,a[h.y*2+1][h.x*2+2]=h.right?1:0,a[h.y*2+2][h.x*2+2]=1,a[h.y*2+2][h.x*2+1]=h.bottom?1:0,a[h.y*2+2][h.x*2]=1}return a};class Level{constructor(a,l){this.app=a,this.world=l}}const colors=["red","blue"],units=["swordsmen","crosscowsoldier","knight","juggernaut","catapult","cannon"],directions=["north","northeast","east","southeast","south","southwest","west","northwest"],states=["idle","move","attack","dying","dead"],getAnimationKey=(s,a,l,h)=>["catapult","cannon"].includes(a)?`${a}.${l}.${h}`:`${a}.${s}.${l}.${h}`,getAnimation=(s,a,l,h,d)=>{const v=getAnimationKey(a,l,h,d);return s.animations[v]!=null?s.animations[v]:s.textures[v+".png"]!=null?[s.textures[v+".png"]]:[]},loadByDirection=(s,a,l,h)=>directions.reduce((d,v)=>Oe(we({},d),{[v]:getAnimation(s,a,l,h,v)}),{}),loadByUnit=(s,a,l)=>states.reduce((h,d)=>Oe(we({},h),{[d]:loadByDirection(s,a,l,d)}),{}),loadByColor=(s,a)=>units.reduce((l,h)=>Oe(we({},l),{[h]:loadByUnit(s,a,h)}),{}),load=s=>colors.reduce((a,l)=>Oe(we({},a),{[l]:loadByColor(s,l)}),{}),rotationToDirectionMap=new Map([[-135,"northwest"],[-90,"north"],[-45,"northeast"],[0,"east"],[45,"southeast"],[90,"south"],[135,"southwest"],[180,"west"]]),rotationToDirection=s=>{var a;return(a=rotationToDirectionMap.get(s))!=null?a:"north"};class RandomUnitsLevel extends Level{constructor(l,h){super(l,h);H(this,"_collisionMap");H(this,"entityFactory");H(this,"unitAnimations");this._collisionMap=createEmptyGrid(getGridSizeByScreen(l)),this.unitAnimations=load(l.loader.resources.unit.spritesheet),this.entityFactory=new EntityFactory(h,this.unitAnimations)}get collisionMap(){return this._collisionMap}load(){Array.from(Array(100)).forEach(()=>{const l=toWorldPositionCellCenter(new Vector2(Math.round(Math.random()*this.app.screen.width),Math.round(Math.random()*this.app.screen.height)+Constants.CELL_SIZE/2));this.entityFactory.createUnit({position:l,color:"red",team:{number:Math.round(Math.random()+1)}})})}}class PathFindingLevel extends Level{constructor(l,h){super(l,h);H(this,"map");H(this,"entityFactory");H(this,"unitAnimations");this.map=generateMaze(getGridSizeByScreen(l)),this.unitAnimations=load(l.loader.resources.unit.spritesheet),this.entityFactory=new EntityFactory(h,this.unitAnimations)}get collisionMap(){return this.map}load(){this.entityFactory.createUnit({position:cellPositionToVector(1,1),color:"red",team:{number:1}}),this.entityFactory.createUnit({position:cellPositionToVector(3,1),color:"red",team:{number:2}})}}class BehaviorTreeComponent extends Component{}H(BehaviorTreeComponent,"schema",{tree:{type:Types.Ref,default:!1}});class Tree{constructor(a){this.root=a}update(){this.root.evaluate()}}var State=(s=>(s.RUNNING="running",s.SUCCESS="success",s.FAILURE="failure",s))(State||{});class Node{constructor(a=[]){H(this,"_state","failure");H(this,"parent",null);H(this,"_children",[]);H(this,"data",new Map);this.children=a}get state(){return this._state}set state(a){this._state=a}get children(){return this._children}set children(a){a.forEach(l=>this.attach(l))}attach(a){this._children.push(a),a.parent=this}detach(a){this._children=this._children.filter(l=>l!==a),a.parent=null}evaluate(){return this.state}getData(a){return this.data.has(a)?this.data.get(a):this.getDataOfParent(a)}getDataOfParent(a){var l,h;return(h=(l=this.parent)==null?void 0:l.getData(a))!=null?h:null}setData(a,l){this.data.set(a,l)}hasChildren(){return this.children.length>0}running(){return this.state="running"}success(){return this.state="success"}failure(){return this.state="failure"}}const invertStateMap=new Map([[State.FAILURE,State.SUCCESS],[State.SUCCESS,State.FAILURE],[State.RUNNING,State.RUNNING]]);class Inventer extends Node{evaluate(){if(!this.hasChildren())return this.failure();const a=this.children[0].evaluate();return invertStateMap.has(a)?this.state=invertStateMap.get(a):this.failure()}}class Selector extends Node{evaluate(){if(!this.hasChildren())return this.success();for(const a of this.children){const l=a.evaluate();if(l===State.SUCCESS)return this.success();l===State.RUNNING&&(this.state=State.RUNNING)}return this.state===State.FAILURE?this.failure():this.children.length===0?this.success():this.state}}class Sequence extends Node{evaluate(){let a=!1;for(const l of this.children)switch(l.evaluate()){case State.RUNNING:a=!0;continue;case State.SUCCESS:continue;case State.FAILURE:default:return this.failure()}return a?this.running():this.success()}}class GameTime{}H(GameTime,"delta",0);class Timer extends Node{constructor(l){var h;super(l.children);H(this,"delay");H(this,"elapsedCallback");H(this,"_countdownTimer");this.delay=l.delay,this._countdownTimer=this.delay,this.elapsedCallback=(h=l.elapsedCallback)!=null?h:null}get countdownTimer(){return this._countdownTimer}isElapsed(){return this.countdownTimer<=0}reset(){this._countdownTimer=this.delay}evaluate(){return this.isElapsed()&&this.reset(),this.hasChildren()?(this._countdownTimer-=GameTime.delta,this.isElapsed()?(this.state=this.children[0].evaluate(),this.elapsedCallback&&this.elapsedCallback(),this.state):this.running()):this.failure()}}const setEntityAnimation=(s,a)=>{var h;const l=s.getMutableComponent(AnimatedSpriteComponent);if(l!=null){const d=s.getComponent(AssetComponent);if(d==null)return;const v=s.getComponent(TransformComponent),_=rotationToDirection((h=v==null?void 0:v.rotation)!=null?h:0);if(l.state!==`${a}_${_}`){const m=l.state;l.sprite.textures=d.animations[a][_],l.state=`${a}_${_}`,console.log(s.id+": update state from "+m+" to "+l.state),l.sprite.play()}}};class EntityNode extends Node{evaluate(){const a=this.getData("entity");return a==null?this.failure():this.evaluateByEntity(a)}}class Attack extends EntityNode{evaluateByEntity(a){const l=a.getComponent(AttackComponent),h=this.getData("target");return setEntityAnimation(a,"attack"),l.attack(h),this.success()}}class Follow extends EntityNode{evaluateByEntity(a){const l=a.getComponent(TargetComponent),h=a.getMutableComponent(FollowComponent);return l==null||h==null?this.failure():(h.follow=l.target,this.success())}}class HasTarget extends EntityNode{evaluateByEntity(a){return a.hasComponent(TargetComponent)?a.getComponent(TargetComponent).target==null?this.failure():this.success():this.failure()}}class IsControlledBy extends EntityNode{constructor(a){super([]),this.by=a}evaluateByEntity(a){return a.hasComponent(ControlledComponent)?a.getComponent(ControlledComponent).by===this.by?this.success():this.failure():this.failure()}}class IsControlledByPlayer extends IsControlledBy{constructor(){super("player")}}const getEntitiesInRange=(s,a,l)=>a.filter(not(isSameEntity(s))).filter(not(isOnTeam(s.getComponent(TeamComponent).number))).filter(isAlive()).filter(isInRange(s,l)).sort(byClosestDistance(s));class IsEnemyInRange extends EntityNode{constructor(a,l,h){super(),this.entities=a,this.componentConstructor=l,this.componentProperty=h}evaluateByEntity(a){const l=a.getComponent(this.componentConstructor)[this.componentProperty],h=getEntitiesInRange(a,this.entities,l);return h.length==0?this.failure():(this.parent.setData("target",h[0]),this.success())}}class IsEnemyInAggroRange extends IsEnemyInRange{constructor(a){super(a,AttackComponent,"aggroRange")}}class IsEnemyInAttackRange extends IsEnemyInRange{constructor(a){super(a,AttackComponent,"attackRange")}}class IsMoving extends EntityNode{evaluateByEntity(a){return a.hasComponent(MovePositionDirectComponent)?a.getComponent(MovePositionDirectComponent).movePosition==null?this.failure():this.success():this.failure()}}class SetTarget extends EntityNode{evaluateByEntity(a){const l=this.getData("target");if(l==null||!a.hasComponent(TargetComponent))return this.failure();const h=a.getMutableComponent(TargetComponent);return h.target=l,this.success()}}class UnsetTarget extends EntityNode{evaluateByEntity(a){if(!a.hasComponent(TargetComponent))return this.failure();const l=a.getMutableComponent(TargetComponent);return l.target==null?this.failure():(l.target=null,this.success())}}class BehaviorTreeLevel extends Level{constructor(l,h){super(l,h);H(this,"map");H(this,"entityFactory");H(this,"unitAnimations");this.map=createEmptyGrid(getGridSizeByScreen(l)),this.unitAnimations=load(l.loader.resources.unit.spritesheet),this.entityFactory=new EntityFactory(h,this.unitAnimations)}get collisionMap(){return this.map}load(){const l=this.entityFactory.createUnit({position:cellPositionToVector(1,1),color:"blue",team:{number:1}}),h=this.entityFactory.createUnit({position:cellPositionToVector(1,3),color:"red",team:{number:2}}),d=[l,h],v=new Tree(new Selector([new Sequence([new Inventer([new HasTarget]),new IsEnemyInAggroRange(d),new SetTarget]),new Sequence([new IsMoving,new Inventer([new IsEnemyInAggroRange(d)]),new UnsetTarget]),new Sequence([new HasTarget,new Selector([new Sequence([new IsEnemyInAttackRange(d),new Timer({delay:1e3,children:[new Attack]})]),new Sequence([new Inventer([new IsControlledByPlayer]),new Follow])])])]));v.root.setData("entity",l),l.addComponent(BehaviorTreeComponent,{tree:v})}}class MapSystem extends PixiJsSystem{constructor(l,h){super(l,h);H(this,"graphics");H(this,"map",null);this.graphics=this.app.stage.addChildAt(new Graphics,0),h.eventBus.on("level:loaded",d=>{this.map=d.detail.level.collisionMap,this.draw()})}execute(l,h){}draw(){this.graphics.clear(),this.map!=null&&(this.graphics.beginFill(0),this.map.forEach((l,h)=>{l.forEach((d,v)=>{if(d==1){const _=cellPositionToVector(v,h);this.graphics.drawRect(_.x-8,_.y-8,16,16)}})}),this.graphics.endFill())}}class MovePathSystem extends System{execute(a,l){var h;for(const d of this.queries.entities.results){const v=d.getMutableComponent(MovePathComponent);if(v.path.length==0){const y=d.getComponent(MoveVelocityComponent);(y==null?void 0:y.velocity)!=null&&Vector2.ZERO.equals(y.velocity)&&(d.hasComponent(ControlledComponent)&&(d.getMutableComponent(ControlledComponent).by=null),(h=d.getComponent(AnimatedSpriteComponent))!=null&&h.state.startsWith("attack")||setEntityAnimation(d,"idle"));continue}const _=d.getMutableComponent(MovePositionDirectComponent);if(_.movePosition!=null)continue;const m=v.path[0];if(!this.canEntityMoveToCell(d,m))continue;v.path.shift(),_.movePosition=cellPositionToVector(m.x,m.y);const g=d.getMutableComponent(TransformComponent);g.position.equals(_.movePosition)||(g.rotation=Vector2.angle(g.position,_.movePosition)),setEntityAnimation(d,"move")}}canEntityMoveToCell(a,l){return this.queries.colliders.results.filter(not(isSameEntity(a))).find(v=>{const _=getCell(v);return l.x===_.x&&l.y===_.y})==null}}H(MovePathSystem,"queries",{entities:{components:[MovePathComponent]},colliders:{components:[CollidableComponent]}});const Ue=class{constructor(a){H(this,"eventTarget");a=a||""+ ++Ue.counter,this.eventTarget=document.appendChild(document.createComment("EventBus: "+a))}on(a,l){this.eventTarget.addEventListener(a,l)}once(a,l){this.eventTarget.addEventListener(a,l,{once:!0})}off(a,l){this.eventTarget.removeEventListener(a,l)}emit(a,l){return this.eventTarget.dispatchEvent(new CustomEvent(a,{detail:l}))}};let EventBus=Ue;H(EventBus,"counter",0);class GameTimeSystem extends System{execute(a,l){GameTime.delta=a}}class FollowSystem extends System{constructor(l,h){super(l,h);H(this,"map",null);h.eventBus.on("level:loaded",d=>{this.map=d.detail.level.collisionMap})}execute(l,h){var d,v;if(((d=this.queries.entities.changed)!=null?d:[]).length>0)for(const _ of this.queries.entities.changed)this.updateFollowingEntity(_);for(const _ of this.queries.entities.results)_.getComponent(FollowComponent).follow!=null&&((v=_.getComponent(MovePathComponent))==null?void 0:v.path)!=null&&this.updateFollowingEntity(_)}updateFollowingEntity(l){const h=l.getComponent(FollowComponent);if(h.follow==null)return;const d=h.follow.getComponent(TransformComponent),v=astar(this.map,l.getComponent(TransformComponent).gridPosition,d.gridPosition),_=l.getMutableComponent(MovePathComponent);_.path=convertPathfindingPathToPositions(v.slice(1).slice(0,-1))}}H(FollowSystem,"queries",{entities:{components:[FollowComponent],listen:{changed:!0}}});class BehaviorTreeSystem extends System{constructor(){super(...arguments);H(this,"timePassed",0);H(this,"triggerTime",1e3)}execute(l,h){this.timePassed+=l;for(const d of this.queries.entities.results)d.getComponent(BehaviorTreeComponent).tree.update()}}H(BehaviorTreeSystem,"queries",{entities:{components:[BehaviorTreeComponent]}});class TargetSystem extends System{execute(a,l){this.checkDead()}checkDead(){for(const a of this.queries.entities.results){const l=a.getComponent(TargetComponent);if(l.target===null)return;const h=l.target.getComponent(AliveComponent);h!==null&&!h.alive&&(a.getMutableComponent(TargetComponent).target=null)}}}H(TargetSystem,"queries",{entities:{components:[TargetComponent]}});class Engine{constructor(a){H(this,"world");H(this,"eventBus");this.app=a,this.world=new World;const l=this.eventBus=new EventBus;let h=0;const d=getOptions();h=performance.now(),this.app.ticker.add(()=>{m()}),this.app.loader.add("swordsmen_blue","/assets/swordsmen.blue.move.west_06.png").add("swordsmen_red","/assets/swordsmen.red.move.west_06.png").add("dead","/assets/swordsmen.blue.dead.south.png").add("unit","/assets/unit.json").load(()=>{_()}),this.world.registerComponent(TransformComponent).registerComponent(SizeComponent).registerComponent(SelectableComponent).registerComponent(MovableComponent).registerComponent(HealthComponent).registerComponent(AliveComponent).registerComponent(MoveTransformVelocityComponent).registerComponent(MovePositionDirectComponent).registerComponent(PlayerMovementMouseComponent).registerComponent(PlayerMovementKeysComponent).registerComponent(MoveVelocityComponent).registerComponent(SpriteComponent).registerComponent(AnimatedSpriteComponent).registerComponent(GraphicsComponent).registerComponent(MovePathComponent).registerComponent(CollidableComponent).registerComponent(TeamComponent).registerComponent(AttackComponent).registerComponent(FollowComponent).registerComponent(BehaviorTreeComponent).registerComponent(TargetComponent).registerComponent(ControlledComponent).registerComponent(AssetComponent).registerSystem(PlayerSelectionSystem,{app:a,eventBus:l}).registerSystem(HealthSystem,{eventBus:l}).registerSystem(AliveSystem,{app:a,eventBus:l}).registerSystem(InputSystem,{canvas:a.view}).registerSystem(MovePositionDirectSystem).registerSystem(PlayerMovementMouseSystem,{app:a,eventBus:l}).registerSystem(MoveVelocitySystem,{eventBus:l}).registerSystem(SpriteSystem,{app:a,eventBus:l}).registerSystem(GraphicsSystem,{app:a,options:d,eventBus:l}).registerSystem(GridSystem,{app:a,options:d,eventBus:l}).registerSystem(MapSystem,{app:a,eventBus:l}).registerSystem(MovePathSystem,{eventBus:l}).registerSystem(GameTimeSystem).registerSystem(FollowSystem,{app:a,eventBus:l}).registerSystem(BehaviorTreeSystem).registerSystem(TargetSystem);let v;const _=()=>{if(d.level!=null&&d.level[0]!=null){const g=d.level[0].toLowerCase();if(g==="randomunits")v=new RandomUnitsLevel(a,this.world);else if(g==="pathfinding")v=new PathFindingLevel(a,this.world);else if(g==="behaviortree")v=new BehaviorTreeLevel(a,this.world);else{alert("level not found");return}}else v=new RandomUnitsLevel(a,this.world);v.load(),l.emit("level:loaded",{level:v})},m=()=>{const g=performance.now(),y=g-h;this.world.execute(y,g),h=g}}}var App_vue_vue_type_style_index_0_lang="";const _sfc_main=defineComponent({setup(s){const a=ref();return window.addEventListener("contextmenu",l=>{l.preventDefault()}),onMounted(()=>{new Engine(a.value.application)}),(l,h)=>{const d=_sfc_main$1;return openBlock(),createBlock(d,{ref_key:"pixi",ref:a,"resize-to":l.window,"background-color":34816},null,8,["resize-to"])}}}),app=createApp(_sfc_main);app.config.globalProperties.window=window;app.mount("#app");
