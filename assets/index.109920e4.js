var we=Object.defineProperty;var Ae=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var Re=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oe=(e,t)=>{for(var r in t||(t={}))Ne.call(t,r)&&Re(e,r,t[r]);if(Ae)for(var r of Ae(t))Me.call(t,r)&&Re(e,r,t[r]);return e};var Y=(e,t,r)=>(Re(e,typeof t!="symbol"?t+"":t,r),r);const p$2=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};p$2();function makeMap(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function normalizeStyle(e){if(isArray$1(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=isString(i)?parseStringStyle(i):normalizeStyle(i);if(n)for(const s in n)t[s]=n[s]}return t}else{if(isString(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(e){const t={};return e.split(listDelimiterRE).forEach(r=>{if(r){const i=r.split(propertyDelimiterRE);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$1(e))for(let r=0;r<e.length;r++){const i=normalizeClass(e[r]);i&&(t+=i+" ")}else if(isObject(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$2.call(e,t),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},def=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},toNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(t){if(this.active){const r=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this.active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let r=0;for(let i=0;i<t.length;i++){const n=t[i];wasTracked(n)&&!newTracked(n)?n.delete(e):t[r++]=n,n.w&=~trackOpBit,n.n&=~trackOpBit}t.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,r=null,i){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,i)}run(){if(!this.active)return this.fn();let t=activeEffect,r=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,r){if(shouldTrack&&activeEffect){let i=targetMap.get(e);i||targetMap.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=createDep()),trackEffects(n)}}function trackEffects(e,t){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,r,i,n,s){const o=targetMap.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(r==="length"&&isArray$1(e))o.forEach((u,h)=>{(h==="length"||h>=i)&&a.push(u)});else switch(r!==void 0&&a.push(o.get(r)),t){case"add":isArray$1(e)?isIntegerKey(r)&&a.push(o.get("length")):(a.push(o.get(ITERATE_KEY)),isMap(e)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(e)||(a.push(o.get(ITERATE_KEY)),isMap(e)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&a.push(o.get(ITERATE_KEY));break}if(a.length===1)a[0]&&triggerEffects(a[0]);else{const u=[];for(const h of a)h&&u.push(...h);triggerEffects(createDep(u))}}function triggerEffects(e,t){for(const r of isArray$1(e)?e:[...e])(r!==activeEffect||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=toRaw(this);for(let s=0,o=this.length;s<o;s++)track(i,"get",s+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(toRaw)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){pauseTracking();const i=toRaw(this)[t].apply(this,r);return resetTracking(),i}}),e}function createGetter(e=!1,t=!1){return function(i,n,s){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&s===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(i))return i;const o=isArray$1(i);if(!e&&o&&hasOwn(arrayInstrumentations,n))return Reflect.get(arrayInstrumentations,n,s);const a=Reflect.get(i,n,s);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(e||track(i,"get",n),t)?a:isRef(a)?!o||!isIntegerKey(n)?a.value:a:isObject(a)?e?readonly(a):reactive(a):a}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(r,i,n,s){let o=r[i];if(isReadonly(o)&&isRef(o)&&!isRef(n))return!1;if(!e&&!isReadonly(n)&&(isShallow(n)||(n=toRaw(n),o=toRaw(o)),!isArray$1(r)&&isRef(o)&&!isRef(n)))return o.value=n,!0;const a=isArray$1(r)&&isIntegerKey(i)?Number(i)<r.length:hasOwn(r,i),u=Reflect.set(r,i,n,s);return r===toRaw(s)&&(a?hasChanged(n,o)&&trigger(r,"set",i,n):trigger(r,"add",i,n)),u}}function deleteProperty(e,t){const r=hasOwn(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&trigger(e,"delete",t,void 0),i}function has(e,t){const r=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),r}function ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$1(e,t,r=!1,i=!1){e=e.__v_raw;const n=toRaw(e),s=toRaw(t);t!==s&&!r&&track(n,"get",t),!r&&track(n,"get",s);const{has:o}=getProto(n),a=i?toShallow:r?toReadonly:toReactive;if(o.call(n,t))return a(e.get(t));if(o.call(n,s))return a(e.get(s));e!==n&&e.get(t)}function has$1(e,t=!1){const r=this.__v_raw,i=toRaw(r),n=toRaw(e);return e!==n&&!t&&track(i,"has",e),!t&&track(i,"has",n),e===n?r.has(e):r.has(e)||r.has(n)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set$1(e,t){t=toRaw(t);const r=toRaw(this),{has:i,get:n}=getProto(r);let s=i.call(r,e);s||(e=toRaw(e),s=i.call(r,e));const o=n.call(r,e);return r.set(e,t),s?hasChanged(t,o)&&trigger(r,"set",e,t):trigger(r,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:r,get:i}=getProto(t);let n=r.call(t,e);n||(e=toRaw(e),n=r.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return n&&trigger(t,"delete",e,void 0),s}function clear(){const e=toRaw(this),t=e.size!==0,r=e.clear();return t&&trigger(e,"clear",void 0,void 0),r}function createForEach(e,t){return function(i,n){const s=this,o=s.__v_raw,a=toRaw(o),u=t?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",ITERATE_KEY),o.forEach((h,l)=>i.call(n,u(h),u(l),s))}}function createIterableMethod(e,t,r){return function(...i){const n=this.__v_raw,s=toRaw(n),o=isMap(s),a=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,h=n[e](...i),l=r?toShallow:t?toReadonly:toReactive;return!t&&track(s,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:f,done:c}=h.next();return c?{value:f,done:c}:{value:a?[l(f[0]),l(f[1])]:l(f),done:c}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(s){return get$1(this,s)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(s){return get$1(this,s,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(s){return get$1(this,s,!0)},get size(){return size(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(s){return get$1(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=createIterableMethod(s,!1,!1),r[s]=createIterableMethod(s,!0,!1),t[s]=createIterableMethod(s,!1,!0),i[s]=createIterableMethod(s,!0,!0)}),[e,r,t,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const r=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(hasOwn(r,n)&&n in i?r:i,n,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,r,i,n){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const o=getTargetType(e);if(o===0)return e;const a=new Proxy(e,o===2?i:r);return n.set(e,a),a}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e),e.dep&&triggerEffects(e.dep)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,r)=>unref(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return isRef(n)&&!isRef(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,r,i,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,r=!1){let i,n;const s=isFunction(e);return s?(i=e,n=NOOP):(i=e.get,n=e.set),new ComputedRefImpl(i,n,s||!n,r)}function callWithErrorHandling(e,t,r,i){let n;try{n=i?e(...i):e()}catch(s){handleError(s,t,r)}return n}function callWithAsyncErrorHandling(e,t,r,i){if(isFunction(e)){const s=callWithErrorHandling(e,t,r,i);return s&&isPromise(s)&&s.catch(o=>{handleError(o,t,r)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(callWithAsyncErrorHandling(e[s],t,r,i));return n}function handleError(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=r;for(;s;){const h=s.ec;if(h){for(let l=0;l<h.length;l++)if(h[l](e,o,a)===!1)return}s=s.parent}const u=t.appContext.config.errorHandler;if(u){callWithErrorHandling(u,null,10,[e,o,a]);return}}logError(e,r,n,i)}function logError(e,t,r,i=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,r=queue.length;for(;t<r;){const i=t+r>>>1;getId(queue[i])<e?t=i+1:r=i}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&e!==currentPreFlushParentJob&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queueCb(e,t,r,i){isArray$1(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?i+1:i))&&r.push(e),queueFlush()}function queuePreFlushCb(e){queueCb(e,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(e){queueCb(e,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(e,t=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=t,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(e,t)}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((r,i)=>getId(r)-getId(i)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id;function flushJobs(e){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(e),queue.sort((r,i)=>getId(r)-getId(i));const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(e)}}function emit$1(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||EMPTY_OBJ;let n=r;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:c}=i[l]||EMPTY_OBJ;c?n=r.map(d=>d.trim()):f&&(n=r.map(toNumber))}let a,u=i[a=toHandlerKey(t)]||i[a=toHandlerKey(camelize(t))];!u&&s&&(u=i[a=toHandlerKey(hyphenate(t))]),u&&callWithAsyncErrorHandling(u,e,6,n);const h=i[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,callWithAsyncErrorHandling(h,e,6,n)}}function normalizeEmitsOptions(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let o={},a=!1;if(!isFunction(e)){const u=h=>{const l=normalizeEmitsOptions(h,t,!0);l&&(a=!0,extend(o,l))};!r&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!a?(i.set(e,null),null):(isArray$1(s)?s.forEach(u=>o[u]=null):extend(o,s),i.set(e,o),o)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(t),o=e(...n);return setCurrentRenderingInstance(s),i._d&&setBlockTracking(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:s,propsOptions:[o],slots:a,attrs:u,emit:h,render:l,renderCache:f,data:c,setupState:d,ctx:v,inheritAttrs:m}=e;let _,y;const b=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const A=n||i;_=normalizeVNode(l.call(A,A,f,s,d,c,v)),y=u}else{const A=t;_=normalizeVNode(A.length>1?A(s,{attrs:u,slots:a,emit:h}):A(s,null)),y=t.props?u:getFunctionalFallthrough(u)}}catch(A){blockStack.length=0,handleError(A,e,1),_=createVNode(Comment)}let I=_;if(y&&m!==!1){const A=Object.keys(y),{shapeFlag:R}=I;A.length&&R&7&&(o&&A.some(isModelListener)&&(y=filterModelListeners(y,o)),I=cloneVNode(I,y))}return r.dirs&&(I.dirs=I.dirs?I.dirs.concat(r.dirs):r.dirs),r.transition&&(I.transition=r.transition),_=I,setCurrentRenderingInstance(b),_}const getFunctionalFallthrough=e=>{let t;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((t||(t={}))[r]=e[r]);return t},filterModelListeners=(e,t)=>{const r={};for(const i in e)(!isModelListener(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function shouldUpdateComponent(e,t,r){const{props:i,children:n,component:s}=e,{props:o,children:a,patchFlag:u}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return i?hasPropsChanged(i,o,h):!!o;if(u&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const c=l[f];if(o[c]!==i[c]&&!isEmitListener(h,c))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?hasPropsChanged(i,o,h):!0:!!o;return!1}function hasPropsChanged(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!isEmitListener(r,s))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function provide(e,t){if(currentInstance){let r=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===r&&(r=currentInstance.provides=Object.create(i)),r[e]=t}}function inject(e,t,r=!1){const i=currentInstance||currentRenderingInstance;if(i){const n=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&isFunction(t)?t.call(i.proxy):t}}const INITIAL_WATCHER_VALUE={};function watch(e,t,r){return doWatch(e,t,r)}function doWatch(e,t,{immediate:r,deep:i,flush:n,onTrack:s,onTrigger:o}=EMPTY_OBJ){const a=currentInstance;let u,h=!1,l=!1;if(isRef(e)?(u=()=>e.value,h=isShallow(e)):isReactive(e)?(u=()=>e,i=!0):isArray$1(e)?(l=!0,h=e.some(isReactive),u=()=>e.map(y=>{if(isRef(y))return y.value;if(isReactive(y))return traverse(y);if(isFunction(y))return callWithErrorHandling(y,a,2)})):isFunction(e)?t?u=()=>callWithErrorHandling(e,a,2):u=()=>{if(!(a&&a.isUnmounted))return f&&f(),callWithAsyncErrorHandling(e,a,3,[c])}:u=NOOP,t&&i){const y=u;u=()=>traverse(y())}let f,c=y=>{f=_.onStop=()=>{callWithErrorHandling(y,a,4)}};if(isInSSRComponentSetup)return c=NOOP,t?r&&callWithAsyncErrorHandling(t,a,3,[u(),l?[]:void 0,c]):u(),NOOP;let d=l?[]:INITIAL_WATCHER_VALUE;const v=()=>{if(!!_.active)if(t){const y=_.run();(i||h||(l?y.some((b,I)=>hasChanged(b,d[I])):hasChanged(y,d)))&&(f&&f(),callWithAsyncErrorHandling(t,a,3,[y,d===INITIAL_WATCHER_VALUE?void 0:d,c]),d=y)}else _.run()};v.allowRecurse=!!t;let m;n==="sync"?m=v:n==="post"?m=()=>queuePostRenderEffect(v,a&&a.suspense):m=()=>{!a||a.isMounted?queuePreFlushCb(v):v()};const _=new ReactiveEffect(u,m);return t?r?v():d=_.run():n==="post"?queuePostRenderEffect(_.run.bind(_),a&&a.suspense):_.run(),()=>{_.stop(),a&&a.scope&&remove(a.scope.effects,_)}}function instanceWatch(e,t,r){const i=this.proxy,n=isString(e)?e.includes(".")?createPathGetter(i,e):()=>i[e]:e.bind(i,i);let s;isFunction(t)?s=t:(s=t.handler,r=t);const o=currentInstance;setCurrentInstance(this);const a=doWatch(n,s.bind(i),r);return o?setCurrentInstance(o):unsetCurrentInstance(),a}function createPathGetter(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray$1(e))for(let r=0;r<e.length;r++)traverse(e[r],t);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t)});else if(isPlainObject(e))for(const r in e)traverse(e[r],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const r=getCurrentInstance(),i=useTransitionState();let n;return()=>{const s=t.default&&getTransitionRawChildren(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Comment){o=m;break}}const a=toRaw(e),{mode:u}=a;if(i.isLeaving)return emptyPlaceholder(o);const h=getKeepAliveChild(o);if(!h)return emptyPlaceholder(o);const l=resolveTransitionHooks(h,a,i,r);setTransitionHooks(h,l);const f=r.subTree,c=f&&getKeepAliveChild(f);let d=!1;const{getTransitionKey:v}=h.type;if(v){const m=v();n===void 0?n=m:m!==n&&(n=m,d=!0)}if(c&&c.type!==Comment&&(!isSameVNodeType(h,c)||d)){const m=resolveTransitionHooks(c,a,i,r);if(setTransitionHooks(c,m),u==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,r.update()},emptyPlaceholder(o);u==="in-out"&&h.type!==Comment&&(m.delayLeave=(_,y,b)=>{const I=getLeavingNodesForType(i,c);I[String(c.key)]=c,_._leaveCb=()=>{y(),_._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=b})}return o}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function resolveTransitionHooks(e,t,r,i){const{appear:n,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:h,onEnterCancelled:l,onBeforeLeave:f,onLeave:c,onAfterLeave:d,onLeaveCancelled:v,onBeforeAppear:m,onAppear:_,onAfterAppear:y,onAppearCancelled:b}=t,I=String(e.key),A=getLeavingNodesForType(r,e),R=(O,U)=>{O&&callWithAsyncErrorHandling(O,i,9,U)},E={mode:s,persisted:o,beforeEnter(O){let U=a;if(!r.isMounted)if(n)U=m||a;else return;O._leaveCb&&O._leaveCb(!0);const P=A[I];P&&isSameVNodeType(e,P)&&P.el._leaveCb&&P.el._leaveCb(),R(U,[O])},enter(O){let U=u,P=h,M=l;if(!r.isMounted)if(n)U=_||u,P=y||h,M=b||l;else return;let k=!1;const H=O._enterCb=J=>{k||(k=!0,J?R(M,[O]):R(P,[O]),E.delayedLeave&&E.delayedLeave(),O._enterCb=void 0)};U?(U(O,H),U.length<=1&&H()):H()},leave(O,U){const P=String(e.key);if(O._enterCb&&O._enterCb(!0),r.isUnmounting)return U();R(f,[O]);let M=!1;const k=O._leaveCb=H=>{M||(M=!0,U(),H?R(v,[O]):R(d,[O]),O._leaveCb=void 0,A[P]===e&&delete A[P])};A[P]=e,c?(c(O,k),c.length<=1&&k()):k()},clone(O){return resolveTransitionHooks(O,t,r,i)}};return E}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,r){let i=[],n=0;for(let s=0;s<e.length;s++){let o=e[s];const a=r==null?o.key:String(r)+String(o.key!=null?o.key:s);o.type===Fragment?(o.patchFlag&128&&n++,i=i.concat(getTransitionRawChildren(o.children,t,a))):(t||o.type!==Comment)&&i.push(a!=null?cloneVNode(o,{key:a}):o)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function defineComponent(e){return isFunction(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,r=currentInstance){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(injectHook(t,i,r),r){let n=r.parent;for(;n&&n.parent;)isKeepAlive(n.parent.vnode)&&injectToKeepAliveRoot(i,t,r,n),n=n.parent}}function injectToKeepAliveRoot(e,t,r,i){const n=injectHook(t,e,i,!0);onUnmounted(()=>{remove(i[t],n)},r)}function injectHook(e,t,r=currentInstance,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const a=callWithAsyncErrorHandling(t,r,e,o);return unsetCurrentInstance(),resetTracking(),a});return i?n.unshift(s):n.push(s),s}}const createHook=e=>(t,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,t,r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),r=e.proxy,i=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:o,watch:a,provide:u,inject:h,created:l,beforeMount:f,mounted:c,beforeUpdate:d,updated:v,activated:m,deactivated:_,beforeDestroy:y,beforeUnmount:b,destroyed:I,unmounted:A,render:R,renderTracked:E,renderTriggered:O,errorCaptured:U,serverPrefetch:P,expose:M,inheritAttrs:k,components:H,directives:J,filters:le}=t;if(h&&resolveInjections(h,i,null,e.appContext.config.unwrapInjectedRef),o)for(const V in o){const z=o[V];isFunction(z)&&(i[V]=z.bind(r))}if(n){const V=n.call(r,r);isObject(V)&&(e.data=reactive(V))}if(shouldCacheAccess=!0,s)for(const V in s){const z=s[V],ie=isFunction(z)?z.bind(r,r):isFunction(z.get)?z.get.bind(r,r):NOOP,N=!isFunction(z)&&isFunction(z.set)?z.set.bind(r):NOOP,q=computed({get:ie,set:N});Object.defineProperty(i,V,{enumerable:!0,configurable:!0,get:()=>q.value,set:Z=>q.value=Z})}if(a)for(const V in a)createWatcher(a[V],i,r,V);if(u){const V=isFunction(u)?u.call(r):u;Reflect.ownKeys(V).forEach(z=>{provide(z,V[z])})}l&&callHook(l,e,"c");function G(V,z){isArray$1(z)?z.forEach(ie=>V(ie.bind(r))):z&&V(z.bind(r))}if(G(onBeforeMount,f),G(onMounted,c),G(onBeforeUpdate,d),G(onUpdated,v),G(onActivated,m),G(onDeactivated,_),G(onErrorCaptured,U),G(onRenderTracked,E),G(onRenderTriggered,O),G(onBeforeUnmount,b),G(onUnmounted,A),G(onServerPrefetch,P),isArray$1(M))if(M.length){const V=e.exposed||(e.exposed={});M.forEach(z=>{Object.defineProperty(V,z,{get:()=>r[z],set:ie=>r[z]=ie})})}else e.exposed||(e.exposed={});R&&e.render===NOOP&&(e.render=R),k!=null&&(e.inheritAttrs=k),H&&(e.components=H),J&&(e.directives=J)}function resolveInjections(e,t,r=NOOP,i=!1){isArray$1(e)&&(e=normalizeInject(e));for(const n in e){const s=e[n];let o;isObject(s)?"default"in s?o=inject(s.from||n,s.default,!0):o=inject(s.from||n):o=inject(s),isRef(o)&&i?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[n]=o}}function callHook(e,t,r){callWithAsyncErrorHandling(isArray$1(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function createWatcher(e,t,r,i){const n=i.includes(".")?createPathGetter(r,i):()=>r[i];if(isString(e)){const s=t[e];isFunction(s)&&watch(n,s)}else if(isFunction(e))watch(n,e.bind(r));else if(isObject(e))if(isArray$1(e))e.forEach(s=>createWatcher(s,t,r,i));else{const s=isFunction(e.handler)?e.handler.bind(r):t[e.handler];isFunction(s)&&watch(n,s,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let u;return a?u=a:!n.length&&!r&&!i?u=t:(u={},n.length&&n.forEach(h=>mergeOptions(u,h,o,!0)),mergeOptions(u,t,o)),s.set(t,u),u}function mergeOptions(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&mergeOptions(e,s,r,!0),n&&n.forEach(o=>mergeOptions(e,o,r,!0));for(const o in t)if(!(i&&o==="expose")){const a=internalOptionMergeStrats[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(extend(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const r=extend(Object.create(null),e);for(const i in t)r[i]=mergeAsArray(e[i],t[i]);return r}function initProps(e,t,r,i=!1){const n={},s={};def(s,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,n,s);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);r?e.props=i?n:shallowReactive(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function updateProps(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:o}}=e,a=toRaw(n),[u]=e.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let c=l[f];if(isEmitListener(e.emitsOptions,c))continue;const d=t[c];if(u)if(hasOwn(s,c))d!==s[c]&&(s[c]=d,h=!0);else{const v=camelize(c);n[v]=resolvePropValue(u,a,v,d,e,!1)}else d!==s[c]&&(s[c]=d,h=!0)}}}else{setFullProps(e,t,n,s)&&(h=!0);let l;for(const f in a)(!t||!hasOwn(t,f)&&((l=hyphenate(f))===f||!hasOwn(t,l)))&&(u?r&&(r[f]!==void 0||r[l]!==void 0)&&(n[f]=resolvePropValue(u,a,f,void 0,e,!0)):delete n[f]);if(s!==a)for(const f in s)(!t||!hasOwn(t,f)&&!0)&&(delete s[f],h=!0)}h&&trigger(e,"set","$attrs")}function setFullProps(e,t,r,i){const[n,s]=e.propsOptions;let o=!1,a;if(t)for(let u in t){if(isReservedProp(u))continue;const h=t[u];let l;n&&hasOwn(n,l=camelize(u))?!s||!s.includes(l)?r[l]=h:(a||(a={}))[l]=h:isEmitListener(e.emitsOptions,u)||(!(u in i)||h!==i[u])&&(i[u]=h,o=!0)}if(s){const u=toRaw(r),h=a||EMPTY_OBJ;for(let l=0;l<s.length;l++){const f=s[l];r[f]=resolvePropValue(n,u,f,h[f],e,!hasOwn(h,f))}}return o}function resolvePropValue(e,t,r,i,n,s){const o=e[r];if(o!=null){const a=hasOwn(o,"default");if(a&&i===void 0){const u=o.default;if(o.type!==Function&&isFunction(u)){const{propsDefaults:h}=n;r in h?i=h[r]:(setCurrentInstance(n),i=h[r]=u.call(null,t),unsetCurrentInstance())}else i=u}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===hyphenate(r))&&(i=!0))}return i}function normalizePropsOptions(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const s=e.props,o={},a=[];let u=!1;if(!isFunction(e)){const l=f=>{u=!0;const[c,d]=normalizePropsOptions(f,t,!0);extend(o,c),d&&a.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!s&&!u)return i.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(s))for(let l=0;l<s.length;l++){const f=camelize(s[l]);validatePropName(f)&&(o[f]=EMPTY_OBJ)}else if(s)for(const l in s){const f=camelize(l);if(validatePropName(f)){const c=s[l],d=o[f]=isArray$1(c)||isFunction(c)?{type:c}:c;if(d){const v=getTypeIndex(Boolean,d.type),m=getTypeIndex(String,d.type);d[0]=v>-1,d[1]=m<0||v<m,(v>-1||hasOwn(d,"default"))&&a.push(f)}}}const h=[o,a];return i.set(e,h),h}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$1(t)?t.findIndex(r=>isSameType(r,e)):isFunction(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,r)=>{const i=withCtx((...n)=>normalizeSlotValue(t(...n)),r);return i._c=!1,i},normalizeObjectSlots=(e,t,r)=>{const i=e._ctx;for(const n in e){if(isInternalKey(n))continue;const s=e[n];if(isFunction(s))t[n]=normalizeSlot(n,s,i);else if(s!=null){const o=normalizeSlotValue(s);t[n]=()=>o}}},normalizeVNodeSlots=(e,t)=>{const r=normalizeSlotValue(t);e.slots.default=()=>r},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=toRaw(t),def(t,"_",r)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,o=EMPTY_OBJ;if(i.shapeFlag&32){const a=t._;a?r&&a===1?s=!1:(extend(n,t),!r&&a===1&&delete n._):(s=!t.$stable,normalizeObjectSlots(t,n)),o=t}else t&&(normalizeVNodeSlots(e,t),o={default:1});if(s)for(const a in n)!isInternalKey(a)&&!(a in o)&&delete n[a]};function invokeDirectiveHook(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let u=a.dir[i];u&&(pauseTracking(),callWithAsyncErrorHandling(u,r,8,[e.el,a,e,t]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(i,n=null){isFunction(i)||(i=Object.assign({},i)),n!=null&&!isObject(n)&&(n=null);const s=createAppContext(),o=new Set;let a=!1;const u=s.app={_uid:uid$1++,_component:i,_props:n,_container:null,_context:s,_instance:null,version,get config(){return s.config},set config(h){},use(h,...l){return o.has(h)||(h&&isFunction(h.install)?(o.add(h),h.install(u,...l)):isFunction(h)&&(o.add(h),h(u,...l))),u},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),u},component(h,l){return l?(s.components[h]=l,u):s.components[h]},directive(h,l){return l?(s.directives[h]=l,u):s.directives[h]},mount(h,l,f){if(!a){const c=createVNode(i,n);return c.appContext=s,l&&t?t(c,h):e(c,h,f),a=!0,u._container=h,h.__vue_app__=u,getExposeProxy(c.component)||c.component.proxy}},unmount(){a&&(e(null,u._container),delete u._container.__vue_app__)},provide(h,l){return s.provides[h]=l,u}};return u}}function setRef(e,t,r,i,n=!1){if(isArray$1(e)){e.forEach((c,d)=>setRef(c,t&&(isArray$1(t)?t[d]:t),r,i,n));return}if(isAsyncWrapper(i)&&!n)return;const s=i.shapeFlag&4?getExposeProxy(i.component)||i.component.proxy:i.el,o=n?null:s,{i:a,r:u}=e,h=t&&t.r,l=a.refs===EMPTY_OBJ?a.refs={}:a.refs,f=a.setupState;if(h!=null&&h!==u&&(isString(h)?(l[h]=null,hasOwn(f,h)&&(f[h]=null)):isRef(h)&&(h.value=null)),isFunction(u))callWithErrorHandling(u,a,12,[o,l]);else{const c=isString(u),d=isRef(u);if(c||d){const v=()=>{if(e.f){const m=c?l[u]:u.value;n?isArray$1(m)&&remove(m,s):isArray$1(m)?m.includes(s)||m.push(s):c?(l[u]=[s],hasOwn(f,u)&&(f[u]=l[u])):(u.value=[s],e.k&&(l[e.k]=u.value))}else c?(l[u]=o,hasOwn(f,u)&&(f[u]=o)):isRef(u)&&(u.value=o,e.k&&(l[e.k]=o))};o?(v.id=-1,queuePostRenderEffect(v,r)):v()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const r=getGlobalThis();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:o,createText:a,createComment:u,setText:h,setElementText:l,parentNode:f,nextSibling:c,setScopeId:d=NOOP,cloneNode:v,insertStaticContent:m}=e,_=(g,T,S,C=null,w=null,L=null,$=!1,D=null,B=!!T.dynamicChildren)=>{if(g===T)return;g&&!isSameVNodeType(g,T)&&(C=ve(g),ee(g,w,L,!0),g=null),T.patchFlag===-2&&(B=!1,T.dynamicChildren=null);const{type:F,ref:W,shapeFlag:j}=T;switch(F){case Text$1:y(g,T,S,C);break;case Comment:b(g,T,S,C);break;case Static:g==null&&I(T,S,C,$);break;case Fragment:J(g,T,S,C,w,L,$,D,B);break;default:j&1?E(g,T,S,C,w,L,$,D,B):j&6?le(g,T,S,C,w,L,$,D,B):(j&64||j&128)&&F.process(g,T,S,C,w,L,$,D,B,ue)}W!=null&&w&&setRef(W,g&&g.ref,L,T||g,!T)},y=(g,T,S,C)=>{if(g==null)i(T.el=a(T.children),S,C);else{const w=T.el=g.el;T.children!==g.children&&h(w,T.children)}},b=(g,T,S,C)=>{g==null?i(T.el=u(T.children||""),S,C):T.el=g.el},I=(g,T,S,C)=>{[g.el,g.anchor]=m(g.children,T,S,C,g.el,g.anchor)},A=({el:g,anchor:T},S,C)=>{let w;for(;g&&g!==T;)w=c(g),i(g,S,C),g=w;i(T,S,C)},R=({el:g,anchor:T})=>{let S;for(;g&&g!==T;)S=c(g),n(g),g=S;n(T)},E=(g,T,S,C,w,L,$,D,B)=>{$=$||T.type==="svg",g==null?O(T,S,C,w,L,$,D,B):M(g,T,w,L,$,D,B)},O=(g,T,S,C,w,L,$,D)=>{let B,F;const{type:W,props:j,shapeFlag:K,transition:Q,patchFlag:re,dirs:pe}=g;if(g.el&&v!==void 0&&re===-1)B=g.el=v(g.el);else{if(B=g.el=o(g.type,L,j&&j.is,j),K&8?l(B,g.children):K&16&&P(g.children,B,null,C,w,L&&W!=="foreignObject",$,D),pe&&invokeDirectiveHook(g,null,C,"created"),j){for(const fe in j)fe!=="value"&&!isReservedProp(fe)&&s(B,fe,null,j[fe],L,g.children,C,w,oe);"value"in j&&s(B,"value",null,j.value),(F=j.onVnodeBeforeMount)&&invokeVNodeHook(F,C,g)}U(B,g,g.scopeId,$,C)}pe&&invokeDirectiveHook(g,null,C,"beforeMount");const he=(!w||w&&!w.pendingBranch)&&Q&&!Q.persisted;he&&Q.beforeEnter(B),i(B,T,S),((F=j&&j.onVnodeMounted)||he||pe)&&queuePostRenderEffect(()=>{F&&invokeVNodeHook(F,C,g),he&&Q.enter(B),pe&&invokeDirectiveHook(g,null,C,"mounted")},w)},U=(g,T,S,C,w)=>{if(S&&d(g,S),C)for(let L=0;L<C.length;L++)d(g,C[L]);if(w){let L=w.subTree;if(T===L){const $=w.vnode;U(g,$,$.scopeId,$.slotScopeIds,w.parent)}}},P=(g,T,S,C,w,L,$,D,B=0)=>{for(let F=B;F<g.length;F++){const W=g[F]=D?cloneIfMounted(g[F]):normalizeVNode(g[F]);_(null,W,T,S,C,w,L,$,D)}},M=(g,T,S,C,w,L,$)=>{const D=T.el=g.el;let{patchFlag:B,dynamicChildren:F,dirs:W}=T;B|=g.patchFlag&16;const j=g.props||EMPTY_OBJ,K=T.props||EMPTY_OBJ;let Q;S&&toggleRecurse(S,!1),(Q=K.onVnodeBeforeUpdate)&&invokeVNodeHook(Q,S,T,g),W&&invokeDirectiveHook(T,g,S,"beforeUpdate"),S&&toggleRecurse(S,!0);const re=w&&T.type!=="foreignObject";if(F?k(g.dynamicChildren,F,D,S,C,re,L):$||ie(g,T,D,null,S,C,re,L,!1),B>0){if(B&16)H(D,T,j,K,S,C,w);else if(B&2&&j.class!==K.class&&s(D,"class",null,K.class,w),B&4&&s(D,"style",j.style,K.style,w),B&8){const pe=T.dynamicProps;for(let he=0;he<pe.length;he++){const fe=pe[he],ge=j[fe],Te=K[fe];(Te!==ge||fe==="value")&&s(D,fe,ge,Te,w,g.children,S,C,oe)}}B&1&&g.children!==T.children&&l(D,T.children)}else!$&&F==null&&H(D,T,j,K,S,C,w);((Q=K.onVnodeUpdated)||W)&&queuePostRenderEffect(()=>{Q&&invokeVNodeHook(Q,S,T,g),W&&invokeDirectiveHook(T,g,S,"updated")},C)},k=(g,T,S,C,w,L,$)=>{for(let D=0;D<T.length;D++){const B=g[D],F=T[D],W=B.el&&(B.type===Fragment||!isSameVNodeType(B,F)||B.shapeFlag&70)?f(B.el):S;_(B,F,W,null,C,w,L,$,!0)}},H=(g,T,S,C,w,L,$)=>{if(S!==C){for(const D in C){if(isReservedProp(D))continue;const B=C[D],F=S[D];B!==F&&D!=="value"&&s(g,D,F,B,$,T.children,w,L,oe)}if(S!==EMPTY_OBJ)for(const D in S)!isReservedProp(D)&&!(D in C)&&s(g,D,S[D],null,$,T.children,w,L,oe);"value"in C&&s(g,"value",S.value,C.value)}},J=(g,T,S,C,w,L,$,D,B)=>{const F=T.el=g?g.el:a(""),W=T.anchor=g?g.anchor:a("");let{patchFlag:j,dynamicChildren:K,slotScopeIds:Q}=T;Q&&(D=D?D.concat(Q):Q),g==null?(i(F,S,C),i(W,S,C),P(T.children,S,W,w,L,$,D,B)):j>0&&j&64&&K&&g.dynamicChildren?(k(g.dynamicChildren,K,S,w,L,$,D),(T.key!=null||w&&T===w.subTree)&&traverseStaticChildren(g,T,!0)):ie(g,T,S,W,w,L,$,D,B)},le=(g,T,S,C,w,L,$,D,B)=>{T.slotScopeIds=D,g==null?T.shapeFlag&512?w.ctx.activate(T,S,C,$,B):X(T,S,C,w,L,$,B):G(g,T,B)},X=(g,T,S,C,w,L,$)=>{const D=g.component=createComponentInstance(g,C,w);if(isKeepAlive(g)&&(D.ctx.renderer=ue),setupComponent(D),D.asyncDep){if(w&&w.registerDep(D,V),!g.el){const B=D.subTree=createVNode(Comment);b(null,B,T,S)}return}V(D,g,T,S,w,L,$)},G=(g,T,S)=>{const C=T.component=g.component;if(shouldUpdateComponent(g,T,S))if(C.asyncDep&&!C.asyncResolved){z(C,T,S);return}else C.next=T,invalidateJob(C.update),C.update();else T.component=g.component,T.el=g.el,C.vnode=T},V=(g,T,S,C,w,L,$)=>{const D=()=>{if(g.isMounted){let{next:W,bu:j,u:K,parent:Q,vnode:re}=g,pe=W,he;toggleRecurse(g,!1),W?(W.el=re.el,z(g,W,$)):W=re,j&&invokeArrayFns(j),(he=W.props&&W.props.onVnodeBeforeUpdate)&&invokeVNodeHook(he,Q,W,re),toggleRecurse(g,!0);const fe=renderComponentRoot(g),ge=g.subTree;g.subTree=fe,_(ge,fe,f(ge.el),ve(ge),g,w,L),W.el=fe.el,pe===null&&updateHOCHostEl(g,fe.el),K&&queuePostRenderEffect(K,w),(he=W.props&&W.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(he,Q,W,re),w)}else{let W;const{el:j,props:K}=T,{bm:Q,m:re,parent:pe}=g,he=isAsyncWrapper(T);if(toggleRecurse(g,!1),Q&&invokeArrayFns(Q),!he&&(W=K&&K.onVnodeBeforeMount)&&invokeVNodeHook(W,pe,T),toggleRecurse(g,!0),j&&ae){const fe=()=>{g.subTree=renderComponentRoot(g),ae(j,g.subTree,g,w,null)};he?T.type.__asyncLoader().then(()=>!g.isUnmounted&&fe()):fe()}else{const fe=g.subTree=renderComponentRoot(g);_(null,fe,S,C,g,w,L),T.el=fe.el}if(re&&queuePostRenderEffect(re,w),!he&&(W=K&&K.onVnodeMounted)){const fe=T;queuePostRenderEffect(()=>invokeVNodeHook(W,pe,fe),w)}T.shapeFlag&256&&g.a&&queuePostRenderEffect(g.a,w),g.isMounted=!0,T=S=C=null}},B=g.effect=new ReactiveEffect(D,()=>queueJob(g.update),g.scope),F=g.update=B.run.bind(B);F.id=g.uid,toggleRecurse(g,!0),F()},z=(g,T,S)=>{T.component=g;const C=g.vnode.props;g.vnode=T,g.next=null,updateProps(g,T.props,C,S),updateSlots(g,T.children,S),pauseTracking(),flushPreFlushCbs(void 0,g.update),resetTracking()},ie=(g,T,S,C,w,L,$,D,B=!1)=>{const F=g&&g.children,W=g?g.shapeFlag:0,j=T.children,{patchFlag:K,shapeFlag:Q}=T;if(K>0){if(K&128){q(F,j,S,C,w,L,$,D,B);return}else if(K&256){N(F,j,S,C,w,L,$,D,B);return}}Q&8?(W&16&&oe(F,w,L),j!==F&&l(S,j)):W&16?Q&16?q(F,j,S,C,w,L,$,D,B):oe(F,w,L,!0):(W&8&&l(S,""),Q&16&&P(j,S,C,w,L,$,D,B))},N=(g,T,S,C,w,L,$,D,B)=>{g=g||EMPTY_ARR,T=T||EMPTY_ARR;const F=g.length,W=T.length,j=Math.min(F,W);let K;for(K=0;K<j;K++){const Q=T[K]=B?cloneIfMounted(T[K]):normalizeVNode(T[K]);_(g[K],Q,S,null,w,L,$,D,B)}F>W?oe(g,w,L,!0,!1,j):P(T,S,C,w,L,$,D,B,j)},q=(g,T,S,C,w,L,$,D,B)=>{let F=0;const W=T.length;let j=g.length-1,K=W-1;for(;F<=j&&F<=K;){const Q=g[F],re=T[F]=B?cloneIfMounted(T[F]):normalizeVNode(T[F]);if(isSameVNodeType(Q,re))_(Q,re,S,null,w,L,$,D,B);else break;F++}for(;F<=j&&F<=K;){const Q=g[j],re=T[K]=B?cloneIfMounted(T[K]):normalizeVNode(T[K]);if(isSameVNodeType(Q,re))_(Q,re,S,null,w,L,$,D,B);else break;j--,K--}if(F>j){if(F<=K){const Q=K+1,re=Q<W?T[Q].el:C;for(;F<=K;)_(null,T[F]=B?cloneIfMounted(T[F]):normalizeVNode(T[F]),S,re,w,L,$,D,B),F++}}else if(F>K)for(;F<=j;)ee(g[F],w,L,!0),F++;else{const Q=F,re=F,pe=new Map;for(F=re;F<=K;F++){const _e=T[F]=B?cloneIfMounted(T[F]):normalizeVNode(T[F]);_e.key!=null&&pe.set(_e.key,F)}let he,fe=0;const ge=K-re+1;let Te=!1,Se=0;const Ee=new Array(ge);for(F=0;F<ge;F++)Ee[F]=0;for(F=Q;F<=j;F++){const _e=g[F];if(fe>=ge){ee(_e,w,L,!0);continue}let ye;if(_e.key!=null)ye=pe.get(_e.key);else for(he=re;he<=K;he++)if(Ee[he-re]===0&&isSameVNodeType(_e,T[he])){ye=he;break}ye===void 0?ee(_e,w,L,!0):(Ee[ye-re]=F+1,ye>=Se?Se=ye:Te=!0,_(_e,T[ye],S,null,w,L,$,D,B),fe++)}const Ce=Te?getSequence(Ee):EMPTY_ARR;for(he=Ce.length-1,F=ge-1;F>=0;F--){const _e=re+F,ye=T[_e],Pe=_e+1<W?T[_e+1].el:C;Ee[F]===0?_(null,ye,S,Pe,w,L,$,D,B):Te&&(he<0||F!==Ce[he]?Z(ye,S,Pe,2):he--)}}},Z=(g,T,S,C,w=null)=>{const{el:L,type:$,transition:D,children:B,shapeFlag:F}=g;if(F&6){Z(g.component.subTree,T,S,C);return}if(F&128){g.suspense.move(T,S,C);return}if(F&64){$.move(g,T,S,ue);return}if($===Fragment){i(L,T,S);for(let j=0;j<B.length;j++)Z(B[j],T,S,C);i(g.anchor,T,S);return}if($===Static){A(g,T,S);return}if(C!==2&&F&1&&D)if(C===0)D.beforeEnter(L),i(L,T,S),queuePostRenderEffect(()=>D.enter(L),w);else{const{leave:j,delayLeave:K,afterLeave:Q}=D,re=()=>i(L,T,S),pe=()=>{j(L,()=>{re(),Q&&Q()})};K?K(L,re,pe):pe()}else i(L,T,S)},ee=(g,T,S,C=!1,w=!1)=>{const{type:L,props:$,ref:D,children:B,dynamicChildren:F,shapeFlag:W,patchFlag:j,dirs:K}=g;if(D!=null&&setRef(D,null,S,g,!0),W&256){T.ctx.deactivate(g);return}const Q=W&1&&K,re=!isAsyncWrapper(g);let pe;if(re&&(pe=$&&$.onVnodeBeforeUnmount)&&invokeVNodeHook(pe,T,g),W&6)se(g.component,S,C);else{if(W&128){g.suspense.unmount(S,C);return}Q&&invokeDirectiveHook(g,null,T,"beforeUnmount"),W&64?g.type.remove(g,T,S,w,ue,C):F&&(L!==Fragment||j>0&&j&64)?oe(F,T,S,!1,!0):(L===Fragment&&j&384||!w&&W&16)&&oe(B,T,S),C&&ne(g)}(re&&(pe=$&&$.onVnodeUnmounted)||Q)&&queuePostRenderEffect(()=>{pe&&invokeVNodeHook(pe,T,g),Q&&invokeDirectiveHook(g,null,T,"unmounted")},S)},ne=g=>{const{type:T,el:S,anchor:C,transition:w}=g;if(T===Fragment){de(S,C);return}if(T===Static){R(g);return}const L=()=>{n(S),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(g.shapeFlag&1&&w&&!w.persisted){const{leave:$,delayLeave:D}=w,B=()=>$(S,L);D?D(g.el,L,B):B()}else L()},de=(g,T)=>{let S;for(;g!==T;)S=c(g),n(g),g=S;n(T)},se=(g,T,S)=>{const{bum:C,scope:w,update:L,subTree:$,um:D}=g;C&&invokeArrayFns(C),w.stop(),L&&(L.active=!1,ee($,g,T,S)),D&&queuePostRenderEffect(D,T),queuePostRenderEffect(()=>{g.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},oe=(g,T,S,C=!1,w=!1,L=0)=>{for(let $=L;$<g.length;$++)ee(g[$],T,S,C,w)},ve=g=>g.shapeFlag&6?ve(g.component.subTree):g.shapeFlag&128?g.suspense.next():c(g.anchor||g.el),ce=(g,T,S)=>{g==null?T._vnode&&ee(T._vnode,null,null,!0):_(T._vnode||null,g,T,null,null,null,S),flushPostFlushCbs(),T._vnode=g},ue={p:_,um:ee,m:Z,r:ne,mt:X,mc:P,pc:ie,pbc:k,n:ve,o:e};let te,ae;return t&&([te,ae]=t(ue)),{render:ce,hydrate:te,createApp:createAppAPI(ce,te)}}function toggleRecurse({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function traverseStaticChildren(e,t,r=!1){const i=e.children,n=t.children;if(isArray$1(i)&&isArray$1(n))for(let s=0;s<i.length;s++){const o=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=cloneIfMounted(n[s]),a.el=o.el),r||traverseStaticChildren(o,a))}}function getSequence(e){const t=e.slice(),r=[0];let i,n,s,o,a;const u=e.length;for(i=0;i<u;i++){const h=e[i];if(h!==0){if(n=r[r.length-1],e[n]<h){t[i]=n,r.push(i);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,e[r[a]]<h?s=a+1:o=a;h<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}const isTeleport=e=>e.__isTeleport,NULL_DYNAMIC_COMPONENT=Symbol(),Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,r,i,n,s){return setupBlock(createBaseVNode(e,t,r,i,n,s,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:r})=>e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!r}:e:null;function createBaseVNode(e,t=null,r=null,i=0,n=null,s=e===Fragment?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null};return a?(normalizeChildren(u,r),s&128&&e.normalize(u)):r&&(u.shapeFlag|=isString(r)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const a=cloneVNode(e,t,!0);return r&&normalizeChildren(a,r),a}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:a,style:u}=t;a&&!isString(a)&&(t.class=normalizeClass(a)),isObject(u)&&(isProxy(u)&&!isArray$1(u)&&(u=extend({},u)),t.style=normalizeStyle(u))}const o=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,r,i,n,o,s,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,t,r=!1){const{props:i,ref:n,patchFlag:s,children:o}=e,a=t?mergeProps(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&normalizeKey(a),ref:t&&t.ref?r&&n?isArray$1(n)?n.concat(normalizeRef(t)):[n,normalizeRef(t)]:normalizeRef(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor}}function createTextVNode(e=" ",t=0){return createVNode(Text$1,null,e,t)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text$1,null,String(e))}function cloneIfMounted(e){return e.el===null||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(isArray$1(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),normalizeChildren(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:n===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},r=32):(t=String(t),i&64?(r=16,t=[createTextVNode(t)]):r=8);e.children=t,e.shapeFlag|=r}function mergeProps(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=normalizeClass([t.class,i.class]));else if(n==="style")t.style=normalizeStyle([t.style,i.style]);else if(isOn(n)){const s=t[n],o=i[n];o&&s!==o&&!(isArray$1(s)&&s.includes(o))&&(t[n]=s?[].concat(s,o):o)}else n!==""&&(t[n]=i[n])}return t}function invokeVNodeHook(e,t,r,i=null){callWithAsyncErrorHandling(e,t,7,[r,i])}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>()=>queueJob(e.update),$nextTick:e=>nextTick.bind(e.proxy),$watch:e=>instanceWatch.bind(e)}),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:r,setupState:i,data:n,props:s,accessCache:o,type:a,appContext:u}=e;let h;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(i!==EMPTY_OBJ&&hasOwn(i,t))return o[t]=1,i[t];if(n!==EMPTY_OBJ&&hasOwn(n,t))return o[t]=2,n[t];if((h=e.propsOptions[0])&&hasOwn(h,t))return o[t]=3,s[t];if(r!==EMPTY_OBJ&&hasOwn(r,t))return o[t]=4,r[t];shouldCacheAccess&&(o[t]=0)}}const l=publicPropertiesMap[t];let f,c;if(l)return t==="$attrs"&&track(e,"get",t),l(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(r!==EMPTY_OBJ&&hasOwn(r,t))return o[t]=4,r[t];if(c=u.config.globalProperties,hasOwn(c,t))return c[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return n!==EMPTY_OBJ&&hasOwn(n,t)?(n[t]=r,!0):i!==EMPTY_OBJ&&hasOwn(i,t)?(i[t]=r,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s}},o){let a;return!!r[o]||e!==EMPTY_OBJ&&hasOwn(e,o)||t!==EMPTY_OBJ&&hasOwn(t,o)||(a=s[0])&&hasOwn(a,o)||hasOwn(i,o)||hasOwn(publicPropertiesMap,o)||hasOwn(n.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:hasOwn(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}},emptyAppContext=createAppContext();let uid$1$1=0;function createComponentInstance(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||emptyAppContext,s={uid:uid$1$1++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,n),emitsOptions:normalizeEmitsOptions(i,n),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=emit$1.bind(null,s),e.ce&&e.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:r,children:i}=e.vnode,n=isStatefulComponent(e);initProps(e,r,n,t),initSlots(e,i);const s=n?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const s=callWithErrorHandling(i,e,0,[e.props,n]);if(resetTracking(),unsetCurrentInstance(),isPromise(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),t)return s.then(o=>{handleSetupResult(e,o,t)}).catch(o=>{handleError(o,e,0)});e.asyncDep=s}else handleSetupResult(e,s,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,r){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,r)}let compile;function finishComponentSetup(e,t,r){const i=e.type;if(!e.render){if(!t&&compile&&!i.render){const n=i.template;if(n){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:u}=i,h=extend(extend({isCustomElement:s,delimiters:a},o),u);i.render=compile(n,h)}}e.render=i.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(t,r){return track(e,"get","$attrs"),t[r]}})}function createSetupContext(e){const t=i=>{e.exposed=i||{}};let r;return{get attrs(){return r||(r=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)}}))}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),version="3.2.33",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t?doc.createElementNS(svgNS,e):doc.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,i,n,s){const o=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{templateContainer.innerHTML=i?`<svg>${e}</svg>`:e;const a=templateContainer.content;if(i){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function patchClass(e,t,r){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,r){const i=e.style,n=isString(r);if(r&&!n){for(const s in r)setStyle(i,s,r[s]);if(t&&!isString(t))for(const s in t)r[s]==null&&setStyle(i,s,"")}else{const s=i.display;n?t!==r&&(i.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const importantRE=/\s*!important$/;function setStyle(e,t,r){if(isArray$1(r))r.forEach(i=>setStyle(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=autoPrefix(e,t);importantRE.test(r)?e.setProperty(hyphenate(i),r.replace(importantRE,""),"important"):e[i]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const r=prefixCache[t];if(r)return r;let i=camelize(t);if(i!=="filter"&&i in e)return prefixCache[t]=i;i=capitalize(i);for(let n=0;n<prefixes.length;n++){const s=prefixes[n]+i;if(s in e)return prefixCache[t]=s}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,r);else{const s=isSpecialBooleanAttr(t);r==null||s&&!includeBooleanAttr(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function patchDOMProp(e,t,r,i,n,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,n,s),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const u=r==null?"":r;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),r==null&&e.removeAttribute(t);return}let a=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=includeBooleanAttr(r):r==null&&u==="string"?(r="",a=!0):u==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(t)}const[_getNow,skipTimestampCheck]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=()=>performance.now());const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let cachedNow=0;const p$1=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$1.then(reset),cachedNow=_getNow());function addEventListener(e,t,r,i){e.addEventListener(t,r,i)}function removeEventListener(e,t,r,i){e.removeEventListener(t,r,i)}function patchEvent(e,t,r,i,n=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,u]=parseName(t);if(i){const h=s[t]=createInvoker(i,n);addEventListener(e,a,h,u)}else o&&(removeEventListener(e,a,o,u),s[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let r;for(;r=e.match(optionsModifierRE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[hyphenate(e.slice(2)),t]}function createInvoker(e,t){const r=i=>{const n=i.timeStamp||_getNow();(skipTimestampCheck||n>=r.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(i,r.value),t,5,[i])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,r,i,n=!1,s,o,a,u)=>{t==="class"?patchClass(e,i,n):t==="style"?patchStyle(e,r,i):isOn(t)?isModelListener(t)||patchEvent(e,t,r,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,i,n))?patchDOMProp(e,t,i,s,o,a,u):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),patchAttr(e,t,i,n))};function shouldSetAsProp(e,t,r,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString(r)?!1:t in e}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=normalizeContainer(i);if(!n)return;const s=t._component;!isFunction(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const o=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}function queryKey(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(!componentRegistered(i))throw new Error("Tried to create a query with an unregistered component");if(typeof i=="object"){var n=i.operator==="not"?"!":i.operator;t.push(n+i.Component._typeId)}else t.push(i._typeId)}return t.sort().join("-")}const hasWindow=typeof window!="undefined",now=hasWindow&&typeof window.performance!="undefined"?performance.now.bind(performance):Date.now.bind(Date);function componentRegistered(e){return typeof e=="object"&&e.Component._typeId!==void 0||e.isComponent&&e._typeId!==void 0}class SystemManager{constructor(t){this._systems=[],this._executeSystems=[],this.world=t,this.lastExecutedSystem=null}registerSystem(t,r){if(!t.isSystem)throw new Error(`System '${t.name}' does not extend 'System' class`);if(this.getSystem(t)!==void 0)return console.warn(`System '${t.getName()}' already registered.`),this;var i=new t(this.world,r);return i.init&&i.init(r),i.order=this._systems.length,this._systems.push(i),i.execute&&(this._executeSystems.push(i),this.sortSystems()),this}unregisterSystem(t){let r=this.getSystem(t);return r===void 0?(console.warn(`Can unregister system '${t.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(r),1),r.execute&&this._executeSystems.splice(this._executeSystems.indexOf(r),1),this)}sortSystems(){this._executeSystems.sort((t,r)=>t.priority-r.priority||t.order-r.order)}getSystem(t){return this._systems.find(r=>r instanceof t)}getSystems(){return this._systems}removeSystem(t){var r=this._systems.indexOf(t);!~r||this._systems.splice(r,1)}executeSystem(t,r,i){if(t.initialized&&t.canExecute()){let n=now();t.execute(r,i),t.executeTime=now()-n,this.lastExecutedSystem=t,t.clearEvents()}}stop(){this._executeSystems.forEach(t=>t.stop())}execute(t,r,i){this._executeSystems.forEach(n=>(i||n.enabled)&&this.executeSystem(n,t,r))}stats(){for(var t={numSystems:this._systems.length,systems:{}},r=0;r<this._systems.length;r++){var i=this._systems[r],n=t.systems[i.getName()]={queries:{},executeTime:i.executeTime};for(var s in i.ctx)n.queries[s]=i.ctx[s].stats()}return t}}class ObjectPool{constructor(t,r){this.freeList=[],this.count=0,this.T=t,this.isObjectPool=!0,typeof r!="undefined"&&this.expand(r)}acquire(){this.freeList.length<=0&&this.expand(Math.round(this.count*.2)+1);var t=this.freeList.pop();return t}release(t){t.reset(),this.freeList.push(t)}expand(t){for(var r=0;r<t;r++){var i=new this.T;i._pool=this,this.freeList.push(i)}this.count+=t}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class EventDispatcher{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(t,r){let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(r)===-1&&i[t].push(r)}hasEventListener(t,r){return this._listeners[t]!==void 0&&this._listeners[t].indexOf(r)!==-1}removeEventListener(t,r){var i=this._listeners[t];if(i!==void 0){var n=i.indexOf(r);n!==-1&&i.splice(n,1)}}dispatchEvent(t,r,i){this.stats.fired++;var n=this._listeners[t];if(n!==void 0)for(var s=n.slice(0),o=0;o<s.length;o++)s[o].call(this,r,i)}resetCounters(){this.stats.fired=this.stats.handled=0}}class Query{constructor(t,r){if(this.Components=[],this.NotComponents=[],t.forEach(s=>{typeof s=="object"?this.NotComponents.push(s.Component):this.Components.push(s)}),this.Components.length===0)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new EventDispatcher,this.reactive=!1,this.key=queryKey(t);for(var i=0;i<r._entities.length;i++){var n=r._entities[i];this.match(n)&&(n.queries.push(this),this.entities.push(n))}}addEntity(t){t.queries.push(this),this.entities.push(t),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED,t)}removeEntity(t){let r=this.entities.indexOf(t);~r&&(this.entities.splice(r,1),r=t.queries.indexOf(this),t.queries.splice(r,1),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_REMOVED,t))}match(t){return t.hasAllComponents(this.Components)&&!t.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(t=>t.name),not:this.NotComponents.map(t=>t.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}Query.prototype.ENTITY_ADDED="Query#ENTITY_ADDED";Query.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED";Query.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class QueryManager{constructor(t){this._world=t,this._queries={}}onEntityRemoved(t){for(var r in this._queries){var i=this._queries[r];t.queries.indexOf(i)!==-1&&i.removeEntity(t)}}onEntityComponentAdded(t,r){for(var i in this._queries){var n=this._queries[i];if(!!~n.NotComponents.indexOf(r)&&~n.entities.indexOf(t)){n.removeEntity(t);continue}!~n.Components.indexOf(r)||!n.match(t)||~n.entities.indexOf(t)||n.addEntity(t)}}onEntityComponentRemoved(t,r){for(var i in this._queries){var n=this._queries[i];if(!!~n.NotComponents.indexOf(r)&&!~n.entities.indexOf(t)&&n.match(t)){n.addEntity(t);continue}if(!!~n.Components.indexOf(r)&&!!~n.entities.indexOf(t)&&!n.match(t)){n.removeEntity(t);continue}}}getQuery(t){var r=queryKey(t),i=this._queries[r];return i||(this._queries[r]=i=new Query(t,this._world)),i}stats(){var t={};for(var r in this._queries)t[r]=this._queries[r].stats();return t}}class Component{constructor(t){if(t!==!1){const r=this.constructor.schema;for(const i in r)if(t&&t.hasOwnProperty(i))this[i]=t[i];else{const n=r[i];if(n.hasOwnProperty("default"))this[i]=n.type.clone(n.default);else{const s=n.type;this[i]=s.clone(s.default)}}}this._pool=null}copy(t){const r=this.constructor.schema;for(const i in r){const n=r[i];t.hasOwnProperty(i)&&(this[i]=n.type.copy(t[i],this[i]))}return this}clone(){return new this.constructor().copy(this)}reset(){const t=this.constructor.schema;for(const r in t){const i=t[r];if(i.hasOwnProperty("default"))this[r]=i.type.copy(i.default,this[r]);else{const n=i.type;this[r]=n.copy(n.default,this[r])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(t){const r=this.constructor.schema;Object.keys(t).forEach(i=>{r.hasOwnProperty(i)||console.warn(`Trying to set attribute '${i}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)})}}Component.schema={};Component.isComponent=!0;Component.getName=function(){return this.displayName||this.name};class SystemStateComponent extends Component{}SystemStateComponent.isSystemStateComponent=!0;class EntityPool extends ObjectPool{constructor(t,r,i){super(r,void 0),this.entityManager=t,typeof i!="undefined"&&this.expand(i)}expand(t){for(var r=0;r<t;r++){var i=new this.T(this.entityManager);i._pool=this,this.freeList.push(i)}this.count+=t}}class EntityManager{constructor(t){this.world=t,this.componentsManager=t.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new QueryManager(this),this.eventDispatcher=new EventDispatcher,this._entityPool=new EntityPool(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(t){return this._entitiesByNames[t]}createEntity(t){var r=this._entityPool.acquire();return r.alive=!0,r.name=t||"",t&&(this._entitiesByNames[t]?console.warn(`Entity name '${t}' already exist`):this._entitiesByNames[t]=r),this._entities.push(r),this.eventDispatcher.dispatchEvent(ENTITY_CREATED,r),r}entityAddComponent(t,r,i){if(typeof r._typeId=="undefined"&&!this.world.componentsManager._ComponentsMap[r._typeId])throw new Error(`Attempted to add unregistered component "${r.getName()}"`);if(!~t._ComponentTypes.indexOf(r)){t._ComponentTypes.push(r),r.__proto__===SystemStateComponent&&t.numStateComponents++;var n=this.world.componentsManager.getComponentsPool(r),s=n?n.acquire():new r(i);n&&i&&s.copy(i),t._components[r._typeId]=s,this._queryManager.onEntityComponentAdded(t,r),this.world.componentsManager.componentAddedToEntity(r),this.eventDispatcher.dispatchEvent(COMPONENT_ADDED,t,r)}}entityRemoveComponent(t,r,i){var n=t._ComponentTypes.indexOf(r);!~n||(this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE,t,r),i?this._entityRemoveComponentSync(t,r,n):(t._ComponentTypesToRemove.length===0&&this.entitiesWithComponentsToRemove.push(t),t._ComponentTypes.splice(n,1),t._ComponentTypesToRemove.push(r),t._componentsToRemove[r._typeId]=t._components[r._typeId],delete t._components[r._typeId]),this._queryManager.onEntityComponentRemoved(t,r),r.__proto__===SystemStateComponent&&(t.numStateComponents--,t.numStateComponents===0&&!t.alive&&t.remove()))}_entityRemoveComponentSync(t,r,i){t._ComponentTypes.splice(i,1);var n=t._components[r._typeId];delete t._components[r._typeId],n.dispose(),this.world.componentsManager.componentRemovedFromEntity(r)}entityRemoveAllComponents(t,r){let i=t._ComponentTypes;for(let n=i.length-1;n>=0;n--)i[n].__proto__!==SystemStateComponent&&this.entityRemoveComponent(t,i[n],r)}removeEntity(t,r){var i=this._entities.indexOf(t);if(!~i)throw new Error("Tried to remove entity not in list");t.alive=!1,this.entityRemoveAllComponents(t,r),t.numStateComponents===0&&(this.eventDispatcher.dispatchEvent(ENTITY_REMOVED,t),this._queryManager.onEntityRemoved(t),r===!0?this._releaseEntity(t,i):this.entitiesToRemove.push(t))}_releaseEntity(t,r){this._entities.splice(r,1),this._entitiesByNames[t.name]&&delete this._entitiesByNames[t.name],t._pool.release(t)}removeAllEntities(){for(var t=this._entities.length-1;t>=0;t--)this.removeEntity(this._entities[t])}processDeferredRemoval(){if(!!this.deferredRemovalEnabled){for(let r=0;r<this.entitiesToRemove.length;r++){let i=this.entitiesToRemove[r],n=this._entities.indexOf(i);this._releaseEntity(i,n)}this.entitiesToRemove.length=0;for(let r=0;r<this.entitiesWithComponentsToRemove.length;r++){let i=this.entitiesWithComponentsToRemove[r];for(;i._ComponentTypesToRemove.length>0;){let n=i._ComponentTypesToRemove.pop();var t=i._componentsToRemove[n._typeId];delete i._componentsToRemove[n._typeId],t.dispose(),this.world.componentsManager.componentRemovedFromEntity(n)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(t){return this._queryManager.getQuery(t)}count(){return this._entities.length}stats(){var t={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var r in this.componentsManager._componentPool){var i=this.componentsManager._componentPool[r];t.componentPool[i.T.getName()]={used:i.totalUsed(),size:i.count}}return t}}const ENTITY_CREATED="EntityManager#ENTITY_CREATE",ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class ComponentManager{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(t){return this.Components.indexOf(t)!==-1}registerComponent(t,r){if(this.Components.indexOf(t)!==-1){console.warn(`Component type: '${t.getName()}' already registered.`);return}const i=t.schema;if(!i)throw new Error(`Component "${t.getName()}" has no schema property.`);for(const n in i)if(!i[n].type)throw new Error(`Invalid schema for component "${t.getName()}". Missing type for "${n}" property.`);t._typeId=this.nextComponentId++,this.Components.push(t),this._ComponentsMap[t._typeId]=t,this.numComponents[t._typeId]=0,r===void 0?r=new ObjectPool(t):r===!1&&(r=void 0),this._componentPool[t._typeId]=r}componentAddedToEntity(t){this.numComponents[t._typeId]++}componentRemovedFromEntity(t){this.numComponents[t._typeId]--}getComponentsPool(t){return this._componentPool[t._typeId]}}const Version="0.3.1";class Entity{constructor(t){this._entityManager=t||null,this.id=t._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(t,r){var i=this._components[t._typeId];return!i&&r===!0&&(i=this._componentsToRemove[t._typeId]),i}getRemovedComponent(t){return this._componentsToRemove[t._typeId]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(t){var r=this._components[t._typeId];if(!!r){for(var i=0;i<this.queries.length;i++){var n=this.queries[i];n.reactive&&n.Components.indexOf(t)!==-1&&n.eventDispatcher.dispatchEvent(Query.prototype.COMPONENT_CHANGED,this,r)}return r}}addComponent(t,r){return this._entityManager.entityAddComponent(this,t,r),this}removeComponent(t,r){return this._entityManager.entityRemoveComponent(this,t,r),this}hasComponent(t,r){return!!~this._ComponentTypes.indexOf(t)||r===!0&&this.hasRemovedComponent(t)}hasRemovedComponent(t){return!!~this._ComponentTypesToRemove.indexOf(t)}hasAllComponents(t){for(var r=0;r<t.length;r++)if(!this.hasComponent(t[r]))return!1;return!0}hasAnyComponents(t){for(var r=0;r<t.length;r++)if(this.hasComponent(t[r]))return!0;return!1}removeAllComponents(t){return this._entityManager.entityRemoveAllComponents(this,t)}copy(t){for(var r in t._components){var i=t._components[r];this.addComponent(i.constructor);var n=this.getComponent(i.constructor);n.copy(i)}return this}clone(){return new Entity(this._entityManager).copy(this)}reset(){this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0;for(var t in this._components)delete this._components[t]}remove(t){return this._entityManager.removeEntity(this,t)}}const DEFAULT_OPTIONS={entityPoolSize:0,entityClass:Entity};class World{constructor(t={}){if(this.options=Object.assign({},DEFAULT_OPTIONS,t),this.componentsManager=new ComponentManager(this),this.entityManager=new EntityManager(this),this.systemManager=new SystemManager(this),this.enabled=!0,this.eventQueues={},hasWindow&&typeof CustomEvent!="undefined"){var r=new CustomEvent("ecsy-world-created",{detail:{world:this,version:Version}});window.dispatchEvent(r)}this.lastTime=now()/1e3}registerComponent(t,r){return this.componentsManager.registerComponent(t,r),this}registerSystem(t,r){return this.systemManager.registerSystem(t,r),this}hasRegisteredComponent(t){return this.componentsManager.hasComponent(t)}unregisterSystem(t){return this.systemManager.unregisterSystem(t),this}getSystem(t){return this.systemManager.getSystem(t)}getSystems(){return this.systemManager.getSystems()}execute(t,r){t||(r=now()/1e3,t=r-this.lastTime,this.lastTime=r),this.enabled&&(this.systemManager.execute(t,r),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(t){return this.entityManager.createEntity(t)}stats(){var t={entities:this.entityManager.stats(),system:this.systemManager.stats()};return t}}class System{canExecute(){if(this._mandatoryQueries.length===0)return!0;for(let r=0;r<this._mandatoryQueries.length;r++){var t=this._mandatoryQueries[r];if(t.entities.length===0)return!1}return!0}getName(){return this.constructor.getName()}constructor(t,r){if(this.world=t,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,r&&r.priority&&(this.priority=r.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var i in this.constructor.queries){var n=this.constructor.queries[i],s=n.components;if(!s||s.length===0)throw new Error("'components' attribute can't be empty in a query");let u=s.filter(l=>!componentRegistered(l));if(u.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${i}' with unregistered components: [${u.map(l=>l.getName()).join(", ")}]`);var o=this.world.entityManager.queryComponents(s);this._queries[i]=o,n.mandatory===!0&&this._mandatoryQueries.push(o),this.queries[i]={results:o.entities};var a=["added","removed","changed"];const h={added:Query.prototype.ENTITY_ADDED,removed:Query.prototype.ENTITY_REMOVED,changed:Query.prototype.COMPONENT_CHANGED};n.listen&&a.forEach(l=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${a.join(", ")}) for query '${i}' but it does not implement the 'execute' method.`),n.listen[l]){let f=n.listen[l];if(l==="changed"){if(o.reactive=!0,f===!0){let c=this.queries[i][l]=[];o.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,d=>{c.indexOf(d)===-1&&c.push(d)})}else if(Array.isArray(f)){let c=this.queries[i][l]=[];o.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,(d,v)=>{f.indexOf(v.constructor)!==-1&&c.indexOf(d)===-1&&c.push(d)})}}else{let c=this.queries[i][l]=[];o.eventDispatcher.addEventListener(h[l],d=>{c.indexOf(d)===-1&&c.push(d)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let r in this.queries){var t=this.queries[r];if(t.added&&(t.added.length=0),t.removed&&(t.removed.length=0),t.changed)if(Array.isArray(t.changed))t.changed.length=0;else for(let i in t.changed)t.changed[i].length=0}}toJSON(){var t={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var r=this.constructor.queries;for(let i in r){let n=this.queries[i],s=r[i],o=t.queries[i]={key:this._queries[i].key};o.mandatory=s.mandatory===!0,o.reactive=s.listen&&(s.listen.added===!0||s.listen.removed===!0||s.listen.changed===!0||Array.isArray(s.listen.changed)),o.reactive&&(o.listen={},["added","removed","changed"].forEach(u=>{n[u]&&(o.listen[u]={entities:n[u].length})}))}}return t}}System.isSystem=!0;System.getName=function(){return this.displayName||this.name};class TagComponent extends Component{constructor(){super(!1)}}TagComponent.isTagComponent=!0;const copyValue=e=>e,cloneValue=e=>e,copyArray=(e,t)=>{if(!e)return e;if(!t)return e.slice();t.length=0;for(let r=0;r<e.length;r++)t.push(e[r]);return t},cloneArray=e=>e&&e.slice(),copyJSON=e=>JSON.parse(JSON.stringify(e)),cloneJSON=e=>JSON.parse(JSON.stringify(e));function createType(e){var t=["name","default","copy","clone"],r=t.filter(i=>!e.hasOwnProperty(i));if(r.length>0)throw new Error(`createType expects a type definition with the following properties: ${r.join(", ")}`);return e.isType=!0,e}const Types={Number:createType({name:"Number",default:0,copy:copyValue,clone:cloneValue}),Boolean:createType({name:"Boolean",default:!1,copy:copyValue,clone:cloneValue}),String:createType({name:"String",default:"",copy:copyValue,clone:cloneValue}),Array:createType({name:"Array",default:[],copy:copyArray,clone:cloneArray}),Ref:createType({name:"Ref",default:void 0,copy:copyValue,clone:cloneValue}),JSON:createType({name:"JSON",default:null,copy:copyJSON,clone:cloneJSON})};function generateId(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i=r.length,n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*i));return t}function injectScript(e,t){var r=document.createElement("script");r.src=e,r.onload=t,(document.head||document.documentElement).appendChild(r)}function hookConsoleAndErrors(e){var t=["error","warning","log"];t.forEach(r=>{if(typeof console[r]=="function"){var i=console[r].bind(console);console[r]=(...n)=>(e.send({method:"console",type:r,args:JSON.stringify(n)}),i.apply(null,n))}}),window.addEventListener("error",r=>{e.send({method:"error",error:JSON.stringify({message:r.error.message,stack:r.error.stack})})})}function includeRemoteIdHTML(e){let t=document.createElement("div");return t.style.cssText=`
    align-items: center;
    background-color: #333;
    color: #aaa;
    display:flex;
    font-family: Arial;
    font-size: 1.1em;
    height: 40px;
    justify-content: center;
    left: 0;
    opacity: 0.9;
    position: absolute;
    right: 0;
    text-align: center;
    top: 0;
  `,t.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${e}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(t),t}function enableRemoteDevtools(remoteId){if(!hasWindow){console.warn("Remote devtools not available outside the browser");return}window.generateNewCode=()=>{window.localStorage.clear(),remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=e=>{var t=e.detail.world;Version=e.detail.version,worldsBeforeLoading.push(t)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",function(){infoDiv.innerHTML="Connected",connection.on("data",function(data){if(data.type==="init"){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(e=>{var t=new CustomEvent("ecsy-world-created",{detail:{world:e,version:Version}});window.dispatchEvent(t)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if(data.type==="executeScript"){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value})}})})})})};injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}hasWindow&&new URLSearchParams(window.location.search).has("enable-remote-devtools")&&enableRemoteDevtools();function finallyConstructor(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function allSettled(e){var t=this;return new t(function(r,i){if(!(e&&typeof e.length!="undefined"))return i(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(n.length===0)return r([]);var s=n.length;function o(u,h){if(h&&(typeof h=="object"||typeof h=="function")){var l=h.then;if(typeof l=="function"){l.call(h,function(f){o(u,f)},function(f){n[u]={status:"rejected",reason:f},--s===0&&r(n)});return}}n[u]={status:"fulfilled",value:h},--s===0&&r(n)}for(var a=0;a<n.length;a++)o(a,n[a])})}var setTimeoutFunc=setTimeout;function isArray(e){return Boolean(e&&typeof e.length!="undefined")}function noop(){}function bind(e,t){return function(){e.apply(t,arguments)}}function Promise$1(e){if(!(this instanceof Promise$1))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(e,this)}function handle(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,Promise$1._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?resolve$1:reject)(t.promise,e._value);return}var i;try{i=r(e._value)}catch(n){reject(t.promise,n);return}resolve$1(t.promise,i)})}function resolve$1(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var r=t.then;if(t instanceof Promise$1){e._state=3,e._value=t,finale(e);return}else if(typeof r=="function"){doResolve(bind(r,t),e);return}}e._state=1,e._value=t,finale(e)}catch(i){reject(e,i)}}function reject(e,t){e._state=2,e._value=t,finale(e)}function finale(e){e._state===2&&e._deferreds.length===0&&Promise$1._immediateFn(function(){e._handled||Promise$1._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)handle(e,e._deferreds[t]);e._deferreds=null}function Handler(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function doResolve(e,t){var r=!1;try{e(function(i){r||(r=!0,resolve$1(t,i))},function(i){r||(r=!0,reject(t,i))})}catch(i){if(r)return;r=!0,reject(t,i)}}Promise$1.prototype.catch=function(e){return this.then(null,e)};Promise$1.prototype.then=function(e,t){var r=new this.constructor(noop);return handle(this,new Handler(e,t,r)),r};Promise$1.prototype.finally=finallyConstructor;Promise$1.all=function(e){return new Promise$1(function(t,r){if(!isArray(e))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(i.length===0)return t([]);var n=i.length;function s(a,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var h=u.then;if(typeof h=="function"){h.call(u,function(l){s(a,l)},r);return}}i[a]=u,--n===0&&t(i)}catch(l){r(l)}}for(var o=0;o<i.length;o++)s(o,i[o])})};Promise$1.allSettled=allSettled;Promise$1.resolve=function(e){return e&&typeof e=="object"&&e.constructor===Promise$1?e:new Promise$1(function(t){t(e)})};Promise$1.reject=function(e){return new Promise$1(function(t,r){r(e)})};Promise$1.race=function(e){return new Promise$1(function(t,r){if(!isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var i=0,n=e.length;i<n;i++)Promise$1.resolve(e[i]).then(t,r)})};Promise$1._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeoutFunc(e,0)};Promise$1._unhandledRejectionFn=function e(t){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(e,t){for(var r,i=toObject(e),n,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)hasOwnProperty$1.call(r,o)&&(i[o]=r[o]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(r);for(var a=0;a<n.length;a++)propIsEnumerable.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i};/*!
 * @pixi/polyfill - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof global!="undefined"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Promise$1);Object.assign||(Object.assign=objectAssign);var ONE_FRAME_TIME=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var startTime_1=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-startTime_1}}var lastTime=Date.now(),vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!globalThis.requestAnimationFrame;++x){var p=vendors[x];globalThis.requestAnimationFrame=globalThis[p+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[p+"CancelAnimationFrame"]||globalThis[p+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var t=Date.now(),r=ONE_FRAME_TIME+lastTime-t;return r<0&&(r=0),lastTime=t,globalThis.self.setTimeout(function(){lastTime=Date.now(),e(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(e){return typeof e!="undefined"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream=="undefined"};function createMatch(e){return function(t){return t.test(e)}}function isMobile$1(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator!="undefined"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,i=r.split("[FBAN");typeof i[1]!="undefined"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]!="undefined"&&(r=i[0]);var n=createMatch(r),s={apple:{phone:n(appleIphone)&&!n(windowsPhone),ipod:n(appleIpod),tablet:!n(appleIphone)&&(n(appleTablet)||isAppleTabletOnIos13(t))&&!n(windowsPhone),universal:n(appleUniversal),device:(n(appleIphone)||n(appleIpod)||n(appleTablet)||n(appleUniversal)||isAppleTabletOnIos13(t))&&!n(windowsPhone)},amazon:{phone:n(amazonPhone),tablet:!n(amazonPhone)&&n(amazonTablet),device:n(amazonPhone)||n(amazonTablet)},android:{phone:!n(windowsPhone)&&n(amazonPhone)||!n(windowsPhone)&&n(androidPhone),tablet:!n(windowsPhone)&&!n(amazonPhone)&&!n(androidPhone)&&(n(amazonTablet)||n(androidTablet)),device:!n(windowsPhone)&&(n(amazonPhone)||n(amazonTablet)||n(androidPhone)||n(androidTablet))||n(/\bokhttp\b/i)},windows:{phone:n(windowsPhone),tablet:n(windowsTablet),device:n(windowsPhone)||n(windowsTablet)},other:{blackberry:n(otherBlackBerry),blackberry10:n(otherBlackBerry10),opera:n(otherOpera),firefox:n(otherFirefox),chrome:n(otherChrome),device:n(otherBlackBerry)||n(otherBlackBerry10)||n(otherOpera)||n(otherFirefox)||n(otherChrome)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}/*!
 * @pixi/settings - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var isMobile=isMobile$1(globalThis.navigator);function maxRecommendedTextures(e){var t=!0;if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(t=!1)}}if(isMobile.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(t=!1)}}}return t?e:4}function canUploadSameBuffer(){return!isMobile.apple.device}/*!
 * @pixi/constants - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$4;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$4||(ENV$4={}));var RENDERER_TYPE$4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$4||(RENDERER_TYPE$4={}));var BUFFER_BITS$4;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$4||(BUFFER_BITS$4={}));var BLEND_MODES$4;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$4||(BLEND_MODES$4={}));var DRAW_MODES$4;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$4||(DRAW_MODES$4={}));var FORMATS$4;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$4||(FORMATS$4={}));var TARGETS$4;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$4||(TARGETS$4={}));var TYPES$4;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$4||(TYPES$4={}));var SAMPLER_TYPES$4;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$4||(SAMPLER_TYPES$4={}));var SCALE_MODES$4;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$4||(SCALE_MODES$4={}));var WRAP_MODES$4;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$4||(WRAP_MODES$4={}));var MIPMAP_MODES$4;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$4||(MIPMAP_MODES$4={}));var ALPHA_MODES$4;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$4||(ALPHA_MODES$4={}));var CLEAR_MODES$4;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$4||(CLEAR_MODES$4={}));var GC_MODES$4;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$4||(GC_MODES$4={}));var PRECISION$4;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$4||(PRECISION$4={}));var MASK_TYPES$4;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(MASK_TYPES$4||(MASK_TYPES$4={}));var MSAA_QUALITY$4;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$4||(MSAA_QUALITY$4={}));var BUFFER_TYPE$4;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$4||(BUFFER_TYPE$4={}));var settings={MIPMAP_TEXTURES:MIPMAP_MODES$4.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$4.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$4.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$4.CLAMP,SCALE_MODE:SCALE_MODES$4.LINEAR,PRECISION_VERTEX:PRECISION$4.HIGH,PRECISION_FRAGMENT:isMobile.apple.device?PRECISION$4.HIGH:PRECISION$4.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},eventemitter3={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function n(u,h,l){this.fn=u,this.context=h,this.once=l||!1}function s(u,h,l,f,c){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new n(l,f||u,c),v=r?r+h:h;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],d]:u._events[v].push(d):(u._events[v]=d,u._eventsCount++),u}function o(u,h){--u._eventsCount===0?u._events=new i:delete u._events[h]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],l,f;if(this._eventsCount===0)return h;for(f in l=this._events)t.call(l,f)&&h.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},a.prototype.listeners=function(h){var l=r?r+h:h,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,v=new Array(d);c<d;c++)v[c]=f[c].fn;return v},a.prototype.listenerCount=function(h){var l=r?r+h:h,f=this._events[l];return f?f.fn?1:f.length:0},a.prototype.emit=function(h,l,f,c,d,v){var m=r?r+h:h;if(!this._events[m])return!1;var _=this._events[m],y=arguments.length,b,I;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),y){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,l),!0;case 3:return _.fn.call(_.context,l,f),!0;case 4:return _.fn.call(_.context,l,f,c),!0;case 5:return _.fn.call(_.context,l,f,c,d),!0;case 6:return _.fn.call(_.context,l,f,c,d,v),!0}for(I=1,b=new Array(y-1);I<y;I++)b[I-1]=arguments[I];_.fn.apply(_.context,b)}else{var A=_.length,R;for(I=0;I<A;I++)switch(_[I].once&&this.removeListener(h,_[I].fn,void 0,!0),y){case 1:_[I].fn.call(_[I].context);break;case 2:_[I].fn.call(_[I].context,l);break;case 3:_[I].fn.call(_[I].context,l,f);break;case 4:_[I].fn.call(_[I].context,l,f,c);break;default:if(!b)for(R=1,b=new Array(y-1);R<y;R++)b[R-1]=arguments[R];_[I].fn.apply(_[I].context,b)}}return!0},a.prototype.on=function(h,l,f){return s(this,h,l,f,!1)},a.prototype.once=function(h,l,f){return s(this,h,l,f,!0)},a.prototype.removeListener=function(h,l,f,c){var d=r?r+h:h;if(!this._events[d])return this;if(!l)return o(this,d),this;var v=this._events[d];if(v.fn)v.fn===l&&(!c||v.once)&&(!f||v.context===f)&&o(this,d);else{for(var m=0,_=[],y=v.length;m<y;m++)(v[m].fn!==l||c&&!v[m].once||f&&v[m].context!==f)&&_.push(v[m]);_.length?this._events[d]=_.length===1?_[0]:_:o(this,d)}return this},a.prototype.removeAllListeners=function(h){var l;return h?(l=r?r+h:h,this._events[l]&&o(this,l)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(eventemitter3);var EventEmitter=eventemitter3.exports,earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,s=linkedList(e,0,n,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,u,h,l,f,c,d;if(i&&(s=eliminateHoles(e,t,s,r)),e.length>80*r){a=h=e[0],u=l=e[1];for(var v=r;v<n;v+=r)f=e[v],c=e[v+1],f<a&&(a=f),c<u&&(u=c),f>h&&(h=f),c>l&&(l=c);d=Math.max(h-a,l-u),d=d!==0?1/d:0}return earcutLinked(s,o,r,a,u,d),o}function linkedList(e,t,r,i,n){var s,o;if(n===signedArea(e,t,r,i)>0)for(s=t;s<r;s+=i)o=insertNode(s,e[s],e[s+1],o);else for(s=r-i;s>=t;s-=i)o=insertNode(s,e[s],e[s+1],o);return o&&equals(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(e,t){if(!e)return e;t||(t=e);var r=e,i;do if(i=!1,!r.steiner&&(equals(r,r.next)||area(r.prev,r,r.next)===0)){if(removeNode(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function earcutLinked(e,t,r,i,n,s,o){if(!!e){!o&&s&&indexCurve(e,i,n,s);for(var a=e,u,h;e.prev!==e.next;){if(u=e.prev,h=e.next,s?isEarHashed(e,i,n,s):isEar(e)){t.push(u.i/r),t.push(e.i/r),t.push(h.i/r),removeNode(e),e=h.next,a=h.next;continue}if(e=h,e===a){o?o===1?(e=cureLocalIntersections(filterPoints(e),t,r),earcutLinked(e,t,r,i,n,s,2)):o===2&&splitEarcut(e,t,r,i,n,s):earcutLinked(filterPoints(e),t,r,i,n,s,1);break}}}}function isEar(e){var t=e.prev,r=e,i=e.next;if(area(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(pointInTriangle(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function isEarHashed(e,t,r,i){var n=e.prev,s=e,o=e.next;if(area(n,s,o)>=0)return!1;for(var a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,u=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,h=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,l=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,f=zOrder(a,u,t,r,i),c=zOrder(h,l,t,r,i),d=e.prevZ,v=e.nextZ;d&&d.z>=f&&v&&v.z<=c;){if(d!==e.prev&&d!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,o.x,o.y,d.x,d.y)&&area(d.prev,d,d.next)>=0||(d=d.prevZ,v!==e.prev&&v!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,o.x,o.y,v.x,v.y)&&area(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,o.x,o.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=c;){if(v!==e.prev&&v!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,o.x,o.y,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function cureLocalIntersections(e,t,r){var i=e;do{var n=i.prev,s=i.next.next;!equals(n,s)&&intersects(n,i,i.next,s)&&locallyInside(n,s)&&locallyInside(s,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(s.i/r),removeNode(i),removeNode(i.next),i=e=s),i=i.next}while(i!==e);return filterPoints(i)}function splitEarcut(e,t,r,i,n,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&isValidDiagonal(o,a)){var u=splitPolygon(o,a);o=filterPoints(o,o.next),u=filterPoints(u,u.next),earcutLinked(o,t,r,i,n,s),earcutLinked(u,t,r,i,n,s);return}a=a.next}o=o.next}while(o!==e)}function eliminateHoles(e,t,r,i){var n=[],s,o,a,u,h;for(s=0,o=t.length;s<o;s++)a=t[s]*i,u=s<o-1?t[s+1]*i:e.length,h=linkedList(e,a,u,i,!1),h===h.next&&(h.steiner=!0),n.push(getLeftmost(h));for(n.sort(compareX),s=0;s<n.length;s++)r=eliminateHole(n[s],r),r=filterPoints(r,r.next);return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){var r=findHoleBridge(e,t);if(!r)return t;var i=splitPolygon(r,e),n=filterPoints(r,r.next);return filterPoints(i,i.next),t===r?n:t}function findHoleBridge(e,t){var r=t,i=e.x,n=e.y,s=-1/0,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var a=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(i===s)return o;var u=o,h=o.x,l=o.y,f=1/0,c;r=o;do i>=r.x&&r.x>=h&&i!==r.x&&pointInTriangle(n<l?i:s,n,h,l,n<l?s:i,n,r.x,r.y)&&(c=Math.abs(n-r.y)/(i-r.x),locallyInside(r,e)&&(c<f||c===f&&(r.x>o.x||r.x===o.x&&sectorContainsSector(o,r)))&&(o=r,f=c)),r=r.next;while(r!==u);return o}function sectorContainsSector(e,t){return area(e.prev,e,t.prev)<0&&area(t.next,e,e.next)<0}function indexCurve(e,t,r,i){var n=e;do n.z===null&&(n.z=zOrder(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,sortLinked(n)}function sortLinked(e){var t,r,i,n,s,o,a,u,h=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,i=r,a=0,t=0;t<h&&(a++,i=i.nextZ,!!i);t++);for(u=h;a>0||u>0&&i;)a!==0&&(u===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,u--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,h*=2}while(o>1);return e}function zOrder(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function getLeftmost(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function pointInTriangle(e,t,r,i,n,s,o,a){return(n-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(i-a)-(r-o)*(t-a)>=0&&(r-o)*(s-a)-(n-o)*(i-a)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&(locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)&&(area(e.prev,e,t.prev)||area(e,t.prev,t))||equals(e,t)&&area(e.prev,e,e.next)>0&&area(t.prev,t,t.next)>0)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,i){var n=sign$1(area(e,t,r)),s=sign$1(area(e,t,i)),o=sign$1(area(r,i,e)),a=sign$1(area(r,i,t));return!!(n!==s&&o!==a||n===0&&onSegment(e,r,t)||s===0&&onSegment(e,i,t)||o===0&&onSegment(r,e,i)||a===0&&onSegment(r,t,i))}function onSegment(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function sign$1(e){return e>0?1:e<0?-1:0}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),i=new Node(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function insertNode(e,t,r,i){var n=new Node(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(e,t,r,i){var n=t&&t.length,s=n?t[0]*r:e.length,o=Math.abs(signedArea(e,0,s,r));if(n)for(var a=0,u=t.length;a<u;a++){var h=t[a]*r,l=a<u-1?t[a+1]*r:e.length;o-=Math.abs(signedArea(e,h,l,r))}var f=0;for(a=0;a<i.length;a+=3){var c=i[a]*r,d=i[a+1]*r,v=i[a+2]*r;f+=Math.abs((e[c]-e[v])*(e[d+1]-e[c+1])-(e[c]-e[d])*(e[v+1]-e[c+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function signedArea(e,t,r,i){for(var n=0,s=t,o=r-i;s<r;s+=i)n+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return n}earcut.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var s=0;s<e[n].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[n][s][o]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r};var earcut$1=earcut$2.exports,punycode$1={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(r){var i=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,s=typeof commonjsGlobal=="object"&&commonjsGlobal;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,u=36,h=1,l=26,f=38,c=700,d=72,v=128,m="-",_=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=u-h,R=Math.floor,E=String.fromCharCode,O;function U(N){throw RangeError(I[N])}function P(N,q){for(var Z=N.length,ee=[];Z--;)ee[Z]=q(N[Z]);return ee}function M(N,q){var Z=N.split("@"),ee="";Z.length>1&&(ee=Z[0]+"@",N=Z[1]),N=N.replace(b,".");var ne=N.split("."),de=P(ne,q).join(".");return ee+de}function k(N){for(var q=[],Z=0,ee=N.length,ne,de;Z<ee;)ne=N.charCodeAt(Z++),ne>=55296&&ne<=56319&&Z<ee?(de=N.charCodeAt(Z++),(de&64512)==56320?q.push(((ne&1023)<<10)+(de&1023)+65536):(q.push(ne),Z--)):q.push(ne);return q}function H(N){return P(N,function(q){var Z="";return q>65535&&(q-=65536,Z+=E(q>>>10&1023|55296),q=56320|q&1023),Z+=E(q),Z}).join("")}function J(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:u}function le(N,q){return N+22+75*(N<26)-((q!=0)<<5)}function X(N,q,Z){var ee=0;for(N=Z?R(N/c):N>>1,N+=R(N/q);N>A*l>>1;ee+=u)N=R(N/A);return R(ee+(A+1)*N/(N+f))}function G(N){var q=[],Z=N.length,ee,ne=0,de=v,se=d,oe,ve,ce,ue,te,ae,g,T,S;for(oe=N.lastIndexOf(m),oe<0&&(oe=0),ve=0;ve<oe;++ve)N.charCodeAt(ve)>=128&&U("not-basic"),q.push(N.charCodeAt(ve));for(ce=oe>0?oe+1:0;ce<Z;){for(ue=ne,te=1,ae=u;ce>=Z&&U("invalid-input"),g=J(N.charCodeAt(ce++)),(g>=u||g>R((a-ne)/te))&&U("overflow"),ne+=g*te,T=ae<=se?h:ae>=se+l?l:ae-se,!(g<T);ae+=u)S=u-T,te>R(a/S)&&U("overflow"),te*=S;ee=q.length+1,se=X(ne-ue,ee,ue==0),R(ne/ee)>a-de&&U("overflow"),de+=R(ne/ee),ne%=ee,q.splice(ne++,0,de)}return H(q)}function V(N){var q,Z,ee,ne,de,se,oe,ve,ce,ue,te,ae=[],g,T,S,C;for(N=k(N),g=N.length,q=v,Z=0,de=d,se=0;se<g;++se)te=N[se],te<128&&ae.push(E(te));for(ee=ne=ae.length,ne&&ae.push(m);ee<g;){for(oe=a,se=0;se<g;++se)te=N[se],te>=q&&te<oe&&(oe=te);for(T=ee+1,oe-q>R((a-Z)/T)&&U("overflow"),Z+=(oe-q)*T,q=oe,se=0;se<g;++se)if(te=N[se],te<q&&++Z>a&&U("overflow"),te==q){for(ve=Z,ce=u;ue=ce<=de?h:ce>=de+l?l:ce-de,!(ve<ue);ce+=u)C=ve-ue,S=u-ue,ae.push(E(le(ue+C%S,0))),ve=R(C/S);ae.push(E(le(ve,0))),de=X(Z,T,ee==ne),Z=0,++ee}++Z,++q}return ae.join("")}function z(N){return M(N,function(q){return _.test(q)?G(q.slice(4).toLowerCase()):q})}function ie(N){return M(N,function(q){return y.test(q)?"xn--"+V(q):q})}if(o={version:"1.3.2",ucs2:{decode:k,encode:H},decode:G,encode:V,toASCII:ie,toUnicode:z},i&&n)if(e.exports==i)n.exports=o;else for(O in o)o.hasOwnProperty(O)&&(i[O]=o[O]);else r.punycode=o})(commonjsGlobal)})(punycode$1,punycode$1.exports);var util$1={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},querystring$1={};function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var decode=function(e,t,r,i){t=t||"&",r=r||"=";var n={};if(typeof e!="string"||e.length===0)return n;var s=/\+/g;e=e.split(t);var o=1e3;i&&typeof i.maxKeys=="number"&&(o=i.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var u=0;u<a;++u){var h=e[u].replace(s,"%20"),l=h.indexOf(r),f,c,d,v;l>=0?(f=h.substr(0,l),c=h.substr(l+1)):(f=h,c=""),d=decodeURIComponent(f),v=decodeURIComponent(c),hasOwnProperty(n,d)?Array.isArray(n[d])?n[d].push(v):n[d]=[n[d],v]:n[d]=v}return n},stringifyPrimitive=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},encode=function(e,t,r,i){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var s=encodeURIComponent(stringifyPrimitive(n))+r;return Array.isArray(e[n])?e[n].map(function(o){return s+encodeURIComponent(stringifyPrimitive(o))}).join(t):s+encodeURIComponent(stringifyPrimitive(e[n]))}).join(t):i?encodeURIComponent(stringifyPrimitive(i))+r+encodeURIComponent(stringifyPrimitive(e)):""};querystring$1.decode=querystring$1.parse=decode;querystring$1.encode=querystring$1.stringify=encode;var punycode=punycode$1.exports,util=util$1,parse=urlParse,resolve=urlResolve,format=urlFormat;function Url$1(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=querystring$1;function urlParse(e,t,r){if(e&&util.isObject(e)&&e instanceof Url$1)return e;var i=new Url$1;return i.parse(e,t,r),i}Url$1.prototype.parse=function(e,t,r){if(!util.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),n=i!==-1&&i<e.indexOf("#")?"?":"#",s=e.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(n);var a=e;if(a=a.trim(),!r&&e.split("#").length===1){var u=simplePathPattern.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],t?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=protocolPattern.exec(a);if(h){h=h[0];var l=h.toLowerCase();this.protocol=l,a=a.substr(h.length)}if(r||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=a.substr(0,2)==="//";f&&!(h&&hostlessProtocol[h])&&(a=a.substr(2),this.slashes=!0)}if(!hostlessProtocol[h]&&(f||h&&!slashedProtocol[h])){for(var c=-1,d=0;d<hostEndingChars.length;d++){var v=a.indexOf(hostEndingChars[d]);v!==-1&&(c===-1||v<c)&&(c=v)}var m,_;c===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",c),_!==-1&&(m=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(m)),c=-1;for(var d=0;d<nonHostChars.length;d++){var v=a.indexOf(nonHostChars[d]);v!==-1&&(c===-1||v<c)&&(c=v)}c===-1&&(c=a.length),this.host=a.slice(0,c),a=a.slice(c),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var b=this.hostname.split(/\./),d=0,I=b.length;d<I;d++){var A=b[d];if(!!A&&!A.match(hostnamePartPattern)){for(var R="",E=0,O=A.length;E<O;E++)A.charCodeAt(E)>127?R+="x":R+=A[E];if(!R.match(hostnamePartPattern)){var U=b.slice(0,d),P=b.slice(d+1),M=A.match(hostnamePartStart);M&&(U.push(M[1]),P.unshift(M[2])),P.length&&(a="/"+P.join(".")+a),this.hostname=U.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=punycode.toASCII(this.hostname));var k=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+k,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!unsafeProtocol[l])for(var d=0,I=autoEscape.length;d<I;d++){var J=autoEscape[d];if(a.indexOf(J)!==-1){var le=encodeURIComponent(J);le===J&&(le=escape(J)),a=a.split(J).join(le)}}var X=a.indexOf("#");X!==-1&&(this.hash=a.substr(X),a=a.slice(0,X));var G=a.indexOf("?");if(G!==-1?(this.search=a.substr(G),this.query=a.substr(G+1),t&&(this.query=querystring.parse(this.query)),a=a.slice(0,G)):t&&(this.search="",this.query={}),a&&(this.pathname=a),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var k=this.pathname||"",V=this.search||"";this.path=k+V}return this.href=this.format(),this};function urlFormat(e){return util.isString(e)&&(e=urlParse(e)),e instanceof Url$1?e.format():Url$1.prototype.format.call(e)}Url$1.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(s=querystring.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||slashedProtocol[t])&&n!==!1?(n="//"+(n||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+n+r+o+i};function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}Url$1.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};Url$1.prototype.resolveObject=function(e){if(util.isString(e)){var t=new Url$1;t.parse(e,!1,!0),e=t}for(var r=new Url$1,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(r[u]=e[u])}return slashedProtocol[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!slashedProtocol[e.protocol]){for(var h=Object.keys(e),l=0;l<h.length;l++){var f=h[l];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(var I=(e.pathname||"").split("/");I.length&&!(e.host=I.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),I[0]!==""&&I.unshift(""),I.length<2&&I.unshift(""),r.pathname=I.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var c=r.pathname||"",d=r.search||"";r.path=c+d}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&r.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",_=m||v||r.host&&e.pathname,y=_,b=r.pathname&&r.pathname.split("/")||[],I=e.pathname&&e.pathname.split("/")||[],A=r.protocol&&!slashedProtocol[r.protocol];if(A&&(r.hostname="",r.port=null,r.host&&(b[0]===""?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(I[0]===""?I[0]=e.host:I.unshift(e.host)),e.host=null),_=_&&(I[0]===""||b[0]==="")),m)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=I;else if(I.length)b||(b=[]),b.pop(),b=b.concat(I),r.search=e.search,r.query=e.query;else if(!util.isNullOrUndefined(e.search)){if(A){r.hostname=r.host=b.shift();var R=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;R&&(r.auth=R.shift(),r.host=r.hostname=R.shift())}return r.search=e.search,r.query=e.query,(!util.isNull(r.pathname)||!util.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=b.slice(-1)[0],O=(r.host||e.host||b.length>1)&&(E==="."||E==="..")||E==="",U=0,P=b.length;P>=0;P--)E=b[P],E==="."?b.splice(P,1):E===".."?(b.splice(P,1),U++):U&&(b.splice(P,1),U--);if(!_&&!y)for(;U--;U)b.unshift("..");_&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),O&&b.join("/").substr(-1)!=="/"&&b.push("");var M=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(A){r.hostname=r.host=M?"":b.length?b.shift():"";var R=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;R&&(r.auth=R.shift(),r.host=r.hostname=R.shift())}return _=_||r.host&&b.length,_&&!M&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),(!util.isNull(r.pathname)||!util.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Url$1.prototype.parseHost=function(){var e=this.host,t=portPattern.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};/*!
 * @pixi/constants - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$3;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$3||(ENV$3={}));var RENDERER_TYPE$3;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$3||(RENDERER_TYPE$3={}));var BUFFER_BITS$3;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$3||(BUFFER_BITS$3={}));var BLEND_MODES$3;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$3||(BLEND_MODES$3={}));var DRAW_MODES$3;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$3||(DRAW_MODES$3={}));var FORMATS$3;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$3||(FORMATS$3={}));var TARGETS$3;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$3||(TARGETS$3={}));var TYPES$3;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$3||(TYPES$3={}));var SAMPLER_TYPES$3;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$3||(SAMPLER_TYPES$3={}));var SCALE_MODES$3;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$3||(SCALE_MODES$3={}));var WRAP_MODES$3;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$3||(WRAP_MODES$3={}));var MIPMAP_MODES$3;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$3||(MIPMAP_MODES$3={}));var ALPHA_MODES$3;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$3||(ALPHA_MODES$3={}));var CLEAR_MODES$3;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$3||(CLEAR_MODES$3={}));var GC_MODES$3;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$3||(GC_MODES$3={}));var PRECISION$3;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$3||(PRECISION$3={}));var MASK_TYPES$3;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(MASK_TYPES$3||(MASK_TYPES$3={}));var MSAA_QUALITY$3;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$3||(MSAA_QUALITY$3={}));var BUFFER_TYPE$3;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$3||(BUFFER_TYPE$3={}));/*!
 * @pixi/utils - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var url={parse,format,resolve};settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var saidHello=!1,VERSION="6.3.0";function sayHello(e){var t;if(!saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+VERSION+" - \u2730 "+e+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,r)}else globalThis.console&&globalThis.console.log("PixiJS "+VERSION+" - "+e+" - http://www.pixijs.com/");saidHello=!0}}var supported;function isWebGLSupported(){return typeof supported=="undefined"&&(supported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!!(i&&i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),supported}var aliceblue="#f0f8ff",antiquewhite="#faebd7",aqua="#00ffff",aquamarine="#7fffd4",azure="#f0ffff",beige="#f5f5dc",bisque="#ffe4c4",black="#000000",blanchedalmond="#ffebcd",blue="#0000ff",blueviolet="#8a2be2",brown="#a52a2a",burlywood="#deb887",cadetblue="#5f9ea0",chartreuse="#7fff00",chocolate="#d2691e",coral="#ff7f50",cornflowerblue="#6495ed",cornsilk="#fff8dc",crimson="#dc143c",cyan="#00ffff",darkblue="#00008b",darkcyan="#008b8b",darkgoldenrod="#b8860b",darkgray="#a9a9a9",darkgreen="#006400",darkgrey="#a9a9a9",darkkhaki="#bdb76b",darkmagenta="#8b008b",darkolivegreen="#556b2f",darkorange="#ff8c00",darkorchid="#9932cc",darkred="#8b0000",darksalmon="#e9967a",darkseagreen="#8fbc8f",darkslateblue="#483d8b",darkslategray="#2f4f4f",darkslategrey="#2f4f4f",darkturquoise="#00ced1",darkviolet="#9400d3",deeppink="#ff1493",deepskyblue="#00bfff",dimgray="#696969",dimgrey="#696969",dodgerblue="#1e90ff",firebrick="#b22222",floralwhite="#fffaf0",forestgreen="#228b22",fuchsia="#ff00ff",gainsboro="#dcdcdc",ghostwhite="#f8f8ff",goldenrod="#daa520",gold="#ffd700",gray="#808080",green="#008000",greenyellow="#adff2f",grey="#808080",honeydew="#f0fff0",hotpink="#ff69b4",indianred="#cd5c5c",indigo="#4b0082",ivory="#fffff0",khaki="#f0e68c",lavenderblush="#fff0f5",lavender="#e6e6fa",lawngreen="#7cfc00",lemonchiffon="#fffacd",lightblue="#add8e6",lightcoral="#f08080",lightcyan="#e0ffff",lightgoldenrodyellow="#fafad2",lightgray="#d3d3d3",lightgreen="#90ee90",lightgrey="#d3d3d3",lightpink="#ffb6c1",lightsalmon="#ffa07a",lightseagreen="#20b2aa",lightskyblue="#87cefa",lightslategray="#778899",lightslategrey="#778899",lightsteelblue="#b0c4de",lightyellow="#ffffe0",lime="#00ff00",limegreen="#32cd32",linen="#faf0e6",magenta="#ff00ff",maroon="#800000",mediumaquamarine="#66cdaa",mediumblue="#0000cd",mediumorchid="#ba55d3",mediumpurple="#9370db",mediumseagreen="#3cb371",mediumslateblue="#7b68ee",mediumspringgreen="#00fa9a",mediumturquoise="#48d1cc",mediumvioletred="#c71585",midnightblue="#191970",mintcream="#f5fffa",mistyrose="#ffe4e1",moccasin="#ffe4b5",navajowhite="#ffdead",navy="#000080",oldlace="#fdf5e6",olive="#808000",olivedrab="#6b8e23",orange="#ffa500",orangered="#ff4500",orchid="#da70d6",palegoldenrod="#eee8aa",palegreen="#98fb98",paleturquoise="#afeeee",palevioletred="#db7093",papayawhip="#ffefd5",peachpuff="#ffdab9",peru="#cd853f",pink="#ffc0cb",plum="#dda0dd",powderblue="#b0e0e6",purple="#800080",rebeccapurple="#663399",red="#ff0000",rosybrown="#bc8f8f",royalblue="#4169e1",saddlebrown="#8b4513",salmon="#fa8072",sandybrown="#f4a460",seagreen="#2e8b57",seashell="#fff5ee",sienna="#a0522d",silver="#c0c0c0",skyblue="#87ceeb",slateblue="#6a5acd",slategray="#708090",slategrey="#708090",snow="#fffafa",springgreen="#00ff7f",steelblue="#4682b4",tan="#d2b48c",teal="#008080",thistle="#d8bfd8",tomato="#ff6347",turquoise="#40e0d0",violet="#ee82ee",wheat="#f5deb3",white="#ffffff",whitesmoke="#f5f5f5",yellow="#ffff00",yellowgreen="#9acd32",cssColorNames={aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,goldenrod,gold,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavenderblush,lavender,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen};function hex2rgb(e,t){return t===void 0&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function hex2string(e){var t=e.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function string2hex(e){return typeof e=="string"&&(e=cssColorNames[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function mapPremultipliedBlendModes(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[BLEND_MODES$3.NORMAL_NPM]=BLEND_MODES$3.NORMAL,e[BLEND_MODES$3.ADD_NPM]=BLEND_MODES$3.ADD,e[BLEND_MODES$3.SCREEN_NPM]=BLEND_MODES$3.SCREEN,t[BLEND_MODES$3.NORMAL]=BLEND_MODES$3.NORMAL_NPM,t[BLEND_MODES$3.ADD]=BLEND_MODES$3.ADD_NPM,t[BLEND_MODES$3.SCREEN]=BLEND_MODES$3.SCREEN_NPM;var i=[];return i.push(t),i.push(e),i}var premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(e,t){return premultiplyBlendMode[t?1:0][e]}function premultiplyRgba(e,t,r,i){return r=r||new Float32Array(4),i||i===void 0?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function premultiplyTint(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var r=e>>16&255,i=e>>8&255,n=e&255;return r=r*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(r<<16)+(i<<8)+n}function premultiplyTintToRgba(e,t,r,i){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,(i||i===void 0)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}function createIndicesForQuads(e,t){t===void 0&&(t=null);var r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function getBufferType(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function isPow2(e){return!(e&e-1)&&!!e}function log2(e){var t=(e>65535?1:0)<<4;e>>>=t;var r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function removeItems(e,t,r){var i=e.length,n;if(!(t>=i||r===0)){r=t+r>i?i-t:r;var s=i-r;for(n=t;n<s;++n)e[n]=e[n+r];e.length=s}}function sign(e){return e===0?0:e<0?-1:1}var nextUid=0;function uid(){return++nextUid}var warnings={};function deprecation(e,t,r){if(r===void 0&&(r=3),!warnings[t]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+e),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e),console.warn(i))),warnings[t]=!0}}var ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null),CanvasRenderTarget=function(){function e(t,r,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||settings.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(t,r){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(r*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),e}();function trimCanvas(e){var t=e.width,r=e.height,i=e.getContext("2d"),n=i.getImageData(0,0,t,r),s=n.data,o=s.length,a={top:null,left:null,right:null,bottom:null},u=null,h,l,f;for(h=0;h<o;h+=4)s[h+3]!==0&&(l=h/4%t,f=~~(h/4/t),a.top===null&&(a.top=f),(a.left===null||l<a.left)&&(a.left=l),(a.right===null||a.right<l)&&(a.right=l+1),(a.bottom===null||a.bottom<f)&&(a.bottom=f));return a.top!==null&&(t=a.right-a.left,r=a.bottom-a.top+1,u=i.getImageData(a.left,a.top,t,r)),{height:r,width:t,data:u}}var tempAnchor$1;function determineCrossOrigin(e,t){if(t===void 0&&(t=globalThis.location),e.indexOf("data:")===0)return"";t=t||globalThis.location,tempAnchor$1||(tempAnchor$1=document.createElement("a")),tempAnchor$1.href=e;var r=url.parse(tempAnchor$1.href),i=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!i||r.protocol!==t.protocol?"anonymous":""}function getResolutionOfUrl(e,t){var r=settings.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t!==void 0?t:1}/*!
 * @pixi/math - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180,SHAPES;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(SHAPES||(SHAPES={}));var Point=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y),t},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x=t,this.y=r,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),tempPoints$1=[new Point,new Point,new Point,new Point],Rectangle=function(){function e(t,r,i,n){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(r),this.width=Number(i),this.height=Number(n),this.type=SHAPES.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height},e.prototype.intersects=function(t,r){if(!r){var i=this.x<t.x?t.x:this.x,n=this.right>t.right?t.right:this.right;if(n<=i)return!1;var s=this.y<t.y?t.y:this.y,o=this.bottom>t.bottom?t.bottom:this.bottom;return o>s}var a=this.left,u=this.right,h=this.top,l=this.bottom;if(u<=a||l<=h)return!1;var f=tempPoints$1[0].set(t.left,t.top),c=tempPoints$1[1].set(t.left,t.bottom),d=tempPoints$1[2].set(t.right,t.top),v=tempPoints$1[3].set(t.right,t.bottom);if(d.x<=f.x||c.y<=f.y)return!1;var m=Math.sign(r.a*r.d-r.b*r.c);if(m===0||(r.apply(f,f),r.apply(c,c),r.apply(d,d),r.apply(v,v),Math.max(f.x,c.x,d.x,v.x)<=a||Math.min(f.x,c.x,d.x,v.x)>=u||Math.max(f.y,c.y,d.y,v.y)<=h||Math.min(f.y,c.y,d.y,v.y)>=l))return!1;var _=m*(c.y-f.y),y=m*(f.x-c.x),b=_*a+y*h,I=_*u+y*h,A=_*a+y*l,R=_*u+y*l;if(Math.max(b,I,A,R)<=_*f.x+y*f.y||Math.min(b,I,A,R)>=_*v.x+y*v.y)return!1;var E=m*(f.y-d.y),O=m*(d.x-f.x),U=E*a+O*h,P=E*u+O*h,M=E*a+O*l,k=E*u+O*l;return!(Math.max(U,P,M,k)<=E*f.x+O*f.y||Math.min(U,P,M,k)>=E*v.x+O*v.y)},e.prototype.pad=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this},e.prototype.fit=function(t){var r=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(i-r,0),this.y=n,this.height=Math.max(s-n,0),this},e.prototype.ceil=function(t,r){t===void 0&&(t=1),r===void 0&&(r=.001);var i=Math.ceil((this.x+this.width-r)*t)/t,n=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=i-this.x,this.height=n-this.y,this},e.prototype.enlarge=function(t){var r=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=i-r,this.y=n,this.height=s-n,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Circle=function(){function e(t,r,i){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=t,this.y=r,this.radius=i,this.type=SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,r){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,s=this.y-r;return n*=n,s*=s,n+s<=i},e.prototype.getBounds=function(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),Ellipse=function(){function e(t,r,i,n){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=r,this.width=i,this.height=n,this.type=SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(r-this.y)/this.height;return i*=i,n*=n,i+n<=1},e.prototype.getBounds=function(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Polygon=function(){function e(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];var n=Array.isArray(r[0])?r[0]:r;if(typeof n[0]!="number"){for(var s=[],o=0,a=n.length;o<a;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=SHAPES.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=this.points.slice(),r=new e(t);return r.closeStroke=this.closeStroke,r},e.prototype.contains=function(t,r){for(var i=!1,n=this.points.length/2,s=0,o=n-1;s<n;o=s++){var a=this.points[s*2],u=this.points[s*2+1],h=this.points[o*2],l=this.points[o*2+1],f=u>r!=l>r&&t<(h-a)*((r-u)/(l-u))+a;f&&(i=!i)}return i},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,r){return t+", "+r},"")+"]")},e}(),RoundedRectangle=function(){function e(t,r,i,n,s){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=t,this.y=r,this.width=i,this.height=n,this.radius=s,this.type=SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var n=t-(this.x+i),s=r-(this.y+i),o=i*i;if(n*n+s*s<=o||(n=t-(this.x+this.width-i),n*n+s*s<=o)||(s=r-(this.y+this.height-i),n*n+s*s<=o)||(n=t-(this.x+i),n*n+s*s<=o))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),ObservablePoint=function(){function e(t,r,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=r}return e.prototype.clone=function(t,r){return t===void 0&&(t=this.cb),r===void 0&&(r=this.scope),new e(t,r,this._x,this._y)},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),Matrix=function(){function e(t,r,i,n,s,o){t===void 0&&(t=1),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),o===void 0&&(o=0),this.array=null,this.a=t,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=o}return e.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.prototype.set=function(t,r,i,n,s,o){return this.a=t,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=o,this},e.prototype.toArray=function(t,r){this.array||(this.array=new Float32Array(9));var i=r||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.prototype.apply=function(t,r){r=r||new Point;var i=t.x,n=t.y;return r.x=this.a*i+this.c*n+this.tx,r.y=this.b*i+this.d*n+this.ty,r},e.prototype.applyInverse=function(t,r){r=r||new Point;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return r.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,r},e.prototype.translate=function(t,r){return this.tx+=t,this.ty+=r,this},e.prototype.scale=function(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this},e.prototype.rotate=function(t){var r=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*r-this.b*i,this.b=n*i+this.b*r,this.c=s*r-this.d*i,this.d=s*i+this.d*r,this.tx=o*r-this.ty*i,this.ty=o*i+this.ty*r,this},e.prototype.append=function(t){var r=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*r+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*r+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*r+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},e.prototype.setTransform=function(t,r,i,n,s,o,a,u,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-u)*o,this.d=Math.cos(a-u)*o,this.tx=t-(i*this.a+n*this.c),this.ty=r-(i*this.b+n*this.d),this},e.prototype.prepend=function(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},e.prototype.decompose=function(t){var r=this.a,i=this.b,n=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-n,s),u=Math.atan2(i,r),h=Math.abs(a+u);return h<1e-5||Math.abs(PI_2-h)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=u),t.scale.x=Math.sqrt(r*r+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*r+o.y*n),t.position.y=this.ty+(o.x*i+o.y*s),t},e.prototype.invert=function(){var t=this.a,r=this.b,i=this.c,n=this.d,s=this.tx,o=t*n-r*i;return this.a=n/o,this.b=-r/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(t*this.ty-r*s)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(var e=0;e<16;e++){var t=[];rotationCayley.push(t);for(var r=0;r<16;r++)for(var i=signum(ux[e]*ux[r]+vx[e]*uy[r]),n=signum(uy[e]*ux[r]+vy[e]*uy[r]),s=signum(ux[e]*vx[r]+vx[e]*vy[r]),o=signum(uy[e]*vx[r]+vy[e]*vy[r]),a=0;a<16;a++)if(ux[a]===i&&uy[a]===n&&vx[a]===s&&vy[a]===o){t.push(a);break}}for(var e=0;e<16;e++){var u=new Matrix;u.set(ux[e],uy[e],vx[e],vy[e],0,0),rotationMatrices.push(u)}}init();var groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return ux[e]},uY:function(e){return uy[e]},vX:function(e){return vx[e]},vY:function(e){return vy[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,t){return rotationCayley[e][t]},sub:function(e,t){return rotationCayley[e][groupD8.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){return Math.abs(e)*2<=Math.abs(t)?t>=0?groupD8.S:groupD8.N:Math.abs(t)*2<=Math.abs(e)?e>0?groupD8.E:groupD8.W:t>0?e>0?groupD8.SE:groupD8.SW:e>0?groupD8.NE:groupD8.NW},matrixAppendRotationInv:function(e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var n=rotationMatrices[groupD8.inv(t)];n.tx=r,n.ty=i,e.append(n)}},Transform=function(){function e(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=r.a*i.a+r.b*i.c,n.b=r.a*i.b+r.b*i.d,n.c=r.c*i.a+r.d*i.c,n.d=r.c*i.b+r.d*i.d,n.tx=r.tx*i.a+r.ty*i.c+i.tx,n.ty=r.tx*i.b+r.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.SORTABLE_CHILDREN=!1;var Bounds$1=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(t=t||new Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var i=t.a,n=t.b,s=t.c,o=t.d,a=t.tx,u=t.ty,h=i*r.x+s*r.y+a,l=n*r.x+o*r.y+u;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},e.prototype.addQuad=function(t){var r=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=t[0],a=t[1];r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[2],a=t[3],r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[4],a=t[5],r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[6],a=t[7],r=o<r?o:r,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=r,this.minY=i,this.maxX=n,this.maxY=s},e.prototype.addFrame=function(t,r,i,n,s){this.addFrameMatrix(t.worldTransform,r,i,n,s)},e.prototype.addFrameMatrix=function(t,r,i,n,s){var o=t.a,a=t.b,u=t.c,h=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,m=this.maxY,_=o*r+u*i+l,y=a*r+h*i+f;c=_<c?_:c,d=y<d?y:d,v=_>v?_:v,m=y>m?y:m,_=o*n+u*i+l,y=a*n+h*i+f,c=_<c?_:c,d=y<d?y:d,v=_>v?_:v,m=y>m?y:m,_=o*r+u*s+l,y=a*r+h*s+f,c=_<c?_:c,d=y<d?y:d,v=_>v?_:v,m=y>m?y:m,_=o*n+u*s+l,y=a*n+h*s+f,c=_<c?_:c,d=y<d?y:d,v=_>v?_:v,m=y>m?y:m,this.minX=c,this.minY=d,this.maxX=v,this.maxY=m},e.prototype.addVertexData=function(t,r,i){for(var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY,u=r;u<i;u+=2){var h=t[u],l=t[u+1];n=h<n?h:n,s=l<s?l:s,o=h>o?h:o,a=l>a?l:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(t,r,i,n){this.addVerticesMatrix(t.worldTransform,r,i,n)},e.prototype.addVerticesMatrix=function(t,r,i,n,s,o){s===void 0&&(s=0),o===void 0&&(o=s);for(var a=t.a,u=t.b,h=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,m=this.maxX,_=this.maxY,y=i;y<n;y+=2){var b=r[y],I=r[y+1],A=a*b+h*I+f,R=l*I+u*b+c;d=Math.min(d,A-s),m=Math.max(m,A+s),v=Math.min(v,R-o),_=Math.max(_,R+o)}this.minX=d,this.minY=v,this.maxX=m,this.maxY=_},e.prototype.addBounds=function(t){var r=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},e.prototype.addBoundsMask=function(t,r){var i=t.minX>r.minX?t.minX:r.minX,n=t.minY>r.minY?t.minY:r.minY,s=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(i<=s&&n<=o){var a=this.minX,u=this.minY,h=this.maxX,l=this.maxY;this.minX=i<a?i:a,this.minY=n<u?n:u,this.maxX=s>h?s:h,this.maxY=o>l?o:l}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var i=t.minX>r.x?t.minX:r.x,n=t.minY>r.y?t.minY:r.y,s=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(i<=s&&n<=o){var a=this.minX,u=this.minY,h=this.maxX,l=this.maxY;this.minX=i<a?i:a,this.minY=n<u?n:u,this.maxX=s>h?s:h,this.maxY=o>l?o:l}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,i,n,s,o){t-=s,r-=o,i+=s,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>n?this.maxY:n},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$j=function(e,t){return extendStatics$j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$j(e,t)};function __extends$j(e,t){extendStatics$j(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var DisplayObject=function(e){__extends$j(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new Transform,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new Bounds$1,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var i=Object.keys(r),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(r,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Rectangle),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),r=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds$1);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,r);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-o,a},t.prototype.toGlobal=function(r,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},t.prototype.toLocal=function(r,i,n,s){return i&&(r=i.toGlobal(r,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,n)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,i,n,s,o,a,u,h,l){return r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),this.position.x=r,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=o,this.skew.x=a,this.skew.y=u,this.pivot.x=h,this.pivot.y=l,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*RAD_TO_DEG},set:function(r){this.transform.rotation=r*DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var i=this._mask.maskObject||this._mask;i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1)}if(this._mask=r,this._mask){var i=this._mask.maskObject||this._mask;i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++}}},enumerable:!1,configurable:!0}),t}(EventEmitter),TemporaryDisplayObject=function(e){__extends$j(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(DisplayObject);DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;/*!
 * @pixi/constants - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$2;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$2||(ENV$2={}));var RENDERER_TYPE$2;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$2||(RENDERER_TYPE$2={}));var BUFFER_BITS$2;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$2||(BUFFER_BITS$2={}));var BLEND_MODES$2;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$2||(BLEND_MODES$2={}));var DRAW_MODES$2;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$2||(DRAW_MODES$2={}));var FORMATS$2;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$2||(FORMATS$2={}));var TARGETS$2;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$2||(TARGETS$2={}));var TYPES$2;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$2||(TYPES$2={}));var SAMPLER_TYPES$2;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$2||(SAMPLER_TYPES$2={}));var SCALE_MODES$2;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$2||(SCALE_MODES$2={}));var WRAP_MODES$2;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$2||(WRAP_MODES$2={}));var MIPMAP_MODES$2;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$2||(MIPMAP_MODES$2={}));var ALPHA_MODES$2;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$2||(ALPHA_MODES$2={}));var CLEAR_MODES$2;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$2||(CLEAR_MODES$2={}));var GC_MODES$2;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$2||(GC_MODES$2={}));var PRECISION$2;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$2||(PRECISION$2={}));var MASK_TYPES$2;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(MASK_TYPES$2||(MASK_TYPES$2={}));var MSAA_QUALITY$2;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$2||(MSAA_QUALITY$2={}));var BUFFER_TYPE$2;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$2||(BUFFER_TYPE$2={}));function sortChildren(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var Container=function(e){__extends$j(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=settings.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var o=i[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return i[0]},t.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},t.prototype.swapChildren=function(r,i){if(r!==i){var n=this.getChildIndex(r),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=r,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(r);removeItems(this.children,n,1),this.children.splice(i,0,r),this.onChildrenChange(i)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var o=i[0],a=this.children.indexOf(o);if(a===-1)return null;o.parent=null,o.transform._parentID=-1,removeItems(this.children,a,1),this._boundsID++,this.onChildrenChange(a),o.emit("removed",this),this.emit("childRemoved",o,this,a)}return i[0]},t.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},t.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var n=r,s=i,o=s-n,a;if(o>0&&o<=s){a=this.children.splice(n,o);for(var u=0;u<a.length;++u)a[u].parent=null,a[u].transform&&(a[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var u=0;u<a.length;++u)a[u].emit("removed",this),this.emit("childRemoved",a[u],this,u);return a}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!r&&s.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var n=e.prototype.getLocalBounds.call(this,r);if(!i)for(var s=0,o=this.children.length;s<o;++s){var a=this.children[s];a.visible&&a.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var i=r.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var n,s;if(this.cullArea?(n=this.cullArea,s=this.worldTransform):this._render!==t.prototype._render&&(n=this.getBounds(!0)),n&&i.intersects(n,s))this._render(r);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var u=this.children[o],h=u.cullable;u.cullable=h||!this.cullArea,u.render(r),u.cullable=h}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(r)}},t.prototype.renderAdvanced=function(r){var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s])}var o=i&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==MASK_TYPES$2.NONE));if(o&&r.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),n&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var s=0,a=this.children.length;s<a;++s)this.children[s].render(r)}o&&r.batch.flush(),n&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(DisplayObject);Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);var KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,AccessibilityManager=function(){function e(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=DIV_TOUCH_SIZE+"px",r.style.height=DIV_TOUCH_SIZE+"px",r.style.position="absolute",r.style.top=DIV_TOUCH_POS_X+"px",r.style.left=DIV_TOUCH_POS_Y+"px",r.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var t=this,r=document.createElement("button");r.style.width=DIV_HOOK_SIZE+"px",r.style.height=DIV_HOOK_SIZE+"px",r.style.position="absolute",r.style.top=DIV_HOOK_POS_X+"px",r.style.left=DIV_HOOK_POS_Y+"px",r.style.zIndex=DIV_HOOK_ZINDEX.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},e.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},e.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var r=t.children;if(r)for(var i=0;i<r.length;i++)this.updateAccessibleObjects(r[i])}},e.prototype.update=function(){var t=performance.now();if(!(isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),i=r.left,n=r.top,s=r.width,o=r.height,a=this.renderer,u=a.width,h=a.height,l=a.resolution,f=s/u*l,c=o/h*l,d=this.div;d.style.left=i+"px",d.style.top=n+"px",d.style.width=u+"px",d.style.height=h+"px";for(var v=0;v<this.children.length;v++){var m=this.children[v];if(m.renderId!==this.renderId)m._accessibleActive=!1,removeItems(this.children,v,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,v--;else{d=m._accessibleDiv;var _=m.hitArea,y=m.worldTransform;m.hitArea?(d.style.left=(y.tx+_.x*y.a)*f+"px",d.style.top=(y.ty+_.y*y.d)*c+"px",d.style.width=_.width*y.a*f+"px",d.style.height=_.height*y.d*c+"px"):(_=m.getBounds(),this.capHitArea(_),d.style.left=_.x*f+"px",d.style.top=_.y*c+"px",d.style.width=_.width*f+"px",d.style.height=_.height*c+"px",d.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(d.title=m.accessibleTitle),d.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&d.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==d.title||m.tabIndex!==d.tabIndex)&&(d.title=m.accessibleTitle,d.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},e.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},e.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var r=this.renderer,i=r.width,n=r.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)},e.prototype.addChild=function(t){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=DIV_TOUCH_SIZE+"px",r.style.height=DIV_TOUCH_SIZE+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=DIV_TOUCH_ZINDEX.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},e.prototype._onClick=function(t){var r=this.renderer.plugins.interaction,i=t.target.displayObject,n=r.eventData;r.dispatchEvent(i,"click",n),r.dispatchEvent(i,"pointertap",n),r.dispatchEvent(i,"tap",n)},e.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,i=t.target.displayObject,n=r.eventData;r.dispatchEvent(i,"mouseover",n)},e.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,i=t.target.displayObject,n=r.eventData;r.dispatchEvent(i,"mouseout",n)},e.prototype._onKeyDown=function(t){t.keyCode===KEY_CODE_TAB&&this.activate()},e.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();/*!
 * @pixi/ticker - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.TARGET_FPMS=.06;var UPDATE_PRIORITY;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(UPDATE_PRIORITY||(UPDATE_PRIORITY={}));var TickerListener=function(){function e(t,r,i,n){r===void 0&&(r=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=i,this.once=n}return e.prototype.match=function(t,r){return r===void 0&&(r=null),this.fn===t&&this.context===r},e.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},e.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},e.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=t?null:r,this.previous=null,r},e}(),Ticker=function(){function e(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/settings.TARGET_FPMS,this.elapsedMS=1/settings.TARGET_FPMS,this._tick=function(r){t._requestId=null,t.started&&(t.update(r),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,r,i){return i===void 0&&(i=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(t,r,i))},e.prototype.addOnce=function(t,r,i){return i===void 0&&(i=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(t,r,i,!0))},e.prototype._addListener=function(t){var r=this._head.next,i=this._head;if(!r)t.connect(i);else{for(;r;){if(t.priority>r.priority){t.connect(i);break}i=r,r=r.next}t.previous||t.connect(i)}return this._startIfPossible(),this},e.prototype.remove=function(t,r){for(var i=this._head.next;i;)i.match(t,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,r=this._head;r=r.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){t===void 0&&(t=performance.now());var r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*settings.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var r=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,r)/1e3,settings.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,t);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),TickerPlugin=function(){function e(){}return e.init=function(t){var r=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Ticker.shared:new Ticker,t.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e}();/*!
 * @pixi/interaction - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var InteractionData=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(t,r,i){return t.worldTransform.applyInverse(i||this.global,r)},e.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var r="buttons"in t&&t.buttons;this.buttons=Number.isInteger(r)?r:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$i=function(e,t){return extendStatics$i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$i(e,t)};function __extends$i(e,t){extendStatics$i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var InteractionEvent=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),InteractionTrackingData=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(t,r){r?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),e}(),TreeSearch=function(){function e(){this._tempPoint=new Point}return e.prototype.recursiveFindHit=function(t,r,i,n,s){if(!r||!r.visible)return!1;var o=t.data.global;s=r.interactive||s;var a=!1,u=s,h=!0;if(r.hitArea?(n&&(r.worldTransform.applyInverse(o,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,h=!1)),u=!1):r._mask&&n&&(r._mask.containsPoint&&r._mask.containsPoint(o)||(n=!1)),h&&r.interactiveChildren&&r.children)for(var l=r.children,f=l.length-1;f>=0;f--){var c=l[f],d=this.recursiveFindHit(t,c,i,n,u);if(d){if(!c.parent)continue;u=!1,d&&(t.target&&(n=!1),a=!0)}}return s&&(n&&!t.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(o)&&(a=!0),r.interactive&&(a&&!t.target&&(t.target=r),i&&i(t,r,!!a))),a},e.prototype.findHit=function(t,r,i,n){this.recursiveFindHit(t,r,i,n,!1)},e}(),interactiveTarget={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};DisplayObject.mixin(interactiveTarget);var MOUSE_POINTER_ID=1,hitTestEvent={target:null,data:{global:null}},InteractionManager=function(e){__extends$i(t,e);function t(r,i){var n=e.call(this)||this;return i=i||{},n.renderer=r,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new InteractionData,n.mouse.identifier=MOUSE_POINTER_ID,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[MOUSE_POINTER_ID]=n.mouse,n.interactionDataPool=[],n.eventData=new InteractionEvent,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new TreeSearch,n._tempDisplayObject=new TemporaryDisplayObject,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(r,i){return hitTestEvent.target=null,hitTestEvent.data.global=r,i||(i=this.lastObjectRendered),this.processInteractive(hitTestEvent,i,null,!0),hitTestEvent.target},t.prototype.setTargetElement=function(r,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=i,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){!this.tickerAdded||(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var i=this.activeInteractionData[r];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(r){r=r||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var n=this.cursorStyles[r];if(n)switch(typeof n){case"string":i&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(r);break;case"object":i&&Object.assign(this.interactionDOMElement.style,n);break}else i&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},t.prototype.dispatchEvent=function(r,i,n){(!n.stopPropagationHint||r===n.stopsPropagatingAt)&&(n.currentTarget=r,n.type=i,r.emit(i,n),r[i]&&r[i](n))},t.prototype.delayDispatchEvent=function(r,i,n){this.delayedEvents.push({displayObject:r,eventString:i,eventData:n})},t.prototype.mapPositionToPoint=function(r,i,n){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;r.x=(i-s.left)*(this.interactionDOMElement.width/s.width)*o,r.y=(n-s.top)*(this.interactionDOMElement.height/s.height)*o},t.prototype.processInteractive=function(r,i,n,s){var o=this.search.findHit(r,i,n,s),a=this.delayedEvents;if(!a.length)return o;r.stopPropagationHint=!1;var u=a.length;this.delayedEvents=[];for(var h=0;h<u;h++){var l=a[h],f=l.displayObject,c=l.eventString,d=l.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,c,d)}return o},t.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);if(this.autoPreventDefault&&i[0].isNormalized){var n=r.cancelable||!("cancelable"in r);n&&r.preventDefault()}for(var s=i.length,o=0;o<s;o++){var a=i[o],u=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(h.data.originalEvent=r,this.processInteractive(h,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",h),a.pointerType==="touch")this.emit("touchstart",h);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var l=a.button===2;this.emit(l?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(r,i,n){var s=r.data,o=r.data.identifier;if(n){if(i.trackedPointers[o]||(i.trackedPointers[o]=new InteractionTrackingData(o)),this.dispatchEvent(i,"pointerdown",r),s.pointerType==="touch")this.dispatchEvent(i,"touchstart",r);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var a=s.button===2;a?i.trackedPointers[o].rightDown=!0:i.trackedPointers[o].leftDown=!0,this.dispatchEvent(i,a?"rightdown":"mousedown",r)}}},t.prototype.onPointerComplete=function(r,i,n){for(var s=this.normalizeToPointerData(r),o=s.length,a=r.target!==this.interactionDOMElement?"outside":"",u=0;u<o;u++){var h=s[u],l=this.getInteractionDataForPointerId(h),f=this.configureInteractionEventForDOMEvent(this.eventData,h,l);if(f.data.originalEvent=r,this.processInteractive(f,this.lastObjectRendered,n,i||!a),this.emit(i?"pointercancel":"pointerup"+a,f),h.pointerType==="mouse"||h.pointerType==="pen"){var c=h.button===2;this.emit(c?"rightup"+a:"mouseup"+a,f)}else h.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+a,f),this.releaseInteractionDataForPointerId(h.pointerId))}},t.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(r,i){var n=r.data,s=r.data.identifier;i.trackedPointers[s]!==void 0&&(delete i.trackedPointers[s],this.dispatchEvent(i,"pointercancel",r),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",r))},t.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},t.prototype.processPointerUp=function(r,i,n){var s=r.data,o=r.data.identifier,a=i.trackedPointers[o],u=s.pointerType==="touch",h=s.pointerType==="mouse"||s.pointerType==="pen",l=!1;if(h){var f=s.button===2,c=InteractionTrackingData.FLAGS,d=f?c.RIGHT_DOWN:c.LEFT_DOWN,v=a!==void 0&&a.flags&d;n?(this.dispatchEvent(i,f?"rightup":"mouseup",r),v&&(this.dispatchEvent(i,f?"rightclick":"click",r),l=!0)):v&&this.dispatchEvent(i,f?"rightupoutside":"mouseupoutside",r),a&&(f?a.rightDown=!1:a.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",r),u&&this.dispatchEvent(i,"touchend",r),a&&((!h||l)&&this.dispatchEvent(i,"pointertap",r),u&&(this.dispatchEvent(i,"tap",r),a.over=!1))):a&&(this.dispatchEvent(i,"pointerupoutside",r),u&&this.dispatchEvent(i,"touchendoutside",r)),a&&a.none&&delete i.trackedPointers[o]},t.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,s=0;s<n;s++){var o=i[s],a=this.getInteractionDataForPointerId(o),u=this.configureInteractionEventForDOMEvent(this.eventData,o,a);u.data.originalEvent=r,this.processInteractive(u,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",u),o.pointerType==="touch"&&this.emit("touchmove",u),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",u)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(r,i,n){var s=r.data,o=s.pointerType==="touch",a=s.pointerType==="mouse"||s.pointerType==="pen";a&&this.processPointerOverOut(r,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",r),o&&this.dispatchEvent(i,"touchmove",r),a&&this.dispatchEvent(i,"mousemove",r))},t.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(s.identifier)}},t.prototype.processPointerOverOut=function(r,i,n){var s=r.data,o=r.data.identifier,a=s.pointerType==="mouse"||s.pointerType==="pen",u=i.trackedPointers[o];n&&!u&&(u=i.trackedPointers[o]=new InteractionTrackingData(o)),u!==void 0&&(n&&this.mouseOverRenderer?(u.over||(u.over=!0,this.delayDispatchEvent(i,"pointerover",r),a&&this.delayDispatchEvent(i,"mouseover",r)),a&&this.cursor===null&&(this.cursor=i.cursor)):u.over&&(u.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),a&&this.dispatchEvent(i,"mouseout",r),u.none&&delete i.trackedPointers[o]))},t.prototype.onPointerOver=function(r){var i=this.normalizeToPointerData(r),n=i[0],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",o)},t.prototype.getInteractionDataForPointerId=function(r){var i=r.pointerId,n;return i===MOUSE_POINTER_ID||r.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new InteractionData,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(r),n},t.prototype.releaseInteractionDataForPointerId=function(r){var i=this.activeInteractionData[r];i&&(delete this.activeInteractionData[r],i.reset(),this.interactionDataPool.push(i))},t.prototype.configureInteractionEventForDOMEvent=function(r,i,n){return r.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,r.reset(),r},t.prototype.normalizeToPointerData=function(r){var i=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var n=0,s=r.changedTouches.length;n<s;n++){var o=r.changedTouches[n];typeof o.button=="undefined"&&(o.button=r.touches.length?1:0),typeof o.buttons=="undefined"&&(o.buttons=r.touches.length?1:0),typeof o.isPrimary=="undefined"&&(o.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof o.width=="undefined"&&(o.width=o.radiusX||1),typeof o.height=="undefined"&&(o.height=o.radiusY||1),typeof o.tiltX=="undefined"&&(o.tiltX=0),typeof o.tiltY=="undefined"&&(o.tiltY=0),typeof o.pointerType=="undefined"&&(o.pointerType="touch"),typeof o.pointerId=="undefined"&&(o.pointerId=o.identifier||0),typeof o.pressure=="undefined"&&(o.pressure=o.force||.5),typeof o.twist=="undefined"&&(o.twist=0),typeof o.tangentialPressure=="undefined"&&(o.tangentialPressure=0),typeof o.layerX=="undefined"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY=="undefined"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,i.push(o)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var a=r;typeof a.isPrimary=="undefined"&&(a.isPrimary=!0),typeof a.width=="undefined"&&(a.width=1),typeof a.height=="undefined"&&(a.height=1),typeof a.tiltX=="undefined"&&(a.tiltX=0),typeof a.tiltY=="undefined"&&(a.tiltY=0),typeof a.pointerType=="undefined"&&(a.pointerType="mouse"),typeof a.pointerId=="undefined"&&(a.pointerId=MOUSE_POINTER_ID),typeof a.pressure=="undefined"&&(a.pressure=.5),typeof a.twist=="undefined"&&(a.twist=0),typeof a.tangentialPressure=="undefined"&&(a.tangentialPressure=0),a.isNormalized=!0,i.push(a)}else i.push(r);return i},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(EventEmitter);/*!
 * @pixi/runner - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Runner=function(){function e(t){this.items=[],this._name=t,this._aliasCount=0}return e.prototype.emit=function(t,r,i,n,s,o,a,u){if(arguments.length>8)throw new Error("max arguments reached");var h=this,l=h.name,f=h.items;this._aliasCount++;for(var c=0,d=f.length;c<d;c++)f[c][l](t,r,i,n,s,o,a,u);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){var r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},e.prototype.contains=function(t){return this.items.indexOf(t)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});/*!
 * @pixi/core - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.PREFER_ENV=isMobile.any?ENV$3.WEBGL:ENV$3.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;var INSTALLED=[];function autoDetectResource(e,t){if(!e)return null;var r="";if(typeof e=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(r=i[1].toLowerCase())}for(var n=INSTALLED.length-1;n>=0;--n){var s=INSTALLED[n];if(s.test&&s.test(e,r))return new s(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$h=function(e,t){return extendStatics$h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$h(e,t)};function __extends$h(e,t){extendStatics$h(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return __assign=Object.assign||function(t){for(var r=arguments,i,n=1,s=arguments.length;n<s;n++){i=r[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},__assign.apply(this,arguments)};function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&(r[i[n]]=e[i[n]]);return r}var Resource=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}return e.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},e.prototype.resize=function(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(t,r,i){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(t,r){return!1},e}(),BufferResource=function(e){__extends$h(t,e);function t(r,i){var n=this,s=i||{},o=s.width,a=s.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return n=e.call(this,o,a)||this,n.data=r,n}return t.prototype.upload=function(r,i,n){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ALPHA_MODES$3.UNPACK);var o=i.realWidth,a=i.realHeight;return n.width===o&&n.height===a?s.texSubImage2D(i.target,0,0,0,o,a,i.format,n.type,this.data):(n.width=o,n.height=a,s.texImage2D(i.target,0,n.internalFormat,o,a,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},t}(Resource),defaultBufferOptions={scaleMode:SCALE_MODES$3.NEAREST,format:FORMATS$3.RGBA,alphaMode:ALPHA_MODES$3.NPM},BaseTexture=function(e){__extends$h(t,e);function t(r,i){r===void 0&&(r=null),i===void 0&&(i=null);var n=e.call(this)||this;i=i||{};var s=i.alphaMode,o=i.mipmap,a=i.anisotropicLevel,u=i.scaleMode,h=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,m=i.resolution,_=i.resourceOptions;return r&&!(r instanceof Resource)&&(r=autoDetectResource(r,_),r.internal=!0),n.resolution=m||settings.RESOLUTION,n.width=Math.round((h||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=o!==void 0?o:settings.MIPMAP_TEXTURES,n.anisotropicLevel=a!==void 0?a:settings.ANISOTROPIC_LEVEL,n._wrapMode=f||settings.WRAP_MODE,n._scaleMode=u!==void 0?u:settings.SCALE_MODE,n.format=c||FORMATS$3.RGBA,n.type=d||TYPES$3.UNSIGNED_BYTE,n.target=v||TARGETS$3.TEXTURE_2D,n.alphaMode=s!==void 0?s:ALPHA_MODES$3.UNPACK,n.uid=uid(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=h>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(r),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(r,i){var n;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(r,i,n){return n=n||this.resolution,this.setRealSize(r*n,i*n,n)},t.prototype.setRealSize=function(r,i,n){return this.resolution=n||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},t.prototype.setResolution=function(r){var i=this.resolution;return i===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*i)/r,this.height=Math.round(this.height*i)/r,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(r){this.emit("error",this,r)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(r,i,n){n===void 0&&(n=settings.STRICT_TEXTURE_CACHE);var s=typeof r=="string",o=null;if(s)o=r;else{if(!r._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";r._pixiId=a+"_"+uid()}o=r._pixiId}var u=BaseTextureCache[o];if(s&&n&&!u)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return u||(u=new t(r,i),u.cacheId=o,t.addToCache(u,o)),u},t.fromBuffer=function(r,i,n,s){r=r||new Float32Array(i*n*4);var o=new BufferResource(r,{width:i,height:n}),a=r instanceof Float32Array?TYPES$3.FLOAT:TYPES$3.UNSIGNED_BYTE;return new t(o,Object.assign(defaultBufferOptions,s||{width:i,height:n,type:a}))},t.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),BaseTextureCache[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),BaseTextureCache[i]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var i=BaseTextureCache[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete BaseTextureCache[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)delete BaseTextureCache[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},t._globalBatch=0,t}(EventEmitter),AbstractMultiResource=function(e){__extends$h(t,e);function t(r,i){var n=this,s=i||{},o=s.width,a=s.height;n=e.call(this,o,a)||this,n.items=[],n.itemDirtyIds=[];for(var u=0;u<r;u++){var h=new BaseTexture;n.items.push(h),n.itemDirtyIds.push(-2)}return n.length=r,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(r,i){for(var n=0;n<this.length;n++)!r[n]||(r[n].castToBaseTexture?this.addBaseTextureAt(r[n].castToBaseTexture(),n):r[n]instanceof Resource?this.addResourceAt(r[n],n):this.addResourceAt(autoDetectResource(r[n],i),n))},t.prototype.dispose=function(){for(var r=0,i=this.length;r<i;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(r,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[i].setResource(r),this},t.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=r,this.items[i].on("update",r.update,r)},t.prototype.unbind=function(r){e.prototype.unbind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",r.update,r)},t.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=r.items[0],o=s.realWidth,a=s.realHeight;return r.resize(o,a),Promise.resolve(r)}),this._load},t}(Resource),ArrayResource=function(e){__extends$h(t,e);function t(r,i){var n=this,s=i||{},o=s.width,a=s.height,u,h;return Array.isArray(r)?(u=r,h=r.length):h=r,n=e.call(this,h,{width:o,height:a})||this,u&&n.initFromArray(u,i),n}return t.prototype.addBaseTextureAt=function(r,i){if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=TARGETS$3.TEXTURE_2D_ARRAY},t.prototype.upload=function(r,i,n){var s=this,o=s.length,a=s.itemDirtyIds,u=s.items,h=r.gl;n.dirtyId<0&&h.texImage3D(h.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,o,0,i.format,n.type,null);for(var l=0;l<o;l++){var f=u[l];a[l]<f.dirtyId&&(a[l]=f.dirtyId,f.valid&&h.texSubImage3D(h.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(AbstractMultiResource),BaseImageResource=function(e){__extends$h(t,e);function t(r){var i=this,n=r,s=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return i=e.call(this,s,o)||this,i.source=r,i.noSubImage=!1,i}return t.crossOrigin=function(r,i,n){n===void 0&&i.indexOf("data:")!==0?r.crossOrigin=determineCrossOrigin(i):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(r,i,n,s){var o=r.gl,a=i.realWidth,u=i.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ALPHA_MODES$3.UNPACK),!this.noSubImage&&i.target===o.TEXTURE_2D&&n.width===a&&n.height===u?o.texSubImage2D(o.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=a,n.height=u,o.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var r=this.source,i=r.naturalWidth||r.videoWidth||r.width,n=r.naturalHeight||r.videoHeight||r.height;this.resize(i,n),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Resource),CanvasResource=function(e){__extends$h(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){var i=globalThis.OffscreenCanvas;return i&&r instanceof i?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},t}(BaseImageResource),CubeResource=function(e){__extends$h(t,e);function t(r,i){var n=this,s=i||{},o=s.width,a=s.height,u=s.autoLoad,h=s.linkBaseTexture;if(r&&r.length!==t.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");n=e.call(this,6,{width:o,height:a})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=TARGETS$3.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=h!==!1,r&&n.initFromArray(r,i),u!==!1&&n.load(),n}return t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=TARGETS$3.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(r,i,n){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=TARGETS$3.TEXTURE_CUBE_MAP_POSITIVE_X+i,r.parentTextureArray=this.baseTexture,this.items[i]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[i]=r,this},t.prototype.upload=function(r,i,n){for(var s=this.itemDirtyIds,o=0;o<t.SIDES;o++){var a=this.items[o];s[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(r,a,n),s[o]=a.dirtyId):s[o]<-1&&(r.gl.texImage2D(a.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[o]=-1))}return!0},t.test=function(r){return Array.isArray(r)&&r.length===t.SIDES},t.SIDES=6,t}(AbstractMultiResource),ImageResource=function(e){__extends$h(t,e);function t(r,i){var n=this;if(i=i||{},!(r instanceof HTMLImageElement)){var s=new Image;BaseImageResource.crossOrigin(s,r,i.crossorigin),s.src=r,r=s}return n=e.call(this,r)||this,!r.complete&&!!n._width&&!!n._height&&(n._width=0,n._height=0),n.url=r.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(r){var i=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(n,s){var o=i.source;i.url=o.src;var a=function(){i.destroyed||(o.onload=null,o.onerror=null,i.resize(o.width,o.height),i._load=null,i.createBitmap?n(i.process()):n(i))};o.complete&&o.src?a():(o.onload=a,o.onerror=function(u){s(u),i.onError.emit(u)})}),this._load)},t.prototype.process=function(){var r=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return n(o,0,0,i.width,i.height,{premultiplyAlpha:r.alphaMode===ALPHA_MODES$3.UNPACK?"premultiply":"none"})}).then(function(o){return r.destroyed?Promise.reject():(r.bitmap=o,r.update(),r._process=null,Promise.resolve(r))}),this._process},t.prototype.upload=function(r,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,r,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,r,i,n,this.bitmap),!this.preserveBitmap){var s=!0,o=i._glTextures;for(var a in o){var u=o[a];if(u!==n&&u.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},t}(BaseImageResource),SVGResource=function(e){__extends$h(t,e);function t(r,i){var n=this;return i=i||{},n=e.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=r,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(i){if(r._resolve=function(){r.resize(r.source.width,r.source.height),i(r)},t.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var r=this,i=new Image;BaseImageResource.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){!r._resolve||(i.onerror=null,r.onError.emit(n))},i.onload=function(){if(!!r._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=n*r.scale,a=s*r.scale;(r._overrideWidth||r._overrideHeight)&&(o=r._overrideWidth||r._overrideHeight/s*n,a=r._overrideHeight||r._overrideWidth/n*s),o=Math.round(o),a=Math.round(a);var u=r.source;u.width=o,u.height=a,u._pixiId="canvas_"+uid(),u.getContext("2d").drawImage(i,0,0,n,s,0,0,o,a),r._resolve(),r._resolve=null}}},t.getSize=function(r){var i=t.SVG_SIZE.exec(r),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(r,i){return i==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&t.SVG_XML.test(r)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(BaseImageResource),VideoResource=function(e){__extends$h(t,e);function t(r,i){var n=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var o=r[0].src||r[0];BaseImageResource.crossOrigin(s,o,i.crossorigin);for(var a=0;a<r.length;++a){var u=document.createElement("source"),h=r[a],l=h.src,f=h.mime;l=l||r[a];var c=l.split("?").shift().toLowerCase(),d=c.slice(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,u.src=l,u.type=f,s.appendChild(u)}r=s}return n=e.call(this,r)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(r){if(!this.destroyed){var i=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){r.valid?n(r):(r._resolve=n,i.load())}),this._load},t.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},t.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},t.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(r.videoWidth,r.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),t.test=function(r,i){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(BaseImageResource),ImageBitmapResource=function(e){__extends$h(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){return!!globalThis.createImageBitmap&&r instanceof ImageBitmap},t}(BaseImageResource);INSTALLED.push(ImageResource,ImageBitmapResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);var _resources={__proto__:null,Resource,BaseImageResource,INSTALLED,autoDetectResource,AbstractMultiResource,ArrayResource,BufferResource,CanvasResource,CubeResource,ImageResource,SVGResource,VideoResource,ImageBitmapResource},DepthResource=function(e){__extends$h(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.upload=function(r,i,n){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ALPHA_MODES$3.UNPACK);var o=i.realWidth,a=i.realHeight;return n.width===o&&n.height===a?s.texSubImage2D(i.target,0,0,0,o,a,i.format,n.type,this.data):(n.width=o,n.height=a,s.texImage2D(i.target,0,n.internalFormat,o,a,0,i.format,n.type,this.data)),!0},t}(BufferResource),Framebuffer=function(){function e(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY$3.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(t,r){return t===void 0&&(t=0),this.colorTextures[t]=r||new BaseTexture(null,{scaleMode:SCALE_MODES$3.NEAREST,resolution:1,mipmap:MIPMAP_MODES$3.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(t){return this.depthTexture=t||new BaseTexture(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES$3.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES$3.OFF,format:FORMATS$3.DEPTH_COMPONENT,type:TYPES$3.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,r/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,r/s)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),BaseRenderTexture=function(e){__extends$h(t,e);function t(r){r===void 0&&(r={});var i=this;if(typeof r=="number"){var n=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];r={width:n,height:s,scaleMode:o,resolution:a}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:MSAA_QUALITY$3.NONE,i=e.call(this,null,r)||this,i.mipmap=MIPMAP_MODES$3.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Framebuffer(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=r.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(r,i){this.framebuffer.resize(r*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(BaseTexture),TextureUvs=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(t,r,i){var n=r.width,s=r.height;if(i){var o=t.width/2/n,a=t.height/2/s,u=t.x/n+o,h=t.y/s+a;i=groupD8.add(i,groupD8.NW),this.x0=u+o*groupD8.uX(i),this.y0=h+a*groupD8.uY(i),i=groupD8.add(i,2),this.x1=u+o*groupD8.uX(i),this.y1=h+a*groupD8.uY(i),i=groupD8.add(i,2),this.x2=u+o*groupD8.uX(i),this.y2=h+a*groupD8.uY(i),i=groupD8.add(i,2),this.x3=u+o*groupD8.uX(i),this.y3=h+a*groupD8.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),DEFAULT_UVS=new TextureUvs,Texture=function(e){__extends$h(t,e);function t(r,i,n,s,o,a){var u=e.call(this)||this;if(u.noFrame=!1,i||(u.noFrame=!0,i=new Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),u.baseTexture=r,u._frame=i,u.trim=s,u.valid=!1,u._uvs=DEFAULT_UVS,u.uvMatrix=null,u.orig=n||i,u._rotate=Number(o||0),o===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=a?new Point(a.x,a.y):new Point(0,0),u._updateID=0,u.textureCacheIds=[],r.valid?u.noFrame?r.valid&&u.onBaseTextureUpdated(r):u.frame=i:r.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&r.on("update",u.onBaseTextureUpdated,u),u}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(r){if(this.baseTexture){if(r){var i=this.baseTexture.resource;i&&i.url&&TextureCache[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var r=this._frame.clone(),i=this._frame===this.orig?r:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&r,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=r),n},t.prototype.updateUvs=function(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(r,i,n){i===void 0&&(i={}),n===void 0&&(n=settings.STRICT_TEXTURE_CACHE);var s=typeof r=="string",o=null;if(s)o=r;else if(r instanceof BaseTexture){if(!r.cacheId){var a=i&&i.pixiIdPrefix||"pixiid";r.cacheId=a+"-"+uid(),BaseTexture.addToCache(r,r.cacheId)}o=r.cacheId}else{if(!r._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";r._pixiId=a+"_"+uid()}o=r._pixiId}var u=TextureCache[o];if(s&&n&&!u)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!u&&!(r instanceof BaseTexture)?(i.resolution||(i.resolution=getResolutionOfUrl(r)),u=new t(new BaseTexture(r,i)),u.baseTexture.cacheId=o,BaseTexture.addToCache(u.baseTexture,o),t.addToCache(u,o)):!u&&r instanceof BaseTexture&&(u=new t(r),t.addToCache(u,o)),u},t.fromURL=function(r,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(r,Object.assign({resourceOptions:n},i),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(r,i,n,s){return new t(BaseTexture.fromBuffer(r,i,n,s))},t.fromLoader=function(r,i,n,s){var o=new BaseTexture(r,Object.assign({scaleMode:settings.SCALE_MODE,resolution:getResolutionOfUrl(i)},s)),a=o.resource;a instanceof ImageResource&&(a.url=i);var u=new t(o);return n||(n=i),BaseTexture.addToCache(u.baseTexture,n),t.addToCache(u,n),n!==i&&(BaseTexture.addToCache(u.baseTexture,i),t.addToCache(u,i)),u.baseTexture.valid?Promise.resolve(u):new Promise(function(h){u.baseTexture.once("loaded",function(){return h(u)})})},t.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),TextureCache[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),TextureCache[i]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var i=TextureCache[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete TextureCache[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)TextureCache[r.textureCacheIds[s]]===r&&delete TextureCache[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var i=r.x,n=r.y,s=r.width,o=r.height,a=i+s>this.baseTexture.width,u=n+o>this.baseTexture.height;if(a||u){var h=a&&u?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+h+" "+f))}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(EventEmitter);function createWhiteTexture(){var e=document.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Texture(new BaseTexture(new CanvasResource(e)))}function removeAllHandlers(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}Texture.EMPTY=new Texture(new BaseTexture);removeAllHandlers(Texture.EMPTY);removeAllHandlers(Texture.EMPTY.baseTexture);Texture.WHITE=createWhiteTexture();removeAllHandlers(Texture.WHITE);removeAllHandlers(Texture.WHITE.baseTexture);var RenderTexture=function(e){__extends$h(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,o=Math.round(r*s)/s,a=Math.round(i*s)/s;this.valid=o>0&&a>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=a,n&&this.baseTexture.resize(o,a),this.updateUvs()},t.prototype.setResolution=function(r){var i=this.baseTexture;i.resolution!==r&&(i.setResolution(r),this.resize(i.width,i.height,!1))},t.create=function(r){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof r=="number"&&(deprecation("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new BaseRenderTexture(r))},t}(Texture),RenderTexturePool=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(t,r,i){i===void 0&&(i=MSAA_QUALITY$3.NONE);var n=new BaseRenderTexture(Object.assign({width:t,height:r,resolution:1,multisample:i},this.textureOptions));return new RenderTexture(n)},e.prototype.getOptimalTexture=function(t,r,i,n){i===void 0&&(i=1),n===void 0&&(n=MSAA_QUALITY$3.NONE);var s;t=Math.ceil(t*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=nextPow2(t),r=nextPow2(r),s=((t&65535)<<16|r&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var o=this.texturePool[s].pop();return o||(o=this.createTexture(t,r,n)),o.filterPoolKey=s,o.setResolution(i),o},e.prototype.getFilterTexture=function(t,r,i){var n=this.getOptimalTexture(t.width,t.height,r||t.resolution,i||MSAA_QUALITY$3.NONE);return n.filterFrame=t.filterFrame,n},e.prototype.returnTexture=function(t){var r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=t!==!1,t)for(var r in this.texturePool){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var r in this.texturePool)if(Number(r)<0){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY=-1,e}(),Attribute=function(){function e(t,r,i,n,s,o,a){r===void 0&&(r=0),i===void 0&&(i=!1),n===void 0&&(n=TYPES$3.FLOAT),this.buffer=t,this.size=r,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,i,n,s){return new e(t,r,i,n,s)},e}(),UID=0,Buffer=function(){function e(t,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=UID++,this.disposeRunner=new Runner("disposeBuffer")}return e.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===BUFFER_TYPE$3.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?BUFFER_TYPE$3.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE$3.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),map={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(e,t){for(var r=0,i=0,n={},s=0;s<e.length;s++)i+=t[s],r+=e[s].length;for(var o=new ArrayBuffer(r*4),a=null,u=0,s=0;s<e.length;s++){var h=t[s],l=e[s],f=getBufferType(l);n[f]||(n[f]=new map[f](o)),a=n[f];for(var c=0;c<l.length;c++){var d=(c/h|0)*i+u,v=c%h;a[d+v]=l[c]}u+=h}return new Float32Array(o)}var byteSizeMap={5126:4,5123:2,5121:1},UID$1=0,map$1={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Geometry=function(){function e(t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=UID$1++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,r,i,n,s,o,a,u){if(i===void 0&&(i=0),n===void 0&&(n=!1),u===void 0&&(u=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Buffer||(r instanceof Array&&(r=new Float32Array(r)),r=new Buffer(r));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],r,i,n,s);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[t]=new Attribute(f,i,n,s,o,a,u),this.instanced=this.instanced||u,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(t){return t instanceof Buffer||(t instanceof Array&&(t=new Uint16Array(t)),t=new Buffer(t)),t.type=BUFFER_TYPE$3.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],r=[],i=new Buffer,n;for(n in this.attributes){var s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),r.push(s.size*byteSizeMap[s.type]/4),s.buffer=0}for(i.data=interleaveTypedArrays(t,r),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var r=this.attributes[t],i=this.buffers[r.buffer];return i.data.length/(r.stride/4||r.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,r=0;r<this.buffers.length;r++)t.buffers[r]=new Buffer(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];t.attributes[r]=new Attribute(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=BUFFER_TYPE$3.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var r=new e,i=[],n=[],s=[],o,a=0;a<t.length;a++){o=t[a];for(var u=0;u<o.buffers.length;u++)n[u]=n[u]||0,n[u]+=o.buffers[u].data.length,s[u]=0}for(var a=0;a<o.buffers.length;a++)i[a]=new map$1[getBufferType(o.buffers[a].data)](n[a]),r.buffers[a]=new Buffer(i[a]);for(var a=0;a<t.length;a++){o=t[a];for(var u=0;u<o.buffers.length;u++)i[u].set(o.buffers[u].data,s[u]),s[u]+=o.buffers[u].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=BUFFER_TYPE$3.ELEMENT_ARRAY_BUFFER;for(var h=0,l=0,f=0,c=0,a=0;a<o.buffers.length;a++)if(o.buffers[a]!==o.indexBuffer){c=a;break}for(var a in o.attributes){var d=o.attributes[a];(d.buffer|0)===c&&(l+=d.size*byteSizeMap[d.type]/4)}for(var a=0;a<t.length;a++){for(var v=t[a].indexBuffer.data,u=0;u<v.length;u++)r.indexBuffer.data[u+f]+=h;h+=t[a].buffers[c].data.length/l,f+=v.length}}return r},e}(),Quad=function(e){__extends$h(t,e);function t(){var r=e.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return t}(Geometry),QuadUv=function(e){__extends$h(t,e);function t(){var r=e.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Buffer(r.vertices),r.uvBuffer=new Buffer(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return t.prototype.map=function(r,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/r.width,this.uvs[3]=s,this.uvs[4]=n+i.width/r.width,this.uvs[5]=s+i.height/r.height,this.uvs[6]=n,this.uvs[7]=s+i.height/r.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Geometry),UID$2=0,UniformGroup=function(){function e(t,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$2++,this.static=!!r,this.ubo=!!i,t instanceof Buffer?(this.buffer=t,this.buffer.type=BUFFER_TYPE$3.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE$3.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,i){if(!this.ubo)this.uniforms[t]=new e(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(t,r,i){return new e(t,r,i)},e.uboFrom=function(t,r){return new e(t,r!=null?r:!0,!0)},e}(),FilterState=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY$3.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),tempPoints=[new Point,new Point,new Point,new Point],tempMatrix=new Matrix,FilterSystem=function(){function e(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(t,r){for(var i,n,s=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new FilterState,u=this.renderer.renderTexture,h=r[0].resolution,l=r[0].multisample,f=r[0].padding,c=r[0].autoFit,d=(i=r[0].legacy)!==null&&i!==void 0?i:!0,v=1;v<r.length;v++){var m=r[v];h=Math.min(h,m.resolution),l=Math.min(l,m.multisample),f=this.useMaxPadding?Math.max(f,m.padding):f+m.padding,c=c&&m.autoFit,d=d||((n=m.legacy)!==null&&n!==void 0?n:!0)}if(o.length===1&&(this.defaultFilterStack[0].renderTexture=u.current),o.push(a),a.resolution=h,a.multisample=l,a.legacy=d,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(f),c){var _=this.tempRect.copyFrom(u.sourceFrame);s.projection.transform&&this.transformAABB(tempMatrix.copyFrom(s.projection.transform).invert(),_),a.sourceFrame.fit(_)}this.roundFrame(a.sourceFrame,u.current?u.current.resolution:s.resolution,u.sourceFrame,u.destinationFrame,s.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,h,l),a.filters=r,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var y=this.tempRect;y.x=0,y.y=0,y.width=a.sourceFrame.width,y.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(u.sourceFrame),a.bindingDestinationFrame.copyFrom(u.destinationFrame),a.transform=s.projection.transform,s.projection.transform=null,u.bind(a.renderTexture,a.sourceFrame,y),s.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,r=t.pop(),i=r.filters;this.activeState=r;var n=this.globalUniforms.uniforms;n.outputFrame=r.sourceFrame,n.resolution=r.resolution;var s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){var u=n.filterArea;u[0]=r.destinationFrame.width,u[1]=r.destinationFrame.height,u[2]=r.sourceFrame.x,u[3]=r.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,h.renderTexture,CLEAR_MODES$3.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var l=r.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,r.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,r.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,CLEAR_MODES$3.CLEAR,r);var d=l;l=f,f=d}i[c].apply(this,l,h.renderTexture,CLEAR_MODES$3.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(t,r){r===void 0&&(r=CLEAR_MODES$3.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=s.stateId&1||this.forceClear;(r===CLEAR_MODES$3.CLEAR||r===CLEAR_MODES$3.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,r,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(DRAW_MODES$3.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(DRAW_MODES$3.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,r){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,o=r._texture.orig,a=t.set(s.width,0,0,s.height,n.x,n.y),u=r.worldTransform.copyTo(Matrix.TEMP_MATRIX);return u.invert(),a.prepend(u),a.scale(1/o.width,1/o.height),a.translate(r.anchor.x,r.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,r,i,n){return i===void 0&&(i=1),n===void 0&&(n=MSAA_QUALITY$3.NONE),this.texturePool.getOptimalTexture(t,r,i,n)},e.prototype.getFilterTexture=function(t,r,i){if(typeof t=="number"){var n=t;t=r,r=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,i||MSAA_QUALITY$3.NONE);return s.filterFrame=t.filterFrame,s},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,r){var i=tempPoints[0],n=tempPoints[1],s=tempPoints[2],o=tempPoints[3];i.set(r.left,r.top),n.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(o,o);var a=Math.min(i.x,n.x,s.x,o.x),u=Math.min(i.y,n.y,s.y,o.y),h=Math.max(i.x,n.x,s.x,o.x),l=Math.max(i.y,n.y,s.y,o.y);r.x=a,r.y=u,r.width=h-a,r.height=l-u},e.prototype.roundFrame=function(t,r,i,n,s){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(s){var o=s.a,a=s.b,u=s.c,h=s.d;if((Math.abs(a)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}s=s?tempMatrix.copyFrom(s):tempMatrix.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(r),this.transformAABB(s.invert(),t)}},e}(),ObjectRenderer=function(){function e(t){this.renderer=t}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(t){},e}(),BatchSystem=function(){function e(t){this.renderer=t,this.emptyRenderer=new ObjectRenderer(t),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,r){for(var i=this.renderer.texture.boundTextures,n=r-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},e.prototype.boundArray=function(t,r,i,n){for(var s=t.elements,o=t.ids,a=t.count,u=0,h=0;h<a;h++){var l=s[h],f=l._batchLocation;if(f>=0&&f<n&&r[f]===l){o[h]=f;continue}for(;u<n;){var c=r[u];if(c&&c._batchEnabled===i&&c._batchLocation===u){u++;continue}o[h]=u,l._batchLocation=u,r[u]=l;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),CONTEXT_UID_COUNTER=0,ContextSystem=function(){function e(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var r=this.createContext(this.renderer.view,t);this.initFromContext(r)},e.prototype.createContext=function(t,r){var i;if(settings.PREFER_ENV>=ENV$3.WEBGL2&&(i=t.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,r={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var r=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),GLFramebuffer=function(){function e(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY$3.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),tempRectangle=new Rectangle,FramebufferSystem=function(){function e(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV$3.WEBGL_LEGACY&&(r=null,i=null),r?t.drawBuffers=function(n){return r.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,r,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){var u=r.width>>i,h=r.height>>i,l=u/r.width;this.setViewport(r.x*l,r.y*l,u,h)}else{var u=t.width>>i,h=t.height>>i;this.setViewport(0,0,u,h)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,r,i,n){var s=this.viewport;t=Math.round(t),r=Math.round(r),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==r)&&(s.x=t,s.y=r,s.width=i,s.height=n,this.gl.viewport(t,r,i,n))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,r,i,n,s){s===void 0&&(s=BUFFER_BITS$3.COLOR|BUFFER_BITS$3.DEPTH);var o=this.gl;o.clearColor(t,r,i,n),o.clear(s)},e.prototype.initFramebuffer=function(t){var r=this.gl,i=new GLFramebuffer(r.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},e.prototype.resizeFramebuffer=function(t){var r=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,t.width,t.height)),i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;r.drawBuffers||(s=Math.min(s,1));for(var o=0;o<s;o++){var a=n[o],u=a.parentTextureArray||a;this.renderer.texture.bind(u,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t,r){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var a=[],u=0;u<o;u++){var h=s[u],l=h.parentTextureArray||h;this.renderer.texture.bind(l,0),!(u===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+u,h.target,l._glTextures[this.CONTEXT_UID].texture,r),a.push(i.COLOR_ATTACHMENT0+u))}if(a.length>1&&i.drawBuffers(a),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,r)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},e.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},e.prototype.detectSamples=function(t){var r=this.msaaSamples,i=MSAA_QUALITY$3.NONE;if(t<=1||r===null)return i;for(var n=0;n<r.length;n++)if(r[n]<=t){i=r[n];break}return i===1&&(i=MSAA_QUALITY$3.NONE),i},e.prototype.blit=function(t,r,i){var n=this,s=n.current,o=n.renderer,a=n.gl,u=n.CONTEXT_UID;if(o.context.webGLVersion===2&&!!s){var h=s.glFramebuffers[u];if(!!h){if(!t){if(!h.msaaBuffer)return;var l=s.colorTextures[0];if(!l)return;h.blitFramebuffer||(h.blitFramebuffer=new Framebuffer(s.width,s.height),h.blitFramebuffer.addColorTexture(0,l)),t=h.blitFramebuffer,t.colorTextures[0]!==l&&(t.colorTextures[0]=l,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}r||(r=tempRectangle,r.width=s.width,r.height=s.height),i||(i=r);var f=r.width===i.width&&r.height===i.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,h.framebuffer),a.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,f?a.NEAREST:a.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,r){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!!i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),r||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(t){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(!!t){var r=t.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),r.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle},e.prototype.destroy=function(){this.renderer=null},e}(),byteSizeMap$1={5126:4,5123:2,5121:1},GeometrySystem=function(){function e(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV$3.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,o){return n.vertexAttribDivisorANGLE(s,o)},t.drawElementsInstanced=function(s,o,a,u,h){return n.drawElementsInstancedANGLE(s,o,a,u,h)},t.drawArraysInstanced=function(s,o,a,u){return n.drawArraysInstancedANGLE(s,o,a,u)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,r){r=r||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var o=n[r.program.id]||this.initGeometryVao(t,r,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,r.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,r=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];r.update(n)}},e.prototype.checkCompatibility=function(t,r){var i=t.attributes,n=r.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},e.prototype.getSignature=function(t,r){var i=t.attributes,n=r.attributeData,s=["g",t.id];for(var o in i)n[o]&&s.push(o,n[o].location);return s.join("-")},e.prototype.initGeometryVao=function(t,r,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);var u=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID],l=h[u];if(l)return h[a.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var m in f)d[m]=0,v[m]=0;for(var m in c)!c[m].size&&a.attributeData[m]?c[m].size=a.attributeData[m].size:c[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[m].buffer]+=c[m].size*byteSizeMap$1[c[m].type];for(var m in c){var _=c[m],y=_.size;_.stride===void 0&&(d[_.buffer]===y*byteSizeMap$1[_.type]?_.stride=0:_.stride=d[_.buffer]),_.start===void 0&&(_.start=v[_.buffer],v[_.buffer]+=y*byteSizeMap$1[_.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var b=0;b<f.length;b++){var I=f[b];o.bind(I),i&&I._glBuffers[s].refCount++}return this.activateVao(t,a),this._activeVao=l,h[a.id]=l,h[u]=l,l},e.prototype.disposeGeometry=function(t,r){var i;if(!!this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=t.buffers,a=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(a)for(var u=0;u<o.length;u++){var h=o[u]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&a.dispose(o[u],r))}if(!r){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],t)},e.prototype.activateVao=function(t,r){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var u=null;for(var h in a){var l=a[h],f=o[l.buffer],c=f._glBuffers[n];if(r.attributeData[h]){u!==c&&(s.bind(f),u=c);var d=r.attributeData[h].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,r,i,n){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,u=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,r||o.indexBuffer.data.length,u,(i||0)*a,n||1):s.drawElements(t,r||o.indexBuffer.data.length,u,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,i,r||o.getSize(),n||1):s.drawArrays(t,i,r||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),MaskData=function(){function e(t){t===void 0&&(t=null),this.type=MASK_TYPES$3.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=settings.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES$3.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function compileShader(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}function logPrettyShaderError(e,t){var r=e.getShaderSource(t).split(`
`).map(function(h,l){return l+": "+h}),i=e.getShaderInfoLog(t),n=i.split(`
`),s={},o=n.map(function(h){return parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(h){return h&&!s[h]?(s[h]=!0,!0):!1}),a=[""];o.forEach(function(h){r[h-1]="%c"+r[h-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var u=r.join(`
`);a[0]=u,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function logProgramError(e,t,r,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||logPrettyShaderError(e,r),e.getShaderParameter(i,e.COMPILE_STATUS)||logPrettyShaderError(e,i),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}function booleanArray(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function defaultValue(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return booleanArray(2*t);case"bvec3":return booleanArray(3*t);case"bvec4":return booleanArray(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var unknownContext={},context=unknownContext;function getTestContext(){if(context===unknownContext||context&&context.isContextLost()){var e=document.createElement("canvas"),t=void 0;settings.PREFER_ENV>=ENV$3.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),context=t}return context}var maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION$3.MEDIUM;var e=getTestContext();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);maxFragmentPrecision=t.precision?PRECISION$3.HIGH:PRECISION$3.MEDIUM}}return maxFragmentPrecision}function setPrecision(e,t,r){if(e.substring(0,9)!=="precision"){var i=t;return t===PRECISION$3.HIGH&&r!==PRECISION$3.HIGH&&(i=PRECISION$3.MEDIUM),"precision "+i+` float;
`+e}else if(r!==PRECISION$3.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(e){return GLSL_TO_SIZE[e]}var GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(e,t){if(!GL_TABLE){var r=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var i=0;i<r.length;++i){var n=r[i];GL_TABLE[e[n]]=GL_TO_GLSL_TYPES[n]}}return GL_TABLE[t]}var uniformParsers=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&t.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&t.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&t.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(e,t){var r,i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var n in e.uniforms){var s=t[n];if(!s){!((r=e.uniforms[n])===null||r===void 0)&&r.group&&(e.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+n+", '"+n+`');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.`+n+`, syncData);
                    `));continue}for(var o=e.uniforms[n],a=!1,u=0;u<uniformParsers.length;u++)if(uniformParsers[u].test(s,o)){i.push(uniformParsers[u].code(n,o)),a=!0;break}if(!a){var h=s.size===1?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS,l=h[s.type].replace("location",'ud["'+n+'"].location');i.push(`
            cu = ud["`+n+`"];
            cv = cu.value;
            v = uv["`+n+`"];
            `+l+";")}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(e){for(var t="",r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+="if(test == "+r+".0){}");return t}function checkMaxIfStatementsInShader(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var i=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(e));if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}var unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");unsafeEval=e({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,UID$3=0,nameCache={},Program=function(){function e(t,r,i){i===void 0&&(i="pixi-shader"),this.id=UID$3++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),nameCache[i]?(nameCache[i]++,i+="-"+nameCache[i]):nameCache[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,settings.PRECISION_VERTEX,PRECISION$3.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,settings.PRECISION_FRAGMENT,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return defaultVertex},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return defaultFragment},enumerable:!1,configurable:!0}),e.from=function(t,r,i){var n=t+r,s=ProgramCache[n];return s||(ProgramCache[n]=s=new e(t,r,i)),s},e}(),Shader=function(){function e(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof UniformGroup?this.uniformGroup=r:this.uniformGroup=new UniformGroup(r):this.uniformGroup=new UniformGroup({})}return e.prototype.checkUniformExists=function(t,r){if(r.uniforms[t])return!0;for(var i in r.uniforms){var n=r.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,r,i){var n=Program.from(t,r);return new e(n,i)},e}(),BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,State=function(){function e(){this.data=0,this.blendMode=BLEND_MODES$3.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<BLEND)},set:function(t){!!(this.data&1<<BLEND)!==t&&(this.data^=1<<BLEND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<OFFSET)},set:function(t){!!(this.data&1<<OFFSET)!==t&&(this.data^=1<<OFFSET)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<CULLING)},set:function(t){!!(this.data&1<<CULLING)!==t&&(this.data^=1<<CULLING)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<DEPTH_TEST)},set:function(t){!!(this.data&1<<DEPTH_TEST)!==t&&(this.data^=1<<DEPTH_TEST)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<DEPTH_MASK)},set:function(t){!!(this.data&1<<DEPTH_MASK)!==t&&(this.data^=1<<DEPTH_MASK)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<WINDING)},set:function(t){!!(this.data&1<<WINDING)!==t&&(this.data^=1<<WINDING)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==BLEND_MODES$3.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultFragment$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Filter=function(e){__extends$h(t,e);function t(r,i,n){var s=this,o=Program.from(r||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=e.call(this,o,n)||this,s.padding=0,s.resolution=settings.FILTER_RESOLUTION,s.multisample=settings.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new State,s}return t.prototype.apply=function(r,i,n,s,o){r.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return defaultVertex$1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return defaultFragment$1},enumerable:!1,configurable:!0}),t}(Shader),vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,tempMat$1=new Matrix,TextureMatrix=function(){function e(t,r){this._texture=t,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r=="undefined"?.5:r,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(t,r){r===void 0&&(r=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],o=t[n+1];r[n]=s*i.a+o*i.c+i.tx,r[n+1]=s*i.b+o*i.d+i.ty}return r},e.prototype.update=function(t){var r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=r.orig,s=r.trim;s&&(tempMat$1.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(tempMat$1));var o=r.baseTexture,a=this.uClampFrame,u=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(r._frame.x+u+h)/o.width,a[1]=(r._frame.y+u+h)/o.height,a[2]=(r._frame.x+r._frame.width-u+h)/o.width,a[3]=(r._frame.y+r._frame.height-u+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0},e}(),SpriteMaskFilter=function(e){__extends$h(t,e);function t(r,i,n){var s=this,o=null;return typeof r!="string"&&i===void 0&&n===void 0&&(o=r,r=void 0,i=void 0,n=void 0),s=e.call(this,r||vertex$4,i||fragment$7,n)||this,s.maskSprite=o,s.maskMatrix=new Matrix,s}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(r,i,n,s){var o=this._maskSprite,a=o._texture;!a.valid||(a.uvMatrix||(a.uvMatrix=new TextureMatrix(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,o).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,r.applyFilter(this,i,n,s))},t}(Filter),MaskSystem=function(){function e(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,r){var i=r;if(!i.isMaskData){var n=this.maskDataPool.pop()||new MaskData;n.pooled=!0,n.maskObject=r,i=n}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i.autoDetect&&this.detect(i),i._target=t,i.type!==MASK_TYPES$3.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case MASK_TYPES$3.SCISSOR:this.renderer.scissor.push(i);break;case MASK_TYPES$3.STENCIL:this.renderer.stencil.push(i);break;case MASK_TYPES$3.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break}i.type===MASK_TYPES$3.SPRITE&&this.maskStack.push(i)},e.prototype.pop=function(t){var r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case MASK_TYPES$3.SCISSOR:this.renderer.scissor.pop();break;case MASK_TYPES$3.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case MASK_TYPES$3.SPRITE:this.popSpriteMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===MASK_TYPES$3.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},e.prototype.detect=function(t){var r=t.maskObject;r.isSprite?t.type=MASK_TYPES$3.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=MASK_TYPES$3.SCISSOR:t.type=MASK_TYPES$3.STENCIL},e.prototype.pushSpriteMask=function(t){var r,i,n=t.maskObject,s=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]));var a=this.renderer,u=a.renderTexture,h,l;if(u.current){var f=u.current;h=t.resolution||f.resolution,l=(r=t.multisample)!==null&&r!==void 0?r:f.multisample}else h=t.resolution||a.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:a.multisample;o[0].resolution=h,o[0].multisample=l,o[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),a.filter.push(s,o),s.filterArea=c,t._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),AbstractMaskSystem=function(){function e(t){this.renderer=t,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),tempMatrix$1=new Matrix,ScissorSystem=function(e){__extends$h(t,e);function t(r){var i=e.call(this,r)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},t.prototype.calcScissorRect=function(r){if(!r._scissorRectLocal){var i=r._scissorRect,n=r.maskObject,s=this.renderer,o=s.renderTexture;n.renderable=!0;var a=n.getBounds();this.roundFrameToPixels(a,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),n.renderable=!1,i&&a.fit(i),r._scissorRectLocal=a}},t.isMatrixRotated=function(r){if(!r)return!1;var i=r.a,n=r.b,s=r.c,o=r.d;return(Math.abs(n)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(o)>1e-4)},t.prototype.testScissor=function(r){var i=r.maskObject;if(!i.isFastRect||!i.isFastRect()||t.isMatrixRotated(i.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var n=r._scissorRectLocal;return n.width>0&&n.height>0},t.prototype.roundFrameToPixels=function(r,i,n,s,o){t.isMatrixRotated(o)||(o=o?tempMatrix$1.copyFrom(o):tempMatrix$1.identity(),o.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,r),r.fit(s),r.x=Math.round(r.x*i),r.y=Math.round(r.y*i),r.width=Math.round(r.width*i),r.height=Math.round(r.height*i))},t.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var i=this.renderer.gl;r._scissorRect||i.enable(i.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},t.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,i;this.renderer.renderTexture.current?i=r.y:i=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,i,r.width,r.height)},t}(AbstractMaskSystem),StencilSystem=function(e){__extends$h(t,e);function t(r){var i=e.call(this,r)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},t.prototype.push=function(r){var i=r.maskObject,n=this.renderer.gl,s=r._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),r._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(r){var i=this.renderer.gl;this.getStackLength()===0?i.disable(i.STENCIL_TEST):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},t}(AbstractMaskSystem),ProjectionSystem=function(){function e(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}return e.prototype.update=function(t,r,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,r,i,n){var s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d},e.prototype.setTransform=function(t){},e.prototype.destroy=function(){this.renderer=null},e}(),tempRect=new Rectangle,tempRect2=new Rectangle,RenderTextureSystem=function(){function e(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}return e.prototype.bind=function(t,r,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,o,a;t?(s=t.baseTexture,a=s.resolution,r||(tempRect.width=t.frame.width,tempRect.height=t.frame.height,r=tempRect),i||(tempRect2.x=t.frame.x,tempRect2.y=t.frame.y,tempRect2.width=r.width,tempRect2.height=r.height,i=tempRect2),o=s.framebuffer):(a=n.resolution,r||(tempRect.width=n.screen.width,tempRect.height=n.screen.height,r=tempRect),i||(i=tempRect,i.width=r.width,i.height=r.height));var u=this.viewportFrame;u.x=i.x*a,u.y=i.y*a,u.width=i.width*a,u.height=i.height*a,t||(u.y=n.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(o,u),this.renderer.projection.update(i,r,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},e.prototype.clear=function(t,r){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var o=this.viewportFrame,a=o.x,u=o.y,h=o.width,l=o.height;a=Math.round(a),u=Math.round(u),h=Math.round(h),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,u,h,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],r),s&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function uboUpdate(e,t,r,i,n){r.buffer.update(n)}var UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(e){for(var t=e.map(function(u){return{data:u,offset:0,dataLen:0,dirty:0}}),r=0,i=0,n=0,s=0;s<t.length;s++){var o=t[s];if(r=GLSL_TO_STD40_SIZE[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,i%r!==0&&i<16){var a=i%r%16;i+=a,n+=a}i+r>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=r,i=r):(o.offset=n,i+=r,n+=r)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function getUBOData(e,t){var r=[];for(var i in e)t[i]&&r.push(t[i]);return r.sort(function(n,s){return n.index-s.index}),r}function generateUniformBufferSync(e,t){if(!e.autoManage)return{size:0,syncFunc:uboUpdate};for(var r=getUBOData(e.uniforms,t),i=createUBOElements(r),n=i.uboElements,s=i.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],a=0;a<n.length;a++){for(var u=n[a],h=e.uniforms[u.data.name],l=u.data.name,f=!1,c=0;c<uniformParsers.length;c++){var d=uniformParsers[c];if(d.codeUbo&&d.test(u.data,h)){o.push("offset = "+u.offset/4+";",uniformParsers[c].codeUbo(u.data.name,h)),f=!0;break}}if(!f)if(u.data.size>1){var v=mapSize(u.data.type),m=Math.max(GLSL_TO_STD40_SIZE[u.data.type]/16,1),_=v/m,y=(4-_%4)%4;o.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+u.offset/4+`;

                t = 0;

                for(var i=0; i < `+u.data.size*m+`; i++)
                {
                    for(var j = 0; j < `+_+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+y+`;
                }

                `)}else{var b=UBO_TO_SINGLE_SETTERS[u.data.type];o.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+u.offset/4+`;
                `+b+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var GLProgram=function(){function e(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function getAttributeData(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(e,n);if(s.name.indexOf("gl_")!==0){var o=mapType(t,s.type),a={type:o,name:s.name,size:mapSize(o),location:t.getAttribLocation(e,s.name)};r[s.name]=a}}return r}function getUniformData(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(e,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),u=mapType(t,s.type);r[o]={name:o,index:n,type:u,size:s.size,isArray:a,value:defaultValue(u,s.size)}}return r}function generateProgram(e,t){var r=compileShader(e,e.VERTEX_SHADER,t.vertexSrc),i=compileShader(e,e.FRAGMENT_SHADER,t.fragmentSrc),n=e.createProgram();if(e.attachShader(n,r),e.attachShader(n,i),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||logProgramError(e,n,r,i),t.attributeData=getAttributeData(n,e),t.uniformData=getUniformData(n,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var o=0;o<s.length;o++)t.attributeData[s[o]].location=o,e.bindAttribLocation(n,o,s[o]);e.linkProgram(n)}e.deleteShader(r),e.deleteShader(i);var a={};for(var o in t.uniformData){var u=t.uniformData[o];a[o]={location:e.getUniformLocation(n,o),value:defaultValue(u.type,u.size)}}var h=new GLProgram(n,a);return h}var UID$4=0,defaultSyncData={textureCount:0,uboCount:0},ShaderSystem=function(){function e(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID$4++}return e.prototype.systemCheck=function(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,r){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),r||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(t.uniformGroup,defaultSyncData)),n},e.prototype.setUniforms=function(t){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,r){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,r))},e.prototype.syncUniforms=function(t,r,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(r.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=generateUniformsSync(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(t,r){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,r);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,defaultSyncData,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[r])},e.prototype.createSyncBufferGroup=function(t,r,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=generateUniformBufferSync(t,this.shader.program.uniformData)),t.autoManage){var u=new Float32Array(a.size/4);t.buffer.update(u)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]},e.prototype.getSignature=function(t,r,i){var n=t.uniforms,s=[i+"-"];for(var o in n)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(t){var r=this.gl,i=t.program,n=generateProgram(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function mapWebGLBlendModesToPixi(e,t){return t===void 0&&(t=[]),t[BLEND_MODES$3.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.ADD]=[e.ONE,e.ONE],t[BLEND_MODES$3.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.NONE]=[0,0],t[BLEND_MODES$3.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[BLEND_MODES$3.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[BLEND_MODES$3.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[BLEND_MODES$3.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[BLEND_MODES$3.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[BLEND_MODES$3.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[BLEND_MODES$3.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[BLEND_MODES$3.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5,StateSystem=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES$3.NONE,this._blendEq=!1,this.map=[],this.map[BLEND$1]=this.setBlend,this.map[OFFSET$1]=this.setOffset,this.map[CULLING$1]=this.setCullFace,this.map[DEPTH_TEST$1]=this.setDepthTest,this.map[WINDING$1]=this.setFrontFace,this.map[DEPTH_MASK$1]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=mapWebGLBlendModesToPixi(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var r=this.stateId^t.data,i=0;r;)r&1&&this.map[i].call(this,!!(t.data&1<<i)),r=r>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var r=this.blendModes[t],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,r){this.gl.polygonOffset(t,r)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,r){var i=this.checks.indexOf(t);r&&i===-1?this.checks.push(t):!r&&i!==-1&&this.checks.splice(i,1)},e.checkBlendMode=function(t,r){t.setBlendMode(r.blendMode)},e.checkPolygonOffset=function(t,r){t.setPolygonOffset(1,r.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),TextureGCSystem=function(){function e(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=settings.GC_MAX_IDLE,this.checkCountMax=settings.GC_MAX_CHECK_COUNT,this.mode=settings.GC_MODE}return e.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==GC_MODES$3.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,r=t.managedTextures,i=!1,n=0;n<r.length;n++){var s=r[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),r[n]=null,i=!0)}if(i){for(var o=0,n=0;n<r.length;n++)r[n]!==null&&(r[o++]=r[n]);r.length=o}},e.prototype.unload=function(t){var r=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},e.prototype.destroy=function(){this.renderer=null},e}();function mapTypeAndFormatToInternalFormat(e){var t,r,i,n,s,o,a,u,h,l,f,c,d,v,m,_,y,b,I,A,R,E,O;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?O=(t={},t[TYPES$3.UNSIGNED_BYTE]=(r={},r[FORMATS$3.RGBA]=e.RGBA8,r[FORMATS$3.RGB]=e.RGB8,r[FORMATS$3.RG]=e.RG8,r[FORMATS$3.RED]=e.R8,r[FORMATS$3.RGBA_INTEGER]=e.RGBA8UI,r[FORMATS$3.RGB_INTEGER]=e.RGB8UI,r[FORMATS$3.RG_INTEGER]=e.RG8UI,r[FORMATS$3.RED_INTEGER]=e.R8UI,r[FORMATS$3.ALPHA]=e.ALPHA,r[FORMATS$3.LUMINANCE]=e.LUMINANCE,r[FORMATS$3.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,r),t[TYPES$3.BYTE]=(i={},i[FORMATS$3.RGBA]=e.RGBA8_SNORM,i[FORMATS$3.RGB]=e.RGB8_SNORM,i[FORMATS$3.RG]=e.RG8_SNORM,i[FORMATS$3.RED]=e.R8_SNORM,i[FORMATS$3.RGBA_INTEGER]=e.RGBA8I,i[FORMATS$3.RGB_INTEGER]=e.RGB8I,i[FORMATS$3.RG_INTEGER]=e.RG8I,i[FORMATS$3.RED_INTEGER]=e.R8I,i),t[TYPES$3.UNSIGNED_SHORT]=(n={},n[FORMATS$3.RGBA_INTEGER]=e.RGBA16UI,n[FORMATS$3.RGB_INTEGER]=e.RGB16UI,n[FORMATS$3.RG_INTEGER]=e.RG16UI,n[FORMATS$3.RED_INTEGER]=e.R16UI,n[FORMATS$3.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,n),t[TYPES$3.SHORT]=(s={},s[FORMATS$3.RGBA_INTEGER]=e.RGBA16I,s[FORMATS$3.RGB_INTEGER]=e.RGB16I,s[FORMATS$3.RG_INTEGER]=e.RG16I,s[FORMATS$3.RED_INTEGER]=e.R16I,s),t[TYPES$3.UNSIGNED_INT]=(o={},o[FORMATS$3.RGBA_INTEGER]=e.RGBA32UI,o[FORMATS$3.RGB_INTEGER]=e.RGB32UI,o[FORMATS$3.RG_INTEGER]=e.RG32UI,o[FORMATS$3.RED_INTEGER]=e.R32UI,o[FORMATS$3.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,o),t[TYPES$3.INT]=(a={},a[FORMATS$3.RGBA_INTEGER]=e.RGBA32I,a[FORMATS$3.RGB_INTEGER]=e.RGB32I,a[FORMATS$3.RG_INTEGER]=e.RG32I,a[FORMATS$3.RED_INTEGER]=e.R32I,a),t[TYPES$3.FLOAT]=(u={},u[FORMATS$3.RGBA]=e.RGBA32F,u[FORMATS$3.RGB]=e.RGB32F,u[FORMATS$3.RG]=e.RG32F,u[FORMATS$3.RED]=e.R32F,u[FORMATS$3.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,u),t[TYPES$3.HALF_FLOAT]=(h={},h[FORMATS$3.RGBA]=e.RGBA16F,h[FORMATS$3.RGB]=e.RGB16F,h[FORMATS$3.RG]=e.RG16F,h[FORMATS$3.RED]=e.R16F,h),t[TYPES$3.UNSIGNED_SHORT_5_6_5]=(l={},l[FORMATS$3.RGB]=e.RGB565,l),t[TYPES$3.UNSIGNED_SHORT_4_4_4_4]=(f={},f[FORMATS$3.RGBA]=e.RGBA4,f),t[TYPES$3.UNSIGNED_SHORT_5_5_5_1]=(c={},c[FORMATS$3.RGBA]=e.RGB5_A1,c),t[TYPES$3.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[FORMATS$3.RGBA]=e.RGB10_A2,d[FORMATS$3.RGBA_INTEGER]=e.RGB10_A2UI,d),t[TYPES$3.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[FORMATS$3.RGB]=e.R11F_G11F_B10F,v),t[TYPES$3.UNSIGNED_INT_5_9_9_9_REV]=(m={},m[FORMATS$3.RGB]=e.RGB9_E5,m),t[TYPES$3.UNSIGNED_INT_24_8]=(_={},_[FORMATS$3.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,_),t[TYPES$3.FLOAT_32_UNSIGNED_INT_24_8_REV]=(y={},y[FORMATS$3.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,y),t):O=(b={},b[TYPES$3.UNSIGNED_BYTE]=(I={},I[FORMATS$3.RGBA]=e.RGBA,I[FORMATS$3.RGB]=e.RGB,I[FORMATS$3.ALPHA]=e.ALPHA,I[FORMATS$3.LUMINANCE]=e.LUMINANCE,I[FORMATS$3.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,I),b[TYPES$3.UNSIGNED_SHORT_5_6_5]=(A={},A[FORMATS$3.RGB]=e.RGB,A),b[TYPES$3.UNSIGNED_SHORT_4_4_4_4]=(R={},R[FORMATS$3.RGBA]=e.RGBA,R),b[TYPES$3.UNSIGNED_SHORT_5_5_5_1]=(E={},E[FORMATS$3.RGBA]=e.RGBA,E),b),O}var GLTexture=function(){function e(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES$3.UNSIGNED_BYTE,this.internalFormat=FORMATS$3.RGBA,this.samplerType=0}return e}(),TextureSystem=function(){function e(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(t);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new GLTexture(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new GLTexture(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},e.prototype.bind=function(t,r){r===void 0&&(r=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(t)),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var r=this,i=r.gl,n=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},e.prototype.ensureSamplerType=function(t){var r=this,i=r.boundTextures,n=r.hasIntegerTextures,s=r.CONTEXT_UID;if(!!n)for(var o=t-1;o>=0;--o){var a=i[o];if(a){var u=a._glTextures[s];u.samplerType!==SAMPLER_TYPES$3.FLOAT&&this.renderer.texture.unbind(a)}}},e.prototype.initTexture=function(t){var r=new GLTexture(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r},e.prototype.initTextureType=function(t,r){var i,n;r.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===TYPES$3.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type},e.prototype.updateTexture=function(t){var r=t._glTextures[this.CONTEXT_UID];if(!!r){var i=this.renderer;if(this.initTextureType(t,r),t.resource&&t.resource.upload(i,t,r))r.samplerType!==SAMPLER_TYPES$3.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,o=i.gl;(r.width!==n||r.height!==s||r.dirtyId<0)&&(r.width=n,r.height=s,o.texImage2D(t.target,0,r.internalFormat,n,s,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,r){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){var n=this.managedTextures.indexOf(t);n!==-1&&removeItems(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(t){var r=t._glTextures[this.CONTEXT_UID];!r||((t.mipmap===MIPMAP_MODES$3.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=WRAP_MODES$3.CLAMP:r.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,r){var i=this.gl;if(r.mipmap&&t.mipmap!==MIPMAP_MODES$3.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===SCALE_MODES$3.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===SCALE_MODES$3.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===SCALE_MODES$3.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===SCALE_MODES$3.LINEAR?i.LINEAR:i.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),_systems={__proto__:null,FilterSystem,BatchSystem,ContextSystem,FramebufferSystem,GeometrySystem,MaskSystem,ScissorSystem,StencilSystem,ProjectionSystem,RenderTextureSystem,ShaderSystem,StateSystem,TextureGCSystem,TextureSystem},tempMatrix$2=new Matrix,AbstractRenderer=function(e){__extends$h(t,e);function t(r,i){r===void 0&&(r=RENDERER_TYPE$3.UNKNOWN);var n=e.call(this)||this;return i=Object.assign({},settings.RENDER_OPTIONS,i),n.options=i,n.type=r,n.screen=new Rectangle(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||settings.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(deprecation("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(r){for(var i in r)this.plugins[i]=new r[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,i){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(r,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(deprecation("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var o=i.region,a=__rest(i,["region"]);s=o||r.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var u=RenderTexture.create(__assign({width:s.width,height:s.height},a));return tempMatrix$2.tx=-s.x,tempMatrix$2.ty=-s.y,this.render(r,{renderTexture:u,clear:!1,transform:tempMatrix$2,skipUpdateTransform:!!r.parent}),u},t.prototype.destroy=function(r){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=RENDERER_TYPE$3.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=hex2string(r),hex2rgb(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),t}(EventEmitter),GLBuffer=function(){function e(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),BufferSystem=function(){function e(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(t){var r=this,i=r.gl,n=r.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},e.prototype.bindBufferBase=function(t,r){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[r]!==t){var o=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[r]=t,n.bindBufferBase(n.UNIFORM_BUFFER,r,o.buffer)}},e.prototype.bindBufferRange=function(t,r,i){var n=this,s=n.gl,o=n.CONTEXT_UID;i=i||0;var a=t._glBuffers[o]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,a.buffer,i*256,256)},e.prototype.update=function(t){var r=this,i=r.gl,n=r.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var o=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,o)}},e.prototype.dispose=function(t,r){if(!!this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(r||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedBuffers),i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],t)},e.prototype.createGLBuffer=function(t){var r=this,i=r.CONTEXT_UID,n=r.gl;return t._glBuffers[i]=new GLBuffer(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},e}(),Renderer=function(e){__extends$h(t,e);function t(r){var i=e.call(this,RENDERER_TYPE$3.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Runner("destroy"),contextChange:new Runner("contextChange"),reset:new Runner("reset"),update:new Runner("update"),postrender:new Runner("postrender"),prerender:new Runner("prerender"),resize:new Runner("resize")},i.runners.contextChange.add(i),i.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0),i.addSystem(MaskSystem,"mask").addSystem(ContextSystem,"context").addSystem(StateSystem,"state").addSystem(ShaderSystem,"shader").addSystem(TextureSystem,"texture").addSystem(BufferSystem,"buffer").addSystem(GeometrySystem,"geometry").addSystem(FramebufferSystem,"framebuffer").addSystem(ScissorSystem,"scissor").addSystem(StencilSystem,"stencil").addSystem(ProjectionSystem,"projection").addSystem(TextureGCSystem,"textureGC").addSystem(FilterSystem,"filter").addSystem(RenderTextureSystem,"renderTexture").addSystem(BatchSystem,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,sayHello(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(r){if(isWebGLSupported())return new t(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var r=this.gl,i;if(this.context.webGLVersion===1){var n=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,n)}else{var n=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,n)}i>=MSAA_QUALITY$3.HIGH?this.multisample=MSAA_QUALITY$3.HIGH:i>=MSAA_QUALITY$3.MEDIUM?this.multisample=MSAA_QUALITY$3.MEDIUM:i>=MSAA_QUALITY$3.LOW?this.multisample=MSAA_QUALITY$3.LOW:this.multisample=MSAA_QUALITY$3.NONE},t.prototype.addSystem=function(r,i){var n=new r(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(r,i){var n,s,o,a;if(i&&(i instanceof RenderTexture?(deprecation("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],o=arguments[3],a=arguments[4]):(n=i.renderTexture,s=i.clear,o=i.transform,a=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(n||(this._lastObjectRendered=r),!a){var u=r.enableTempParent();r.updateTransform(),r.disableTempParent(u)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(r,i,n,s){i===void 0&&(i={});var o=e.prototype.generateTexture.call(this,r,i,n,s);return this.framebuffer.blit(),o},t.prototype.resize=function(r,i){e.prototype.resize.call(this,r,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(r){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();e.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return deprecation("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(r,i){t.__plugins=t.__plugins||{},t.__plugins[r]=i},t}(AbstractRenderer);function autoDetectRenderer(e){return Renderer.create(e)}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultVertex$2=$defaultVertex,defaultFilterVertex=$defaultFilterVertex,BatchDrawCall=function(){function e(){this.texArray=null,this.blend=0,this.type=DRAW_MODES$3.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),BatchTextureArray=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},e}(),ViewableBuffer=function(){function e(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(t){return this[t+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},e}(),AbstractBatchRenderer=function(e){__extends$h(t,e);function t(r){var i=e.call(this,r)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=State.for2d(),i.size=settings.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),r.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var r=this.renderer.gl;settings.PREFER_ENV===ENV$3.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var r=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;r.length<n;)r.push(new BatchDrawCall);for(;i.length<s;)i.push(new BatchTextureArray);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(r){!r._texture.valid||(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},t.prototype.buildTexturesAndDrawCalls=function(){var r=this,i=r._bufferedTextures,n=r.MAX_TEXTURES,s=t._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,u=this.renderer.textureGC.count,h=++BaseTexture._globalBatch,l=0,f=s[0],c=0;o.copyBoundTextures(a,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==h&&(f.count>=n&&(o.boundArray(f,a,h,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++h),v._batchEnabled=h,v.touched=u,f.elements[f.count++]=v)}f.count>0&&(o.boundArray(f,a,h,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++h);for(var d=0;d<a.length;d++)a[d]=null;BaseTexture._globalBatch=h},t.prototype.buildDrawCalls=function(r,i,n){var s=this,o=s._bufferedElements,a=s._attributeBuffer,u=s._indexBuffer,h=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=r;for(var m=i;m<n;++m){var _=o[m],y=_._texture.baseTexture,b=premultiplyBlendMode[y.alphaMode?1:0][_.blendMode];o[m]=null,i<m&&v.blend!==b&&(v.size=d-v.start,i=m,v=l[++f],v.texArray=r,v.start=d),this.packInterleavedGeometry(_,a,u,c,d),c+=_.vertexData.length/2*h,d+=_.indices.length,v.blend=b}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(r){for(var i=this.renderer.texture,n=0;n<r.count;n++)i.bind(r.elements[n],r.ids[n]),r.elements[n]=null;r.count=0},t.prototype.updateGeometry=function(){var r=this,i=r._packedGeometries,n=r._attributeBuffer,s=r._indexBuffer;settings.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var r=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,o=t._drawCallPool,a=null,u=0;u<r;u++){var h=o[u],l=h.texArray,f=h.type,c=h.size,d=h.start,v=h.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(r){var i=nextPow2(Math.ceil(r/8)),n=log2(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new ViewableBuffer(s*this.vertexSize*4)),o},t.prototype.getIndexBuffer=function(r){var i=nextPow2(Math.ceil(r/12)),n=log2(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(s)),o},t.prototype.packInterleavedGeometry=function(r,i,n,s,o){for(var a=i.uint32View,u=i.float32View,h=s/this.vertexSize,l=r.uvs,f=r.indices,c=r.vertexData,d=r._texture.baseTexture._batchLocation,v=Math.min(r.worldAlpha,1),m=v<1&&r._texture.baseTexture.alphaMode?premultiplyTint(r._tintRGB,v):r._tintRGB+(v*255<<24),_=0;_<c.length;_+=2)u[s++]=c[_],u[s++]=c[_+1],u[s++]=l[_],u[s++]=l[_+1],a[s++]=m,u[s++]=d;for(var _=0;_<f.length;_++)n[o++]=h+f[_]},t._drawCallPool=[],t._textureArrayPool=[],t}(ObjectRenderer),BatchShaderGenerator=function(){function e(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(t){if(!this.programCache[t]){for(var r=new Int32Array(t),i=0;i<t;i++)r[i]=i;this.defaultGroupCache[t]=UniformGroup.from({uSamplers:r},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Program(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[t]};return new Shader(this.programCache[t],s)},e.prototype.generateSampleSrc=function(t){var r="";r+=`
`,r+=`
`;for(var i=0;i<t;i++)i>0&&(r+=`
else `),i<t-1&&(r+="if(vTextureId < "+i+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},e}(),BatchGeometry=function(e){__extends$h(t,e);function t(r){r===void 0&&(r=!1);var i=e.call(this)||this;return i._buffer=new Buffer(null,r,!1),i._indexBuffer=new Buffer(null,r,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,TYPES$3.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,TYPES$3.FLOAT).addAttribute("aColor",i._buffer,4,!0,TYPES$3.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,TYPES$3.FLOAT).addIndex(i._indexBuffer),i}return t}(Geometry),defaultVertex$3=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,defaultFragment$2=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,BatchPluginFactory=function(){function e(){}return e.create=function(t){var r=Object.assign({vertex:defaultVertex$3,fragment:defaultFragment$2,geometryClass:BatchGeometry,vertexSize:6},t),i=r.vertex,n=r.fragment,s=r.vertexSize,o=r.geometryClass;return function(a){__extends$h(u,a);function u(h){var l=a.call(this,h)||this;return l.shaderGenerator=new BatchShaderGenerator(i,n),l.geometryClass=o,l.vertexSize=s,l}return u}(AbstractBatchRenderer)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return defaultVertex$3},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return defaultFragment$2},enumerable:!1,configurable:!0}),e}(),BatchRenderer=BatchPluginFactory.create(),resources={},_loop_1=function(e){Object.defineProperty(resources,e,{get:function(){return deprecation("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),_resources[e]}})};for(var name in _resources)_loop_1(name);var systems={},_loop_2=function(e){Object.defineProperty(systems,e,{get:function(){return deprecation("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),_systems[e]}})};for(var name in _systems)_loop_2(name);/*!
 * @pixi/app - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Application=function(){function e(t){var r=this;this.stage=new Container,t=Object.assign({forceCanvas:!1},t),this.renderer=autoDetectRenderer(t),e._plugins.forEach(function(i){i.init.call(r,t)})}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,r){var i=this,n=e._plugins.slice(0);n.reverse(),n.forEach(function(s){s.destroy.call(i)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}(),ResizePlugin=function(){function e(){}return e.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!r._resizeTo||(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(!!r._resizeTo){r.cancelResize();var i,n;if(r._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{var s=r._resizeTo,o=s.clientWidth,a=s.clientHeight;i=o,n=a}r.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Application.registerPlugin(ResizePlugin);/*!
 * @pixi/extract - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,Extract=function(){function e(t){this.renderer=t}return e.prototype.image=function(t,r,i){var n=new Image;return n.src=this.base64(t,r,i),n},e.prototype.base64=function(t,r,i){return this.canvas(t).toDataURL(r,i)},e.prototype.canvas=function(t){var r=this.renderer,i,n,s=!1,o,a=!1;t&&(t instanceof RenderTexture?o=t:(o=this.renderer.generateTexture(t),a=!0)),o?(i=o.baseTexture.resolution,n=o.frame,s=!1,r.renderTexture.bind(o)):(i=this.renderer.resolution,s=!0,n=TEMP_RECT,n.width=this.renderer.width,n.height=this.renderer.height,r.renderTexture.bind(null));var u=Math.floor(n.width*i+1e-4),h=Math.floor(n.height*i+1e-4),l=new CanvasRenderTarget(u,h,1),f=new Uint8Array(BYTES_PER_PIXEL*u*h),c=r.gl;c.readPixels(n.x*i,n.y*i,u,h,c.RGBA,c.UNSIGNED_BYTE,f);var d=l.context.getImageData(0,0,u,h);if(e.arrayPostDivide(f,d.data),l.context.putImageData(d,0,0),s){var v=new CanvasRenderTarget(l.width,l.height,1);v.context.scale(1,-1),v.context.drawImage(l.canvas,0,-h),l.destroy(),l=v}return a&&o.destroy(!0),l.canvas},e.prototype.pixels=function(t){var r=this.renderer,i,n,s,o=!1;t&&(t instanceof RenderTexture?s=t:(s=this.renderer.generateTexture(t),o=!0)),s?(i=s.baseTexture.resolution,n=s.frame,r.renderTexture.bind(s)):(i=r.resolution,n=TEMP_RECT,n.width=r.width,n.height=r.height,r.renderTexture.bind(null));var a=n.width*i,u=n.height*i,h=new Uint8Array(BYTES_PER_PIXEL*a*u),l=r.gl;return l.readPixels(n.x*i,n.y*i,a,u,l.RGBA,l.UNSIGNED_BYTE,h),o&&s.destroy(!0),e.arrayPostDivide(h,h),h},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(t,r){for(var i=0;i<t.length;i+=4){var n=r[i+3]=t[i+3];n!==0?(r[i]=Math.round(Math.min(t[i]*255/n,255)),r[i+1]=Math.round(Math.min(t[i+1]*255/n,255)),r[i+2]=Math.round(Math.min(t[i+2]*255/n,255))):(r[i]=t[i],r[i+1]=t[i+1],r[i+2]=t[i+2])}},e}();/*!
 * @pixi/loaders - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var SignalBinding=function(){function e(t,r,i){r===void 0&&(r=!1),this._fn=t,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function _addSignalBinding(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var Signal=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(t){t===void 0&&(t=!1);var r=this._head;if(t)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i},e.prototype.has=function(t){if(!(t instanceof SignalBinding))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},e.prototype.dispatch=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,r),n=n._next;return!0},e.prototype.add=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(t,!1,r))},e.prototype.once=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(t,!0,r))},e.prototype.detach=function(t){if(!(t instanceof SignalBinding))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},e.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},e}();function parseUri(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[t.strictMode?"strict":"loose"].exec(e),n={},s=14;s--;)n[r.key[s]]=i[s]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(o,a,u){a&&(n[r.q.name][a]=u)}),n}var useXdr=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),tempAnchor=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204,STATUS_IE_BUG_EMPTY=1223,STATUS_TYPE_OK=2;function _noop(){}function setExtMap(e,t,r){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(e[t]=r)}function reqType(e){return e.toString().replace("object ","")}var LoaderResource=function(){function e(t,r,i){if(this._dequeue=_noop,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Signal,this.onProgress=new Signal,this.onComplete=new Signal,this.onAfterMiddleware=new Signal}return e.setExtensionLoadType=function(t,r){setExtMap(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){setExtMap(e._xhrTypeMap,t,r)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(r)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(t){return(this._flags&t)!==0},e.prototype._setFlag=function(t,r){this._flags=r?this._flags|t:this._flags&~t},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof globalThis.Image!="undefined"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof globalThis.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(r)?r[i]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e.prototype._createSource=function(t,r,i){i||(i=t+"/"+this._getExtension(r));var n=document.createElement("source");return n.src=r,n.type=i,n},e.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var t=this.xhr;this.abort(reqType(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(reqType(t)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(reqType(t)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",i=typeof t.status=="undefined"?STATUS_OK:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType=="undefined")&&(r=t.responseText),i===STATUS_NONE&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?i=STATUS_OK:i===STATUS_IE_BUG_EMPTY&&(i=STATUS_EMPTY);var n=i/100|0;if(n===STATUS_TYPE_OK)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=e.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=t.response||r;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(t,r){if(t.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=t;var i=parseUri(tempAnchor.href,{strictMode:!0}),n=!i.port&&r.port===""||i.port===r.port,s=i.protocol?i.protocol+":":"";return i.host!==r.hostname||!n||s!==r.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(t){t===void 0&&(t=this.url);var r="";if(this.isDataUrl){var i=t.indexOf("/");r=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),s=t.indexOf("#"),o=Math.min(n>-1?n:t.length,s>-1?s:t.length);t=t.substring(0,o),r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(LoaderResource||(LoaderResource={}));function _noop$1(){}function onlyOnce(e){return function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(e===null)throw new Error("Callback was already called.");var s=e;e=null,s.apply(this,i)}}var AsyncQueueItem=function(){function e(t,r){this.data=t,this.callback=r}return e}(),AsyncQueue=function(){function e(t,r){var i=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=_noop$1,this.unsaturated=_noop$1,this.empty=_noop$1,this.drain=_noop$1,this.error=_noop$1,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,s,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var a=new AsyncQueueItem(n,typeof o=="function"?o:_noop$1);s?i._tasks.unshift(a):i._tasks.push(a),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var n=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(n.data,onlyOnce(i._next(n)))}},this._worker=t,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return e.prototype._next=function(t){var r=this;return function(){for(var i=arguments,n=[],s=0;s<arguments.length;s++)n[s]=i[s];r.workers-=1,t.callback.apply(t,n),n[0]!=null&&r.error(n[0],t.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},e.prototype.push=function(t,r){this._insert(t,!1,r)},e.prototype.kill=function(){this.workers=0,this.drain=_noop$1,this.started=!1,this._tasks=[]},e.prototype.unshift=function(t,r){this._insert(t,!0,r)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},e.eachSeries=function(t,r,i,n){var s=0,o=t.length;function a(u){if(u||s===o){i&&i(u);return}n?setTimeout(function(){r(t[s++],a)},1):r(t[s++],a)}a()},e.queue=function(t,r){return new e(t,r)},e}(),MAX_PROGRESS=100,rgxExtractUrlHash=/(#[\w-]+)?$/,Loader=function(){function e(t,r){var i=this;t===void 0&&(t=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,h){return i._loadResource(u,h)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,h){return i._loadResource(u,h)},this._queue=AsyncQueue.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Signal,this.onError=new Signal,this.onLoad=new Signal,this.onStart=new Signal,this.onComplete=new Signal;for(var n=0;n<e._plugins.length;++n){var s=e._plugins[n],o=s.pre,a=s.use;o&&this.pre(o),a&&this.use(a)}this._protected=!1}return e.prototype._add=function(t,r,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(r=this._prepareUrl(r),this.resources[t]=new LoaderResource(t,r,i),typeof n=="function"&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var u=s.progressChunk*(o.length+1),h=u/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var a=0;a<o.length;++a)o[a].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},e.prototype.use=function(t){return this._afterMiddleware.push(t),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},e.prototype.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=MAX_PROGRESS/r,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(t){var r=parseUri(t,{strictMode:!0}),i;if(r.protocol||!r.path||t.indexOf("//")===0?i=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?i=this.baseUrl+"/"+t:i=this.baseUrl+t,this.defaultQueryString){var n=rgxExtractUrlHash.exec(i)[0];i=i.slice(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},e.prototype._loadResource=function(t,r){var i=this;t._dequeue=r,AsyncQueue.eachSeries(this._beforeMiddleware,function(n,s){n.call(i,t,function(){s(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=MAX_PROGRESS,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var r=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),AsyncQueue.eachSeries(this._afterMiddleware,function(i,n){i.call(r,t,n)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(MAX_PROGRESS,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}();Loader.prototype.add=function e(t,r,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;++s)this.add(t[s]);return this}if(typeof t=="object"&&(i=t,n=r||i.callback||i.onComplete,r=i.url,t=i.name||i.key||i.url),typeof r!="string"&&(n=i,i=r,r=t),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(n=i,i=null),this._add(t,r,i,n)};var AppLoaderPlugin=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Loader.shared:new Loader},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),TextureLoader=function(){function e(){}return e.add=function(){LoaderResource.setExtensionLoadType("svg",LoaderResource.LOAD_TYPE.XHR),LoaderResource.setExtensionXhrType("svg",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){if(t.data&&(t.type===LoaderResource.TYPE.IMAGE||t.extension==="svg")){var i=t.data,n=t.url,s=t.name,o=t.metadata;Texture.fromLoader(i,n,s,o).then(function(a){t.texture=a,r()}).catch(r)}else r()},e}(),_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encodeBinary(e){for(var t="",r=0;r<e.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<e.length?i[s]=e.charCodeAt(r++)&255:i[s]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var o=r-(e.length-1);switch(o){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var s=0;s<n.length;++s)t+=_keyStr.charAt(n[s])}return t}var Url=self.URL||self.webkitURL;function parsing(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===LoaderResource.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var r=e.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){e.data=new Image,e.data.src="data:"+r+";base64,"+encodeBinary(e.xhr.responseText),e.type=LoaderResource.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,t()};return}}else if(e.data.type.indexOf("image")===0){var i=Url.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=LoaderResource.TYPE.IMAGE,e.data.onload=function(){Url.revokeObjectURL(i),e.data.onload=null,t()};return}}t()}Loader.registerPlugin({use:parsing});Loader.registerPlugin(TextureLoader);/*!
 * @pixi/compressed-textures - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _a$1,INTERNAL_FORMATS;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(INTERNAL_FORMATS||(INTERNAL_FORMATS={}));var INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=(_a$1={},_a$1[INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,_a$1[INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,_a$1[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,_a$1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$g=function(e,t){return extendStatics$g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$g(e,t)};function __extends$g(e,t){extendStatics$g(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function __awaiter(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(h){try{u(i.next(h))}catch(l){s(l)}}function a(h){try{u(i.throw(h))}catch(l){s(l)}}function u(h){h.done?n(h.value):new r(function(l){l(h.value)}).then(o,a)}u((i=i.apply(e,t||[])).next())})}function __generator(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(l){return u([h,l])}}function u(h){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=h[0]&2?n.return:h[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,h[1])).done)return s;switch(n=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(l){h=[6,l],n=0}finally{i=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var BlobResource=function(e){__extends$g(t,e);function t(r,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var n=this,s,o;return typeof r=="string"?(s=r,o=new Uint8Array):(s=null,o=r),n=e.call(this,o,i)||this,n.origin=s,n.buffer=o?new ViewableBuffer(o):null,n.origin&&i.autoLoad!==!1&&n.load(),o&&o.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return t.prototype.onBlobLoaded=function(r){},t.prototype.load=function(){return __awaiter(this,void 0,Promise,function(){var r,i,n;return __generator(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return r=s.sent(),[4,r.blob()];case 2:return i=s.sent(),[4,i.arrayBuffer()];case 3:return n=s.sent(),this.data=new Uint32Array(n),this.buffer=new ViewableBuffer(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},t}(BufferResource),CompressedTextureResource=function(e){__extends$g(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.format=i.format,n.levels=i.levels||1,n._width=i.width,n._height=i.height,n._extension=t._formatToExtension(n.format),(i.levelBuffers||n.buffer)&&(n._levelBuffers=i.levelBuffers||t._createLevelBuffers(r instanceof Uint8Array?r:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return t.prototype.upload=function(r,i,n){var s=r.gl,o=r.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,u=this.levels;a<u;a++){var h=this._levelBuffers[a],l=h.levelID,f=h.levelWidth,c=h.levelHeight,d=h.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,l,this.format,f,c,0,d)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(r,i,n,s,o,a,u){for(var h=new Array(n),l=r.byteOffset,f=a,c=u,d=f+s-1&~(s-1),v=c+o-1&~(o-1),m=d*v*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[i],_=0;_<n;_++)h[_]={levelID:_,levelWidth:n>1?f:d,levelHeight:n>1?c:v,levelBuffer:new Uint8Array(r.buffer,l,m)},l+=m,f=f>>1||1,c=c>>1||1,d=f+s-1&~(s-1),v=c+o-1&~(o-1),m=d*v*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[i];return h},t}(BlobResource),CompressedTextureLoader=function(){function e(){}return e.use=function(t,r){var i=t.data,n=this;if(t.type===LoaderResource.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var s=i.textures,o=void 0,a=void 0,u=0,h=s.length;u<h;u++){var l=s[u],f=l.src,c=l.format;if(c||(a=f),e.textureFormats[c]){o=f;break}}if(o=o||a,!o){r(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(o===t.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},v=url.resolve(t.url.replace(n.baseUrl,""),o),m=i.cacheID;n.add(m,v,d,function(_){if(_.error){r(_.error);return}var y=_.texture,b=y===void 0?null:y,I=_.textures,A=I===void 0?{}:I;Object.assign(t,{texture:b,textures:A}),r()})}else r()},e.add=function(){var t=document.createElement("canvas"),r=t.getContext("webgl");if(!r){console.warn("WebGL not available for compressed textures. Silently failing.");return}var i={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};e.textureExtensions=i,e.textureFormats={};for(var n in i){var s=i[n];!s||Object.assign(e.textureFormats,Object.getPrototypeOf(s))}},e}();function registerCompressedTextures(e,t,r){var i={textures:{},texture:null};if(!t)return i;var n=t.map(function(s){return new Texture(new BaseTexture(s,Object.assign({mipmap:MIPMAP_MODES$3.OFF,alphaMode:ALPHA_MODES$3.NO_PREMULTIPLIED_ALPHA},r)))});return n.forEach(function(s,o){var a=s.baseTexture,u=e+"-"+(o+1);BaseTexture.addToCache(a,u),Texture.addToCache(s,u),o===0&&(BaseTexture.addToCache(a,e),Texture.addToCache(s,e),i.texture=s),i.textures[u]=s}),i}var _a$1$1,_b;LoaderResource.setExtensionXhrType("dds",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},DXGI_FORMAT;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(DXGI_FORMAT||(DXGI_FORMAT={}));var D3D10_RESOURCE_DIMENSION;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(D3D10_RESOURCE_DIMENSION||(D3D10_RESOURCE_DIMENSION={}));var PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT=(_a$1$1={},_a$1$1[FOURCC_DXT1]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_a$1$1[FOURCC_DXT3]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_a$1$1[FOURCC_DXT5]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_a$1$1),DXGI_TO_FORMAT=(_b={},_b[DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,_b[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,_b),DDSLoader=function(){function e(){}return e.use=function(t,r){if(t.extension==="dds"&&t.data)try{Object.assign(t,registerCompressedTextures(t.name||t.url,e.parse(t.data),t.metadata))}catch(i){r(i);return}r()},e.parse=function(t){var r=new Uint32Array(t),i=r[0];if(i!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),s=n[DDS_FIELDS.HEIGHT],o=n[DDS_FIELDS.WIDTH],a=n[DDS_FIELDS.MIPMAP_COUNT],u=new Uint32Array(t,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),h=u[PF_FLAGS];if(h&DDPF_FOURCC){var l=u[DDS_PF_FIELDS.FOURCC];if(l!==FOURCC_DX10){var f=FOURCC_TO_FORMAT[l],c=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,d=new Uint8Array(t,c),v=new CompressedTextureResource(d,{format:f,width:o,height:s,levels:a});return[v]}var m=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,_=new Uint32Array(r.buffer,m,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),y=_[DDS_DX10_FIELDS.DXGI_FORMAT],b=_[DDS_DX10_FIELDS.RESOURCE_DIMENSION],I=_[DDS_DX10_FIELDS.MISC_FLAG],A=_[DDS_DX10_FIELDS.ARRAY_SIZE],R=DXGI_TO_FORMAT[y];if(R===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+y);if(I===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSLoader does not support cubemap textures");if(b===D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var E=new Array,O=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(A===1)E.push(new Uint8Array(t,O));else{for(var U=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[R],P=0,M=o,k=s,H=0;H<a;H++){var J=Math.max(1,M+3&-4),le=Math.max(1,k+3&-4),X=J*le*U;P+=X,M=M>>>1,k=k>>>1}for(var G=O,H=0;H<A;H++)E.push(new Uint8Array(t,G,P)),G+=P}return E.map(function(V){return new CompressedTextureResource(V,{format:R,width:o,height:s,levels:a})})}throw h&DDPF_RGB?new Error("DDSLoader does not support uncompressed texture data."):h&DDPF_YUV?new Error("DDSLoader does not supported YUV uncompressed texture data."):h&DDPF_LUMINANCE?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):h&DDPF_ALPHA?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}(),_a$2,_b$1,_c;LoaderResource.setExtensionXhrType("ktx",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT=(_a$2={},_a$2[TYPES$3.UNSIGNED_BYTE]=1,_a$2[TYPES$3.UNSIGNED_SHORT]=2,_a$2[TYPES$3.INT]=4,_a$2[TYPES$3.UNSIGNED_INT]=4,_a$2[TYPES$3.FLOAT]=4,_a$2[TYPES$3.HALF_FLOAT]=8,_a$2),FORMATS_TO_COMPONENTS=(_b$1={},_b$1[FORMATS$3.RGBA]=4,_b$1[FORMATS$3.RGB]=3,_b$1[FORMATS$3.RG]=2,_b$1[FORMATS$3.RED]=1,_b$1[FORMATS$3.LUMINANCE]=1,_b$1[FORMATS$3.LUMINANCE_ALPHA]=2,_b$1[FORMATS$3.ALPHA]=1,_b$1),TYPES_TO_BYTES_PER_PIXEL=(_c={},_c[TYPES$3.UNSIGNED_SHORT_4_4_4_4]=2,_c[TYPES$3.UNSIGNED_SHORT_5_5_5_1]=2,_c[TYPES$3.UNSIGNED_SHORT_5_6_5]=2,_c),KTXLoader=function(){function e(){}return e.use=function(t,r){if(t.extension==="ktx"&&t.data)try{var i=t.name||t.url,n=e.parse(i,t.data),s=n.compressed,o=n.uncompressed;if(s)Object.assign(t,registerCompressedTextures(i,s,t.metadata));else if(o){var a={};o.forEach(function(u,h){var l=new Texture(new BaseTexture(u.resource,{mipmap:MIPMAP_MODES$3.OFF,alphaMode:ALPHA_MODES$3.NO_PREMULTIPLIED_ALPHA,type:u.type,format:u.format})),f=i+"-"+(h+1);BaseTexture.addToCache(l.baseTexture,f),Texture.addToCache(l,f),h===0&&(a[i]=l,BaseTexture.addToCache(l.baseTexture,i),Texture.addToCache(l,i)),a[f]=l}),Object.assign(t,{textures:a})}}catch(u){r(u);return}r()},e.parse=function(t,r){var i=new DataView(r);if(!e.validate(t,i))return null;var n=i.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,s=i.getUint32(KTX_FIELDS.GL_TYPE,n),o=i.getUint32(KTX_FIELDS.GL_FORMAT,n),a=i.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,n),u=i.getUint32(KTX_FIELDS.PIXEL_WIDTH,n),h=i.getUint32(KTX_FIELDS.PIXEL_HEIGHT,n)||1,l=i.getUint32(KTX_FIELDS.PIXEL_DEPTH,n)||1,f=i.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,n)||1,c=i.getUint32(KTX_FIELDS.NUMBER_OF_FACES,n),d=i.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,n),v=i.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,n);if(h===0||l!==1)throw new Error("Only 2D textures are supported");if(c!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var m=4,_=4,y=u+3&-4,b=h+3&-4,I=new Array(f),A=u*h;s===0&&(A=y*b);var R;if(s!==0?TYPES_TO_BYTES_PER_COMPONENT[s]?R=TYPES_TO_BYTES_PER_COMPONENT[s]*FORMATS_TO_COMPONENTS[o]:R=TYPES_TO_BYTES_PER_PIXEL[s]:R=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[a],R===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var E=A*R,O=E,U=u,P=h,M=y,k=b,H=FILE_HEADER_SIZE+v,J=0;J<d;J++){for(var le=i.getUint32(H,n),X=H+4,G=0;G<f;G++){var V=I[G];V||(V=I[G]=new Array(d)),V[J]={levelID:J,levelWidth:d>1||s!==0?U:M,levelHeight:d>1||s!==0?P:k,levelBuffer:new Uint8Array(r,X,O)},X+=O}H+=le+4,H=H%4!==0?H+4-H%4:H,U=U>>1||1,P=P>>1||1,M=U+m-1&~(m-1),k=P+_-1&~(_-1),O=M*k*R}return s!==0?{uncompressed:I.map(function(z){var ie=z[0].levelBuffer,N=!1;return s===TYPES$3.FLOAT?ie=new Float32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4):s===TYPES$3.UNSIGNED_INT?(N=!0,ie=new Uint32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4)):s===TYPES$3.INT&&(N=!0,ie=new Int32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4)),{resource:new BufferResource(ie,{width:z[0].levelWidth,height:z[0].levelHeight}),type:s,format:N?e.convertFormatToInteger(o):o}})}:{compressed:I.map(function(z){return new CompressedTextureResource(null,{format:a,width:u,height:h,levels:d,levelBuffers:z})})}},e.validate=function(t,r){for(var i=0;i<FILE_IDENTIFIER.length;i++)if(r.getUint8(i)!==FILE_IDENTIFIER[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},e.convertFormatToInteger=function(t){switch(t){case FORMATS$3.RGBA:return FORMATS$3.RGBA_INTEGER;case FORMATS$3.RGB:return FORMATS$3.RGB_INTEGER;case FORMATS$3.RG:return FORMATS$3.RG_INTEGER;case FORMATS$3.RED:return FORMATS$3.RED_INTEGER;default:return t}},e}();/*!
 * @pixi/particle-container - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$f=function(e,t){return extendStatics$f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$f(e,t)};function __extends$f(e,t){extendStatics$f(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}(function(e){__extends$f(t,e);function t(r,i,n,s){r===void 0&&(r=1500),n===void 0&&(n=16384),s===void 0&&(s=!1);var o=e.call(this)||this,a=16384;return n>a&&(n=a),o._properties=[!1,!0,!1,!1,!1],o._maxSize=r,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=BLEND_MODES$3.NORMAL,o.autoResize=s,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return t.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,hex2rgb(r,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(r){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},t.prototype.onChildrenChange=function(r){for(var i=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t})(Container);var ParticleBuffer=function(){function e(t,r,i){this.geometry=new Geometry,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||TYPES$3.FLOAT,offset:s.offset},r[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var t=this.geometry,r=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=r,r+=n.size,this.dynamicStride+=n.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=o,o+=n.size,this.staticStride+=n.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];t.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===TYPES$3.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];t.addAttribute(n.attributeName,this.staticBuffer,0,n.type===TYPES$3.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},e.prototype.uploadDynamic=function(t,r,i){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(t,r,i,s.type===TYPES$3.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(t,r,i){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(t,r,i,s.type===TYPES$3.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),fragment$6=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,ParticleRenderer=function(e){__extends$f(t,e);function t(r){var i=e.call(this,r)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Matrix,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES$3.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=Shader.from(vertex$3,fragment$6,{}),i.state=State.for2d(),i}return t.prototype.render=function(r){var i=r.children,n=r._maxSize,s=r._batchSize,o=this.renderer,a=i.length;if(a!==0){a>n&&!r.autoResize&&(a=n);var u=r._buffers;u||(u=r._buffers=this.generateBuffers(r));var h=i[0]._texture.baseTexture;this.state.blendMode=correctBlendMode(r.blendMode,h.alphaMode),o.state.set(this.state);var l=o.gl,f=r.worldTransform.copyTo(this.tempMatrix);f.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,v=0;d<a;d+=s,v+=1){var m=a-d;m>s&&(m=s),v>=u.length&&u.push(this._generateOneMoreBuffer(r));var _=u[v];_.uploadDynamic(i,d,m);var y=r._bufferUpdateIDs[v]||0;c=c||_._updateID<y,c&&(_._updateID=r._updateID,_.uploadStatic(i,d,m)),o.geometry.bind(_.geometry),l.drawElements(l.TRIANGLES,m*6,l.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(r){for(var i=[],n=r._maxSize,s=r._batchSize,o=r._properties,a=0;a<n;a+=s)i.push(new ParticleBuffer(this.properties,o,s));return i},t.prototype._generateOneMoreBuffer=function(r){var i=r._batchSize,n=r._properties;return new ParticleBuffer(this.properties,n,i)},t.prototype.uploadVertices=function(r,i,n,s,o,a){for(var u=0,h=0,l=0,f=0,c=0;c<n;++c){var d=r[i+c],v=d._texture,m=d.scale.x,_=d.scale.y,y=v.trim,b=v.orig;y?(h=y.x-d.anchor.x*b.width,u=h+y.width,f=y.y-d.anchor.y*b.height,l=f+y.height):(u=b.width*(1-d.anchor.x),h=b.width*-d.anchor.x,l=b.height*(1-d.anchor.y),f=b.height*-d.anchor.y),s[a]=h*m,s[a+1]=f*_,s[a+o]=u*m,s[a+o+1]=f*_,s[a+o*2]=u*m,s[a+o*2+1]=l*_,s[a+o*3]=h*m,s[a+o*3+1]=l*_,a+=o*4}},t.prototype.uploadPosition=function(r,i,n,s,o,a){for(var u=0;u<n;u++){var h=r[i+u].position;s[a]=h.x,s[a+1]=h.y,s[a+o]=h.x,s[a+o+1]=h.y,s[a+o*2]=h.x,s[a+o*2+1]=h.y,s[a+o*3]=h.x,s[a+o*3+1]=h.y,a+=o*4}},t.prototype.uploadRotation=function(r,i,n,s,o,a){for(var u=0;u<n;u++){var h=r[i+u].rotation;s[a]=h,s[a+o]=h,s[a+o*2]=h,s[a+o*3]=h,a+=o*4}},t.prototype.uploadUvs=function(r,i,n,s,o,a){for(var u=0;u<n;++u){var h=r[i+u]._texture._uvs;h?(s[a]=h.x0,s[a+1]=h.y0,s[a+o]=h.x1,s[a+o+1]=h.y1,s[a+o*2]=h.x2,s[a+o*2+1]=h.y2,s[a+o*3]=h.x3,s[a+o*3+1]=h.y3,a+=o*4):(s[a]=0,s[a+1]=0,s[a+o]=0,s[a+o+1]=0,s[a+o*2]=0,s[a+o*2+1]=0,s[a+o*3]=0,s[a+o*3+1]=0,a+=o*4)}},t.prototype.uploadTint=function(r,i,n,s,o,a){for(var u=0;u<n;++u){var h=r[i+u],l=h._texture.baseTexture.alphaMode>0,f=h.alpha,c=f<1&&l?premultiplyTint(h._tintRGB,f):h._tintRGB+(f*255<<24);s[a]=c,s[a+o]=c,s[a+o*2]=c,s[a+o*3]=c,a+=o*4}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(ObjectRenderer);/*!
 * @pixi/graphics - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var LINE_JOIN;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(LINE_JOIN||(LINE_JOIN={}));var LINE_CAP;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(LINE_CAP||(LINE_CAP={}));var GRAPHICS_CURVES={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(t===void 0&&(t=20),!this.adaptive||!e||isNaN(e))return t;var r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},FillStyle=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$e=function(e,t){return extendStatics$e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$e(e,t)};function __extends$e(e,t){extendStatics$e(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function fixOrientation(e,t){var r,i;t===void 0&&(t=!1);var n=e.length;if(!(n<6)){for(var s=0,o=0,a=e[n-2],u=e[n-1];o<n;o+=2){var h=e[o],l=e[o+1];s+=(h-a)*(l+u),a=h,u=l}if(!t&&s>0||t&&s<=0)for(var f=n/2,o=f+f%2;o<n;o+=2){var c=n-o-2,d=n-o-1,v=o,m=o+1;r=[e[v],e[c]],e[c]=r[0],e[v]=r[1],i=[e[m],e[d]],e[d]=i[0],e[m]=i[1]}}}var buildPoly={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var r=e.points,i=e.holes,n=t.points,s=t.indices;if(r.length>=6){fixOrientation(r,!1);for(var o=[],a=0;a<i.length;a++){var u=i[a];fixOrientation(u.points,!0),o.push(r.length/2),r=r.concat(u.points)}var h=earcut$1(r,o,2);if(!h)return;for(var l=n.length/2,a=0;a<h.length;a+=3)s.push(h[a]+l),s.push(h[a+1]+l),s.push(h[a+2]+l);for(var a=0;a<r.length;a++)n.push(r[a])}}},buildCircle={build:function(e){var t=e.points,r,i,n,s,o,a;if(e.type===SHAPES.CIRC){var u=e.shape;r=u.x,i=u.y,o=a=u.radius,n=s=0}else if(e.type===SHAPES.ELIP){var h=e.shape;r=h.x,i=h.y,o=h.width,a=h.height,n=s=0}else{var l=e.shape,f=l.width/2,c=l.height/2;r=l.x+f,i=l.y+c,o=a=Math.max(0,Math.min(l.radius,Math.min(f,c))),n=f-o,s=c-a}var d=Math.ceil(2.3*Math.sqrt(o+a)),v=d*8+(n?4:0)+(s?4:0);if(t.length=v,v!==0){if(d===0){t.length=8,t[0]=t[6]=r+n,t[1]=t[3]=i+s,t[2]=t[4]=r-n,t[5]=t[7]=i-s;return}var m=0,_=d*4+(n?2:0)+2,y=_,b=v;{var I=n+o,A=s,R=r+I,E=r-I,O=i+A;if(t[m++]=R,t[m++]=O,t[--_]=O,t[--_]=E,s){var U=i-A;t[y++]=E,t[y++]=U,t[--b]=U,t[--b]=R}}for(var P=1;P<d;P++){var M=Math.PI/2*(P/d),I=n+Math.cos(M)*o,A=s+Math.sin(M)*a,R=r+I,E=r-I,O=i+A,U=i-A;t[m++]=R,t[m++]=O,t[--_]=O,t[--_]=E,t[y++]=E,t[y++]=U,t[--b]=U,t[--b]=R}{var I=n,A=s+a,R=r+I,E=r-I,O=i+A,U=i-A;t[m++]=R,t[m++]=O,t[--b]=U,t[--b]=R,n&&(t[m++]=E,t[m++]=O,t[--b]=U,t[--b]=E)}}},triangulate:function(e,t){var r=e.points,i=t.points,n=t.indices,s=i.length/2,o=s,a,u;if(e.type!==SHAPES.RREC){var h=e.shape;a=h.x,u=h.y}else{var l=e.shape;a=l.x+l.width/2,u=l.y+l.height/2}var f=e.matrix;i.push(e.matrix?f.a*a+f.c*u+f.tx:a,e.matrix?f.b*a+f.d*u+f.ty:u),s++,i.push(r[0],r[1]);for(var c=2;c<r.length;c+=2)i.push(r[c],r[c+1]),n.push(s++,o,s);n.push(o+1,o,s)}},buildRectangle={build:function(e){var t=e.shape,r=t.x,i=t.y,n=t.width,s=t.height,o=e.points;o.length=0,o.push(r,i,r+n,i,r+n,i+s,r,i+s)},triangulate:function(e,t){var r=e.points,i=t.points,n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function getPt(e,t,r){var i=t-e;return e+i*r}function quadraticBezierCurve(e,t,r,i,n,s,o){o===void 0&&(o=[]);for(var a=20,u=o,h=0,l=0,f=0,c=0,d=0,v=0,m=0,_=0;m<=a;++m)_=m/a,h=getPt(e,r,_),l=getPt(t,i,_),f=getPt(r,n,_),c=getPt(i,s,_),d=getPt(h,f,_),v=getPt(l,c,_),!(m===0&&u[u.length-2]===d&&u[u.length-1]===v)&&u.push(d,v);return u}var buildRoundedRectangle={build:function(e){if(Graphics.nextRoundedRectBehavior){buildCircle.build(e);return}var t=e.shape,r=e.points,i=t.x,n=t.y,s=t.width,o=t.height,a=Math.max(0,Math.min(t.radius,Math.min(s,o)/2));r.length=0,a?(quadraticBezierCurve(i,n+a,i,n,i+a,n,r),quadraticBezierCurve(i+s-a,n,i+s,n,i+s,n+a,r),quadraticBezierCurve(i+s,n+o-a,i+s,n+o,i+s-a,n+o,r),quadraticBezierCurve(i+a,n+o,i,n+o,i,n+o-a,r)):r.push(i,n,i+s,n,i+s,n+o,i,n+o)},triangulate:function(e,t){if(Graphics.nextRoundedRectBehavior){buildCircle.triangulate(e,t);return}for(var r=e.points,i=t.points,n=t.indices,s=i.length/2,o=earcut$1(r,null,2),a=0,u=o.length;a<u;a+=3)n.push(o[a]+s),n.push(o[a+1]+s),n.push(o[a+2]+s);for(var a=0,u=r.length;a<u;a++)i.push(r[a],r[++a])}};function square(e,t,r,i,n,s,o,a){var u=e-r*n,h=t-i*n,l=e+r*s,f=t+i*s,c,d;o?(c=i,d=-r):(c=-i,d=r);var v=u+c,m=h+d,_=l+c,y=f+d;return a.push(v,m),a.push(_,y),2}function round(e,t,r,i,n,s,o,a){var u=r-e,h=i-t,l=Math.atan2(u,h),f=Math.atan2(n-e,s-t);a&&l<f?l+=Math.PI*2:!a&&l>f&&(f+=Math.PI*2);var c=l,d=f-l,v=Math.abs(d),m=Math.sqrt(u*u+h*h),_=(15*v*Math.sqrt(m)/Math.PI>>0)+1,y=d/_;if(c+=y,a){o.push(e,t),o.push(r,i);for(var b=1,I=c;b<_;b++,I+=y)o.push(e,t),o.push(e+Math.sin(I)*m,t+Math.cos(I)*m);o.push(e,t),o.push(n,s)}else{o.push(r,i),o.push(e,t);for(var b=1,I=c;b<_;b++,I+=y)o.push(e+Math.sin(I)*m,t+Math.cos(I)*m),o.push(e,t);o.push(n,s),o.push(e,t)}return _*2}function buildNonNativeLine(e,t){var r=e.shape,i=e.points||r.points.slice(),n=t.closePointEps;if(i.length!==0){var s=e.lineStyle,o=new Point(i[0],i[1]),a=new Point(i[i.length-2],i[i.length-1]),u=r.type!==SHAPES.POLY||r.closeStroke,h=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(u){i=i.slice(),h&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var l=(o.x+a.x)*.5,f=(a.y+o.y)*.5;i.unshift(l,f),i.push(l,f)}var c=t.points,d=i.length/2,v=i.length,m=c.length/2,_=s.width/2,y=_*_,b=s.miterLimit*s.miterLimit,I=i[0],A=i[1],R=i[2],E=i[3],O=0,U=0,P=-(A-E),M=I-R,k=0,H=0,J=Math.sqrt(P*P+M*M);P/=J,M/=J,P*=_,M*=_;var le=s.alignment,X=(1-le)*2,G=le*2;u||(s.cap===LINE_CAP.ROUND?v+=round(I-P*(X-G)*.5,A-M*(X-G)*.5,I-P*X,A-M*X,I+P*G,A+M*G,c,!0)+2:s.cap===LINE_CAP.SQUARE&&(v+=square(I,A,P,M,X,G,!0,c))),c.push(I-P*X,A-M*X),c.push(I+P*G,A+M*G);for(var V=1;V<d-1;++V){I=i[(V-1)*2],A=i[(V-1)*2+1],R=i[V*2],E=i[V*2+1],O=i[(V+1)*2],U=i[(V+1)*2+1],P=-(A-E),M=I-R,J=Math.sqrt(P*P+M*M),P/=J,M/=J,P*=_,M*=_,k=-(E-U),H=R-O,J=Math.sqrt(k*k+H*H),k/=J,H/=J,k*=_,H*=_;var z=R-I,ie=A-E,N=R-O,q=U-E,Z=ie*N-q*z,ee=Z<0;if(Math.abs(Z)<.1){c.push(R-P*X,E-M*X),c.push(R+P*G,E+M*G);continue}var ne=(-P+I)*(-M+E)-(-P+R)*(-M+A),de=(-k+O)*(-H+E)-(-k+R)*(-H+U),se=(z*de-N*ne)/Z,oe=(q*ne-ie*de)/Z,ve=(se-R)*(se-R)+(oe-E)*(oe-E),ce=R+(se-R)*X,ue=E+(oe-E)*X,te=R-(se-R)*G,ae=E-(oe-E)*G,g=Math.min(z*z+ie*ie,N*N+q*q),T=ee?X:G,S=g+T*T*y,C=ve<=S;C?s.join===LINE_JOIN.BEVEL||ve/y>b?(ee?(c.push(ce,ue),c.push(R+P*G,E+M*G),c.push(ce,ue),c.push(R+k*G,E+H*G)):(c.push(R-P*X,E-M*X),c.push(te,ae),c.push(R-k*X,E-H*X),c.push(te,ae)),v+=2):s.join===LINE_JOIN.ROUND?ee?(c.push(ce,ue),c.push(R+P*G,E+M*G),v+=round(R,E,R+P*G,E+M*G,R+k*G,E+H*G,c,!0)+4,c.push(ce,ue),c.push(R+k*G,E+H*G)):(c.push(R-P*X,E-M*X),c.push(te,ae),v+=round(R,E,R-P*X,E-M*X,R-k*X,E-H*X,c,!1)+4,c.push(R-k*X,E-H*X),c.push(te,ae)):(c.push(ce,ue),c.push(te,ae)):(c.push(R-P*X,E-M*X),c.push(R+P*G,E+M*G),s.join===LINE_JOIN.BEVEL||ve/y>b||(s.join===LINE_JOIN.ROUND?ee?v+=round(R,E,R+P*G,E+M*G,R+k*G,E+H*G,c,!0)+2:v+=round(R,E,R-P*X,E-M*X,R-k*X,E-H*X,c,!1)+2:(ee?(c.push(te,ae),c.push(te,ae)):(c.push(ce,ue),c.push(ce,ue)),v+=2)),c.push(R-k*X,E-H*X),c.push(R+k*G,E+H*G),v+=2)}I=i[(d-2)*2],A=i[(d-2)*2+1],R=i[(d-1)*2],E=i[(d-1)*2+1],P=-(A-E),M=I-R,J=Math.sqrt(P*P+M*M),P/=J,M/=J,P*=_,M*=_,c.push(R-P*X,E-M*X),c.push(R+P*G,E+M*G),u||(s.cap===LINE_CAP.ROUND?v+=round(R-P*(X-G)*.5,E-M*(X-G)*.5,R-P*X,E-M*X,R+P*G,E+M*G,c,!1)+2:s.cap===LINE_CAP.SQUARE&&(v+=square(R,E,P,M,X,G,!1,c)));for(var w=t.indices,L=GRAPHICS_CURVES.epsilon*GRAPHICS_CURVES.epsilon,V=m;V<v+m-2;++V)I=c[V*2],A=c[V*2+1],R=c[(V+1)*2],E=c[(V+1)*2+1],O=c[(V+2)*2],U=c[(V+2)*2+1],!(Math.abs(I*(E-U)+R*(U-A)+O*(A-E))<L)&&w.push(V,V+1,V+2)}}function buildNativeLine(e,t){var r=0,i=e.shape,n=e.points||i.points,s=i.type!==SHAPES.POLY||i.closeStroke;if(n.length!==0){var o=t.points,a=t.indices,u=n.length/2,h=o.length/2,l=h;for(o.push(n[0],n[1]),r=1;r<u;r++)o.push(n[r*2],n[r*2+1]),a.push(l,l+1),l++;s&&a.push(l,h)}}function buildLine(e,t){e.lineStyle.native?buildNativeLine(e,t):buildNonNativeLine(e,t)}var ArcUtils=function(){function e(){}return e.curveTo=function(t,r,i,n,s,o){var a=o[o.length-2],u=o[o.length-1],h=u-r,l=a-t,f=n-r,c=i-t,d=Math.abs(h*c-l*f);if(d<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==r)&&o.push(t,r),null;var v=h*h+l*l,m=f*f+c*c,_=h*f+l*c,y=s*Math.sqrt(v)/d,b=s*Math.sqrt(m)/d,I=y*_/v,A=b*_/m,R=y*c+b*l,E=y*f+b*h,O=l*(b+I),U=h*(b+I),P=c*(y+A),M=f*(y+A),k=Math.atan2(U-E,O-R),H=Math.atan2(M-E,P-R);return{cx:R+t,cy:E+r,radius:s,startAngle:k,endAngle:H,anticlockwise:l*f>c*h}},e.arc=function(t,r,i,n,s,o,a,u,h){for(var l=a-o,f=GRAPHICS_CURVES._segmentsCount(Math.abs(l)*s,Math.ceil(Math.abs(l)/PI_2)*40),c=l/(f*2),d=c*2,v=Math.cos(c),m=Math.sin(c),_=f-1,y=_%1/_,b=0;b<=_;++b){var I=b+y*b,A=c+o+d*I,R=Math.cos(A),E=-Math.sin(A);h.push((v*R+m*E)*s+i,(v*-E+m*R)*s+n)}},e}(),BezierUtils=function(){function e(){}return e.curveLength=function(t,r,i,n,s,o,a,u){for(var h=10,l=0,f=0,c=0,d=0,v=0,m=0,_=0,y=0,b=0,I=0,A=0,R=t,E=r,O=1;O<=h;++O)f=O/h,c=f*f,d=c*f,v=1-f,m=v*v,_=m*v,y=_*t+3*m*f*i+3*v*c*s+d*a,b=_*r+3*m*f*n+3*v*c*o+d*u,I=R-y,A=E-b,R=y,E=b,l+=Math.sqrt(I*I+A*A);return l},e.curveTo=function(t,r,i,n,s,o,a){var u=a[a.length-2],h=a[a.length-1];a.length-=2;var l=GRAPHICS_CURVES._segmentsCount(e.curveLength(u,h,t,r,i,n,s,o)),f=0,c=0,d=0,v=0,m=0;a.push(u,h);for(var _=1,y=0;_<=l;++_)y=_/l,f=1-y,c=f*f,d=c*f,v=y*y,m=v*y,a.push(d*u+3*c*y*t+3*f*v*i+m*s,d*h+3*c*y*r+3*f*v*n+m*o)},e}(),QuadraticUtils=function(){function e(){}return e.curveLength=function(t,r,i,n,s,o){var a=t-2*i+s,u=r-2*n+o,h=2*i-2*t,l=2*n-2*r,f=4*(a*a+u*u),c=4*(a*h+u*l),d=h*h+l*l,v=2*Math.sqrt(f+c+d),m=Math.sqrt(f),_=2*f*m,y=2*Math.sqrt(d),b=c/m;return(_*v+m*c*(v-y)+(4*d*f-c*c)*Math.log((2*m+b+v)/(b+y)))/(4*_)},e.curveTo=function(t,r,i,n,s){for(var o=s[s.length-2],a=s[s.length-1],u=GRAPHICS_CURVES._segmentsCount(e.curveLength(o,a,t,r,i,n)),h=0,l=0,f=1;f<=u;++f){var c=f/u;h=o+(t-o)*c,l=a+(r-a)*c,s.push(h+(t+(i-t)*c-h)*c,l+(r+(n-r)*c-l)*c)}},e}(),BatchPart=function(){function e(){this.reset()}return e.prototype.begin=function(t,r,i){this.reset(),this.style=t,this.start=r,this.attribStart=i},e.prototype.end=function(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),_a,FILL_COMMANDS=(_a={},_a[SHAPES.POLY]=buildPoly,_a[SHAPES.CIRC]=buildCircle,_a[SHAPES.ELIP]=buildCircle,_a[SHAPES.RECT]=buildRectangle,_a[SHAPES.RREC]=buildRoundedRectangle,_a),BATCH_POOL=[],DRAW_CALL_POOL=[],GraphicsData=function(){function e(t,r,i,n){r===void 0&&(r=null),i===void 0&&(i=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=r,this.matrix=n,this.type=t.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),tmpPoint=new Point,tmpBounds=new Bounds$1,GraphicsGeometry=function(e){__extends$e(t,e);function t(){var r=e.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new Bounds$1,r.boundsDirty=-1,r}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var i=this.batches[r];i.reset(),BATCH_POOL.push(i)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(r,i,n,s){i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=null);var o=new GraphicsData(r,i,n,s);return this.graphicsData.push(o),this.dirty++,this},t.prototype.drawHole=function(r,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new GraphicsData(r,null,null,i),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(r){for(var i=this.graphicsData,n=0;n<i.length;++n){var s=i[n];if(!!s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(r,tmpPoint):tmpPoint.copyFrom(r),s.shape.contains(tmpPoint.x,tmpPoint.y))){var o=!1;if(s.holes)for(var a=0;a<s.holes.length;a++){var u=s.holes[a];if(u.shape.contains(tmpPoint.x,tmpPoint.y)){o=!0;break}}if(!o)return!0}}return!1},t.prototype.updateBatches=function(r){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,n=this.graphicsData,s=null,o=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],o=s.style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var u=n[a],h=u.fillStyle,l=u.lineStyle,f=FILL_COMMANDS[u.type];f.build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||l.visible)&&this.processHoles(u.holes);for(var c=0;c<2;c++){var d=c===0?h:l;if(!!d.visible){var v=d.texture.baseTexture,m=this.indices.length,_=this.points.length/2;v.wrapMode=WRAP_MODES$3.REPEAT,c===0?this.processFill(u):this.processLine(u);var y=this.points.length/2-_;y!==0&&(s&&!this._compareStyles(o,d)&&(s.end(m,_),s=null),s||(s=BATCH_POOL.pop()||new BatchPart,s.begin(d,m,_),this.batches.push(s),o=d),this.addUvs(this.points,i,d.texture,_,y,d.matrix))}}}var b=this.indices.length,I=this.points.length/2;if(s&&s.end(b,I),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var A=I>65535&&r;this.indicesUint16=A?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(r,i){return!(!r||!i||r.texture.baseTexture!==i.texture.baseTexture||r.color+r.alpha!==i.color+i.alpha||!!r.native!=!!i.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,i=this.graphicsData.length;r<i;r++){var n=this.graphicsData[r],s=n.fillStyle,o=n.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,i=0,n=r.length;i<n;i++)for(var s=r[i],o=0;o<s.size;o++){var a=s.start+o;this.indicesUint16[a]=this.indicesUint16[a]-s.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,i=0;i<r.length;i++)if(r[i].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var r=++BaseTexture._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,s=this.textureIds,o=DRAW_CALL_POOL.pop();o||(o=new BatchDrawCall,o.texArray=new BatchTextureArray),o.texArray.count=0,o.start=0,o.size=0,o.type=DRAW_MODES$3.TRIANGLES;var a=0,u=null,h=0,l=!1,f=DRAW_MODES$3.TRIANGLES,c=0;this.drawCalls.push(o);for(var i=0;i<this.batches.length;i++){var d=this.batches[i],v=8,m=d.style,_=m.texture.baseTexture;l!==!!m.native&&(l=!!m.native,f=l?DRAW_MODES$3.LINES:DRAW_MODES$3.TRIANGLES,u=null,a=v,r++),u!==_&&(u=_,_._batchEnabled!==r&&(a===v&&(r++,a=0,o.size>0&&(o=DRAW_CALL_POOL.pop(),o||(o=new BatchDrawCall,o.texArray=new BatchTextureArray),this.drawCalls.push(o)),o.start=c,o.size=0,o.texArray.count=0,o.type=f),_.touched=1,_._batchEnabled=r,_._batchLocation=a,_.wrapMode=WRAP_MODES$3.REPEAT,o.texArray.elements[o.texArray.count++]=_,a++)),o.size+=d.size,c+=d.size,h=_._batchLocation,this.addColors(n,m.color,m.alpha,d.attribSize,d.attribStart),this.addTextureIds(s,h,d.attribSize,d.attribStart)}BaseTexture._globalBatch=r,this.packAttributes()},t.prototype.packAttributes=function(){for(var r=this.points,i=this.uvs,n=this.colors,s=this.textureIds,o=new ArrayBuffer(r.length*3*4),a=new Float32Array(o),u=new Uint32Array(o),h=0,l=0;l<r.length/2;l++)a[h++]=r[l*2],a[h++]=r[l*2+1],a[h++]=i[l*2],a[h++]=i[l*2+1],u[h++]=n[l],a[h++]=s[l];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(r){if(r.holes.length)buildPoly.triangulate(r,this);else{var i=FILL_COMMANDS[r.type];i.triangulate(r,this)}},t.prototype.processLine=function(r){buildLine(r,this);for(var i=0;i<r.holes.length;i++)buildLine(r.holes[i],this)},t.prototype.processHoles=function(r){for(var i=0;i<r.length;i++){var n=r[i],s=FILL_COMMANDS[n.type];s.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var r=this._bounds,i=tmpBounds,n=Matrix.IDENTITY;this._bounds.clear(),i.clear();for(var s=0;s<this.graphicsData.length;s++){var o=this.graphicsData[s],a=o.shape,u=o.type,h=o.lineStyle,l=o.matrix||Matrix.IDENTITY,f=0;if(h&&h.visible&&(f=h.width*Math.max(0,h.alignment)),n!==l&&(i.isEmpty()||(r.addBoundsMatrix(i,n),i.clear()),n=l),u===SHAPES.RECT||u===SHAPES.RREC){var c=a;i.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,f,f)}else if(u===SHAPES.CIRC){var d=a;i.addFramePad(d.x,d.y,d.x,d.y,d.radius+f,d.radius+f)}else if(u===SHAPES.ELIP){var v=a;i.addFramePad(v.x,v.y,v.x,v.y,v.width+f,v.height+f)}else{var m=a;r.addVerticesMatrix(n,m.points,0,m.points.length,f,f)}}i.isEmpty()||r.addBoundsMatrix(i,n),r.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(r,i){for(var n=0;n<r.length/2;n++){var s=r[n*2],o=r[n*2+1];r[n*2]=i.a*s+i.c*o+i.tx,r[n*2+1]=i.b*s+i.d*o+i.ty}},t.prototype.addColors=function(r,i,n,s,o){o===void 0&&(o=0);var a=(i>>16)+(i&65280)+((i&255)<<16),u=premultiplyTint(a,n);r.length=Math.max(r.length,o+s);for(var h=0;h<s;h++)r[o+h]=u},t.prototype.addTextureIds=function(r,i,n,s){s===void 0&&(s=0),r.length=Math.max(r.length,s+n);for(var o=0;o<n;o++)r[s+o]=i},t.prototype.addUvs=function(r,i,n,s,o,a){a===void 0&&(a=null);for(var u=0,h=i.length,l=n.frame;u<o;){var f=r[(s+u)*2],c=r[(s+u)*2+1];if(a){var d=a.a*f+a.c*c+a.tx;c=a.b*f+a.d*c+a.ty,f=d}u++,i.push(f/l.width,c/l.height)}var v=n.baseTexture;(l.width<v.width||l.height<v.height)&&this.adjustUvs(i,n,h,o)},t.prototype.adjustUvs=function(r,i,n,s){for(var o=i.baseTexture,a=1e-6,u=n+s*2,h=i.frame,l=h.width/o.width,f=h.height/o.height,c=h.x/h.width,d=h.y/h.height,v=Math.floor(r[n]+a),m=Math.floor(r[n+1]+a),_=n+2;_<u;_+=2)v=Math.min(v,Math.floor(r[_]+a)),m=Math.min(m,Math.floor(r[_+1]+a));c-=v,d-=m;for(var _=n;_<u;_+=2)r[_]=(r[_]+c)*l,r[_+1]=(r[_+1]+d)*f},t.BATCHABLE_SIZE=100,t}(BatchGeometry),LineStyle=function(e){__extends$e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=LINE_CAP.BUTT,r.join=LINE_JOIN.MITER,r.miterLimit=10,r}return t.prototype.clone=function(){var r=new t;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(FillStyle),temp=new Float32Array(3),DEFAULT_SHADERS={},Graphics=function(e){__extends$e(t,e);function t(r){r===void 0&&(r=null);var i=e.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new FillStyle,i._lineStyle=new LineStyle,i._matrix=null,i._holeMode=!1,i.state=State.for2d(),i._geometry=r||new GraphicsGeometry,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=BLEND_MODES$3.NORMAL,i}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(r,i,n,s,o){return r===void 0&&(r=null),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=.5),o===void 0&&(o=!1),typeof r=="number"&&(r={width:r,color:i,alpha:n,alignment:s,native:o}),this.lineTextureStyle(r)},t.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:Texture.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var i=r.width>0&&r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:i},r)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[i-2],r[i-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(r,i){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=i,this},t.prototype.lineTo=function(r,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,s=n[n.length-2],o=n[n.length-1];return(s!==r||o!==i)&&n.push(r,i),this},t.prototype._initCurve=function(r,i){r===void 0&&(r=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,i]):this.moveTo(r,i)},t.prototype.quadraticCurveTo=function(r,i,n,s){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(r,i,n,s,o),this},t.prototype.bezierCurveTo=function(r,i,n,s,o,a){return this._initCurve(),BezierUtils.curveTo(r,i,n,s,o,a,this.currentPath.points),this},t.prototype.arcTo=function(r,i,n,s,o){this._initCurve(r,i);var a=this.currentPath.points,u=ArcUtils.curveTo(r,i,n,s,o,a);if(u){var h=u.cx,l=u.cy,f=u.radius,c=u.startAngle,d=u.endAngle,v=u.anticlockwise;this.arc(h,l,f,c,d,v)}return this},t.prototype.arc=function(r,i,n,s,o,a){if(a===void 0&&(a=!1),s===o)return this;!a&&o<=s?o+=PI_2:a&&s<=o&&(s+=PI_2);var u=o-s;if(u===0)return this;var h=r+Math.cos(s)*n,l=i+Math.sin(s)*n,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-h),v=Math.abs(c[c.length-1]-l);d<f&&v<f||c.push(h,l)}else this.moveTo(h,l),c=this.currentPath.points;return ArcUtils.arc(h,l,r,i,n,s,o,a,c),this},t.prototype.beginFill=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=1),this.beginTextureFill({texture:Texture.WHITE,color:r,alpha:i})},t.prototype.beginTextureFill=function(r){r=Object.assign({texture:Texture.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var i=r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:i},r)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(r,i,n,s){return this.drawShape(new Rectangle(r,i,n,s))},t.prototype.drawRoundedRect=function(r,i,n,s,o){return this.drawShape(new RoundedRectangle(r,i,n,s,o))},t.prototype.drawCircle=function(r,i,n){return this.drawShape(new Circle(r,i,n))},t.prototype.drawEllipse=function(r,i,n,s){return this.drawShape(new Ellipse(r,i,n,s))},t.prototype.drawPolygon=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];var s,o=!0,a=i[0];a.points?(o=a.closeStroke,s=a.points):Array.isArray(i[0])?s=i[0]:s=i;var u=new Polygon(s);return u.closeStroke=o,this.drawShape(u),this},t.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===SHAPES.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},t.prototype._render=function(r){this.finishPoly();var i=this._geometry,n=r.context.supports.uint32Indices;i.updateBatches(n),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},t.prototype._populateBatches=function(){var r=this._geometry,i=this.blendMode,n=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(r.points);for(var s=0;s<n;s++){var o=r.batches[s],a=o.style.color,u=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),h=new Float32Array(r.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),l=new Uint16Array(r.indicesUint16.buffer,o.start*2,o.size),f={vertexData:u,blendMode:i,indices:l,uvs:h,_batchRGB:hex2rgb(a),_tintRGB:a,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=f}},t.prototype._renderBatched=function(r){if(!!this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var s=this.batches[i];s.worldAlpha=this.worldAlpha*s.alpha,r.plugins[this.pluginName].render(s)}}},t.prototype._renderDirect=function(r){var i=this._resolveDirectShader(r),n=this._geometry,s=this.tint,o=this.worldAlpha,a=i.uniforms,u=n.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(s>>16&255)/255*o,a.tint[1]=(s>>8&255)/255*o,a.tint[2]=(s&255)/255*o,a.tint[3]=o,r.shader.bind(i),r.geometry.bind(n,i),r.state.set(this.state);for(var h=0,l=u.length;h<l;h++)this._renderDrawCallDirect(r,n.drawCalls[h])},t.prototype._renderDrawCallDirect=function(r,i){for(var n=i.texArray,s=i.type,o=i.size,a=i.start,u=n.count,h=0;h<u;h++)r.texture.bind(n.elements[h],h);r.geometry.draw(s,o,a)},t.prototype._resolveDirectShader=function(r){var i=this.shader,n=this.pluginName;if(!i){if(!DEFAULT_SHADERS[n]){for(var s=r.plugins.batch.MAX_TEXTURES,o=new Int32Array(s),a=0;a<s;a++)o[a]=a;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:o},!0)},h=r.plugins[n]._shader.program;DEFAULT_SHADERS[n]=new Shader(h,u)}i=DEFAULT_SHADERS[n]}return i},t.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(!!r.graphicsData.length){var i=r.bounds,n=i.minX,s=i.minY,o=i.maxX,a=i.maxY;this._bounds.addFrame(this.transform,n,s,o,a)}},t.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=hex2rgb(this.tint,temp),i=0;i<this.batches.length;i++){var n=this.batches[i],s=n._batchRGB,o=r[0]*s[0]*255,a=r[1]*s[1]*255,u=r[2]*s[2]*255,h=(o<<16)+(a<<8)+(u|0);n._tintRGB=(h>>16)+(h&65280)+((h&255)<<16)}}},t.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var i=this.transform.worldTransform,n=i.a,s=i.b,o=i.c,a=i.d,u=i.tx,h=i.ty,l=this._geometry.points,f=this.vertexData,c=0,d=0;d<l.length;d+=2){var v=l[d],m=l[d+1];f[c++]=n*v+o*m+u,f[c++]=a*m+s*v+h}}},t.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(r){return this._matrix=r,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,r)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new Point,t}(Container);/*!
 * @pixi/sprite - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$d=function(e,t){return extendStatics$d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$d(e,t)};function __extends$d(e,t){extendStatics$d(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]),Sprite=function(e){__extends$d(t,e);function t(r){var i=e.call(this)||this;return i._anchor=new ObservablePoint(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=BLEND_MODES$3.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=r||Texture.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=indices,i.pluginName="batch",i.isSprite=!0,i._roundPixels=settings.ROUND_PIXELS,i}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,o=i.c,a=i.d,u=i.tx,h=i.ty,l=this.vertexData,f=r.trim,c=r.orig,d=this._anchor,v=0,m=0,_=0,y=0;if(f?(m=f.x-d._x*c.width,v=m+f.width,y=f.y-d._y*c.height,_=y+f.height):(m=-d._x*c.width,v=m+c.width,y=-d._y*c.height,_=y+c.height),l[0]=n*m+o*y+u,l[1]=a*y+s*m+h,l[2]=n*v+o*y+u,l[3]=a*y+s*v+h,l[4]=n*v+o*_+u,l[5]=a*_+s*v+h,l[6]=n*m+o*_+u,l[7]=a*_+s*m+h,this._roundPixels)for(var b=settings.RESOLUTION,I=0;I<l.length;++I)l[I]=Math.round((l[I]*b|0)/b)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,i=this.vertexTrimmedData,n=r.orig,s=this._anchor,o=this.transform.worldTransform,a=o.a,u=o.b,h=o.c,l=o.d,f=o.tx,c=o.ty,d=-s._x*n.width,v=d+n.width,m=-s._y*n.height,_=m+n.height;i[0]=a*d+h*m+f,i[1]=l*m+u*d+c,i[2]=a*v+h*m+f,i[3]=l*m+u*v+c,i[4]=a*v+h*_+f,i[5]=l*_+u*v+c,i[6]=a*d+h*_+f,i[7]=l*_+u*d+c},t.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var r=this._texture.trim,i=this._texture.orig;!r||r.width===i.width&&r.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds$1),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),r=this._localBoundsRect),this._localBounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,tempPoint$2);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,o=0;return tempPoint$2.x>=s&&tempPoint$2.x<s+i&&(o=-n*this.anchor.y,tempPoint$2.y>=o&&tempPoint$2.y<o+n)},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof r=="boolean"?r:r&&r.texture;if(i){var n=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(r,i){var n=r instanceof Texture?r:Texture.from(r,i);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var i=sign(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var i=sign(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Container);/*!
 * @pixi/text - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$c=function(e,t){return extendStatics$c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$c(e,t)};function __extends$c(e,t){extendStatics$c(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var TEXT_GRADIENT;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(TEXT_GRADIENT||(TEXT_GRADIENT={}));var defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],TextStyle=function(){function e(t){this.styleID=0,this.reset(),deepCopyProperties(this,t,t)}return e.prototype.clone=function(){var t={};return deepCopyProperties(t,this,defaultStyle),new e(t)},e.prototype.reset=function(){deepCopyProperties(this,defaultStyle,defaultStyle)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var r=getColor(t);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(t){var r=getColor(t);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){areArraysEqual(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var r=getColor(t);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var i=r.length-1;i>=0;i--){var n=r[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&genericFontFamilies.indexOf(n)<0&&(n='"'+n+'"'),r[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+r.join(",")},e}();function getSingleColor(e){return typeof e=="number"?hex2string(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function getColor(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=getSingleColor(e[t]);return e}else return getSingleColor(e)}function areArraysEqual(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function deepCopyProperties(e,t,r){for(var i in r)Array.isArray(t[i])?e[i]=t[i].slice():e[i]=t[i]}var TextMetrics=function(){function e(t,r,i,n,s,o,a,u,h){this.text=t,this.style=r,this.width=i,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=h}return e.measureText=function(t,r,i,n){n===void 0&&(n=e._canvas),i=i==null?r.wordWrap:i;var s=r.toFontString(),o=e.measureFont(s);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);var a=n.getContext("2d");a.font=s;for(var u=i?e.wordWrap(t,r,n):t,h=u.split(/(?:\r\n|\r|\n)/),l=new Array(h.length),f=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*r.letterSpacing;l[c]=d,f=Math.max(f,d)}var v=f+r.strokeThickness;r.dropShadow&&(v+=r.dropShadowDistance);var m=r.lineHeight||o.fontSize+r.strokeThickness,_=Math.max(m,o.fontSize+r.strokeThickness)+(h.length-1)*(m+r.leading);return r.dropShadow&&(_+=r.dropShadowDistance),new e(t,r,v,_,h,l,m+r.leading,f,o)},e.wordWrap=function(t,r,i){i===void 0&&(i=e._canvas);for(var n=i.getContext("2d"),s=0,o="",a="",u=Object.create(null),h=r.letterSpacing,l=r.whiteSpace,f=e.collapseSpaces(l),c=e.collapseNewlines(l),d=!f,v=r.wordWrapWidth+h,m=e.tokenize(t),_=0;_<m.length;_++){var y=m[_];if(e.isNewline(y)){if(!c){a+=e.addLine(o),d=!f,o="",s=0;continue}y=" "}if(f){var b=e.isBreakingSpace(y),I=e.isBreakingSpace(o[o.length-1]);if(b&&I)continue}var A=e.getFromCache(y,h,u,n);if(A>v)if(o!==""&&(a+=e.addLine(o),o="",s=0),e.canBreakWords(y,r.breakWords))for(var R=e.wordWrapSplit(y),E=0;E<R.length;E++){for(var O=R[E],U=1;R[E+U];){var P=R[E+U],M=O[O.length-1];if(!e.canBreakChars(M,P,y,E,r.breakWords))O+=P;else break;U++}E+=O.length-1;var k=e.getFromCache(O,h,u,n);k+s>v&&(a+=e.addLine(o),d=!1,o="",s=0),o+=O,s+=k}else{o.length>0&&(a+=e.addLine(o),o="",s=0);var H=_===m.length-1;a+=e.addLine(y,!H),d=!1,o="",s=0}else A+s>v&&(d=!1,a+=e.addLine(o),o="",s=0),(o.length>0||!e.isBreakingSpace(y)||d)&&(o+=y,s+=A)}return a+=e.addLine(o,!1),a},e.addLine=function(t,r){return r===void 0&&(r=!0),t=e.trimRight(t),t=r?t+`
`:t,t},e.getFromCache=function(t,r,i,n){var s=i[t];if(typeof s!="number"){var o=t.length*r;s=n.measureText(t).width+o,i[t]=s}return s},e.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},e.collapseNewlines=function(t){return t==="normal"},e.trimRight=function(t){if(typeof t!="string")return"";for(var r=t.length-1;r>=0;r--){var i=t[r];if(!e.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return typeof t!="string"?!1:e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t,r){return typeof t!="string"?!1:e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var r=[],i="";if(typeof t!="string")return r;for(var n=0;n<t.length;n++){var s=t[n],o=t[n+1];if(e.isBreakingSpace(s,o)||e.isNewline(s)){i!==""&&(r.push(i),i=""),r.push(s);continue}i+=s}return i!==""&&r.push(i),r},e.canBreakWords=function(t,r){return r},e.canBreakChars=function(t,r,i,n,s){return!0},e.wordWrapSplit=function(t){return t.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={ascent:0,descent:0,fontSize:0},i=e._canvas,n=e._context;n.font=t;var s=e.METRICS_STRING+e.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width),a=Math.ceil(n.measureText(e.BASELINE_SYMBOL).width),u=Math.ceil(e.HEIGHT_MULTIPLIER*a);a=a*e.BASELINE_MULTIPLIER|0,i.width=o,i.height=u,n.fillStyle="#f00",n.fillRect(0,0,o,u),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);var h=n.getImageData(0,0,o,u).data,l=h.length,f=o*4,c=0,d=0,v=!1;for(c=0;c<a;++c){for(var m=0;m<f;m+=4)if(h[d+m]!==255){v=!0;break}if(!v)d+=f;else break}for(r.ascent=a-c,d=l-f,v=!1,c=u;c>a;--c){for(var m=0;m<f;m+=4)if(h[d+m]!==255){v=!0;break}if(!v)d-=f;else break}return r.descent=c-a,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e.clearMetrics=function(t){t===void 0&&(t=""),t?delete e._fonts[t]:e._fonts={}},e}(),canvas=function(){try{var e=new OffscreenCanvas(0,0),t=e.getContext("2d");return t&&t.measureText?e:document.createElement("canvas")}catch{return document.createElement("canvas")}}();canvas.width=canvas.height=10;TextMetrics._canvas=canvas;TextMetrics._context=canvas.getContext("2d");TextMetrics._fonts={};TextMetrics.METRICS_STRING="|\xC9q\xC5";TextMetrics.BASELINE_SYMBOL="M";TextMetrics.BASELINE_MULTIPLIER=1.4;TextMetrics.HEIGHT_MULTIPLIER=2;TextMetrics._newlines=[10,13];TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Text=function(e){__extends$c(t,e);function t(r,i,n){var s=this,o=!1;n||(n=document.createElement("canvas"),o=!0),n.width=3,n.height=3;var a=Texture.from(n);return a.orig=new Rectangle,a.trim=new Rectangle,s=e.call(this,a)||this,s._ownCanvas=o,s.canvas=n,s.context=s.canvas.getContext("2d"),s._resolution=settings.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=r,s.style=i,s.localStyleID=-1,s}return t.prototype.updateText=function(r){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var n=this.context,s=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,a=s.height,u=s.lines,h=s.lineHeight,l=s.lineWidths,f=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var d,v,m=i.dropShadow?2:1,_=0;_<m;++_){var y=i.dropShadow&&_===0,b=y?Math.ceil(Math.max(1,a)+i.padding*2):0,I=b*this._resolution;if(y){n.fillStyle="black",n.strokeStyle="black";var A=i.dropShadowColor,R=hex2rgb(typeof A=="number"?A:string2hex(A)),E=i.dropShadowBlur*this._resolution,O=i.dropShadowDistance*this._resolution;n.shadowColor="rgba("+R[0]*255+","+R[1]*255+","+R[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=E,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*O,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*O+I}else n.fillStyle=this._generateFillStyle(i,u,s),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var U=(h-c.fontSize)/2;(!t.nextLineHeightBehavior||h-c.fontSize<0)&&(U=0);for(var P=0;P<u.length;P++)d=i.strokeThickness/2,v=i.strokeThickness/2+P*h+c.ascent+U,i.align==="right"?d+=f-l[P]:i.align==="center"&&(d+=(f-l[P])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(u[P],d+i.padding,v+i.padding-b,!0),i.fill&&this.drawLetterSpacing(u[P],d+i.padding,v+i.padding-b)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(r,i,n,s){s===void 0&&(s=!1);var o=this._style,a=o.letterSpacing,u=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(a===0||u){u&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),s?this.context.strokeText(r,i,n):this.context.fillText(r,i,n);return}for(var h=i,l=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,c=0,d=0;d<l.length;++d){var v=l[d];s?this.context.strokeText(v,h,n):this.context.fillText(v,h,n);for(var m="",_=d+1;_<l.length;++_)m+=l[_];c=this.context.measureText(m).width,h+=f-c+a,f=c}},t.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var i=trimCanvas(r);i.data&&(r.width=i.width,r.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,s=this._style,o=s.trim?0:s.padding,a=n.baseTexture;n.trim.width=n._frame.width=r.width/this._resolution,n.trim.height=n._frame.height=r.height/this._resolution,n.trim.x=-o,n.trim.y=-o,n.orig.width=n._frame.width-o*2,n.orig.height=n._frame.height-o*2,this._onTextureUpdate(),a.setRealSize(r.width,r.height,this._resolution),n.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,r)},t.prototype.getLocalBounds=function(r){return this.updateText(!0),e.prototype.getLocalBounds.call(this,r)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(r,i,n){var s=r.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var o,a=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,h=this.canvas.width/this._resolution-a-u*2,l=this.canvas.height/this._resolution-a-u*2,f=s.slice(),c=r.fillGradientStops.slice();if(!c.length)for(var d=f.length+1,v=1;v<d;++v)c.push(v/d);if(f.unshift(s[0]),c.unshift(0),f.push(s[s.length-1]),c.push(1),r.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){o=this.context.createLinearGradient(h/2,u,h/2,l+u);for(var m=n.fontProperties.fontSize+r.strokeThickness,v=0;v<i.length;v++){var _=n.lineHeight*(v-1)+m,y=n.lineHeight*v,b=y;v>0&&_>y&&(b=(y+_)/2);var I=y+m,A=n.lineHeight*(v+1),R=I;v+1<i.length&&A<I&&(R=(I+A)/2);for(var E=(R-b)/l,O=0;O<f.length;O++){var U=0;typeof c[O]=="number"?U=c[O]:U=O/f.length;var P=Math.min(1,Math.max(0,b/l+U*E));P=Number(P.toFixed(5)),o.addColorStop(P,f[O])}}}else{o=this.context.createLinearGradient(u,l/2,h+u,l/2);for(var M=f.length+1,k=1,v=0;v<f.length;v++){var H=void 0;typeof c[v]=="number"?H=c[v]:H=k/M,o.addColorStop(H,f[v]),k++}}return o},t.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},defaultDestroyOptions,r),e.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var i=sign(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var i=sign(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof TextStyle?this._style=r:this._style=new TextStyle(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(Sprite);/*!
 * @pixi/prepare - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$b=function(e,t){return extendStatics$b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$b(e,t)};function __extends$b(e,t){extendStatics$b(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var CountLimiter=function(){function e(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function findMultipleBaseTextures(e,t){var r=!1;if(e&&e._textures&&e._textures.length){for(var i=0;i<e._textures.length;i++)if(e._textures[i]instanceof Texture){var n=e._textures[i].baseTexture;t.indexOf(n)===-1&&(t.push(n),r=!0)}}return r}function findBaseTexture(e,t){if(e.baseTexture instanceof BaseTexture){var r=e.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function findTexture(e,t){if(e._texture&&e._texture instanceof Texture){var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function drawText(e,t){return t instanceof Text?(t.updateText(!0),!0):!1}function calculateTextStyle(e,t){if(t instanceof TextStyle){var r=t.toFontString();return TextMetrics.measureFont(r),!0}return!1}function findText(e,t){if(e instanceof Text){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function findTextStyle(e,t){return e instanceof TextStyle?(t.indexOf(e)===-1&&t.push(e),!0):!1}var BasePrepare=function(){function e(t){var r=this;this.limiter=new CountLimiter(settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!r.queue||r.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return e.prototype.upload=function(t,r){typeof t=="function"&&(r=t,t=null),t&&this.add(t),this.queue.length?(r&&this.completes.push(r),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):r&&r()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],r=!1;if(t&&!t._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var i=0,n=s.length;i<n;i++)s[i]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var r=0,i=this.addHooks.length;r<i&&!this.addHooks[r](t,this.queue);r++);if(t instanceof Container)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},e.prototype.destroy=function(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function uploadBaseTextures(e,t){return t instanceof BaseTexture?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function uploadGraphics(e,t){if(!(t instanceof Graphics))return!1;var r=t.geometry;t.finishPoly(),r.updateBatches();for(var i=r.batches,n=0;n<i.length;n++){var s=i[n].style.texture;s&&uploadBaseTextures(e,s.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function findGraphics(e,t){return e instanceof Graphics?(t.push(e),!0):!1}var Prepare=function(e){__extends$b(t,e);function t(r){var i=e.call(this,r)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(findGraphics),i.registerUploadHook(uploadBaseTextures),i.registerUploadHook(uploadGraphics),i}return t}(BasePrepare);/*!
 * @pixi/spritesheet - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Spritesheet=function(){function e(t,r,i){i===void 0&&(i=null),this._texture=t instanceof Texture?t:null,this.baseTexture=t instanceof BaseTexture?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(t){t===void 0&&(t=null);var r=this.data.meta.scale,i=getResolutionOfUrl(t,null);return i===null&&(i=r!==void 0?parseFloat(r):1),i!==1&&this.baseTexture.setResolution(i),i},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var r=t,i=e.BATCH_SIZE;r-t<i&&r<this._frameKeys.length;){var n=this._frameKeys[r],s=this._frames[n],o=s.frame;if(o){var a=null,u=null,h=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,l=new Rectangle(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s.rotated?a=new Rectangle(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Rectangle(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(u=new Rectangle(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new Texture(this.baseTexture,a,l,u,s.rotated?2:0,s.anchor),Texture.addToCache(this.textures[n],n)}r++}},e.prototype._processAnimations=function(){var t=this.data.animations||{};for(var r in t){this.animations[r]=[];for(var i=0;i<t[r].length;i++){var n=t[r][i];this.animations[r].push(this.textures[n])}}},e.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(t){var r;t===void 0&&(t=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),SpritesheetLoader=function(){function e(){}return e.use=function(t,r){var i,n,s=this,o=t.name+"_image";if(!t.data||t.type!==LoaderResource.TYPE.JSON||!t.data.frames||s.resources[o]){r();return}var a=(n=(i=t.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(a))for(var u=function(v){if(typeof v!="string")return"continue";var m=v.replace(".json",""),_=url.resolve(t.url.replace(s.baseUrl,""),v);if(s.resources[m]||Object.values(s.resources).some(function(b){return url.format(url.parse(b.url))===_}))return"continue";var y={crossOrigin:t.crossOrigin,loadType:LoaderResource.LOAD_TYPE.XHR,xhrType:LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};s.add(m,_,y)},h=0,l=a;h<l.length;h++){var f=l[h];u(f)}var c={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=e.getResourcePath(t,s.baseUrl);s.add(o,d,c,function(m){if(m.error){r(m.error);return}var _=new Spritesheet(m.texture,t.data,t.url);_.parse(function(){t.spritesheet=_,t.textures=_.textures,r()})})},e.getResourcePath=function(t,r){return t.isDataUrl?t.data.meta.image:url.resolve(t.url.replace(r,""),t.data.meta.image)},e}();/*!
 * @pixi/sprite-tiling - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$a=function(e,t){return extendStatics$a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$a(e,t)};function __extends$a(e,t){extendStatics$a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var tempPoint$1=new Point;(function(e){__extends$a(t,e);function t(r,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var s=e.call(this,r)||this;return s.tileTransform=new Transform,s._width=i,s._height=n,s.uvMatrix=s.texture.uvMatrix||new TextureMatrix(r),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(r){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,i,n,s)},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),r=this._localBoundsRect),this._bounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,tempPoint$1);var i=this._width,n=this._height,s=-i*this.anchor._x;if(tempPoint$1.x>=s&&tempPoint$1.x<s+i){var o=-n*this.anchor._y;if(tempPoint$1.y>=o&&tempPoint$1.y<o+n)return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},t.from=function(r,i){var n=r instanceof Texture?r:Texture.from(r,i);return new t(n,i.width,i.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),t})(Sprite);var fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,tempMat=new Matrix,TilingSpriteRenderer=function(e){__extends$a(t,e);function t(r){var i=e.call(this,r)||this;return r.runners.contextChange.add(i),i.quad=new QuadUv,i.state=State.for2d(),i}return t.prototype.contextChange=function(){var r=this.renderer,i={globals:r.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,i),this.shader=r.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,i):Shader.from(gl1VertexSrc,gl1FragmentSrc,i)},t.prototype.render=function(r){var i=this.renderer,n=this.quad,s=n.vertices;s[0]=s[6]=r._width*-r.anchor.x,s[1]=s[3]=r._height*-r.anchor.y,s[2]=s[4]=r._width*(1-r.anchor.x),s[5]=s[7]=r._height*(1-r.anchor.y);var o=r.uvRespectAnchor?r.anchor.x:0,a=r.uvRespectAnchor?r.anchor.y:0;s=n.uvs,s[0]=s[6]=-o,s[1]=s[3]=-a,s[2]=s[4]=1-o,s[5]=s[7]=1-a,n.invalidate();var u=r._texture,h=u.baseTexture,l=r.tileTransform.localTransform,f=r.uvMatrix,c=h.isPowerOfTwo&&u.frame.width===h.width&&u.frame.height===h.height;c&&(h._glTextures[i.CONTEXT_UID]?c=h.wrapMode!==WRAP_MODES$3.CLAMP:h.wrapMode===WRAP_MODES$3.CLAMP&&(h.wrapMode=WRAP_MODES$3.REPEAT));var d=c?this.simpleShader:this.shader,v=u.width,m=u.height,_=r._width,y=r._height;tempMat.set(l.a*v/_,l.b*v/y,l.c*m/_,l.d*m/y,l.tx/_,l.ty/y),tempMat.invert(),c?tempMat.prepend(f.mapCoord):(d.uniforms.uMapCoord=f.mapCoord.toArray(!0),d.uniforms.uClampFrame=f.uClampFrame,d.uniforms.uClampOffset=f.uClampOffset),d.uniforms.uTransform=tempMat.toArray(!0),d.uniforms.uColor=premultiplyTintToRgba(r.tint,r.worldAlpha,d.uniforms.uColor,h.alphaMode),d.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),d.uniforms.uSampler=u,i.shader.bind(d),i.geometry.bind(n),this.state.blendMode=correctBlendMode(r.blendMode,h.alphaMode),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(ObjectRenderer);/*!
 * @pixi/mesh - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$9=function(e,t){return extendStatics$9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$9(e,t)};function __extends$9(e,t){extendStatics$9(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var MeshBatchUvs=function(){function e(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},e}(),tempPoint=new Point,tempPolygon=new Polygon,Mesh=function(e){__extends$9(t,e);function t(r,i,n,s){s===void 0&&(s=DRAW_MODES$3.TRIANGLES);var o=e.call(this)||this;return o.geometry=r,o.shader=i,o.state=n||State.for2d(),o.drawMode=s,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=settings.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){var i=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===DRAW_MODES$3.TRIANGLES&&i.length<t.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},t.prototype._renderDefault=function(r){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),r.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(i),r.state.set(this.state),r.geometry.bind(this.geometry,i),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(r){var i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var s=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[s]),r.plugins[s].render(this)},t.prototype.calculateVertices=function(){var r=this.geometry,i=r.buffers[0],n=i.data,s=i._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var o=this.transform.worldTransform,a=o.a,u=o.b,h=o.c,l=o.d,f=o.tx,c=o.ty,d=this.vertexData,v=0;v<d.length/2;v++){var m=n[v*2],_=n[v*2+1];d[v*2]=a*m+h*_+f,d[v*2+1]=u*m+l*_+c}if(this._roundPixels)for(var y=settings.RESOLUTION,v=0;v<d.length;++v)d[v]=Math.round((d[v]*y|0)/y);this.vertexDirty=s}},t.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(r,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,tempPoint);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=tempPolygon.points,s=this.geometry.getIndex().data,o=s.length,a=this.drawMode===4?3:1,u=0;u+2<o;u+=a){var h=s[u]*2,l=s[u+1]*2,f=s[u+2]*2;if(n[0]=i[h],n[1]=i[h+1],n[2]=i[l],n[3]=i[l+1],n[4]=i[f],n[5]=i[f+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Container),fragment$5=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,MeshMaterial=function(e){__extends$9(t,e);function t(r,i){var n=this,s={uSampler:r,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),n=e.call(this,i.program||Program.from(vertex$2,fragment$5),s)||this,n._colorDirty=!1,n.uvMatrix=new TextureMatrix(r),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Shader),MeshGeometry=function(e){__extends$9(t,e);function t(r,i,n){var s=e.call(this)||this,o=new Buffer(r),a=new Buffer(i,!0),u=new Buffer(n,!0,!0);return s.addAttribute("aVertexPosition",o,2,!1,TYPES$3.FLOAT).addAttribute("aTextureCoord",a,2,!1,TYPES$3.FLOAT).addIndex(u),s._updateId=-1,s}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Geometry);/*!
 * @pixi/text-bitmap - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$8=function(e,t){return extendStatics$8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$8(e,t)};function __extends$8(e,t){extendStatics$8(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var BitmapFontData=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return e}(),TextFormat=function(){function e(){}return e.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},e.parse=function(t){var r=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in r){var s=r[n].match(/^[a-z]+/gm)[0],o=r[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var u in o){var h=o[u].split("="),l=h[0],f=h[1].replace(/"/gm,""),c=parseFloat(f),d=isNaN(c)?f:c;a[l]=d}i[s].push(a)}var v=new BitmapFontData;return i.info.forEach(function(m){return v.info.push({face:m.face,size:parseInt(m.size,10)})}),i.common.forEach(function(m){return v.common.push({lineHeight:parseInt(m.lineHeight,10)})}),i.page.forEach(function(m){return v.page.push({id:parseInt(m.id,10),file:m.file})}),i.char.forEach(function(m){return v.char.push({id:parseInt(m.id,10),page:parseInt(m.page,10),x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xoffset:parseInt(m.xoffset,10),yoffset:parseInt(m.yoffset,10),xadvance:parseInt(m.xadvance,10)})}),i.kerning.forEach(function(m){return v.kerning.push({first:parseInt(m.first,10),second:parseInt(m.second,10),amount:parseInt(m.amount,10)})}),i.distanceField.forEach(function(m){return v.distanceField.push({distanceRange:parseInt(m.distanceRange,10),fieldType:m.fieldType})}),v},e}(),XMLFormat=function(){function e(){}return e.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(t){for(var r=new BitmapFontData,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),u=t.getElementsByTagName("distanceField"),h=0;h<i.length;h++)r.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(var h=0;h<n.length;h++)r.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(var h=0;h<s.length;h++)r.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(var h=0;h<o.length;h++){var l=o[h];r.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(var h=0;h<a.length;h++)r.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(var h=0;h<u.length;h++)r.distanceField.push({fieldType:u[h].getAttribute("fieldType"),distanceRange:parseInt(u[h].getAttribute("distanceRange"),10)});return r},e}(),XMLStringFormat=function(){function e(){}return e.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return XMLFormat.test(r)}return!1},e.parse=function(t){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return XMLFormat.parse(r)},e}(),formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(e){for(var t=0;t<formats.length;t++)if(formats[t].test(e))return formats[t];return null}function generateFillStyle(e,t,r,i,n,s){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,u=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,l=e.width/i-u-h*2,f=e.height/i-u-h*2,c=o.slice(),d=r.fillGradientStops.slice();if(!d.length)for(var v=c.length+1,m=1;m<v;++m)d.push(m/v);if(c.unshift(o[0]),d.unshift(0),c.push(o[o.length-1]),d.push(1),r.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){a=t.createLinearGradient(l/2,h,l/2,f+h);for(var _=0,y=s.fontProperties.fontSize+r.strokeThickness,b=y/f,m=0;m<n.length;m++)for(var I=s.lineHeight*m,A=0;A<c.length;A++){var R=0;typeof d[A]=="number"?R=d[A]:R=A/c.length;var E=I/f+R*b,O=Math.max(_,E);O=Math.min(O,1),a.addColorStop(O,c[A]),_=O}}else{a=t.createLinearGradient(h,f/2,l+h,f/2);for(var U=c.length+1,P=1,m=0;m<c.length;m++){var M=void 0;typeof d[m]=="number"?M=d[m]:M=P/U,a.addColorStop(M,c[m]),P++}}return a}function drawGlyph(e,t,r,i,n,s,o){var a=r.text,u=r.fontProperties;t.translate(i,n),t.scale(s,s);var h=o.strokeThickness/2,l=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=generateFillStyle(e,t,o,s,[a],r),t.strokeStyle=o.stroke,o.dropShadow){var f=o.dropShadowColor,c=hex2rgb(typeof f=="number"?f:string2hex(f)),d=o.dropShadowBlur*s,v=o.dropShadowDistance*s;t.shadowColor="rgba("+c[0]*255+","+c[1]*255+","+c[2]*255+","+o.dropShadowAlpha+")",t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*v,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*v}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,l+r.lineHeight-u.descent),o.fill&&t.fillText(a,h,l+r.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function splitTextToCharacters(e){return Array.from?Array.from(e):e.split("")}function resolveCharacters(e){typeof e=="string"&&(e=[e]);for(var t=[],r=0,i=e.length;r<i;r++){var n=e[r];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,u=o;a<=u;a++)t.push(String.fromCharCode(a))}else t.push.apply(t,splitTextToCharacters(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function extractCharCode(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var BitmapFont=function(){function e(t,r,i){var n,s,o=t.info[0],a=t.common[0],u=t.page[0],h=t.distanceField[0],l=getResolutionOfUrl(u.file),f={};this._ownsTextures=i,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/l,this.chars={},this.pageTextures=f;for(var c=0;c<t.page.length;c++){var d=t.page[c],v=d.id,m=d.file;f[v]=r instanceof Array?r[c]:r[m],(h==null?void 0:h.fieldType)&&h.fieldType!=="none"&&(f[v].baseTexture.alphaMode=ALPHA_MODES$3.NO_PREMULTIPLIED_ALPHA)}for(var c=0;c<t.char.length;c++){var _=t.char[c],v=_.id,y=_.page,b=t.char[c],I=b.x,A=b.y,R=b.width,E=b.height,O=b.xoffset,U=b.yoffset,P=b.xadvance;I/=l,A/=l,R/=l,E/=l,O/=l,U/=l,P/=l;var M=new Rectangle(I+f[y].frame.x/l,A+f[y].frame.y/l,R,E);this.chars[v]={xOffset:O,yOffset:U,xAdvance:P,kerning:{},texture:new Texture(f[y].baseTexture,M),page:y}}for(var c=0;c<t.kerning.length;c++){var k=t.kerning[c],H=k.first,J=k.second,le=k.amount;H/=l,J/=l,le/=l,this.chars[J]&&(this.chars[J].kerning[H]=le)}this.distanceFieldRange=h==null?void 0:h.distanceRange,this.distanceFieldType=(s=(n=h==null?void 0:h.fieldType)===null||n===void 0?void 0:n.toLowerCase())!==null&&s!==void 0?s:"none"}return e.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},e.install=function(t,r,i){var n;if(t instanceof BitmapFontData)n=t;else{var s=autoDetectFormat(t);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(t)}r instanceof Texture&&(r=[r]);var o=new e(n,r,i);return e.available[o.font]=o,o},e.uninstall=function(t){var r=e.available[t];if(!r)throw new Error("No font found named '"+t+"'");r.destroy(),delete e.available[t]},e.from=function(t,r,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},e.defaultOptions,i),s=n.chars,o=n.padding,a=n.resolution,u=n.textureWidth,h=n.textureHeight,l=resolveCharacters(s),f=r instanceof TextStyle?r:new TextStyle(r),c=u,d=new BitmapFontData;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var v=0,m=0,_,y,b,I=0,A=[],R=0;R<l.length;R++){_||(_=document.createElement("canvas"),_.width=u,_.height=h,y=_.getContext("2d"),b=new BaseTexture(_,{resolution:a}),A.push(new Texture(b)),d.page.push({id:A.length-1,file:""}));var E=TextMetrics.measureText(l[R],f,!1,_),O=E.width,U=Math.ceil(E.height),P=Math.ceil((f.fontStyle==="italic"?2:1)*O);if(m>=h-U*a){if(m===0)throw new Error("[BitmapFont] textureHeight "+h+"px is "+("too small for "+f.fontSize+"px fonts"));--R,_=null,y=null,b=null,m=0,v=0,I=0;continue}if(I=Math.max(U+E.fontProperties.descent,I),P*a+v>=c){--R,m+=I*a,m=Math.ceil(m),v=0,I=0;continue}drawGlyph(_,y,E,v,m,a,f);var M=extractCharCode(E.text);d.char.push({id:M,page:A.length-1,x:v/a,y:m/a,width:P,height:U,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),v+=(P+2*o)*a,v=Math.ceil(v)}for(var R=0,k=l.length;R<k;R++)for(var H=l[R],J=0;J<k;J++){var le=l[J],X=y.measureText(H).width,G=y.measureText(le).width,V=y.measureText(H+le).width,z=V-(X+G);z&&d.kerning.push({first:extractCharCode(H),second:extractCharCode(le),amount:z})}var ie=new e(d,A,!0);return e.available[t]!==void 0&&e.uninstall(t),e.available[t]=ie,ie},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[];(function(e){__extends$8(t,e);function t(r,i){i===void 0&&(i={});var n=e.call(this)||this;n._tint=16777215;var s=Object.assign({},t.styleDefaults,i),o=s.align,a=s.tint,u=s.maxWidth,h=s.letterSpacing,l=s.fontName,f=s.fontSize;if(!BitmapFont.available[l])throw new Error('Missing BitmapFont "'+l+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=o,n._tint=a,n._fontName=l,n._fontSize=f||BitmapFont.available[l].size,n._text=r,n._maxWidth=u,n._maxLineHeight=0,n._letterSpacing=h,n._anchor=new ObservablePoint(function(){n.dirty=!0},n,0,0),n._roundPixels=settings.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return t.prototype.updateText=function(){for(var r,i=BitmapFont.available[this._fontName],n=this._fontSize/i.size,s=new Point,o=[],a=[],u=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=splitTextToCharacters(h),f=this._maxWidth*i.size/this._fontSize,c=i.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData,d=null,v=0,m=0,_=0,y=-1,b=0,I=0,A=0,R=0,E=0;E<l.length;E++){var O=l[E],U=extractCharCode(O);if(/(?:\s)/.test(O)&&(y=E,b=v,R++),O==="\r"||O===`
`){a.push(v),u.push(-1),m=Math.max(m,v),++_,++I,s.x=0,s.y+=i.lineHeight,d=null,R=0;continue}var P=i.chars[U];if(!!P){d&&P.kerning[d]&&(s.x+=P.kerning[d]);var M=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};M.texture=P.texture,M.line=_,M.charCode=U,M.position.x=s.x+P.xOffset+this._letterSpacing/2,M.position.y=s.y+P.yOffset,M.prevSpaces=R,o.push(M),v=M.position.x+Math.max(P.xAdvance,P.texture.orig.width),s.x+=P.xAdvance+this._letterSpacing,A=Math.max(A,P.yOffset+P.texture.height),d=U,y!==-1&&f>0&&s.x>f&&(++I,removeItems(o,1+y-I,1+E-y),E=y,y=-1,a.push(b),u.push(o.length>0?o[o.length-1].prevSpaces:0),m=Math.max(m,b),_++,s.x=0,s.y+=i.lineHeight,d=null,R=0)}}var k=l[l.length-1];k!=="\r"&&k!==`
`&&(/(?:\s)/.test(k)&&(v=b),a.push(v),m=Math.max(m,v),u.push(-1));for(var H=[],E=0;E<=_;E++){var J=0;this._align==="right"?J=m-a[E]:this._align==="center"?J=(m-a[E])/2:this._align==="justify"&&(J=u[E]<0?0:(m-a[E])/u[E]),H.push(J)}for(var le=o.length,X={},G=[],V=this._activePagesMeshData,E=0;E<V.length;E++)c.push(V[E]);for(var E=0;E<le;E++){var z=o[E].texture,ie=z.baseTexture.uid;if(!X[ie]){var N=c.pop();if(!N){var q=new MeshGeometry,Z=void 0,ee=void 0;i.distanceFieldType==="none"?(Z=new MeshMaterial(Texture.EMPTY),ee=BLEND_MODES$3.NORMAL):(Z=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),ee=BLEND_MODES$3.NORMAL_NPM);var ne=new Mesh(q,Z);ne.blendMode=ee,N={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ne,vertices:null,uvs:null,indices:null}}N.index=0,N.indexCount=0,N.vertexCount=0,N.uvsCount=0,N.total=0;var de=this._textureCache;de[ie]=de[ie]||new Texture(z.baseTexture),N.mesh.texture=de[ie],N.mesh.tint=this._tint,G.push(N),X[ie]=N}X[ie].total++}for(var E=0;E<V.length;E++)G.indexOf(V[E])===-1&&this.removeChild(V[E].mesh);for(var E=0;E<G.length;E++)G[E].mesh.parent!==this&&this.addChild(G[E].mesh);this._activePagesMeshData=G;for(var E in X){var N=X[E],se=N.total;if(!(((r=N.indices)===null||r===void 0?void 0:r.length)>6*se)||N.vertices.length<Mesh.BATCHABLE_SIZE*2)N.vertices=new Float32Array(4*2*se),N.uvs=new Float32Array(4*2*se),N.indices=new Uint16Array(6*se);else for(var oe=N.total,ve=N.vertices,ce=oe*4*2;ce<ve.length;ce++)ve[ce]=0;N.mesh.size=6*se}for(var E=0;E<le;E++){var O=o[E],ue=O.position.x+H[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(ue=Math.round(ue));var te=ue*n,ae=O.position.y*n,z=O.texture,g=X[z.baseTexture.uid],T=z.frame,S=z._uvs,C=g.index++;g.indices[C*6+0]=0+C*4,g.indices[C*6+1]=1+C*4,g.indices[C*6+2]=2+C*4,g.indices[C*6+3]=0+C*4,g.indices[C*6+4]=2+C*4,g.indices[C*6+5]=3+C*4,g.vertices[C*8+0]=te,g.vertices[C*8+1]=ae,g.vertices[C*8+2]=te+T.width*n,g.vertices[C*8+3]=ae,g.vertices[C*8+4]=te+T.width*n,g.vertices[C*8+5]=ae+T.height*n,g.vertices[C*8+6]=te,g.vertices[C*8+7]=ae+T.height*n,g.uvs[C*8+0]=S.x0,g.uvs[C*8+1]=S.y0,g.uvs[C*8+2]=S.x1,g.uvs[C*8+3]=S.y1,g.uvs[C*8+4]=S.x2,g.uvs[C*8+5]=S.y2,g.uvs[C*8+6]=S.x3,g.uvs[C*8+7]=S.y3}this._textWidth=m*n,this._textHeight=(s.y+i.lineHeight)*n;for(var E in X){var N=X[E];if(this.anchor.x!==0||this.anchor.y!==0)for(var w=0,L=this._textWidth*this.anchor.x,$=this._textHeight*this.anchor.y,D=0;D<N.total;D++)N.vertices[w++]-=L,N.vertices[w++]-=$,N.vertices[w++]-=L,N.vertices[w++]-=$,N.vertices[w++]-=L,N.vertices[w++]-=$,N.vertices[w++]-=L,N.vertices[w++]-=$;this._maxLineHeight=A*n;var B=N.mesh.geometry.getBuffer("aVertexPosition"),F=N.mesh.geometry.getBuffer("aTextureCoord"),W=N.mesh.geometry.getIndex();B.data=N.vertices,F.data=N.uvs,W.data=N.indices,B.update(),F.update(),W.update()}for(var E=0;E<o.length;E++)charRenderDataPool.push(o[E])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(r){var i=BitmapFont.available[this._fontName],n=i.distanceFieldRange,s=i.distanceFieldType,o=i.size;if(s!=="none")for(var a=this.worldTransform,u=a.a,h=a.b,l=a.c,f=a.d,c=Math.sqrt(u*u+h*h),d=Math.sqrt(l*l+f*f),v=(Math.abs(c)+Math.abs(d))/2,m=this._fontSize/o,_=0,y=this._activePagesMeshData;_<y.length;_++){var b=y[_];b.mesh.shader.uniforms.uFWidth=v*n*m*r.resolution}e.prototype._render.call(this,r)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!BitmapFont.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype.destroy=function(r){var i=this._textureCache;for(var n in i){var s=i[n];s.destroy(),delete i[n]}this._textureCache=null,e.prototype.destroy.call(this,r)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t})(Container);var BitmapFontLoader=function(){function e(){}return e.add=function(){LoaderResource.setExtensionXhrType("fnt",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){var i=autoDetectFormat(t.data);if(!i){r();return}for(var n=e.getBaseUrl(this,t),s=i.parse(t.data),o={},a=function(m){o[m.metadata.pageFile]=m.texture,Object.keys(o).length===s.page.length&&(t.bitmapFont=BitmapFont.install(s,o,!0),r())},u=0;u<s.page.length;++u){var h=s.page[u].file,l=n+h,f=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===l){d.metadata.pageFile=h,d.texture?a(d):d.onAfterMiddleware.add(a),f=!0;break}}if(!f){var v={crossOrigin:t.crossOrigin,loadType:LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},t.metadata.imageMetadata),parentResource:t};this.add(l,v,a)}}},e.getBaseUrl=function(t,r){var i=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&(i==="."&&(i=""),t.baseUrl&&i&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(t.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},e.dirname=function(t){var r=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===t?".":r===""?"/":r},e}();/*!
 * @pixi/filter-alpha - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$7=function(e,t){return extendStatics$7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$7(e,t)};function __extends$7(e,t){extendStatics$7(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fragment$4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(e){__extends$7(t,e);function t(r){r===void 0&&(r=1);var i=e.call(this,defaultVertex$2,fragment$4,{uAlpha:1})||this;return i.alpha=r,i}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t})(Filter);/*!
 * @pixi/filter-blur - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$6=function(e,t){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$6(e,t)};function __extends$6(e,t){extendStatics$6(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(e,t){var r=Math.ceil(e/2),i=vertTemplate,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",o-(r-1)+".0"),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",e.toString()),i}var GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(e){for(var t=GAUSSIAN_VALUES[e],r=t.length,i=fragTemplate,n="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,a=0;a<e;a++){var u=s.replace("%index%",a.toString());o=a,a>=r&&(o=e-a-1),u=u.replace("%value%",t[o].toString()),n+=u,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",e.toString()),i}/*!
 * @pixi/constants - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$1;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$1||(ENV$1={}));var RENDERER_TYPE$1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$1||(RENDERER_TYPE$1={}));var BUFFER_BITS$1;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$1||(BUFFER_BITS$1={}));var BLEND_MODES$1;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$1||(BLEND_MODES$1={}));var DRAW_MODES$1;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$1||(DRAW_MODES$1={}));var FORMATS$1;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$1||(FORMATS$1={}));var TARGETS$1;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$1||(TARGETS$1={}));var TYPES$1;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$1||(TYPES$1={}));var SAMPLER_TYPES$1;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$1||(SAMPLER_TYPES$1={}));var SCALE_MODES$1;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$1||(SCALE_MODES$1={}));var WRAP_MODES$1;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$1||(WRAP_MODES$1={}));var MIPMAP_MODES$1;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$1||(MIPMAP_MODES$1={}));var ALPHA_MODES$1;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$1||(ALPHA_MODES$1={}));var CLEAR_MODES$1;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$1||(CLEAR_MODES$1={}));var GC_MODES$1;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$1||(GC_MODES$1={}));var PRECISION$1;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$1||(PRECISION$1={}));var MASK_TYPES$1;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(MASK_TYPES$1||(MASK_TYPES$1={}));var MSAA_QUALITY$1;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$1||(MSAA_QUALITY$1={}));var BUFFER_TYPE$1;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$1||(BUFFER_TYPE$1={}));var BlurFilterPass=function(e){__extends$6(t,e);function t(r,i,n,s,o){i===void 0&&(i=8),n===void 0&&(n=4),s===void 0&&(s=settings.FILTER_RESOLUTION),o===void 0&&(o=5);var a=this,u=generateBlurVertSource(o,r),h=generateBlurFragSource(o);return a=e.call(this,u,h)||this,a.horizontal=r,a.resolution=s,a._quality=0,a.quality=n,a.blur=i,a}return t.prototype.apply=function(r,i,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/i.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,i,n,s);else{var o=r.getFilterTexture(),a=r.renderer,u=i,h=o;this.state.blend=!1,r.applyFilter(this,u,h,CLEAR_MODES$1.CLEAR);for(var l=1;l<this.passes-1;l++){r.bindAndClear(u,CLEAR_MODES$1.BLIT),this.uniforms.uSampler=h;var f=h;h=u,u=f,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,h,n,s),r.returnFilterTexture(o)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),t}(Filter);(function(e){__extends$6(t,e);function t(r,i,n,s){r===void 0&&(r=8),i===void 0&&(i=4),n===void 0&&(n=settings.FILTER_RESOLUTION),s===void 0&&(s=5);var o=e.call(this)||this;return o.blurXFilter=new BlurFilterPass(!0,r,i,n,s),o.blurYFilter=new BlurFilterPass(!1,r,i,n,s),o.resolution=n,o.quality=i,o.blur=r,o.repeatEdgePixels=!1,o}return t.prototype.apply=function(r,i,n,s){var o=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(o&&a){var u=r.getFilterTexture();this.blurXFilter.apply(r,i,u,CLEAR_MODES$1.CLEAR),this.blurYFilter.apply(r,u,n,s),r.returnFilterTexture(u)}else a?this.blurYFilter.apply(r,i,n,s):this.blurXFilter.apply(r,i,n,s)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),t})(Filter);/*!
 * @pixi/filter-color-matrix - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$5=function(e,t){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$5(e,t)};function __extends$5(e,t){extendStatics$5(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fragment$3=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,ColorMatrixFilter=function(e){__extends$5(t,e);function t(){var r=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=e.call(this,defaultFilterVertex,fragment$3,i)||this,r.alpha=1,r}return t.prototype._loadMatrix=function(r,i){i===void 0&&(i=!1);var n=r;i&&(this._multiply(n,this.uniforms.m,r),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(r,i,n){return r[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],r[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],r[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],r[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],r[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],r[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],r[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],r[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],r[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],r[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],r[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],r[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],r[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],r[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],r[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],r[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],r[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],r[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],r[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],r[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],r},t.prototype._colorMatrix=function(r){var i=new Float32Array(r);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},t.prototype.brightness=function(r,i){var n=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.tint=function(r,i){var n=r>>16&255,s=r>>8&255,o=r&255,a=[n/255,0,0,0,0,0,s/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.greyscale=function(r,i){var n=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.blackAndWhite=function(r){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.hue=function(r,i){r=(r||0)/180*Math.PI;var n=Math.cos(r),s=Math.sin(r),o=Math.sqrt,a=1/3,u=o(a),h=n+(1-n)*a,l=a*(1-n)-u*s,f=a*(1-n)+u*s,c=a*(1-n)+u*s,d=n+a*(1-n),v=a*(1-n)-u*s,m=a*(1-n)-u*s,_=a*(1-n)+u*s,y=n+a*(1-n),b=[h,l,f,0,0,c,d,v,0,0,m,_,y,0,0,0,0,0,1,0];this._loadMatrix(b,i)},t.prototype.contrast=function(r,i){var n=(r||0)+1,s=-.5*(n-1),o=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(o,i)},t.prototype.saturate=function(r,i){r===void 0&&(r=0);var n=r*2/3+1,s=(n-1)*-.5,o=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(o,i)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(r){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.sepia=function(r){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.technicolor=function(r){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.polaroid=function(r){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.toBGR=function(r){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.kodachrome=function(r){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.browni=function(r){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.vintage=function(r){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.colorTone=function(r,i,n,s,o){r=r||.2,i=i||.15,n=n||16770432,s=s||3375104;var a=(n>>16&255)/255,u=(n>>8&255)/255,h=(n&255)/255,l=(s>>16&255)/255,f=(s>>8&255)/255,c=(s&255)/255,d=[.3,.59,.11,0,0,a,u,h,r,0,l,f,c,i,0,a-l,u-f,h-c,0,0];this._loadMatrix(d,o)},t.prototype.night=function(r,i){r=r||.1;var n=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.predator=function(r,i){var n=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.lsd=function(r){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t}(Filter);ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$4=function(e,t){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$4(e,t)};function __extends$4(e,t){extendStatics$4(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fragment$2=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(e){__extends$4(t,e);function t(r,i){var n=this,s=new Matrix;return r.renderable=!1,n=e.call(this,vertex$1,fragment$2,{mapSampler:r._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=r,n.maskMatrix=s,i==null&&(i=20),n.scale=new Point(i,i),n}return t.prototype.apply=function(r,i,n,s){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,a=Math.sqrt(o.a*o.a+o.b*o.b),u=Math.sqrt(o.c*o.c+o.d*o.d);a!==0&&u!==0&&(this.uniforms.rotation[0]=o.a/a,this.uniforms.rotation[1]=o.b/a,this.uniforms.rotation[2]=o.c/u,this.uniforms.rotation[3]=o.d/u),r.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),t})(Filter);/*!
 * @pixi/filter-fxaa - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$3=function(e,t){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$3(e,t)};function __extends$3(e,t){extendStatics$3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vertex=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,fragment$1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(e){__extends$3(t,e);function t(){return e.call(this,vertex,fragment$1)||this}return t})(Filter);/*!
 * @pixi/filter-noise - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$2=function(e,t){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$2(e,t)};function __extends$2(e,t){extendStatics$2(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fragment=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(e){__extends$2(t,e);function t(r,i){r===void 0&&(r=.5),i===void 0&&(i=Math.random());var n=e.call(this,defaultFilterVertex,fragment,{uNoise:0,uSeed:0})||this;return n.noise=r,n.seed=i,n}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),t})(Filter);/*!
 * @pixi/mixin-cache-as-bitmap - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV||(ENV={}));var RENDERER_TYPE;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE||(RENDERER_TYPE={}));var BUFFER_BITS;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS||(BUFFER_BITS={}));var BLEND_MODES;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES||(BLEND_MODES={}));var DRAW_MODES;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES||(DRAW_MODES={}));var FORMATS;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS||(FORMATS={}));var TARGETS;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS||(TARGETS={}));var TYPES;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES||(TYPES={}));var SAMPLER_TYPES;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES||(SAMPLER_TYPES={}));var SCALE_MODES;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES||(SCALE_MODES={}));var WRAP_MODES;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES||(WRAP_MODES={}));var MIPMAP_MODES;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES||(MIPMAP_MODES={}));var ALPHA_MODES;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES||(ALPHA_MODES={}));var CLEAR_MODES;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES||(CLEAR_MODES={}));var GC_MODES;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES||(GC_MODES={}));var PRECISION;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION||(PRECISION={}));var MASK_TYPES;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(MASK_TYPES||(MASK_TYPES={}));var MSAA_QUALITY;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY||(MSAA_QUALITY={}));var BUFFER_TYPE;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE||(BUFFER_TYPE={}));var _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=MSAA_QUALITY.NONE;var CacheData=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t;e?(this._cacheData||(this._cacheData=new CacheData),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});DisplayObject.prototype._renderCached=function e(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};DisplayObject.prototype._initCachedDisplayObject=function e(t){var r;if(!(this._cacheData&&this._cacheData.sprite)){var i=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;n.pad(s)}n.ceil(settings.RESOLUTION);var o=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),u=t.renderTexture.destinationFrame.clone(),h=t.projection.transform,l=RenderTexture.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:t.multisample}),f="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=f,BaseTexture.addToCache(l.baseTexture,f),Texture.addToCache(l,f);var c=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=h,t.renderTexture.bind(o,a,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var d=new Sprite(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};DisplayObject.prototype._renderCachedCanvas=function e(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function e(t){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,s=t._projTransform;r.ceil(settings.RESOLUTION);var o=RenderTexture.create({width:r.width,height:r.height}),a="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=a,BaseTexture.addToCache(o.baseTexture,a),Texture.addToCache(o,a);var u=_tempMatrix;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=r.x,u.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:u,skipUpdateTransform:!1}),t.context=n,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var h=new Sprite(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(r.x/r.width),h.anchor.y=-(r.y/r.height),h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}};DisplayObject.prototype._calculateCachedBounds=function e(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function e(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function e(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function e(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject.prototype.name=null;Container.prototype.getChildByName=function e(t,r){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(r)for(var i=0,n=this.children.length;i<n;i++){var s=this.children[i];if(!!s.getChildByName){var o=this.children[i].getChildByName(t,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject.prototype.getGlobalPosition=function e(t,r){return t===void 0&&(t=new Point),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/mesh-extras - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$1=function(e,t){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics$1(e,t)};function __extends$1(e,t){extendStatics$1(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var PlaneGeometry=function(e){__extends$1(t,e);function t(r,i,n,s){r===void 0&&(r=100),i===void 0&&(i=100),n===void 0&&(n=10),s===void 0&&(s=10);var o=e.call(this)||this;return o.segWidth=n,o.segHeight=s,o.width=r,o.height=i,o.build(),o}return t.prototype.build=function(){for(var r=this.segWidth*this.segHeight,i=[],n=[],s=[],o=this.segWidth-1,a=this.segHeight-1,u=this.width/o,h=this.height/a,l=0;l<r;l++){var f=l%this.segWidth,c=l/this.segWidth|0;i.push(f*u,c*h),n.push(f/o,c/a)}for(var d=o*a,l=0;l<d;l++){var v=l%o,m=l/o|0,_=m*this.segWidth+v,y=m*this.segWidth+v+1,b=(m+1)*this.segWidth+v,I=(m+1)*this.segWidth+v+1;s.push(_,y,b,y,I,b)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(MeshGeometry),RopeGeometry=function(e){__extends$1(t,e);function t(r,i,n){r===void 0&&(r=200),n===void 0&&(n=0);var s=e.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return s.points=i,s._width=r,s.textureScale=n,s.build(),s}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var r=this.points;if(!!r){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(r.length<1)){i.data.length/4!==r.length&&(i.data=new Float32Array(r.length*4),n.data=new Float32Array(r.length*4),s.data=new Uint16Array((r.length-1)*6));var o=n.data,a=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var u=0,h=r[0],l=this._width*this.textureScale,f=r.length,c=0;c<f;c++){var d=c*4;if(this.textureScale>0){var v=h.x-r[c].x,m=h.y-r[c].y,_=Math.sqrt(v*v+m*m);h=r[c],u+=_/l}else u=c/(f-1);o[d]=u,o[d+1]=0,o[d+2]=u,o[d+3]=1}for(var y=0,c=0;c<f-1;c++){var d=c*2;a[y++]=d,a[y++]=d+1,a[y++]=d+2,a[y++]=d+2,a[y++]=d+1,a[y++]=d+3}n.update(),s.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var i=r[0],n,s=0,o=0,a=this.buffers[0].data,u=r.length,h=0;h<u;h++){var l=r[h],f=h*4;h<r.length-1?n=r[h+1]:n=l,o=-(n.x-i.x),s=n.y-i.y;var c=Math.sqrt(s*s+o*o),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=c,o/=c,s*=d,o*=d,a[f]=l.x+s,a[f+1]=l.y+o,a[f+2]=l.x-s,a[f+3]=l.y-o,i=l}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(MeshGeometry);(function(e){__extends$1(t,e);function t(r,i,n){n===void 0&&(n=0);var s=this,o=new RopeGeometry(r.height,i,n),a=new MeshMaterial(r);return n>0&&(r.baseTexture.wrapMode=WRAP_MODES$3.REPEAT),s=e.call(this,o,a)||this,s.autoUpdate=!0,s}return t.prototype._render=function(r){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),e.prototype._render.call(this,r)},t})(Mesh);var SimplePlane=function(e){__extends$1(t,e);function t(r,i,n){var s=this,o=new PlaneGeometry(r.width,r.height,i,n),a=new MeshMaterial(Texture.WHITE);return s=e.call(this,o,a)||this,s.texture=r,s.autoResize=!0,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,i=this.shader.texture,n=i.width,s=i.height;this.autoResize&&(r.width!==n||r.height!==s)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,r)},t.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,r)},t}(Mesh);(function(e){__extends$1(t,e);function t(r,i,n,s,o){r===void 0&&(r=Texture.EMPTY);var a=this,u=new MeshGeometry(i,n,s);u.getBuffer("aVertexPosition").static=!1;var h=new MeshMaterial(r);return a=e.call(this,u,h,null,o)||this,a.autoUpdate=!0,a}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,r)},t})(Mesh);var DEFAULT_BORDER_SIZE=10;(function(e){__extends$1(t,e);function t(r,i,n,s,o){i===void 0&&(i=DEFAULT_BORDER_SIZE),n===void 0&&(n=DEFAULT_BORDER_SIZE),s===void 0&&(s=DEFAULT_BORDER_SIZE),o===void 0&&(o=DEFAULT_BORDER_SIZE);var a=e.call(this,Texture.WHITE,4,4)||this;return a._origWidth=r.orig.width,a._origHeight=r.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=s,a._topHeight=n,a._bottomHeight=o,a.texture=r,a}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var r=this.vertices,i=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*i,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*i,r[25]=r[27]=r[29]=r[31]=this._height},t.prototype.updateVerticalVertices=function(){var r=this.vertices,i=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*i,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*i,r[6]=r[14]=r[22]=r[30]=this._width},t.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,i=this._width>r?1:this._width/r,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n,o=Math.min(i,s);return o},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var r=this.texture,i=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var n=1/this._origWidth,s=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=s*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t})(SimplePlane);/*!
 * @pixi/sprite-animated - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},extendStatics(e,t)};function __extends(e,t){extendStatics(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}(function(e){__extends(t,e);function t(r,i){i===void 0&&(i=!0);var n=e.call(this,r[0]instanceof Texture?r[0]:r[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=r,n}return t.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(r){this.stop();var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(r){var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(r){if(!!this._playing){var i=this.animationSpeed*r,n=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(r){this.stop(),e.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(r){for(var i=[],n=0;n<r.length;++n)i.push(Texture.from(r[n]));return new t(i)},t.fromImages=function(r){for(var i=[],n=0;n<r.length;++n)i.push(Texture.from(r[n]));return new t(i)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof Texture)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<r.length;i++)this._textures.push(r[i].texture),this._durations.push(r[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t})(Sprite);/*!
 * pixi.js - v6.3.0
 * Compiled Wed, 23 Mar 2022 18:58:56 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Renderer.registerPlugin("accessibility",AccessibilityManager);Renderer.registerPlugin("extract",Extract);Renderer.registerPlugin("interaction",InteractionManager);Renderer.registerPlugin("particle",ParticleRenderer);Renderer.registerPlugin("prepare",Prepare);Renderer.registerPlugin("batch",BatchRenderer);Renderer.registerPlugin("tilingSprite",TilingSpriteRenderer);Loader.registerPlugin(BitmapFontLoader);Loader.registerPlugin(CompressedTextureLoader);Loader.registerPlugin(DDSLoader);Loader.registerPlugin(KTXLoader);Loader.registerPlugin(SpritesheetLoader);Application.registerPlugin(TickerPlugin);Application.registerPlugin(AppLoaderPlugin);class Constants{}Y(Constants,"CELL_SIZE",16),Y(Constants,"ANIMATION_UNIT_SPEED",250);class TransformComponent extends Component{constructor(){super(...arguments);Y(this,"position");Y(this,"rotation")}}TransformComponent.schema={position:{type:Types.Ref},rotation:{type:Types.Number,default:0}};class SizeComponent extends Component{}SizeComponent.schema={width:{type:Types.Number,default:0},height:{type:Types.Number,default:0}};class SelectableComponent extends Component{}SelectableComponent.schema={selected:{type:Types.Boolean,default:!1}};class MovableComponent extends Component{}MovableComponent.schema={moving:{type:Types.Boolean,default:!1}};class HealthComponent extends Component{}HealthComponent.schema={points:{type:Types.Number,default:10},maxPoints:{type:Types.Number,default:10}};class GridComponent extends Component{}GridComponent.schema={grid:{type:Types.Ref}};const me=class{constructor(t,r){this.x=t,this.y=r}static angle(t,r){return Math.atan2(r.y-t.y,r.x-t.x)*(180/Math.PI)}static distance(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}static scale(t,r){return new me(t.x*r.x,t.y*r.y)}static min(t,r){return new me(Math.min(t.x,r.x),Math.min(t.y,r.y))}static max(t,r){return new me(Math.max(t.x,r.x),Math.max(t.y,r.y))}static lerp(t,r,i){return new me(t.x*(1-i)+r.x*i,t.y*(1-i)+r.y*i)}static subtracts(t,r){return new me(t.x-r.x,t.y-r.y)}static multiplies(t,r){return new me(t.x*r,t.y*r)}static divides(t,r,i){let n=t.x/r,s=t.y/r;return i&&(n=Math[i](n),s=Math[i](s)),new me(n,s)}static adds(t,r){return new me(t.x+r.x,t.y+r.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalized(){const t=this.magnitude();return new me(this.x!==0?this.x/t:0,this.y!==0?this.y/t:0)}equals(t){return this.x===t.x&&this.y===t.y}toString(){return`${this.x},${this.y}`}};let Vector2=me;Y(Vector2,"ZERO",Object.seal(new me(0,0)));class MoveTransformVelocityComponent extends Component{constructor(){super(...arguments);Y(this,"moveSpeed");Y(this,"velocity")}}MoveTransformVelocityComponent.schema={moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO}};class MovePositionDirectComponent extends Component{constructor(){super(...arguments);Y(this,"movePosition")}}MovePositionDirectComponent.schema={movePosition:{type:Types.Ref,default:null}};class PlayerMovementMouseComponent extends TagComponent{}class PlayerMovementKeysComponent extends TagComponent{}class MoveVelocityComponent extends Component{constructor(){super(...arguments);Y(this,"moveSpeed");Y(this,"velocity")}}MoveVelocityComponent.schema={moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO}};class PathfindingComponent extends Component{}PathfindingComponent.schema={pathfinding:{type:Types.Ref}};class Bounds{constructor(t,r){Y(this,"extends");Y(this,"min");Y(this,"max");this.center=t,this.size=r,this.extends=new Vector2(r.x/2,r.y/2),this.min=Vector2.subtracts(this.center,this.extends),this.max=Vector2.adds(this.center,this.extends)}contains(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}}class AliveComponent extends Component{}AliveComponent.schema={alive:{type:Types.Boolean,default:!0}};class EntityHelper{static isAlive(t){const r=t.getComponent(AliveComponent);return(r==null?void 0:r.alive)||!1}static isPositionInsideEntity(t,r,i){const n=t.getComponent(TransformComponent),s=t.getComponent(SizeComponent);return!n||!s?!1:new Bounds(n.position,new Vector2(s.width,s.height)).contains(new Vector2(r,i))}static isObjectInsideContainer(t,r){const i=t.getComponent(TransformComponent);return i?i.position.x>=r.x&&i.position.x<=r.x+r.width&&i.position.y>=r.y&&i.position.y<=r.y+r.height:!1}static deselect(t){const r=t.getMutableComponent(SelectableComponent);!r||(r.selected=!1)}static select(t){const r=t.getMutableComponent(SelectableComponent);!r||(r.selected=!0)}static isSelected(t){const r=t.getComponent(SelectableComponent);return r?r.selected:!1}static isMoving(t){const r=t.getComponent(MovePositionDirectComponent);return r?r.movePosition!==null:!1}}class Input{static addKeyStatus(t,r){this.keysStatus[t]=r}static setMouseButton(t,r){r==="click"?this.mouseClick=1:r==="dblclick"?this.mouseClick=2:this.mouseButtons[t]=r}static clearKeysStatus(){for(const t of Object.keys(this.keysStatus))this.keysStatus[t]==="keyup"&&(this.keysStatus[t]=void 0)}static clearMouseStatuses(){for(const t of Object.keys(this.mouseButtons)){const r=parseInt(t);this.mouseButtons[r]==="mouseup"&&(this.mouseButtons[r]=void 0)}this.mouseClick=0}static isKey(t,r){return this.keysStatus[t]===r}static isKeyPressed(t){return this.isKey(t,"keypress")}static isKeyDown(t){return this.isKey(t,"keydown")}static isKeyUp(t){return this.isKey(t,"keyup")}static isMouseButtonUp(t){return this.mouseButtons[t]==="mouseup"}static isMouseButtonDown(t){return this.mouseButtons[t]==="mousedown"}static isMouseClick(){return this.mouseClick===1}static isMouseDblClick(){return this.mouseClick===2}}Y(Input,"keysStatus",{}),Y(Input,"mousePosition",Vector2.ZERO),Y(Input,"mouseButtons",{}),Y(Input,"mouseClick",0);const xe=class extends System{constructor(r,i){super(r,i);Y(this,"startPosition",null);Y(this,"deselectEntitiesTimeout",null);Y(this,"app");Y(this,"rectangle");this.app=i.app,this.rectangle=new Graphics,this.rectangle.visible=!1,this.app.stage.addChild(this.rectangle)}getSelected(){return this.queries.selectable.results.filter(r=>{var i;return((i=r.getComponent(SelectableComponent))==null?void 0:i.selected)||!1})}startSelect(){this.rectangle.visible=!0}updateSelect(){const r=Input.mousePosition.x-this.startPosition.x,i=Input.mousePosition.y-this.startPosition.y;this.getSelected().forEach(EntityHelper.deselect),this.rectangle.clear(),this.rectangle.lineStyle(1,0),this.rectangle.drawRect(this.startPosition.x,this.startPosition.y,r,i)}endSelect(){this.selectEntities(),this.startPosition=null,this.rectangle.visible=!1,this.rectangle.clear()}selectEntities(){this.isSimpleClick()?this.selectOneEntity():this.selectMultipleEntities()}isSimpleClick(){return Vector2.distance(this.startPosition,Input.mousePosition)<xe.SINGLE_UNIT_DISTANCE}selectOneEntity(){const r=this.getEntityAtPosition(Input.mousePosition.x,Input.mousePosition.y);if(r)EntityHelper.select(r);else{Input.isMouseDblClick()||(this.deselectEntitiesTimeout=setTimeout(()=>{this.getSelected().forEach(EntityHelper.deselect)},300));return}}selectMultipleEntities(){const r=Input.mousePosition.x-this.startPosition.x,i=Input.mousePosition.y-this.startPosition.y;this.queries.selectable.results.filter(n=>EntityHelper.isObjectInsideContainer(n,{x:this.startPosition.x,y:this.startPosition.y,width:r,height:i})).forEach(n=>EntityHelper.select(n))}getEntityAtPosition(r,i){return this.queries.selectable.results.find(n=>EntityHelper.isPositionInsideEntity(n,r,i))||null}execute(r,i){Input.isMouseDblClick()&&this.deselectEntitiesTimeout!==null&&clearTimeout(this.deselectEntitiesTimeout),this.startPosition===null?Input.isMouseButtonDown(0)&&(this.startPosition=Input.mousePosition,this.startSelect()):Input.isMouseButtonUp(0)?this.endSelect():Vector2.distance(this.startPosition,Input.mousePosition)>xe.SINGLE_UNIT_DISTANCE&&this.updateSelect()}};let PlayerSelectionSystem=xe;Y(PlayerSelectionSystem,"queries",{selectable:{components:[SelectableComponent]}}),Y(PlayerSelectionSystem,"SINGLE_UNIT_DISTANCE",5);class HealthSystem extends System{execute(t,r){this.queries.healthy.added!==void 0&&this.queries.healthy.added.forEach(this.updateStatus),this.queries.healthy.changed!==void 0&&this.queries.healthy.changed.forEach(this.updateStatus)}updateStatus(t){const r=t.getComponent(HealthComponent);if(!!r&&!!t.hasComponent(AliveComponent)&&r.points===0){const i=t.getMutableComponent(AliveComponent);if(!i)return;i.alive=!1}}}Y(HealthSystem,"queries",{healthy:{components:[HealthComponent],listen:{added:!0,changed:!0}}});class AliveSystem extends System{execute(t,r){this.queries.alives.changed&&this.queries.alives.changed.forEach(i=>{this.isDead(i)&&this.handleDead(i)})}isDead(t){const r=t.getMutableComponent(AliveComponent);return r?!r.alive:!1}handleDead(t){t.removeComponent(SelectableComponent),t.removeComponent(HealthComponent)}}Y(AliveSystem,"queries",{alives:{components:[AliveComponent],listen:{changed:!0}}});class MoveTransformVelocitySystem extends System{execute(t,r){for(const i of this.queries.movables.results){const n=i.getComponent(MoveTransformVelocityComponent);if(!n)continue;const s=i.getMutableComponent(TransformComponent);!s||n.velocity.equals(Vector2.ZERO)||(s.position=Vector2.adds(s.position,Vector2.multiplies(n.velocity,n.moveSpeed*(t/1e3))))}}}Y(MoveTransformVelocitySystem,"queries",{movables:{components:[MoveTransformVelocityComponent,TransformComponent]}});class InputSystem extends System{constructor(r,i){super(r,i);Y(this,"canvas");Y(this,"keyQueue",[]);Y(this,"mouseEvents",[]);this.canvas=i.canvas,this.canvas.addEventListener("mousedown",n=>{this.mouseEvents.push(n)}),this.canvas.addEventListener("mouseup",n=>{this.mouseEvents.push(n)}),this.canvas.addEventListener("click",n=>{this.mouseEvents.push(n)}),this.canvas.addEventListener("dblclick",n=>{this.mouseEvents.push(n)}),this.canvas.addEventListener("mousemove",n=>{Input.mousePosition=new Vector2(n.offsetX,n.offsetY)}),window.addEventListener("keydown",n=>{this.keyQueue.push(n)}),window.addEventListener("keyup",n=>{this.keyQueue.push(n)}),window.addEventListener("keypress",n=>{this.keyQueue.push(n)})}execute(r,i){if(Input.clearMouseStatuses(),this.mouseEvents.length>0){let n;for(;n=this.mouseEvents.shift();)Input.setMouseButton(n.button,n.type)}if(Input.clearKeysStatus(),this.keyQueue.length>0){let n;for(;n=this.keyQueue.pop();)Input.addKeyStatus(n.key,n.type);this.keyQueue=[]}}}class PlayerMovementKeysSystem extends System{execute(t,r){for(const i of this.queries.entities.results){const n=i.getComponent(SelectableComponent);if(!n||!n.selected)continue;let s=0,o=0;Input.isKeyDown("w")&&(o-=1),Input.isKeyDown("s")&&(o+=1),Input.isKeyDown("a")&&(s-=1),Input.isKeyDown("d")&&(s+=1);const a=new Vector2(s,o).normalized(),u=i.getMutableComponent(MoveTransformVelocityComponent);u&&(u.velocity=a);const h=i.getMutableComponent(MoveVelocityComponent);h&&(h.velocity=a);const l=i.getMutableComponent(TransformComponent);!l||a.equals(Vector2.ZERO)||(l.rotation=Vector2.angle(Vector2.ZERO,a)-90)}}}Y(PlayerMovementKeysSystem,"queries",{entities:{components:[PlayerMovementKeysComponent,SelectableComponent]}});class MovePositionDirectSystem extends System{execute(t,r){for(const i of this.queries.entities.results){const n=i.getMutableComponent(MovePositionDirectComponent);if((n==null?void 0:n.movePosition)==null)continue;const s=i.getMutableComponent(TransformComponent);if(!s)continue;const o=i.getMutableComponent(MoveTransformVelocityComponent);if(o){if(Vector2.distance(s.position,n.movePosition)<5){n.movePosition=null,o.velocity=Vector2.ZERO;continue}o.velocity=Vector2.subtracts(n.movePosition,s.position).normalized()}const a=i.getMutableComponent(MoveVelocityComponent);if(a){if(Vector2.distance(s.position,n.movePosition)<5){n.movePosition=null,a.velocity=Vector2.ZERO;continue}a.velocity=Vector2.subtracts(n.movePosition,s.position).normalized()}s.rotation=Vector2.angle(s.position,n.movePosition)-90}}}Y(MovePositionDirectSystem,"queries",{entities:{components:[MovePositionDirectComponent]}});class PlayerMovementMouseSystem extends System{execute(t,r){if(Input.isMouseButtonUp(2)||Input.isMouseDblClick()){const i=this.queries.pathfinding.results[0].getComponent(PathfindingComponent).pathfinding;for(const n of this.queries.entities.results){const s=n.getComponent(SelectableComponent);if(!s||!s.selected)continue;const o=n.getMutableComponent(MovePositionDirectComponent);if(!o)continue;const a=n.getComponent(TransformComponent);if(!a)continue;const u=i.grid.getPosition(a.position),h=i.grid.getPosition(Input.mousePosition),l=i.findPath(u.x,u.y,h.x,h.y);console.log(l),o.movePosition=Input.mousePosition}}}}Y(PlayerMovementMouseSystem,"queries",{entities:{components:[PlayerMovementMouseComponent]},pathfinding:{components:[PathfindingComponent]}});class SpriteComponent extends Component{constructor(){super(...arguments);Y(this,"addedToStage",!1)}}SpriteComponent.schema={sprite:{type:Types.Ref},addedToStage:{type:Types.Boolean}};class MoveVelocitySystem extends System{constructor(t,r){super(t,r)}execute(t,r){this.queries.bodies.results.forEach(i=>this.updateEntityBody(i,t))}updateEntityBody(t,r){const i=t.getMutableComponent(MoveVelocityComponent);if((i==null?void 0:i.velocity)==null)return;const n=t.getMutableComponent(TransformComponent);if(!n)return;i.moveSpeed*(r/1e3),n.position.x=n.position.x+i.velocity.x,n.position.y=n.position.y+i.velocity.y;const s=t.getComponent(SpriteComponent);s!=null&&s.sprite.position.set(n.position.x,n.position.y)}}Y(MoveVelocitySystem,"queries",{bodies:{components:[MoveVelocityComponent,TransformComponent],listen:{added:!0}},alive:{components:[AliveComponent],listen:{changed:!0}}});class GraphicsComponent extends Component{constructor(){super(...arguments);Y(this,"addedToStage",!1)}}GraphicsComponent.schema={graphics:{type:Types.Ref},addedToStage:{type:Types.Boolean}};class EntityFactory{static createUnit(t,r){const i=Constants.CELL_SIZE,n=Constants.CELL_SIZE;let s=Math.random()*360;s-=s%90;const o=new Sprite(r.texture);o.anchor.set(.5),o.position.set(r.position.x,r.position.y),t.createEntity().addComponent(TransformComponent,{position:new Vector2(r.position.x,r.position.y),rotation:s}).addComponent(SizeComponent,{width:i,height:n}).addComponent(MovableComponent).addComponent(SelectableComponent).addComponent(HealthComponent,{points:Math.round(Math.random()*10),maxPoints:10}).addComponent(AliveComponent).addComponent(MoveVelocityComponent,{moveSpeed:50}).addComponent(PlayerMovementKeysComponent).addComponent(MovePositionDirectComponent).addComponent(PlayerMovementMouseComponent).addComponent(SpriteComponent,{sprite:o}).addComponent(GraphicsComponent,{graphics:new Graphics})}}Y(EntityFactory,"first",!0);const Ie=class{constructor(t){Y(this,"eventTarget");t=t||""+ ++Ie.counter,this.eventTarget=document.appendChild(document.createComment("EventBus: "+t))}on(t,r){this.eventTarget.addEventListener(t,r)}once(t,r){this.eventTarget.addEventListener(t,r,{once:!0})}off(t,r){this.eventTarget.removeEventListener(t,r)}emit(t,r){return this.eventTarget.dispatchEvent(new CustomEvent(t,{detail:r}))}};let EventBus=Ie;Y(EventBus,"counter",0);class Grid{constructor(t){Y(this,"width");Y(this,"height");Y(this,"cellSize");Y(this,"originPosition");Y(this,"initGridObject");Y(this,"eventBus");Y(this,"content");Object.assign(this,t),this.eventBus=new EventBus("Grid"),this.content=Array.from({length:this.height}).map((r,i)=>Array.from({length:this.width}).map((n,s)=>this.createGridObject(s,i)))}createGridObject(t,r){return this.initGridObject(this,t,r)}getPosition(t){return Oe({},Vector2.divides(Vector2.subtracts(t,this.originPosition),this.cellSize,"floor"))}getWorldPosition(t,r){return Vector2.adds(Vector2.multiplies(new Vector2(t,r),this.cellSize),this.originPosition)}static isNumber(t){return typeof t=="number"}setGridObject(t,r,i){if(t instanceof Vector2){const n=this.getPosition(t);i=r,t=n.x,r=n.y}if(typeof t!="number"||typeof r!="number")throw new Error(`setValue(${t}, ${r}, ${i}) is called incorrectly`);if(i===void 0)throw new Error("value was undefined");this.content[r]===void 0||this.content[r][t]===void 0||(this.content[r][t]=i,this.eventBus.emit("gridChanged",{detail:{x:t,y:r,object:i}}))}getGridObject(t,r){if(t instanceof Vector2){const i=this.getPosition(t);t=i.x,r=i.y}if(r===void 0)throw new Error("y was undefined");return this.content[r]===void 0||this.content[r][t]===void 0?null:this.content[r][t]}}class PathNode{constructor(t,r,i){Y(this,"gCost",0);Y(this,"hCost",0);Y(this,"_fCost",0);Y(this,"cameFromNode",null);this.grid=t,this.x=r,this.y=i}get fCost(){return this._fCost}calculateFCost(){this._fCost=this.gCost+this.hCost}equals(t){return t instanceof PathNode?t.x===this.x&&t.y===this.y:!1}toString(){return this.x+","+this.y}}const be=class{constructor(t,r){Y(this,"grid");Y(this,"openList");Y(this,"closedList");this.grid=new Grid({width:t,height:r,cellSize:Constants.CELL_SIZE,originPosition:Vector2.ZERO,initGridObject:(i,n,s)=>new PathNode(i,n,s)}),this.openList=null,this.closedList=null}findPath(t,r,i,n){const s=this.grid.getGridObject(t,r),o=this.grid.getGridObject(i,n);for(this.openList=[],this.closedList=[],this.openList.push(s),Array.from({length:this.grid.width},(a,u)=>{Array.from({length:this.grid.height},(h,l)=>{const f=this.grid.getGridObject(u,l);f.gCost=Number.MAX_VALUE,f.calculateFCost(),f.cameFromNode=null})}),s.gCost=0,s.hCost=this.calculateDistanceCost(s,o),s.calculateFCost();this.openList.length>0;){const a=this.getLowestFCostNode(this.openList);if(a.equals(o))return this.calculatePath(o);this.openList.splice(this.openList.indexOf(a),1),this.closedList.push(a);for(const u of this.getNeighbourNodes(a)){if(this.closedList.includes(u))continue;const h=a.gCost+this.calculateDistanceCost(a,u);h<u.gCost&&(u.cameFromNode=a,u.gCost=h,u.hCost=this.calculateDistanceCost(u,o),u.calculateFCost(),this.openList.includes(u)||this.openList.push(u))}}return null}calculatePath(t){const r=[];r.push(t);let i=t;for(;i.cameFromNode!==null;)r.push(i.cameFromNode),i=i.cameFromNode;return r.reverse(),r}calculateDistanceCost(t,r){const i=Math.abs(t.x-r.x),n=Math.abs(t.y-r.y),s=Math.abs(i-n);return be.MOVE_DIAGONAL_COST*Math.min(i,n)+be.MOVE_STRAIGHT_COST*s}getLowestFCostNode(t){let r=t[0];for(let i=1;i<t.length;i++){const n=t[i];n.fCost<r.fCost&&(r=n)}return r}getNeighbourNodes(t){const r=[];return t.x-1>=0&&(r.push(this.grid.getGridObject(t.x-1,t.y)),t.y-1>=0&&r.push(this.grid.getGridObject(t.x-1,t.y-1)),t.y+1<this.grid.height&&r.push(this.grid.getGridObject(t.x-1,t.y+1))),t.x+1>=0&&(r.push(this.grid.getGridObject(t.x+1,t.y)),t.y-1>=0&&r.push(this.grid.getGridObject(t.x+1,t.y-1)),t.y+1<this.grid.height&&r.push(this.grid.getGridObject(t.x+1,t.y+1))),t.y-1>=0&&r.push(this.grid.getGridObject(t.x,t.y-1)),t.y+1<this.grid.height&&r.push(this.grid.getGridObject(t.x,t.y+1)),r}};let Pathfinding=be;Y(Pathfinding,"MOVE_STRAIGHT_COST",10),Y(Pathfinding,"MOVE_DIAGONAL_COST",14);class SpriteSystem extends System{constructor(r,i){super(r,i);Y(this,"app");this.app=i.app}execute(r,i){var n,s;if(((s=(n=this.queries.sprites.results)==null?void 0:n.length)!=null?s:0)>0)for(const o of this.queries.sprites.results){const a=o.getMutableComponent(SpriteComponent);a.addedToStage||(this.app.stage.addChild(a.sprite),a.addedToStage=!0)}}}Y(SpriteSystem,"queries",{sprites:{components:[SpriteComponent]}});const getHealthColor=e=>e>=.66?65280:e>=.33?16776960:16711680;class GraphicsSystem extends System{constructor(r,i){super(r,i);Y(this,"app");this.app=i.app}drawHealthBar(r,i,n){i.beginFill(0),i.drawRect(-8,12,16,5),i.endFill();const s=r.getComponent(HealthComponent);if(s){const o=s.points/s.maxPoints;i.beginFill(getHealthColor(o)),i.drawRect(-7,13,14*o,3),i.endFill()}}drawSelectionIndicators(r,i,n){const s=r.getComponent(SizeComponent),o=4,a=-s.width/2-o,u=-s.height/2-o,h=s.width/2+o;i.lineStyle(1,0).moveTo(a,-6).lineTo(a,u).lineTo(a/2,u),i.lineStyle(1,0).moveTo(h/2,u).lineTo(h,u).lineTo(h,-6)}execute(r,i){var n,s;if(((s=(n=this.queries.graphics.results)==null?void 0:n.length)!=null?s:0)>0)for(const o of this.queries.graphics.results){const a=o.getMutableComponent(GraphicsComponent);if(a.addedToStage||(this.app.stage.addChild(a.graphics),a.addedToStage=!0),o.hasComponent(SpriteComponent)&&EntityHelper.isSelected(o)){const u=o.getComponent(SpriteComponent).sprite;a.graphics.clear(),a.graphics.position.set(u.position.x,u.position.y),this.drawSelectionIndicators(o,a.graphics,u),this.drawHealthBar(o,a.graphics,u)}else a.graphics.clear()}}}Y(GraphicsSystem,"queries",{graphics:{components:[GraphicsComponent]}});var App_vue_vue_type_style_index_0_lang="";const _hoisted_1={id:"App"},_sfc_main=defineComponent({setup(e){const t=new Application({resizeTo:window});t.renderer.backgroundColor=34816;const r=new World;let i=0;onMounted(()=>{document.getElementById("App").appendChild(t.view),t.view.addEventListener("contextmenu",a=>{a.preventDefault()}),i=performance.now(),t.ticker.add(()=>{s()}),t.loader.add("swordsmen","assets/swordsmen.blue.move.west_06.png").load((a,u)=>{n(u)}),r.registerComponent(TransformComponent).registerComponent(SizeComponent).registerComponent(SelectableComponent).registerComponent(MovableComponent).registerComponent(HealthComponent).registerComponent(AliveComponent).registerComponent(MoveTransformVelocityComponent).registerComponent(MovePositionDirectComponent).registerComponent(PlayerMovementMouseComponent).registerComponent(PlayerMovementKeysComponent).registerComponent(MoveVelocityComponent).registerComponent(PathfindingComponent).registerComponent(SpriteComponent).registerComponent(GraphicsComponent).registerComponent(GridComponent).registerSystem(PlayerSelectionSystem,{app:t}).registerSystem(HealthSystem).registerSystem(AliveSystem).registerSystem(MoveTransformVelocitySystem).registerSystem(InputSystem,{canvas:t.view}).registerSystem(PlayerMovementKeysSystem).registerSystem(MovePositionDirectSystem).registerSystem(PlayerMovementMouseSystem).registerSystem(MoveVelocitySystem).registerSystem(SpriteSystem,{app:t}).registerSystem(GraphicsSystem,{app:t});const o=new Pathfinding(Math.ceil(t.renderer.width/Constants.CELL_SIZE),Math.ceil(t.renderer.height/Constants.CELL_SIZE));r.createEntity().addComponent(PathfindingComponent,{pathfinding:o}).addComponent(GridComponent,{grid:o.grid})});const n=o=>{Array.from(Array(100)).forEach(()=>{let a=Math.round(Math.random()*window.innerWidth);a-=a%Constants.CELL_SIZE;let u=Math.round(Math.random()*window.innerHeight)+Constants.CELL_SIZE/2;u-=u%Constants.CELL_SIZE,EntityFactory.createUnit(r,{position:{x:a,y:u},color:"red",texture:o.swordsmen.texture})})},s=()=>{const o=performance.now(),a=o-i;r.execute(a,o),i=o};return(o,a)=>(openBlock(),createElementBlock("div",_hoisted_1))}});createApp(_sfc_main).mount("#app");
