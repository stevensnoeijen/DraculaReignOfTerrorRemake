var ke=Object.defineProperty;var Fe=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var Pe=(t,e,s)=>e in t?ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ye=(t,e)=>{for(var s in e||(e={}))Le.call(e,s)&&Pe(t,s,e[s]);if(Fe)for(var s of Fe(e))_e.call(e,s)&&Pe(t,s,e[s]);return t};var k=(t,e,s)=>(Pe(t,typeof e!="symbol"?e+"":e,s),s);const p$1=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}};p$1();function makeMap(t,e){const s=Object.create(null),o=t.split(",");for(let i=0;i<o.length;i++)s[o[i]]=!0;return e?i=>!!s[i.toLowerCase()]:i=>!!s[i]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const o=t[s],i=isString(o)?parseStringStyle(o):normalizeStyle(o);if(i)for(const n in i)e[n]=i[n]}return e}else{if(isString(t))return t;if(isObject(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(t){const e={};return t.split(listDelimiterRE).forEach(s=>{if(s){const o=s.split(propertyDelimiterRE);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const o=normalizeClass(t[s]);o&&(e+=o+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>isObject(t)&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,s)=>s?s.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let s=0;s<t.length;s++)t[s](e)},def=(t,e,s)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:s})},toNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let s,o;for(s=0,o=this.effects.length;s<o;s++)this.effects[s].stop();for(s=0,o=this.cleanups.length;s<o;s++)this.cleanups[s]();if(this.scopes)for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].stop(!0);if(this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let s=0;for(let o=0;o<e.length;o++){const i=e[o];wasTracked(i)&&!newTracked(i)?i.delete(t):e[s++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}e.length=s}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,s=null,o){this.fn=e,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,o)}run(){if(!this.active)return this.fn();let e=activeEffect,s=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let s=0;s<e.length;s++)e[s].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,s){if(shouldTrack&&activeEffect){let o=targetMap.get(t);o||targetMap.set(t,o=new Map);let i=o.get(s);i||o.set(s,i=createDep()),trackEffects(i)}}function trackEffects(t,e){let s=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,s=!wasTracked(t)):s=!t.has(activeEffect),s&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,s,o,i,n){const r=targetMap.get(t);if(!r)return;let l=[];if(e==="clear")l=[...r.values()];else if(s==="length"&&isArray(t))r.forEach((c,m)=>{(m==="length"||m>=o)&&l.push(c)});else switch(s!==void 0&&l.push(r.get(s)),e){case"add":isArray(t)?isIntegerKey(s)&&l.push(r.get("length")):(l.push(r.get(ITERATE_KEY)),isMap(t)&&l.push(r.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(t)||(l.push(r.get(ITERATE_KEY)),isMap(t)&&l.push(r.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&l.push(r.get(ITERATE_KEY));break}if(l.length===1)l[0]&&triggerEffects(l[0]);else{const c=[];for(const m of l)m&&c.push(...m);triggerEffects(createDep(c))}}function triggerEffects(t,e){for(const s of isArray(t)?t:[...t])(s!==activeEffect||s.allowRecurse)&&(s.scheduler?s.scheduler():s.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...s){const o=toRaw(this);for(let n=0,r=this.length;n<r;n++)track(o,"get",n+"");const i=o[e](...s);return i===-1||i===!1?o[e](...s.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...s){pauseTracking();const o=toRaw(this)[e].apply(this,s);return resetTracking(),o}}),t}function createGetter(t=!1,e=!1){return function(o,i,n){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&n===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(o))return o;const r=isArray(o);if(!t&&r&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,n);const l=Reflect.get(o,i,n);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(t||track(o,"get",i),e)?l:isRef(l)?!r||!isIntegerKey(i)?l.value:l:isObject(l)?t?readonly(l):reactive(l):l}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(s,o,i,n){let r=s[o];if(isReadonly(r)&&isRef(r)&&!isRef(i))return!1;if(!t&&!isReadonly(i)&&(isShallow(i)||(i=toRaw(i),r=toRaw(r)),!isArray(s)&&isRef(r)&&!isRef(i)))return r.value=i,!0;const l=isArray(s)&&isIntegerKey(o)?Number(o)<s.length:hasOwn(s,o),c=Reflect.set(s,o,i,n);return s===toRaw(n)&&(l?hasChanged(i,r)&&trigger(s,"set",o,i):trigger(s,"add",o,i)),c}}function deleteProperty(t,e){const s=hasOwn(t,e);t[e];const o=Reflect.deleteProperty(t,e);return o&&s&&trigger(t,"delete",e,void 0),o}function has(t,e){const s=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),s}function ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,e,s=!1,o=!1){t=t.__v_raw;const i=toRaw(t),n=toRaw(e);e!==n&&!s&&track(i,"get",e),!s&&track(i,"get",n);const{has:r}=getProto(i),l=o?toShallow:s?toReadonly:toReactive;if(r.call(i,e))return l(t.get(e));if(r.call(i,n))return l(t.get(n));t!==i&&t.get(e)}function has$1(t,e=!1){const s=this.__v_raw,o=toRaw(s),i=toRaw(t);return t!==i&&!e&&track(o,"has",t),!e&&track(o,"has",i),t===i?s.has(t):s.has(t)||s.has(i)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const s=toRaw(this),{has:o,get:i}=getProto(s);let n=o.call(s,t);n||(t=toRaw(t),n=o.call(s,t));const r=i.call(s,t);return s.set(t,e),n?hasChanged(e,r)&&trigger(s,"set",t,e):trigger(s,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:s,get:o}=getProto(e);let i=s.call(e,t);i||(t=toRaw(t),i=s.call(e,t)),o&&o.call(e,t);const n=e.delete(t);return i&&trigger(e,"delete",t,void 0),n}function clear(){const t=toRaw(this),e=t.size!==0,s=t.clear();return e&&trigger(t,"clear",void 0,void 0),s}function createForEach(t,e){return function(o,i){const n=this,r=n.__v_raw,l=toRaw(r),c=e?toShallow:t?toReadonly:toReactive;return!t&&track(l,"iterate",ITERATE_KEY),r.forEach((m,u)=>o.call(i,c(m),c(u),n))}}function createIterableMethod(t,e,s){return function(...o){const i=this.__v_raw,n=toRaw(i),r=isMap(n),l=t==="entries"||t===Symbol.iterator&&r,c=t==="keys"&&r,m=i[t](...o),u=s?toShallow:e?toReadonly:toReactive;return!e&&track(n,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:g,done:f}=m.next();return f?{value:g,done:f}:{value:l?[u(g[0]),u(g[1])]:u(g),done:f}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(n){return get$1(this,n)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(n){return get$1(this,n,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},s={get(n){return get$1(this,n,!0)},get size(){return size(this,!0)},has(n){return has$1.call(this,n,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},o={get(n){return get$1(this,n,!0,!0)},get size(){return size(this,!0)},has(n){return has$1.call(this,n,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=createIterableMethod(n,!1,!1),s[n]=createIterableMethod(n,!0,!1),e[n]=createIterableMethod(n,!1,!0),o[n]=createIterableMethod(n,!0,!0)}),[t,s,e,o]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const s=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(o,i,n)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?o:Reflect.get(hasOwn(s,i)&&i in o?s:o,i,n)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,s,o,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const n=i.get(t);if(n)return n;const r=getTargetType(t);if(r===0)return t;const l=new Proxy(t,r===2?o:s);return i.set(t,l),l}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>unref(Reflect.get(t,e,s)),set:(t,e,s,o)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,o)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,s,o,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=o}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(t,e,s=!1){let o,i;const n=isFunction(t);return n?(o=t,i=NOOP):(o=t.get,i=t.set),new ComputedRefImpl(o,i,n||!i,s)}function callWithErrorHandling(t,e,s,o){let i;try{i=o?t(...o):t()}catch(n){handleError(n,e,s)}return i}function callWithAsyncErrorHandling(t,e,s,o){if(isFunction(t)){const n=callWithErrorHandling(t,e,s,o);return n&&isPromise(n)&&n.catch(r=>{handleError(r,e,s)}),n}const i=[];for(let n=0;n<t.length;n++)i.push(callWithAsyncErrorHandling(t[n],e,s,o));return i}function handleError(t,e,s,o=!0){const i=e?e.vnode:null;if(e){let n=e.parent;const r=e.proxy,l=s;for(;n;){const m=n.ec;if(m){for(let u=0;u<m.length;u++)if(m[u](t,r,l)===!1)return}n=n.parent}const c=e.appContext.config.errorHandler;if(c){callWithErrorHandling(c,null,10,[t,r,l]);return}}logError(t,s,i,o)}function logError(t,e,s,o=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const o=e+s>>>1;getId(queue[o])<t?e=o+1:s=o}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&t!==currentPreFlushParentJob&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queueCb(t,e,s,o){isArray(t)?s.push(...t):(!e||!e.includes(t,t.allowRecurse?o+1:o))&&s.push(t),queueFlush()}function queuePreFlushCb(t){queueCb(t,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(t){queueCb(t,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(t,e=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=e,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(t,e)}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((s,o)=>getId(s)-getId(o)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id;function flushJobs(t){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(t),queue.sort((s,o)=>getId(s)-getId(o));const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&s.active!==!1&&callWithErrorHandling(s,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(t)}}function emit$1(t,e,...s){if(t.isUnmounted)return;const o=t.vnode.props||EMPTY_OBJ;let i=s;const n=e.startsWith("update:"),r=n&&e.slice(7);if(r&&r in o){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:g,trim:f}=o[u]||EMPTY_OBJ;f?i=s.map(a=>a.trim()):g&&(i=s.map(toNumber))}let l,c=o[l=toHandlerKey(e)]||o[l=toHandlerKey(camelize(e))];!c&&n&&(c=o[l=toHandlerKey(hyphenate(e))]),c&&callWithAsyncErrorHandling(c,t,6,i);const m=o[l+"Once"];if(m){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,callWithAsyncErrorHandling(m,t,6,i)}}function normalizeEmitsOptions(t,e,s=!1){const o=e.emitsCache,i=o.get(t);if(i!==void 0)return i;const n=t.emits;let r={},l=!1;if(!isFunction(t)){const c=m=>{const u=normalizeEmitsOptions(m,e,!0);u&&(l=!0,extend(r,u))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!n&&!l?(o.set(t,null),null):(isArray(n)?n.forEach(c=>r[c]=null):extend(r,n),o.set(t,r),r)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const o=(...i)=>{o._d&&setBlockTracking(-1);const n=setCurrentRenderingInstance(e),r=t(...i);return setCurrentRenderingInstance(n),o._d&&setBlockTracking(1),r};return o._n=!0,o._c=!0,o._d=!0,o}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:o,withProxy:i,props:n,propsOptions:[r],slots:l,attrs:c,emit:m,render:u,renderCache:g,data:f,setupState:a,ctx:h,inheritAttrs:d}=t;let v,S;const I=setCurrentRenderingInstance(t);try{if(s.shapeFlag&4){const y=i||o;v=normalizeVNode(u.call(y,y,g,n,a,f,h)),S=c}else{const y=e;v=normalizeVNode(y.length>1?y(n,{attrs:c,slots:l,emit:m}):y(n,null)),S=e.props?c:getFunctionalFallthrough(c)}}catch(y){blockStack.length=0,handleError(y,t,1),v=createVNode(Comment)}let R=v;if(S&&d!==!1){const y=Object.keys(S),{shapeFlag:C}=R;y.length&&C&7&&(r&&y.some(isModelListener)&&(S=filterModelListeners(S,r)),R=cloneVNode(R,S))}return s.dirs&&(R.dirs=R.dirs?R.dirs.concat(s.dirs):s.dirs),s.transition&&(R.transition=s.transition),v=R,setCurrentRenderingInstance(I),v}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const o in t)(!isModelListener(o)||!(o.slice(9)in e))&&(s[o]=t[o]);return s};function shouldUpdateComponent(t,e,s){const{props:o,children:i,component:n}=t,{props:r,children:l,patchFlag:c}=e,m=n.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return o?hasPropsChanged(o,r,m):!!r;if(c&8){const u=e.dynamicProps;for(let g=0;g<u.length;g++){const f=u[g];if(r[f]!==o[f]&&!isEmitListener(m,f))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:o===r?!1:o?r?hasPropsChanged(o,r,m):!0:!!r;return!1}function hasPropsChanged(t,e,s){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let i=0;i<o.length;i++){const n=o[i];if(e[n]!==t[n]&&!isEmitListener(s,n))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e&&e.subTree===t;)(t=e.vnode).el=s,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function provide(t,e){if(currentInstance){let s=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===s&&(s=currentInstance.provides=Object.create(o)),s[t]=e}}function inject(t,e,s=!1){const o=currentInstance||currentRenderingInstance;if(o){const i=o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction(e)?e.call(o.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,{immediate:s,deep:o,flush:i,onTrack:n,onTrigger:r}=EMPTY_OBJ){const l=currentInstance;let c,m=!1,u=!1;if(isRef(t)?(c=()=>t.value,m=isShallow(t)):isReactive(t)?(c=()=>t,o=!0):isArray(t)?(u=!0,m=t.some(isReactive),c=()=>t.map(S=>{if(isRef(S))return S.value;if(isReactive(S))return traverse(S);if(isFunction(S))return callWithErrorHandling(S,l,2)})):isFunction(t)?e?c=()=>callWithErrorHandling(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return g&&g(),callWithAsyncErrorHandling(t,l,3,[f])}:c=NOOP,e&&o){const S=c;c=()=>traverse(S())}let g,f=S=>{g=v.onStop=()=>{callWithErrorHandling(S,l,4)}};if(isInSSRComponentSetup)return f=NOOP,e?s&&callWithAsyncErrorHandling(e,l,3,[c(),u?[]:void 0,f]):c(),NOOP;let a=u?[]:INITIAL_WATCHER_VALUE;const h=()=>{if(!!v.active)if(e){const S=v.run();(o||m||(u?S.some((I,R)=>hasChanged(I,a[R])):hasChanged(S,a)))&&(g&&g(),callWithAsyncErrorHandling(e,l,3,[S,a===INITIAL_WATCHER_VALUE?void 0:a,f]),a=S)}else v.run()};h.allowRecurse=!!e;let d;i==="sync"?d=h:i==="post"?d=()=>queuePostRenderEffect(h,l&&l.suspense):d=()=>{!l||l.isMounted?queuePreFlushCb(h):h()};const v=new ReactiveEffect(c,d);return e?s?h():a=v.run():i==="post"?queuePostRenderEffect(v.run.bind(v),l&&l.suspense):v.run(),()=>{v.stop(),l&&l.scope&&remove(l.scope.effects,v)}}function instanceWatch(t,e,s){const o=this.proxy,i=isString(t)?t.includes(".")?createPathGetter(o,t):()=>o[t]:t.bind(o,o);let n;isFunction(e)?n=e:(n=e.handler,s=e);const r=currentInstance;setCurrentInstance(this);const l=doWatch(i,n.bind(o),s);return r?setCurrentInstance(r):unsetCurrentInstance(),l}function createPathGetter(t,e){const s=e.split(".");return()=>{let o=t;for(let i=0;i<s.length&&o;i++)o=o[s[i]];return o}}function traverse(t,e){if(!isObject(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray(t))for(let s=0;s<t.length;s++)traverse(t[s],e);else if(isSet(t)||isMap(t))t.forEach(s=>{traverse(s,e)});else if(isPlainObject(t))for(const s in t)traverse(t[s],e);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:e}){const s=getCurrentInstance(),o=useTransitionState();let i;return()=>{const n=e.default&&getTransitionRawChildren(e.default(),!0);if(!n||!n.length)return;let r=n[0];if(n.length>1){for(const d of n)if(d.type!==Comment){r=d;break}}const l=toRaw(t),{mode:c}=l;if(o.isLeaving)return emptyPlaceholder(r);const m=getKeepAliveChild(r);if(!m)return emptyPlaceholder(r);const u=resolveTransitionHooks(m,l,o,s);setTransitionHooks(m,u);const g=s.subTree,f=g&&getKeepAliveChild(g);let a=!1;const{getTransitionKey:h}=m.type;if(h){const d=h();i===void 0?i=d:d!==i&&(i=d,a=!0)}if(f&&f.type!==Comment&&(!isSameVNodeType(m,f)||a)){const d=resolveTransitionHooks(f,l,o,s);if(setTransitionHooks(f,d),c==="out-in")return o.isLeaving=!0,d.afterLeave=()=>{o.isLeaving=!1,s.update()},emptyPlaceholder(r);c==="in-out"&&m.type!==Comment&&(d.delayLeave=(v,S,I)=>{const R=getLeavingNodesForType(o,f);R[String(f.key)]=f,v._leaveCb=()=>{S(),v._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=I})}return r}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:s}=t;let o=s.get(e.type);return o||(o=Object.create(null),s.set(e.type,o)),o}function resolveTransitionHooks(t,e,s,o){const{appear:i,mode:n,persisted:r=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:m,onEnterCancelled:u,onBeforeLeave:g,onLeave:f,onAfterLeave:a,onLeaveCancelled:h,onBeforeAppear:d,onAppear:v,onAfterAppear:S,onAppearCancelled:I}=e,R=String(t.key),y=getLeavingNodesForType(s,t),C=(x,M)=>{x&&callWithAsyncErrorHandling(x,o,9,M)},E={mode:n,persisted:r,beforeEnter(x){let M=l;if(!s.isMounted)if(i)M=d||l;else return;x._leaveCb&&x._leaveCb(!0);const T=y[R];T&&isSameVNodeType(t,T)&&T.el._leaveCb&&T.el._leaveCb(),C(M,[x])},enter(x){let M=c,T=m,A=u;if(!s.isMounted)if(i)M=v||c,T=S||m,A=I||u;else return;let P=!1;const O=x._enterCb=L=>{P||(P=!0,L?C(A,[x]):C(T,[x]),E.delayedLeave&&E.delayedLeave(),x._enterCb=void 0)};M?(M(x,O),M.length<=1&&O()):O()},leave(x,M){const T=String(t.key);if(x._enterCb&&x._enterCb(!0),s.isUnmounting)return M();C(g,[x]);let A=!1;const P=x._leaveCb=O=>{A||(A=!0,M(),O?C(h,[x]):C(a,[x]),x._leaveCb=void 0,y[T]===t&&delete y[T])};y[T]=t,f?(f(x,P),f.length<=1&&P()):P()},clone(x){return resolveTransitionHooks(x,e,s,o)}};return E}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,s){let o=[],i=0;for(let n=0;n<t.length;n++){let r=t[n];const l=s==null?r.key:String(s)+String(r.key!=null?r.key:n);r.type===Fragment?(r.patchFlag&128&&i++,o=o.concat(getTransitionRawChildren(r.children,e,l))):(e||r.type!==Comment)&&o.push(l!=null?cloneVNode(r,{key:l}):r)}if(i>1)for(let n=0;n<o.length;n++)o[n].patchFlag=-2;return o}function defineComponent(t){return isFunction(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const o=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,o,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(o,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,o){const i=injectHook(e,t,o,!0);onUnmounted(()=>{remove(o[e],i)},s)}function injectHook(t,e,s=currentInstance,o=!1){if(s){const i=s[t]||(s[t]=[]),n=e.__weh||(e.__weh=(...r)=>{if(s.isUnmounted)return;pauseTracking(),setCurrentInstance(s);const l=callWithAsyncErrorHandling(e,s,t,r);return unsetCurrentInstance(),resetTracking(),l});return o?i.unshift(n):i.push(n),n}}const createHook=t=>(e,s=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,e,s),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,o=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:i,computed:n,methods:r,watch:l,provide:c,inject:m,created:u,beforeMount:g,mounted:f,beforeUpdate:a,updated:h,activated:d,deactivated:v,beforeDestroy:S,beforeUnmount:I,destroyed:R,unmounted:y,render:C,renderTracked:E,renderTriggered:x,errorCaptured:M,serverPrefetch:T,expose:A,inheritAttrs:P,components:O,directives:L,filters:H}=e;if(m&&resolveInjections(m,o,null,t.appContext.config.unwrapInjectedRef),r)for(const U in r){const Y=r[U];isFunction(Y)&&(o[U]=Y.bind(s))}if(i){const U=i.call(s,s);isObject(U)&&(t.data=reactive(U))}if(shouldCacheAccess=!0,n)for(const U in n){const Y=n[U],J=isFunction(Y)?Y.bind(s,s):isFunction(Y.get)?Y.get.bind(s,s):NOOP,ee=!isFunction(Y)&&isFunction(Y.set)?Y.set.bind(s):NOOP,te=computed({get:J,set:ee});Object.defineProperty(o,U,{enumerable:!0,configurable:!0,get:()=>te.value,set:ie=>te.value=ie})}if(l)for(const U in l)createWatcher(l[U],o,s,U);if(c){const U=isFunction(c)?c.call(s):c;Reflect.ownKeys(U).forEach(Y=>{provide(Y,U[Y])})}u&&callHook(u,t,"c");function j(U,Y){isArray(Y)?Y.forEach(J=>U(J.bind(s))):Y&&U(Y.bind(s))}if(j(onBeforeMount,g),j(onMounted,f),j(onBeforeUpdate,a),j(onUpdated,h),j(onActivated,d),j(onDeactivated,v),j(onErrorCaptured,M),j(onRenderTracked,E),j(onRenderTriggered,x),j(onBeforeUnmount,I),j(onUnmounted,y),j(onServerPrefetch,T),isArray(A))if(A.length){const U=t.exposed||(t.exposed={});A.forEach(Y=>{Object.defineProperty(U,Y,{get:()=>s[Y],set:J=>s[Y]=J})})}else t.exposed||(t.exposed={});C&&t.render===NOOP&&(t.render=C),P!=null&&(t.inheritAttrs=P),O&&(t.components=O),L&&(t.directives=L)}function resolveInjections(t,e,s=NOOP,o=!1){isArray(t)&&(t=normalizeInject(t));for(const i in t){const n=t[i];let r;isObject(n)?"default"in n?r=inject(n.from||i,n.default,!0):r=inject(n.from||i):r=inject(n),isRef(r)&&o?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):e[i]=r}}function callHook(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,o){const i=o.includes(".")?createPathGetter(s,o):()=>s[o];if(isString(t)){const n=e[t];isFunction(n)&&watch(i,n)}else if(isFunction(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(n=>createWatcher(n,e,s,o));else{const n=isFunction(t.handler)?t.handler.bind(s):e[t.handler];isFunction(n)&&watch(i,n,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:o}=e,{mixins:i,optionsCache:n,config:{optionMergeStrategies:r}}=t.appContext,l=n.get(e);let c;return l?c=l:!i.length&&!s&&!o?c=e:(c={},i.length&&i.forEach(m=>mergeOptions(c,m,r,!0)),mergeOptions(c,e,r)),n.set(e,c),c}function mergeOptions(t,e,s,o=!1){const{mixins:i,extends:n}=e;n&&mergeOptions(t,n,s,!0),i&&i.forEach(r=>mergeOptions(t,r,s,!0));for(const r in e)if(!(o&&r==="expose")){const l=internalOptionMergeStrats[r]||s&&s[r];t[r]=l?l(t[r],e[r]):e[r]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(extend(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const o in e)s[o]=mergeAsArray(t[o],e[o]);return s}function initProps(t,e,s,o=!1){const i={},n={};def(n,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,i,n);for(const r in t.propsOptions[0])r in i||(i[r]=void 0);s?t.props=o?i:shallowReactive(i):t.type.props?t.props=i:t.props=n,t.attrs=n}function updateProps(t,e,s,o){const{props:i,attrs:n,vnode:{patchFlag:r}}=t,l=toRaw(i),[c]=t.propsOptions;let m=!1;if((o||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let g=0;g<u.length;g++){let f=u[g];if(isEmitListener(t.emitsOptions,f))continue;const a=e[f];if(c)if(hasOwn(n,f))a!==n[f]&&(n[f]=a,m=!0);else{const h=camelize(f);i[h]=resolvePropValue(c,l,h,a,t,!1)}else a!==n[f]&&(n[f]=a,m=!0)}}}else{setFullProps(t,e,i,n)&&(m=!0);let u;for(const g in l)(!e||!hasOwn(e,g)&&((u=hyphenate(g))===g||!hasOwn(e,u)))&&(c?s&&(s[g]!==void 0||s[u]!==void 0)&&(i[g]=resolvePropValue(c,l,g,void 0,t,!0)):delete i[g]);if(n!==l)for(const g in n)(!e||!hasOwn(e,g)&&!0)&&(delete n[g],m=!0)}m&&trigger(t,"set","$attrs")}function setFullProps(t,e,s,o){const[i,n]=t.propsOptions;let r=!1,l;if(e)for(let c in e){if(isReservedProp(c))continue;const m=e[c];let u;i&&hasOwn(i,u=camelize(c))?!n||!n.includes(u)?s[u]=m:(l||(l={}))[u]=m:isEmitListener(t.emitsOptions,c)||(!(c in o)||m!==o[c])&&(o[c]=m,r=!0)}if(n){const c=toRaw(s),m=l||EMPTY_OBJ;for(let u=0;u<n.length;u++){const g=n[u];s[g]=resolvePropValue(i,c,g,m[g],t,!hasOwn(m,g))}}return r}function resolvePropValue(t,e,s,o,i,n){const r=t[s];if(r!=null){const l=hasOwn(r,"default");if(l&&o===void 0){const c=r.default;if(r.type!==Function&&isFunction(c)){const{propsDefaults:m}=i;s in m?o=m[s]:(setCurrentInstance(i),o=m[s]=c.call(null,e),unsetCurrentInstance())}else o=c}r[0]&&(n&&!l?o=!1:r[1]&&(o===""||o===hyphenate(s))&&(o=!0))}return o}function normalizePropsOptions(t,e,s=!1){const o=e.propsCache,i=o.get(t);if(i)return i;const n=t.props,r={},l=[];let c=!1;if(!isFunction(t)){const u=g=>{c=!0;const[f,a]=normalizePropsOptions(g,e,!0);extend(r,f),a&&l.push(...a)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!n&&!c)return o.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(n))for(let u=0;u<n.length;u++){const g=camelize(n[u]);validatePropName(g)&&(r[g]=EMPTY_OBJ)}else if(n)for(const u in n){const g=camelize(u);if(validatePropName(g)){const f=n[u],a=r[g]=isArray(f)||isFunction(f)?{type:f}:f;if(a){const h=getTypeIndex(Boolean,a.type),d=getTypeIndex(String,a.type);a[0]=h>-1,a[1]=d<0||h<d,(h>-1||hasOwn(a,"default"))&&l.push(g)}}}const m=[r,l];return o.set(t,m),m}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray(e)?e.findIndex(s=>isSameType(s,t)):isFunction(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{const o=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return o._c=!1,o},normalizeObjectSlots=(t,e,s)=>{const o=t._ctx;for(const i in t){if(isInternalKey(i))continue;const n=t[i];if(isFunction(n))e[i]=normalizeSlot(i,n,o);else if(n!=null){const r=normalizeSlotValue(n);e[i]=()=>r}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const s=e._;s?(t.slots=toRaw(e),def(e,"_",s)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,s)=>{const{vnode:o,slots:i}=t;let n=!0,r=EMPTY_OBJ;if(o.shapeFlag&32){const l=e._;l?s&&l===1?n=!1:(extend(i,e),!s&&l===1&&delete i._):(n=!e.$stable,normalizeObjectSlots(e,i)),r=e}else e&&(normalizeVNodeSlots(t,e),r={default:1});if(n)for(const l in i)!isInternalKey(l)&&!(l in r)&&delete i[l]};function invokeDirectiveHook(t,e,s,o){const i=t.dirs,n=e&&e.dirs;for(let r=0;r<i.length;r++){const l=i[r];n&&(l.oldValue=n[r].value);let c=l.dir[o];c&&(pauseTracking(),callWithAsyncErrorHandling(c,s,8,[t.el,l,t,e]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(t,e){return function(o,i=null){isFunction(o)||(o=Object.assign({},o)),i!=null&&!isObject(i)&&(i=null);const n=createAppContext(),r=new Set;let l=!1;const c=n.app={_uid:uid++,_component:o,_props:i,_container:null,_context:n,_instance:null,version,get config(){return n.config},set config(m){},use(m,...u){return r.has(m)||(m&&isFunction(m.install)?(r.add(m),m.install(c,...u)):isFunction(m)&&(r.add(m),m(c,...u))),c},mixin(m){return n.mixins.includes(m)||n.mixins.push(m),c},component(m,u){return u?(n.components[m]=u,c):n.components[m]},directive(m,u){return u?(n.directives[m]=u,c):n.directives[m]},mount(m,u,g){if(!l){const f=createVNode(o,i);return f.appContext=n,u&&e?e(f,m):t(f,m,g),l=!0,c._container=m,m.__vue_app__=c,getExposeProxy(f.component)||f.component.proxy}},unmount(){l&&(t(null,c._container),delete c._container.__vue_app__)},provide(m,u){return n.provides[m]=u,c}};return c}}function setRef(t,e,s,o,i=!1){if(isArray(t)){t.forEach((f,a)=>setRef(f,e&&(isArray(e)?e[a]:e),s,o,i));return}if(isAsyncWrapper(o)&&!i)return;const n=o.shapeFlag&4?getExposeProxy(o.component)||o.component.proxy:o.el,r=i?null:n,{i:l,r:c}=t,m=e&&e.r,u=l.refs===EMPTY_OBJ?l.refs={}:l.refs,g=l.setupState;if(m!=null&&m!==c&&(isString(m)?(u[m]=null,hasOwn(g,m)&&(g[m]=null)):isRef(m)&&(m.value=null)),isFunction(c))callWithErrorHandling(c,l,12,[r,u]);else{const f=isString(c),a=isRef(c);if(f||a){const h=()=>{if(t.f){const d=f?u[c]:c.value;i?isArray(d)&&remove(d,n):isArray(d)?d.includes(n)||d.push(n):f?(u[c]=[n],hasOwn(g,c)&&(g[c]=u[c])):(c.value=[n],t.k&&(u[t.k]=c.value))}else f?(u[c]=r,hasOwn(g,c)&&(g[c]=r)):isRef(c)&&(c.value=r,t.k&&(u[t.k]=r))};r?(h.id=-1,queuePostRenderEffect(h,s)):h()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:o,remove:i,patchProp:n,createElement:r,createText:l,createComment:c,setText:m,setElementText:u,parentNode:g,nextSibling:f,setScopeId:a=NOOP,cloneNode:h,insertStaticContent:d}=t,v=(w,b,F,N=null,_=null,D=null,z=!1,B=null,W=!!b.dynamicChildren)=>{if(w===b)return;w&&!isSameVNodeType(w,b)&&(N=xe(w),X(w,_,D,!0),w=null),b.patchFlag===-2&&(W=!1,b.dynamicChildren=null);const{type:V,ref:$,shapeFlag:G}=b;switch(V){case Text$1:S(w,b,F,N);break;case Comment:I(w,b,F,N);break;case Static:w==null&&R(b,F,N,z);break;case Fragment:L(w,b,F,N,_,D,z,B,W);break;default:G&1?E(w,b,F,N,_,D,z,B,W):G&6?H(w,b,F,N,_,D,z,B,W):(G&64||G&128)&&V.process(w,b,F,N,_,D,z,B,W,ge)}$!=null&&_&&setRef($,w&&w.ref,D,b||w,!b)},S=(w,b,F,N)=>{if(w==null)o(b.el=l(b.children),F,N);else{const _=b.el=w.el;b.children!==w.children&&m(_,b.children)}},I=(w,b,F,N)=>{w==null?o(b.el=c(b.children||""),F,N):b.el=w.el},R=(w,b,F,N)=>{[w.el,w.anchor]=d(w.children,b,F,N,w.el,w.anchor)},y=({el:w,anchor:b},F,N)=>{let _;for(;w&&w!==b;)_=f(w),o(w,F,N),w=_;o(b,F,N)},C=({el:w,anchor:b})=>{let F;for(;w&&w!==b;)F=f(w),i(w),w=F;i(b)},E=(w,b,F,N,_,D,z,B,W)=>{z=z||b.type==="svg",w==null?x(b,F,N,_,D,z,B,W):A(w,b,_,D,z,B,W)},x=(w,b,F,N,_,D,z,B)=>{let W,V;const{type:$,props:G,shapeFlag:q,transition:Q,patchFlag:Z,dirs:oe}=w;if(w.el&&h!==void 0&&Z===-1)W=w.el=h(w.el);else{if(W=w.el=r(w.type,D,G&&G.is,G),q&8?u(W,w.children):q&16&&T(w.children,W,null,N,_,D&&$!=="foreignObject",z,B),oe&&invokeDirectiveHook(w,null,N,"created"),G){for(const se in G)se!=="value"&&!isReservedProp(se)&&n(W,se,null,G[se],D,w.children,N,_,re);"value"in G&&n(W,"value",null,G.value),(V=G.onVnodeBeforeMount)&&invokeVNodeHook(V,N,w)}M(W,w,w.scopeId,z,N)}oe&&invokeDirectiveHook(w,null,N,"beforeMount");const ne=(!_||_&&!_.pendingBranch)&&Q&&!Q.persisted;ne&&Q.beforeEnter(W),o(W,b,F),((V=G&&G.onVnodeMounted)||ne||oe)&&queuePostRenderEffect(()=>{V&&invokeVNodeHook(V,N,w),ne&&Q.enter(W),oe&&invokeDirectiveHook(w,null,N,"mounted")},_)},M=(w,b,F,N,_)=>{if(F&&a(w,F),N)for(let D=0;D<N.length;D++)a(w,N[D]);if(_){let D=_.subTree;if(b===D){const z=_.vnode;M(w,z,z.scopeId,z.slotScopeIds,_.parent)}}},T=(w,b,F,N,_,D,z,B,W=0)=>{for(let V=W;V<w.length;V++){const $=w[V]=B?cloneIfMounted(w[V]):normalizeVNode(w[V]);v(null,$,b,F,N,_,D,z,B)}},A=(w,b,F,N,_,D,z)=>{const B=b.el=w.el;let{patchFlag:W,dynamicChildren:V,dirs:$}=b;W|=w.patchFlag&16;const G=w.props||EMPTY_OBJ,q=b.props||EMPTY_OBJ;let Q;F&&toggleRecurse(F,!1),(Q=q.onVnodeBeforeUpdate)&&invokeVNodeHook(Q,F,b,w),$&&invokeDirectiveHook(b,w,F,"beforeUpdate"),F&&toggleRecurse(F,!0);const Z=_&&b.type!=="foreignObject";if(V?P(w.dynamicChildren,V,B,F,N,Z,D):z||J(w,b,B,null,F,N,Z,D,!1),W>0){if(W&16)O(B,b,G,q,F,N,_);else if(W&2&&G.class!==q.class&&n(B,"class",null,q.class,_),W&4&&n(B,"style",G.style,q.style,_),W&8){const oe=b.dynamicProps;for(let ne=0;ne<oe.length;ne++){const se=oe[ne],de=G[se],Ce=q[se];(Ce!==de||se==="value")&&n(B,se,de,Ce,_,w.children,F,N,re)}}W&1&&w.children!==b.children&&u(B,b.children)}else!z&&V==null&&O(B,b,G,q,F,N,_);((Q=q.onVnodeUpdated)||$)&&queuePostRenderEffect(()=>{Q&&invokeVNodeHook(Q,F,b,w),$&&invokeDirectiveHook(b,w,F,"updated")},N)},P=(w,b,F,N,_,D,z)=>{for(let B=0;B<b.length;B++){const W=w[B],V=b[B],$=W.el&&(W.type===Fragment||!isSameVNodeType(W,V)||W.shapeFlag&70)?g(W.el):F;v(W,V,$,null,N,_,D,z,!0)}},O=(w,b,F,N,_,D,z)=>{if(F!==N){for(const B in N){if(isReservedProp(B))continue;const W=N[B],V=F[B];W!==V&&B!=="value"&&n(w,B,V,W,z,b.children,_,D,re)}if(F!==EMPTY_OBJ)for(const B in F)!isReservedProp(B)&&!(B in N)&&n(w,B,F[B],null,z,b.children,_,D,re);"value"in N&&n(w,"value",F.value,N.value)}},L=(w,b,F,N,_,D,z,B,W)=>{const V=b.el=w?w.el:l(""),$=b.anchor=w?w.anchor:l("");let{patchFlag:G,dynamicChildren:q,slotScopeIds:Q}=b;Q&&(B=B?B.concat(Q):Q),w==null?(o(V,F,N),o($,F,N),T(b.children,F,$,_,D,z,B,W)):G>0&&G&64&&q&&w.dynamicChildren?(P(w.dynamicChildren,q,F,_,D,z,B),(b.key!=null||_&&b===_.subTree)&&traverseStaticChildren(w,b,!0)):J(w,b,F,$,_,D,z,B,W)},H=(w,b,F,N,_,D,z,B,W)=>{b.slotScopeIds=B,w==null?b.shapeFlag&512?_.ctx.activate(b,F,N,z,W):K(b,F,N,_,D,z,W):j(w,b,W)},K=(w,b,F,N,_,D,z)=>{const B=w.component=createComponentInstance(w,N,_);if(isKeepAlive(w)&&(B.ctx.renderer=ge),setupComponent(B),B.asyncDep){if(_&&_.registerDep(B,U),!w.el){const W=B.subTree=createVNode(Comment);I(null,W,b,F)}return}U(B,w,b,F,_,D,z)},j=(w,b,F)=>{const N=b.component=w.component;if(shouldUpdateComponent(w,b,F))if(N.asyncDep&&!N.asyncResolved){Y(N,b,F);return}else N.next=b,invalidateJob(N.update),N.update();else b.component=w.component,b.el=w.el,N.vnode=b},U=(w,b,F,N,_,D,z)=>{const B=()=>{if(w.isMounted){let{next:$,bu:G,u:q,parent:Q,vnode:Z}=w,oe=$,ne;toggleRecurse(w,!1),$?($.el=Z.el,Y(w,$,z)):$=Z,G&&invokeArrayFns(G),(ne=$.props&&$.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ne,Q,$,Z),toggleRecurse(w,!0);const se=renderComponentRoot(w),de=w.subTree;w.subTree=se,v(de,se,g(de.el),xe(de),w,_,D),$.el=se.el,oe===null&&updateHOCHostEl(w,se.el),q&&queuePostRenderEffect(q,_),(ne=$.props&&$.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ne,Q,$,Z),_)}else{let $;const{el:G,props:q}=b,{bm:Q,m:Z,parent:oe}=w,ne=isAsyncWrapper(b);if(toggleRecurse(w,!1),Q&&invokeArrayFns(Q),!ne&&($=q&&q.onVnodeBeforeMount)&&invokeVNodeHook($,oe,b),toggleRecurse(w,!0),G&&ue){const se=()=>{w.subTree=renderComponentRoot(w),ue(G,w.subTree,w,_,null)};ne?b.type.__asyncLoader().then(()=>!w.isUnmounted&&se()):se()}else{const se=w.subTree=renderComponentRoot(w);v(null,se,F,N,w,_,D),b.el=se.el}if(Z&&queuePostRenderEffect(Z,_),!ne&&($=q&&q.onVnodeMounted)){const se=b;queuePostRenderEffect(()=>invokeVNodeHook($,oe,se),_)}b.shapeFlag&256&&w.a&&queuePostRenderEffect(w.a,_),w.isMounted=!0,b=F=N=null}},W=w.effect=new ReactiveEffect(B,()=>queueJob(w.update),w.scope),V=w.update=W.run.bind(W);V.id=w.uid,toggleRecurse(w,!0),V()},Y=(w,b,F)=>{b.component=w;const N=w.vnode.props;w.vnode=b,w.next=null,updateProps(w,b.props,N,F),updateSlots(w,b.children,F),pauseTracking(),flushPreFlushCbs(void 0,w.update),resetTracking()},J=(w,b,F,N,_,D,z,B,W=!1)=>{const V=w&&w.children,$=w?w.shapeFlag:0,G=b.children,{patchFlag:q,shapeFlag:Q}=b;if(q>0){if(q&128){te(V,G,F,N,_,D,z,B,W);return}else if(q&256){ee(V,G,F,N,_,D,z,B,W);return}}Q&8?($&16&&re(V,_,D),G!==V&&u(F,G)):$&16?Q&16?te(V,G,F,N,_,D,z,B,W):re(V,_,D,!0):($&8&&u(F,""),Q&16&&T(G,F,N,_,D,z,B,W))},ee=(w,b,F,N,_,D,z,B,W)=>{w=w||EMPTY_ARR,b=b||EMPTY_ARR;const V=w.length,$=b.length,G=Math.min(V,$);let q;for(q=0;q<G;q++){const Q=b[q]=W?cloneIfMounted(b[q]):normalizeVNode(b[q]);v(w[q],Q,F,null,_,D,z,B,W)}V>$?re(w,_,D,!0,!1,G):T(b,F,N,_,D,z,B,W,G)},te=(w,b,F,N,_,D,z,B,W)=>{let V=0;const $=b.length;let G=w.length-1,q=$-1;for(;V<=G&&V<=q;){const Q=w[V],Z=b[V]=W?cloneIfMounted(b[V]):normalizeVNode(b[V]);if(isSameVNodeType(Q,Z))v(Q,Z,F,null,_,D,z,B,W);else break;V++}for(;V<=G&&V<=q;){const Q=w[G],Z=b[q]=W?cloneIfMounted(b[q]):normalizeVNode(b[q]);if(isSameVNodeType(Q,Z))v(Q,Z,F,null,_,D,z,B,W);else break;G--,q--}if(V>G){if(V<=q){const Q=q+1,Z=Q<$?b[Q].el:N;for(;V<=q;)v(null,b[V]=W?cloneIfMounted(b[V]):normalizeVNode(b[V]),F,Z,_,D,z,B,W),V++}}else if(V>q)for(;V<=G;)X(w[V],_,D,!0),V++;else{const Q=V,Z=V,oe=new Map;for(V=Z;V<=q;V++){const fe=b[V]=W?cloneIfMounted(b[V]):normalizeVNode(b[V]);fe.key!=null&&oe.set(fe.key,V)}let ne,se=0;const de=q-Z+1;let Ce=!1,Ae=0;const Ee=new Array(de);for(V=0;V<de;V++)Ee[V]=0;for(V=Q;V<=G;V++){const fe=w[V];if(se>=de){X(fe,_,D,!0);continue}let pe;if(fe.key!=null)pe=oe.get(fe.key);else for(ne=Z;ne<=q;ne++)if(Ee[ne-Z]===0&&isSameVNodeType(fe,b[ne])){pe=ne;break}pe===void 0?X(fe,_,D,!0):(Ee[pe-Z]=V+1,pe>=Ae?Ae=pe:Ce=!0,v(fe,b[pe],F,null,_,D,z,B,W),se++)}const be=Ce?getSequence(Ee):EMPTY_ARR;for(ne=be.length-1,V=de-1;V>=0;V--){const fe=Z+V,pe=b[fe],Oe=fe+1<$?b[fe+1].el:N;Ee[V]===0?v(null,pe,F,Oe,_,D,z,B,W):Ce&&(ne<0||V!==be[ne]?ie(pe,F,Oe,2):ne--)}}},ie=(w,b,F,N,_=null)=>{const{el:D,type:z,transition:B,children:W,shapeFlag:V}=w;if(V&6){ie(w.component.subTree,b,F,N);return}if(V&128){w.suspense.move(b,F,N);return}if(V&64){z.move(w,b,F,ge);return}if(z===Fragment){o(D,b,F);for(let G=0;G<W.length;G++)ie(W[G],b,F,N);o(w.anchor,b,F);return}if(z===Static){y(w,b,F);return}if(N!==2&&V&1&&B)if(N===0)B.beforeEnter(D),o(D,b,F),queuePostRenderEffect(()=>B.enter(D),_);else{const{leave:G,delayLeave:q,afterLeave:Q}=B,Z=()=>o(D,b,F),oe=()=>{G(D,()=>{Z(),Q&&Q()})};q?q(D,Z,oe):oe()}else o(D,b,F)},X=(w,b,F,N=!1,_=!1)=>{const{type:D,props:z,ref:B,children:W,dynamicChildren:V,shapeFlag:$,patchFlag:G,dirs:q}=w;if(B!=null&&setRef(B,null,F,w,!0),$&256){b.ctx.deactivate(w);return}const Q=$&1&&q,Z=!isAsyncWrapper(w);let oe;if(Z&&(oe=z&&z.onVnodeBeforeUnmount)&&invokeVNodeHook(oe,b,w),$&6)le(w.component,F,N);else{if($&128){w.suspense.unmount(F,N);return}Q&&invokeDirectiveHook(w,null,b,"beforeUnmount"),$&64?w.type.remove(w,b,F,_,ge,N):V&&(D!==Fragment||G>0&&G&64)?re(V,b,F,!1,!0):(D===Fragment&&G&384||!_&&$&16)&&re(W,b,F),N&&ce(w)}(Z&&(oe=z&&z.onVnodeUnmounted)||Q)&&queuePostRenderEffect(()=>{oe&&invokeVNodeHook(oe,b,w),Q&&invokeDirectiveHook(w,null,b,"unmounted")},F)},ce=w=>{const{type:b,el:F,anchor:N,transition:_}=w;if(b===Fragment){ae(F,N);return}if(b===Static){C(w);return}const D=()=>{i(F),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(w.shapeFlag&1&&_&&!_.persisted){const{leave:z,delayLeave:B}=_,W=()=>z(F,D);B?B(w.el,D,W):W()}else D()},ae=(w,b)=>{let F;for(;w!==b;)F=f(w),i(w),w=F;i(b)},le=(w,b,F)=>{const{bum:N,scope:_,update:D,subTree:z,um:B}=w;N&&invokeArrayFns(N),_.stop(),D&&(D.active=!1,X(z,w,b,F)),B&&queuePostRenderEffect(B,b),queuePostRenderEffect(()=>{w.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},re=(w,b,F,N=!1,_=!1,D=0)=>{for(let z=D;z<w.length;z++)X(w[z],b,F,N,_)},xe=w=>w.shapeFlag&6?xe(w.component.subTree):w.shapeFlag&128?w.suspense.next():f(w.anchor||w.el),Se=(w,b,F)=>{w==null?b._vnode&&X(b._vnode,null,null,!0):v(b._vnode||null,w,b,null,null,null,F),flushPostFlushCbs(),b._vnode=w},ge={p:v,um:X,m:ie,r:ce,mt:K,mc:T,pc:J,pbc:P,n:xe,o:t};let ve,ue;return e&&([ve,ue]=e(ge)),{render:Se,hydrate:ve,createApp:createAppAPI(Se,ve)}}function toggleRecurse({effect:t,update:e},s){t.allowRecurse=e.allowRecurse=s}function traverseStaticChildren(t,e,s=!1){const o=t.children,i=e.children;if(isArray(o)&&isArray(i))for(let n=0;n<o.length;n++){const r=o[n];let l=i[n];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[n]=cloneIfMounted(i[n]),l.el=r.el),s||traverseStaticChildren(r,l))}}function getSequence(t){const e=t.slice(),s=[0];let o,i,n,r,l;const c=t.length;for(o=0;o<c;o++){const m=t[o];if(m!==0){if(i=s[s.length-1],t[i]<m){e[o]=i,s.push(o);continue}for(n=0,r=s.length-1;n<r;)l=n+r>>1,t[s[l]]<m?n=l+1:r=l;m<t[s[n]]&&(n>0&&(e[o]=s[n-1]),s[n]=o)}}for(n=s.length,r=s[n-1];n-- >0;)s[n]=r,r=e[r];return s}const isTeleport=t=>t.__isTeleport,NULL_DYNAMIC_COMPONENT=Symbol(),Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,o,i,n){return setupBlock(createBaseVNode(t,e,s,o,i,n,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t!=null?t:null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null;function createBaseVNode(t,e=null,s=null,o=0,i=null,n=t===Fragment?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:o,dynamicProps:i,dynamicChildren:null,appContext:null};return l?(normalizeChildren(c,s),n&128&&t.normalize(c)):s&&(c.shapeFlag|=isString(s)?8:16),isBlockTreeEnabled>0&&!r&&currentBlock&&(c.patchFlag>0||n&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,o=0,i=null,n=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const l=cloneVNode(t,e,!0);return s&&normalizeChildren(l,s),l}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:l,style:c}=e;l&&!isString(l)&&(e.class=normalizeClass(l)),isObject(c)&&(isProxy(c)&&!isArray(c)&&(c=extend({},c)),e.style=normalizeStyle(c))}const r=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,s,o,i,r,n,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend({},t):t:null}function cloneVNode(t,e,s=!1){const{props:o,ref:i,patchFlag:n,children:r}=t,l=e?mergeProps(o||{},e):o;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&normalizeKey(l),ref:e&&e.ref?s&&i?isArray(i)?i.concat(normalizeRef(e)):[i,normalizeRef(e)]:normalizeRef(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor}}function createTextVNode(t=" ",e=0){return createVNode(Text$1,null,t,e)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text$1,null,String(t))}function cloneIfMounted(t){return t.el===null||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(o&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),o&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const o=t[s];for(const i in o)if(i==="class")e.class!==o.class&&(e.class=normalizeClass([e.class,o.class]));else if(i==="style")e.style=normalizeStyle([e.style,o.style]);else if(isOn(i)){const n=e[i],r=o[i];r&&n!==r&&!(isArray(n)&&n.includes(r))&&(e[i]=n?[].concat(n,r):r)}else i!==""&&(e[i]=o[i])}return e}function invokeVNodeHook(t,e,s,o=null){callWithAsyncErrorHandling(t,e,7,[s,o])}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>()=>queueJob(t.update),$nextTick:t=>nextTick.bind(t.proxy),$watch:t=>instanceWatch.bind(t)}),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:s,setupState:o,data:i,props:n,accessCache:r,type:l,appContext:c}=t;let m;if(e[0]!=="$"){const a=r[e];if(a!==void 0)switch(a){case 1:return o[e];case 2:return i[e];case 4:return s[e];case 3:return n[e]}else{if(o!==EMPTY_OBJ&&hasOwn(o,e))return r[e]=1,o[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return r[e]=2,i[e];if((m=t.propsOptions[0])&&hasOwn(m,e))return r[e]=3,n[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return r[e]=4,s[e];shouldCacheAccess&&(r[e]=0)}}const u=publicPropertiesMap[e];let g,f;if(u)return e==="$attrs"&&track(t,"get",e),u(t);if((g=l.__cssModules)&&(g=g[e]))return g;if(s!==EMPTY_OBJ&&hasOwn(s,e))return r[e]=4,s[e];if(f=c.config.globalProperties,hasOwn(f,e))return f[e]},set({_:t},e,s){const{data:o,setupState:i,ctx:n}=t;return i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=s,!0):o!==EMPTY_OBJ&&hasOwn(o,e)?(o[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(n[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:o,appContext:i,propsOptions:n}},r){let l;return!!s[r]||t!==EMPTY_OBJ&&hasOwn(t,r)||e!==EMPTY_OBJ&&hasOwn(e,r)||(l=n[0])&&hasOwn(l,r)||hasOwn(o,r)||hasOwn(publicPropertiesMap,r)||hasOwn(i.config.globalProperties,r)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}},emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(t,e,s){const o=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,n={uid:uid$1++,vnode:t,type:o,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,i),emitsOptions:normalizeEmitsOptions(o,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=emit$1.bind(null,n),t.ce&&t.ce(n),n}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:s,children:o}=t.vnode,i=isStatefulComponent(t);initProps(t,s,i,e),initSlots(t,o);const n=i?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,n}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:o}=s;if(o){const i=t.setupContext=o.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const n=callWithErrorHandling(o,t,0,[t.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(n)){if(n.then(unsetCurrentInstance,unsetCurrentInstance),e)return n.then(r=>{handleSetupResult(t,r,e)}).catch(r=>{handleError(r,t,0)});t.asyncDep=n}else handleSetupResult(t,n,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const o=t.type;if(!t.render){if(!e&&compile&&!o.render){const i=o.template;if(i){const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:l,compilerOptions:c}=o,m=extend(extend({isCustomElement:n,delimiters:l},r),c);o.render=compile(i,m)}}t.render=o.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,s){return track(t,"get","$attrs"),e[s]}})}function createSetupContext(t){const e=o=>{t.exposed=o||{}};let s;return{get attrs(){return s||(s=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)}}))}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.2.33",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,o)=>{const i=e?doc.createElementNS(svgNS,t):doc.createElement(t,s?{is:s}:void 0);return t==="select"&&o&&o.multiple!=null&&i.setAttribute("multiple",o.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,s,o,i,n){const r=s?s.previousSibling:e.lastChild;if(i&&(i===n||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===n||!(i=i.nextSibling)););else{templateContainer.innerHTML=o?`<svg>${t}</svg>`:t;const l=templateContainer.content;if(o){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,s)}return[r?r.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}};function patchClass(t,e,s){const o=t._vtc;o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,s){const o=t.style,i=isString(s);if(s&&!i){for(const n in s)setStyle(o,n,s[n]);if(e&&!isString(e))for(const n in e)s[n]==null&&setStyle(o,n,"")}else{const n=o.display;i?e!==s&&(o.cssText=s):e&&t.removeAttribute("style"),"_vod"in t&&(o.display=n)}}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(o=>setStyle(t,e,o));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const o=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(o),s.replace(importantRE,""),"important"):t[o]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let o=camelize(e);if(o!=="filter"&&o in t)return prefixCache[e]=o;o=capitalize(o);for(let i=0;i<prefixes.length;i++){const n=prefixes[i]+o;if(n in t)return prefixCache[e]=n}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,o,i){if(o&&e.startsWith("xlink:"))s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s);else{const n=isSpecialBooleanAttr(e);s==null||n&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,n?"":s)}}function patchDOMProp(t,e,s,o,i,n,r){if(e==="innerHTML"||e==="textContent"){o&&r(o,i,n),t[e]=s==null?"":s;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=s;const c=s==null?"":s;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),s==null&&t.removeAttribute(e);return}let l=!1;if(s===""||s==null){const c=typeof t[e];c==="boolean"?s=includeBooleanAttr(s):s==null&&c==="string"?(s="",l=!0):c==="number"&&(s=0,l=!0)}try{t[e]=s}catch{}l&&t.removeAttribute(e)}const[_getNow,skipTimestampCheck]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=()=>performance.now());const s=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(s&&Number(s[1])<=53)}return[t,e]})();let cachedNow=0;const p=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p.then(reset),cachedNow=_getNow());function addEventListener(t,e,s,o){t.addEventListener(e,s,o)}function removeEventListener(t,e,s,o){t.removeEventListener(e,s,o)}function patchEvent(t,e,s,o,i=null){const n=t._vei||(t._vei={}),r=n[e];if(o&&r)r.value=o;else{const[l,c]=parseName(e);if(o){const m=n[e]=createInvoker(o,i);addEventListener(t,l,m,c)}else r&&(removeEventListener(t,l,r,c),n[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let s;for(;s=t.match(optionsModifierRE);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[hyphenate(t.slice(2)),e]}function createInvoker(t,e){const s=o=>{const i=o.timeStamp||_getNow();(skipTimestampCheck||i>=s.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(o,s.value),e,5,[o])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(o=>i=>!i._stopped&&o&&o(i))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,s,o,i=!1,n,r,l,c)=>{e==="class"?patchClass(t,o,i):e==="style"?patchStyle(t,s,o):isOn(e)?isModelListener(e)||patchEvent(t,e,s,o,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,o,i))?patchDOMProp(t,e,o,n,r,l,c):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),patchAttr(t,e,o,i))};function shouldSetAsProp(t,e,s,o){return o?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction(s)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(s)?!1:e in t}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=o=>{const i=normalizeContainer(o);if(!i)return;const n=e._component;!isFunction(n)&&!n.render&&!n.template&&(n.template=i.innerHTML),i.innerHTML="";const r=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e};function normalizeContainer(t){return isString(t)?document.querySelector(t):t}function queryKey(t){for(var e=[],s=0;s<t.length;s++){var o=t[s];if(!componentRegistered(o))throw new Error("Tried to create a query with an unregistered component");if(typeof o=="object"){var i=o.operator==="not"?"!":o.operator;e.push(i+o.Component._typeId)}else e.push(o._typeId)}return e.sort().join("-")}const hasWindow=typeof window!="undefined",now=hasWindow&&typeof window.performance!="undefined"?performance.now.bind(performance):Date.now.bind(Date);function componentRegistered(t){return typeof t=="object"&&t.Component._typeId!==void 0||t.isComponent&&t._typeId!==void 0}class SystemManager{constructor(e){this._systems=[],this._executeSystems=[],this.world=e,this.lastExecutedSystem=null}registerSystem(e,s){if(!e.isSystem)throw new Error(`System '${e.name}' does not extend 'System' class`);if(this.getSystem(e)!==void 0)return console.warn(`System '${e.getName()}' already registered.`),this;var o=new e(this.world,s);return o.init&&o.init(s),o.order=this._systems.length,this._systems.push(o),o.execute&&(this._executeSystems.push(o),this.sortSystems()),this}unregisterSystem(e){let s=this.getSystem(e);return s===void 0?(console.warn(`Can unregister system '${e.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(s),1),s.execute&&this._executeSystems.splice(this._executeSystems.indexOf(s),1),this)}sortSystems(){this._executeSystems.sort((e,s)=>e.priority-s.priority||e.order-s.order)}getSystem(e){return this._systems.find(s=>s instanceof e)}getSystems(){return this._systems}removeSystem(e){var s=this._systems.indexOf(e);!~s||this._systems.splice(s,1)}executeSystem(e,s,o){if(e.initialized&&e.canExecute()){let i=now();e.execute(s,o),e.executeTime=now()-i,this.lastExecutedSystem=e,e.clearEvents()}}stop(){this._executeSystems.forEach(e=>e.stop())}execute(e,s,o){this._executeSystems.forEach(i=>(o||i.enabled)&&this.executeSystem(i,e,s))}stats(){for(var e={numSystems:this._systems.length,systems:{}},s=0;s<this._systems.length;s++){var o=this._systems[s],i=e.systems[o.getName()]={queries:{},executeTime:o.executeTime};for(var n in o.ctx)i.queries[n]=o.ctx[n].stats()}return e}}class ObjectPool{constructor(e,s){this.freeList=[],this.count=0,this.T=e,this.isObjectPool=!0,typeof s!="undefined"&&this.expand(s)}acquire(){this.freeList.length<=0&&this.expand(Math.round(this.count*.2)+1);var e=this.freeList.pop();return e}release(e){e.reset(),this.freeList.push(e)}expand(e){for(var s=0;s<e;s++){var o=new this.T;o._pool=this,this.freeList.push(o)}this.count+=e}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class EventDispatcher{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(e,s){let o=this._listeners;o[e]===void 0&&(o[e]=[]),o[e].indexOf(s)===-1&&o[e].push(s)}hasEventListener(e,s){return this._listeners[e]!==void 0&&this._listeners[e].indexOf(s)!==-1}removeEventListener(e,s){var o=this._listeners[e];if(o!==void 0){var i=o.indexOf(s);i!==-1&&o.splice(i,1)}}dispatchEvent(e,s,o){this.stats.fired++;var i=this._listeners[e];if(i!==void 0)for(var n=i.slice(0),r=0;r<n.length;r++)n[r].call(this,s,o)}resetCounters(){this.stats.fired=this.stats.handled=0}}class Query{constructor(e,s){if(this.Components=[],this.NotComponents=[],e.forEach(n=>{typeof n=="object"?this.NotComponents.push(n.Component):this.Components.push(n)}),this.Components.length===0)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new EventDispatcher,this.reactive=!1,this.key=queryKey(e);for(var o=0;o<s._entities.length;o++){var i=s._entities[o];this.match(i)&&(i.queries.push(this),this.entities.push(i))}}addEntity(e){e.queries.push(this),this.entities.push(e),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED,e)}removeEntity(e){let s=this.entities.indexOf(e);~s&&(this.entities.splice(s,1),s=e.queries.indexOf(this),e.queries.splice(s,1),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_REMOVED,e))}match(e){return e.hasAllComponents(this.Components)&&!e.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(e=>e.name),not:this.NotComponents.map(e=>e.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}Query.prototype.ENTITY_ADDED="Query#ENTITY_ADDED";Query.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED";Query.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class QueryManager{constructor(e){this._world=e,this._queries={}}onEntityRemoved(e){for(var s in this._queries){var o=this._queries[s];e.queries.indexOf(o)!==-1&&o.removeEntity(e)}}onEntityComponentAdded(e,s){for(var o in this._queries){var i=this._queries[o];if(!!~i.NotComponents.indexOf(s)&&~i.entities.indexOf(e)){i.removeEntity(e);continue}!~i.Components.indexOf(s)||!i.match(e)||~i.entities.indexOf(e)||i.addEntity(e)}}onEntityComponentRemoved(e,s){for(var o in this._queries){var i=this._queries[o];if(!!~i.NotComponents.indexOf(s)&&!~i.entities.indexOf(e)&&i.match(e)){i.addEntity(e);continue}if(!!~i.Components.indexOf(s)&&!!~i.entities.indexOf(e)&&!i.match(e)){i.removeEntity(e);continue}}}getQuery(e){var s=queryKey(e),o=this._queries[s];return o||(this._queries[s]=o=new Query(e,this._world)),o}stats(){var e={};for(var s in this._queries)e[s]=this._queries[s].stats();return e}}class Component{constructor(e){if(e!==!1){const s=this.constructor.schema;for(const o in s)if(e&&e.hasOwnProperty(o))this[o]=e[o];else{const i=s[o];if(i.hasOwnProperty("default"))this[o]=i.type.clone(i.default);else{const n=i.type;this[o]=n.clone(n.default)}}}this._pool=null}copy(e){const s=this.constructor.schema;for(const o in s){const i=s[o];e.hasOwnProperty(o)&&(this[o]=i.type.copy(e[o],this[o]))}return this}clone(){return new this.constructor().copy(this)}reset(){const e=this.constructor.schema;for(const s in e){const o=e[s];if(o.hasOwnProperty("default"))this[s]=o.type.copy(o.default,this[s]);else{const i=o.type;this[s]=i.copy(i.default,this[s])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(e){const s=this.constructor.schema;Object.keys(e).forEach(o=>{s.hasOwnProperty(o)||console.warn(`Trying to set attribute '${o}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)})}}Component.schema={};Component.isComponent=!0;Component.getName=function(){return this.displayName||this.name};class SystemStateComponent extends Component{}SystemStateComponent.isSystemStateComponent=!0;class EntityPool extends ObjectPool{constructor(e,s,o){super(s,void 0),this.entityManager=e,typeof o!="undefined"&&this.expand(o)}expand(e){for(var s=0;s<e;s++){var o=new this.T(this.entityManager);o._pool=this,this.freeList.push(o)}this.count+=e}}class EntityManager{constructor(e){this.world=e,this.componentsManager=e.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new QueryManager(this),this.eventDispatcher=new EventDispatcher,this._entityPool=new EntityPool(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(e){return this._entitiesByNames[e]}createEntity(e){var s=this._entityPool.acquire();return s.alive=!0,s.name=e||"",e&&(this._entitiesByNames[e]?console.warn(`Entity name '${e}' already exist`):this._entitiesByNames[e]=s),this._entities.push(s),this.eventDispatcher.dispatchEvent(ENTITY_CREATED,s),s}entityAddComponent(e,s,o){if(typeof s._typeId=="undefined"&&!this.world.componentsManager._ComponentsMap[s._typeId])throw new Error(`Attempted to add unregistered component "${s.getName()}"`);if(!~e._ComponentTypes.indexOf(s)){e._ComponentTypes.push(s),s.__proto__===SystemStateComponent&&e.numStateComponents++;var i=this.world.componentsManager.getComponentsPool(s),n=i?i.acquire():new s(o);i&&o&&n.copy(o),e._components[s._typeId]=n,this._queryManager.onEntityComponentAdded(e,s),this.world.componentsManager.componentAddedToEntity(s),this.eventDispatcher.dispatchEvent(COMPONENT_ADDED,e,s)}}entityRemoveComponent(e,s,o){var i=e._ComponentTypes.indexOf(s);!~i||(this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE,e,s),o?this._entityRemoveComponentSync(e,s,i):(e._ComponentTypesToRemove.length===0&&this.entitiesWithComponentsToRemove.push(e),e._ComponentTypes.splice(i,1),e._ComponentTypesToRemove.push(s),e._componentsToRemove[s._typeId]=e._components[s._typeId],delete e._components[s._typeId]),this._queryManager.onEntityComponentRemoved(e,s),s.__proto__===SystemStateComponent&&(e.numStateComponents--,e.numStateComponents===0&&!e.alive&&e.remove()))}_entityRemoveComponentSync(e,s,o){e._ComponentTypes.splice(o,1);var i=e._components[s._typeId];delete e._components[s._typeId],i.dispose(),this.world.componentsManager.componentRemovedFromEntity(s)}entityRemoveAllComponents(e,s){let o=e._ComponentTypes;for(let i=o.length-1;i>=0;i--)o[i].__proto__!==SystemStateComponent&&this.entityRemoveComponent(e,o[i],s)}removeEntity(e,s){var o=this._entities.indexOf(e);if(!~o)throw new Error("Tried to remove entity not in list");e.alive=!1,this.entityRemoveAllComponents(e,s),e.numStateComponents===0&&(this.eventDispatcher.dispatchEvent(ENTITY_REMOVED,e),this._queryManager.onEntityRemoved(e),s===!0?this._releaseEntity(e,o):this.entitiesToRemove.push(e))}_releaseEntity(e,s){this._entities.splice(s,1),this._entitiesByNames[e.name]&&delete this._entitiesByNames[e.name],e._pool.release(e)}removeAllEntities(){for(var e=this._entities.length-1;e>=0;e--)this.removeEntity(this._entities[e])}processDeferredRemoval(){if(!!this.deferredRemovalEnabled){for(let s=0;s<this.entitiesToRemove.length;s++){let o=this.entitiesToRemove[s],i=this._entities.indexOf(o);this._releaseEntity(o,i)}this.entitiesToRemove.length=0;for(let s=0;s<this.entitiesWithComponentsToRemove.length;s++){let o=this.entitiesWithComponentsToRemove[s];for(;o._ComponentTypesToRemove.length>0;){let i=o._ComponentTypesToRemove.pop();var e=o._componentsToRemove[i._typeId];delete o._componentsToRemove[i._typeId],e.dispose(),this.world.componentsManager.componentRemovedFromEntity(i)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(e){return this._queryManager.getQuery(e)}count(){return this._entities.length}stats(){var e={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var s in this.componentsManager._componentPool){var o=this.componentsManager._componentPool[s];e.componentPool[o.T.getName()]={used:o.totalUsed(),size:o.count}}return e}}const ENTITY_CREATED="EntityManager#ENTITY_CREATE",ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class ComponentManager{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(e){return this.Components.indexOf(e)!==-1}registerComponent(e,s){if(this.Components.indexOf(e)!==-1){console.warn(`Component type: '${e.getName()}' already registered.`);return}const o=e.schema;if(!o)throw new Error(`Component "${e.getName()}" has no schema property.`);for(const i in o)if(!o[i].type)throw new Error(`Invalid schema for component "${e.getName()}". Missing type for "${i}" property.`);e._typeId=this.nextComponentId++,this.Components.push(e),this._ComponentsMap[e._typeId]=e,this.numComponents[e._typeId]=0,s===void 0?s=new ObjectPool(e):s===!1&&(s=void 0),this._componentPool[e._typeId]=s}componentAddedToEntity(e){this.numComponents[e._typeId]++}componentRemovedFromEntity(e){this.numComponents[e._typeId]--}getComponentsPool(e){return this._componentPool[e._typeId]}}const Version="0.3.1";class Entity{constructor(e){this._entityManager=e||null,this.id=e._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(e,s){var o=this._components[e._typeId];return!o&&s===!0&&(o=this._componentsToRemove[e._typeId]),o}getRemovedComponent(e){return this._componentsToRemove[e._typeId]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(e){var s=this._components[e._typeId];if(!!s){for(var o=0;o<this.queries.length;o++){var i=this.queries[o];i.reactive&&i.Components.indexOf(e)!==-1&&i.eventDispatcher.dispatchEvent(Query.prototype.COMPONENT_CHANGED,this,s)}return s}}addComponent(e,s){return this._entityManager.entityAddComponent(this,e,s),this}removeComponent(e,s){return this._entityManager.entityRemoveComponent(this,e,s),this}hasComponent(e,s){return!!~this._ComponentTypes.indexOf(e)||s===!0&&this.hasRemovedComponent(e)}hasRemovedComponent(e){return!!~this._ComponentTypesToRemove.indexOf(e)}hasAllComponents(e){for(var s=0;s<e.length;s++)if(!this.hasComponent(e[s]))return!1;return!0}hasAnyComponents(e){for(var s=0;s<e.length;s++)if(this.hasComponent(e[s]))return!0;return!1}removeAllComponents(e){return this._entityManager.entityRemoveAllComponents(this,e)}copy(e){for(var s in e._components){var o=e._components[s];this.addComponent(o.constructor);var i=this.getComponent(o.constructor);i.copy(o)}return this}clone(){return new Entity(this._entityManager).copy(this)}reset(){this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0;for(var e in this._components)delete this._components[e]}remove(e){return this._entityManager.removeEntity(this,e)}}const DEFAULT_OPTIONS={entityPoolSize:0,entityClass:Entity};class World{constructor(e={}){if(this.options=Object.assign({},DEFAULT_OPTIONS,e),this.componentsManager=new ComponentManager(this),this.entityManager=new EntityManager(this),this.systemManager=new SystemManager(this),this.enabled=!0,this.eventQueues={},hasWindow&&typeof CustomEvent!="undefined"){var s=new CustomEvent("ecsy-world-created",{detail:{world:this,version:Version}});window.dispatchEvent(s)}this.lastTime=now()/1e3}registerComponent(e,s){return this.componentsManager.registerComponent(e,s),this}registerSystem(e,s){return this.systemManager.registerSystem(e,s),this}hasRegisteredComponent(e){return this.componentsManager.hasComponent(e)}unregisterSystem(e){return this.systemManager.unregisterSystem(e),this}getSystem(e){return this.systemManager.getSystem(e)}getSystems(){return this.systemManager.getSystems()}execute(e,s){e||(s=now()/1e3,e=s-this.lastTime,this.lastTime=s),this.enabled&&(this.systemManager.execute(e,s),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(e){return this.entityManager.createEntity(e)}stats(){var e={entities:this.entityManager.stats(),system:this.systemManager.stats()};return e}}class System{canExecute(){if(this._mandatoryQueries.length===0)return!0;for(let s=0;s<this._mandatoryQueries.length;s++){var e=this._mandatoryQueries[s];if(e.entities.length===0)return!1}return!0}getName(){return this.constructor.getName()}constructor(e,s){if(this.world=e,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,s&&s.priority&&(this.priority=s.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var o in this.constructor.queries){var i=this.constructor.queries[o],n=i.components;if(!n||n.length===0)throw new Error("'components' attribute can't be empty in a query");let c=n.filter(u=>!componentRegistered(u));if(c.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${o}' with unregistered components: [${c.map(u=>u.getName()).join(", ")}]`);var r=this.world.entityManager.queryComponents(n);this._queries[o]=r,i.mandatory===!0&&this._mandatoryQueries.push(r),this.queries[o]={results:r.entities};var l=["added","removed","changed"];const m={added:Query.prototype.ENTITY_ADDED,removed:Query.prototype.ENTITY_REMOVED,changed:Query.prototype.COMPONENT_CHANGED};i.listen&&l.forEach(u=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${l.join(", ")}) for query '${o}' but it does not implement the 'execute' method.`),i.listen[u]){let g=i.listen[u];if(u==="changed"){if(r.reactive=!0,g===!0){let f=this.queries[o][u]=[];r.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,a=>{f.indexOf(a)===-1&&f.push(a)})}else if(Array.isArray(g)){let f=this.queries[o][u]=[];r.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,(a,h)=>{g.indexOf(h.constructor)!==-1&&f.indexOf(a)===-1&&f.push(a)})}}else{let f=this.queries[o][u]=[];r.eventDispatcher.addEventListener(m[u],a=>{f.indexOf(a)===-1&&f.push(a)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let s in this.queries){var e=this.queries[s];if(e.added&&(e.added.length=0),e.removed&&(e.removed.length=0),e.changed)if(Array.isArray(e.changed))e.changed.length=0;else for(let o in e.changed)e.changed[o].length=0}}toJSON(){var e={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var s=this.constructor.queries;for(let o in s){let i=this.queries[o],n=s[o],r=e.queries[o]={key:this._queries[o].key};r.mandatory=n.mandatory===!0,r.reactive=n.listen&&(n.listen.added===!0||n.listen.removed===!0||n.listen.changed===!0||Array.isArray(n.listen.changed)),r.reactive&&(r.listen={},["added","removed","changed"].forEach(c=>{i[c]&&(r.listen[c]={entities:i[c].length})}))}}return e}}System.isSystem=!0;System.getName=function(){return this.displayName||this.name};class TagComponent extends Component{constructor(){super(!1)}}TagComponent.isTagComponent=!0;const copyValue=t=>t,cloneValue=t=>t,copyArray=(t,e)=>{if(!t)return t;if(!e)return t.slice();e.length=0;for(let s=0;s<t.length;s++)e.push(t[s]);return e},cloneArray=t=>t&&t.slice(),copyJSON=t=>JSON.parse(JSON.stringify(t)),cloneJSON=t=>JSON.parse(JSON.stringify(t));function createType(t){var e=["name","default","copy","clone"],s=e.filter(o=>!t.hasOwnProperty(o));if(s.length>0)throw new Error(`createType expects a type definition with the following properties: ${s.join(", ")}`);return t.isType=!0,t}const Types={Number:createType({name:"Number",default:0,copy:copyValue,clone:cloneValue}),Boolean:createType({name:"Boolean",default:!1,copy:copyValue,clone:cloneValue}),String:createType({name:"String",default:"",copy:copyValue,clone:cloneValue}),Array:createType({name:"Array",default:[],copy:copyArray,clone:cloneArray}),Ref:createType({name:"Ref",default:void 0,copy:copyValue,clone:cloneValue}),JSON:createType({name:"JSON",default:null,copy:copyJSON,clone:cloneJSON})};function generateId(t){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=s.length,i=0;i<t;i++)e+=s.charAt(Math.floor(Math.random()*o));return e}function injectScript(t,e){var s=document.createElement("script");s.src=t,s.onload=e,(document.head||document.documentElement).appendChild(s)}function hookConsoleAndErrors(t){var e=["error","warning","log"];e.forEach(s=>{if(typeof console[s]=="function"){var o=console[s].bind(console);console[s]=(...i)=>(t.send({method:"console",type:s,args:JSON.stringify(i)}),o.apply(null,i))}}),window.addEventListener("error",s=>{t.send({method:"error",error:JSON.stringify({message:s.error.message,stack:s.error.stack})})})}function includeRemoteIdHTML(t){let e=document.createElement("div");return e.style.cssText=`
    align-items: center;
    background-color: #333;
    color: #aaa;
    display:flex;
    font-family: Arial;
    font-size: 1.1em;
    height: 40px;
    justify-content: center;
    left: 0;
    opacity: 0.9;
    position: absolute;
    right: 0;
    text-align: center;
    top: 0;
  `,e.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${t}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(e),e}function enableRemoteDevtools(remoteId){if(!hasWindow){console.warn("Remote devtools not available outside the browser");return}window.generateNewCode=()=>{window.localStorage.clear(),remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=t=>{var e=t.detail.world;Version=t.detail.version,worldsBeforeLoading.push(e)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",function(){infoDiv.innerHTML="Connected",connection.on("data",function(data){if(data.type==="init"){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(t=>{var e=new CustomEvent("ecsy-world-created",{detail:{world:t,version:Version}});window.dispatchEvent(e)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if(data.type==="executeScript"){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value})}})})})})};injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}hasWindow&&new URLSearchParams(window.location.search).has("enable-remote-devtools")&&enableRemoteDevtools();class Constants{}k(Constants,"CELL_SIZE",16),k(Constants,"GAME_WIDTH",800),k(Constants,"GAME_HEIGHT",600),k(Constants,"ANIMATION_UNIT_SPEED",250),k(Constants,"LAYER_TILES",0),k(Constants,"LAYER_DEAD",30),k(Constants,"LAYER_UNITS",50),k(Constants,"LAYER_UI",100);class TransformComponent extends Component{constructor(){super(...arguments);k(this,"position");k(this,"rotation")}}TransformComponent.schema={position:{type:Types.Ref},rotation:{type:Types.Number,default:0}};class ShapeComponent extends Component{constructor(){super(...arguments);k(this,"shape")}}ShapeComponent.schema={shape:{type:Types.Ref}};class RenderComponent extends TagComponent{}class SizeComponent extends Component{}SizeComponent.schema={width:{type:Types.Number,default:0},height:{type:Types.Number,default:0}};class SelectableComponent extends Component{}SelectableComponent.schema={selected:{type:Types.Boolean,default:!1}};class SelectorComponent extends TagComponent{}class MovableComponent extends Component{}MovableComponent.schema={moving:{type:Types.Boolean,default:!1}};class TextComponent extends Component{}TextComponent.schema={text:{type:Types.JSON}};class FpsComponent extends TagComponent{}class LayerComponent extends Component{}LayerComponent.schema={layer:{type:Types.Number,default:10}};class TweenComponent extends Component{constructor(){super(...arguments);k(this,"tween",null)}}TweenComponent.schema={tween:{type:Types.Ref,default:null}};class VisibilityComponent extends Component{}VisibilityComponent.schema={visible:{type:Types.Boolean,default:!0}};class HealthComponent extends Component{}HealthComponent.schema={points:{type:Types.Number,default:10},maxPoints:{type:Types.Number,default:10}};class AliveComponent extends Component{}AliveComponent.schema={alive:{type:Types.Boolean,default:!0}};class DebugComponent extends TagComponent{}class GridComponent extends Component{}GridComponent.schema={grid:{type:Types.Ref}};class GridViewComponent extends Component{}GridViewComponent.schema={view:{type:Types.Ref}};const he=class{constructor(e,s){this.x=e,this.y=s}static angle(e,s){return Math.atan2(s.y-e.y,s.x-e.x)*(180/Math.PI)}static distance(e,s){return Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2))}static scale(e,s){return new he(e.x*s.x,e.y*s.y)}static min(e,s){return new he(Math.min(e.x,s.x),Math.min(e.y,s.y))}static max(e,s){return new he(Math.max(e.x,s.x),Math.max(e.y,s.y))}static lerp(e,s,o){return new he(e.x*(1-o)+s.x*o,e.y*(1-o)+s.y*o)}static subtracts(e,s){return new he(e.x-s.x,e.y-s.y)}static multiplies(e,s){return new he(e.x*s,e.y*s)}static divides(e,s,o){let i=e.x/s,n=e.y/s;return o&&(i=Math[o](i),n=Math[o](n)),new he(i,n)}static adds(e,s){return new he(e.x+s.x,e.y+s.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalized(){const e=this.magnitude();return new he(this.x!==0?this.x/e:0,this.y!==0?this.y/e:0)}equals(e){return this.x===e.x&&this.y===e.y}toString(){return`${this.x},${this.y}`}};let Vector2=he;k(Vector2,"ZERO",Object.seal(new he(0,0)));class MoveTransformVelocityComponent extends Component{constructor(){super(...arguments);k(this,"moveSpeed");k(this,"velocity")}}MoveTransformVelocityComponent.schema={moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO}};class MovePositionDirectComponent extends Component{constructor(){super(...arguments);k(this,"movePosition")}}MovePositionDirectComponent.schema={movePosition:{type:Types.Ref,default:null}};class PlayerMovementMouseComponent extends TagComponent{}class PlayerMovementKeysComponent extends TagComponent{}class MoveVelocityComponent extends Component{constructor(){super(...arguments);k(this,"moveSpeed");k(this,"velocity");k(this,"body")}}MoveVelocityComponent.schema={moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO},body:{type:Types.Ref,default:null}};class PathfindingComponent extends Component{}PathfindingComponent.schema={pathfinding:{type:Types.Ref}};class LayerComponentComparator{static compare(e,s){const o=e.getComponent(LayerComponent),i=s.getComponent(LayerComponent);return!o||!i?0:o.layer-i.layer}}class Bounds{constructor(e,s){k(this,"extends");k(this,"min");k(this,"max");this.center=e,this.size=s,this.extends=new Vector2(s.x/2,s.y/2),this.min=Vector2.subtracts(this.center,this.extends),this.max=Vector2.adds(this.center,this.extends)}contains(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}}class EntityHelper{static isAlive(e){const s=e.getComponent(AliveComponent);return(s==null?void 0:s.alive)||!1}static isVisible(e,s=!1){const o=e.getComponent(VisibilityComponent);return!o&&s?!0:!(o&&o.visible===!1)}static isPositionInsideEntity(e,s,o){const i=e.getComponent(TransformComponent),n=e.getComponent(SizeComponent);return!i||!n?!1:new Bounds(i.position,new Vector2(n.width,n.height)).contains(new Vector2(s,o))}static isObjectInsideContainer(e,s){const o=s.getComponent(TransformComponent);if(!o)return!1;const i=s.getComponent(SizeComponent);if(!i)return!1;const n=e.getComponent(TransformComponent);return n?n.position.x>=o.position.x&&n.position.x<=o.position.x+i.width&&n.position.y>=o.position.y&&n.position.y<=o.position.y+i.height:!1}static deselect(e){const s=e.getMutableComponent(SelectableComponent);!s||(s.selected=!1)}static select(e){const s=e.getMutableComponent(SelectableComponent);!s||(s.selected=!0)}static isMoving(e){const s=e.getComponent(MovePositionDirectComponent);return s?s.movePosition!==null:!1}}class Colors{}k(Colors,"WHITE","#FFFFFF"),k(Colors,"BLACK","#000000");const defaultProps$4={position:Vector2.ZERO,align:"center",baseline:"middle"};class Text{constructor(e){k(this,"position");k(this,"text");k(this,"font");k(this,"color");k(this,"align");k(this,"baseline");Object.assign(this,defaultProps$4,e)}}const defaultShapeProps={position:Vector2.ZERO};class Shape{constructor(e){k(this,"position");k(this,"lineWidth");Object.assign(this,defaultShapeProps,e)}}class Line extends Shape{constructor(s){super(s);k(this,"start");k(this,"end");k(this,"lineColor")}}class Debug{static isEnabled(e){return this.options.includes("all")?!0:this.options.includes(e)}static drawLine(e){if(!this.isEnabled("line"))return null;e=Object.assign(ye({},this.DEFAULTS.shapes.line),e);const s=new Line(e);return this.shapes.push(s),s}static drawText(e){if(!this.isEnabled("text"))return null;e=Object.assign(ye({},this.DEFAULTS.text),e);const s=new Text(e);return this.texts.push(s),s}}k(Debug,"DEFAULTS",{shapes:{line:{lineColor:Colors.WHITE,lineWidth:1}},text:{font:"10px Arial",color:Colors.WHITE}}),k(Debug,"options",[]),k(Debug,"shapes",[]),k(Debug,"texts",[]);class AbstractShapeRenderer{constructor(e){this.context=e}render(e){this.context.translate(e.position.x,e.position.y)}}class LineRenderer extends AbstractShapeRenderer{render(e){super.render(e),this.context.strokeStyle=e.lineColor.toString(),this.context.lineWidth=e.lineWidth,this.context.beginPath(),this.context.moveTo(e.start.x,e.start.y),this.context.lineTo(e.end.x,e.end.y),this.context.closePath(),this.context.stroke()}}class TextRenderer{constructor(e){this.context=e}render(e){this.context.save(),this.context.translate(e.position.x,e.position.y),this.context.font=e.font,this.context.fillStyle=e.color.toString(),this.context.textAlign=e.align,this.context.textBaseline=e.baseline,this.context.fillText(e.text,0,0),this.context.restore()}}class DebugComponentRenderer{constructor(e){k(this,"textRenderer");k(this,"lineRenderer");this.context=e,this.textRenderer=new TextRenderer(e),this.lineRenderer=new LineRenderer(e)}render(e){for(const s of Debug.shapes)s instanceof Line&&this.lineRenderer.render(s);for(const s of Debug.texts)this.textRenderer.render(s)}}class GridViewComponentRenderer{constructor(e){k(this,"textRenderer");this.context=e,this.textRenderer=new TextRenderer(e)}render(e){if(!Debug.isEnabled("gridview"))return;const s=e.getComponent(GridComponent);if(!s)return;const o=s.grid,i=e.getComponent(GridViewComponent);if(!i)return;const n=i.view;for(let r=0;r<o.height;r++)for(let l=0;l<o.width;l++){const c=n.getView(l,r);this.textRenderer.render(c)}}}class HealthComponentRenderer{constructor(e){this.context=e}render(e){const s=e.getComponent(SelectableComponent);if(!s||!s.selected)return;const o=e.getComponent(HealthComponent);if(!o||!e.getComponent(TransformComponent))return;const n=e.getComponent(SizeComponent);if(!n)return;const r={x:-(n.width/2),y:n.height/2+5,width:n.width,height:5};this.context.beginPath(),this.context.rect(r.x,r.y,r.width,r.height),this.context.fillStyle="#000",this.context.fill();const l=o.points/o.maxPoints;l>0&&(this.context.beginPath(),this.context.rect(r.x+1,r.y+1,l*(r.width-2),r.height-2),this.context.fillStyle=this.healthColor(l),this.context.fill())}healthColor(e){return e>=.66?"green":e>=.33?"orange":"red"}}const me=class{constructor(e){this.context=e}render(e){const s=e.getComponent(SelectableComponent);if(!s||!s.selected||!e.getComponent(TransformComponent))return;const i=e.getComponent(SizeComponent);if(!i)return;this.context.lineWidth=1,this.context.strokeStyle="#000",this.context.lineCap="square",this.context.lineJoin="round";const n=-(i.width/2),r=-(i.height/2);this.context.beginPath(),this.context.moveTo(n-me.OFFSET,r+2),this.context.lineTo(n-me.OFFSET,r-me.OFFSET),this.context.lineTo(n+2,r-me.OFFSET),this.context.stroke(),this.context.beginPath(),this.context.moveTo(n+i.width+me.OFFSET,r+2),this.context.lineTo(n+i.width+me.OFFSET,r-me.OFFSET),this.context.lineTo(n+i.width-2,r-me.OFFSET),this.context.stroke()}};let SelectionComponentRenderer=me;k(SelectionComponentRenderer,"OFFSET",2);const defaultProps$3={position:Vector2.ZERO};class Arc extends Shape{constructor(s){super(ye(ye({},defaultProps$3),s));k(this,"radius");k(this,"startAngle");k(this,"endAngle");k(this,"fillStyle");k(this,"strokeStyle")}}const defaultCircleProps={startAngle:0*Math.PI,endAngle:2*Math.PI};class Circle extends Arc{constructor(e){super(ye(ye({},defaultCircleProps),e))}}const defaultProps$2={closed:!1};class PolylineBuilder{constructor(e){this.props=Object.assign({},e,defaultProps$2),this.props.points=[]}addPoint(e){return this.props.points.push(e),this}closed(){return this.props.closed=!0,this}build(){return new Polyline(this.props)}}const defaultProps$1=Object.seal({closePath:!1,fillStyle:null,lineStyle:null,lineWidth:0});class Polyline extends Shape{constructor(s){super(s);k(this,"points");k(this,"closed",!1);k(this,"fillStyle");k(this,"lineStyle");Object.assign(this,defaultProps$1,s)}static builder(s){return new PolylineBuilder(s)}}const defaultProps=Object.seal({fillStyle:null,lineStyle:null});class Rectangle extends Shape{constructor(s){super(s);k(this,"size");k(this,"fillStyle");k(this,"lineStyle");k(this,"anchor");Object.assign(this,defaultProps,s)}}class ArcRenderer extends AbstractShapeRenderer{render(e){super.render(e),this.context.beginPath(),this.context.arc(0,0,e.radius,e.startAngle,e.endAngle),e.fillStyle&&(this.context.fillStyle=e.fillStyle,this.context.fill()),e.strokeStyle&&e.lineWidth&&(this.context.lineWidth=e.lineWidth,this.context.strokeStyle=e.strokeStyle,this.context.stroke())}}class PolylineRenderer extends AbstractShapeRenderer{render(e){super.render(e),this.context.beginPath();for(const s of e.points)this.context.lineTo(s.x,s.y);e.closed&&this.context.closePath(),e.fillStyle!==null&&(this.context.fillStyle=e.fillStyle,this.context.fill()),e.lineWidth>0&&(this.context.lineWidth=e.lineWidth,this.context.strokeStyle=e.lineStyle||"#000",this.context.stroke())}}class RectangleRenderer extends AbstractShapeRenderer{render(e){var i;super.render(e);const s=e.anchor==="top-left"?0:-(e.size.width/2),o=e.anchor==="top-left"?0:-(e.size.height/2);this.context.beginPath(),this.context.rect(s,o,e.size.width,e.size.height),this.context.closePath(),e.fillStyle&&(this.context.fillStyle=e.fillStyle.toString(),this.context.fill()),e.lineWidth>0&&(this.context.lineWidth=e.lineWidth,this.context.strokeStyle=((i=e.lineStyle)==null?void 0:i.toString())||"#000",this.context.stroke())}}class ShapeRenderer{constructor(e){k(this,"shapeRenderers",[]);this.context=e,this.shapeRenderers.push({shape:Rectangle,renderer:new RectangleRenderer(this.context)});const s=new ArcRenderer(this.context);this.shapeRenderers.push({shape:Arc,renderer:s}),this.shapeRenderers.push({shape:Circle,renderer:s}),this.shapeRenderers.push({shape:Polyline,renderer:new PolylineRenderer(this.context)}),this.shapeRenderers.push({shape:Line,renderer:new LineRenderer(this.context)})}getRendererByShape(e){const s=this.shapeRenderers.find(o=>e instanceof o.shape);return s?s.renderer:null}render(e){const s=this.getRendererByShape(e);s&&s.render(e)}}class ShapeComponentRenderer{constructor(e){k(this,"shapeRenderer");this.context=e,this.shapeRenderer=new ShapeRenderer(this.context)}render(e){const s=e.getComponent(ShapeComponent);if(s===void 0)return;this.context.save();const o=e.getComponent(TransformComponent);o&&this.context.rotate(o.rotation*Math.PI/180),this.shapeRenderer.render(s.shape),this.context.restore()}}class TextComponentRenderer{constructor(e){k(this,"textRenderer");this.context=e,this.textRenderer=new TextRenderer(e)}render(e){const s=e.getComponent(TextComponent);!s||!e.getComponent(TransformComponent)||this.textRenderer.render(s.text)}}class EntityRenderer{constructor(e){k(this,"componentRenderers",[]);this.context=e,this.componentRenderers.push({component:ShapeComponent,renderer:new ShapeComponentRenderer(this.context)}),this.componentRenderers.push({component:SelectableComponent,renderer:new SelectionComponentRenderer(this.context)}),this.componentRenderers.push({component:HealthComponent,renderer:new HealthComponentRenderer(this.context)}),this.componentRenderers.push({component:TextComponent,renderer:new TextComponentRenderer(this.context)}),this.componentRenderers.push({component:DebugComponent,renderer:new DebugComponentRenderer(this.context)}),this.componentRenderers.push({component:GridViewComponent,renderer:new GridViewComponentRenderer(this.context)})}render(e,s){if(!EntityHelper.isVisible(e,!0)||!e.hasComponent(s))return;const o=e.getComponent(TransformComponent),i=this.getComponentRender(s);i!==null&&(o&&this.context.translate(o.position.x,o.position.y),i.render(e),this.context.setTransform(1,0,0,1,0,0))}getComponentRender(e){const s=this.componentRenderers.find(o=>e===o.component);return s!==void 0?s.renderer:null}}const Me=class extends System{constructor(s,o){super(s,o);k(this,"canvas");k(this,"context");k(this,"entityRenderer");this.canvas=o.canvas,this.context=this.canvas.getContext("2d"),this.entityRenderer=new EntityRenderer(this.context)}execute(s,o){this.context.clearRect(0,0,Constants.GAME_WIDTH,Constants.GAME_HEIGHT);const i=this.queries.renderables.results.sort(this.compareEntity);for(const n of Me.RENDER_ORDER)i.forEach(r=>this.entityRenderer.render(r,n))}compareEntity(s,o){const i=s.getComponent(AliveComponent),n=o.getComponent(AliveComponent);if(i&&n){if(!i.alive&&n.alive)return-1;if(i.alive&&!n.alive)return 1;if(!i.alive&&!n.alive)return 0}return LayerComponentComparator.compare(s,o)}};let RenderSystem=Me;k(RenderSystem,"queries",{renderables:{components:[RenderComponent]}}),k(RenderSystem,"RENDER_ORDER",[DebugComponent,GridViewComponent,ShapeComponent,HealthComponent,SelectableComponent,TextComponent]);class Input{static addKeyStatus(e,s){this.keysStatus[e]=s}static setMouseButton(e,s){s==="click"?this.mouseClick=1:s==="dblclick"?this.mouseClick=2:this.mouseButtons[e]=s}static clearKeysStatus(){for(const e of Object.keys(this.keysStatus))this.keysStatus[e]==="keyup"&&(this.keysStatus[e]=void 0)}static clearMouseStatuses(){for(const e of Object.keys(this.mouseButtons)){const s=parseInt(e);this.mouseButtons[s]==="mouseup"&&(this.mouseButtons[s]=void 0)}this.mouseClick=0}static isKey(e,s){return this.keysStatus[e]===s}static isKeyPressed(e){return this.isKey(e,"keypress")}static isKeyDown(e){return this.isKey(e,"keydown")}static isKeyUp(e){return this.isKey(e,"keyup")}static isMouseButtonUp(e){return this.mouseButtons[e]==="mouseup"}static isMouseButtonDown(e){return this.mouseButtons[e]==="mousedown"}static isMouseClick(){return this.mouseClick===1}static isMouseDblClick(){return this.mouseClick===2}}k(Input,"keysStatus",{}),k(Input,"mousePosition",Vector2.ZERO),k(Input,"mouseButtons",{}),k(Input,"mouseClick",0);const we=class extends System{constructor(){super(...arguments);k(this,"startPosition",null);k(this,"deselectEntitiesTimeout",null)}getSelector(){return this.queries.selector.results[0]}getSelected(){return this.queries.selectable.results.filter(s=>{var o;return((o=s.getComponent(SelectableComponent))==null?void 0:o.selected)||!1})}startSelect(){const s=this.getSelector(),o=s.getMutableComponent(TransformComponent);if(o===void 0)return;o.position=this.startPosition;const i=s.getMutableComponent(SizeComponent);if(i===void 0)return;i.height=0,i.width=0;const n=s.getMutableComponent(ShapeComponent);if(!n)return;n&&(n.shape.size.height=0,n.shape.size.width=0);const r=s.getMutableComponent(VisibilityComponent);!r||(r.visible=!0)}updateSelect(){const s=this.getSelector(),o=s.getComponent(TransformComponent);if(!o)return;const i=Input.mousePosition.x-o.position.x,n=Input.mousePosition.y-o.position.y;this.getSelected().forEach(EntityHelper.deselect);const r=s.getMutableComponent(SizeComponent);if(!r)return;r.width=i,r.height=n;const l=s.getMutableComponent(ShapeComponent);!l||l.shape instanceof Rectangle&&(l.shape.size.width=i,l.shape.size.height=n)}endSelect(){this.selectEntities();const o=this.getSelector().getMutableComponent(VisibilityComponent);!o||(o.visible=!1,this.startPosition=null)}selectEntities(){if(Vector2.distance(this.startPosition,Input.mousePosition)<we.SINGLE_UNIT_DISTANCE){const s=this.getEntityAtPosition(Input.mousePosition.x,Input.mousePosition.y);if(s)EntityHelper.select(s);else{Input.isMouseDblClick()||(this.deselectEntitiesTimeout=setTimeout(()=>{this.getSelected().filter(o=>!EntityHelper.isMoving(o)).forEach(EntityHelper.deselect)},300));return}}else this.selectEntitiesInsideSelector()}selectEntitiesInsideSelector(){const s=this.getSelector();this.queries.selectable.results.filter(o=>EntityHelper.isObjectInsideContainer(o,s)).forEach(o=>EntityHelper.select(o))}getEntityAtPosition(s,o){return this.queries.selectable.results.find(i=>EntityHelper.isPositionInsideEntity(i,s,o))||null}execute(s,o){Input.isMouseDblClick()&&this.deselectEntitiesTimeout!==null&&clearTimeout(this.deselectEntitiesTimeout),this.startPosition===null?Input.isMouseButtonDown(0)&&(this.startPosition=Input.mousePosition,this.startSelect()):Input.isMouseButtonUp(0)?this.endSelect():Vector2.distance(this.startPosition,Input.mousePosition)>we.SINGLE_UNIT_DISTANCE&&this.updateSelect()}};let PlayerSelectionSystem=we;k(PlayerSelectionSystem,"queries",{selectable:{components:[SelectableComponent]},selector:{components:[SelectorComponent]}}),k(PlayerSelectionSystem,"SINGLE_UNIT_DISTANCE",5);const Re=class extends System{constructor(){super(...arguments);k(this,"update",0)}execute(s,o){this.update+=s,this.update>Re.UPDATE_TIME&&(this.queries.fps.results.forEach(i=>{const n=i.getMutableComponent(TextComponent);n&&(n.text.text=""+Math.round(1e3/s))}),this.update=0)}};let FpsSystem=Re;k(FpsSystem,"queries",{fps:{components:[FpsComponent]}}),k(FpsSystem,"UPDATE_TIME",1e3);class TweenSystem extends System{execute(e,s){for(const o of this.queries.tweenable.results){const i=o.getComponent(TweenComponent);i&&i.tween!==null&&i.tween.update(e)}}}k(TweenSystem,"queries",{tweenable:{components:[TweenComponent]}});class HealthSystem extends System{execute(e,s){this.queries.healthy.added!==void 0&&this.queries.healthy.added.forEach(this.updateStatus),this.queries.healthy.changed!==void 0&&this.queries.healthy.changed.forEach(this.updateStatus)}updateStatus(e){const s=e.getComponent(HealthComponent);if(!!s&&!!e.hasComponent(AliveComponent)&&s.points===0){const o=e.getMutableComponent(AliveComponent);if(!o)return;o.alive=!1;const i=e.getMutableComponent(ShapeComponent);if(!i)return;i.shape.fillStyle="black"}}}k(HealthSystem,"queries",{healthy:{components:[HealthComponent],listen:{added:!0,changed:!0}}});class MoveTransformVelocitySystem extends System{execute(e,s){for(const o of this.queries.movables.results){const i=o.getComponent(MoveTransformVelocityComponent);if(!i)continue;const n=o.getMutableComponent(TransformComponent);!n||i.velocity.equals(Vector2.ZERO)||(n.position=Vector2.adds(n.position,Vector2.multiplies(i.velocity,i.moveSpeed*(e/1e3))))}}}k(MoveTransformVelocitySystem,"queries",{movables:{components:[MoveTransformVelocityComponent,TransformComponent]}});class InputSystem extends System{constructor(s,o){super(s,o);k(this,"canvas");k(this,"keyQueue",[]);k(this,"mouseEvents",[]);this.canvas=o.canvas,this.canvas.addEventListener("mousedown",i=>{this.mouseEvents.push(i)}),this.canvas.addEventListener("mouseup",i=>{this.mouseEvents.push(i)}),this.canvas.addEventListener("click",i=>{this.mouseEvents.push(i)}),this.canvas.addEventListener("dblclick",i=>{this.mouseEvents.push(i)}),this.canvas.addEventListener("mousemove",i=>{Input.mousePosition=new Vector2(i.offsetX,i.offsetY)}),window.addEventListener("keydown",i=>{this.keyQueue.push(i)}),window.addEventListener("keyup",i=>{this.keyQueue.push(i)}),window.addEventListener("keypress",i=>{this.keyQueue.push(i)})}execute(s,o){if(Input.clearMouseStatuses(),this.mouseEvents.length>0){let i;for(;i=this.mouseEvents.shift();)Input.setMouseButton(i.button,i.type)}if(Input.clearKeysStatus(),this.keyQueue.length>0){let i;for(;i=this.keyQueue.pop();)Input.addKeyStatus(i.key,i.type);this.keyQueue=[]}}}class PlayerMovementKeysSystem extends System{execute(e,s){for(const o of this.queries.entities.results){const i=o.getComponent(SelectableComponent);if(!i||!i.selected)continue;let n=0,r=0;Input.isKeyDown("w")&&(r-=1),Input.isKeyDown("s")&&(r+=1),Input.isKeyDown("a")&&(n-=1),Input.isKeyDown("d")&&(n+=1);const l=new Vector2(n,r).normalized(),c=o.getMutableComponent(MoveTransformVelocityComponent);c&&(c.velocity=l);const m=o.getMutableComponent(MoveVelocityComponent);m&&(m.velocity=l);const u=o.getMutableComponent(TransformComponent);!u||l.equals(Vector2.ZERO)||(u.rotation=Vector2.angle(Vector2.ZERO,l)-90)}}}k(PlayerMovementKeysSystem,"queries",{entities:{components:[PlayerMovementKeysComponent,SelectableComponent]}});class MovePositionDirectSystem extends System{execute(e,s){for(const o of this.queries.entities.results){const i=o.getMutableComponent(MovePositionDirectComponent);if((i==null?void 0:i.movePosition)==null)continue;const n=o.getMutableComponent(TransformComponent);if(!n)continue;const r=o.getMutableComponent(MoveTransformVelocityComponent);if(r){if(Vector2.distance(n.position,i.movePosition)<5){i.movePosition=null,r.velocity=Vector2.ZERO;continue}r.velocity=Vector2.subtracts(i.movePosition,n.position).normalized()}const l=o.getMutableComponent(MoveVelocityComponent);if(l){if(Vector2.distance(n.position,i.movePosition)<5){i.movePosition=null,l.velocity=Vector2.ZERO;continue}l.velocity=Vector2.subtracts(i.movePosition,n.position).normalized()}n.rotation=Vector2.angle(n.position,i.movePosition)-90}}}k(MovePositionDirectSystem,"queries",{entities:{components:[MovePositionDirectComponent]}});class PlayerMovementMouseSystem extends System{execute(e,s){if(Input.isMouseButtonUp(2)||Input.isMouseDblClick()){const o=this.queries.pathfinding.results[0].getComponent(PathfindingComponent).pathfinding;for(const i of this.queries.entities.results){const n=i.getComponent(SelectableComponent);if(!n||!n.selected)continue;const r=i.getMutableComponent(MovePositionDirectComponent);if(!r)continue;const l=i.getComponent(TransformComponent);if(!l)continue;const c=o.grid.getPosition(l.position),m=o.grid.getPosition(Input.mousePosition),u=o.findPath(c.x,c.y,m.x,m.y);console.log(u),r.movePosition=Input.mousePosition}}}}k(PlayerMovementMouseSystem,"queries",{entities:{components:[PlayerMovementMouseComponent]},pathfinding:{components:[PathfindingComponent]}});var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var matter={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,e){(function(o,i){t.exports=i()})(commonjsGlobal,function(){return function(s){var o={};function i(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return s[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=s,i.c=o,i.d=function(n,r,l){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:l})},i.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(r&1&&(n=i(n)),r&8||r&4&&typeof n=="object"&&n&&n.__esModule)return n;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:n}),r&2&&typeof n!="string")for(var c in n)i.d(l,c,function(m){return n[m]}.bind(null,c));return l},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=21)}([function(s,o){var i={};s.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(r,l){var c,m;typeof l=="boolean"?(c=2,m=l):(c=1,m=!0);for(var u=c;u<arguments.length;u++){var g=arguments[u];if(g)for(var f in g)m&&g[f]&&g[f].constructor===Object&&(!r[f]||r[f].constructor===Object)?(r[f]=r[f]||{},i.extend(r[f],m,g[f])):r[f]=g[f]}return r},i.clone=function(r,l){return i.extend({},l,r)},i.keys=function(r){if(Object.keys)return Object.keys(r);var l=[];for(var c in r)l.push(c);return l},i.values=function(r){var l=[];if(Object.keys){for(var c=Object.keys(r),m=0;m<c.length;m++)l.push(r[c[m]]);return l}for(var u in r)l.push(r[u]);return l},i.get=function(r,l,c,m){l=l.split(".").slice(c,m);for(var u=0;u<l.length;u+=1)r=r[l[u]];return r},i.set=function(r,l,c,m,u){var g=l.split(".").slice(m,u);return i.get(r,l,0,-1)[g[g.length-1]]=c,c},i.shuffle=function(r){for(var l=r.length-1;l>0;l--){var c=Math.floor(i.random()*(l+1)),m=r[l];r[l]=r[c],r[c]=m}return r},i.choose=function(r){return r[Math.floor(i.random()*r.length)]},i.isElement=function(r){return typeof HTMLElement!="undefined"?r instanceof HTMLElement:!!(r&&r.nodeType&&r.nodeName)},i.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"},i.isFunction=function(r){return typeof r=="function"},i.isPlainObject=function(r){return typeof r=="object"&&r.constructor===Object},i.isString=function(r){return toString.call(r)==="[object String]"},i.clamp=function(r,l,c){return r<l?l:r>c?c:r},i.sign=function(r){return r<0?-1:1},i.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(r,l){return r=typeof r!="undefined"?r:0,l=typeof l!="undefined"?l:1,r+n()*(l-r)};var n=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(r){return r=r.replace("#",""),r.length==3&&(r=r.charAt(0)+r.charAt(0)+r.charAt(1)+r.charAt(1)+r.charAt(2)+r.charAt(2)),parseInt(r,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var r=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[r]||(i.warn(r),i._warnedOnce[r]=!0)},i.deprecated=function(r,l,c){r[l]=i.chain(function(){i.warnOnce("\u{1F505} deprecated \u{1F505}",c)},r[l])},i.nextId=function(){return i._nextId++},i.indexOf=function(r,l){if(r.indexOf)return r.indexOf(l);for(var c=0;c<r.length;c++)if(r[c]===l)return c;return-1},i.map=function(r,l){if(r.map)return r.map(l);for(var c=[],m=0;m<r.length;m+=1)c.push(l(r[m]));return c},i.topologicalSort=function(r){var l=[],c=[],m=[];for(var u in r)!c[u]&&!m[u]&&i._topologicalSort(u,c,m,r,l);return l},i._topologicalSort=function(r,l,c,m,u){var g=m[r]||[];c[r]=!0;for(var f=0;f<g.length;f+=1){var a=g[f];c[a]||l[a]||i._topologicalSort(a,l,c,m,u)}c[r]=!1,l[r]=!0,u.push(r)},i.chain=function(){for(var r=[],l=0;l<arguments.length;l+=1){var c=arguments[l];c._chained?r.push.apply(r,c._chained):r.push(c)}var m=function(){for(var u,g=new Array(arguments.length),f=0,a=arguments.length;f<a;f++)g[f]=arguments[f];for(f=0;f<r.length;f+=1){var h=r[f].apply(u,g);typeof h!="undefined"&&(u=h)}return u};return m._chained=r,m},i.chainPathBefore=function(r,l,c){return i.set(r,l,i.chain(c,i.get(r,l)))},i.chainPathAfter=function(r,l,c){return i.set(r,l,i.chain(i.get(r,l),c))},i.setDecomp=function(r){i._decomp=r},i.getDecomp=function(){var r=i._decomp;try{!r&&typeof window!="undefined"&&(r=window.decomp),!r&&typeof commonjsGlobal!="undefined"&&(r=commonjsGlobal.decomp)}catch{r=null}return r}}()},function(s,o){var i={};s.exports=i,function(){i.create=function(n){var r={min:{x:0,y:0},max:{x:0,y:0}};return n&&i.update(r,n),r},i.update=function(n,r,l){n.min.x=1/0,n.max.x=-1/0,n.min.y=1/0,n.max.y=-1/0;for(var c=0;c<r.length;c++){var m=r[c];m.x>n.max.x&&(n.max.x=m.x),m.x<n.min.x&&(n.min.x=m.x),m.y>n.max.y&&(n.max.y=m.y),m.y<n.min.y&&(n.min.y=m.y)}l&&(l.x>0?n.max.x+=l.x:n.min.x+=l.x,l.y>0?n.max.y+=l.y:n.min.y+=l.y)},i.contains=function(n,r){return r.x>=n.min.x&&r.x<=n.max.x&&r.y>=n.min.y&&r.y<=n.max.y},i.overlaps=function(n,r){return n.min.x<=r.max.x&&n.max.x>=r.min.x&&n.max.y>=r.min.y&&n.min.y<=r.max.y},i.translate=function(n,r){n.min.x+=r.x,n.max.x+=r.x,n.min.y+=r.y,n.max.y+=r.y},i.shift=function(n,r){var l=n.max.x-n.min.x,c=n.max.y-n.min.y;n.min.x=r.x,n.max.x=r.x+l,n.min.y=r.y,n.max.y=r.y+c}}()},function(s,o){var i={};s.exports=i,function(){i.create=function(n,r){return{x:n||0,y:r||0}},i.clone=function(n){return{x:n.x,y:n.y}},i.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},i.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},i.rotate=function(n,r,l){var c=Math.cos(r),m=Math.sin(r);l||(l={});var u=n.x*c-n.y*m;return l.y=n.x*m+n.y*c,l.x=u,l},i.rotateAbout=function(n,r,l,c){var m=Math.cos(r),u=Math.sin(r);c||(c={});var g=l.x+((n.x-l.x)*m-(n.y-l.y)*u);return c.y=l.y+((n.x-l.x)*u+(n.y-l.y)*m),c.x=g,c},i.normalise=function(n){var r=i.magnitude(n);return r===0?{x:0,y:0}:{x:n.x/r,y:n.y/r}},i.dot=function(n,r){return n.x*r.x+n.y*r.y},i.cross=function(n,r){return n.x*r.y-n.y*r.x},i.cross3=function(n,r,l){return(r.x-n.x)*(l.y-n.y)-(r.y-n.y)*(l.x-n.x)},i.add=function(n,r,l){return l||(l={}),l.x=n.x+r.x,l.y=n.y+r.y,l},i.sub=function(n,r,l){return l||(l={}),l.x=n.x-r.x,l.y=n.y-r.y,l},i.mult=function(n,r){return{x:n.x*r,y:n.y*r}},i.div=function(n,r){return{x:n.x/r,y:n.y/r}},i.perp=function(n,r){return r=r===!0?-1:1,{x:r*-n.y,y:r*n.x}},i.neg=function(n){return{x:-n.x,y:-n.y}},i.angle=function(n,r){return Math.atan2(r.y-n.y,r.x-n.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(s,o,i){var n={};s.exports=n;var r=i(2),l=i(0);(function(){n.create=function(c,m){for(var u=[],g=0;g<c.length;g++){var f=c[g],a={x:f.x,y:f.y,index:g,body:m,isInternal:!1};u.push(a)}return u},n.fromPath=function(c,m){var u=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,g=[];return c.replace(u,function(f,a,h){g.push({x:parseFloat(a),y:parseFloat(h)})}),n.create(g,m)},n.centre=function(c){for(var m=n.area(c,!0),u={x:0,y:0},g,f,a,h=0;h<c.length;h++)a=(h+1)%c.length,g=r.cross(c[h],c[a]),f=r.mult(r.add(c[h],c[a]),g),u=r.add(u,f);return r.div(u,6*m)},n.mean=function(c){for(var m={x:0,y:0},u=0;u<c.length;u++)m.x+=c[u].x,m.y+=c[u].y;return r.div(m,c.length)},n.area=function(c,m){for(var u=0,g=c.length-1,f=0;f<c.length;f++)u+=(c[g].x-c[f].x)*(c[g].y+c[f].y),g=f;return m?u/2:Math.abs(u)/2},n.inertia=function(c,m){for(var u=0,g=0,f=c,a,h,d=0;d<f.length;d++)h=(d+1)%f.length,a=Math.abs(r.cross(f[h],f[d])),u+=a*(r.dot(f[h],f[h])+r.dot(f[h],f[d])+r.dot(f[d],f[d])),g+=a;return m/6*(u/g)},n.translate=function(c,m,u){u=typeof u!="undefined"?u:1;var g=c.length,f=m.x*u,a=m.y*u,h;for(h=0;h<g;h++)c[h].x+=f,c[h].y+=a;return c},n.rotate=function(c,m,u){if(m!==0){var g=Math.cos(m),f=Math.sin(m),a=u.x,h=u.y,d=c.length,v,S,I,R;for(R=0;R<d;R++)v=c[R],S=v.x-a,I=v.y-h,v.x=a+(S*g-I*f),v.y=h+(S*f+I*g);return c}},n.contains=function(c,m){for(var u=m.x,g=m.y,f=c.length,a=c[f-1],h,d=0;d<f;d++){if(h=c[d],(u-a.x)*(h.y-a.y)+(g-a.y)*(a.x-h.x)>0)return!1;a=h}return!0},n.scale=function(c,m,u,g){if(m===1&&u===1)return c;g=g||n.centre(c);for(var f,a,h=0;h<c.length;h++)f=c[h],a=r.sub(f,g),c[h].x=g.x+a.x*m,c[h].y=g.y+a.y*u;return c},n.chamfer=function(c,m,u,g,f){typeof m=="number"?m=[m]:m=m||[8],u=typeof u!="undefined"?u:-1,g=g||2,f=f||14;for(var a=[],h=0;h<c.length;h++){var d=c[h-1>=0?h-1:c.length-1],v=c[h],S=c[(h+1)%c.length],I=m[h<m.length?h:m.length-1];if(I===0){a.push(v);continue}var R=r.normalise({x:v.y-d.y,y:d.x-v.x}),y=r.normalise({x:S.y-v.y,y:v.x-S.x}),C=Math.sqrt(2*Math.pow(I,2)),E=r.mult(l.clone(R),I),x=r.normalise(r.mult(r.add(R,y),.5)),M=r.sub(v,r.mult(x,C)),T=u;u===-1&&(T=Math.pow(I,.32)*1.75),T=l.clamp(T,g,f),T%2===1&&(T+=1);for(var A=Math.acos(r.dot(R,y)),P=A/T,O=0;O<T;O++)a.push(r.add(r.rotate(E,P*O),M))}return a},n.clockwiseSort=function(c){var m=n.mean(c);return c.sort(function(u,g){return r.angle(m,u)-r.angle(m,g)}),c},n.isConvex=function(c){var m=0,u=c.length,g,f,a,h;if(u<3)return null;for(g=0;g<u;g++)if(f=(g+1)%u,a=(g+2)%u,h=(c[f].x-c[g].x)*(c[a].y-c[f].y),h-=(c[f].y-c[g].y)*(c[a].x-c[f].x),h<0?m|=1:h>0&&(m|=2),m===3)return!1;return m!==0?!0:null},n.hull=function(c){var m=[],u=[],g,f;for(c=c.slice(0),c.sort(function(a,h){var d=a.x-h.x;return d!==0?d:a.y-h.y}),f=0;f<c.length;f+=1){for(g=c[f];u.length>=2&&r.cross3(u[u.length-2],u[u.length-1],g)<=0;)u.pop();u.push(g)}for(f=c.length-1;f>=0;f-=1){for(g=c[f];m.length>=2&&r.cross3(m[m.length-2],m[m.length-1],g)<=0;)m.pop();m.push(g)}return m.pop(),u.pop(),m.concat(u)}})()},function(s,o,i){var n={};s.exports=n;var r=i(0);(function(){n.on=function(l,c,m){for(var u=c.split(" "),g,f=0;f<u.length;f++)g=u[f],l.events=l.events||{},l.events[g]=l.events[g]||[],l.events[g].push(m);return m},n.off=function(l,c,m){if(!c){l.events={};return}typeof c=="function"&&(m=c,c=r.keys(l.events).join(" "));for(var u=c.split(" "),g=0;g<u.length;g++){var f=l.events[u[g]],a=[];if(m&&f)for(var h=0;h<f.length;h++)f[h]!==m&&a.push(f[h]);l.events[u[g]]=a}},n.trigger=function(l,c,m){var u,g,f,a,h=l.events;if(h&&r.keys(h).length>0){m||(m={}),u=c.split(" ");for(var d=0;d<u.length;d++)if(g=u[d],f=h[g],f){a=r.clone(m,!1),a.name=g,a.source=l;for(var v=0;v<f.length;v++)f[v].apply(l,[a])}}}})()},function(s,o,i){var n={};s.exports=n;var r=i(4),l=i(0),c=i(1),m=i(6);(function(){n.create=function(u){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},u)},n.setModified=function(u,g,f,a){if(u.isModified=g,g&&u.cache&&(u.cache.allBodies=null,u.cache.allConstraints=null,u.cache.allComposites=null),f&&u.parent&&n.setModified(u.parent,g,f,a),a)for(var h=0;h<u.composites.length;h++){var d=u.composites[h];n.setModified(d,g,f,a)}},n.add=function(u,g){var f=[].concat(g);r.trigger(u,"beforeAdd",{object:g});for(var a=0;a<f.length;a++){var h=f[a];switch(h.type){case"body":if(h.parent!==h){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(u,h);break;case"constraint":n.addConstraint(u,h);break;case"composite":n.addComposite(u,h);break;case"mouseConstraint":n.addConstraint(u,h.constraint);break}}return r.trigger(u,"afterAdd",{object:g}),u},n.remove=function(u,g,f){var a=[].concat(g);r.trigger(u,"beforeRemove",{object:g});for(var h=0;h<a.length;h++){var d=a[h];switch(d.type){case"body":n.removeBody(u,d,f);break;case"constraint":n.removeConstraint(u,d,f);break;case"composite":n.removeComposite(u,d,f);break;case"mouseConstraint":n.removeConstraint(u,d.constraint);break}}return r.trigger(u,"afterRemove",{object:g}),u},n.addComposite=function(u,g){return u.composites.push(g),g.parent=u,n.setModified(u,!0,!0,!1),u},n.removeComposite=function(u,g,f){var a=l.indexOf(u.composites,g);if(a!==-1&&n.removeCompositeAt(u,a),f)for(var h=0;h<u.composites.length;h++)n.removeComposite(u.composites[h],g,!0);return u},n.removeCompositeAt=function(u,g){return u.composites.splice(g,1),n.setModified(u,!0,!0,!1),u},n.addBody=function(u,g){return u.bodies.push(g),n.setModified(u,!0,!0,!1),u},n.removeBody=function(u,g,f){var a=l.indexOf(u.bodies,g);if(a!==-1&&n.removeBodyAt(u,a),f)for(var h=0;h<u.composites.length;h++)n.removeBody(u.composites[h],g,!0);return u},n.removeBodyAt=function(u,g){return u.bodies.splice(g,1),n.setModified(u,!0,!0,!1),u},n.addConstraint=function(u,g){return u.constraints.push(g),n.setModified(u,!0,!0,!1),u},n.removeConstraint=function(u,g,f){var a=l.indexOf(u.constraints,g);if(a!==-1&&n.removeConstraintAt(u,a),f)for(var h=0;h<u.composites.length;h++)n.removeConstraint(u.composites[h],g,!0);return u},n.removeConstraintAt=function(u,g){return u.constraints.splice(g,1),n.setModified(u,!0,!0,!1),u},n.clear=function(u,g,f){if(f)for(var a=0;a<u.composites.length;a++)n.clear(u.composites[a],g,!0);return g?u.bodies=u.bodies.filter(function(h){return h.isStatic}):u.bodies.length=0,u.constraints.length=0,u.composites.length=0,n.setModified(u,!0,!0,!1),u},n.allBodies=function(u){if(u.cache&&u.cache.allBodies)return u.cache.allBodies;for(var g=[].concat(u.bodies),f=0;f<u.composites.length;f++)g=g.concat(n.allBodies(u.composites[f]));return u.cache&&(u.cache.allBodies=g),g},n.allConstraints=function(u){if(u.cache&&u.cache.allConstraints)return u.cache.allConstraints;for(var g=[].concat(u.constraints),f=0;f<u.composites.length;f++)g=g.concat(n.allConstraints(u.composites[f]));return u.cache&&(u.cache.allConstraints=g),g},n.allComposites=function(u){if(u.cache&&u.cache.allComposites)return u.cache.allComposites;for(var g=[].concat(u.composites),f=0;f<u.composites.length;f++)g=g.concat(n.allComposites(u.composites[f]));return u.cache&&(u.cache.allComposites=g),g},n.get=function(u,g,f){var a,h;switch(f){case"body":a=n.allBodies(u);break;case"constraint":a=n.allConstraints(u);break;case"composite":a=n.allComposites(u).concat(u);break}return a?(h=a.filter(function(d){return d.id.toString()===g.toString()}),h.length===0?null:h[0]):null},n.move=function(u,g,f){return n.remove(u,g),n.add(f,g),u},n.rebase=function(u){for(var g=n.allBodies(u).concat(n.allConstraints(u)).concat(n.allComposites(u)),f=0;f<g.length;f++)g[f].id=l.nextId();return u},n.translate=function(u,g,f){for(var a=f?n.allBodies(u):u.bodies,h=0;h<a.length;h++)m.translate(a[h],g);return u},n.rotate=function(u,g,f,a){for(var h=Math.cos(g),d=Math.sin(g),v=a?n.allBodies(u):u.bodies,S=0;S<v.length;S++){var I=v[S],R=I.position.x-f.x,y=I.position.y-f.y;m.setPosition(I,{x:f.x+(R*h-y*d),y:f.y+(R*d+y*h)}),m.rotate(I,g)}return u},n.scale=function(u,g,f,a,h){for(var d=h?n.allBodies(u):u.bodies,v=0;v<d.length;v++){var S=d[v],I=S.position.x-a.x,R=S.position.y-a.y;m.setPosition(S,{x:a.x+I*g,y:a.y+R*f}),m.scale(S,g,f)}return u},n.bounds=function(u){for(var g=n.allBodies(u),f=[],a=0;a<g.length;a+=1){var h=g[a];f.push(h.bounds.min,h.bounds.max)}return c.create(f)}})()},function(s,o,i){var n={};s.exports=n;var r=i(3),l=i(2),c=i(7);i(16);var m=i(0),u=i(1),g=i(11);(function(){n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n.create=function(a){var h={id:m.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},d=m.extend(h,a);return f(d,a),d},n.nextGroup=function(a){return a?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var f=function(a,h){h=h||{},n.set(a,{bounds:a.bounds||u.create(a.vertices),positionPrev:a.positionPrev||l.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a}),r.rotate(a.vertices,a.angle,a.position),g.rotate(a.axes,a.angle),u.update(a.bounds,a.vertices,a.velocity),n.set(a,{axes:h.axes||a.axes,area:h.area||a.area,mass:h.mass||a.mass,inertia:h.inertia||a.inertia});var d=a.isStatic?"#14151f":m.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=a.isStatic?"#555":"#ccc",S=a.isStatic&&a.render.fillStyle===null?1:0;a.render.fillStyle=a.render.fillStyle||d,a.render.strokeStyle=a.render.strokeStyle||v,a.render.lineWidth=a.render.lineWidth||S,a.render.sprite.xOffset+=-(a.bounds.min.x-a.position.x)/(a.bounds.max.x-a.bounds.min.x),a.render.sprite.yOffset+=-(a.bounds.min.y-a.position.y)/(a.bounds.max.y-a.bounds.min.y)};n.set=function(a,h,d){var v;typeof h=="string"&&(v=h,h={},h[v]=d);for(v in h)if(!!Object.prototype.hasOwnProperty.call(h,v))switch(d=h[v],v){case"isStatic":n.setStatic(a,d);break;case"isSleeping":c.set(a,d);break;case"mass":n.setMass(a,d);break;case"density":n.setDensity(a,d);break;case"inertia":n.setInertia(a,d);break;case"vertices":n.setVertices(a,d);break;case"position":n.setPosition(a,d);break;case"angle":n.setAngle(a,d);break;case"velocity":n.setVelocity(a,d);break;case"angularVelocity":n.setAngularVelocity(a,d);break;case"parts":n.setParts(a,d);break;case"centre":n.setCentre(a,d);break;default:a[v]=d}},n.setStatic=function(a,h){for(var d=0;d<a.parts.length;d++){var v=a.parts[d];v.isStatic=h,h?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},n.setMass=function(a,h){var d=a.inertia/(a.mass/6);a.inertia=d*(h/6),a.inverseInertia=1/a.inertia,a.mass=h,a.inverseMass=1/a.mass,a.density=a.mass/a.area},n.setDensity=function(a,h){n.setMass(a,h*a.area),a.density=h},n.setInertia=function(a,h){a.inertia=h,a.inverseInertia=1/a.inertia},n.setVertices=function(a,h){h[0].body===a?a.vertices=h:a.vertices=r.create(h,a),a.axes=g.fromVertices(a.vertices),a.area=r.area(a.vertices),n.setMass(a,a.density*a.area);var d=r.centre(a.vertices);r.translate(a.vertices,d,-1),n.setInertia(a,n._inertiaScale*r.inertia(a.vertices,a.mass)),r.translate(a.vertices,a.position),u.update(a.bounds,a.vertices,a.velocity)},n.setParts=function(a,h,d){var v;for(h=h.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,v=0;v<h.length;v++){var S=h[v];S!==a&&(S.parent=a,a.parts.push(S))}if(a.parts.length!==1){if(d=typeof d!="undefined"?d:!0,d){var I=[];for(v=0;v<h.length;v++)I=I.concat(h[v].vertices);r.clockwiseSort(I);var R=r.hull(I),y=r.centre(R);n.setVertices(a,R),r.translate(a.vertices,y)}var C=n._totalProperties(a);a.area=C.area,a.parent=a,a.position.x=C.centre.x,a.position.y=C.centre.y,a.positionPrev.x=C.centre.x,a.positionPrev.y=C.centre.y,n.setMass(a,C.mass),n.setInertia(a,C.inertia),n.setPosition(a,C.centre)}},n.setCentre=function(a,h,d){d?(a.positionPrev.x+=h.x,a.positionPrev.y+=h.y,a.position.x+=h.x,a.position.y+=h.y):(a.positionPrev.x=h.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=h.y-(a.position.y-a.positionPrev.y),a.position.x=h.x,a.position.y=h.y)},n.setPosition=function(a,h){var d=l.sub(h,a.position);a.positionPrev.x+=d.x,a.positionPrev.y+=d.y;for(var v=0;v<a.parts.length;v++){var S=a.parts[v];S.position.x+=d.x,S.position.y+=d.y,r.translate(S.vertices,d),u.update(S.bounds,S.vertices,a.velocity)}},n.setAngle=function(a,h){var d=h-a.angle;a.anglePrev+=d;for(var v=0;v<a.parts.length;v++){var S=a.parts[v];S.angle+=d,r.rotate(S.vertices,d,a.position),g.rotate(S.axes,d),u.update(S.bounds,S.vertices,a.velocity),v>0&&l.rotateAbout(S.position,d,a.position,S.position)}},n.setVelocity=function(a,h){a.positionPrev.x=a.position.x-h.x,a.positionPrev.y=a.position.y-h.y,a.velocity.x=h.x,a.velocity.y=h.y,a.speed=l.magnitude(a.velocity)},n.setAngularVelocity=function(a,h){a.anglePrev=a.angle-h,a.angularVelocity=h,a.angularSpeed=Math.abs(a.angularVelocity)},n.translate=function(a,h){n.setPosition(a,l.add(a.position,h))},n.rotate=function(a,h,d){if(!d)n.setAngle(a,a.angle+h);else{var v=Math.cos(h),S=Math.sin(h),I=a.position.x-d.x,R=a.position.y-d.y;n.setPosition(a,{x:d.x+(I*v-R*S),y:d.y+(I*S+R*v)}),n.setAngle(a,a.angle+h)}},n.scale=function(a,h,d,v){var S=0,I=0;v=v||a.position;for(var R=0;R<a.parts.length;R++){var y=a.parts[R];r.scale(y.vertices,h,d,v),y.axes=g.fromVertices(y.vertices),y.area=r.area(y.vertices),n.setMass(y,a.density*y.area),r.translate(y.vertices,{x:-y.position.x,y:-y.position.y}),n.setInertia(y,n._inertiaScale*r.inertia(y.vertices,y.mass)),r.translate(y.vertices,{x:y.position.x,y:y.position.y}),R>0&&(S+=y.area,I+=y.inertia),y.position.x=v.x+(y.position.x-v.x)*h,y.position.y=v.y+(y.position.y-v.y)*d,u.update(y.bounds,y.vertices,a.velocity)}a.parts.length>1&&(a.area=S,a.isStatic||(n.setMass(a,a.density*S),n.setInertia(a,I))),a.circleRadius&&(h===d?a.circleRadius*=h:a.circleRadius=null)},n.update=function(a,h,d,v){var S=Math.pow(h*d*a.timeScale,2),I=1-a.frictionAir*d*a.timeScale,R=a.position.x-a.positionPrev.x,y=a.position.y-a.positionPrev.y;a.velocity.x=R*I*v+a.force.x/a.mass*S,a.velocity.y=y*I*v+a.force.y/a.mass*S,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.angularVelocity=(a.angle-a.anglePrev)*I*v+a.torque/a.inertia*S,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=l.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var C=0;C<a.parts.length;C++){var E=a.parts[C];r.translate(E.vertices,a.velocity),C>0&&(E.position.x+=a.velocity.x,E.position.y+=a.velocity.y),a.angularVelocity!==0&&(r.rotate(E.vertices,a.angularVelocity,a.position),g.rotate(E.axes,a.angularVelocity),C>0&&l.rotateAbout(E.position,a.angularVelocity,a.position,E.position)),u.update(E.bounds,E.vertices,a.velocity)}},n.applyForce=function(a,h,d){a.force.x+=d.x,a.force.y+=d.y;var v={x:h.x-a.position.x,y:h.y-a.position.y};a.torque+=v.x*d.y-v.y*d.x},n._totalProperties=function(a){for(var h={mass:0,area:0,inertia:0,centre:{x:0,y:0}},d=a.parts.length===1?0:1;d<a.parts.length;d++){var v=a.parts[d],S=v.mass!==1/0?v.mass:1;h.mass+=S,h.area+=v.area,h.inertia+=v.inertia,h.centre=l.add(h.centre,l.mult(v.position,S))}return h.centre=l.div(h.centre,h.mass),h}})()},function(s,o,i){var n={};s.exports=n;var r=i(4);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(l,c){for(var m=c*c*c,u=0;u<l.length;u++){var g=l[u],f=g.speed*g.speed+g.angularSpeed*g.angularSpeed;if(g.force.x!==0||g.force.y!==0){n.set(g,!1);continue}var a=Math.min(g.motion,f),h=Math.max(g.motion,f);g.motion=n._minBias*a+(1-n._minBias)*h,g.sleepThreshold>0&&g.motion<n._motionSleepThreshold*m?(g.sleepCounter+=1,g.sleepCounter>=g.sleepThreshold&&n.set(g,!0)):g.sleepCounter>0&&(g.sleepCounter-=1)}},n.afterCollisions=function(l,c){for(var m=c*c*c,u=0;u<l.length;u++){var g=l[u];if(!!g.isActive){var f=g.collision,a=f.bodyA.parent,h=f.bodyB.parent;if(!(a.isSleeping&&h.isSleeping||a.isStatic||h.isStatic)&&(a.isSleeping||h.isSleeping)){var d=a.isSleeping&&!a.isStatic?a:h,v=d===a?h:a;!d.isStatic&&v.motion>n._motionWakeThreshold*m&&n.set(d,!1)}}}},n.set=function(l,c){var m=l.isSleeping;c?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,m||r.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,m&&r.trigger(l,"sleepEnd"))}})()},function(s,o,i){var n={};s.exports=n;var r=i(3),l=i(9);(function(){var c=[],m={overlap:0,axis:null},u={overlap:0,axis:null};n.create=function(g,f){return{pair:null,collided:!1,bodyA:g,bodyB:f,parentA:g.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},n.collides=function(g,f,a){if(n._overlapAxes(m,g.vertices,f.vertices,g.axes),m.overlap<=0||(n._overlapAxes(u,f.vertices,g.vertices,f.axes),u.overlap<=0))return null;var h=a&&a.table[l.id(g,f)],d;h?d=h.collision:(d=n.create(g,f),d.collided=!0,d.bodyA=g.id<f.id?g:f,d.bodyB=g.id<f.id?f:g,d.parentA=d.bodyA.parent,d.parentB=d.bodyB.parent),g=d.bodyA,f=d.bodyB;var v;m.overlap<u.overlap?v=m:v=u;var S=d.normal,I=d.supports,R=v.axis,y=R.x,C=R.y;y*(f.position.x-g.position.x)+C*(f.position.y-g.position.y)<0?(S.x=y,S.y=C):(S.x=-y,S.y=-C),d.tangent.x=-S.y,d.tangent.y=S.x,d.depth=v.overlap,d.penetration.x=S.x*d.depth,d.penetration.y=S.y*d.depth;var E=n._findSupports(g,f,S,1),x=0;if(r.contains(g.vertices,E[0])&&(I[x++]=E[0]),r.contains(g.vertices,E[1])&&(I[x++]=E[1]),x<2){var M=n._findSupports(f,g,S,-1);r.contains(f.vertices,M[0])&&(I[x++]=M[0]),x<2&&r.contains(f.vertices,M[1])&&(I[x++]=M[1])}return x===0&&(I[x++]=E[0]),I.length=x,d},n._overlapAxes=function(g,f,a,h){var d=f.length,v=a.length,S=f[0].x,I=f[0].y,R=a[0].x,y=a[0].y,C=h.length,E=Number.MAX_VALUE,x=0,M,T,A,P,O,L;for(O=0;O<C;O++){var H=h[O],K=H.x,j=H.y,U=S*K+I*j,Y=R*K+y*j,J=U,ee=Y;for(L=1;L<d;L+=1)P=f[L].x*K+f[L].y*j,P>J?J=P:P<U&&(U=P);for(L=1;L<v;L+=1)P=a[L].x*K+a[L].y*j,P>ee?ee=P:P<Y&&(Y=P);if(T=J-Y,A=ee-U,M=T<A?T:A,M<E&&(E=M,x=O,M<=0))break}g.axis=h[x],g.overlap=E},n._projectToAxis=function(g,f,a){for(var h=f[0].x*a.x+f[0].y*a.y,d=h,v=1;v<f.length;v+=1){var S=f[v].x*a.x+f[v].y*a.y;S>d?d=S:S<h&&(h=S)}g.min=h,g.max=d},n._findSupports=function(g,f,a,h){var d=f.vertices,v=d.length,S=g.position.x,I=g.position.y,R=a.x*h,y=a.y*h,C=Number.MAX_VALUE,E,x,M,T,A;for(A=0;A<v;A+=1)x=d[A],T=R*(S-x.x)+y*(I-x.y),T<C&&(C=T,E=x);return M=d[(v+E.index-1)%v],C=R*(S-M.x)+y*(I-M.y),x=d[(E.index+1)%v],R*(S-x.x)+y*(I-x.y)<C?(c[0]=E,c[1]=x,c):(c[0]=E,c[1]=M,c)}})()},function(s,o,i){var n={};s.exports=n;var r=i(17);(function(){n.create=function(l,c){var m=l.bodyA,u=l.bodyB,g={id:n.id(m,u),bodyA:m,bodyB:u,collision:l,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:m.isSensor||u.isSensor,timeCreated:c,timeUpdated:c,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(g,l,c),g},n.update=function(l,c,m){var u=l.contacts,g=c.supports,f=l.activeContacts,a=c.parentA,h=c.parentB,d=a.vertices.length;l.isActive=!0,l.timeUpdated=m,l.collision=c,l.separation=c.depth,l.inverseMass=a.inverseMass+h.inverseMass,l.friction=a.friction<h.friction?a.friction:h.friction,l.frictionStatic=a.frictionStatic>h.frictionStatic?a.frictionStatic:h.frictionStatic,l.restitution=a.restitution>h.restitution?a.restitution:h.restitution,l.slop=a.slop>h.slop?a.slop:h.slop,c.pair=l,f.length=0;for(var v=0;v<g.length;v++){var S=g[v],I=S.body===a?S.index:d+S.index,R=u[I];R?f.push(R):f.push(u[I]=r.create(S))}},n.setActive=function(l,c,m){c?(l.isActive=!0,l.timeUpdated=m):(l.isActive=!1,l.activeContacts.length=0)},n.id=function(l,c){return l.id<c.id?"A"+l.id+"B"+c.id:"A"+c.id+"B"+l.id}})()},function(s,o,i){var n={};s.exports=n;var r=i(3),l=i(2),c=i(7),m=i(1),u=i(11),g=i(0);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(f){var a=f;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var h=a.bodyA?l.add(a.bodyA.position,a.pointA):a.pointA,d=a.bodyB?l.add(a.bodyB.position,a.pointB):a.pointB,v=l.magnitude(l.sub(h,d));a.length=typeof a.length!="undefined"?a.length:v,a.id=a.id||g.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var S={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return a.length===0&&a.stiffness>.1?(S.type="pin",S.anchors=!1):a.stiffness<.9&&(S.type="spring"),a.render=g.extend(S,a.render),a},n.preSolveAll=function(f){for(var a=0;a<f.length;a+=1){var h=f[a],d=h.constraintImpulse;h.isStatic||d.x===0&&d.y===0&&d.angle===0||(h.position.x+=d.x,h.position.y+=d.y,h.angle+=d.angle)}},n.solveAll=function(f,a){for(var h=0;h<f.length;h+=1){var d=f[h],v=!d.bodyA||d.bodyA&&d.bodyA.isStatic,S=!d.bodyB||d.bodyB&&d.bodyB.isStatic;(v||S)&&n.solve(f[h],a)}for(h=0;h<f.length;h+=1)d=f[h],v=!d.bodyA||d.bodyA&&d.bodyA.isStatic,S=!d.bodyB||d.bodyB&&d.bodyB.isStatic,!v&&!S&&n.solve(f[h],a)},n.solve=function(f,a){var h=f.bodyA,d=f.bodyB,v=f.pointA,S=f.pointB;if(!(!h&&!d)){h&&!h.isStatic&&(l.rotate(v,h.angle-f.angleA,v),f.angleA=h.angle),d&&!d.isStatic&&(l.rotate(S,d.angle-f.angleB,S),f.angleB=d.angle);var I=v,R=S;if(h&&(I=l.add(h.position,v)),d&&(R=l.add(d.position,S)),!(!I||!R)){var y=l.sub(I,R),C=l.magnitude(y);C<n._minLength&&(C=n._minLength);var E=(C-f.length)/C,x=f.stiffness<1?f.stiffness*a:f.stiffness,M=l.mult(y,E*x),T=(h?h.inverseMass:0)+(d?d.inverseMass:0),A=(h?h.inverseInertia:0)+(d?d.inverseInertia:0),P=T+A,O,L,H,K,j;if(f.damping){var U=l.create();H=l.div(y,C),j=l.sub(d&&l.sub(d.position,d.positionPrev)||U,h&&l.sub(h.position,h.positionPrev)||U),K=l.dot(H,j)}h&&!h.isStatic&&(L=h.inverseMass/T,h.constraintImpulse.x-=M.x*L,h.constraintImpulse.y-=M.y*L,h.position.x-=M.x*L,h.position.y-=M.y*L,f.damping&&(h.positionPrev.x-=f.damping*H.x*K*L,h.positionPrev.y-=f.damping*H.y*K*L),O=l.cross(v,M)/P*n._torqueDampen*h.inverseInertia*(1-f.angularStiffness),h.constraintImpulse.angle-=O,h.angle-=O),d&&!d.isStatic&&(L=d.inverseMass/T,d.constraintImpulse.x+=M.x*L,d.constraintImpulse.y+=M.y*L,d.position.x+=M.x*L,d.position.y+=M.y*L,f.damping&&(d.positionPrev.x+=f.damping*H.x*K*L,d.positionPrev.y+=f.damping*H.y*K*L),O=l.cross(S,M)/P*n._torqueDampen*d.inverseInertia*(1-f.angularStiffness),d.constraintImpulse.angle+=O,d.angle+=O)}}},n.postSolveAll=function(f){for(var a=0;a<f.length;a++){var h=f[a],d=h.constraintImpulse;if(!(h.isStatic||d.x===0&&d.y===0&&d.angle===0)){c.set(h,!1);for(var v=0;v<h.parts.length;v++){var S=h.parts[v];r.translate(S.vertices,d),v>0&&(S.position.x+=d.x,S.position.y+=d.y),d.angle!==0&&(r.rotate(S.vertices,d.angle,h.position),u.rotate(S.axes,d.angle),v>0&&l.rotateAbout(S.position,d.angle,h.position,S.position)),m.update(S.bounds,S.vertices,h.velocity)}d.angle*=n._warming,d.x*=n._warming,d.y*=n._warming}}},n.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+f.pointA.x,y:(f.bodyA?f.bodyA.position.y:0)+f.pointA.y}},n.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+f.pointB.x,y:(f.bodyB?f.bodyB.position.y:0)+f.pointB.y}}})()},function(s,o,i){var n={};s.exports=n;var r=i(2),l=i(0);(function(){n.fromVertices=function(c){for(var m={},u=0;u<c.length;u++){var g=(u+1)%c.length,f=r.normalise({x:c[g].y-c[u].y,y:c[u].x-c[g].x}),a=f.y===0?1/0:f.x/f.y;a=a.toFixed(3).toString(),m[a]=f}return l.values(m)},n.rotate=function(c,m){if(m!==0)for(var u=Math.cos(m),g=Math.sin(m),f=0;f<c.length;f++){var a=c[f],h;h=a.x*u-a.y*g,a.y=a.x*g+a.y*u,a.x=h}}})()},function(s,o,i){var n={};s.exports=n;var r=i(3),l=i(0),c=i(6),m=i(1),u=i(2);(function(){n.rectangle=function(g,f,a,h,d){d=d||{};var v={label:"Rectangle Body",position:{x:g,y:f},vertices:r.fromPath("L 0 0 L "+a+" 0 L "+a+" "+h+" L 0 "+h)};if(d.chamfer){var S=d.chamfer;v.vertices=r.chamfer(v.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete d.chamfer}return c.create(l.extend({},v,d))},n.trapezoid=function(g,f,a,h,d,v){v=v||{},d*=.5;var S=(1-d*2)*a,I=a*d,R=I+S,y=R+I,C;d<.5?C="L 0 0 L "+I+" "+-h+" L "+R+" "+-h+" L "+y+" 0":C="L 0 0 L "+R+" "+-h+" L "+y+" 0";var E={label:"Trapezoid Body",position:{x:g,y:f},vertices:r.fromPath(C)};if(v.chamfer){var x=v.chamfer;E.vertices=r.chamfer(E.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete v.chamfer}return c.create(l.extend({},E,v))},n.circle=function(g,f,a,h,d){h=h||{};var v={label:"Circle Body",circleRadius:a};d=d||25;var S=Math.ceil(Math.max(10,Math.min(d,a)));return S%2===1&&(S+=1),n.polygon(g,f,S,a,l.extend({},v,h))},n.polygon=function(g,f,a,h,d){if(d=d||{},a<3)return n.circle(g,f,h,d);for(var v=2*Math.PI/a,S="",I=v*.5,R=0;R<a;R+=1){var y=I+R*v,C=Math.cos(y)*h,E=Math.sin(y)*h;S+="L "+C.toFixed(3)+" "+E.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:g,y:f},vertices:r.fromPath(S)};if(d.chamfer){var M=d.chamfer;x.vertices=r.chamfer(x.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete d.chamfer}return c.create(l.extend({},x,d))},n.fromVertices=function(g,f,a,h,d,v,S,I){var R=l.getDecomp(),y,C,E,x,M,T,A,P,O,L,H;for(y=Boolean(R&&R.quickDecomp),h=h||{},E=[],d=typeof d!="undefined"?d:!1,v=typeof v!="undefined"?v:.01,S=typeof S!="undefined"?S:10,I=typeof I!="undefined"?I:.01,l.isArray(a[0])||(a=[a]),L=0;L<a.length;L+=1)if(T=a[L],x=r.isConvex(T),M=!x,M&&!y&&l.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!y)x?T=r.clockwiseSort(T):T=r.hull(T),E.push({position:{x:g,y:f},vertices:T});else{var K=T.map(function(le){return[le.x,le.y]});R.makeCCW(K),v!==!1&&R.removeCollinearPoints(K,v),I!==!1&&R.removeDuplicatePoints&&R.removeDuplicatePoints(K,I);var j=R.quickDecomp(K);for(A=0;A<j.length;A++){var U=j[A],Y=U.map(function(le){return{x:le[0],y:le[1]}});S>0&&r.area(Y)<S||E.push({position:r.centre(Y),vertices:Y})}}for(A=0;A<E.length;A++)E[A]=c.create(l.extend(E[A],h));if(d){var J=5;for(A=0;A<E.length;A++){var ee=E[A];for(P=A+1;P<E.length;P++){var te=E[P];if(m.overlaps(ee.bounds,te.bounds)){var ie=ee.vertices,X=te.vertices;for(O=0;O<ee.vertices.length;O++)for(H=0;H<te.vertices.length;H++){var ce=u.magnitudeSquared(u.sub(ie[(O+1)%ie.length],X[H])),ae=u.magnitudeSquared(u.sub(ie[O],X[(H+1)%X.length]));ce<J&&ae<J&&(ie[O].isInternal=!0,X[H].isInternal=!0)}}}}}return E.length>1?(C=c.create(l.extend({parts:E.slice(0)},h)),c.setPosition(C,{x:g,y:f}),C):E[0]}})()},function(s,o,i){var n={};s.exports=n;var r=i(0);(function(){n.create=function(l){var c={};return l||r.log("Mouse.create: element was undefined, defaulting to document.body","warn"),c.element=l||document.body,c.absolute={x:0,y:0},c.position={x:0,y:0},c.mousedownPosition={x:0,y:0},c.mouseupPosition={x:0,y:0},c.offset={x:0,y:0},c.scale={x:1,y:1},c.wheelDelta=0,c.button=-1,c.pixelRatio=parseInt(c.element.getAttribute("data-pixel-ratio"),10)||1,c.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},c.mousemove=function(m){var u=n._getRelativeMousePosition(m,c.element,c.pixelRatio),g=m.changedTouches;g&&(c.button=0,m.preventDefault()),c.absolute.x=u.x,c.absolute.y=u.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.sourceEvents.mousemove=m},c.mousedown=function(m){var u=n._getRelativeMousePosition(m,c.element,c.pixelRatio),g=m.changedTouches;g?(c.button=0,m.preventDefault()):c.button=m.button,c.absolute.x=u.x,c.absolute.y=u.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mousedownPosition.x=c.position.x,c.mousedownPosition.y=c.position.y,c.sourceEvents.mousedown=m},c.mouseup=function(m){var u=n._getRelativeMousePosition(m,c.element,c.pixelRatio),g=m.changedTouches;g&&m.preventDefault(),c.button=-1,c.absolute.x=u.x,c.absolute.y=u.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mouseupPosition.x=c.position.x,c.mouseupPosition.y=c.position.y,c.sourceEvents.mouseup=m},c.mousewheel=function(m){c.wheelDelta=Math.max(-1,Math.min(1,m.wheelDelta||-m.detail)),m.preventDefault()},n.setElement(c,c.element),c},n.setElement=function(l,c){l.element=c,c.addEventListener("mousemove",l.mousemove),c.addEventListener("mousedown",l.mousedown),c.addEventListener("mouseup",l.mouseup),c.addEventListener("mousewheel",l.mousewheel),c.addEventListener("DOMMouseScroll",l.mousewheel),c.addEventListener("touchmove",l.mousemove),c.addEventListener("touchstart",l.mousedown),c.addEventListener("touchend",l.mouseup)},n.clearSourceEvents=function(l){l.sourceEvents.mousemove=null,l.sourceEvents.mousedown=null,l.sourceEvents.mouseup=null,l.sourceEvents.mousewheel=null,l.wheelDelta=0},n.setOffset=function(l,c){l.offset.x=c.x,l.offset.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},n.setScale=function(l,c){l.scale.x=c.x,l.scale.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},n._getRelativeMousePosition=function(l,c,m){var u=c.getBoundingClientRect(),g=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:g.scrollLeft,a=window.pageYOffset!==void 0?window.pageYOffset:g.scrollTop,h=l.changedTouches,d,v;return h?(d=h[0].pageX-u.left-f,v=h[0].pageY-u.top-a):(d=l.pageX-u.left-f,v=l.pageY-u.top-a),{x:d/(c.clientWidth/(c.width||c.clientWidth)*m),y:v/(c.clientHeight/(c.height||c.clientHeight)*m)}}})()},function(s,o,i){var n={};s.exports=n;var r=i(0),l=i(8);(function(){n.create=function(c){var m={bodies:[],pairs:null};return r.extend(m,c)},n.setBodies=function(c,m){c.bodies=m.slice(0)},n.clear=function(c){c.bodies=[]},n.collisions=function(c){var m=[],u=c.pairs,g=c.bodies,f=g.length,a=n.canCollide,h=l.collides,d,v;for(g.sort(n._compareBoundsX),d=0;d<f;d++){var S=g[d],I=S.bounds,R=S.bounds.max.x,y=S.bounds.max.y,C=S.bounds.min.y,E=S.isStatic||S.isSleeping,x=S.parts.length,M=x===1;for(v=d+1;v<f;v++){var T=g[v],A=T.bounds;if(A.min.x>R)break;if(!(y<A.min.y||C>A.max.y)&&!(E&&(T.isStatic||T.isSleeping))&&!!a(S.collisionFilter,T.collisionFilter)){var P=T.parts.length;if(M&&P===1){var O=h(S,T,u);O&&m.push(O)}else for(var L=x>1?1:0,H=P>1?1:0,K=L;K<x;K++)for(var j=S.parts[K],I=j.bounds,U=H;U<P;U++){var Y=T.parts[U],A=Y.bounds;if(!(I.min.x>A.max.x||I.max.x<A.min.x||I.max.y<A.min.y||I.min.y>A.max.y)){var O=h(j,Y,u);O&&m.push(O)}}}}}return m},n.canCollide=function(c,m){return c.group===m.group&&c.group!==0?c.group>0:(c.mask&m.category)!==0&&(m.mask&c.category)!==0},n._compareBoundsX=function(c,m){return c.bounds.min.x-m.bounds.min.x}})()},function(s,o,i){var n={};s.exports=n;var r=i(0);(function(){n._registry={},n.register=function(l){if(n.isPlugin(l)||r.warn("Plugin.register:",n.toString(l),"does not implement all required fields."),l.name in n._registry){var c=n._registry[l.name],m=n.versionParse(l.version).number,u=n.versionParse(c.version).number;m>u?(r.warn("Plugin.register:",n.toString(c),"was upgraded to",n.toString(l)),n._registry[l.name]=l):m<u?r.warn("Plugin.register:",n.toString(c),"can not be downgraded to",n.toString(l)):l!==c&&r.warn("Plugin.register:",n.toString(l),"is already registered to different plugin object")}else n._registry[l.name]=l;return l},n.resolve=function(l){return n._registry[n.dependencyParse(l).name]},n.toString=function(l){return typeof l=="string"?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},n.isPlugin=function(l){return l&&l.name&&l.version&&l.install},n.isUsed=function(l,c){return l.used.indexOf(c)>-1},n.isFor=function(l,c){var m=l.for&&n.dependencyParse(l.for);return!l.for||c.name===m.name&&n.versionSatisfies(c.version,m.range)},n.use=function(l,c){if(l.uses=(l.uses||[]).concat(c||[]),l.uses.length===0){r.warn("Plugin.use:",n.toString(l),"does not specify any dependencies to install.");return}for(var m=n.dependencies(l),u=r.topologicalSort(m),g=[],f=0;f<u.length;f+=1)if(u[f]!==l.name){var a=n.resolve(u[f]);if(!a){g.push("\u274C "+u[f]);continue}n.isUsed(l,a.name)||(n.isFor(a,l)||(r.warn("Plugin.use:",n.toString(a),"is for",a.for,"but installed on",n.toString(l)+"."),a._warned=!0),a.install?a.install(l):(r.warn("Plugin.use:",n.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(g.push("\u{1F536} "+n.toString(a)),delete a._warned):g.push("\u2705 "+n.toString(a)),l.used.push(a.name))}g.length>0&&r.info(g.join("  "))},n.dependencies=function(l,c){var m=n.dependencyParse(l),u=m.name;if(c=c||{},!(u in c)){l=n.resolve(l)||l,c[u]=r.map(l.uses||[],function(f){n.isPlugin(f)&&n.register(f);var a=n.dependencyParse(f),h=n.resolve(f);return h&&!n.versionSatisfies(h.version,a.range)?(r.warn("Plugin.dependencies:",n.toString(h),"does not satisfy",n.toString(a),"used by",n.toString(m)+"."),h._warned=!0,l._warned=!0):h||(r.warn("Plugin.dependencies:",n.toString(f),"used by",n.toString(m),"could not be resolved."),l._warned=!0),a.name});for(var g=0;g<c[u].length;g+=1)n.dependencies(c[u][g],c);return c}},n.dependencyParse=function(l){if(r.isString(l)){var c=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return c.test(l)||r.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}}return{name:l.name,range:l.range||l.version}},n.versionParse=function(l){var c=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;c.test(l)||r.warn("Plugin.versionParse:",l,"is not a valid version or range.");var m=c.exec(l),u=Number(m[4]),g=Number(m[5]),f=Number(m[6]);return{isRange:Boolean(m[1]||m[2]),version:m[3],range:l,operator:m[1]||m[2]||"",major:u,minor:g,patch:f,parts:[u,g,f],prerelease:m[7],number:u*1e8+g*1e4+f}},n.versionSatisfies=function(l,c){c=c||"*";var m=n.versionParse(c),u=n.versionParse(l);if(m.isRange){if(m.operator==="*"||l==="*")return!0;if(m.operator===">")return u.number>m.number;if(m.operator===">=")return u.number>=m.number;if(m.operator==="~")return u.major===m.major&&u.minor===m.minor&&u.patch>=m.patch;if(m.operator==="^")return m.major>0?u.major===m.major&&u.number>=m.number:m.minor>0?u.minor===m.minor&&u.patch>=m.patch:u.patch===m.patch}return l===c||l==="*"}})()},function(s,o,i){var n={};s.exports=n;var r=i(0),l=i(5),c=i(1),m=i(4),u=i(2),g=i(13);(function(){var f,a;typeof window!="undefined"&&(f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(y){window.setTimeout(function(){y(r.now())},1e3/60)},a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),n._goodFps=30,n._goodDelta=1e3/60,n.create=function(y){var C={controller:n,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!y.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},E=r.extend(C,y);return E.canvas&&(E.canvas.width=E.options.width||E.canvas.width,E.canvas.height=E.options.height||E.canvas.height),E.mouse=y.mouse,E.engine=y.engine,E.canvas=E.canvas||v(E.options.width,E.options.height),E.context=E.canvas.getContext("2d"),E.textures={},E.bounds=E.bounds||{min:{x:0,y:0},max:{x:E.canvas.width,y:E.canvas.height}},E.options.showBroadphase=!1,E.options.pixelRatio!==1&&n.setPixelRatio(E,E.options.pixelRatio),r.isElement(E.element)?E.element.appendChild(E.canvas):E.canvas.parentNode||r.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),E},n.run=function(y){(function C(E){y.frameRequestId=f(C),h(y,E),n.world(y,E),(y.options.showStats||y.options.showDebug)&&n.stats(y,y.context,E),(y.options.showPerformance||y.options.showDebug)&&n.performance(y,y.context,E)})()},n.stop=function(y){a(y.frameRequestId)},n.setPixelRatio=function(y,C){var E=y.options,x=y.canvas;C==="auto"&&(C=S(x)),E.pixelRatio=C,x.setAttribute("data-pixel-ratio",C),x.width=E.width*C,x.height=E.height*C,x.style.width=E.width+"px",x.style.height=E.height+"px"},n.lookAt=function(y,C,E,x){x=typeof x!="undefined"?x:!0,C=r.isArray(C)?C:[C],E=E||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},T=0;T<C.length;T+=1){var A=C[T],P=A.bounds?A.bounds.min:A.min||A.position||A,O=A.bounds?A.bounds.max:A.max||A.position||A;P&&O&&(P.x<M.min.x&&(M.min.x=P.x),O.x>M.max.x&&(M.max.x=O.x),P.y<M.min.y&&(M.min.y=P.y),O.y>M.max.y&&(M.max.y=O.y))}var L=M.max.x-M.min.x+2*E.x,H=M.max.y-M.min.y+2*E.y,K=y.canvas.height,j=y.canvas.width,U=j/K,Y=L/H,J=1,ee=1;Y>U?ee=Y/U:J=U/Y,y.options.hasBounds=!0,y.bounds.min.x=M.min.x,y.bounds.max.x=M.min.x+L*J,y.bounds.min.y=M.min.y,y.bounds.max.y=M.min.y+H*ee,x&&(y.bounds.min.x+=L*.5-L*J*.5,y.bounds.max.x+=L*.5-L*J*.5,y.bounds.min.y+=H*.5-H*ee*.5,y.bounds.max.y+=H*.5-H*ee*.5),y.bounds.min.x-=E.x,y.bounds.max.x-=E.x,y.bounds.min.y-=E.y,y.bounds.max.y-=E.y,y.mouse&&(g.setScale(y.mouse,{x:(y.bounds.max.x-y.bounds.min.x)/y.canvas.width,y:(y.bounds.max.y-y.bounds.min.y)/y.canvas.height}),g.setOffset(y.mouse,y.bounds.min))},n.startViewTransform=function(y){var C=y.bounds.max.x-y.bounds.min.x,E=y.bounds.max.y-y.bounds.min.y,x=C/y.options.width,M=E/y.options.height;y.context.setTransform(y.options.pixelRatio/x,0,0,y.options.pixelRatio/M,0,0),y.context.translate(-y.bounds.min.x,-y.bounds.min.y)},n.endViewTransform=function(y){y.context.setTransform(y.options.pixelRatio,0,0,y.options.pixelRatio,0,0)},n.world=function(y,C){var E=r.now(),x=y.engine,M=x.world,T=y.canvas,A=y.context,P=y.options,O=y.timing,L=l.allBodies(M),H=l.allConstraints(M),K=P.wireframes?P.wireframeBackground:P.background,j=[],U=[],Y,J={timestamp:x.timing.timestamp};if(m.trigger(y,"beforeRender",J),y.currentBackground!==K&&R(y,K),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,T.width,T.height),A.globalCompositeOperation="source-over",P.hasBounds){for(Y=0;Y<L.length;Y++){var ee=L[Y];c.overlaps(ee.bounds,y.bounds)&&j.push(ee)}for(Y=0;Y<H.length;Y++){var te=H[Y],ie=te.bodyA,X=te.bodyB,ce=te.pointA,ae=te.pointB;ie&&(ce=u.add(ie.position,te.pointA)),X&&(ae=u.add(X.position,te.pointB)),!(!ce||!ae)&&(c.contains(y.bounds,ce)||c.contains(y.bounds,ae))&&U.push(te)}n.startViewTransform(y),y.mouse&&(g.setScale(y.mouse,{x:(y.bounds.max.x-y.bounds.min.x)/y.options.width,y:(y.bounds.max.y-y.bounds.min.y)/y.options.height}),g.setOffset(y.mouse,y.bounds.min))}else U=H,j=L,y.options.pixelRatio!==1&&y.context.setTransform(y.options.pixelRatio,0,0,y.options.pixelRatio,0,0);!P.wireframes||x.enableSleeping&&P.showSleeping?n.bodies(y,j,A):(P.showConvexHulls&&n.bodyConvexHulls(y,j,A),n.bodyWireframes(y,j,A)),P.showBounds&&n.bodyBounds(y,j,A),(P.showAxes||P.showAngleIndicator)&&n.bodyAxes(y,j,A),P.showPositions&&n.bodyPositions(y,j,A),P.showVelocity&&n.bodyVelocity(y,j,A),P.showIds&&n.bodyIds(y,j,A),P.showSeparations&&n.separations(y,x.pairs.list,A),P.showCollisions&&n.collisions(y,x.pairs.list,A),P.showVertexNumbers&&n.vertexNumbers(y,j,A),P.showMousePosition&&n.mousePosition(y,y.mouse,A),n.constraints(U,A),P.hasBounds&&n.endViewTransform(y),m.trigger(y,"afterRender",J),O.lastElapsed=r.now()-E},n.stats=function(y,C,E){for(var x=y.engine,M=x.world,T=l.allBodies(M),A=0,P=55,O=44,L=0,H=0,K=0;K<T.length;K+=1)A+=T[K].parts.length;var j={Part:A,Body:T.length,Cons:l.allConstraints(M).length,Comp:l.allComposites(M).length,Pair:x.pairs.list.length};C.fillStyle="#0e0f19",C.fillRect(L,H,P*5.5,O),C.font="12px Arial",C.textBaseline="top",C.textAlign="right";for(var U in j){var Y=j[U];C.fillStyle="#aaa",C.fillText(U,L+P,H+8),C.fillStyle="#eee",C.fillText(Y,L+P,H+26),L+=P}},n.performance=function(y,C){var E=y.engine,x=y.timing,M=x.deltaHistory,T=x.elapsedHistory,A=x.timestampElapsedHistory,P=x.engineDeltaHistory,O=x.engineElapsedHistory,L=E.timing.lastDelta,H=d(M),K=d(T),j=d(P),U=d(O),Y=d(A),J=Y/H||0,ee=1e3/H||0,te=4,ie=12,X=60,ce=34,ae=10,le=69;C.fillStyle="#0e0f19",C.fillRect(0,50,ie*4+X*5+22,ce),n.status(C,ae,le,X,te,M.length,Math.round(ee)+" fps",ee/n._goodFps,function(re){return M[re]/H-1}),n.status(C,ae+ie+X,le,X,te,P.length,L.toFixed(2)+" dt",n._goodDelta/L,function(re){return P[re]/j-1}),n.status(C,ae+(ie+X)*2,le,X,te,O.length,U.toFixed(2)+" ut",1-U/n._goodFps,function(re){return O[re]/U-1}),n.status(C,ae+(ie+X)*3,le,X,te,T.length,K.toFixed(2)+" rt",1-K/n._goodFps,function(re){return T[re]/K-1}),n.status(C,ae+(ie+X)*4,le,X,te,A.length,J.toFixed(2)+" x",J*J*J,function(re){return(A[re]/M[re]/J||0)-1})},n.status=function(y,C,E,x,M,T,A,P,O){y.strokeStyle="#888",y.fillStyle="#444",y.lineWidth=1,y.fillRect(C,E+7,x,1),y.beginPath(),y.moveTo(C,E+7-M*r.clamp(.4*O(0),-2,2));for(var L=0;L<x;L+=1)y.lineTo(C+L,E+7-(L<T?M*r.clamp(.4*O(L),-2,2):0));y.stroke(),y.fillStyle="hsl("+r.clamp(25+95*P,0,120)+",100%,60%)",y.fillRect(C,E-7,4,4),y.font="12px Arial",y.textBaseline="middle",y.textAlign="right",y.fillStyle="#eee",y.fillText(A,C+x,E-5)},n.constraints=function(y,C){for(var E=C,x=0;x<y.length;x++){var M=y[x];if(!(!M.render.visible||!M.pointA||!M.pointB)){var T=M.bodyA,A=M.bodyB,P,O;if(T?P=u.add(T.position,M.pointA):P=M.pointA,M.render.type==="pin")E.beginPath(),E.arc(P.x,P.y,3,0,2*Math.PI),E.closePath();else{if(A?O=u.add(A.position,M.pointB):O=M.pointB,E.beginPath(),E.moveTo(P.x,P.y),M.render.type==="spring")for(var L=u.sub(O,P),H=u.perp(u.normalise(L)),K=Math.ceil(r.clamp(M.length/5,12,20)),j,U=1;U<K;U+=1)j=U%2===0?1:-1,E.lineTo(P.x+L.x*(U/K)+H.x*j*4,P.y+L.y*(U/K)+H.y*j*4);E.lineTo(O.x,O.y)}M.render.lineWidth&&(E.lineWidth=M.render.lineWidth,E.strokeStyle=M.render.strokeStyle,E.stroke()),M.render.anchors&&(E.fillStyle=M.render.strokeStyle,E.beginPath(),E.arc(P.x,P.y,3,0,2*Math.PI),E.arc(O.x,O.y,3,0,2*Math.PI),E.closePath(),E.fill())}}},n.bodies=function(y,C,E){var x=E;y.engine;var M=y.options,T=M.showInternalEdges||!M.wireframes,A,P,O,L;for(O=0;O<C.length;O++)if(A=C[O],!!A.render.visible){for(L=A.parts.length>1?1:0;L<A.parts.length;L++)if(P=A.parts[L],!!P.render.visible){if(M.showSleeping&&A.isSleeping?x.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(x.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!M.wireframes){var H=P.render.sprite,K=I(y,H.texture);x.translate(P.position.x,P.position.y),x.rotate(P.angle),x.drawImage(K,K.width*-H.xOffset*H.xScale,K.height*-H.yOffset*H.yScale,K.width*H.xScale,K.height*H.yScale),x.rotate(-P.angle),x.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)x.beginPath(),x.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{x.beginPath(),x.moveTo(P.vertices[0].x,P.vertices[0].y);for(var j=1;j<P.vertices.length;j++)!P.vertices[j-1].isInternal||T?x.lineTo(P.vertices[j].x,P.vertices[j].y):x.moveTo(P.vertices[j].x,P.vertices[j].y),P.vertices[j].isInternal&&!T&&x.moveTo(P.vertices[(j+1)%P.vertices.length].x,P.vertices[(j+1)%P.vertices.length].y);x.lineTo(P.vertices[0].x,P.vertices[0].y),x.closePath()}M.wireframes?(x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()):(x.fillStyle=P.render.fillStyle,P.render.lineWidth&&(x.lineWidth=P.render.lineWidth,x.strokeStyle=P.render.strokeStyle,x.stroke()),x.fill())}x.globalAlpha=1}}},n.bodyWireframes=function(y,C,E){var x=E,M=y.options.showInternalEdges,T,A,P,O,L;for(x.beginPath(),P=0;P<C.length;P++)if(T=C[P],!!T.render.visible)for(L=T.parts.length>1?1:0;L<T.parts.length;L++){for(A=T.parts[L],x.moveTo(A.vertices[0].x,A.vertices[0].y),O=1;O<A.vertices.length;O++)!A.vertices[O-1].isInternal||M?x.lineTo(A.vertices[O].x,A.vertices[O].y):x.moveTo(A.vertices[O].x,A.vertices[O].y),A.vertices[O].isInternal&&!M&&x.moveTo(A.vertices[(O+1)%A.vertices.length].x,A.vertices[(O+1)%A.vertices.length].y);x.lineTo(A.vertices[0].x,A.vertices[0].y)}x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()},n.bodyConvexHulls=function(y,C,E){var x=E,M,T,A;for(x.beginPath(),T=0;T<C.length;T++)if(M=C[T],!(!M.render.visible||M.parts.length===1)){for(x.moveTo(M.vertices[0].x,M.vertices[0].y),A=1;A<M.vertices.length;A++)x.lineTo(M.vertices[A].x,M.vertices[A].y);x.lineTo(M.vertices[0].x,M.vertices[0].y)}x.lineWidth=1,x.strokeStyle="rgba(255,255,255,0.2)",x.stroke()},n.vertexNumbers=function(y,C,E){var x=E,M,T,A;for(M=0;M<C.length;M++){var P=C[M].parts;for(A=P.length>1?1:0;A<P.length;A++){var O=P[A];for(T=0;T<O.vertices.length;T++)x.fillStyle="rgba(255,255,255,0.2)",x.fillText(M+"_"+T,O.position.x+(O.vertices[T].x-O.position.x)*.8,O.position.y+(O.vertices[T].y-O.position.y)*.8)}}},n.mousePosition=function(y,C,E){var x=E;x.fillStyle="rgba(255,255,255,0.8)",x.fillText(C.position.x+"  "+C.position.y,C.position.x+5,C.position.y-5)},n.bodyBounds=function(y,C,E){var x=E;y.engine;var M=y.options;x.beginPath();for(var T=0;T<C.length;T++){var A=C[T];if(A.render.visible)for(var P=C[T].parts,O=P.length>1?1:0;O<P.length;O++){var L=P[O];x.rect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}M.wireframes?x.strokeStyle="rgba(255,255,255,0.08)":x.strokeStyle="rgba(0,0,0,0.1)",x.lineWidth=1,x.stroke()},n.bodyAxes=function(y,C,E){var x=E;y.engine;var M=y.options,T,A,P,O;for(x.beginPath(),A=0;A<C.length;A++){var L=C[A],H=L.parts;if(!!L.render.visible)if(M.showAxes)for(P=H.length>1?1:0;P<H.length;P++)for(T=H[P],O=0;O<T.axes.length;O++){var K=T.axes[O];x.moveTo(T.position.x,T.position.y),x.lineTo(T.position.x+K.x*20,T.position.y+K.y*20)}else for(P=H.length>1?1:0;P<H.length;P++)for(T=H[P],O=0;O<T.axes.length;O++)x.moveTo(T.position.x,T.position.y),x.lineTo((T.vertices[0].x+T.vertices[T.vertices.length-1].x)/2,(T.vertices[0].y+T.vertices[T.vertices.length-1].y)/2)}M.wireframes?(x.strokeStyle="indianred",x.lineWidth=1):(x.strokeStyle="rgba(255, 255, 255, 0.4)",x.globalCompositeOperation="overlay",x.lineWidth=2),x.stroke(),x.globalCompositeOperation="source-over"},n.bodyPositions=function(y,C,E){var x=E;y.engine;var M=y.options,T,A,P,O;for(x.beginPath(),P=0;P<C.length;P++)if(T=C[P],!!T.render.visible)for(O=0;O<T.parts.length;O++)A=T.parts[O],x.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),x.closePath();for(M.wireframes?x.fillStyle="indianred":x.fillStyle="rgba(0,0,0,0.5)",x.fill(),x.beginPath(),P=0;P<C.length;P++)T=C[P],T.render.visible&&(x.arc(T.positionPrev.x,T.positionPrev.y,2,0,2*Math.PI,!1),x.closePath());x.fillStyle="rgba(255,165,0,0.8)",x.fill()},n.bodyVelocity=function(y,C,E){var x=E;x.beginPath();for(var M=0;M<C.length;M++){var T=C[M];!T.render.visible||(x.moveTo(T.position.x,T.position.y),x.lineTo(T.position.x+(T.position.x-T.positionPrev.x)*2,T.position.y+(T.position.y-T.positionPrev.y)*2))}x.lineWidth=3,x.strokeStyle="cornflowerblue",x.stroke()},n.bodyIds=function(y,C,E){var x=E,M,T;for(M=0;M<C.length;M++)if(!!C[M].render.visible){var A=C[M].parts;for(T=A.length>1?1:0;T<A.length;T++){var P=A[T];x.font="12px Arial",x.fillStyle="rgba(255,255,255,0.5)",x.fillText(P.id,P.position.x+10,P.position.y-10)}}},n.collisions=function(y,C,E){var x=E,M=y.options,T,A,P,O;for(x.beginPath(),P=0;P<C.length;P++)if(T=C[P],!!T.isActive)for(A=T.collision,O=0;O<T.activeContacts.length;O++){var L=T.activeContacts[O],H=L.vertex;x.rect(H.x-1.5,H.y-1.5,3.5,3.5)}for(M.wireframes?x.fillStyle="rgba(255,255,255,0.7)":x.fillStyle="orange",x.fill(),x.beginPath(),P=0;P<C.length;P++)if(T=C[P],!!T.isActive&&(A=T.collision,T.activeContacts.length>0)){var K=T.activeContacts[0].vertex.x,j=T.activeContacts[0].vertex.y;T.activeContacts.length===2&&(K=(T.activeContacts[0].vertex.x+T.activeContacts[1].vertex.x)/2,j=(T.activeContacts[0].vertex.y+T.activeContacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?x.moveTo(K-A.normal.x*8,j-A.normal.y*8):x.moveTo(K+A.normal.x*8,j+A.normal.y*8),x.lineTo(K,j)}M.wireframes?x.strokeStyle="rgba(255,165,0,0.7)":x.strokeStyle="orange",x.lineWidth=1,x.stroke()},n.separations=function(y,C,E){var x=E,M=y.options,T,A,P,O,L;for(x.beginPath(),L=0;L<C.length;L++)if(T=C[L],!!T.isActive){A=T.collision,P=A.bodyA,O=A.bodyB;var H=1;!O.isStatic&&!P.isStatic&&(H=.5),O.isStatic&&(H=0),x.moveTo(O.position.x,O.position.y),x.lineTo(O.position.x-A.penetration.x*H,O.position.y-A.penetration.y*H),H=1,!O.isStatic&&!P.isStatic&&(H=.5),P.isStatic&&(H=0),x.moveTo(P.position.x,P.position.y),x.lineTo(P.position.x+A.penetration.x*H,P.position.y+A.penetration.y*H)}M.wireframes?x.strokeStyle="rgba(255,165,0,0.5)":x.strokeStyle="orange",x.stroke()},n.inspector=function(y,C){y.engine;var E=y.selected,x=y.render,M=x.options,T;if(M.hasBounds){var A=x.bounds.max.x-x.bounds.min.x,P=x.bounds.max.y-x.bounds.min.y,O=A/x.options.width,L=P/x.options.height;C.scale(1/O,1/L),C.translate(-x.bounds.min.x,-x.bounds.min.y)}for(var H=0;H<E.length;H++){var K=E[H].data;switch(C.translate(.5,.5),C.lineWidth=1,C.strokeStyle="rgba(255,165,0,0.9)",C.setLineDash([1,2]),K.type){case"body":T=K.bounds,C.beginPath(),C.rect(Math.floor(T.min.x-3),Math.floor(T.min.y-3),Math.floor(T.max.x-T.min.x+6),Math.floor(T.max.y-T.min.y+6)),C.closePath(),C.stroke();break;case"constraint":var j=K.pointA;K.bodyA&&(j=K.pointB),C.beginPath(),C.arc(j.x,j.y,10,0,2*Math.PI),C.closePath(),C.stroke();break}C.setLineDash([]),C.translate(-.5,-.5)}y.selectStart!==null&&(C.translate(.5,.5),C.lineWidth=1,C.strokeStyle="rgba(255,165,0,0.6)",C.fillStyle="rgba(255,165,0,0.1)",T=y.selectBounds,C.beginPath(),C.rect(Math.floor(T.min.x),Math.floor(T.min.y),Math.floor(T.max.x-T.min.x),Math.floor(T.max.y-T.min.y)),C.closePath(),C.stroke(),C.fill(),C.translate(-.5,-.5)),M.hasBounds&&C.setTransform(1,0,0,1,0,0)};var h=function(y,C){var E=y.engine,x=y.timing,M=x.historySize,T=E.timing.timestamp;x.delta=C-x.lastTime||n._goodDelta,x.lastTime=C,x.timestampElapsed=T-x.lastTimestamp||0,x.lastTimestamp=T,x.deltaHistory.unshift(x.delta),x.deltaHistory.length=Math.min(x.deltaHistory.length,M),x.engineDeltaHistory.unshift(E.timing.lastDelta),x.engineDeltaHistory.length=Math.min(x.engineDeltaHistory.length,M),x.timestampElapsedHistory.unshift(x.timestampElapsed),x.timestampElapsedHistory.length=Math.min(x.timestampElapsedHistory.length,M),x.engineElapsedHistory.unshift(E.timing.lastElapsed),x.engineElapsedHistory.length=Math.min(x.engineElapsedHistory.length,M),x.elapsedHistory.unshift(x.lastElapsed),x.elapsedHistory.length=Math.min(x.elapsedHistory.length,M)},d=function(y){for(var C=0,E=0;E<y.length;E+=1)C+=y[E];return C/y.length||0},v=function(y,C){var E=document.createElement("canvas");return E.width=y,E.height=C,E.oncontextmenu=function(){return!1},E.onselectstart=function(){return!1},E},S=function(y){var C=y.getContext("2d"),E=window.devicePixelRatio||1,x=C.webkitBackingStorePixelRatio||C.mozBackingStorePixelRatio||C.msBackingStorePixelRatio||C.oBackingStorePixelRatio||C.backingStorePixelRatio||1;return E/x},I=function(y,C){var E=y.textures[C];return E||(E=y.textures[C]=new Image,E.src=C,E)},R=function(y,C){var E=C;/(jpg|gif|png)$/.test(C)&&(E="url("+C+")"),y.canvas.style.background=E,y.canvas.style.backgroundSize="contain",y.currentBackground=C}})()},function(s,o){var i={};s.exports=i,function(){i.create=function(n){return{vertex:n,normalImpulse:0,tangentImpulse:0}}}()},function(s,o,i){var n={};s.exports=n;var r=i(7),l=i(19),c=i(14),m=i(20),u=i(4),g=i(5),f=i(10),a=i(0),h=i(6);(function(){n.create=function(d){d=d||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},S=a.extend(v,d);return S.world=d.world||g.create({label:"World"}),S.pairs=d.pairs||m.create(),S.detector=d.detector||c.create(),S.grid={buckets:[]},S.world.gravity=S.gravity,S.broadphase=S.grid,S.metrics={},S},n.update=function(d,v,S){var I=a.now();v=v||1e3/60,S=S||1;var R=d.world,y=d.detector,C=d.pairs,E=d.timing,x=E.timestamp,M;E.timestamp+=v*E.timeScale,E.lastDelta=v*E.timeScale;var T={timestamp:E.timestamp};u.trigger(d,"beforeUpdate",T);var A=g.allBodies(R),P=g.allConstraints(R);for(R.isModified&&c.setBodies(y,A),R.isModified&&g.setModified(R,!1,!1,!0),d.enableSleeping&&r.update(A,E.timeScale),n._bodiesApplyGravity(A,d.gravity),n._bodiesUpdate(A,v,E.timeScale,S,R.bounds),f.preSolveAll(A),M=0;M<d.constraintIterations;M++)f.solveAll(P,E.timeScale);f.postSolveAll(A),y.pairs=d.pairs;var O=c.collisions(y);for(m.update(C,O,x),d.enableSleeping&&r.afterCollisions(C.list,E.timeScale),C.collisionStart.length>0&&u.trigger(d,"collisionStart",{pairs:C.collisionStart}),l.preSolvePosition(C.list),M=0;M<d.positionIterations;M++)l.solvePosition(C.list,E.timeScale);for(l.postSolvePosition(A),f.preSolveAll(A),M=0;M<d.constraintIterations;M++)f.solveAll(P,E.timeScale);for(f.postSolveAll(A),l.preSolveVelocity(C.list),M=0;M<d.velocityIterations;M++)l.solveVelocity(C.list,E.timeScale);return C.collisionActive.length>0&&u.trigger(d,"collisionActive",{pairs:C.collisionActive}),C.collisionEnd.length>0&&u.trigger(d,"collisionEnd",{pairs:C.collisionEnd}),n._bodiesClearForces(A),u.trigger(d,"afterUpdate",T),d.timing.lastElapsed=a.now()-I,d},n.merge=function(d,v){if(a.extend(d,v),v.world){d.world=v.world,n.clear(d);for(var S=g.allBodies(d.world),I=0;I<S.length;I++){var R=S[I];r.set(R,!1),R.id=a.nextId()}}},n.clear=function(d){m.clear(d.pairs),c.clear(d.detector)},n._bodiesClearForces=function(d){for(var v=0;v<d.length;v++){var S=d[v];S.force.x=0,S.force.y=0,S.torque=0}},n._bodiesApplyGravity=function(d,v){var S=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||S===0))for(var I=0;I<d.length;I++){var R=d[I];R.isStatic||R.isSleeping||(R.force.y+=R.mass*v.y*S,R.force.x+=R.mass*v.x*S)}},n._bodiesUpdate=function(d,v,S,I,R){for(var y=0;y<d.length;y++){var C=d[y];C.isStatic||C.isSleeping||h.update(C,v,S,I)}}})()},function(s,o,i){var n={};s.exports=n;var r=i(3),l=i(1);(function(){n._restingThresh=4,n._restingThreshTangent=6,n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n.preSolvePosition=function(c){var m,u,g,f=c.length;for(m=0;m<f;m++)u=c[m],u.isActive&&(g=u.activeContacts.length,u.collision.parentA.totalContacts+=g,u.collision.parentB.totalContacts+=g)},n.solvePosition=function(c,m){var u,g,f,a,h,d,v,S,I=n._positionDampen,R=c.length;for(u=0;u<R;u++)g=c[u],!(!g.isActive||g.isSensor)&&(f=g.collision,a=f.parentA,h=f.parentB,d=f.normal,g.separation=d.x*(h.positionImpulse.x+f.penetration.x-a.positionImpulse.x)+d.y*(h.positionImpulse.y+f.penetration.y-a.positionImpulse.y));for(u=0;u<R;u++)g=c[u],!(!g.isActive||g.isSensor)&&(f=g.collision,a=f.parentA,h=f.parentB,d=f.normal,S=(g.separation-g.slop)*m,(a.isStatic||h.isStatic)&&(S*=2),a.isStatic||a.isSleeping||(v=I/a.totalContacts,a.positionImpulse.x+=d.x*S*v,a.positionImpulse.y+=d.y*S*v),h.isStatic||h.isSleeping||(v=I/h.totalContacts,h.positionImpulse.x-=d.x*S*v,h.positionImpulse.y-=d.y*S*v))},n.postSolvePosition=function(c){for(var m=n._positionWarming,u=c.length,g=r.translate,f=l.update,a=0;a<u;a++){var h=c[a],d=h.positionImpulse,v=d.x,S=d.y,I=h.velocity;if(h.totalContacts=0,v!==0||S!==0){for(var R=0;R<h.parts.length;R++){var y=h.parts[R];g(y.vertices,d),f(y.bounds,y.vertices,I),y.position.x+=v,y.position.y+=S}h.positionPrev.x+=v,h.positionPrev.y+=S,v*I.x+S*I.y<0?(d.x=0,d.y=0):(d.x*=m,d.y*=m)}}},n.preSolveVelocity=function(c){var m=c.length,u,g;for(u=0;u<m;u++){var f=c[u];if(!(!f.isActive||f.isSensor)){var a=f.activeContacts,h=a.length,d=f.collision,v=d.parentA,S=d.parentB,I=d.normal,R=d.tangent;for(g=0;g<h;g++){var y=a[g],C=y.vertex,E=y.normalImpulse,x=y.tangentImpulse;if(E!==0||x!==0){var M=I.x*E+R.x*x,T=I.y*E+R.y*x;v.isStatic||v.isSleeping||(v.positionPrev.x+=M*v.inverseMass,v.positionPrev.y+=T*v.inverseMass,v.anglePrev+=v.inverseInertia*((C.x-v.position.x)*T-(C.y-v.position.y)*M)),S.isStatic||S.isSleeping||(S.positionPrev.x-=M*S.inverseMass,S.positionPrev.y-=T*S.inverseMass,S.anglePrev-=S.inverseInertia*((C.x-S.position.x)*T-(C.y-S.position.y)*M))}}}}},n.solveVelocity=function(c,m){var u=m*m,g=n._restingThresh*u,f=n._frictionNormalMultiplier,a=n._restingThreshTangent*u,h=Number.MAX_VALUE,d=c.length,v,S,I,R;for(I=0;I<d;I++){var y=c[I];if(!(!y.isActive||y.isSensor)){var C=y.collision,E=C.parentA,x=C.parentB,M=E.velocity,T=x.velocity,A=C.normal.x,P=C.normal.y,O=C.tangent.x,L=C.tangent.y,H=y.activeContacts,K=H.length,j=1/K,U=E.inverseMass+x.inverseMass,Y=y.friction*y.frictionStatic*f*u;for(M.x=E.position.x-E.positionPrev.x,M.y=E.position.y-E.positionPrev.y,T.x=x.position.x-x.positionPrev.x,T.y=x.position.y-x.positionPrev.y,E.angularVelocity=E.angle-E.anglePrev,x.angularVelocity=x.angle-x.anglePrev,R=0;R<K;R++){var J=H[R],ee=J.vertex,te=ee.x-E.position.x,ie=ee.y-E.position.y,X=ee.x-x.position.x,ce=ee.y-x.position.y,ae=M.x-ie*E.angularVelocity,le=M.y+te*E.angularVelocity,re=T.x-ce*x.angularVelocity,xe=T.y+X*x.angularVelocity,Se=ae-re,ge=le-xe,ve=A*Se+P*ge,ue=O*Se+L*ge,w=y.separation+ve,b=Math.min(w,1);b=w<0?0:b;var F=b*Y;ue>F||-ue>F?(S=ue>0?ue:-ue,v=y.friction*(ue>0?1:-1)*u,v<-S?v=-S:v>S&&(v=S)):(v=ue,S=h);var N=te*P-ie*A,_=X*P-ce*A,D=j/(U+E.inverseInertia*N*N+x.inverseInertia*_*_),z=(1+y.restitution)*ve*D;if(v*=D,ve*ve>g&&ve<0)J.normalImpulse=0;else{var B=J.normalImpulse;J.normalImpulse+=z,J.normalImpulse=Math.min(J.normalImpulse,0),z=J.normalImpulse-B}if(ue*ue>a)J.tangentImpulse=0;else{var W=J.tangentImpulse;J.tangentImpulse+=v,J.tangentImpulse<-S&&(J.tangentImpulse=-S),J.tangentImpulse>S&&(J.tangentImpulse=S),v=J.tangentImpulse-W}var V=A*z+O*v,$=P*z+L*v;E.isStatic||E.isSleeping||(E.positionPrev.x+=V*E.inverseMass,E.positionPrev.y+=$*E.inverseMass,E.anglePrev+=(te*$-ie*V)*E.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=V*x.inverseMass,x.positionPrev.y-=$*x.inverseMass,x.anglePrev-=(X*$-ce*V)*x.inverseInertia)}}}}})()},function(s,o,i){var n={};s.exports=n;var r=i(9),l=i(0);(function(){n.create=function(c){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},c)},n.update=function(c,m,u){var g=c.list,f=g.length,a=c.table,h=m.length,d=c.collisionStart,v=c.collisionEnd,S=c.collisionActive,I,R,y,C;for(d.length=0,v.length=0,S.length=0,C=0;C<f;C++)g[C].confirmedActive=!1;for(C=0;C<h;C++)I=m[C],y=I.pair,y?(y.isActive?S.push(y):d.push(y),r.update(y,I,u),y.confirmedActive=!0):(y=r.create(I,u),a[y.id]=y,d.push(y),g.push(y));var E=[];for(f=g.length,C=0;C<f;C++)y=g[C],y.confirmedActive||(r.setActive(y,!1,u),v.push(y),!y.collision.bodyA.isSleeping&&!y.collision.bodyB.isSleeping&&E.push(C));for(C=0;C<E.length;C++)R=E[C]-C,y=g[R],g.splice(R,1),delete a[y.id]},n.clear=function(c){return c.table={},c.list.length=0,c.collisionStart.length=0,c.collisionActive.length=0,c.collisionEnd.length=0,c}})()},function(s,o,i){var n=s.exports=i(22);n.Axes=i(11),n.Bodies=i(12),n.Body=i(6),n.Bounds=i(1),n.Collision=i(8),n.Common=i(0),n.Composite=i(5),n.Composites=i(23),n.Constraint=i(10),n.Contact=i(17),n.Detector=i(14),n.Engine=i(18),n.Events=i(4),n.Grid=i(24),n.Mouse=i(13),n.MouseConstraint=i(25),n.Pair=i(9),n.Pairs=i(20),n.Plugin=i(15),n.Query=i(26),n.Render=i(16),n.Resolver=i(19),n.Runner=i(27),n.SAT=i(28),n.Sleeping=i(7),n.Svg=i(29),n.Vector=i(2),n.Vertices=i(3),n.World=i(30),n.Engine.run=n.Runner.run,n.Common.deprecated(n.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(s,o,i){var n={};s.exports=n;var r=i(15),l=i(0);(function(){n.name="matter-js",n.version="0.18.0",n.uses=[],n.used=[],n.use=function(){r.use(n,Array.prototype.slice.call(arguments))},n.before=function(c,m){return c=c.replace(/^Matter./,""),l.chainPathBefore(n,c,m)},n.after=function(c,m){return c=c.replace(/^Matter./,""),l.chainPathAfter(n,c,m)}})()},function(s,o,i){var n={};s.exports=n;var r=i(5),l=i(10),c=i(0),m=i(6),u=i(12),g=c.deprecated;(function(){n.stack=function(f,a,h,d,v,S,I){for(var R=r.create({label:"Stack"}),y=f,C=a,E,x=0,M=0;M<d;M++){for(var T=0,A=0;A<h;A++){var P=I(y,C,A,M,E,x);if(P){var O=P.bounds.max.y-P.bounds.min.y,L=P.bounds.max.x-P.bounds.min.x;O>T&&(T=O),m.translate(P,{x:L*.5,y:O*.5}),y=P.bounds.max.x+v,r.addBody(R,P),E=P,x+=1}else y+=v}C+=T+S,y=f}return R},n.chain=function(f,a,h,d,v,S){for(var I=f.bodies,R=1;R<I.length;R++){var y=I[R-1],C=I[R],E=y.bounds.max.y-y.bounds.min.y,x=y.bounds.max.x-y.bounds.min.x,M=C.bounds.max.y-C.bounds.min.y,T=C.bounds.max.x-C.bounds.min.x,A={bodyA:y,pointA:{x:x*a,y:E*h},bodyB:C,pointB:{x:T*d,y:M*v}},P=c.extend(A,S);r.addConstraint(f,l.create(P))}return f.label+=" Chain",f},n.mesh=function(f,a,h,d,v){var S=f.bodies,I,R,y,C,E;for(I=0;I<h;I++){for(R=1;R<a;R++)y=S[R-1+I*a],C=S[R+I*a],r.addConstraint(f,l.create(c.extend({bodyA:y,bodyB:C},v)));if(I>0)for(R=0;R<a;R++)y=S[R+(I-1)*a],C=S[R+I*a],r.addConstraint(f,l.create(c.extend({bodyA:y,bodyB:C},v))),d&&R>0&&(E=S[R-1+(I-1)*a],r.addConstraint(f,l.create(c.extend({bodyA:E,bodyB:C},v)))),d&&R<a-1&&(E=S[R+1+(I-1)*a],r.addConstraint(f,l.create(c.extend({bodyA:E,bodyB:C},v))))}return f.label+=" Mesh",f},n.pyramid=function(f,a,h,d,v,S,I){return n.stack(f,a,h,d,v,S,function(R,y,C,E,x,M){var T=Math.min(d,Math.ceil(h/2)),A=x?x.bounds.max.x-x.bounds.min.x:0;if(!(E>T)){E=T-E;var P=E,O=h-1-E;if(!(C<P||C>O)){M===1&&m.translate(x,{x:(C+(h%2===1?1:-1))*A,y:0});var L=x?C*A:0;return I(f+L+C*v,y,C,E,x,M)}}})},n.newtonsCradle=function(f,a,h,d,v){for(var S=r.create({label:"Newtons Cradle"}),I=0;I<h;I++){var R=1.9,y=u.circle(f+I*(d*R),a+v,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),C=l.create({pointA:{x:f+I*(d*R),y:a},bodyB:y});r.addBody(S,y),r.addConstraint(S,C)}return S},g(n,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),n.car=function(f,a,h,d,v){var S=m.nextGroup(!0),I=20,R=-h*.5+I,y=h*.5-I,C=0,E=r.create({label:"Car"}),x=u.rectangle(f,a,h,d,{collisionFilter:{group:S},chamfer:{radius:d*.5},density:2e-4}),M=u.circle(f+R,a+C,v,{collisionFilter:{group:S},friction:.8}),T=u.circle(f+y,a+C,v,{collisionFilter:{group:S},friction:.8}),A=l.create({bodyB:x,pointB:{x:R,y:C},bodyA:M,stiffness:1,length:0}),P=l.create({bodyB:x,pointB:{x:y,y:C},bodyA:T,stiffness:1,length:0});return r.addBody(E,x),r.addBody(E,M),r.addBody(E,T),r.addConstraint(E,A),r.addConstraint(E,P),E},g(n,"car","Composites.car \u27A4 moved to car example"),n.softBody=function(f,a,h,d,v,S,I,R,y,C){y=c.extend({inertia:1/0},y),C=c.extend({stiffness:.2,render:{type:"line",anchors:!1}},C);var E=n.stack(f,a,h,d,v,S,function(x,M){return u.circle(x,M,R,y)});return n.mesh(E,h,d,I,C),E.label="Soft Body",E},g(n,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(s,o,i){var n={};s.exports=n;var r=i(9),l=i(0),c=l.deprecated;(function(){n.create=function(m){var u={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(u,m)},n.update=function(m,u,g,f){var a,h,d,v=g.world,S=m.buckets,I,R,y=!1;for(a=0;a<u.length;a++){var C=u[a];if(!(C.isSleeping&&!f)&&!(v.bounds&&(C.bounds.max.x<v.bounds.min.x||C.bounds.min.x>v.bounds.max.x||C.bounds.max.y<v.bounds.min.y||C.bounds.min.y>v.bounds.max.y))){var E=n._getRegion(m,C);if(!C.region||E.id!==C.region.id||f){(!C.region||f)&&(C.region=E);var x=n._regionUnion(E,C.region);for(h=x.startCol;h<=x.endCol;h++)for(d=x.startRow;d<=x.endRow;d++){R=n._getBucketId(h,d),I=S[R];var M=h>=E.startCol&&h<=E.endCol&&d>=E.startRow&&d<=E.endRow,T=h>=C.region.startCol&&h<=C.region.endCol&&d>=C.region.startRow&&d<=C.region.endRow;!M&&T&&T&&I&&n._bucketRemoveBody(m,I,C),(C.region===E||M&&!T||f)&&(I||(I=n._createBucket(S,R)),n._bucketAddBody(m,I,C))}C.region=E,y=!0}}}y&&(m.pairsList=n._createActivePairsList(m))},c(n,"update","Grid.update \u27A4 replaced by Matter.Detector"),n.clear=function(m){m.buckets={},m.pairs={},m.pairsList=[]},c(n,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),n._regionUnion=function(m,u){var g=Math.min(m.startCol,u.startCol),f=Math.max(m.endCol,u.endCol),a=Math.min(m.startRow,u.startRow),h=Math.max(m.endRow,u.endRow);return n._createRegion(g,f,a,h)},n._getRegion=function(m,u){var g=u.bounds,f=Math.floor(g.min.x/m.bucketWidth),a=Math.floor(g.max.x/m.bucketWidth),h=Math.floor(g.min.y/m.bucketHeight),d=Math.floor(g.max.y/m.bucketHeight);return n._createRegion(f,a,h,d)},n._createRegion=function(m,u,g,f){return{id:m+","+u+","+g+","+f,startCol:m,endCol:u,startRow:g,endRow:f}},n._getBucketId=function(m,u){return"C"+m+"R"+u},n._createBucket=function(m,u){var g=m[u]=[];return g},n._bucketAddBody=function(m,u,g){var f=m.pairs,a=r.id,h=u.length,d;for(d=0;d<h;d++){var v=u[d];if(!(g.id===v.id||g.isStatic&&v.isStatic)){var S=a(g,v),I=f[S];I?I[2]+=1:f[S]=[g,v,1]}}u.push(g)},n._bucketRemoveBody=function(m,u,g){var f=m.pairs,a=r.id,h;u.splice(l.indexOf(u,g),1);var d=u.length;for(h=0;h<d;h++){var v=f[a(g,u[h])];v&&(v[2]-=1)}},n._createActivePairsList=function(m){var u,g=m.pairs,f=l.keys(g),a=f.length,h=[],d;for(d=0;d<a;d++)u=g[f[d]],u[2]>0?h.push(u):delete g[f[d]];return h}})()},function(s,o,i){var n={};s.exports=n;var r=i(3),l=i(7),c=i(13),m=i(4),u=i(14),g=i(10),f=i(5),a=i(0),h=i(1);(function(){n.create=function(d,v){var S=(d?d.mouse:null)||(v?v.mouse:null);S||(d&&d.render&&d.render.canvas?S=c.create(d.render.canvas):v&&v.element?S=c.create(v.element):(S=c.create(),a.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var I=g.create({label:"Mouse Constraint",pointA:S.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),R={type:"mouseConstraint",mouse:S,element:null,body:null,constraint:I,collisionFilter:{category:1,mask:4294967295,group:0}},y=a.extend(R,v);return m.on(d,"beforeUpdate",function(){var C=f.allBodies(d.world);n.update(y,C),n._triggerEvents(y)}),y},n.update=function(d,v){var S=d.mouse,I=d.constraint,R=d.body;if(S.button===0){if(I.bodyB)l.set(I.bodyB,!1),I.pointA=S.position;else for(var y=0;y<v.length;y++)if(R=v[y],h.contains(R.bounds,S.position)&&u.canCollide(R.collisionFilter,d.collisionFilter))for(var C=R.parts.length>1?1:0;C<R.parts.length;C++){var E=R.parts[C];if(r.contains(E.vertices,S.position)){I.pointA=S.position,I.bodyB=d.body=R,I.pointB={x:S.position.x-R.position.x,y:S.position.y-R.position.y},I.angleB=R.angle,l.set(R,!1),m.trigger(d,"startdrag",{mouse:S,body:R});break}}}else I.bodyB=d.body=null,I.pointB=null,R&&m.trigger(d,"enddrag",{mouse:S,body:R})},n._triggerEvents=function(d){var v=d.mouse,S=v.sourceEvents;S.mousemove&&m.trigger(d,"mousemove",{mouse:v}),S.mousedown&&m.trigger(d,"mousedown",{mouse:v}),S.mouseup&&m.trigger(d,"mouseup",{mouse:v}),c.clearSourceEvents(v)}})()},function(s,o,i){var n={};s.exports=n;var r=i(2),l=i(8),c=i(1),m=i(12),u=i(3);(function(){n.collides=function(g,f){for(var a=[],h=f.length,d=g.bounds,v=l.collides,S=c.overlaps,I=0;I<h;I++){var R=f[I],y=R.parts.length,C=y===1?0:1;if(S(R.bounds,d))for(var E=C;E<y;E++){var x=R.parts[E];if(S(x.bounds,d)){var M=v(x,g);if(M){a.push(M);break}}}}return a},n.ray=function(g,f,a,h){h=h||1e-100;for(var d=r.angle(f,a),v=r.magnitude(r.sub(f,a)),S=(a.x+f.x)*.5,I=(a.y+f.y)*.5,R=m.rectangle(S,I,v,h,{angle:d}),y=n.collides(R,g),C=0;C<y.length;C+=1){var E=y[C];E.body=E.bodyB=E.bodyA}return y},n.region=function(g,f,a){for(var h=[],d=0;d<g.length;d++){var v=g[d],S=c.overlaps(v.bounds,f);(S&&!a||!S&&a)&&h.push(v)}return h},n.point=function(g,f){for(var a=[],h=0;h<g.length;h++){var d=g[h];if(c.contains(d.bounds,f))for(var v=d.parts.length===1?0:1;v<d.parts.length;v++){var S=d.parts[v];if(c.contains(S.bounds,f)&&u.contains(S.vertices,f)){a.push(d);break}}}return a}})()},function(s,o,i){var n={};s.exports=n;var r=i(4),l=i(18),c=i(0);(function(){var m,u;if(typeof window!="undefined"&&(m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!m){var g;m=function(f){g=setTimeout(function(){f(c.now())},1e3/60)},u=function(){clearTimeout(g)}}n.create=function(f){var a={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},h=c.extend(a,f);return h.delta=h.delta||1e3/h.fps,h.deltaMin=h.deltaMin||1e3/h.fps,h.deltaMax=h.deltaMax||1e3/(h.fps*.5),h.fps=1e3/h.delta,h},n.run=function(f,a){return typeof f.positionIterations!="undefined"&&(a=f,f=n.create()),function h(d){f.frameRequestId=m(h),d&&f.enabled&&n.tick(f,a,d)}(),f},n.tick=function(f,a,h){var d=a.timing,v=1,S,I={timestamp:d.timestamp};r.trigger(f,"beforeTick",I),f.isFixed?S=f.delta:(S=h-f.timePrev||f.delta,f.timePrev=h,f.deltaHistory.push(S),f.deltaHistory=f.deltaHistory.slice(-f.deltaSampleSize),S=Math.min.apply(null,f.deltaHistory),S=S<f.deltaMin?f.deltaMin:S,S=S>f.deltaMax?f.deltaMax:S,v=S/f.delta,f.delta=S),f.timeScalePrev!==0&&(v*=d.timeScale/f.timeScalePrev),d.timeScale===0&&(v=0),f.timeScalePrev=d.timeScale,f.correction=v,f.frameCounter+=1,h-f.counterTimestamp>=1e3&&(f.fps=f.frameCounter*((h-f.counterTimestamp)/1e3),f.counterTimestamp=h,f.frameCounter=0),r.trigger(f,"tick",I),r.trigger(f,"beforeUpdate",I),l.update(a,S,v),r.trigger(f,"afterUpdate",I),r.trigger(f,"afterTick",I)},n.stop=function(f){u(f.frameRequestId)},n.start=function(f,a){n.run(f,a)}})()},function(s,o,i){var n={};s.exports=n;var r=i(8),l=i(0),c=l.deprecated;(function(){n.collides=function(m,u){return r.collides(m,u)},c(n,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(s,o,i){var n={};s.exports=n,i(1);var r=i(0);(function(){n.pathToVertices=function(l,c){typeof window!="undefined"&&!("SVGPathSeg"in window)&&r.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var m,u,g,f,a,h,d,v,S,I,R=[],y,C,E=0,x=0,M=0;c=c||15;var T=function(P,O,L){var H=L%2===1&&L>1;if(!S||P!=S.x||O!=S.y){S&&H?(y=S.x,C=S.y):(y=0,C=0);var K={x:y+P,y:C+O};(H||!S)&&(S=K),R.push(K),x=y+P,M=C+O}},A=function(P){var O=P.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":x=P.x,M=P.y;break;case"H":x=P.x;break;case"V":M=P.y;break}T(x,M,P.pathSegType)}};for(n._svgPathToAbsolute(l),g=l.getTotalLength(),h=[],m=0;m<l.pathSegList.numberOfItems;m+=1)h.push(l.pathSegList.getItem(m));for(d=h.concat();E<g;){if(I=l.getPathSegAtLength(E),a=h[I],a!=v){for(;d.length&&d[0]!=a;)A(d.shift());v=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=l.getPointAtLength(E),T(f.x,f.y,0);break}E+=c}for(m=0,u=d.length;m<u;++m)A(d[m]);return R},n._svgPathToAbsolute=function(l){for(var c,m,u,g,f,a,h=l.pathSegList,d=0,v=0,S=h.numberOfItems,I=0;I<S;++I){var R=h.getItem(I),y=R.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(y))"x"in R&&(d=R.x),"y"in R&&(v=R.y);else switch("x1"in R&&(u=d+R.x1),"x2"in R&&(f=d+R.x2),"y1"in R&&(g=v+R.y1),"y2"in R&&(a=v+R.y2),"x"in R&&(d+=R.x),"y"in R&&(v+=R.y),y){case"m":h.replaceItem(l.createSVGPathSegMovetoAbs(d,v),I);break;case"l":h.replaceItem(l.createSVGPathSegLinetoAbs(d,v),I);break;case"h":h.replaceItem(l.createSVGPathSegLinetoHorizontalAbs(d),I);break;case"v":h.replaceItem(l.createSVGPathSegLinetoVerticalAbs(v),I);break;case"c":h.replaceItem(l.createSVGPathSegCurvetoCubicAbs(d,v,u,g,f,a),I);break;case"s":h.replaceItem(l.createSVGPathSegCurvetoCubicSmoothAbs(d,v,f,a),I);break;case"q":h.replaceItem(l.createSVGPathSegCurvetoQuadraticAbs(d,v,u,g),I);break;case"t":h.replaceItem(l.createSVGPathSegCurvetoQuadraticSmoothAbs(d,v),I);break;case"a":h.replaceItem(l.createSVGPathSegArcAbs(d,v,R.r1,R.r2,R.angle,R.largeArcFlag,R.sweepFlag),I);break;case"z":case"Z":d=c,v=m;break}(y=="M"||y=="m")&&(c=d,m=v)}}})()},function(s,o,i){var n={};s.exports=n;var r=i(5);i(0),function(){n.create=r.create,n.add=r.add,n.remove=r.remove,n.clear=r.clear,n.addComposite=r.addComposite,n.addBody=r.addBody,n.addConstraint=r.addConstraint}()}])})})(matter);var Matter=getDefaultExportFromCjs(matter.exports);class MoveVelocitySystem extends System{constructor(s,o){super(s,o);k(this,"engine");this.engine=Matter.Engine.create(),this.engine.world.gravity.y=0,Matter.World.add(this.engine.world,Matter.Bodies.rectangle(Constants.GAME_WIDTH/2,-1,Constants.GAME_WIDTH,1,{isStatic:!0})),Matter.World.add(this.engine.world,Matter.Bodies.rectangle(0,Constants.GAME_HEIGHT/2,1,Constants.GAME_HEIGHT,{isStatic:!0})),Matter.World.add(this.engine.world,Matter.Bodies.rectangle(Constants.GAME_WIDTH,Constants.GAME_HEIGHT/2,1,Constants.GAME_HEIGHT,{isStatic:!0})),Matter.World.add(this.engine.world,Matter.Bodies.rectangle(Constants.GAME_WIDTH/2,Constants.GAME_HEIGHT,Constants.GAME_WIDTH,1,{isStatic:!0}))}execute(s,o){this.queries.bodies.added&&this.queries.bodies.added.length>0&&this.queries.bodies.added.forEach(i=>this.handleEntityBodyAdded(i)),this.queries.alive.changed&&this.queries.alive.changed.length>0&&this.queries.alive.changed.forEach(i=>this.handledEntityAliveChanged(i)),Matter.Engine.update(this.engine,s),this.queries.bodies.results.forEach(i=>this.updateEntityBody(i,s))}handledEntityAliveChanged(s){if(EntityHelper.isAlive(s))return;const o=s.getMutableComponent(MoveVelocityComponent);(o==null?void 0:o.body)!=null&&Matter.World.remove(this.engine.world,o.body)}updateEntityBody(s,o){const i=s.getMutableComponent(MoveVelocityComponent);if((i==null?void 0:i.body)==null||(i==null?void 0:i.velocity)==null)return;const n=s.getMutableComponent(TransformComponent);!n||(Matter.Body.setVelocity(i.body,Matter.Vector.mult(Matter.Vector.create(i.velocity.x,i.velocity.y),i.moveSpeed*(o/1e3))),n.position=new Vector2(i.body.position.x,i.body.position.y))}handleEntityBodyAdded(s){const o=s.getComponent(TransformComponent);if(!o)return;const i=s.getComponent(SizeComponent);if(!i)return;const n=s.getMutableComponent(MoveVelocityComponent);if(!n)return;const r=new Bounds(o.position,new Vector2(i.width,i.height)),l=Matter.Bodies.rectangle(o.position.x-r.extends.x,o.position.y-r.extends.y,i.width,i.height);Matter.World.add(this.engine.world,l),n.body=l}}k(MoveVelocitySystem,"queries",{bodies:{components:[MoveVelocityComponent,TransformComponent],listen:{added:!0}},alive:{components:[AliveComponent],listen:{changed:!0}}});class ShapeFactory{static triangle(e){const s=e/2;return Polyline.builder({}).addPoint(new Vector2(-s,-s)).addPoint(new Vector2(s,-s)).addPoint(new Vector2(0,s)).closed().build()}}class EntityFactory{static createUnit(e,s){const o=Constants.CELL_SIZE,i=Constants.CELL_SIZE;let n=Math.random()*360;n-=n%90;const r=ShapeFactory.triangle(Constants.CELL_SIZE);r.fillStyle=s.color,e.createEntity().addComponent(RenderComponent).addComponent(ShapeComponent,{shape:r}).addComponent(TransformComponent,{position:new Vector2(s.position.x,s.position.y),rotation:n}).addComponent(SizeComponent,{width:o,height:i}).addComponent(MovableComponent).addComponent(LayerComponent,{layer:Constants.LAYER_UNITS}).addComponent(SelectableComponent).addComponent(HealthComponent,{points:Math.round(Math.random()*10),maxPoints:10}).addComponent(AliveComponent).addComponent(MoveVelocityComponent,{moveSpeed:50}).addComponent(PlayerMovementKeysComponent).addComponent(MovePositionDirectComponent).addComponent(PlayerMovementMouseComponent)}static createSelector(e,s){e.createEntity().addComponent(ShapeComponent,{shape:new Rectangle({lineStyle:"black",anchor:"top-left",lineWidth:1,size:{width:0,height:0}})}).addComponent(RenderComponent).addComponent(TransformComponent,{position:new Vector2(s.position.x,s.position.y)}).addComponent(SizeComponent,{width:100,height:100}).addComponent(SelectorComponent).addComponent(VisibilityComponent,{visible:!1}).addComponent(LayerComponent,{layer:Constants.LAYER_UI})}static createFpsCouter(e,s){e.createEntity().addComponent(RenderComponent).addComponent(TextComponent,{text:new Text({text:"0",font:"12px Arial",color:"black"})}).addComponent(FpsComponent).addComponent(TransformComponent,{position:new Vector2(s.position.x,s.position.y)}).addComponent(LayerComponent,{layer:Constants.LAYER_UI})}}k(EntityFactory,"first",!0);const Ie=class{constructor(e){k(this,"eventTarget");e=e||""+ ++Ie.counter,this.eventTarget=document.appendChild(document.createComment("EventBus: "+e))}on(e,s){this.eventTarget.addEventListener(e,s)}once(e,s){this.eventTarget.addEventListener(e,s,{once:!0})}off(e,s){this.eventTarget.removeEventListener(e,s)}emit(e,s){return this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:s}))}};let EventBus=Ie;k(EventBus,"counter",0);class Grid{constructor(e){k(this,"width");k(this,"height");k(this,"cellSize");k(this,"originPosition");k(this,"initGridObject");k(this,"eventBus");k(this,"content");Object.assign(this,e),this.eventBus=new EventBus("Grid"),this.content=Array.from({length:this.height}).map((s,o)=>Array.from({length:this.width}).map((i,n)=>this.createGridObject(n,o))),Debug.isEnabled("grid")&&this.drawDebug()}createGridObject(e,s){return this.initGridObject(this,e,s)}drawDebug(){Array.from({length:this.height+1}).forEach((e,s)=>Debug.drawLine({start:this.getWorldPosition(0,s),end:this.getWorldPosition(this.width,s),lineColor:"gray"})),Array.from({length:this.width+1}).forEach((e,s)=>Debug.drawLine({start:this.getWorldPosition(s,0),end:this.getWorldPosition(s,this.height),lineColor:"gray"}))}getPosition(e){return ye({},Vector2.divides(Vector2.subtracts(e,this.originPosition),this.cellSize,"floor"))}getWorldPosition(e,s){return Vector2.adds(Vector2.multiplies(new Vector2(e,s),this.cellSize),this.originPosition)}static isNumber(e){return typeof e=="number"}setGridObject(e,s,o){if(e instanceof Vector2){const i=this.getPosition(e);o=s,e=i.x,s=i.y}if(typeof e!="number"||typeof s!="number")throw new Error(`setValue(${e}, ${s}, ${o}) is called incorrectly`);if(o===void 0)throw new Error("value was undefined");this.content[s]===void 0||this.content[s][e]===void 0||(this.content[s][e]=o,this.eventBus.emit("gridChanged",{detail:{x:e,y:s,object:o}}))}getGridObject(e,s){if(e instanceof Vector2){const o=this.getPosition(e);e=o.x,s=o.y}if(s===void 0)throw new Error("y was undefined");return this.content[s]===void 0||this.content[s][e]===void 0?null:this.content[s][e]}}class PathNode{constructor(e,s,o){k(this,"gCost",0);k(this,"hCost",0);k(this,"_fCost",0);k(this,"cameFromNode",null);this.grid=e,this.x=s,this.y=o}get fCost(){return this._fCost}calculateFCost(){this._fCost=this.gCost+this.hCost}equals(e){return e instanceof PathNode?e.x===this.x&&e.y===this.y:!1}toString(){return this.x+","+this.y}}const Te=class{constructor(e,s){k(this,"grid");k(this,"openList");k(this,"closedList");this.grid=new Grid({width:e,height:s,cellSize:Constants.CELL_SIZE,originPosition:Vector2.ZERO,initGridObject:(o,i,n)=>new PathNode(o,i,n)}),this.openList=null,this.closedList=null}findPath(e,s,o,i){const n=this.grid.getGridObject(e,s),r=this.grid.getGridObject(o,i);for(this.openList=[],this.closedList=[],this.openList.push(n),Array.from({length:this.grid.width},(l,c)=>{Array.from({length:this.grid.height},(m,u)=>{const g=this.grid.getGridObject(c,u);g.gCost=Number.MAX_VALUE,g.calculateFCost(),g.cameFromNode=null})}),n.gCost=0,n.hCost=this.calculateDistanceCost(n,r),n.calculateFCost();this.openList.length>0;){const l=this.getLowestFCostNode(this.openList);if(l.equals(r))return this.calculatePath(r);this.openList.splice(this.openList.indexOf(l),1),this.closedList.push(l);for(const c of this.getNeighbourNodes(l)){if(this.closedList.includes(c))continue;const m=l.gCost+this.calculateDistanceCost(l,c);m<c.gCost&&(c.cameFromNode=l,c.gCost=m,c.hCost=this.calculateDistanceCost(c,r),c.calculateFCost(),this.openList.includes(c)||this.openList.push(c))}}return null}calculatePath(e){const s=[];s.push(e);let o=e;for(;o.cameFromNode!==null;)s.push(o.cameFromNode),o=o.cameFromNode;return s.reverse(),s}calculateDistanceCost(e,s){const o=Math.abs(e.x-s.x),i=Math.abs(e.y-s.y),n=Math.abs(o-i);return Te.MOVE_DIAGONAL_COST*Math.min(o,i)+Te.MOVE_STRAIGHT_COST*n}getLowestFCostNode(e){let s=e[0];for(let o=1;o<e.length;o++){const i=e[o];i.fCost<s.fCost&&(s=i)}return s}getNeighbourNodes(e){const s=[];return e.x-1>=0&&(s.push(this.grid.getGridObject(e.x-1,e.y)),e.y-1>=0&&s.push(this.grid.getGridObject(e.x-1,e.y-1)),e.y+1<this.grid.height&&s.push(this.grid.getGridObject(e.x-1,e.y+1))),e.x+1>=0&&(s.push(this.grid.getGridObject(e.x+1,e.y)),e.y-1>=0&&s.push(this.grid.getGridObject(e.x+1,e.y-1)),e.y+1<this.grid.height&&s.push(this.grid.getGridObject(e.x+1,e.y+1))),e.y-1>=0&&s.push(this.grid.getGridObject(e.x,e.y-1)),e.y+1<this.grid.height&&s.push(this.grid.getGridObject(e.x,e.y+1)),s}};let Pathfinding=Te;k(Pathfinding,"MOVE_STRAIGHT_COST",10),k(Pathfinding,"MOVE_DIAGONAL_COST",14);class GridView{constructor(e){k(this,"texts",[]);this.grid=e,Array.from({length:this.grid.height}).forEach((s,o)=>{this.texts[o]=[],Array.from({length:this.grid.width}).forEach((i,n)=>{const r=new Text({position:Vector2.adds(this.grid.getWorldPosition(n,o),new Vector2(this.grid.cellSize/2,this.grid.cellSize/2)),text:this.grid.getGridObject(n,o).toString(),font:"6px Arial",color:"green"});this.texts[o][n]=r},this)},this),e.eventBus.on("gridChanged",s=>{this.texts[s.detail.y][s.detail.x].text=s.detail.object.toString()})}getView(e,s){return this.texts[s][e]}}const _hoisted_1=["width","height"],_hoisted_2=createTextVNode(" test "),_sfc_main=defineComponent({setup(t){const e=new World;let s=0;onMounted(()=>{const n=document.getElementById("game");n.addEventListener("contextmenu",l=>{l.preventDefault()}),e.registerComponent(TransformComponent).registerComponent(ShapeComponent).registerComponent(RenderComponent).registerComponent(SizeComponent).registerComponent(SelectableComponent).registerComponent(SelectorComponent).registerComponent(MovableComponent).registerComponent(TextComponent).registerComponent(FpsComponent).registerComponent(LayerComponent).registerComponent(TweenComponent).registerComponent(VisibilityComponent).registerComponent(HealthComponent).registerComponent(AliveComponent).registerComponent(DebugComponent).registerComponent(GridComponent).registerComponent(GridViewComponent).registerComponent(MoveTransformVelocityComponent).registerComponent(MovePositionDirectComponent).registerComponent(PlayerMovementMouseComponent).registerComponent(PlayerMovementKeysComponent).registerComponent(MoveVelocityComponent).registerComponent(PathfindingComponent).registerSystem(RenderSystem,{canvas:n}).registerSystem(PlayerSelectionSystem).registerSystem(FpsSystem).registerSystem(TweenSystem).registerSystem(HealthSystem).registerSystem(MoveTransformVelocitySystem).registerSystem(InputSystem,{canvas:n}).registerSystem(PlayerMovementKeysSystem).registerSystem(MovePositionDirectSystem).registerSystem(PlayerMovementMouseSystem).registerSystem(MoveVelocitySystem),EntityFactory.createSelector(e,{position:{x:100,y:100}}),EntityFactory.createFpsCouter(e,{position:{x:Constants.GAME_WIDTH-25,y:20}}),e.createEntity().addComponent(RenderComponent).addComponent(LayerComponent,{layer:Constants.LAYER_TILES+1}).addComponent(DebugComponent);const r=new Pathfinding(Math.ceil(Constants.GAME_WIDTH/Constants.CELL_SIZE),Math.ceil(Constants.GAME_HEIGHT/Constants.CELL_SIZE));e.createEntity().addComponent(RenderComponent).addComponent(PathfindingComponent,{pathfinding:r}).addComponent(GridComponent,{grid:r.grid}).addComponent(GridViewComponent,{view:new GridView(r.grid)}),o(),s=performance.now(),i()});const o=()=>{Array.from(Array(100)).forEach(()=>{let n=Math.round(Math.random()*Constants.GAME_WIDTH);n-=n%Constants.CELL_SIZE;let r=Math.round(Math.random()*Constants.GAME_HEIGHT)+Constants.CELL_SIZE/2;r-=r%Constants.CELL_SIZE,EntityFactory.createUnit(e,{position:{x:n,y:r},color:"red"})})},i=()=>{const n=performance.now(),r=n-s;e.execute(r,n),s=n,requestAnimationFrame(i)};return(n,r)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("canvas",{id:"game",width:unref(Constants).GAME_WIDTH,height:unref(Constants).GAME_HEIGHT,style:{"background-color":"#d4d4d4"}},null,8,_hoisted_1),_hoisted_2],64))}});createApp(_sfc_main).mount("#app");
