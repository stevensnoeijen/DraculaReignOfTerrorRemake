var Tv=Object.defineProperty;var Ev=(s,a,l)=>a in s?Tv(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l;var ce=(s,a,l)=>(Ev(s,typeof a!="symbol"?a+"":a,l),l);const p$2=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))d(v);new MutationObserver(v=>{for(const m of v)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&d(g)}).observe(document,{childList:!0,subtree:!0});function l(v){const m={};return v.integrity&&(m.integrity=v.integrity),v.referrerpolicy&&(m.referrerPolicy=v.referrerpolicy),v.crossorigin==="use-credentials"?m.credentials="include":v.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(v){if(v.ep)return;v.ep=!0;const m=l(v);fetch(v.href,m)}};p$2();function makeMap(s,a){const l=Object.create(null),d=s.split(",");for(let v=0;v<d.length;v++)l[d[v]]=!0;return a?v=>!!l[v.toLowerCase()]:v=>!!l[v]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(s){return!!s||s===""}function normalizeStyle(s){if(isArray$2(s)){const a={};for(let l=0;l<s.length;l++){const d=s[l],v=isString(d)?parseStringStyle(d):normalizeStyle(d);if(v)for(const m in v)a[m]=v[m]}return a}else{if(isString(s))return s;if(isObject(s))return s}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(s){const a={};return s.split(listDelimiterRE).forEach(l=>{if(l){const d=l.split(propertyDelimiterRE);d.length>1&&(a[d[0].trim()]=d[1].trim())}}),a}function normalizeClass(s){let a="";if(isString(s))a=s;else if(isArray$2(s))for(let l=0;l<s.length;l++){const d=normalizeClass(s[l]);d&&(a+=d+" ")}else if(isObject(s))for(const l in s)s[l]&&(a+=l+" ");return a.trim()}function looseCompareArrays(s,a){if(s.length!==a.length)return!1;let l=!0;for(let d=0;l&&d<s.length;d++)l=looseEqual(s[d],a[d]);return l}function looseEqual(s,a){if(s===a)return!0;let l=isDate(s),d=isDate(a);if(l||d)return l&&d?s.getTime()===a.getTime():!1;if(l=isSymbol(s),d=isSymbol(a),l||d)return s===a;if(l=isArray$2(s),d=isArray$2(a),l||d)return l&&d?looseCompareArrays(s,a):!1;if(l=isObject(s),d=isObject(a),l||d){if(!l||!d)return!1;const v=Object.keys(s).length,m=Object.keys(a).length;if(v!==m)return!1;for(const g in s){const T=s.hasOwnProperty(g),b=a.hasOwnProperty(g);if(T&&!b||!T&&b||!looseEqual(s[g],a[g]))return!1}}return String(s)===String(a)}function looseIndexOf(s,a){return s.findIndex(l=>looseEqual(l,a))}const toDisplayString=s=>isString(s)?s:s==null?"":isArray$2(s)||isObject(s)&&(s.toString===objectToString||!isFunction(s.toString))?JSON.stringify(s,replacer,2):String(s),replacer=(s,a)=>a&&a.__v_isRef?replacer(s,a.value):isMap(a)?{[`Map(${a.size})`]:[...a.entries()].reduce((l,[d,v])=>(l[`${d} =>`]=v,l),{})}:isSet(a)?{[`Set(${a.size})`]:[...a.values()]}:isObject(a)&&!isArray$2(a)&&!isPlainObject(a)?String(a):a,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=s=>onRE.test(s),isModelListener=s=>s.startsWith("onUpdate:"),extend=Object.assign,remove=(s,a)=>{const l=s.indexOf(a);l>-1&&s.splice(l,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn=(s,a)=>hasOwnProperty$3.call(s,a),isArray$2=Array.isArray,isMap=s=>toTypeString(s)==="[object Map]",isSet=s=>toTypeString(s)==="[object Set]",isDate=s=>toTypeString(s)==="[object Date]",isFunction=s=>typeof s=="function",isString=s=>typeof s=="string",isSymbol=s=>typeof s=="symbol",isObject=s=>s!==null&&typeof s=="object",isPromise=s=>isObject(s)&&isFunction(s.then)&&isFunction(s.catch),objectToString=Object.prototype.toString,toTypeString=s=>objectToString.call(s),toRawType=s=>toTypeString(s).slice(8,-1),isPlainObject=s=>toTypeString(s)==="[object Object]",isIntegerKey=s=>isString(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=s=>{const a=Object.create(null);return l=>a[l]||(a[l]=s(l))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(s=>s.replace(camelizeRE,(a,l)=>l?l.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(s=>s.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(s=>s.charAt(0).toUpperCase()+s.slice(1)),toHandlerKey=cacheStringFunction(s=>s?`on${capitalize(s)}`:""),hasChanged=(s,a)=>!Object.is(s,a),invokeArrayFns=(s,a)=>{for(let l=0;l<s.length;l++)s[l](a)},def=(s,a,l)=>{Object.defineProperty(s,a,{configurable:!0,enumerable:!1,value:l})},toNumber=s=>{const a=parseFloat(s);return isNaN(a)?s:a};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(a=!1){this.active=!0,this.effects=[],this.cleanups=[],!a&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(a){if(this.active){const l=activeEffectScope;try{return activeEffectScope=this,a()}finally{activeEffectScope=l}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(a){if(this.active){let l,d;for(l=0,d=this.effects.length;l<d;l++)this.effects[l].stop();for(l=0,d=this.cleanups.length;l<d;l++)this.cleanups[l]();if(this.scopes)for(l=0,d=this.scopes.length;l<d;l++)this.scopes[l].stop(!0);if(this.parent&&!a){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.active=!1}}}function recordEffectScope(s,a=activeEffectScope){a&&a.active&&a.effects.push(s)}const createDep=s=>{const a=new Set(s);return a.w=0,a.n=0,a},wasTracked=s=>(s.w&trackOpBit)>0,newTracked=s=>(s.n&trackOpBit)>0,initDepMarkers=({deps:s})=>{if(s.length)for(let a=0;a<s.length;a++)s[a].w|=trackOpBit},finalizeDepMarkers=s=>{const{deps:a}=s;if(a.length){let l=0;for(let d=0;d<a.length;d++){const v=a[d];wasTracked(v)&&!newTracked(v)?v.delete(s):a[l++]=v,v.w&=~trackOpBit,v.n&=~trackOpBit}a.length=l}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(a,l=null,d){this.fn=a,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,d)}run(){if(!this.active)return this.fn();let a=activeEffect,l=shouldTrack;for(;a;){if(a===this)return;a=a.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(s){const{deps:a}=s;if(a.length){for(let l=0;l<a.length;l++)a[l].delete(s);a.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const s=trackStack.pop();shouldTrack=s===void 0?!0:s}function track(s,a,l){if(shouldTrack&&activeEffect){let d=targetMap.get(s);d||targetMap.set(s,d=new Map);let v=d.get(l);v||d.set(l,v=createDep()),trackEffects(v)}}function trackEffects(s,a){let l=!1;effectTrackDepth<=maxMarkerBits?newTracked(s)||(s.n|=trackOpBit,l=!wasTracked(s)):l=!s.has(activeEffect),l&&(s.add(activeEffect),activeEffect.deps.push(s))}function trigger(s,a,l,d,v,m){const g=targetMap.get(s);if(!g)return;let T=[];if(a==="clear")T=[...g.values()];else if(l==="length"&&isArray$2(s))g.forEach((b,R)=>{(R==="length"||R>=d)&&T.push(b)});else switch(l!==void 0&&T.push(g.get(l)),a){case"add":isArray$2(s)?isIntegerKey(l)&&T.push(g.get("length")):(T.push(g.get(ITERATE_KEY)),isMap(s)&&T.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(s)||(T.push(g.get(ITERATE_KEY)),isMap(s)&&T.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(s)&&T.push(g.get(ITERATE_KEY));break}if(T.length===1)T[0]&&triggerEffects(T[0]);else{const b=[];for(const R of T)R&&b.push(...R);triggerEffects(createDep(b))}}function triggerEffects(s,a){const l=isArray$2(s)?s:[...s];for(const d of l)d.computed&&triggerEffect(d);for(const d of l)d.computed||triggerEffect(d)}function triggerEffect(s,a){(s!==activeEffect||s.allowRecurse)&&(s.scheduler?s.scheduler():s.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const s={};return["includes","indexOf","lastIndexOf"].forEach(a=>{s[a]=function(...l){const d=toRaw(this);for(let m=0,g=this.length;m<g;m++)track(d,"get",m+"");const v=d[a](...l);return v===-1||v===!1?d[a](...l.map(toRaw)):v}}),["push","pop","shift","unshift","splice"].forEach(a=>{s[a]=function(...l){pauseTracking();const d=toRaw(this)[a].apply(this,l);return resetTracking(),d}}),s}function createGetter(s=!1,a=!1){return function(d,v,m){if(v==="__v_isReactive")return!s;if(v==="__v_isReadonly")return s;if(v==="__v_isShallow")return a;if(v==="__v_raw"&&m===(s?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(d))return d;const g=isArray$2(d);if(!s&&g&&hasOwn(arrayInstrumentations,v))return Reflect.get(arrayInstrumentations,v,m);const T=Reflect.get(d,v,m);return(isSymbol(v)?builtInSymbols.has(v):isNonTrackableKeys(v))||(s||track(d,"get",v),a)?T:isRef(T)?g&&isIntegerKey(v)?T:T.value:isObject(T)?s?readonly(T):reactive(T):T}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(s=!1){return function(l,d,v,m){let g=l[d];if(isReadonly(g)&&isRef(g)&&!isRef(v))return!1;if(!s&&!isReadonly(v)&&(isShallow(v)||(v=toRaw(v),g=toRaw(g)),!isArray$2(l)&&isRef(g)&&!isRef(v)))return g.value=v,!0;const T=isArray$2(l)&&isIntegerKey(d)?Number(d)<l.length:hasOwn(l,d),b=Reflect.set(l,d,v,m);return l===toRaw(m)&&(T?hasChanged(v,g)&&trigger(l,"set",d,v):trigger(l,"add",d,v)),b}}function deleteProperty(s,a){const l=hasOwn(s,a);s[a];const d=Reflect.deleteProperty(s,a);return d&&l&&trigger(s,"delete",a,void 0),d}function has(s,a){const l=Reflect.has(s,a);return(!isSymbol(a)||!builtInSymbols.has(a))&&track(s,"has",a),l}function ownKeys(s){return track(s,"iterate",isArray$2(s)?"length":ITERATE_KEY),Reflect.ownKeys(s)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(s,a){return!0},deleteProperty(s,a){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=s=>s,getProto=s=>Reflect.getPrototypeOf(s);function get$1(s,a,l=!1,d=!1){s=s.__v_raw;const v=toRaw(s),m=toRaw(a);l||(a!==m&&track(v,"get",a),track(v,"get",m));const{has:g}=getProto(v),T=d?toShallow:l?toReadonly:toReactive;if(g.call(v,a))return T(s.get(a));if(g.call(v,m))return T(s.get(m));s!==v&&s.get(a)}function has$1(s,a=!1){const l=this.__v_raw,d=toRaw(l),v=toRaw(s);return a||(s!==v&&track(d,"has",s),track(d,"has",v)),s===v?l.has(s):l.has(s)||l.has(v)}function size(s,a=!1){return s=s.__v_raw,!a&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)}function add(s){s=toRaw(s);const a=toRaw(this);return getProto(a).has.call(a,s)||(a.add(s),trigger(a,"add",s,s)),this}function set$1(s,a){a=toRaw(a);const l=toRaw(this),{has:d,get:v}=getProto(l);let m=d.call(l,s);m||(s=toRaw(s),m=d.call(l,s));const g=v.call(l,s);return l.set(s,a),m?hasChanged(a,g)&&trigger(l,"set",s,a):trigger(l,"add",s,a),this}function deleteEntry(s){const a=toRaw(this),{has:l,get:d}=getProto(a);let v=l.call(a,s);v||(s=toRaw(s),v=l.call(a,s)),d&&d.call(a,s);const m=a.delete(s);return v&&trigger(a,"delete",s,void 0),m}function clear(){const s=toRaw(this),a=s.size!==0,l=s.clear();return a&&trigger(s,"clear",void 0,void 0),l}function createForEach(s,a){return function(d,v){const m=this,g=m.__v_raw,T=toRaw(g),b=a?toShallow:s?toReadonly:toReactive;return!s&&track(T,"iterate",ITERATE_KEY),g.forEach((R,C)=>d.call(v,b(R),b(C),m))}}function createIterableMethod(s,a,l){return function(...d){const v=this.__v_raw,m=toRaw(v),g=isMap(m),T=s==="entries"||s===Symbol.iterator&&g,b=s==="keys"&&g,R=v[s](...d),C=l?toShallow:a?toReadonly:toReactive;return!a&&track(m,"iterate",b?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:w,done:A}=R.next();return A?{value:w,done:A}:{value:T?[C(w[0]),C(w[1])]:C(w),done:A}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(s){return function(...a){return s==="delete"?!1:this}}function createInstrumentations(){const s={get(m){return get$1(this,m)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},a={get(m){return get$1(this,m,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},l={get(m){return get$1(this,m,!0)},get size(){return size(this,!0)},has(m){return has$1.call(this,m,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},d={get(m){return get$1(this,m,!0,!0)},get size(){return size(this,!0)},has(m){return has$1.call(this,m,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{s[m]=createIterableMethod(m,!1,!1),l[m]=createIterableMethod(m,!0,!1),a[m]=createIterableMethod(m,!1,!0),d[m]=createIterableMethod(m,!0,!0)}),[s,l,a,d]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(s,a){const l=a?s?shallowReadonlyInstrumentations:shallowInstrumentations:s?readonlyInstrumentations:mutableInstrumentations;return(d,v,m)=>v==="__v_isReactive"?!s:v==="__v_isReadonly"?s:v==="__v_raw"?d:Reflect.get(hasOwn(l,v)&&v in d?l:d,v,m)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(s){return s.__v_skip||!Object.isExtensible(s)?0:targetTypeMap(toRawType(s))}function reactive(s){return isReadonly(s)?s:createReactiveObject(s,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(s){return createReactiveObject(s,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(s){return createReactiveObject(s,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(s,a,l,d,v){if(!isObject(s)||s.__v_raw&&!(a&&s.__v_isReactive))return s;const m=v.get(s);if(m)return m;const g=getTargetType(s);if(g===0)return s;const T=new Proxy(s,g===2?d:l);return v.set(s,T),T}function isReactive(s){return isReadonly(s)?isReactive(s.__v_raw):!!(s&&s.__v_isReactive)}function isReadonly(s){return!!(s&&s.__v_isReadonly)}function isShallow(s){return!!(s&&s.__v_isShallow)}function isProxy(s){return isReactive(s)||isReadonly(s)}function toRaw(s){const a=s&&s.__v_raw;return a?toRaw(a):s}function markRaw(s){return def(s,"__v_skip",!0),s}const toReactive=s=>isObject(s)?reactive(s):s,toReadonly=s=>isObject(s)?readonly(s):s;function trackRefValue(s){shouldTrack&&activeEffect&&(s=toRaw(s),trackEffects(s.dep||(s.dep=createDep())))}function triggerRefValue(s,a){s=toRaw(s),s.dep&&triggerEffects(s.dep)}function isRef(s){return!!(s&&s.__v_isRef===!0)}function ref(s){return createRef(s,!1)}function shallowRef(s){return createRef(s,!0)}function createRef(s,a){return isRef(s)?s:new RefImpl(s,a)}class RefImpl{constructor(a,l){this.__v_isShallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?a:toRaw(a),this._value=l?a:toReactive(a)}get value(){return trackRefValue(this),this._value}set value(a){a=this.__v_isShallow?a:toRaw(a),hasChanged(a,this._rawValue)&&(this._rawValue=a,this._value=this.__v_isShallow?a:toReactive(a),triggerRefValue(this))}}function unref(s){return isRef(s)?s.value:s}const shallowUnwrapHandlers={get:(s,a,l)=>unref(Reflect.get(s,a,l)),set:(s,a,l,d)=>{const v=s[a];return isRef(v)&&!isRef(l)?(v.value=l,!0):Reflect.set(s,a,l,d)}};function proxyRefs(s){return isReactive(s)?s:new Proxy(s,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(a,l,d,v){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(a,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!v,this.__v_isReadonly=d}get value(){const a=toRaw(this);return trackRefValue(a),(a._dirty||!a._cacheable)&&(a._dirty=!1,a._value=a.effect.run()),a._value}set value(a){this._setter(a)}}function computed$1(s,a,l=!1){let d,v;const m=isFunction(s);return m?(d=s,v=NOOP):(d=s.get,v=s.set),new ComputedRefImpl(d,v,m||!v,l)}function callWithErrorHandling(s,a,l,d){let v;try{v=d?s(...d):s()}catch(m){handleError(m,a,l)}return v}function callWithAsyncErrorHandling(s,a,l,d){if(isFunction(s)){const m=callWithErrorHandling(s,a,l,d);return m&&isPromise(m)&&m.catch(g=>{handleError(g,a,l)}),m}const v=[];for(let m=0;m<s.length;m++)v.push(callWithAsyncErrorHandling(s[m],a,l,d));return v}function handleError(s,a,l,d=!0){const v=a?a.vnode:null;if(a){let m=a.parent;const g=a.proxy,T=l;for(;m;){const R=m.ec;if(R){for(let C=0;C<R.length;C++)if(R[C](s,g,T)===!1)return}m=m.parent}const b=a.appContext.config.errorHandler;if(b){callWithErrorHandling(b,null,10,[s,g,T]);return}}logError(s,l,v,d)}function logError(s,a,l,d=!0){console.error(s)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(s){const a=currentFlushPromise||resolvedPromise;return s?a.then(this?s.bind(this):s):a}function findInsertionIndex(s){let a=flushIndex+1,l=queue.length;for(;a<l;){const d=a+l>>>1;getId(queue[d])<s?a=d+1:l=d}return a}function queueJob(s){(!queue.length||!queue.includes(s,isFlushing&&s.allowRecurse?flushIndex+1:flushIndex))&&s!==currentPreFlushParentJob&&(s.id==null?queue.push(s):queue.splice(findInsertionIndex(s.id),0,s),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(s){const a=queue.indexOf(s);a>flushIndex&&queue.splice(a,1)}function queueCb(s,a,l,d){isArray$2(s)?l.push(...s):(!a||!a.includes(s,s.allowRecurse?d+1:d))&&l.push(s),queueFlush()}function queuePreFlushCb(s){queueCb(s,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(s){queueCb(s,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(s,a=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=a,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(s,a)}}function flushPostFlushCbs(s){if(flushPreFlushCbs(),pendingPostFlushCbs.length){const a=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...a);return}for(activePostFlushCbs=a,activePostFlushCbs.sort((l,d)=>getId(l)-getId(d)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=s=>s.id==null?1/0:s.id;function flushJobs(s){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(s),queue.sort((l,d)=>getId(l)-getId(d));const a=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const l=queue[flushIndex];l&&l.active!==!1&&callWithErrorHandling(l,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(s)}}function emit$1(s,a,...l){if(s.isUnmounted)return;const d=s.vnode.props||EMPTY_OBJ;let v=l;const m=a.startsWith("update:"),g=m&&a.slice(7);if(g&&g in d){const C=`${g==="modelValue"?"model":g}Modifiers`,{number:w,trim:A}=d[C]||EMPTY_OBJ;A&&(v=l.map(S=>S.trim())),w&&(v=l.map(toNumber))}let T,b=d[T=toHandlerKey(a)]||d[T=toHandlerKey(camelize(a))];!b&&m&&(b=d[T=toHandlerKey(hyphenate(a))]),b&&callWithAsyncErrorHandling(b,s,6,v);const R=d[T+"Once"];if(R){if(!s.emitted)s.emitted={};else if(s.emitted[T])return;s.emitted[T]=!0,callWithAsyncErrorHandling(R,s,6,v)}}function normalizeEmitsOptions(s,a,l=!1){const d=a.emitsCache,v=d.get(s);if(v!==void 0)return v;const m=s.emits;let g={},T=!1;if(!isFunction(s)){const b=R=>{const C=normalizeEmitsOptions(R,a,!0);C&&(T=!0,extend(g,C))};!l&&a.mixins.length&&a.mixins.forEach(b),s.extends&&b(s.extends),s.mixins&&s.mixins.forEach(b)}return!m&&!T?(d.set(s,null),null):(isArray$2(m)?m.forEach(b=>g[b]=null):extend(g,m),d.set(s,g),g)}function isEmitListener(s,a){return!s||!isOn(a)?!1:(a=a.slice(2).replace(/Once$/,""),hasOwn(s,a[0].toLowerCase()+a.slice(1))||hasOwn(s,hyphenate(a))||hasOwn(s,a))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(s){const a=currentRenderingInstance;return currentRenderingInstance=s,currentScopeId=s&&s.type.__scopeId||null,a}function withCtx(s,a=currentRenderingInstance,l){if(!a||s._n)return s;const d=(...v)=>{d._d&&setBlockTracking(-1);const m=setCurrentRenderingInstance(a),g=s(...v);return setCurrentRenderingInstance(m),d._d&&setBlockTracking(1),g};return d._n=!0,d._c=!0,d._d=!0,d}function markAttrsAccessed(){}function renderComponentRoot(s){const{type:a,vnode:l,proxy:d,withProxy:v,props:m,propsOptions:[g],slots:T,attrs:b,emit:R,render:C,renderCache:w,data:A,setupState:S,ctx:O,inheritAttrs:L}=s;let N,U;const $=setCurrentRenderingInstance(s);try{if(l.shapeFlag&4){const z=v||d;N=normalizeVNode(C.call(z,z,w,m,S,A,O)),U=b}else{const z=a;N=normalizeVNode(z.length>1?z(m,{attrs:b,slots:T,emit:R}):z(m,null)),U=a.props?b:getFunctionalFallthrough(b)}}catch(z){blockStack.length=0,handleError(z,s,1),N=createVNode(Comment)}let G=N;if(U&&L!==!1){const z=Object.keys(U),{shapeFlag:V}=G;z.length&&V&7&&(g&&z.some(isModelListener)&&(U=filterModelListeners(U,g)),G=cloneVNode(G,U))}return l.dirs&&(G=cloneVNode(G),G.dirs=G.dirs?G.dirs.concat(l.dirs):l.dirs),l.transition&&(G.transition=l.transition),N=G,setCurrentRenderingInstance($),N}const getFunctionalFallthrough=s=>{let a;for(const l in s)(l==="class"||l==="style"||isOn(l))&&((a||(a={}))[l]=s[l]);return a},filterModelListeners=(s,a)=>{const l={};for(const d in s)(!isModelListener(d)||!(d.slice(9)in a))&&(l[d]=s[d]);return l};function shouldUpdateComponent(s,a,l){const{props:d,children:v,component:m}=s,{props:g,children:T,patchFlag:b}=a,R=m.emitsOptions;if(a.dirs||a.transition)return!0;if(l&&b>=0){if(b&1024)return!0;if(b&16)return d?hasPropsChanged(d,g,R):!!g;if(b&8){const C=a.dynamicProps;for(let w=0;w<C.length;w++){const A=C[w];if(g[A]!==d[A]&&!isEmitListener(R,A))return!0}}}else return(v||T)&&(!T||!T.$stable)?!0:d===g?!1:d?g?hasPropsChanged(d,g,R):!0:!!g;return!1}function hasPropsChanged(s,a,l){const d=Object.keys(a);if(d.length!==Object.keys(s).length)return!0;for(let v=0;v<d.length;v++){const m=d[v];if(a[m]!==s[m]&&!isEmitListener(l,m))return!0}return!1}function updateHOCHostEl({vnode:s,parent:a},l){for(;a&&a.subTree===s;)(s=a.vnode).el=l,a=a.parent}const isSuspense=s=>s.__isSuspense;function queueEffectWithSuspense(s,a){a&&a.pendingBranch?isArray$2(s)?a.effects.push(...s):a.effects.push(s):queuePostFlushCb(s)}function provide(s,a){if(currentInstance){let l=currentInstance.provides;const d=currentInstance.parent&&currentInstance.parent.provides;d===l&&(l=currentInstance.provides=Object.create(d)),l[s]=a}}function inject(s,a,l=!1){const d=currentInstance||currentRenderingInstance;if(d){const v=d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides;if(v&&s in v)return v[s];if(arguments.length>1)return l&&isFunction(a)?a.call(d.proxy):a}}const INITIAL_WATCHER_VALUE={};function watch(s,a,l){return doWatch(s,a,l)}function doWatch(s,a,{immediate:l,deep:d,flush:v,onTrack:m,onTrigger:g}=EMPTY_OBJ){const T=currentInstance;let b,R=!1,C=!1;if(isRef(s)?(b=()=>s.value,R=isShallow(s)):isReactive(s)?(b=()=>s,d=!0):isArray$2(s)?(C=!0,R=s.some(U=>isReactive(U)||isShallow(U)),b=()=>s.map(U=>{if(isRef(U))return U.value;if(isReactive(U))return traverse(U);if(isFunction(U))return callWithErrorHandling(U,T,2)})):isFunction(s)?a?b=()=>callWithErrorHandling(s,T,2):b=()=>{if(!(T&&T.isUnmounted))return w&&w(),callWithAsyncErrorHandling(s,T,3,[A])}:b=NOOP,a&&d){const U=b;b=()=>traverse(U())}let w,A=U=>{w=N.onStop=()=>{callWithErrorHandling(U,T,4)}};if(isInSSRComponentSetup)return A=NOOP,a?l&&callWithAsyncErrorHandling(a,T,3,[b(),C?[]:void 0,A]):b(),NOOP;let S=C?[]:INITIAL_WATCHER_VALUE;const O=()=>{if(!!N.active)if(a){const U=N.run();(d||R||(C?U.some(($,G)=>hasChanged($,S[G])):hasChanged(U,S)))&&(w&&w(),callWithAsyncErrorHandling(a,T,3,[U,S===INITIAL_WATCHER_VALUE?void 0:S,A]),S=U)}else N.run()};O.allowRecurse=!!a;let L;v==="sync"?L=O:v==="post"?L=()=>queuePostRenderEffect(O,T&&T.suspense):L=()=>queuePreFlushCb(O);const N=new ReactiveEffect(b,L);return a?l?O():S=N.run():v==="post"?queuePostRenderEffect(N.run.bind(N),T&&T.suspense):N.run(),()=>{N.stop(),T&&T.scope&&remove(T.scope.effects,N)}}function instanceWatch(s,a,l){const d=this.proxy,v=isString(s)?s.includes(".")?createPathGetter(d,s):()=>d[s]:s.bind(d,d);let m;isFunction(a)?m=a:(m=a.handler,l=a);const g=currentInstance;setCurrentInstance(this);const T=doWatch(v,m.bind(d),l);return g?setCurrentInstance(g):unsetCurrentInstance(),T}function createPathGetter(s,a){const l=a.split(".");return()=>{let d=s;for(let v=0;v<l.length&&d;v++)d=d[l[v]];return d}}function traverse(s,a){if(!isObject(s)||s.__v_skip||(a=a||new Set,a.has(s)))return s;if(a.add(s),isRef(s))traverse(s.value,a);else if(isArray$2(s))for(let l=0;l<s.length;l++)traverse(s[l],a);else if(isSet(s)||isMap(s))s.forEach(l=>{traverse(l,a)});else if(isPlainObject(s))for(const l in s)traverse(s[l],a);return s}function useTransitionState(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{s.isMounted=!0}),onBeforeUnmount(()=>{s.isUnmounting=!0}),s}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(s,{slots:a}){const l=getCurrentInstance(),d=useTransitionState();let v;return()=>{const m=a.default&&getTransitionRawChildren(a.default(),!0);if(!m||!m.length)return;let g=m[0];if(m.length>1){for(const L of m)if(L.type!==Comment){g=L;break}}const T=toRaw(s),{mode:b}=T;if(d.isLeaving)return emptyPlaceholder(g);const R=getKeepAliveChild(g);if(!R)return emptyPlaceholder(g);const C=resolveTransitionHooks(R,T,d,l);setTransitionHooks(R,C);const w=l.subTree,A=w&&getKeepAliveChild(w);let S=!1;const{getTransitionKey:O}=R.type;if(O){const L=O();v===void 0?v=L:L!==v&&(v=L,S=!0)}if(A&&A.type!==Comment&&(!isSameVNodeType(R,A)||S)){const L=resolveTransitionHooks(A,T,d,l);if(setTransitionHooks(A,L),b==="out-in")return d.isLeaving=!0,L.afterLeave=()=>{d.isLeaving=!1,l.update()},emptyPlaceholder(g);b==="in-out"&&R.type!==Comment&&(L.delayLeave=(N,U,$)=>{const G=getLeavingNodesForType(d,A);G[String(A.key)]=A,N._leaveCb=()=>{U(),N._leaveCb=void 0,delete C.delayedLeave},C.delayedLeave=$})}return g}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(s,a){const{leavingVNodes:l}=s;let d=l.get(a.type);return d||(d=Object.create(null),l.set(a.type,d)),d}function resolveTransitionHooks(s,a,l,d){const{appear:v,mode:m,persisted:g=!1,onBeforeEnter:T,onEnter:b,onAfterEnter:R,onEnterCancelled:C,onBeforeLeave:w,onLeave:A,onAfterLeave:S,onLeaveCancelled:O,onBeforeAppear:L,onAppear:N,onAfterAppear:U,onAppearCancelled:$}=a,G=String(s.key),z=getLeavingNodesForType(l,s),V=(re,J)=>{re&&callWithAsyncErrorHandling(re,d,9,J)},X=(re,J)=>{const se=J[1];V(re,J),isArray$2(re)?re.every(xe=>xe.length<=1)&&se():re.length<=1&&se()},ie={mode:m,persisted:g,beforeEnter(re){let J=T;if(!l.isMounted)if(v)J=L||T;else return;re._leaveCb&&re._leaveCb(!0);const se=z[G];se&&isSameVNodeType(s,se)&&se.el._leaveCb&&se.el._leaveCb(),V(J,[re])},enter(re){let J=b,se=R,xe=C;if(!l.isMounted)if(v)J=N||b,se=U||R,xe=$||C;else return;let Ae=!1;const Ue=re._enterCb=ze=>{Ae||(Ae=!0,ze?V(xe,[re]):V(se,[re]),ie.delayedLeave&&ie.delayedLeave(),re._enterCb=void 0)};J?X(J,[re,Ue]):Ue()},leave(re,J){const se=String(s.key);if(re._enterCb&&re._enterCb(!0),l.isUnmounting)return J();V(w,[re]);let xe=!1;const Ae=re._leaveCb=Ue=>{xe||(xe=!0,J(),Ue?V(O,[re]):V(S,[re]),re._leaveCb=void 0,z[se]===s&&delete z[se])};z[se]=s,A?X(A,[re,Ae]):Ae()},clone(re){return resolveTransitionHooks(re,a,l,d)}};return ie}function emptyPlaceholder(s){if(isKeepAlive(s))return s=cloneVNode(s),s.children=null,s}function getKeepAliveChild(s){return isKeepAlive(s)?s.children?s.children[0]:void 0:s}function setTransitionHooks(s,a){s.shapeFlag&6&&s.component?setTransitionHooks(s.component.subTree,a):s.shapeFlag&128?(s.ssContent.transition=a.clone(s.ssContent),s.ssFallback.transition=a.clone(s.ssFallback)):s.transition=a}function getTransitionRawChildren(s,a=!1,l){let d=[],v=0;for(let m=0;m<s.length;m++){let g=s[m];const T=l==null?g.key:String(l)+String(g.key!=null?g.key:m);g.type===Fragment?(g.patchFlag&128&&v++,d=d.concat(getTransitionRawChildren(g.children,a,T))):(a||g.type!==Comment)&&d.push(T!=null?cloneVNode(g,{key:T}):g)}if(v>1)for(let m=0;m<d.length;m++)d[m].patchFlag=-2;return d}function defineComponent(s){return isFunction(s)?{setup:s,name:s.name}:s}const isAsyncWrapper=s=>!!s.type.__asyncLoader,isKeepAlive=s=>s.type.__isKeepAlive;function onActivated(s,a){registerKeepAliveHook(s,"a",a)}function onDeactivated(s,a){registerKeepAliveHook(s,"da",a)}function registerKeepAliveHook(s,a,l=currentInstance){const d=s.__wdc||(s.__wdc=()=>{let v=l;for(;v;){if(v.isDeactivated)return;v=v.parent}return s()});if(injectHook(a,d,l),l){let v=l.parent;for(;v&&v.parent;)isKeepAlive(v.parent.vnode)&&injectToKeepAliveRoot(d,a,l,v),v=v.parent}}function injectToKeepAliveRoot(s,a,l,d){const v=injectHook(a,s,d,!0);onUnmounted(()=>{remove(d[a],v)},l)}function injectHook(s,a,l=currentInstance,d=!1){if(l){const v=l[s]||(l[s]=[]),m=a.__weh||(a.__weh=(...g)=>{if(l.isUnmounted)return;pauseTracking(),setCurrentInstance(l);const T=callWithAsyncErrorHandling(a,l,s,g);return unsetCurrentInstance(),resetTracking(),T});return d?v.unshift(m):v.push(m),m}}const createHook=s=>(a,l=currentInstance)=>(!isInSSRComponentSetup||s==="sp")&&injectHook(s,a,l),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(s,a=currentInstance){injectHook("ec",s,a)}function withDirectives(s,a){const l=currentRenderingInstance;if(l===null)return s;const d=getExposeProxy(l)||l.proxy,v=s.dirs||(s.dirs=[]);for(let m=0;m<a.length;m++){let[g,T,b,R=EMPTY_OBJ]=a[m];isFunction(g)&&(g={mounted:g,updated:g}),g.deep&&traverse(T),v.push({dir:g,instance:d,value:T,oldValue:void 0,arg:b,modifiers:R})}return s}function invokeDirectiveHook(s,a,l,d){const v=s.dirs,m=a&&a.dirs;for(let g=0;g<v.length;g++){const T=v[g];m&&(T.oldValue=m[g].value);let b=T.dir[d];b&&(pauseTracking(),callWithAsyncErrorHandling(b,l,8,[s.el,T,s,a]),resetTracking())}}const COMPONENTS="components";function resolveComponent(s,a){return resolveAsset(COMPONENTS,s,!0,a)||s}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(s,a,l=!0,d=!1){const v=currentRenderingInstance||currentInstance;if(v){const m=v.type;if(s===COMPONENTS){const T=getComponentName(m,!1);if(T&&(T===a||T===camelize(a)||T===capitalize(camelize(a))))return m}const g=resolve$2(v[s]||m[s],a)||resolve$2(v.appContext[s],a);return!g&&d?m:g}}function resolve$2(s,a){return s&&(s[a]||s[camelize(a)]||s[capitalize(camelize(a))])}function renderList(s,a,l,d){let v;const m=l&&l[d];if(isArray$2(s)||isString(s)){v=new Array(s.length);for(let g=0,T=s.length;g<T;g++)v[g]=a(s[g],g,void 0,m&&m[g])}else if(typeof s=="number"){v=new Array(s);for(let g=0;g<s;g++)v[g]=a(g+1,g,void 0,m&&m[g])}else if(isObject(s))if(s[Symbol.iterator])v=Array.from(s,(g,T)=>a(g,T,void 0,m&&m[T]));else{const g=Object.keys(s);v=new Array(g.length);for(let T=0,b=g.length;T<b;T++){const R=g[T];v[T]=a(s[R],R,T,m&&m[T])}}else v=[];return l&&(l[d]=v),v}function renderSlot(s,a,l={},d,v){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return createVNode("slot",a==="default"?null:{name:a},d&&d());let m=s[a];m&&m._c&&(m._d=!1),openBlock();const g=m&&ensureValidVNode(m(l)),T=createBlock(Fragment,{key:l.key||`_${a}`},g||(d?d():[]),g&&s._===1?64:-2);return!v&&T.scopeId&&(T.slotScopeIds=[T.scopeId+"-s"]),m&&m._c&&(m._d=!0),T}function ensureValidVNode(s){return s.some(a=>isVNode(a)?!(a.type===Comment||a.type===Fragment&&!ensureValidVNode(a.children)):!0)?s:null}const getPublicInstance=s=>s?isStatefulComponent(s)?getExposeProxy(s)||s.proxy:getPublicInstance(s.parent):null,publicPropertiesMap=extend(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>getPublicInstance(s.parent),$root:s=>getPublicInstance(s.root),$emit:s=>s.emit,$options:s=>resolveMergedOptions(s),$forceUpdate:s=>s.f||(s.f=()=>queueJob(s.update)),$nextTick:s=>s.n||(s.n=nextTick.bind(s.proxy)),$watch:s=>instanceWatch.bind(s)}),PublicInstanceProxyHandlers={get({_:s},a){const{ctx:l,setupState:d,data:v,props:m,accessCache:g,type:T,appContext:b}=s;let R;if(a[0]!=="$"){const S=g[a];if(S!==void 0)switch(S){case 1:return d[a];case 2:return v[a];case 4:return l[a];case 3:return m[a]}else{if(d!==EMPTY_OBJ&&hasOwn(d,a))return g[a]=1,d[a];if(v!==EMPTY_OBJ&&hasOwn(v,a))return g[a]=2,v[a];if((R=s.propsOptions[0])&&hasOwn(R,a))return g[a]=3,m[a];if(l!==EMPTY_OBJ&&hasOwn(l,a))return g[a]=4,l[a];shouldCacheAccess&&(g[a]=0)}}const C=publicPropertiesMap[a];let w,A;if(C)return a==="$attrs"&&track(s,"get",a),C(s);if((w=T.__cssModules)&&(w=w[a]))return w;if(l!==EMPTY_OBJ&&hasOwn(l,a))return g[a]=4,l[a];if(A=b.config.globalProperties,hasOwn(A,a))return A[a]},set({_:s},a,l){const{data:d,setupState:v,ctx:m}=s;return v!==EMPTY_OBJ&&hasOwn(v,a)?(v[a]=l,!0):d!==EMPTY_OBJ&&hasOwn(d,a)?(d[a]=l,!0):hasOwn(s.props,a)||a[0]==="$"&&a.slice(1)in s?!1:(m[a]=l,!0)},has({_:{data:s,setupState:a,accessCache:l,ctx:d,appContext:v,propsOptions:m}},g){let T;return!!l[g]||s!==EMPTY_OBJ&&hasOwn(s,g)||a!==EMPTY_OBJ&&hasOwn(a,g)||(T=m[0])&&hasOwn(T,g)||hasOwn(d,g)||hasOwn(publicPropertiesMap,g)||hasOwn(v.config.globalProperties,g)},defineProperty(s,a,l){return l.get!=null?s._.accessCache[a]=0:hasOwn(l,"value")&&this.set(s,a,l.value,null),Reflect.defineProperty(s,a,l)}};let shouldCacheAccess=!0;function applyOptions(s){const a=resolveMergedOptions(s),l=s.proxy,d=s.ctx;shouldCacheAccess=!1,a.beforeCreate&&callHook(a.beforeCreate,s,"bc");const{data:v,computed:m,methods:g,watch:T,provide:b,inject:R,created:C,beforeMount:w,mounted:A,beforeUpdate:S,updated:O,activated:L,deactivated:N,beforeDestroy:U,beforeUnmount:$,destroyed:G,unmounted:z,render:V,renderTracked:X,renderTriggered:ie,errorCaptured:re,serverPrefetch:J,expose:se,inheritAttrs:xe,components:Ae,directives:Ue,filters:ze}=a;if(R&&resolveInjections(R,d,null,s.appContext.config.unwrapInjectedRef),g)for(const Re in g){const Fe=g[Re];isFunction(Fe)&&(d[Re]=Fe.bind(l))}if(v){const Re=v.call(l,l);isObject(Re)&&(s.data=reactive(Re))}if(shouldCacheAccess=!0,m)for(const Re in m){const Fe=m[Re],He=isFunction(Fe)?Fe.bind(l,l):isFunction(Fe.get)?Fe.get.bind(l,l):NOOP,q=!isFunction(Fe)&&isFunction(Fe.set)?Fe.set.bind(l):NOOP,oe=computed({get:He,set:q});Object.defineProperty(d,Re,{enumerable:!0,configurable:!0,get:()=>oe.value,set:Te=>oe.value=Te})}if(T)for(const Re in T)createWatcher(T[Re],d,l,Re);if(b){const Re=isFunction(b)?b.call(l):b;Reflect.ownKeys(Re).forEach(Fe=>{provide(Fe,Re[Fe])})}C&&callHook(C,s,"c");function ye(Re,Fe){isArray$2(Fe)?Fe.forEach(He=>Re(He.bind(l))):Fe&&Re(Fe.bind(l))}if(ye(onBeforeMount,w),ye(onMounted,A),ye(onBeforeUpdate,S),ye(onUpdated,O),ye(onActivated,L),ye(onDeactivated,N),ye(onErrorCaptured,re),ye(onRenderTracked,X),ye(onRenderTriggered,ie),ye(onBeforeUnmount,$),ye(onUnmounted,z),ye(onServerPrefetch,J),isArray$2(se))if(se.length){const Re=s.exposed||(s.exposed={});se.forEach(Fe=>{Object.defineProperty(Re,Fe,{get:()=>l[Fe],set:He=>l[Fe]=He})})}else s.exposed||(s.exposed={});V&&s.render===NOOP&&(s.render=V),xe!=null&&(s.inheritAttrs=xe),Ae&&(s.components=Ae),Ue&&(s.directives=Ue)}function resolveInjections(s,a,l=NOOP,d=!1){isArray$2(s)&&(s=normalizeInject(s));for(const v in s){const m=s[v];let g;isObject(m)?"default"in m?g=inject(m.from||v,m.default,!0):g=inject(m.from||v):g=inject(m),isRef(g)&&d?Object.defineProperty(a,v,{enumerable:!0,configurable:!0,get:()=>g.value,set:T=>g.value=T}):a[v]=g}}function callHook(s,a,l){callWithAsyncErrorHandling(isArray$2(s)?s.map(d=>d.bind(a.proxy)):s.bind(a.proxy),a,l)}function createWatcher(s,a,l,d){const v=d.includes(".")?createPathGetter(l,d):()=>l[d];if(isString(s)){const m=a[s];isFunction(m)&&watch(v,m)}else if(isFunction(s))watch(v,s.bind(l));else if(isObject(s))if(isArray$2(s))s.forEach(m=>createWatcher(m,a,l,d));else{const m=isFunction(s.handler)?s.handler.bind(l):a[s.handler];isFunction(m)&&watch(v,m,s)}}function resolveMergedOptions(s){const a=s.type,{mixins:l,extends:d}=a,{mixins:v,optionsCache:m,config:{optionMergeStrategies:g}}=s.appContext,T=m.get(a);let b;return T?b=T:!v.length&&!l&&!d?b=a:(b={},v.length&&v.forEach(R=>mergeOptions$1(b,R,g,!0)),mergeOptions$1(b,a,g)),m.set(a,b),b}function mergeOptions$1(s,a,l,d=!1){const{mixins:v,extends:m}=a;m&&mergeOptions$1(s,m,l,!0),v&&v.forEach(g=>mergeOptions$1(s,g,l,!0));for(const g in a)if(!(d&&g==="expose")){const T=internalOptionMergeStrats[g]||l&&l[g];s[g]=T?T(s[g],a[g]):a[g]}return s}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(s,a){return a?s?function(){return extend(isFunction(s)?s.call(this,this):s,isFunction(a)?a.call(this,this):a)}:a:s}function mergeInject(s,a){return mergeObjectOptions(normalizeInject(s),normalizeInject(a))}function normalizeInject(s){if(isArray$2(s)){const a={};for(let l=0;l<s.length;l++)a[s[l]]=s[l];return a}return s}function mergeAsArray(s,a){return s?[...new Set([].concat(s,a))]:a}function mergeObjectOptions(s,a){return s?extend(extend(Object.create(null),s),a):a}function mergeWatchOptions(s,a){if(!s)return a;if(!a)return s;const l=extend(Object.create(null),s);for(const d in a)l[d]=mergeAsArray(s[d],a[d]);return l}function initProps(s,a,l,d=!1){const v={},m={};def(m,InternalObjectKey,1),s.propsDefaults=Object.create(null),setFullProps(s,a,v,m);for(const g in s.propsOptions[0])g in v||(v[g]=void 0);l?s.props=d?v:shallowReactive(v):s.type.props?s.props=v:s.props=m,s.attrs=m}function updateProps(s,a,l,d){const{props:v,attrs:m,vnode:{patchFlag:g}}=s,T=toRaw(v),[b]=s.propsOptions;let R=!1;if((d||g>0)&&!(g&16)){if(g&8){const C=s.vnode.dynamicProps;for(let w=0;w<C.length;w++){let A=C[w];if(isEmitListener(s.emitsOptions,A))continue;const S=a[A];if(b)if(hasOwn(m,A))S!==m[A]&&(m[A]=S,R=!0);else{const O=camelize(A);v[O]=resolvePropValue(b,T,O,S,s,!1)}else S!==m[A]&&(m[A]=S,R=!0)}}}else{setFullProps(s,a,v,m)&&(R=!0);let C;for(const w in T)(!a||!hasOwn(a,w)&&((C=hyphenate(w))===w||!hasOwn(a,C)))&&(b?l&&(l[w]!==void 0||l[C]!==void 0)&&(v[w]=resolvePropValue(b,T,w,void 0,s,!0)):delete v[w]);if(m!==T)for(const w in m)(!a||!hasOwn(a,w)&&!0)&&(delete m[w],R=!0)}R&&trigger(s,"set","$attrs")}function setFullProps(s,a,l,d){const[v,m]=s.propsOptions;let g=!1,T;if(a)for(let b in a){if(isReservedProp(b))continue;const R=a[b];let C;v&&hasOwn(v,C=camelize(b))?!m||!m.includes(C)?l[C]=R:(T||(T={}))[C]=R:isEmitListener(s.emitsOptions,b)||(!(b in d)||R!==d[b])&&(d[b]=R,g=!0)}if(m){const b=toRaw(l),R=T||EMPTY_OBJ;for(let C=0;C<m.length;C++){const w=m[C];l[w]=resolvePropValue(v,b,w,R[w],s,!hasOwn(R,w))}}return g}function resolvePropValue(s,a,l,d,v,m){const g=s[l];if(g!=null){const T=hasOwn(g,"default");if(T&&d===void 0){const b=g.default;if(g.type!==Function&&isFunction(b)){const{propsDefaults:R}=v;l in R?d=R[l]:(setCurrentInstance(v),d=R[l]=b.call(null,a),unsetCurrentInstance())}else d=b}g[0]&&(m&&!T?d=!1:g[1]&&(d===""||d===hyphenate(l))&&(d=!0))}return d}function normalizePropsOptions(s,a,l=!1){const d=a.propsCache,v=d.get(s);if(v)return v;const m=s.props,g={},T=[];let b=!1;if(!isFunction(s)){const C=w=>{b=!0;const[A,S]=normalizePropsOptions(w,a,!0);extend(g,A),S&&T.push(...S)};!l&&a.mixins.length&&a.mixins.forEach(C),s.extends&&C(s.extends),s.mixins&&s.mixins.forEach(C)}if(!m&&!b)return d.set(s,EMPTY_ARR),EMPTY_ARR;if(isArray$2(m))for(let C=0;C<m.length;C++){const w=camelize(m[C]);validatePropName(w)&&(g[w]=EMPTY_OBJ)}else if(m)for(const C in m){const w=camelize(C);if(validatePropName(w)){const A=m[C],S=g[w]=isArray$2(A)||isFunction(A)?{type:A}:A;if(S){const O=getTypeIndex(Boolean,S.type),L=getTypeIndex(String,S.type);S[0]=O>-1,S[1]=L<0||O<L,(O>-1||hasOwn(S,"default"))&&T.push(w)}}}const R=[g,T];return d.set(s,R),R}function validatePropName(s){return s[0]!=="$"}function getType(s){const a=s&&s.toString().match(/^\s*function (\w+)/);return a?a[1]:s===null?"null":""}function isSameType(s,a){return getType(s)===getType(a)}function getTypeIndex(s,a){return isArray$2(a)?a.findIndex(l=>isSameType(l,s)):isFunction(a)&&isSameType(a,s)?0:-1}const isInternalKey=s=>s[0]==="_"||s==="$stable",normalizeSlotValue=s=>isArray$2(s)?s.map(normalizeVNode):[normalizeVNode(s)],normalizeSlot$1=(s,a,l)=>{if(a._n)return a;const d=withCtx((...v)=>normalizeSlotValue(a(...v)),l);return d._c=!1,d},normalizeObjectSlots=(s,a,l)=>{const d=s._ctx;for(const v in s){if(isInternalKey(v))continue;const m=s[v];if(isFunction(m))a[v]=normalizeSlot$1(v,m,d);else if(m!=null){const g=normalizeSlotValue(m);a[v]=()=>g}}},normalizeVNodeSlots=(s,a)=>{const l=normalizeSlotValue(a);s.slots.default=()=>l},initSlots=(s,a)=>{if(s.vnode.shapeFlag&32){const l=a._;l?(s.slots=toRaw(a),def(a,"_",l)):normalizeObjectSlots(a,s.slots={})}else s.slots={},a&&normalizeVNodeSlots(s,a);def(s.slots,InternalObjectKey,1)},updateSlots=(s,a,l)=>{const{vnode:d,slots:v}=s;let m=!0,g=EMPTY_OBJ;if(d.shapeFlag&32){const T=a._;T?l&&T===1?m=!1:(extend(v,a),!l&&T===1&&delete v._):(m=!a.$stable,normalizeObjectSlots(a,v)),g=a}else a&&(normalizeVNodeSlots(s,a),g={default:1});if(m)for(const T in v)!isInternalKey(T)&&!(T in g)&&delete v[T]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(s,a){return function(d,v=null){isFunction(d)||(d=Object.assign({},d)),v!=null&&!isObject(v)&&(v=null);const m=createAppContext(),g=new Set;let T=!1;const b=m.app={_uid:uid$1++,_component:d,_props:v,_container:null,_context:m,_instance:null,version,get config(){return m.config},set config(R){},use(R,...C){return g.has(R)||(R&&isFunction(R.install)?(g.add(R),R.install(b,...C)):isFunction(R)&&(g.add(R),R(b,...C))),b},mixin(R){return m.mixins.includes(R)||m.mixins.push(R),b},component(R,C){return C?(m.components[R]=C,b):m.components[R]},directive(R,C){return C?(m.directives[R]=C,b):m.directives[R]},mount(R,C,w){if(!T){const A=createVNode(d,v);return A.appContext=m,C&&a?a(A,R):s(A,R,w),T=!0,b._container=R,R.__vue_app__=b,getExposeProxy(A.component)||A.component.proxy}},unmount(){T&&(s(null,b._container),delete b._container.__vue_app__)},provide(R,C){return m.provides[R]=C,b}};return b}}function setRef(s,a,l,d,v=!1){if(isArray$2(s)){s.forEach((A,S)=>setRef(A,a&&(isArray$2(a)?a[S]:a),l,d,v));return}if(isAsyncWrapper(d)&&!v)return;const m=d.shapeFlag&4?getExposeProxy(d.component)||d.component.proxy:d.el,g=v?null:m,{i:T,r:b}=s,R=a&&a.r,C=T.refs===EMPTY_OBJ?T.refs={}:T.refs,w=T.setupState;if(R!=null&&R!==b&&(isString(R)?(C[R]=null,hasOwn(w,R)&&(w[R]=null)):isRef(R)&&(R.value=null)),isFunction(b))callWithErrorHandling(b,T,12,[g,C]);else{const A=isString(b),S=isRef(b);if(A||S){const O=()=>{if(s.f){const L=A?C[b]:b.value;v?isArray$2(L)&&remove(L,m):isArray$2(L)?L.includes(m)||L.push(m):A?(C[b]=[m],hasOwn(w,b)&&(w[b]=C[b])):(b.value=[m],s.k&&(C[s.k]=b.value))}else A?(C[b]=g,hasOwn(w,b)&&(w[b]=g)):S&&(b.value=g,s.k&&(C[s.k]=g))};g?(O.id=-1,queuePostRenderEffect(O,l)):O()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(s){return baseCreateRenderer(s)}function baseCreateRenderer(s,a){const l=getGlobalThis();l.__VUE__=!0;const{insert:d,remove:v,patchProp:m,createElement:g,createText:T,createComment:b,setText:R,setElementText:C,parentNode:w,nextSibling:A,setScopeId:S=NOOP,cloneNode:O,insertStaticContent:L}=s,N=(D,H,K,Q=null,ne=null,me=null,be=!1,ve=null,_e=!!H.dynamicChildren)=>{if(D===H)return;D&&!isSameVNodeType(D,H)&&(Q=pe(D),we(D,ne,me,!0),D=null),H.patchFlag===-2&&(_e=!1,H.dynamicChildren=null);const{type:fe,ref:Ne,shapeFlag:Oe}=H;switch(fe){case Text$1:U(D,H,K,Q);break;case Comment:$(D,H,K,Q);break;case Static:D==null&&G(H,K,Q,be);break;case Fragment:Ue(D,H,K,Q,ne,me,be,ve,_e);break;default:Oe&1?X(D,H,K,Q,ne,me,be,ve,_e):Oe&6?ze(D,H,K,Q,ne,me,be,ve,_e):(Oe&64||Oe&128)&&fe.process(D,H,K,Q,ne,me,be,ve,_e,Me)}Ne!=null&&ne&&setRef(Ne,D&&D.ref,me,H||D,!H)},U=(D,H,K,Q)=>{if(D==null)d(H.el=T(H.children),K,Q);else{const ne=H.el=D.el;H.children!==D.children&&R(ne,H.children)}},$=(D,H,K,Q)=>{D==null?d(H.el=b(H.children||""),K,Q):H.el=D.el},G=(D,H,K,Q)=>{[D.el,D.anchor]=L(D.children,H,K,Q,D.el,D.anchor)},z=({el:D,anchor:H},K,Q)=>{let ne;for(;D&&D!==H;)ne=A(D),d(D,K,Q),D=ne;d(H,K,Q)},V=({el:D,anchor:H})=>{let K;for(;D&&D!==H;)K=A(D),v(D),D=K;v(H)},X=(D,H,K,Q,ne,me,be,ve,_e)=>{be=be||H.type==="svg",D==null?ie(H,K,Q,ne,me,be,ve,_e):se(D,H,ne,me,be,ve,_e)},ie=(D,H,K,Q,ne,me,be,ve)=>{let _e,fe;const{type:Ne,props:Oe,shapeFlag:Be,transition:Xe,patchFlag:qe,dirs:et}=D;if(D.el&&O!==void 0&&qe===-1)_e=D.el=O(D.el);else{if(_e=D.el=g(D.type,me,Oe&&Oe.is,Oe),Be&8?C(_e,D.children):Be&16&&J(D.children,_e,null,Q,ne,me&&Ne!=="foreignObject",be,ve),et&&invokeDirectiveHook(D,null,Q,"created"),Oe){for(const it in Oe)it!=="value"&&!isReservedProp(it)&&m(_e,it,null,Oe[it],me,D.children,Q,ne,ue);"value"in Oe&&m(_e,"value",null,Oe.value),(fe=Oe.onVnodeBeforeMount)&&invokeVNodeHook(fe,Q,D)}re(_e,D,D.scopeId,be,Q)}et&&invokeDirectiveHook(D,null,Q,"beforeMount");const tt=(!ne||ne&&!ne.pendingBranch)&&Xe&&!Xe.persisted;tt&&Xe.beforeEnter(_e),d(_e,H,K),((fe=Oe&&Oe.onVnodeMounted)||tt||et)&&queuePostRenderEffect(()=>{fe&&invokeVNodeHook(fe,Q,D),tt&&Xe.enter(_e),et&&invokeDirectiveHook(D,null,Q,"mounted")},ne)},re=(D,H,K,Q,ne)=>{if(K&&S(D,K),Q)for(let me=0;me<Q.length;me++)S(D,Q[me]);if(ne){let me=ne.subTree;if(H===me){const be=ne.vnode;re(D,be,be.scopeId,be.slotScopeIds,ne.parent)}}},J=(D,H,K,Q,ne,me,be,ve,_e=0)=>{for(let fe=_e;fe<D.length;fe++){const Ne=D[fe]=ve?cloneIfMounted(D[fe]):normalizeVNode(D[fe]);N(null,Ne,H,K,Q,ne,me,be,ve)}},se=(D,H,K,Q,ne,me,be)=>{const ve=H.el=D.el;let{patchFlag:_e,dynamicChildren:fe,dirs:Ne}=H;_e|=D.patchFlag&16;const Oe=D.props||EMPTY_OBJ,Be=H.props||EMPTY_OBJ;let Xe;K&&toggleRecurse(K,!1),(Xe=Be.onVnodeBeforeUpdate)&&invokeVNodeHook(Xe,K,H,D),Ne&&invokeDirectiveHook(H,D,K,"beforeUpdate"),K&&toggleRecurse(K,!0);const qe=ne&&H.type!=="foreignObject";if(fe?xe(D.dynamicChildren,fe,ve,K,Q,qe,me):be||He(D,H,ve,null,K,Q,qe,me,!1),_e>0){if(_e&16)Ae(ve,H,Oe,Be,K,Q,ne);else if(_e&2&&Oe.class!==Be.class&&m(ve,"class",null,Be.class,ne),_e&4&&m(ve,"style",Oe.style,Be.style,ne),_e&8){const et=H.dynamicProps;for(let tt=0;tt<et.length;tt++){const it=et[tt],xt=Oe[it],Kt=Be[it];(Kt!==xt||it==="value")&&m(ve,it,xt,Kt,ne,D.children,K,Q,ue)}}_e&1&&D.children!==H.children&&C(ve,H.children)}else!be&&fe==null&&Ae(ve,H,Oe,Be,K,Q,ne);((Xe=Be.onVnodeUpdated)||Ne)&&queuePostRenderEffect(()=>{Xe&&invokeVNodeHook(Xe,K,H,D),Ne&&invokeDirectiveHook(H,D,K,"updated")},Q)},xe=(D,H,K,Q,ne,me,be)=>{for(let ve=0;ve<H.length;ve++){const _e=D[ve],fe=H[ve],Ne=_e.el&&(_e.type===Fragment||!isSameVNodeType(_e,fe)||_e.shapeFlag&70)?w(_e.el):K;N(_e,fe,Ne,null,Q,ne,me,be,!0)}},Ae=(D,H,K,Q,ne,me,be)=>{if(K!==Q){for(const ve in Q){if(isReservedProp(ve))continue;const _e=Q[ve],fe=K[ve];_e!==fe&&ve!=="value"&&m(D,ve,fe,_e,be,H.children,ne,me,ue)}if(K!==EMPTY_OBJ)for(const ve in K)!isReservedProp(ve)&&!(ve in Q)&&m(D,ve,K[ve],null,be,H.children,ne,me,ue);"value"in Q&&m(D,"value",K.value,Q.value)}},Ue=(D,H,K,Q,ne,me,be,ve,_e)=>{const fe=H.el=D?D.el:T(""),Ne=H.anchor=D?D.anchor:T("");let{patchFlag:Oe,dynamicChildren:Be,slotScopeIds:Xe}=H;Xe&&(ve=ve?ve.concat(Xe):Xe),D==null?(d(fe,K,Q),d(Ne,K,Q),J(H.children,K,Ne,ne,me,be,ve,_e)):Oe>0&&Oe&64&&Be&&D.dynamicChildren?(xe(D.dynamicChildren,Be,K,ne,me,be,ve),(H.key!=null||ne&&H===ne.subTree)&&traverseStaticChildren(D,H,!0)):He(D,H,K,Ne,ne,me,be,ve,_e)},ze=(D,H,K,Q,ne,me,be,ve,_e)=>{H.slotScopeIds=ve,D==null?H.shapeFlag&512?ne.ctx.activate(H,K,Q,be,_e):Ce(H,K,Q,ne,me,be,_e):ye(D,H,_e)},Ce=(D,H,K,Q,ne,me,be)=>{const ve=D.component=createComponentInstance(D,Q,ne);if(isKeepAlive(D)&&(ve.ctx.renderer=Me),setupComponent(ve),ve.asyncDep){if(ne&&ne.registerDep(ve,Re),!D.el){const _e=ve.subTree=createVNode(Comment);$(null,_e,H,K)}return}Re(ve,D,H,K,ne,me,be)},ye=(D,H,K)=>{const Q=H.component=D.component;if(shouldUpdateComponent(D,H,K))if(Q.asyncDep&&!Q.asyncResolved){Fe(Q,H,K);return}else Q.next=H,invalidateJob(Q.update),Q.update();else H.el=D.el,Q.vnode=H},Re=(D,H,K,Q,ne,me,be)=>{const ve=()=>{if(D.isMounted){let{next:Ne,bu:Oe,u:Be,parent:Xe,vnode:qe}=D,et=Ne,tt;toggleRecurse(D,!1),Ne?(Ne.el=qe.el,Fe(D,Ne,be)):Ne=qe,Oe&&invokeArrayFns(Oe),(tt=Ne.props&&Ne.props.onVnodeBeforeUpdate)&&invokeVNodeHook(tt,Xe,Ne,qe),toggleRecurse(D,!0);const it=renderComponentRoot(D),xt=D.subTree;D.subTree=it,N(xt,it,w(xt.el),pe(xt),D,ne,me),Ne.el=it.el,et===null&&updateHOCHostEl(D,it.el),Be&&queuePostRenderEffect(Be,ne),(tt=Ne.props&&Ne.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(tt,Xe,Ne,qe),ne)}else{let Ne;const{el:Oe,props:Be}=H,{bm:Xe,m:qe,parent:et}=D,tt=isAsyncWrapper(H);if(toggleRecurse(D,!1),Xe&&invokeArrayFns(Xe),!tt&&(Ne=Be&&Be.onVnodeBeforeMount)&&invokeVNodeHook(Ne,et,H),toggleRecurse(D,!0),Oe&&Ee){const it=()=>{D.subTree=renderComponentRoot(D),Ee(Oe,D.subTree,D,ne,null)};tt?H.type.__asyncLoader().then(()=>!D.isUnmounted&&it()):it()}else{const it=D.subTree=renderComponentRoot(D);N(null,it,K,Q,D,ne,me),H.el=it.el}if(qe&&queuePostRenderEffect(qe,ne),!tt&&(Ne=Be&&Be.onVnodeMounted)){const it=H;queuePostRenderEffect(()=>invokeVNodeHook(Ne,et,it),ne)}(H.shapeFlag&256||et&&isAsyncWrapper(et.vnode)&&et.vnode.shapeFlag&256)&&D.a&&queuePostRenderEffect(D.a,ne),D.isMounted=!0,H=K=Q=null}},_e=D.effect=new ReactiveEffect(ve,()=>queueJob(fe),D.scope),fe=D.update=()=>_e.run();fe.id=D.uid,toggleRecurse(D,!0),fe()},Fe=(D,H,K)=>{H.component=D;const Q=D.vnode.props;D.vnode=H,D.next=null,updateProps(D,H.props,Q,K),updateSlots(D,H.children,K),pauseTracking(),flushPreFlushCbs(void 0,D.update),resetTracking()},He=(D,H,K,Q,ne,me,be,ve,_e=!1)=>{const fe=D&&D.children,Ne=D?D.shapeFlag:0,Oe=H.children,{patchFlag:Be,shapeFlag:Xe}=H;if(Be>0){if(Be&128){oe(fe,Oe,K,Q,ne,me,be,ve,_e);return}else if(Be&256){q(fe,Oe,K,Q,ne,me,be,ve,_e);return}}Xe&8?(Ne&16&&ue(fe,ne,me),Oe!==fe&&C(K,Oe)):Ne&16?Xe&16?oe(fe,Oe,K,Q,ne,me,be,ve,_e):ue(fe,ne,me,!0):(Ne&8&&C(K,""),Xe&16&&J(Oe,K,Q,ne,me,be,ve,_e))},q=(D,H,K,Q,ne,me,be,ve,_e)=>{D=D||EMPTY_ARR,H=H||EMPTY_ARR;const fe=D.length,Ne=H.length,Oe=Math.min(fe,Ne);let Be;for(Be=0;Be<Oe;Be++){const Xe=H[Be]=_e?cloneIfMounted(H[Be]):normalizeVNode(H[Be]);N(D[Be],Xe,K,null,ne,me,be,ve,_e)}fe>Ne?ue(D,ne,me,!0,!1,Oe):J(H,K,Q,ne,me,be,ve,_e,Oe)},oe=(D,H,K,Q,ne,me,be,ve,_e)=>{let fe=0;const Ne=H.length;let Oe=D.length-1,Be=Ne-1;for(;fe<=Oe&&fe<=Be;){const Xe=D[fe],qe=H[fe]=_e?cloneIfMounted(H[fe]):normalizeVNode(H[fe]);if(isSameVNodeType(Xe,qe))N(Xe,qe,K,null,ne,me,be,ve,_e);else break;fe++}for(;fe<=Oe&&fe<=Be;){const Xe=D[Oe],qe=H[Be]=_e?cloneIfMounted(H[Be]):normalizeVNode(H[Be]);if(isSameVNodeType(Xe,qe))N(Xe,qe,K,null,ne,me,be,ve,_e);else break;Oe--,Be--}if(fe>Oe){if(fe<=Be){const Xe=Be+1,qe=Xe<Ne?H[Xe].el:Q;for(;fe<=Be;)N(null,H[fe]=_e?cloneIfMounted(H[fe]):normalizeVNode(H[fe]),K,qe,ne,me,be,ve,_e),fe++}}else if(fe>Be)for(;fe<=Oe;)we(D[fe],ne,me,!0),fe++;else{const Xe=fe,qe=fe,et=new Map;for(fe=qe;fe<=Be;fe++){const mt=H[fe]=_e?cloneIfMounted(H[fe]):normalizeVNode(H[fe]);mt.key!=null&&et.set(mt.key,fe)}let tt,it=0;const xt=Be-qe+1;let Kt=!1,Ar=0;const er=new Array(xt);for(fe=0;fe<xt;fe++)er[fe]=0;for(fe=Xe;fe<=Oe;fe++){const mt=D[fe];if(it>=xt){we(mt,ne,me,!0);continue}let Ct;if(mt.key!=null)Ct=et.get(mt.key);else for(tt=qe;tt<=Be;tt++)if(er[tt-qe]===0&&isSameVNodeType(mt,H[tt])){Ct=tt;break}Ct===void 0?we(mt,ne,me,!0):(er[Ct-qe]=fe+1,Ct>=Ar?Ar=Ct:Kt=!0,N(mt,H[Ct],K,null,ne,me,be,ve,_e),it++)}const Pr=Kt?getSequence(er):EMPTY_ARR;for(tt=Pr.length-1,fe=xt-1;fe>=0;fe--){const mt=qe+fe,Ct=H[mt],on=mt+1<Ne?H[mt+1].el:Q;er[fe]===0?N(null,Ct,K,on,ne,me,be,ve,_e):Kt&&(tt<0||fe!==Pr[tt]?Te(Ct,K,on,2):tt--)}}},Te=(D,H,K,Q,ne=null)=>{const{el:me,type:be,transition:ve,children:_e,shapeFlag:fe}=D;if(fe&6){Te(D.component.subTree,H,K,Q);return}if(fe&128){D.suspense.move(H,K,Q);return}if(fe&64){be.move(D,H,K,Me);return}if(be===Fragment){d(me,H,K);for(let Oe=0;Oe<_e.length;Oe++)Te(_e[Oe],H,K,Q);d(D.anchor,H,K);return}if(be===Static){z(D,H,K);return}if(Q!==2&&fe&1&&ve)if(Q===0)ve.beforeEnter(me),d(me,H,K),queuePostRenderEffect(()=>ve.enter(me),ne);else{const{leave:Oe,delayLeave:Be,afterLeave:Xe}=ve,qe=()=>d(me,H,K),et=()=>{Oe(me,()=>{qe(),Xe&&Xe()})};Be?Be(me,qe,et):et()}else d(me,H,K)},we=(D,H,K,Q=!1,ne=!1)=>{const{type:me,props:be,ref:ve,children:_e,dynamicChildren:fe,shapeFlag:Ne,patchFlag:Oe,dirs:Be}=D;if(ve!=null&&setRef(ve,null,K,D,!0),Ne&256){H.ctx.deactivate(D);return}const Xe=Ne&1&&Be,qe=!isAsyncWrapper(D);let et;if(qe&&(et=be&&be.onVnodeBeforeUnmount)&&invokeVNodeHook(et,H,D),Ne&6)he(D.component,K,Q);else{if(Ne&128){D.suspense.unmount(K,Q);return}Xe&&invokeDirectiveHook(D,null,H,"beforeUnmount"),Ne&64?D.type.remove(D,H,K,ne,Me,Q):fe&&(me!==Fragment||Oe>0&&Oe&64)?ue(fe,H,K,!1,!0):(me===Fragment&&Oe&384||!ne&&Ne&16)&&ue(_e,H,K),Q&&De(D)}(qe&&(et=be&&be.onVnodeUnmounted)||Xe)&&queuePostRenderEffect(()=>{et&&invokeVNodeHook(et,H,D),Xe&&invokeDirectiveHook(D,null,H,"unmounted")},K)},De=D=>{const{type:H,el:K,anchor:Q,transition:ne}=D;if(H===Fragment){Z(K,Q);return}if(H===Static){V(D);return}const me=()=>{v(K),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(D.shapeFlag&1&&ne&&!ne.persisted){const{leave:be,delayLeave:ve}=ne,_e=()=>be(K,me);ve?ve(D.el,me,_e):_e()}else me()},Z=(D,H)=>{let K;for(;D!==H;)K=A(D),v(D),D=K;v(H)},he=(D,H,K)=>{const{bum:Q,scope:ne,update:me,subTree:be,um:ve}=D;Q&&invokeArrayFns(Q),ne.stop(),me&&(me.active=!1,we(be,D,H,K)),ve&&queuePostRenderEffect(ve,H),queuePostRenderEffect(()=>{D.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},ue=(D,H,K,Q=!1,ne=!1,me=0)=>{for(let be=me;be<D.length;be++)we(D[be],H,K,Q,ne)},pe=D=>D.shapeFlag&6?pe(D.component.subTree):D.shapeFlag&128?D.suspense.next():A(D.anchor||D.el),Pe=(D,H,K)=>{D==null?H._vnode&&we(H._vnode,null,null,!0):N(H._vnode||null,D,H,null,null,null,K),flushPostFlushCbs(),H._vnode=D},Me={p:N,um:we,m:Te,r:De,mt:Ce,mc:J,pc:He,pbc:xe,n:pe,o:s};let ge,Ee;return a&&([ge,Ee]=a(Me)),{render:Pe,hydrate:ge,createApp:createAppAPI(Pe,ge)}}function toggleRecurse({effect:s,update:a},l){s.allowRecurse=a.allowRecurse=l}function traverseStaticChildren(s,a,l=!1){const d=s.children,v=a.children;if(isArray$2(d)&&isArray$2(v))for(let m=0;m<d.length;m++){const g=d[m];let T=v[m];T.shapeFlag&1&&!T.dynamicChildren&&((T.patchFlag<=0||T.patchFlag===32)&&(T=v[m]=cloneIfMounted(v[m]),T.el=g.el),l||traverseStaticChildren(g,T))}}function getSequence(s){const a=s.slice(),l=[0];let d,v,m,g,T;const b=s.length;for(d=0;d<b;d++){const R=s[d];if(R!==0){if(v=l[l.length-1],s[v]<R){a[d]=v,l.push(d);continue}for(m=0,g=l.length-1;m<g;)T=m+g>>1,s[l[T]]<R?m=T+1:g=T;R<s[l[m]]&&(m>0&&(a[d]=l[m-1]),l[m]=d)}}for(m=l.length,g=l[m-1];m-- >0;)l[m]=g,g=a[g];return l}const isTeleport=s=>s.__isTeleport,Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(s=!1){blockStack.push(currentBlock=s?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(s){isBlockTreeEnabled+=s}function setupBlock(s){return s.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(s),s}function createElementBlock(s,a,l,d,v,m){return setupBlock(createBaseVNode(s,a,l,d,v,m,!0))}function createBlock(s,a,l,d,v){return setupBlock(createVNode(s,a,l,d,v,!0))}function isVNode(s){return s?s.__v_isVNode===!0:!1}function isSameVNodeType(s,a){return s.type===a.type&&s.key===a.key}const InternalObjectKey="__vInternal",normalizeKey=({key:s})=>s!=null?s:null,normalizeRef=({ref:s,ref_key:a,ref_for:l})=>s!=null?isString(s)||isRef(s)||isFunction(s)?{i:currentRenderingInstance,r:s,k:a,f:!!l}:s:null;function createBaseVNode(s,a=null,l=null,d=0,v=null,m=s===Fragment?0:1,g=!1,T=!1){const b={__v_isVNode:!0,__v_skip:!0,type:s,props:a,key:a&&normalizeKey(a),ref:a&&normalizeRef(a),scopeId:currentScopeId,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:d,dynamicProps:v,dynamicChildren:null,appContext:null};return T?(normalizeChildren(b,l),m&128&&s.normalize(b)):l&&(b.shapeFlag|=isString(l)?8:16),isBlockTreeEnabled>0&&!g&&currentBlock&&(b.patchFlag>0||m&6)&&b.patchFlag!==32&&currentBlock.push(b),b}const createVNode=_createVNode;function _createVNode(s,a=null,l=null,d=0,v=null,m=!1){if((!s||s===NULL_DYNAMIC_COMPONENT)&&(s=Comment),isVNode(s)){const T=cloneVNode(s,a,!0);return l&&normalizeChildren(T,l),isBlockTreeEnabled>0&&!m&&currentBlock&&(T.shapeFlag&6?currentBlock[currentBlock.indexOf(s)]=T:currentBlock.push(T)),T.patchFlag|=-2,T}if(isClassComponent(s)&&(s=s.__vccOpts),a){a=guardReactiveProps(a);let{class:T,style:b}=a;T&&!isString(T)&&(a.class=normalizeClass(T)),isObject(b)&&(isProxy(b)&&!isArray$2(b)&&(b=extend({},b)),a.style=normalizeStyle(b))}const g=isString(s)?1:isSuspense(s)?128:isTeleport(s)?64:isObject(s)?4:isFunction(s)?2:0;return createBaseVNode(s,a,l,d,v,g,m,!0)}function guardReactiveProps(s){return s?isProxy(s)||InternalObjectKey in s?extend({},s):s:null}function cloneVNode(s,a,l=!1){const{props:d,ref:v,patchFlag:m,children:g}=s,T=a?mergeProps(d||{},a):d;return{__v_isVNode:!0,__v_skip:!0,type:s.type,props:T,key:T&&normalizeKey(T),ref:a&&a.ref?l&&v?isArray$2(v)?v.concat(normalizeRef(a)):[v,normalizeRef(a)]:normalizeRef(a):v,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:g,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:a&&s.type!==Fragment?m===-1?16:m|16:m,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:s.transition,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&cloneVNode(s.ssContent),ssFallback:s.ssFallback&&cloneVNode(s.ssFallback),el:s.el,anchor:s.anchor}}function createTextVNode(s=" ",a=0){return createVNode(Text$1,null,s,a)}function normalizeVNode(s){return s==null||typeof s=="boolean"?createVNode(Comment):isArray$2(s)?createVNode(Fragment,null,s.slice()):typeof s=="object"?cloneIfMounted(s):createVNode(Text$1,null,String(s))}function cloneIfMounted(s){return s.el===null||s.memo?s:cloneVNode(s)}function normalizeChildren(s,a){let l=0;const{shapeFlag:d}=s;if(a==null)a=null;else if(isArray$2(a))l=16;else if(typeof a=="object")if(d&65){const v=a.default;v&&(v._c&&(v._d=!1),normalizeChildren(s,v()),v._c&&(v._d=!0));return}else{l=32;const v=a._;!v&&!(InternalObjectKey in a)?a._ctx=currentRenderingInstance:v===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?a._=1:(a._=2,s.patchFlag|=1024))}else isFunction(a)?(a={default:a,_ctx:currentRenderingInstance},l=32):(a=String(a),d&64?(l=16,a=[createTextVNode(a)]):l=8);s.children=a,s.shapeFlag|=l}function mergeProps(...s){const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const v in d)if(v==="class")a.class!==d.class&&(a.class=normalizeClass([a.class,d.class]));else if(v==="style")a.style=normalizeStyle([a.style,d.style]);else if(isOn(v)){const m=a[v],g=d[v];g&&m!==g&&!(isArray$2(m)&&m.includes(g))&&(a[v]=m?[].concat(m,g):g)}else v!==""&&(a[v]=d[v])}return a}function invokeVNodeHook(s,a,l,d=null){callWithAsyncErrorHandling(s,a,7,[l,d])}const emptyAppContext=createAppContext();let uid$1$1=0;function createComponentInstance(s,a,l){const d=s.type,v=(a?a.appContext:s.appContext)||emptyAppContext,m={uid:uid$1$1++,vnode:s,type:d,parent:a,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(v.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(d,v),emitsOptions:normalizeEmitsOptions(d,v),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:d.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=a?a.root:m,m.emit=emit$1.bind(null,m),s.ce&&s.ce(m),m}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=s=>{currentInstance=s,s.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(s){return s.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(s,a=!1){isInSSRComponentSetup=a;const{props:l,children:d}=s.vnode,v=isStatefulComponent(s);initProps(s,l,v,a),initSlots(s,d);const m=v?setupStatefulComponent(s,a):void 0;return isInSSRComponentSetup=!1,m}function setupStatefulComponent(s,a){const l=s.type;s.accessCache=Object.create(null),s.proxy=markRaw(new Proxy(s.ctx,PublicInstanceProxyHandlers));const{setup:d}=l;if(d){const v=s.setupContext=d.length>1?createSetupContext(s):null;setCurrentInstance(s),pauseTracking();const m=callWithErrorHandling(d,s,0,[s.props,v]);if(resetTracking(),unsetCurrentInstance(),isPromise(m)){if(m.then(unsetCurrentInstance,unsetCurrentInstance),a)return m.then(g=>{handleSetupResult(s,g,a)}).catch(g=>{handleError(g,s,0)});s.asyncDep=m}else handleSetupResult(s,m,a)}else finishComponentSetup(s,a)}function handleSetupResult(s,a,l){isFunction(a)?s.type.__ssrInlineRender?s.ssrRender=a:s.render=a:isObject(a)&&(s.setupState=proxyRefs(a)),finishComponentSetup(s,l)}let compile;function finishComponentSetup(s,a,l){const d=s.type;if(!s.render){if(!a&&compile&&!d.render){const v=d.template;if(v){const{isCustomElement:m,compilerOptions:g}=s.appContext.config,{delimiters:T,compilerOptions:b}=d,R=extend(extend({isCustomElement:m,delimiters:T},g),b);d.render=compile(v,R)}}s.render=d.render||NOOP}setCurrentInstance(s),pauseTracking(),applyOptions(s),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(s){return new Proxy(s.attrs,{get(a,l){return track(s,"get","$attrs"),a[l]}})}function createSetupContext(s){const a=d=>{s.exposed=d||{}};let l;return{get attrs(){return l||(l=createAttrsProxy(s))},slots:s.slots,emit:s.emit,expose:a}}function getExposeProxy(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(proxyRefs(markRaw(s.exposed)),{get(a,l){if(l in a)return a[l];if(l in publicPropertiesMap)return publicPropertiesMap[l](s)}}))}function getComponentName(s,a=!0){return isFunction(s)?s.displayName||s.name:s.name||a&&s.__name}function isClassComponent(s){return isFunction(s)&&"__vccOpts"in s}const computed=(s,a)=>computed$1(s,a,isInSSRComponentSetup);function h(s,a,l){const d=arguments.length;return d===2?isObject(a)&&!isArray$2(a)?isVNode(a)?createVNode(s,null,[a]):createVNode(s,a):createVNode(s,null,a):(d>3?l=Array.prototype.slice.call(arguments,2):d===3&&isVNode(l)&&(l=[l]),createVNode(s,a,l))}const version="3.2.37",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(s,a,l)=>{a.insertBefore(s,l||null)},remove:s=>{const a=s.parentNode;a&&a.removeChild(s)},createElement:(s,a,l,d)=>{const v=a?doc.createElementNS(svgNS,s):doc.createElement(s,l?{is:l}:void 0);return s==="select"&&d&&d.multiple!=null&&v.setAttribute("multiple",d.multiple),v},createText:s=>doc.createTextNode(s),createComment:s=>doc.createComment(s),setText:(s,a)=>{s.nodeValue=a},setElementText:(s,a)=>{s.textContent=a},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>doc.querySelector(s),setScopeId(s,a){s.setAttribute(a,"")},cloneNode(s){const a=s.cloneNode(!0);return"_value"in s&&(a._value=s._value),a},insertStaticContent(s,a,l,d,v,m){const g=l?l.previousSibling:a.lastChild;if(v&&(v===m||v.nextSibling))for(;a.insertBefore(v.cloneNode(!0),l),!(v===m||!(v=v.nextSibling)););else{templateContainer.innerHTML=d?`<svg>${s}</svg>`:s;const T=templateContainer.content;if(d){const b=T.firstChild;for(;b.firstChild;)T.appendChild(b.firstChild);T.removeChild(b)}a.insertBefore(T,l)}return[g?g.nextSibling:a.firstChild,l?l.previousSibling:a.lastChild]}};function patchClass(s,a,l){const d=s._vtc;d&&(a=(a?[a,...d]:[...d]).join(" ")),a==null?s.removeAttribute("class"):l?s.setAttribute("class",a):s.className=a}function patchStyle(s,a,l){const d=s.style,v=isString(l);if(l&&!v){for(const m in l)setStyle(d,m,l[m]);if(a&&!isString(a))for(const m in a)l[m]==null&&setStyle(d,m,"")}else{const m=d.display;v?a!==l&&(d.cssText=l):a&&s.removeAttribute("style"),"_vod"in s&&(d.display=m)}}const importantRE=/\s*!important$/;function setStyle(s,a,l){if(isArray$2(l))l.forEach(d=>setStyle(s,a,d));else if(l==null&&(l=""),a.startsWith("--"))s.setProperty(a,l);else{const d=autoPrefix(s,a);importantRE.test(l)?s.setProperty(hyphenate(d),l.replace(importantRE,""),"important"):s[d]=l}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(s,a){const l=prefixCache[a];if(l)return l;let d=camelize(a);if(d!=="filter"&&d in s)return prefixCache[a]=d;d=capitalize(d);for(let v=0;v<prefixes.length;v++){const m=prefixes[v]+d;if(m in s)return prefixCache[a]=m}return a}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(s,a,l,d,v){if(d&&a.startsWith("xlink:"))l==null?s.removeAttributeNS(xlinkNS,a.slice(6,a.length)):s.setAttributeNS(xlinkNS,a,l);else{const m=isSpecialBooleanAttr(a);l==null||m&&!includeBooleanAttr(l)?s.removeAttribute(a):s.setAttribute(a,m?"":l)}}function patchDOMProp(s,a,l,d,v,m,g){if(a==="innerHTML"||a==="textContent"){d&&g(d,v,m),s[a]=l==null?"":l;return}if(a==="value"&&s.tagName!=="PROGRESS"&&!s.tagName.includes("-")){s._value=l;const b=l==null?"":l;(s.value!==b||s.tagName==="OPTION")&&(s.value=b),l==null&&s.removeAttribute(a);return}let T=!1;if(l===""||l==null){const b=typeof s[a];b==="boolean"?l=includeBooleanAttr(l):l==null&&b==="string"?(l="",T=!0):b==="number"&&(l=0,T=!0)}try{s[a]=l}catch{}T&&s.removeAttribute(a)}const[_getNow,skipTimestampCheck]=(()=>{let s=Date.now,a=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(s=performance.now.bind(performance));const l=navigator.userAgent.match(/firefox\/(\d+)/i);a=!!(l&&Number(l[1])<=53)}return[s,a]})();let cachedNow=0;const p$1=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$1.then(reset),cachedNow=_getNow());function addEventListener(s,a,l,d){s.addEventListener(a,l,d)}function removeEventListener(s,a,l,d){s.removeEventListener(a,l,d)}function patchEvent(s,a,l,d,v=null){const m=s._vei||(s._vei={}),g=m[a];if(d&&g)g.value=d;else{const[T,b]=parseName(a);if(d){const R=m[a]=createInvoker(d,v);addEventListener(s,T,R,b)}else g&&(removeEventListener(s,T,g,b),m[a]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(s){let a;if(optionsModifierRE.test(s)){a={};let l;for(;l=s.match(optionsModifierRE);)s=s.slice(0,s.length-l[0].length),a[l[0].toLowerCase()]=!0}return[hyphenate(s.slice(2)),a]}function createInvoker(s,a){const l=d=>{const v=d.timeStamp||_getNow();(skipTimestampCheck||v>=l.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(d,l.value),a,5,[d])};return l.value=s,l.attached=getNow(),l}function patchStopImmediatePropagation(s,a){if(isArray$2(a)){const l=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{l.call(s),s._stopped=!0},a.map(d=>v=>!v._stopped&&d&&d(v))}else return a}const nativeOnRE=/^on[a-z]/,patchProp=(s,a,l,d,v=!1,m,g,T,b)=>{a==="class"?patchClass(s,d,v):a==="style"?patchStyle(s,l,d):isOn(a)?isModelListener(a)||patchEvent(s,a,l,d,g):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):shouldSetAsProp(s,a,d,v))?patchDOMProp(s,a,d,m,g,T,b):(a==="true-value"?s._trueValue=d:a==="false-value"&&(s._falseValue=d),patchAttr(s,a,d,v))};function shouldSetAsProp(s,a,l,d){return d?!!(a==="innerHTML"||a==="textContent"||a in s&&nativeOnRE.test(a)&&isFunction(l)):a==="spellcheck"||a==="draggable"||a==="translate"||a==="form"||a==="list"&&s.tagName==="INPUT"||a==="type"&&s.tagName==="TEXTAREA"||nativeOnRE.test(a)&&isString(l)?!1:a in s}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const getModelAssigner=s=>{const a=s.props["onUpdate:modelValue"]||!1;return isArray$2(a)?l=>invokeArrayFns(a,l):a},vModelSelect={deep:!0,created(s,{value:a,modifiers:{number:l}},d){const v=isSet(a);addEventListener(s,"change",()=>{const m=Array.prototype.filter.call(s.options,g=>g.selected).map(g=>l?toNumber(getValue(g)):getValue(g));s._assign(s.multiple?v?new Set(m):m:m[0])}),s._assign=getModelAssigner(d)},mounted(s,{value:a}){setSelected(s,a)},beforeUpdate(s,a,l){s._assign=getModelAssigner(l)},updated(s,{value:a}){setSelected(s,a)}};function setSelected(s,a){const l=s.multiple;if(!(l&&!isArray$2(a)&&!isSet(a))){for(let d=0,v=s.options.length;d<v;d++){const m=s.options[d],g=getValue(m);if(l)isArray$2(a)?m.selected=looseIndexOf(a,g)>-1:m.selected=a.has(g);else if(looseEqual(getValue(m),a)){s.selectedIndex!==d&&(s.selectedIndex=d);return}}!l&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function getValue(s){return"_value"in s?s._value:s.value}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...s)=>{const a=ensureRenderer().createApp(...s),{mount:l}=a;return a.mount=d=>{const v=normalizeContainer(d);if(!v)return;const m=a._component;!isFunction(m)&&!m.render&&!m.template&&(m.template=v.innerHTML),v.innerHTML="";const g=l(v,!1,v instanceof SVGElement);return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),g},a};function normalizeContainer(s){return isString(s)?document.querySelector(s):s}/*!
  * vue-router v4.1.2
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(s){return s.__esModule||s[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(s,a){const l={};for(const d in a){const v=a[d];l[d]=isArray$1(v)?v.map(s):s(v)}return l}const noop$1=()=>{},isArray$1=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=s=>s.replace(TRAILING_SLASH_RE,"");function parseURL(s,a,l="/"){let d,v={},m="",g="";const T=a.indexOf("#");let b=a.indexOf("?");return T<b&&T>=0&&(b=-1),b>-1&&(d=a.slice(0,b),m=a.slice(b+1,T>-1?T:a.length),v=s(m)),T>-1&&(d=d||a.slice(0,T),g=a.slice(T,a.length)),d=resolveRelativePath(d!=null?d:a,l),{fullPath:d+(m&&"?")+m+g,path:d,query:v,hash:g}}function stringifyURL(s,a){const l=a.query?s(a.query):"";return a.path+(l&&"?")+l+(a.hash||"")}function stripBase(s,a){return!a||!s.toLowerCase().startsWith(a.toLowerCase())?s:s.slice(a.length)||"/"}function isSameRouteLocation(s,a,l){const d=a.matched.length-1,v=l.matched.length-1;return d>-1&&d===v&&isSameRouteRecord(a.matched[d],l.matched[v])&&isSameRouteLocationParams(a.params,l.params)&&s(a.query)===s(l.query)&&a.hash===l.hash}function isSameRouteRecord(s,a){return(s.aliasOf||s)===(a.aliasOf||a)}function isSameRouteLocationParams(s,a){if(Object.keys(s).length!==Object.keys(a).length)return!1;for(const l in s)if(!isSameRouteLocationParamsValue(s[l],a[l]))return!1;return!0}function isSameRouteLocationParamsValue(s,a){return isArray$1(s)?isEquivalentArray(s,a):isArray$1(a)?isEquivalentArray(a,s):s===a}function isEquivalentArray(s,a){return isArray$1(a)?s.length===a.length&&s.every((l,d)=>l===a[d]):s.length===1&&s[0]===a}function resolveRelativePath(s,a){if(s.startsWith("/"))return s;if(!s)return a;const l=a.split("/"),d=s.split("/");let v=l.length-1,m,g;for(m=0;m<d.length;m++)if(g=d[m],g!==".")if(g==="..")v>1&&v--;else break;return l.slice(0,v).join("/")+"/"+d.slice(m-(m===d.length?1:0)).join("/")}var NavigationType;(function(s){s.pop="pop",s.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(s){s.back="back",s.forward="forward",s.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(s){if(!s)if(isBrowser){const a=document.querySelector("base");s=a&&a.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),removeTrailingSlash(s)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(s,a){return s.replace(BEFORE_HASH_RE,"#")+a}function getElementPosition(s,a){const l=document.documentElement.getBoundingClientRect(),d=s.getBoundingClientRect();return{behavior:a.behavior,left:d.left-l.left-(a.left||0),top:d.top-l.top-(a.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(s){let a;if("el"in s){const l=s.el,d=typeof l=="string"&&l.startsWith("#"),v=typeof l=="string"?d?document.getElementById(l.slice(1)):document.querySelector(l):l;if(!v)return;a=getElementPosition(v,s)}else a=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(a):window.scrollTo(a.left!=null?a.left:window.pageXOffset,a.top!=null?a.top:window.pageYOffset)}function getScrollKey(s,a){return(history.state?history.state.position-a:-1)+s}const scrollPositions=new Map;function saveScrollPosition(s,a){scrollPositions.set(s,a)}function getSavedScrollPosition(s){const a=scrollPositions.get(s);return scrollPositions.delete(s),a}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(s,a){const{pathname:l,search:d,hash:v}=a,m=s.indexOf("#");if(m>-1){let T=v.includes(s.slice(m))?s.slice(m).length:1,b=v.slice(T);return b[0]!=="/"&&(b="/"+b),stripBase(b,"")}return stripBase(l,s)+d+v}function useHistoryListeners(s,a,l,d){let v=[],m=[],g=null;const T=({state:A})=>{const S=createCurrentLocation(s,location),O=l.value,L=a.value;let N=0;if(A){if(l.value=S,a.value=A,g&&g===O){g=null;return}N=L?A.position-L.position:0}else d(S);v.forEach(U=>{U(l.value,O,{delta:N,type:NavigationType.pop,direction:N?N>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function b(){g=l.value}function R(A){v.push(A);const S=()=>{const O=v.indexOf(A);O>-1&&v.splice(O,1)};return m.push(S),S}function C(){const{history:A}=window;!A.state||A.replaceState(assign({},A.state,{scroll:computeScrollPosition()}),"")}function w(){for(const A of m)A();m=[],window.removeEventListener("popstate",T),window.removeEventListener("beforeunload",C)}return window.addEventListener("popstate",T),window.addEventListener("beforeunload",C),{pauseListeners:b,listen:R,destroy:w}}function buildState(s,a,l,d=!1,v=!1){return{back:s,current:a,forward:l,replaced:d,position:window.history.length,scroll:v?computeScrollPosition():null}}function useHistoryStateNavigation(s){const{history:a,location:l}=window,d={value:createCurrentLocation(s,l)},v={value:a.state};v.value||m(d.value,{back:null,current:d.value,forward:null,position:a.length-1,replaced:!0,scroll:null},!0);function m(b,R,C){const w=s.indexOf("#"),A=w>-1?(l.host&&document.querySelector("base")?s:s.slice(w))+b:createBaseLocation()+s+b;try{a[C?"replaceState":"pushState"](R,"",A),v.value=R}catch(S){console.error(S),l[C?"replace":"assign"](A)}}function g(b,R){const C=assign({},a.state,buildState(v.value.back,b,v.value.forward,!0),R,{position:v.value.position});m(b,C,!0),d.value=b}function T(b,R){const C=assign({},v.value,a.state,{forward:b,scroll:computeScrollPosition()});m(C.current,C,!0);const w=assign({},buildState(d.value,b,null),{position:C.position+1},R);m(b,w,!1),d.value=b}return{location:d,state:v,push:T,replace:g}}function createWebHistory(s){s=normalizeBase(s);const a=useHistoryStateNavigation(s),l=useHistoryListeners(s,a.state,a.location,a.replace);function d(m,g=!0){g||l.pauseListeners(),history.go(m)}const v=assign({location:"",base:s,go:d,createHref:createHref.bind(null,s)},a,l);return Object.defineProperty(v,"location",{enumerable:!0,get:()=>a.location.value}),Object.defineProperty(v,"state",{enumerable:!0,get:()=>a.state.value}),v}function createWebHashHistory(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),createWebHistory(s)}function isRouteLocation(s){return typeof s=="string"||s&&typeof s=="object"}function isRouteName(s){return typeof s=="string"||typeof s=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(s,a){return assign(new Error,{type:s,[NavigationFailureSymbol]:!0},a)}function isNavigationFailure(s,a){return s instanceof Error&&NavigationFailureSymbol in s&&(a==null||!!(s.type&a))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(s,a){const l=assign({},BASE_PATH_PARSER_OPTIONS,a),d=[];let v=l.start?"^":"";const m=[];for(const R of s){const C=R.length?[]:[90];l.strict&&!R.length&&(v+="/");for(let w=0;w<R.length;w++){const A=R[w];let S=40+(l.sensitive?.25:0);if(A.type===0)w||(v+="/"),v+=A.value.replace(REGEX_CHARS_RE,"\\$&"),S+=40;else if(A.type===1){const{value:O,repeatable:L,optional:N,regexp:U}=A;m.push({name:O,repeatable:L,optional:N});const $=U||BASE_PARAM_PATTERN;if($!==BASE_PARAM_PATTERN){S+=10;try{new RegExp(`(${$})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${O}" (${$}): `+z.message)}}let G=L?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;w||(G=N&&R.length<2?`(?:/${G})`:"/"+G),N&&(G+="?"),v+=G,S+=20,N&&(S+=-8),L&&(S+=-20),$===".*"&&(S+=-50)}C.push(S)}d.push(C)}if(l.strict&&l.end){const R=d.length-1;d[R][d[R].length-1]+=.7000000000000001}l.strict||(v+="/?"),l.end?v+="$":l.strict&&(v+="(?:/|$)");const g=new RegExp(v,l.sensitive?"":"i");function T(R){const C=R.match(g),w={};if(!C)return null;for(let A=1;A<C.length;A++){const S=C[A]||"",O=m[A-1];w[O.name]=S&&O.repeatable?S.split("/"):S}return w}function b(R){let C="",w=!1;for(const A of s){(!w||!C.endsWith("/"))&&(C+="/"),w=!1;for(const S of A)if(S.type===0)C+=S.value;else if(S.type===1){const{value:O,repeatable:L,optional:N}=S,U=O in R?R[O]:"";if(isArray$1(U)&&!L)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const $=isArray$1(U)?U.join("/"):U;if(!$)if(N)A.length<2&&s.length>1&&(C.endsWith("/")?C=C.slice(0,-1):w=!0);else throw new Error(`Missing required param "${O}"`);C+=$}}return C}return{re:g,score:d,keys:m,parse:T,stringify:b}}function compareScoreArray(s,a){let l=0;for(;l<s.length&&l<a.length;){const d=a[l]-s[l];if(d)return d;l++}return s.length<a.length?s.length===1&&s[0]===40+40?-1:1:s.length>a.length?a.length===1&&a[0]===40+40?1:-1:0}function comparePathParserScore(s,a){let l=0;const d=s.score,v=a.score;for(;l<d.length&&l<v.length;){const m=compareScoreArray(d[l],v[l]);if(m)return m;l++}if(Math.abs(v.length-d.length)===1){if(isLastScoreNegative(d))return 1;if(isLastScoreNegative(v))return-1}return v.length-d.length}function isLastScoreNegative(s){const a=s[s.length-1];return s.length>0&&a[a.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(s){if(!s)return[[]];if(s==="/")return[[ROOT_TOKEN]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function a(S){throw new Error(`ERR (${l})/"${R}": ${S}`)}let l=0,d=l;const v=[];let m;function g(){m&&v.push(m),m=[]}let T=0,b,R="",C="";function w(){!R||(l===0?m.push({type:0,value:R}):l===1||l===2||l===3?(m.length>1&&(b==="*"||b==="+")&&a(`A repeatable param (${R}) must be alone in its segment. eg: '/:ids+.`),m.push({type:1,value:R,regexp:C,repeatable:b==="*"||b==="+",optional:b==="*"||b==="?"})):a("Invalid state to consume buffer"),R="")}function A(){R+=b}for(;T<s.length;){if(b=s[T++],b==="\\"&&l!==2){d=l,l=4;continue}switch(l){case 0:b==="/"?(R&&w(),g()):b===":"?(w(),l=1):A();break;case 4:A(),l=d;break;case 1:b==="("?l=2:VALID_PARAM_RE.test(b)?A():(w(),l=0,b!=="*"&&b!=="?"&&b!=="+"&&T--);break;case 2:b===")"?C[C.length-1]=="\\"?C=C.slice(0,-1)+b:l=3:C+=b;break;case 3:w(),l=0,b!=="*"&&b!=="?"&&b!=="+"&&T--,C="";break;default:a("Unknown state");break}}return l===2&&a(`Unfinished custom RegExp for param "${R}"`),w(),g(),v}function createRouteRecordMatcher(s,a,l){const d=tokensToParser(tokenizePath(s.path),l),v=assign(d,{record:s,parent:a,children:[],alias:[]});return a&&!v.record.aliasOf==!a.record.aliasOf&&a.children.push(v),v}function createRouterMatcher(s,a){const l=[],d=new Map;a=mergeOptions({strict:!1,end:!0,sensitive:!1},a);function v(C){return d.get(C)}function m(C,w,A){const S=!A,O=normalizeRouteRecord(C);O.aliasOf=A&&A.record;const L=mergeOptions(a,C),N=[O];if("alias"in C){const G=typeof C.alias=="string"?[C.alias]:C.alias;for(const z of G)N.push(assign({},O,{components:A?A.record.components:O.components,path:z,aliasOf:A?A.record:O}))}let U,$;for(const G of N){const{path:z}=G;if(w&&z[0]!=="/"){const V=w.record.path,X=V[V.length-1]==="/"?"":"/";G.path=w.record.path+(z&&X+z)}if(U=createRouteRecordMatcher(G,w,L),A?A.alias.push(U):($=$||U,$!==U&&$.alias.push(U),S&&C.name&&!isAliasRecord(U)&&g(C.name)),O.children){const V=O.children;for(let X=0;X<V.length;X++)m(V[X],U,A&&A.children[X])}A=A||U,b(U)}return $?()=>{g($)}:noop$1}function g(C){if(isRouteName(C)){const w=d.get(C);w&&(d.delete(C),l.splice(l.indexOf(w),1),w.children.forEach(g),w.alias.forEach(g))}else{const w=l.indexOf(C);w>-1&&(l.splice(w,1),C.record.name&&d.delete(C.record.name),C.children.forEach(g),C.alias.forEach(g))}}function T(){return l}function b(C){let w=0;for(;w<l.length&&comparePathParserScore(C,l[w])>=0&&(C.record.path!==l[w].record.path||!isRecordChildOf(C,l[w]));)w++;l.splice(w,0,C),C.record.name&&!isAliasRecord(C)&&d.set(C.record.name,C)}function R(C,w){let A,S={},O,L;if("name"in C&&C.name){if(A=d.get(C.name),!A)throw createRouterError(1,{location:C});L=A.record.name,S=assign(paramsFromLocation(w.params,A.keys.filter($=>!$.optional).map($=>$.name)),C.params),O=A.stringify(S)}else if("path"in C)O=C.path,A=l.find($=>$.re.test(O)),A&&(S=A.parse(O),L=A.record.name);else{if(A=w.name?d.get(w.name):l.find($=>$.re.test(w.path)),!A)throw createRouterError(1,{location:C,currentLocation:w});L=A.record.name,S=assign({},w.params,C.params),O=A.stringify(S)}const N=[];let U=A;for(;U;)N.unshift(U.record),U=U.parent;return{name:L,path:O,params:S,matched:N,meta:mergeMetaFields(N)}}return s.forEach(C=>m(C)),{addRoute:m,resolve:R,removeRoute:g,getRoutes:T,getRecordMatcher:v}}function paramsFromLocation(s,a){const l={};for(const d of a)d in s&&(l[d]=s[d]);return l}function normalizeRouteRecord(s){return{path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:void 0,beforeEnter:s.beforeEnter,props:normalizeRecordProps(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}}}function normalizeRecordProps(s){const a={},l=s.props||!1;if("component"in s)a.default=l;else for(const d in s.components)a[d]=typeof l=="boolean"?l:l[d];return a}function isAliasRecord(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function mergeMetaFields(s){return s.reduce((a,l)=>assign(a,l.meta),{})}function mergeOptions(s,a){const l={};for(const d in s)l[d]=d in a?a[d]:s[d];return l}function isRecordChildOf(s,a){return a.children.some(l=>l===s||isRecordChildOf(s,l))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(s){return encodeURI(""+s).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(s){return commonEncode(s).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(s){return commonEncode(s).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(s){return encodeQueryValue(s).replace(EQUAL_RE,"%3D")}function encodePath(s){return commonEncode(s).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(s){return s==null?"":encodePath(s).replace(SLASH_RE,"%2F")}function decode$2(s){try{return decodeURIComponent(""+s)}catch{}return""+s}function parseQuery(s){const a={};if(s===""||s==="?")return a;const d=(s[0]==="?"?s.slice(1):s).split("&");for(let v=0;v<d.length;++v){const m=d[v].replace(PLUS_RE," "),g=m.indexOf("="),T=decode$2(g<0?m:m.slice(0,g)),b=g<0?null:decode$2(m.slice(g+1));if(T in a){let R=a[T];isArray$1(R)||(R=a[T]=[R]),R.push(b)}else a[T]=b}return a}function stringifyQuery(s){let a="";for(let l in s){const d=s[l];if(l=encodeQueryKey(l),d==null){d!==void 0&&(a+=(a.length?"&":"")+l);continue}(isArray$1(d)?d.map(m=>m&&encodeQueryValue(m)):[d&&encodeQueryValue(d)]).forEach(m=>{m!==void 0&&(a+=(a.length?"&":"")+l,m!=null&&(a+="="+m))})}return a}function normalizeQuery(s){const a={};for(const l in s){const d=s[l];d!==void 0&&(a[l]=isArray$1(d)?d.map(v=>v==null?null:""+v):d==null?d:""+d)}return a}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let s=[];function a(d){return s.push(d),()=>{const v=s.indexOf(d);v>-1&&s.splice(v,1)}}function l(){s=[]}return{add:a,list:()=>s,reset:l}}function guardToPromiseFn(s,a,l,d,v){const m=d&&(d.enterCallbacks[v]=d.enterCallbacks[v]||[]);return()=>new Promise((g,T)=>{const b=w=>{w===!1?T(createRouterError(4,{from:l,to:a})):w instanceof Error?T(w):isRouteLocation(w)?T(createRouterError(2,{from:a,to:w})):(m&&d.enterCallbacks[v]===m&&typeof w=="function"&&m.push(w),g())},R=s.call(d&&d.instances[v],a,l,b);let C=Promise.resolve(R);s.length<3&&(C=C.then(b)),C.catch(w=>T(w))})}function extractComponentsGuards(s,a,l,d){const v=[];for(const m of s)for(const g in m.components){let T=m.components[g];if(!(a!=="beforeRouteEnter"&&!m.instances[g]))if(isRouteComponent(T)){const R=(T.__vccOpts||T)[a];R&&v.push(guardToPromiseFn(R,l,d,m,g))}else{let b=T();v.push(()=>b.then(R=>{if(!R)return Promise.reject(new Error(`Couldn't resolve component "${g}" at "${m.path}"`));const C=isESModule(R)?R.default:R;m.components[g]=C;const A=(C.__vccOpts||C)[a];return A&&guardToPromiseFn(A,l,d,m,g)()}))}}return v}function isRouteComponent(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function useLink(s){const a=inject(routerKey),l=inject(routeLocationKey),d=computed(()=>a.resolve(unref(s.to))),v=computed(()=>{const{matched:b}=d.value,{length:R}=b,C=b[R-1],w=l.matched;if(!C||!w.length)return-1;const A=w.findIndex(isSameRouteRecord.bind(null,C));if(A>-1)return A;const S=getOriginalPath(b[R-2]);return R>1&&getOriginalPath(C)===S&&w[w.length-1].path!==S?w.findIndex(isSameRouteRecord.bind(null,b[R-2])):A}),m=computed(()=>v.value>-1&&includesParams(l.params,d.value.params)),g=computed(()=>v.value>-1&&v.value===l.matched.length-1&&isSameRouteLocationParams(l.params,d.value.params));function T(b={}){return guardEvent(b)?a[unref(s.replace)?"replace":"push"](unref(s.to)).catch(noop$1):Promise.resolve()}return{route:d,href:computed(()=>d.value.href),isActive:m,isExactActive:g,navigate:T}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(s,{slots:a}){const l=reactive(useLink(s)),{options:d}=inject(routerKey),v=computed(()=>({[getLinkClass(s.activeClass,d.linkActiveClass,"router-link-active")]:l.isActive,[getLinkClass(s.exactActiveClass,d.linkExactActiveClass,"router-link-exact-active")]:l.isExactActive}));return()=>{const m=a.default&&a.default(l);return s.custom?m:h("a",{"aria-current":l.isExactActive?s.ariaCurrentValue:null,href:l.href,onClick:l.navigate,class:v.value},m)}}}),RouterLink=RouterLinkImpl;function guardEvent(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const a=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(a))return}return s.preventDefault&&s.preventDefault(),!0}}function includesParams(s,a){for(const l in a){const d=a[l],v=s[l];if(typeof d=="string"){if(d!==v)return!1}else if(!isArray$1(v)||v.length!==d.length||d.some((m,g)=>m!==v[g]))return!1}return!0}function getOriginalPath(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const getLinkClass=(s,a,l)=>s!=null?s:a!=null?a:l,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:a,slots:l}){const d=inject(routerViewLocationKey),v=computed(()=>s.route||d.value),m=inject(viewDepthKey,0),g=computed(()=>{let R=unref(m);const{matched:C}=v.value;let w;for(;(w=C[R])&&!w.components;)R++;return R}),T=computed(()=>v.value.matched[g.value]);provide(viewDepthKey,computed(()=>g.value+1)),provide(matchedRouteKey,T),provide(routerViewLocationKey,v);const b=ref();return watch(()=>[b.value,T.value,s.name],([R,C,w],[A,S,O])=>{C&&(C.instances[w]=R,S&&S!==C&&R&&R===A&&(C.leaveGuards.size||(C.leaveGuards=S.leaveGuards),C.updateGuards.size||(C.updateGuards=S.updateGuards))),R&&C&&(!S||!isSameRouteRecord(C,S)||!A)&&(C.enterCallbacks[w]||[]).forEach(L=>L(R))},{flush:"post"}),()=>{const R=v.value,C=T.value,w=C&&C.components[s.name],A=s.name;if(!w)return normalizeSlot(l.default,{Component:w,route:R});const S=C.props[s.name],O=S?S===!0?R.params:typeof S=="function"?S(R):S:null,N=h(w,assign({},O,a,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(C.instances[A]=null)},ref:b}));return normalizeSlot(l.default,{Component:N,route:R})||N}}});function normalizeSlot(s,a){if(!s)return null;const l=s(a);return l.length===1?l[0]:l}const RouterView=RouterViewImpl;function createRouter(s){const a=createRouterMatcher(s.routes,s),l=s.parseQuery||parseQuery,d=s.stringifyQuery||stringifyQuery,v=s.history,m=useCallbacks(),g=useCallbacks(),T=useCallbacks(),b=shallowRef(START_LOCATION_NORMALIZED);let R=START_LOCATION_NORMALIZED;isBrowser&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const C=applyToParams.bind(null,Z=>""+Z),w=applyToParams.bind(null,encodeParam),A=applyToParams.bind(null,decode$2);function S(Z,he){let ue,pe;return isRouteName(Z)?(ue=a.getRecordMatcher(Z),pe=he):pe=Z,a.addRoute(pe,ue)}function O(Z){const he=a.getRecordMatcher(Z);he&&a.removeRoute(he)}function L(){return a.getRoutes().map(Z=>Z.record)}function N(Z){return!!a.getRecordMatcher(Z)}function U(Z,he){if(he=assign({},he||b.value),typeof Z=="string"){const Ee=parseURL(l,Z,he.path),D=a.resolve({path:Ee.path},he),H=v.createHref(Ee.fullPath);return assign(Ee,D,{params:A(D.params),hash:decode$2(Ee.hash),redirectedFrom:void 0,href:H})}let ue;if("path"in Z)ue=assign({},Z,{path:parseURL(l,Z.path,he.path).path});else{const Ee=assign({},Z.params);for(const D in Ee)Ee[D]==null&&delete Ee[D];ue=assign({},Z,{params:w(Z.params)}),he.params=w(he.params)}const pe=a.resolve(ue,he),Pe=Z.hash||"";pe.params=C(A(pe.params));const Me=stringifyURL(d,assign({},Z,{hash:encodeHash(Pe),path:pe.path})),ge=v.createHref(Me);return assign({fullPath:Me,hash:Pe,query:d===stringifyQuery?normalizeQuery(Z.query):Z.query||{}},pe,{redirectedFrom:void 0,href:ge})}function $(Z){return typeof Z=="string"?parseURL(l,Z,b.value.path):assign({},Z)}function G(Z,he){if(R!==Z)return createRouterError(8,{from:he,to:Z})}function z(Z){return ie(Z)}function V(Z){return z(assign($(Z),{replace:!0}))}function X(Z){const he=Z.matched[Z.matched.length-1];if(he&&he.redirect){const{redirect:ue}=he;let pe=typeof ue=="function"?ue(Z):ue;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=$(pe):{path:pe},pe.params={}),assign({query:Z.query,hash:Z.hash,params:"path"in pe?{}:Z.params},pe)}}function ie(Z,he){const ue=R=U(Z),pe=b.value,Pe=Z.state,Me=Z.force,ge=Z.replace===!0,Ee=X(ue);if(Ee)return ie(assign($(Ee),{state:Pe,force:Me,replace:ge}),he||ue);const D=ue;D.redirectedFrom=he;let H;return!Me&&isSameRouteLocation(d,pe,ue)&&(H=createRouterError(16,{to:D,from:pe}),q(pe,pe,!0,!1)),(H?Promise.resolve(H):J(D,pe)).catch(K=>isNavigationFailure(K)?isNavigationFailure(K,2)?K:He(K):Re(K,D,pe)).then(K=>{if(K){if(isNavigationFailure(K,2))return ie(assign($(K.to),{state:Pe,force:Me,replace:ge}),he||D)}else K=xe(D,pe,!0,ge,Pe);return se(D,pe,K),K})}function re(Z,he){const ue=G(Z,he);return ue?Promise.reject(ue):Promise.resolve()}function J(Z,he){let ue;const[pe,Pe,Me]=extractChangingRecords(Z,he);ue=extractComponentsGuards(pe.reverse(),"beforeRouteLeave",Z,he);for(const Ee of pe)Ee.leaveGuards.forEach(D=>{ue.push(guardToPromiseFn(D,Z,he))});const ge=re.bind(null,Z,he);return ue.push(ge),runGuardQueue(ue).then(()=>{ue=[];for(const Ee of m.list())ue.push(guardToPromiseFn(Ee,Z,he));return ue.push(ge),runGuardQueue(ue)}).then(()=>{ue=extractComponentsGuards(Pe,"beforeRouteUpdate",Z,he);for(const Ee of Pe)Ee.updateGuards.forEach(D=>{ue.push(guardToPromiseFn(D,Z,he))});return ue.push(ge),runGuardQueue(ue)}).then(()=>{ue=[];for(const Ee of Z.matched)if(Ee.beforeEnter&&!he.matched.includes(Ee))if(isArray$1(Ee.beforeEnter))for(const D of Ee.beforeEnter)ue.push(guardToPromiseFn(D,Z,he));else ue.push(guardToPromiseFn(Ee.beforeEnter,Z,he));return ue.push(ge),runGuardQueue(ue)}).then(()=>(Z.matched.forEach(Ee=>Ee.enterCallbacks={}),ue=extractComponentsGuards(Me,"beforeRouteEnter",Z,he),ue.push(ge),runGuardQueue(ue))).then(()=>{ue=[];for(const Ee of g.list())ue.push(guardToPromiseFn(Ee,Z,he));return ue.push(ge),runGuardQueue(ue)}).catch(Ee=>isNavigationFailure(Ee,8)?Ee:Promise.reject(Ee))}function se(Z,he,ue){for(const pe of T.list())pe(Z,he,ue)}function xe(Z,he,ue,pe,Pe){const Me=G(Z,he);if(Me)return Me;const ge=he===START_LOCATION_NORMALIZED,Ee=isBrowser?history.state:{};ue&&(pe||ge?v.replace(Z.fullPath,assign({scroll:ge&&Ee&&Ee.scroll},Pe)):v.push(Z.fullPath,Pe)),b.value=Z,q(Z,he,ue,ge),He()}let Ae;function Ue(){Ae||(Ae=v.listen((Z,he,ue)=>{if(!De.listening)return;const pe=U(Z),Pe=X(pe);if(Pe){ie(assign(Pe,{replace:!0}),pe).catch(noop$1);return}R=pe;const Me=b.value;isBrowser&&saveScrollPosition(getScrollKey(Me.fullPath,ue.delta),computeScrollPosition()),J(pe,Me).catch(ge=>isNavigationFailure(ge,12)?ge:isNavigationFailure(ge,2)?(ie(ge.to,pe).then(Ee=>{isNavigationFailure(Ee,20)&&!ue.delta&&ue.type===NavigationType.pop&&v.go(-1,!1)}).catch(noop$1),Promise.reject()):(ue.delta&&v.go(-ue.delta,!1),Re(ge,pe,Me))).then(ge=>{ge=ge||xe(pe,Me,!1),ge&&(ue.delta?v.go(-ue.delta,!1):ue.type===NavigationType.pop&&isNavigationFailure(ge,20)&&v.go(-1,!1)),se(pe,Me,ge)}).catch(noop$1)}))}let ze=useCallbacks(),Ce=useCallbacks(),ye;function Re(Z,he,ue){He(Z);const pe=Ce.list();return pe.length?pe.forEach(Pe=>Pe(Z,he,ue)):console.error(Z),Promise.reject(Z)}function Fe(){return ye&&b.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Z,he)=>{ze.add([Z,he])})}function He(Z){return ye||(ye=!Z,Ue(),ze.list().forEach(([he,ue])=>Z?ue(Z):he()),ze.reset()),Z}function q(Z,he,ue,pe){const{scrollBehavior:Pe}=s;if(!isBrowser||!Pe)return Promise.resolve();const Me=!ue&&getSavedScrollPosition(getScrollKey(Z.fullPath,0))||(pe||!ue)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Pe(Z,he,Me)).then(ge=>ge&&scrollToPosition(ge)).catch(ge=>Re(ge,Z,he))}const oe=Z=>v.go(Z);let Te;const we=new Set,De={currentRoute:b,listening:!0,addRoute:S,removeRoute:O,hasRoute:N,getRoutes:L,resolve:U,options:s,push:z,replace:V,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:m.add,beforeResolve:g.add,afterEach:T.add,onError:Ce.add,isReady:Fe,install(Z){const he=this;Z.component("RouterLink",RouterLink),Z.component("RouterView",RouterView),Z.config.globalProperties.$router=he,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(b)}),isBrowser&&!Te&&b.value===START_LOCATION_NORMALIZED&&(Te=!0,z(v.location).catch(Pe=>{}));const ue={};for(const Pe in START_LOCATION_NORMALIZED)ue[Pe]=computed(()=>b.value[Pe]);Z.provide(routerKey,he),Z.provide(routeLocationKey,reactive(ue)),Z.provide(routerViewLocationKey,b);const pe=Z.unmount;we.add(Z),Z.unmount=function(){we.delete(Z),we.size<1&&(R=START_LOCATION_NORMALIZED,Ae&&Ae(),Ae=null,b.value=START_LOCATION_NORMALIZED,Te=!1,ye=!1),pe()}}};return De}function runGuardQueue(s){return s.reduce((a,l)=>a.then(()=>l()),Promise.resolve())}function extractChangingRecords(s,a){const l=[],d=[],v=[],m=Math.max(a.matched.length,s.matched.length);for(let g=0;g<m;g++){const T=a.matched[g];T&&(s.matched.find(R=>isSameRouteRecord(R,T))?d.push(T):l.push(T));const b=s.matched[g];b&&(a.matched.find(R=>isSameRouteRecord(R,b))||v.push(b))}return[l,d,v]}const index="";function finallyConstructor(s){var a=this.constructor;return this.then(function(l){return a.resolve(s()).then(function(){return l})},function(l){return a.resolve(s()).then(function(){return a.reject(l)})})}function allSettled(s){var a=this;return new a(function(l,d){if(!(s&&typeof s.length<"u"))return d(new TypeError(typeof s+" "+s+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var v=Array.prototype.slice.call(s);if(v.length===0)return l([]);var m=v.length;function g(b,R){if(R&&(typeof R=="object"||typeof R=="function")){var C=R.then;if(typeof C=="function"){C.call(R,function(w){g(b,w)},function(w){v[b]={status:"rejected",reason:w},--m===0&&l(v)});return}}v[b]={status:"fulfilled",value:R},--m===0&&l(v)}for(var T=0;T<v.length;T++)g(T,v[T])})}var setTimeoutFunc=setTimeout;function isArray(s){return Boolean(s&&typeof s.length<"u")}function noop(){}function bind(s,a){return function(){s.apply(a,arguments)}}function Promise$1(s){if(!(this instanceof Promise$1))throw new TypeError("Promises must be constructed via new");if(typeof s!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(s,this)}function handle(s,a){for(;s._state===3;)s=s._value;if(s._state===0){s._deferreds.push(a);return}s._handled=!0,Promise$1._immediateFn(function(){var l=s._state===1?a.onFulfilled:a.onRejected;if(l===null){(s._state===1?resolve$1:reject)(a.promise,s._value);return}var d;try{d=l(s._value)}catch(v){reject(a.promise,v);return}resolve$1(a.promise,d)})}function resolve$1(s,a){try{if(a===s)throw new TypeError("A promise cannot be resolved with itself.");if(a&&(typeof a=="object"||typeof a=="function")){var l=a.then;if(a instanceof Promise$1){s._state=3,s._value=a,finale(s);return}else if(typeof l=="function"){doResolve(bind(l,a),s);return}}s._state=1,s._value=a,finale(s)}catch(d){reject(s,d)}}function reject(s,a){s._state=2,s._value=a,finale(s)}function finale(s){s._state===2&&s._deferreds.length===0&&Promise$1._immediateFn(function(){s._handled||Promise$1._unhandledRejectionFn(s._value)});for(var a=0,l=s._deferreds.length;a<l;a++)handle(s,s._deferreds[a]);s._deferreds=null}function Handler(s,a,l){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof a=="function"?a:null,this.promise=l}function doResolve(s,a){var l=!1;try{s(function(d){l||(l=!0,resolve$1(a,d))},function(d){l||(l=!0,reject(a,d))})}catch(d){if(l)return;l=!0,reject(a,d)}}Promise$1.prototype.catch=function(s){return this.then(null,s)};Promise$1.prototype.then=function(s,a){var l=new this.constructor(noop);return handle(this,new Handler(s,a,l)),l};Promise$1.prototype.finally=finallyConstructor;Promise$1.all=function(s){return new Promise$1(function(a,l){if(!isArray(s))return l(new TypeError("Promise.all accepts an array"));var d=Array.prototype.slice.call(s);if(d.length===0)return a([]);var v=d.length;function m(T,b){try{if(b&&(typeof b=="object"||typeof b=="function")){var R=b.then;if(typeof R=="function"){R.call(b,function(C){m(T,C)},l);return}}d[T]=b,--v===0&&a(d)}catch(C){l(C)}}for(var g=0;g<d.length;g++)m(g,d[g])})};Promise$1.allSettled=allSettled;Promise$1.resolve=function(s){return s&&typeof s=="object"&&s.constructor===Promise$1?s:new Promise$1(function(a){a(s)})};Promise$1.reject=function(s){return new Promise$1(function(a,l){l(s)})};Promise$1.race=function(s){return new Promise$1(function(a,l){if(!isArray(s))return l(new TypeError("Promise.race accepts an array"));for(var d=0,v=s.length;d<v;d++)Promise$1.resolve(s[d]).then(a,l)})};Promise$1._immediateFn=typeof setImmediate=="function"&&function(s){setImmediate(s)}||function(s){setTimeoutFunc(s,0)};Promise$1._unhandledRejectionFn=function(a){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(s){var a=s.default;if(typeof a=="function"){var l=function(){return a.apply(this,arguments)};l.prototype=a.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(s).forEach(function(d){var v=Object.getOwnPropertyDescriptor(s,d);Object.defineProperty(l,d,v.get?v:{enumerable:!0,get:function(){return s[d]}})}),l}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$2=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function shouldUseNative(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},l=0;l<10;l++)a["_"+String.fromCharCode(l)]=l;var d=Object.getOwnPropertyNames(a).map(function(m){return a[m]});if(d.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(m){v[m]=m}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(s,a){for(var l,d=toObject(s),v,m=1;m<arguments.length;m++){l=Object(arguments[m]);for(var g in l)hasOwnProperty$2.call(l,g)&&(d[g]=l[g]);if(getOwnPropertySymbols){v=getOwnPropertySymbols(l);for(var T=0;T<v.length;T++)propIsEnumerable.call(l,v[T])&&(d[v[T]]=l[v[T]])}}return d};/*!
 * @pixi/polyfill - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Promise$1);Object.assign||(Object.assign=objectAssign);var ONE_FRAME_TIME=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var startTime_1=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-startTime_1}}var lastTime=Date.now(),vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!globalThis.requestAnimationFrame;++x){var p=vendors[x];globalThis.requestAnimationFrame=globalThis[p+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[p+"CancelAnimationFrame"]||globalThis[p+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(s){if(typeof s!="function")throw new TypeError(s+"is not a function");var a=Date.now(),l=ONE_FRAME_TIME+lastTime-a;return l<0&&(l=0),lastTime=a,globalThis.self.setTimeout(function(){lastTime=Date.now(),s(performance.now())},l)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(s){return clearTimeout(s)});Math.sign||(Math.sign=function(a){return a=Number(a),a===0||isNaN(a)?a:a>0?1:-1});Number.isInteger||(Number.isInteger=function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/settings - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$6;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$6||(ENV$6={}));var RENDERER_TYPE$6;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$6||(RENDERER_TYPE$6={}));var BUFFER_BITS$6;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$6||(BUFFER_BITS$6={}));var BLEND_MODES$6;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$6||(BLEND_MODES$6={}));var DRAW_MODES$6;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$6||(DRAW_MODES$6={}));var FORMATS$6;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$6||(FORMATS$6={}));var TARGETS$6;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$6||(TARGETS$6={}));var TYPES$6;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$6||(TYPES$6={}));var SAMPLER_TYPES$6;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$6||(SAMPLER_TYPES$6={}));var SCALE_MODES$6;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$6||(SCALE_MODES$6={}));var WRAP_MODES$6;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$6||(WRAP_MODES$6={}));var MIPMAP_MODES$6;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$6||(MIPMAP_MODES$6={}));var ALPHA_MODES$6;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$6||(ALPHA_MODES$6={}));var CLEAR_MODES$6;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$6||(CLEAR_MODES$6={}));var GC_MODES$6;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$6||(GC_MODES$6={}));var PRECISION$6;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$6||(PRECISION$6={}));var MASK_TYPES$6;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR"})(MASK_TYPES$6||(MASK_TYPES$6={}));var COLOR_MASK_BITS$6;(function(s){s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=4]="BLUE",s[s.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$6||(COLOR_MASK_BITS$6={}));var MSAA_QUALITY$6;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$6||(MSAA_QUALITY$6={}));var BUFFER_TYPE$6;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$6||(BUFFER_TYPE$6={}));var BrowserAdapter$1={createCanvas:function(s,a){var l=document.createElement("canvas");return l.width=s,l.height=a,l},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var s;return(s=document.baseURI)!==null&&s!==void 0?s:window.location.href},fetch:function(s,a){return fetch(s,a)}},appleIphone$1=/iPhone/i,appleIpod$1=/iPod/i,appleTablet$1=/iPad/i,appleUniversal$1=/\biOS-universal(?:.+)Mac\b/i,androidPhone$1=/\bAndroid(?:.+)Mobile\b/i,androidTablet$1=/Android/i,amazonPhone$1=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet$1=/Silk/i,windowsPhone$1=/Windows Phone/i,windowsTablet$1=/\bWindows(?:.+)ARM\b/i,otherBlackBerry$1=/BlackBerry/i,otherBlackBerry10$1=/BB10/i,otherOpera$1=/Opera Mini/i,otherChrome$1=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox$1=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13$1=function(s){return typeof s<"u"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch$1(s){return function(a){return a.test(s)}}function isMobile$1$1(s){var a={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator<"u"?a={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?a.userAgent=s:s&&s.userAgent&&(a={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var l=a.userAgent,d=l.split("[FBAN");typeof d[1]<"u"&&(l=d[0]),d=l.split("Twitter"),typeof d[1]<"u"&&(l=d[0]);var v=createMatch$1(l),m={apple:{phone:v(appleIphone$1)&&!v(windowsPhone$1),ipod:v(appleIpod$1),tablet:!v(appleIphone$1)&&(v(appleTablet$1)||isAppleTabletOnIos13$1(a))&&!v(windowsPhone$1),universal:v(appleUniversal$1),device:(v(appleIphone$1)||v(appleIpod$1)||v(appleTablet$1)||v(appleUniversal$1)||isAppleTabletOnIos13$1(a))&&!v(windowsPhone$1)},amazon:{phone:v(amazonPhone$1),tablet:!v(amazonPhone$1)&&v(amazonTablet$1),device:v(amazonPhone$1)||v(amazonTablet$1)},android:{phone:!v(windowsPhone$1)&&v(amazonPhone$1)||!v(windowsPhone$1)&&v(androidPhone$1),tablet:!v(windowsPhone$1)&&!v(amazonPhone$1)&&!v(androidPhone$1)&&(v(amazonTablet$1)||v(androidTablet$1)),device:!v(windowsPhone$1)&&(v(amazonPhone$1)||v(amazonTablet$1)||v(androidPhone$1)||v(androidTablet$1))||v(/\bokhttp\b/i)},windows:{phone:v(windowsPhone$1),tablet:v(windowsTablet$1),device:v(windowsPhone$1)||v(windowsTablet$1)},other:{blackberry:v(otherBlackBerry$1),blackberry10:v(otherBlackBerry10$1),opera:v(otherOpera$1),firefox:v(otherFirefox$1),chrome:v(otherChrome$1),device:v(otherBlackBerry$1)||v(otherBlackBerry10$1)||v(otherOpera$1)||v(otherFirefox$1)||v(otherChrome$1)},any:!1,phone:!1,tablet:!1};return m.any=m.apple.device||m.android.device||m.windows.device||m.other.device,m.phone=m.apple.phone||m.android.phone||m.windows.phone,m.tablet=m.apple.tablet||m.android.tablet||m.windows.tablet,m}var isMobile$2=isMobile$1$1(globalThis.navigator);function canUploadSameBuffer$1(){return!isMobile$2.apple.device}function maxRecommendedTextures$1(s){var a=!0;if(isMobile$2.tablet||isMobile$2.phone){if(isMobile$2.apple.device){var l=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(l){var d=parseInt(l[1],10);d<11&&(a=!1)}}if(isMobile$2.android.device){var l=navigator.userAgent.match(/Android\s([0-9.]*)/);if(l){var d=parseInt(l[1],10);d<7&&(a=!1)}}}return a?s:4}var settings$1={ADAPTER:BrowserAdapter$1,MIPMAP_TEXTURES:MIPMAP_MODES$6.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$6.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures$1(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$6.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$6.CLAMP,SCALE_MODE:SCALE_MODES$6.LINEAR,PRECISION_VERTEX:PRECISION$6.HIGH,PRECISION_FRAGMENT:isMobile$2.apple.device?PRECISION$6.HIGH:PRECISION$6.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer$1(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},eventemitter3={exports:{}};(function(s){var a=Object.prototype.hasOwnProperty,l="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(l=!1));function v(b,R,C){this.fn=b,this.context=R,this.once=C||!1}function m(b,R,C,w,A){if(typeof C!="function")throw new TypeError("The listener must be a function");var S=new v(C,w||b,A),O=l?l+R:R;return b._events[O]?b._events[O].fn?b._events[O]=[b._events[O],S]:b._events[O].push(S):(b._events[O]=S,b._eventsCount++),b}function g(b,R){--b._eventsCount===0?b._events=new d:delete b._events[R]}function T(){this._events=new d,this._eventsCount=0}T.prototype.eventNames=function(){var R=[],C,w;if(this._eventsCount===0)return R;for(w in C=this._events)a.call(C,w)&&R.push(l?w.slice(1):w);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(C)):R},T.prototype.listeners=function(R){var C=l?l+R:R,w=this._events[C];if(!w)return[];if(w.fn)return[w.fn];for(var A=0,S=w.length,O=new Array(S);A<S;A++)O[A]=w[A].fn;return O},T.prototype.listenerCount=function(R){var C=l?l+R:R,w=this._events[C];return w?w.fn?1:w.length:0},T.prototype.emit=function(R,C,w,A,S,O){var L=l?l+R:R;if(!this._events[L])return!1;var N=this._events[L],U=arguments.length,$,G;if(N.fn){switch(N.once&&this.removeListener(R,N.fn,void 0,!0),U){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,C),!0;case 3:return N.fn.call(N.context,C,w),!0;case 4:return N.fn.call(N.context,C,w,A),!0;case 5:return N.fn.call(N.context,C,w,A,S),!0;case 6:return N.fn.call(N.context,C,w,A,S,O),!0}for(G=1,$=new Array(U-1);G<U;G++)$[G-1]=arguments[G];N.fn.apply(N.context,$)}else{var z=N.length,V;for(G=0;G<z;G++)switch(N[G].once&&this.removeListener(R,N[G].fn,void 0,!0),U){case 1:N[G].fn.call(N[G].context);break;case 2:N[G].fn.call(N[G].context,C);break;case 3:N[G].fn.call(N[G].context,C,w);break;case 4:N[G].fn.call(N[G].context,C,w,A);break;default:if(!$)for(V=1,$=new Array(U-1);V<U;V++)$[V-1]=arguments[V];N[G].fn.apply(N[G].context,$)}}return!0},T.prototype.on=function(R,C,w){return m(this,R,C,w,!1)},T.prototype.once=function(R,C,w){return m(this,R,C,w,!0)},T.prototype.removeListener=function(R,C,w,A){var S=l?l+R:R;if(!this._events[S])return this;if(!C)return g(this,S),this;var O=this._events[S];if(O.fn)O.fn===C&&(!A||O.once)&&(!w||O.context===w)&&g(this,S);else{for(var L=0,N=[],U=O.length;L<U;L++)(O[L].fn!==C||A&&!O[L].once||w&&O[L].context!==w)&&N.push(O[L]);N.length?this._events[S]=N.length===1?N[0]:N:g(this,S)}return this},T.prototype.removeAllListeners=function(R){var C;return R?(C=l?l+R:R,this._events[C]&&g(this,C)):(this._events=new d,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prefixed=l,T.EventEmitter=T,s.exports=T})(eventemitter3);const EventEmitter=eventemitter3.exports;var earcut$1={exports:{}};earcut$1.exports=earcut;earcut$1.exports.default=earcut;function earcut(s,a,l){l=l||2;var d=a&&a.length,v=d?a[0]*l:s.length,m=linkedList(s,0,v,l,!0),g=[];if(!m||m.next===m.prev)return g;var T,b,R,C,w,A,S;if(d&&(m=eliminateHoles(s,a,m,l)),s.length>80*l){T=R=s[0],b=C=s[1];for(var O=l;O<v;O+=l)w=s[O],A=s[O+1],w<T&&(T=w),A<b&&(b=A),w>R&&(R=w),A>C&&(C=A);S=Math.max(R-T,C-b),S=S!==0?32767/S:0}return earcutLinked(m,g,l,T,b,S,0),g}function linkedList(s,a,l,d,v){var m,g;if(v===signedArea(s,a,l,d)>0)for(m=a;m<l;m+=d)g=insertNode(m,s[m],s[m+1],g);else for(m=l-d;m>=a;m-=d)g=insertNode(m,s[m],s[m+1],g);return g&&equals(g,g.next)&&(removeNode(g),g=g.next),g}function filterPoints(s,a){if(!s)return s;a||(a=s);var l=s,d;do if(d=!1,!l.steiner&&(equals(l,l.next)||area(l.prev,l,l.next)===0)){if(removeNode(l),l=a=l.prev,l===l.next)break;d=!0}else l=l.next;while(d||l!==a);return a}function earcutLinked(s,a,l,d,v,m,g){if(!!s){!g&&m&&indexCurve(s,d,v,m);for(var T=s,b,R;s.prev!==s.next;){if(b=s.prev,R=s.next,m?isEarHashed(s,d,v,m):isEar(s)){a.push(b.i/l|0),a.push(s.i/l|0),a.push(R.i/l|0),removeNode(s),s=R.next,T=R.next;continue}if(s=R,s===T){g?g===1?(s=cureLocalIntersections(filterPoints(s),a,l),earcutLinked(s,a,l,d,v,m,2)):g===2&&splitEarcut(s,a,l,d,v,m):earcutLinked(filterPoints(s),a,l,d,v,m,1);break}}}}function isEar(s){var a=s.prev,l=s,d=s.next;if(area(a,l,d)>=0)return!1;for(var v=a.x,m=l.x,g=d.x,T=a.y,b=l.y,R=d.y,C=v<m?v<g?v:g:m<g?m:g,w=T<b?T<R?T:R:b<R?b:R,A=v>m?v>g?v:g:m>g?m:g,S=T>b?T>R?T:R:b>R?b:R,O=d.next;O!==a;){if(O.x>=C&&O.x<=A&&O.y>=w&&O.y<=S&&pointInTriangle(v,T,m,b,g,R,O.x,O.y)&&area(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function isEarHashed(s,a,l,d){var v=s.prev,m=s,g=s.next;if(area(v,m,g)>=0)return!1;for(var T=v.x,b=m.x,R=g.x,C=v.y,w=m.y,A=g.y,S=T<b?T<R?T:R:b<R?b:R,O=C<w?C<A?C:A:w<A?w:A,L=T>b?T>R?T:R:b>R?b:R,N=C>w?C>A?C:A:w>A?w:A,U=zOrder(S,O,a,l,d),$=zOrder(L,N,a,l,d),G=s.prevZ,z=s.nextZ;G&&G.z>=U&&z&&z.z<=$;){if(G.x>=S&&G.x<=L&&G.y>=O&&G.y<=N&&G!==v&&G!==g&&pointInTriangle(T,C,b,w,R,A,G.x,G.y)&&area(G.prev,G,G.next)>=0||(G=G.prevZ,z.x>=S&&z.x<=L&&z.y>=O&&z.y<=N&&z!==v&&z!==g&&pointInTriangle(T,C,b,w,R,A,z.x,z.y)&&area(z.prev,z,z.next)>=0))return!1;z=z.nextZ}for(;G&&G.z>=U;){if(G.x>=S&&G.x<=L&&G.y>=O&&G.y<=N&&G!==v&&G!==g&&pointInTriangle(T,C,b,w,R,A,G.x,G.y)&&area(G.prev,G,G.next)>=0)return!1;G=G.prevZ}for(;z&&z.z<=$;){if(z.x>=S&&z.x<=L&&z.y>=O&&z.y<=N&&z!==v&&z!==g&&pointInTriangle(T,C,b,w,R,A,z.x,z.y)&&area(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function cureLocalIntersections(s,a,l){var d=s;do{var v=d.prev,m=d.next.next;!equals(v,m)&&intersects(v,d,d.next,m)&&locallyInside(v,m)&&locallyInside(m,v)&&(a.push(v.i/l|0),a.push(d.i/l|0),a.push(m.i/l|0),removeNode(d),removeNode(d.next),d=s=m),d=d.next}while(d!==s);return filterPoints(d)}function splitEarcut(s,a,l,d,v,m){var g=s;do{for(var T=g.next.next;T!==g.prev;){if(g.i!==T.i&&isValidDiagonal(g,T)){var b=splitPolygon(g,T);g=filterPoints(g,g.next),b=filterPoints(b,b.next),earcutLinked(g,a,l,d,v,m,0),earcutLinked(b,a,l,d,v,m,0);return}T=T.next}g=g.next}while(g!==s)}function eliminateHoles(s,a,l,d){var v=[],m,g,T,b,R;for(m=0,g=a.length;m<g;m++)T=a[m]*d,b=m<g-1?a[m+1]*d:s.length,R=linkedList(s,T,b,d,!1),R===R.next&&(R.steiner=!0),v.push(getLeftmost(R));for(v.sort(compareX),m=0;m<v.length;m++)l=eliminateHole(v[m],l);return l}function compareX(s,a){return s.x-a.x}function eliminateHole(s,a){var l=findHoleBridge(s,a);if(!l)return a;var d=splitPolygon(l,s);return filterPoints(d,d.next),filterPoints(l,l.next)}function findHoleBridge(s,a){var l=a,d=s.x,v=s.y,m=-1/0,g;do{if(v<=l.y&&v>=l.next.y&&l.next.y!==l.y){var T=l.x+(v-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(T<=d&&T>m&&(m=T,g=l.x<l.next.x?l:l.next,T===d))return g}l=l.next}while(l!==a);if(!g)return null;var b=g,R=g.x,C=g.y,w=1/0,A;l=g;do d>=l.x&&l.x>=R&&d!==l.x&&pointInTriangle(v<C?d:m,v,R,C,v<C?m:d,v,l.x,l.y)&&(A=Math.abs(v-l.y)/(d-l.x),locallyInside(l,s)&&(A<w||A===w&&(l.x>g.x||l.x===g.x&&sectorContainsSector(g,l)))&&(g=l,w=A)),l=l.next;while(l!==b);return g}function sectorContainsSector(s,a){return area(s.prev,s,a.prev)<0&&area(a.next,s,s.next)<0}function indexCurve(s,a,l,d){var v=s;do v.z===0&&(v.z=zOrder(v.x,v.y,a,l,d)),v.prevZ=v.prev,v.nextZ=v.next,v=v.next;while(v!==s);v.prevZ.nextZ=null,v.prevZ=null,sortLinked(v)}function sortLinked(s){var a,l,d,v,m,g,T,b,R=1;do{for(l=s,s=null,m=null,g=0;l;){for(g++,d=l,T=0,a=0;a<R&&(T++,d=d.nextZ,!!d);a++);for(b=R;T>0||b>0&&d;)T!==0&&(b===0||!d||l.z<=d.z)?(v=l,l=l.nextZ,T--):(v=d,d=d.nextZ,b--),m?m.nextZ=v:s=v,v.prevZ=m,m=v;l=d}m.nextZ=null,R*=2}while(g>1);return s}function zOrder(s,a,l,d,v){return s=(s-l)*v|0,a=(a-d)*v|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,s|a<<1}function getLeftmost(s){var a=s,l=s;do(a.x<l.x||a.x===l.x&&a.y<l.y)&&(l=a),a=a.next;while(a!==s);return l}function pointInTriangle(s,a,l,d,v,m,g,T){return(v-g)*(a-T)>=(s-g)*(m-T)&&(s-g)*(d-T)>=(l-g)*(a-T)&&(l-g)*(m-T)>=(v-g)*(d-T)}function isValidDiagonal(s,a){return s.next.i!==a.i&&s.prev.i!==a.i&&!intersectsPolygon(s,a)&&(locallyInside(s,a)&&locallyInside(a,s)&&middleInside(s,a)&&(area(s.prev,s,a.prev)||area(s,a.prev,a))||equals(s,a)&&area(s.prev,s,s.next)>0&&area(a.prev,a,a.next)>0)}function area(s,a,l){return(a.y-s.y)*(l.x-a.x)-(a.x-s.x)*(l.y-a.y)}function equals(s,a){return s.x===a.x&&s.y===a.y}function intersects(s,a,l,d){var v=sign$1(area(s,a,l)),m=sign$1(area(s,a,d)),g=sign$1(area(l,d,s)),T=sign$1(area(l,d,a));return!!(v!==m&&g!==T||v===0&&onSegment(s,l,a)||m===0&&onSegment(s,d,a)||g===0&&onSegment(l,s,d)||T===0&&onSegment(l,a,d))}function onSegment(s,a,l){return a.x<=Math.max(s.x,l.x)&&a.x>=Math.min(s.x,l.x)&&a.y<=Math.max(s.y,l.y)&&a.y>=Math.min(s.y,l.y)}function sign$1(s){return s>0?1:s<0?-1:0}function intersectsPolygon(s,a){var l=s;do{if(l.i!==s.i&&l.next.i!==s.i&&l.i!==a.i&&l.next.i!==a.i&&intersects(l,l.next,s,a))return!0;l=l.next}while(l!==s);return!1}function locallyInside(s,a){return area(s.prev,s,s.next)<0?area(s,a,s.next)>=0&&area(s,s.prev,a)>=0:area(s,a,s.prev)<0||area(s,s.next,a)<0}function middleInside(s,a){var l=s,d=!1,v=(s.x+a.x)/2,m=(s.y+a.y)/2;do l.y>m!=l.next.y>m&&l.next.y!==l.y&&v<(l.next.x-l.x)*(m-l.y)/(l.next.y-l.y)+l.x&&(d=!d),l=l.next;while(l!==s);return d}function splitPolygon(s,a){var l=new Node$2(s.i,s.x,s.y),d=new Node$2(a.i,a.x,a.y),v=s.next,m=a.prev;return s.next=a,a.prev=s,l.next=v,v.prev=l,d.next=l,l.prev=d,m.next=d,d.prev=m,d}function insertNode(s,a,l,d){var v=new Node$2(s,a,l);return d?(v.next=d.next,v.prev=d,d.next.prev=v,d.next=v):(v.prev=v,v.next=v),v}function removeNode(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Node$2(s,a,l){this.i=s,this.x=a,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(s,a,l,d){var v=a&&a.length,m=v?a[0]*l:s.length,g=Math.abs(signedArea(s,0,m,l));if(v)for(var T=0,b=a.length;T<b;T++){var R=a[T]*l,C=T<b-1?a[T+1]*l:s.length;g-=Math.abs(signedArea(s,R,C,l))}var w=0;for(T=0;T<d.length;T+=3){var A=d[T]*l,S=d[T+1]*l,O=d[T+2]*l;w+=Math.abs((s[A]-s[O])*(s[S+1]-s[A+1])-(s[A]-s[S])*(s[O+1]-s[A+1]))}return g===0&&w===0?0:Math.abs((w-g)/g)};function signedArea(s,a,l,d){for(var v=0,m=a,g=l-d;m<l;m+=d)v+=(s[g]-s[m])*(s[m+1]+s[g+1]),g=m;return v}earcut.flatten=function(s){for(var a=s[0][0].length,l={vertices:[],holes:[],dimensions:a},d=0,v=0;v<s.length;v++){for(var m=0;m<s[v].length;m++)for(var g=0;g<a;g++)l.vertices.push(s[v][m][g]);v>0&&(d+=s[v-1].length,l.holes.push(d))}return l};var punycode$1={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(s,a){(function(l){var d=a&&!a.nodeType&&a,v=s&&!s.nodeType&&s,m=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2;(m.global===m||m.window===m||m.self===m)&&(l=m);var g,T=2147483647,b=36,R=1,C=26,w=38,A=700,S=72,O=128,L="-",N=/^xn--/,U=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,G={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=b-R,V=Math.floor,X=String.fromCharCode,ie;function re(q){throw RangeError(G[q])}function J(q,oe){for(var Te=q.length,we=[];Te--;)we[Te]=oe(q[Te]);return we}function se(q,oe){var Te=q.split("@"),we="";Te.length>1&&(we=Te[0]+"@",q=Te[1]),q=q.replace($,".");var De=q.split("."),Z=J(De,oe).join(".");return we+Z}function xe(q){for(var oe=[],Te=0,we=q.length,De,Z;Te<we;)De=q.charCodeAt(Te++),De>=55296&&De<=56319&&Te<we?(Z=q.charCodeAt(Te++),(Z&64512)==56320?oe.push(((De&1023)<<10)+(Z&1023)+65536):(oe.push(De),Te--)):oe.push(De);return oe}function Ae(q){return J(q,function(oe){var Te="";return oe>65535&&(oe-=65536,Te+=X(oe>>>10&1023|55296),oe=56320|oe&1023),Te+=X(oe),Te}).join("")}function Ue(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:b}function ze(q,oe){return q+22+75*(q<26)-((oe!=0)<<5)}function Ce(q,oe,Te){var we=0;for(q=Te?V(q/A):q>>1,q+=V(q/oe);q>z*C>>1;we+=b)q=V(q/z);return V(we+(z+1)*q/(q+w))}function ye(q){var oe=[],Te=q.length,we,De=0,Z=O,he=S,ue,pe,Pe,Me,ge,Ee,D,H,K;for(ue=q.lastIndexOf(L),ue<0&&(ue=0),pe=0;pe<ue;++pe)q.charCodeAt(pe)>=128&&re("not-basic"),oe.push(q.charCodeAt(pe));for(Pe=ue>0?ue+1:0;Pe<Te;){for(Me=De,ge=1,Ee=b;Pe>=Te&&re("invalid-input"),D=Ue(q.charCodeAt(Pe++)),(D>=b||D>V((T-De)/ge))&&re("overflow"),De+=D*ge,H=Ee<=he?R:Ee>=he+C?C:Ee-he,!(D<H);Ee+=b)K=b-H,ge>V(T/K)&&re("overflow"),ge*=K;we=oe.length+1,he=Ce(De-Me,we,Me==0),V(De/we)>T-Z&&re("overflow"),Z+=V(De/we),De%=we,oe.splice(De++,0,Z)}return Ae(oe)}function Re(q){var oe,Te,we,De,Z,he,ue,pe,Pe,Me,ge,Ee=[],D,H,K,Q;for(q=xe(q),D=q.length,oe=O,Te=0,Z=S,he=0;he<D;++he)ge=q[he],ge<128&&Ee.push(X(ge));for(we=De=Ee.length,De&&Ee.push(L);we<D;){for(ue=T,he=0;he<D;++he)ge=q[he],ge>=oe&&ge<ue&&(ue=ge);for(H=we+1,ue-oe>V((T-Te)/H)&&re("overflow"),Te+=(ue-oe)*H,oe=ue,he=0;he<D;++he)if(ge=q[he],ge<oe&&++Te>T&&re("overflow"),ge==oe){for(pe=Te,Pe=b;Me=Pe<=Z?R:Pe>=Z+C?C:Pe-Z,!(pe<Me);Pe+=b)Q=pe-Me,K=b-Me,Ee.push(X(ze(Me+Q%K,0))),pe=V(Q/K);Ee.push(X(ze(pe,0))),Z=Ce(Te,H,we==De),Te=0,++we}++Te,++oe}return Ee.join("")}function Fe(q){return se(q,function(oe){return N.test(oe)?ye(oe.slice(4).toLowerCase()):oe})}function He(q){return se(q,function(oe){return U.test(oe)?"xn--"+Re(oe):oe})}if(g={version:"1.3.2",ucs2:{decode:xe,encode:Ae},decode:ye,encode:Re,toASCII:He,toUnicode:Fe},d&&v)if(s.exports==d)v.exports=g;else for(ie in g)g.hasOwnProperty(ie)&&(d[ie]=g[ie]);else l.punycode=g})(commonjsGlobal$2)})(punycode$1,punycode$1.exports);var util$1={isString:function(s){return typeof s=="string"},isObject:function(s){return typeof s=="object"&&s!==null},isNull:function(s){return s===null},isNullOrUndefined:function(s){return s==null}},querystring$1={};function hasOwnProperty$1(s,a){return Object.prototype.hasOwnProperty.call(s,a)}var decode$1=function(s,a,l,d){a=a||"&",l=l||"=";var v={};if(typeof s!="string"||s.length===0)return v;var m=/\+/g;s=s.split(a);var g=1e3;d&&typeof d.maxKeys=="number"&&(g=d.maxKeys);var T=s.length;g>0&&T>g&&(T=g);for(var b=0;b<T;++b){var R=s[b].replace(m,"%20"),C=R.indexOf(l),w,A,S,O;C>=0?(w=R.substr(0,C),A=R.substr(C+1)):(w=R,A=""),S=decodeURIComponent(w),O=decodeURIComponent(A),hasOwnProperty$1(v,S)?Array.isArray(v[S])?v[S].push(O):v[S]=[v[S],O]:v[S]=O}return v},stringifyPrimitive$1=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}},encode$1=function(s,a,l,d){return a=a||"&",l=l||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(v){var m=encodeURIComponent(stringifyPrimitive$1(v))+l;return Array.isArray(s[v])?s[v].map(function(g){return m+encodeURIComponent(stringifyPrimitive$1(g))}).join(a):m+encodeURIComponent(stringifyPrimitive$1(s[v]))}).join(a):d?encodeURIComponent(stringifyPrimitive$1(d))+l+encodeURIComponent(stringifyPrimitive$1(s)):""};querystring$1.decode=querystring$1.parse=decode$1;querystring$1.encode=querystring$1.stringify=encode$1;var punycode=punycode$1.exports,util=util$1,parse=urlParse,resolve=urlResolve,format=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=querystring$1;function urlParse(s,a,l){if(s&&util.isObject(s)&&s instanceof Url)return s;var d=new Url;return d.parse(s,a,l),d}Url.prototype.parse=function(s,a,l){if(!util.isString(s))throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var d=s.indexOf("?"),v=d!==-1&&d<s.indexOf("#")?"?":"#",m=s.split(v),g=/\\/g;m[0]=m[0].replace(g,"/"),s=m.join(v);var T=s;if(T=T.trim(),!l&&s.split("#").length===1){var b=simplePathPattern.exec(T);if(b)return this.path=T,this.href=T,this.pathname=b[1],b[2]?(this.search=b[2],a?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):a&&(this.search="",this.query={}),this}var R=protocolPattern.exec(T);if(R){R=R[0];var C=R.toLowerCase();this.protocol=C,T=T.substr(R.length)}if(l||R||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var w=T.substr(0,2)==="//";w&&!(R&&hostlessProtocol[R])&&(T=T.substr(2),this.slashes=!0)}if(!hostlessProtocol[R]&&(w||R&&!slashedProtocol[R])){for(var A=-1,S=0;S<hostEndingChars.length;S++){var O=T.indexOf(hostEndingChars[S]);O!==-1&&(A===-1||O<A)&&(A=O)}var L,N;A===-1?N=T.lastIndexOf("@"):N=T.lastIndexOf("@",A),N!==-1&&(L=T.slice(0,N),T=T.slice(N+1),this.auth=decodeURIComponent(L)),A=-1;for(var S=0;S<nonHostChars.length;S++){var O=T.indexOf(nonHostChars[S]);O!==-1&&(A===-1||O<A)&&(A=O)}A===-1&&(A=T.length),this.host=T.slice(0,A),T=T.slice(A),this.parseHost(),this.hostname=this.hostname||"";var U=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!U)for(var $=this.hostname.split(/\./),S=0,G=$.length;S<G;S++){var z=$[S];if(!!z&&!z.match(hostnamePartPattern)){for(var V="",X=0,ie=z.length;X<ie;X++)z.charCodeAt(X)>127?V+="x":V+=z[X];if(!V.match(hostnamePartPattern)){var re=$.slice(0,S),J=$.slice(S+1),se=z.match(hostnamePartStart);se&&(re.push(se[1]),J.unshift(se[2])),J.length&&(T="/"+J.join(".")+T),this.hostname=re.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),U||(this.hostname=punycode.toASCII(this.hostname));var xe=this.port?":"+this.port:"",Ae=this.hostname||"";this.host=Ae+xe,this.href+=this.host,U&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),T[0]!=="/"&&(T="/"+T))}if(!unsafeProtocol[C])for(var S=0,G=autoEscape.length;S<G;S++){var Ue=autoEscape[S];if(T.indexOf(Ue)!==-1){var ze=encodeURIComponent(Ue);ze===Ue&&(ze=escape(Ue)),T=T.split(Ue).join(ze)}}var Ce=T.indexOf("#");Ce!==-1&&(this.hash=T.substr(Ce),T=T.slice(0,Ce));var ye=T.indexOf("?");if(ye!==-1?(this.search=T.substr(ye),this.query=T.substr(ye+1),a&&(this.query=querystring.parse(this.query)),T=T.slice(0,ye)):a&&(this.search="",this.query={}),T&&(this.pathname=T),slashedProtocol[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var xe=this.pathname||"",Re=this.search||"";this.path=xe+Re}return this.href=this.format(),this};function urlFormat(s){return util.isString(s)&&(s=urlParse(s)),s instanceof Url?s.format():Url.prototype.format.call(s)}Url.prototype.format=function(){var s=this.auth||"";s&&(s=encodeURIComponent(s),s=s.replace(/%3A/i,":"),s+="@");var a=this.protocol||"",l=this.pathname||"",d=this.hash||"",v=!1,m="";this.host?v=s+this.host:this.hostname&&(v=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(v+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(m=querystring.stringify(this.query));var g=this.search||m&&"?"+m||"";return a&&a.substr(-1)!==":"&&(a+=":"),this.slashes||(!a||slashedProtocol[a])&&v!==!1?(v="//"+(v||""),l&&l.charAt(0)!=="/"&&(l="/"+l)):v||(v=""),d&&d.charAt(0)!=="#"&&(d="#"+d),g&&g.charAt(0)!=="?"&&(g="?"+g),l=l.replace(/[?#]/g,function(T){return encodeURIComponent(T)}),g=g.replace("#","%23"),a+v+l+g+d};function urlResolve(s,a){return urlParse(s,!1,!0).resolve(a)}Url.prototype.resolve=function(s){return this.resolveObject(urlParse(s,!1,!0)).format()};Url.prototype.resolveObject=function(s){if(util.isString(s)){var a=new Url;a.parse(s,!1,!0),s=a}for(var l=new Url,d=Object.keys(this),v=0;v<d.length;v++){var m=d[v];l[m]=this[m]}if(l.hash=s.hash,s.href==="")return l.href=l.format(),l;if(s.slashes&&!s.protocol){for(var g=Object.keys(s),T=0;T<g.length;T++){var b=g[T];b!=="protocol"&&(l[b]=s[b])}return slashedProtocol[l.protocol]&&l.hostname&&!l.pathname&&(l.path=l.pathname="/"),l.href=l.format(),l}if(s.protocol&&s.protocol!==l.protocol){if(!slashedProtocol[s.protocol]){for(var R=Object.keys(s),C=0;C<R.length;C++){var w=R[C];l[w]=s[w]}return l.href=l.format(),l}if(l.protocol=s.protocol,!s.host&&!hostlessProtocol[s.protocol]){for(var G=(s.pathname||"").split("/");G.length&&!(s.host=G.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),G[0]!==""&&G.unshift(""),G.length<2&&G.unshift(""),l.pathname=G.join("/")}else l.pathname=s.pathname;if(l.search=s.search,l.query=s.query,l.host=s.host||"",l.auth=s.auth,l.hostname=s.hostname||s.host,l.port=s.port,l.pathname||l.search){var A=l.pathname||"",S=l.search||"";l.path=A+S}return l.slashes=l.slashes||s.slashes,l.href=l.format(),l}var O=l.pathname&&l.pathname.charAt(0)==="/",L=s.host||s.pathname&&s.pathname.charAt(0)==="/",N=L||O||l.host&&s.pathname,U=N,$=l.pathname&&l.pathname.split("/")||[],G=s.pathname&&s.pathname.split("/")||[],z=l.protocol&&!slashedProtocol[l.protocol];if(z&&(l.hostname="",l.port=null,l.host&&($[0]===""?$[0]=l.host:$.unshift(l.host)),l.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(G[0]===""?G[0]=s.host:G.unshift(s.host)),s.host=null),N=N&&(G[0]===""||$[0]==="")),L)l.host=s.host||s.host===""?s.host:l.host,l.hostname=s.hostname||s.hostname===""?s.hostname:l.hostname,l.search=s.search,l.query=s.query,$=G;else if(G.length)$||($=[]),$.pop(),$=$.concat(G),l.search=s.search,l.query=s.query;else if(!util.isNullOrUndefined(s.search)){if(z){l.hostname=l.host=$.shift();var V=l.host&&l.host.indexOf("@")>0?l.host.split("@"):!1;V&&(l.auth=V.shift(),l.host=l.hostname=V.shift())}return l.search=s.search,l.query=s.query,(!util.isNull(l.pathname)||!util.isNull(l.search))&&(l.path=(l.pathname?l.pathname:"")+(l.search?l.search:"")),l.href=l.format(),l}if(!$.length)return l.pathname=null,l.search?l.path="/"+l.search:l.path=null,l.href=l.format(),l;for(var X=$.slice(-1)[0],ie=(l.host||s.host||$.length>1)&&(X==="."||X==="..")||X==="",re=0,J=$.length;J>=0;J--)X=$[J],X==="."?$.splice(J,1):X===".."?($.splice(J,1),re++):re&&($.splice(J,1),re--);if(!N&&!U)for(;re--;re)$.unshift("..");N&&$[0]!==""&&(!$[0]||$[0].charAt(0)!=="/")&&$.unshift(""),ie&&$.join("/").substr(-1)!=="/"&&$.push("");var se=$[0]===""||$[0]&&$[0].charAt(0)==="/";if(z){l.hostname=l.host=se?"":$.length?$.shift():"";var V=l.host&&l.host.indexOf("@")>0?l.host.split("@"):!1;V&&(l.auth=V.shift(),l.host=l.hostname=V.shift())}return N=N||l.host&&$.length,N&&!se&&$.unshift(""),$.length?l.pathname=$.join("/"):(l.pathname=null,l.path=null),(!util.isNull(l.pathname)||!util.isNull(l.search))&&(l.path=(l.pathname?l.pathname:"")+(l.search?l.search:"")),l.auth=s.auth||l.auth,l.slashes=l.slashes||s.slashes,l.href=l.format(),l};Url.prototype.parseHost=function(){var s=this.host,a=portPattern.exec(s);a&&(a=a[0],a!==":"&&(this.port=a.substr(1)),s=s.substr(0,s.length-a.length)),s&&(this.hostname=s)};/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$5;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$5||(ENV$5={}));var RENDERER_TYPE$5;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$5||(RENDERER_TYPE$5={}));var BUFFER_BITS$5;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$5||(BUFFER_BITS$5={}));var BLEND_MODES$5;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$5||(BLEND_MODES$5={}));var DRAW_MODES$5;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$5||(DRAW_MODES$5={}));var FORMATS$5;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$5||(FORMATS$5={}));var TARGETS$5;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$5||(TARGETS$5={}));var TYPES$5;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$5||(TYPES$5={}));var SAMPLER_TYPES$5;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$5||(SAMPLER_TYPES$5={}));var SCALE_MODES$5;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$5||(SCALE_MODES$5={}));var WRAP_MODES$5;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$5||(WRAP_MODES$5={}));var MIPMAP_MODES$5;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$5||(MIPMAP_MODES$5={}));var ALPHA_MODES$5;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$5||(ALPHA_MODES$5={}));var CLEAR_MODES$5;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$5||(CLEAR_MODES$5={}));var GC_MODES$5;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$5||(GC_MODES$5={}));var PRECISION$5;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$5||(PRECISION$5={}));var MASK_TYPES$5;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR"})(MASK_TYPES$5||(MASK_TYPES$5={}));var COLOR_MASK_BITS$5;(function(s){s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=4]="BLUE",s[s.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$5||(COLOR_MASK_BITS$5={}));var MSAA_QUALITY$5;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$5||(MSAA_QUALITY$5={}));var BUFFER_TYPE$5;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$5||(BUFFER_TYPE$5={}));/*!
 * @pixi/utils - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var url={parse,format,resolve};settings$1.RETINA_PREFIX=/@([0-9\.]+)x/;settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var saidHello=!1,VERSION$1="6.5.1";function skipHello(){saidHello=!0}function sayHello(s){var a;if(!saidHello){if(settings$1.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var l=[`
 %c %c %c PixiJS `+VERSION$1+" - \u2730 "+s+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(a=globalThis.console).log.apply(a,l)}else globalThis.console&&globalThis.console.log("PixiJS "+VERSION$1+" - "+s+" - http://www.pixijs.com/");saidHello=!0}}var supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings$1.ADAPTER.getWebGLRenderingContext())return!1;var l=settings$1.ADAPTER.createCanvas(),d=l.getContext("webgl",a)||l.getContext("experimental-webgl",a),v=!!(d&&d.getContextAttributes().stencil);if(d){var m=d.getExtension("WEBGL_lose_context");m&&m.loseContext()}return d=null,v}catch{return!1}}()),supported}var aliceblue="#f0f8ff",antiquewhite="#faebd7",aqua="#00ffff",aquamarine="#7fffd4",azure="#f0ffff",beige="#f5f5dc",bisque="#ffe4c4",black="#000000",blanchedalmond="#ffebcd",blue="#0000ff",blueviolet="#8a2be2",brown="#a52a2a",burlywood="#deb887",cadetblue="#5f9ea0",chartreuse="#7fff00",chocolate="#d2691e",coral="#ff7f50",cornflowerblue="#6495ed",cornsilk="#fff8dc",crimson="#dc143c",cyan="#00ffff",darkblue="#00008b",darkcyan="#008b8b",darkgoldenrod="#b8860b",darkgray="#a9a9a9",darkgreen="#006400",darkgrey="#a9a9a9",darkkhaki="#bdb76b",darkmagenta="#8b008b",darkolivegreen="#556b2f",darkorange="#ff8c00",darkorchid="#9932cc",darkred="#8b0000",darksalmon="#e9967a",darkseagreen="#8fbc8f",darkslateblue="#483d8b",darkslategray="#2f4f4f",darkslategrey="#2f4f4f",darkturquoise="#00ced1",darkviolet="#9400d3",deeppink="#ff1493",deepskyblue="#00bfff",dimgray="#696969",dimgrey="#696969",dodgerblue="#1e90ff",firebrick="#b22222",floralwhite="#fffaf0",forestgreen="#228b22",fuchsia="#ff00ff",gainsboro="#dcdcdc",ghostwhite="#f8f8ff",goldenrod="#daa520",gold="#ffd700",gray="#808080",green="#008000",greenyellow="#adff2f",grey="#808080",honeydew="#f0fff0",hotpink="#ff69b4",indianred="#cd5c5c",indigo="#4b0082",ivory="#fffff0",khaki="#f0e68c",lavenderblush="#fff0f5",lavender="#e6e6fa",lawngreen="#7cfc00",lemonchiffon="#fffacd",lightblue="#add8e6",lightcoral="#f08080",lightcyan="#e0ffff",lightgoldenrodyellow="#fafad2",lightgray="#d3d3d3",lightgreen="#90ee90",lightgrey="#d3d3d3",lightpink="#ffb6c1",lightsalmon="#ffa07a",lightseagreen="#20b2aa",lightskyblue="#87cefa",lightslategray="#778899",lightslategrey="#778899",lightsteelblue="#b0c4de",lightyellow="#ffffe0",lime="#00ff00",limegreen="#32cd32",linen="#faf0e6",magenta="#ff00ff",maroon="#800000",mediumaquamarine="#66cdaa",mediumblue="#0000cd",mediumorchid="#ba55d3",mediumpurple="#9370db",mediumseagreen="#3cb371",mediumslateblue="#7b68ee",mediumspringgreen="#00fa9a",mediumturquoise="#48d1cc",mediumvioletred="#c71585",midnightblue="#191970",mintcream="#f5fffa",mistyrose="#ffe4e1",moccasin="#ffe4b5",navajowhite="#ffdead",navy="#000080",oldlace="#fdf5e6",olive="#808000",olivedrab="#6b8e23",orange="#ffa500",orangered="#ff4500",orchid="#da70d6",palegoldenrod="#eee8aa",palegreen="#98fb98",paleturquoise="#afeeee",palevioletred="#db7093",papayawhip="#ffefd5",peachpuff="#ffdab9",peru="#cd853f",pink="#ffc0cb",plum="#dda0dd",powderblue="#b0e0e6",purple="#800080",rebeccapurple="#663399",red="#ff0000",rosybrown="#bc8f8f",royalblue="#4169e1",saddlebrown="#8b4513",salmon="#fa8072",sandybrown="#f4a460",seagreen="#2e8b57",seashell="#fff5ee",sienna="#a0522d",silver="#c0c0c0",skyblue="#87ceeb",slateblue="#6a5acd",slategray="#708090",slategrey="#708090",snow="#fffafa",springgreen="#00ff7f",steelblue="#4682b4",tan="#d2b48c",teal="#008080",thistle="#d8bfd8",tomato="#ff6347",turquoise="#40e0d0",violet="#ee82ee",wheat="#f5deb3",white="#ffffff",whitesmoke="#f5f5f5",yellow="#ffff00",yellowgreen="#9acd32",cssColorNames={aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,goldenrod,gold,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavenderblush,lavender,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen};function hex2rgb(s,a){return a===void 0&&(a=[]),a[0]=(s>>16&255)/255,a[1]=(s>>8&255)/255,a[2]=(s&255)/255,a}function hex2string(s){var a=s.toString(16);return a="000000".substring(0,6-a.length)+a,"#"+a}function string2hex(s){return typeof s=="string"&&(s=cssColorNames[s.toLowerCase()]||s,s[0]==="#"&&(s=s.slice(1))),parseInt(s,16)}function rgb2hex(s){return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)}function mapPremultipliedBlendModes$1(){for(var s=[],a=[],l=0;l<32;l++)s[l]=l,a[l]=l;s[BLEND_MODES$5.NORMAL_NPM]=BLEND_MODES$5.NORMAL,s[BLEND_MODES$5.ADD_NPM]=BLEND_MODES$5.ADD,s[BLEND_MODES$5.SCREEN_NPM]=BLEND_MODES$5.SCREEN,a[BLEND_MODES$5.NORMAL]=BLEND_MODES$5.NORMAL_NPM,a[BLEND_MODES$5.ADD]=BLEND_MODES$5.ADD_NPM,a[BLEND_MODES$5.SCREEN]=BLEND_MODES$5.SCREEN_NPM;var d=[];return d.push(a),d.push(s),d}var premultiplyBlendMode=mapPremultipliedBlendModes$1();function correctBlendMode(s,a){return premultiplyBlendMode[a?1:0][s]}function premultiplyRgba(s,a,l,d){return l=l||new Float32Array(4),d||d===void 0?(l[0]=s[0]*a,l[1]=s[1]*a,l[2]=s[2]*a):(l[0]=s[0],l[1]=s[1],l[2]=s[2]),l[3]=a,l}function premultiplyTint(s,a){if(a===1)return(a*255<<24)+s;if(a===0)return 0;var l=s>>16&255,d=s>>8&255,v=s&255;return l=l*a+.5|0,d=d*a+.5|0,v=v*a+.5|0,(a*255<<24)+(l<<16)+(d<<8)+v}function premultiplyTintToRgba(s,a,l,d){return l=l||new Float32Array(4),l[0]=(s>>16&255)/255,l[1]=(s>>8&255)/255,l[2]=(s&255)/255,(d||d===void 0)&&(l[0]*=a,l[1]*=a,l[2]*=a),l[3]=a,l}function createIndicesForQuads(s,a){a===void 0&&(a=null);var l=s*6;if(a=a||new Uint16Array(l),a.length!==l)throw new Error("Out buffer length is incorrect, got "+a.length+" and expected "+l);for(var d=0,v=0;d<l;d+=6,v+=4)a[d+0]=v+0,a[d+1]=v+1,a[d+2]=v+2,a[d+3]=v+0,a[d+4]=v+2,a[d+5]=v+3;return a}function getBufferType(s){if(s.BYTES_PER_ELEMENT===4)return s instanceof Float32Array?"Float32Array":s instanceof Uint32Array?"Uint32Array":"Int32Array";if(s.BYTES_PER_ELEMENT===2){if(s instanceof Uint16Array)return"Uint16Array"}else if(s.BYTES_PER_ELEMENT===1&&s instanceof Uint8Array)return"Uint8Array";return null}var map$2={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays$1(s,a){for(var l=0,d=0,v={},m=0;m<s.length;m++)d+=a[m],l+=s[m].length;for(var g=new ArrayBuffer(l*4),T=null,b=0,m=0;m<s.length;m++){var R=a[m],C=s[m],w=getBufferType(C);v[w]||(v[w]=new map$2[w](g)),T=v[w];for(var A=0;A<C.length;A++){var S=(A/R|0)*d+b,O=A%R;T[S+O]=C[A]}b+=R}return new Float32Array(g)}function nextPow2(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function isPow2(s){return!(s&s-1)&&!!s}function log2(s){var a=(s>65535?1:0)<<4;s>>>=a;var l=(s>255?1:0)<<3;return s>>>=l,a|=l,l=(s>15?1:0)<<2,s>>>=l,a|=l,l=(s>3?1:0)<<1,s>>>=l,a|=l,a|s>>1}function removeItems(s,a,l){var d=s.length,v;if(!(a>=d||l===0)){l=a+l>d?d-a:l;var m=d-l;for(v=a;v<m;++v)s[v]=s[v+l];s.length=m}}function sign(s){return s===0?0:s<0?-1:1}var nextUid=0;function uid(){return++nextUid}var warnings$1={};function deprecation$1(s,a,l){if(l===void 0&&(l=3),!warnings$1[a]){var d=new Error().stack;typeof d>"u"?console.warn("PixiJS Deprecation Warning: ",a+`
Deprecated since v`+s):(d=d.split(`
`).splice(l).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a+`
Deprecated since v`+s),console.warn(d),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",a+`
Deprecated since v`+s),console.warn(d))),warnings$1[a]=!0}}var ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);function destroyTextureCache(){var s;for(s in TextureCache)TextureCache[s].destroy();for(s in BaseTextureCache)BaseTextureCache[s].destroy()}function clearTextureCache(){var s;for(s in TextureCache)delete TextureCache[s];for(s in BaseTextureCache)delete BaseTextureCache[s]}var CanvasRenderTarget=function(){function s(a,l,d){this.canvas=settings$1.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=d||settings$1.RESOLUTION,this.resize(a,l)}return s.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.resize=function(a,l){this.canvas.width=Math.round(a*this.resolution),this.canvas.height=Math.round(l*this.resolution)},s.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(s.prototype,"width",{get:function(){return this.canvas.width},set:function(a){this.canvas.width=Math.round(a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this.canvas.height},set:function(a){this.canvas.height=Math.round(a)},enumerable:!1,configurable:!0}),s}();function trimCanvas(s){var a=s.width,l=s.height,d=s.getContext("2d"),v=d.getImageData(0,0,a,l),m=v.data,g=m.length,T={top:null,left:null,right:null,bottom:null},b=null,R,C,w;for(R=0;R<g;R+=4)m[R+3]!==0&&(C=R/4%a,w=~~(R/4/a),T.top===null&&(T.top=w),(T.left===null||C<T.left)&&(T.left=C),(T.right===null||T.right<C)&&(T.right=C+1),(T.bottom===null||T.bottom<w)&&(T.bottom=w));return T.top!==null&&(a=T.right-T.left,l=T.bottom-T.top+1,b=d.getImageData(T.left,T.top,a,l)),{height:l,width:a,data:b}}var DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function decomposeDataUri(s){var a=DATA_URI.exec(s);if(a)return{mediaType:a[1]?a[1].toLowerCase():void 0,subType:a[2]?a[2].toLowerCase():void 0,charset:a[3]?a[3].toLowerCase():void 0,encoding:a[4]?a[4].toLowerCase():void 0,data:a[5]}}var tempAnchor$1;function determineCrossOrigin(s,a){if(a===void 0&&(a=globalThis.location),s.indexOf("data:")===0)return"";a=a||globalThis.location,tempAnchor$1||(tempAnchor$1=document.createElement("a")),tempAnchor$1.href=s;var l=url.parse(tempAnchor$1.href),d=!l.port&&a.port===""||l.port===a.port;return l.hostname!==a.hostname||!d||l.protocol!==a.protocol?"anonymous":""}function getResolutionOfUrl(s,a){var l=settings$1.RETINA_PREFIX.exec(s);return l?parseFloat(l[1]):a!==void 0?a:1}const utils=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache,CanvasRenderTarget,DATA_URI,ProgramCache,TextureCache,clearTextureCache,correctBlendMode,createIndicesForQuads,decomposeDataUri,deprecation:deprecation$1,destroyTextureCache,determineCrossOrigin,getBufferType,getResolutionOfUrl,hex2rgb,hex2string,interleaveTypedArrays:interleaveTypedArrays$1,isPow2,isWebGLSupported,log2,nextPow2,premultiplyBlendMode,premultiplyRgba,premultiplyTint,premultiplyTintToRgba,removeItems,rgb2hex,sayHello,sign,skipHello,string2hex,trimCanvas,uid,url,isMobile:isMobile$2,EventEmitter,earcut:earcut$1.exports},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180,SHAPES;(function(s){s[s.POLY=0]="POLY",s[s.RECT=1]="RECT",s[s.CIRC=2]="CIRC",s[s.ELIP=3]="ELIP",s[s.RREC=4]="RREC"})(SHAPES||(SHAPES={}));var Point=function(){function s(a,l){a===void 0&&(a=0),l===void 0&&(l=0),this.x=0,this.y=0,this.x=a,this.y=l}return s.prototype.clone=function(){return new s(this.x,this.y)},s.prototype.copyFrom=function(a){return this.set(a.x,a.y),this},s.prototype.copyTo=function(a){return a.set(this.x,this.y),a},s.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},s.prototype.set=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.x=a,this.y=l,this},s.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},s}(),tempPoints$1=[new Point,new Point,new Point,new Point],Rectangle=function(){function s(a,l,d,v){a===void 0&&(a=0),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),this.x=Number(a),this.y=Number(l),this.width=Number(d),this.height=Number(v),this.type=SHAPES.RECT}return Object.defineProperty(s.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(s,"EMPTY",{get:function(){return new s(0,0,0,0)},enumerable:!1,configurable:!0}),s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.copyFrom=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},s.prototype.copyTo=function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},s.prototype.contains=function(a,l){return this.width<=0||this.height<=0?!1:a>=this.x&&a<this.x+this.width&&l>=this.y&&l<this.y+this.height},s.prototype.intersects=function(a,l){if(!l){var d=this.x<a.x?a.x:this.x,v=this.right>a.right?a.right:this.right;if(v<=d)return!1;var m=this.y<a.y?a.y:this.y,g=this.bottom>a.bottom?a.bottom:this.bottom;return g>m}var T=this.left,b=this.right,R=this.top,C=this.bottom;if(b<=T||C<=R)return!1;var w=tempPoints$1[0].set(a.left,a.top),A=tempPoints$1[1].set(a.left,a.bottom),S=tempPoints$1[2].set(a.right,a.top),O=tempPoints$1[3].set(a.right,a.bottom);if(S.x<=w.x||A.y<=w.y)return!1;var L=Math.sign(l.a*l.d-l.b*l.c);if(L===0||(l.apply(w,w),l.apply(A,A),l.apply(S,S),l.apply(O,O),Math.max(w.x,A.x,S.x,O.x)<=T||Math.min(w.x,A.x,S.x,O.x)>=b||Math.max(w.y,A.y,S.y,O.y)<=R||Math.min(w.y,A.y,S.y,O.y)>=C))return!1;var N=L*(A.y-w.y),U=L*(w.x-A.x),$=N*T+U*R,G=N*b+U*R,z=N*T+U*C,V=N*b+U*C;if(Math.max($,G,z,V)<=N*w.x+U*w.y||Math.min($,G,z,V)>=N*O.x+U*O.y)return!1;var X=L*(w.y-S.y),ie=L*(S.x-w.x),re=X*T+ie*R,J=X*b+ie*R,se=X*T+ie*C,xe=X*b+ie*C;return!(Math.max(re,J,se,xe)<=X*w.x+ie*w.y||Math.min(re,J,se,xe)>=X*O.x+ie*O.y)},s.prototype.pad=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.x-=a,this.y-=l,this.width+=a*2,this.height+=l*2,this},s.prototype.fit=function(a){var l=Math.max(this.x,a.x),d=Math.min(this.x+this.width,a.x+a.width),v=Math.max(this.y,a.y),m=Math.min(this.y+this.height,a.y+a.height);return this.x=l,this.width=Math.max(d-l,0),this.y=v,this.height=Math.max(m-v,0),this},s.prototype.ceil=function(a,l){a===void 0&&(a=1),l===void 0&&(l=.001);var d=Math.ceil((this.x+this.width-l)*a)/a,v=Math.ceil((this.y+this.height-l)*a)/a;return this.x=Math.floor((this.x+l)*a)/a,this.y=Math.floor((this.y+l)*a)/a,this.width=d-this.x,this.height=v-this.y,this},s.prototype.enlarge=function(a){var l=Math.min(this.x,a.x),d=Math.max(this.x+this.width,a.x+a.width),v=Math.min(this.y,a.y),m=Math.max(this.y+this.height,a.y+a.height);return this.x=l,this.width=d-l,this.y=v,this.height=m-v,this},s.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},s}(),Circle=function(){function s(a,l,d){a===void 0&&(a=0),l===void 0&&(l=0),d===void 0&&(d=0),this.x=a,this.y=l,this.radius=d,this.type=SHAPES.CIRC}return s.prototype.clone=function(){return new s(this.x,this.y,this.radius)},s.prototype.contains=function(a,l){if(this.radius<=0)return!1;var d=this.radius*this.radius,v=this.x-a,m=this.y-l;return v*=v,m*=m,v+m<=d},s.prototype.getBounds=function(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},s.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},s}(),Ellipse=function(){function s(a,l,d,v){a===void 0&&(a=0),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),this.x=a,this.y=l,this.width=d,this.height=v,this.type=SHAPES.ELIP}return s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.contains=function(a,l){if(this.width<=0||this.height<=0)return!1;var d=(a-this.x)/this.width,v=(l-this.y)/this.height;return d*=d,v*=v,d+v<=1},s.prototype.getBounds=function(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},s.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},s}(),Polygon=function(){function s(){for(var a=arguments,l=[],d=0;d<arguments.length;d++)l[d]=a[d];var v=Array.isArray(l[0])?l[0]:l;if(typeof v[0]!="number"){for(var m=[],g=0,T=v.length;g<T;g++)m.push(v[g].x,v[g].y);v=m}this.points=v,this.type=SHAPES.POLY,this.closeStroke=!0}return s.prototype.clone=function(){var a=this.points.slice(),l=new s(a);return l.closeStroke=this.closeStroke,l},s.prototype.contains=function(a,l){for(var d=!1,v=this.points.length/2,m=0,g=v-1;m<v;g=m++){var T=this.points[m*2],b=this.points[m*2+1],R=this.points[g*2],C=this.points[g*2+1],w=b>l!=C>l&&a<(R-T)*((l-b)/(C-b))+T;w&&(d=!d)}return d},s.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(a,l){return a+", "+l},"")+"]")},s}(),RoundedRectangle=function(){function s(a,l,d,v,m){a===void 0&&(a=0),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=20),this.x=a,this.y=l,this.width=d,this.height=v,this.radius=m,this.type=SHAPES.RREC}return s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.radius)},s.prototype.contains=function(a,l){if(this.width<=0||this.height<=0)return!1;if(a>=this.x&&a<=this.x+this.width&&l>=this.y&&l<=this.y+this.height){var d=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(l>=this.y+d&&l<=this.y+this.height-d||a>=this.x+d&&a<=this.x+this.width-d)return!0;var v=a-(this.x+d),m=l-(this.y+d),g=d*d;if(v*v+m*m<=g||(v=a-(this.x+this.width-d),v*v+m*m<=g)||(m=l-(this.y+this.height-d),v*v+m*m<=g)||(v=a-(this.x+d),v*v+m*m<=g))return!0}return!1},s.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},s}(),ObservablePoint=function(){function s(a,l,d,v){d===void 0&&(d=0),v===void 0&&(v=0),this._x=d,this._y=v,this.cb=a,this.scope=l}return s.prototype.clone=function(a,l){return a===void 0&&(a=this.cb),l===void 0&&(l=this.scope),new s(a,l,this._x,this._y)},s.prototype.set=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),(this._x!==a||this._y!==l)&&(this._x=a,this._y=l,this.cb.call(this.scope)),this},s.prototype.copyFrom=function(a){return(this._x!==a.x||this._y!==a.y)&&(this._x=a.x,this._y=a.y,this.cb.call(this.scope)),this},s.prototype.copyTo=function(a){return a.set(this._x,this._y),a},s.prototype.equals=function(a){return a.x===this._x&&a.y===this._y},s.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(s.prototype,"x",{get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"y",{get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),s}(),Matrix=function(){function s(a,l,d,v,m,g){a===void 0&&(a=1),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=1),m===void 0&&(m=0),g===void 0&&(g=0),this.array=null,this.a=a,this.b=l,this.c=d,this.d=v,this.tx=m,this.ty=g}return s.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},s.prototype.set=function(a,l,d,v,m,g){return this.a=a,this.b=l,this.c=d,this.d=v,this.tx=m,this.ty=g,this},s.prototype.toArray=function(a,l){this.array||(this.array=new Float32Array(9));var d=l||this.array;return a?(d[0]=this.a,d[1]=this.b,d[2]=0,d[3]=this.c,d[4]=this.d,d[5]=0,d[6]=this.tx,d[7]=this.ty,d[8]=1):(d[0]=this.a,d[1]=this.c,d[2]=this.tx,d[3]=this.b,d[4]=this.d,d[5]=this.ty,d[6]=0,d[7]=0,d[8]=1),d},s.prototype.apply=function(a,l){l=l||new Point;var d=a.x,v=a.y;return l.x=this.a*d+this.c*v+this.tx,l.y=this.b*d+this.d*v+this.ty,l},s.prototype.applyInverse=function(a,l){l=l||new Point;var d=1/(this.a*this.d+this.c*-this.b),v=a.x,m=a.y;return l.x=this.d*d*v+-this.c*d*m+(this.ty*this.c-this.tx*this.d)*d,l.y=this.a*d*m+-this.b*d*v+(-this.ty*this.a+this.tx*this.b)*d,l},s.prototype.translate=function(a,l){return this.tx+=a,this.ty+=l,this},s.prototype.scale=function(a,l){return this.a*=a,this.d*=l,this.c*=a,this.b*=l,this.tx*=a,this.ty*=l,this},s.prototype.rotate=function(a){var l=Math.cos(a),d=Math.sin(a),v=this.a,m=this.c,g=this.tx;return this.a=v*l-this.b*d,this.b=v*d+this.b*l,this.c=m*l-this.d*d,this.d=m*d+this.d*l,this.tx=g*l-this.ty*d,this.ty=g*d+this.ty*l,this},s.prototype.append=function(a){var l=this.a,d=this.b,v=this.c,m=this.d;return this.a=a.a*l+a.b*v,this.b=a.a*d+a.b*m,this.c=a.c*l+a.d*v,this.d=a.c*d+a.d*m,this.tx=a.tx*l+a.ty*v+this.tx,this.ty=a.tx*d+a.ty*m+this.ty,this},s.prototype.setTransform=function(a,l,d,v,m,g,T,b,R){return this.a=Math.cos(T+R)*m,this.b=Math.sin(T+R)*m,this.c=-Math.sin(T-b)*g,this.d=Math.cos(T-b)*g,this.tx=a-(d*this.a+v*this.c),this.ty=l-(d*this.b+v*this.d),this},s.prototype.prepend=function(a){var l=this.tx;if(a.a!==1||a.b!==0||a.c!==0||a.d!==1){var d=this.a,v=this.c;this.a=d*a.a+this.b*a.c,this.b=d*a.b+this.b*a.d,this.c=v*a.a+this.d*a.c,this.d=v*a.b+this.d*a.d}return this.tx=l*a.a+this.ty*a.c+a.tx,this.ty=l*a.b+this.ty*a.d+a.ty,this},s.prototype.decompose=function(a){var l=this.a,d=this.b,v=this.c,m=this.d,g=a.pivot,T=-Math.atan2(-v,m),b=Math.atan2(d,l),R=Math.abs(T+b);return R<1e-5||Math.abs(PI_2-R)<1e-5?(a.rotation=b,a.skew.x=a.skew.y=0):(a.rotation=0,a.skew.x=T,a.skew.y=b),a.scale.x=Math.sqrt(l*l+d*d),a.scale.y=Math.sqrt(v*v+m*m),a.position.x=this.tx+(g.x*l+g.y*v),a.position.y=this.ty+(g.x*d+g.y*m),a},s.prototype.invert=function(){var a=this.a,l=this.b,d=this.c,v=this.d,m=this.tx,g=a*v-l*d;return this.a=v/g,this.b=-l/g,this.c=-d/g,this.d=a/g,this.tx=(d*this.ty-v*m)/g,this.ty=-(a*this.ty-l*m)/g,this},s.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},s.prototype.clone=function(){var a=new s;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},s.prototype.copyTo=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},s.prototype.copyFrom=function(a){return this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.tx=a.tx,this.ty=a.ty,this},s.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(s,"IDENTITY",{get:function(){return new s},enumerable:!1,configurable:!0}),Object.defineProperty(s,"TEMP_MATRIX",{get:function(){return new s},enumerable:!1,configurable:!0}),s}(),ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(var s=0;s<16;s++){var a=[];rotationCayley.push(a);for(var l=0;l<16;l++)for(var d=signum(ux[s]*ux[l]+vx[s]*uy[l]),v=signum(uy[s]*ux[l]+vy[s]*uy[l]),m=signum(ux[s]*vx[l]+vx[s]*vy[l]),g=signum(uy[s]*vx[l]+vy[s]*vy[l]),T=0;T<16;T++)if(ux[T]===d&&uy[T]===v&&vx[T]===m&&vy[T]===g){a.push(T);break}}for(var s=0;s<16;s++){var b=new Matrix;b.set(ux[s],uy[s],vx[s],vy[s],0,0),rotationMatrices.push(b)}}init();var groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(s){return ux[s]},uY:function(s){return uy[s]},vX:function(s){return vx[s]},vY:function(s){return vy[s]},inv:function(s){return s&8?s&15:-s&7},add:function(s,a){return rotationCayley[s][a]},sub:function(s,a){return rotationCayley[s][groupD8.inv(a)]},rotate180:function(s){return s^4},isVertical:function(s){return(s&3)===2},byDirection:function(s,a){return Math.abs(s)*2<=Math.abs(a)?a>=0?groupD8.S:groupD8.N:Math.abs(a)*2<=Math.abs(s)?s>0?groupD8.E:groupD8.W:a>0?s>0?groupD8.SE:groupD8.SW:s>0?groupD8.NE:groupD8.NW},matrixAppendRotationInv:function(s,a,l,d){l===void 0&&(l=0),d===void 0&&(d=0);var v=rotationMatrices[groupD8.inv(a)];v.tx=l,v.ty=d,s.append(v)}},Transform=function(){function s(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return s.prototype.onChange=function(){this._localID++},s.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},s.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},s.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale.x,a.b=this._sx*this.scale.x,a.c=this._cy*this.scale.y,a.d=this._sy*this.scale.y,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d),this._currentLocalID=this._localID,this._parentID=-1)},s.prototype.updateTransform=function(a){var l=this.localTransform;if(this._localID!==this._currentLocalID&&(l.a=this._cx*this.scale.x,l.b=this._sx*this.scale.x,l.c=this._cy*this.scale.y,l.d=this._sy*this.scale.y,l.tx=this.position.x-(this.pivot.x*l.a+this.pivot.y*l.c),l.ty=this.position.y-(this.pivot.x*l.b+this.pivot.y*l.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var d=a.worldTransform,v=this.worldTransform;v.a=l.a*d.a+l.b*d.c,v.b=l.a*d.b+l.b*d.d,v.c=l.c*d.a+l.d*d.c,v.d=l.c*d.b+l.d*d.d,v.tx=l.tx*d.a+l.ty*d.c+d.tx,v.ty=l.tx*d.b+l.ty*d.d+d.ty,this._parentID=a._worldID,this._worldID++}},s.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},Object.defineProperty(s.prototype,"rotation",{get:function(){return this._rotation},set:function(a){this._rotation!==a&&(this._rotation=a,this.updateSkew())},enumerable:!1,configurable:!0}),s.IDENTITY=new s,s}();/*!
 * @pixi/display - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.SORTABLE_CHILDREN=!1;var Bounds$1=function(){function s(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return s.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},s.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},s.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(a=a||new Rectangle(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},s.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},s.prototype.addPointMatrix=function(a,l){var d=a.a,v=a.b,m=a.c,g=a.d,T=a.tx,b=a.ty,R=d*l.x+m*l.y+T,C=v*l.x+g*l.y+b;this.minX=Math.min(this.minX,R),this.maxX=Math.max(this.maxX,R),this.minY=Math.min(this.minY,C),this.maxY=Math.max(this.maxY,C)},s.prototype.addQuad=function(a){var l=this.minX,d=this.minY,v=this.maxX,m=this.maxY,g=a[0],T=a[1];l=g<l?g:l,d=T<d?T:d,v=g>v?g:v,m=T>m?T:m,g=a[2],T=a[3],l=g<l?g:l,d=T<d?T:d,v=g>v?g:v,m=T>m?T:m,g=a[4],T=a[5],l=g<l?g:l,d=T<d?T:d,v=g>v?g:v,m=T>m?T:m,g=a[6],T=a[7],l=g<l?g:l,d=T<d?T:d,v=g>v?g:v,m=T>m?T:m,this.minX=l,this.minY=d,this.maxX=v,this.maxY=m},s.prototype.addFrame=function(a,l,d,v,m){this.addFrameMatrix(a.worldTransform,l,d,v,m)},s.prototype.addFrameMatrix=function(a,l,d,v,m){var g=a.a,T=a.b,b=a.c,R=a.d,C=a.tx,w=a.ty,A=this.minX,S=this.minY,O=this.maxX,L=this.maxY,N=g*l+b*d+C,U=T*l+R*d+w;A=N<A?N:A,S=U<S?U:S,O=N>O?N:O,L=U>L?U:L,N=g*v+b*d+C,U=T*v+R*d+w,A=N<A?N:A,S=U<S?U:S,O=N>O?N:O,L=U>L?U:L,N=g*l+b*m+C,U=T*l+R*m+w,A=N<A?N:A,S=U<S?U:S,O=N>O?N:O,L=U>L?U:L,N=g*v+b*m+C,U=T*v+R*m+w,A=N<A?N:A,S=U<S?U:S,O=N>O?N:O,L=U>L?U:L,this.minX=A,this.minY=S,this.maxX=O,this.maxY=L},s.prototype.addVertexData=function(a,l,d){for(var v=this.minX,m=this.minY,g=this.maxX,T=this.maxY,b=l;b<d;b+=2){var R=a[b],C=a[b+1];v=R<v?R:v,m=C<m?C:m,g=R>g?R:g,T=C>T?C:T}this.minX=v,this.minY=m,this.maxX=g,this.maxY=T},s.prototype.addVertices=function(a,l,d,v){this.addVerticesMatrix(a.worldTransform,l,d,v)},s.prototype.addVerticesMatrix=function(a,l,d,v,m,g){m===void 0&&(m=0),g===void 0&&(g=m);for(var T=a.a,b=a.b,R=a.c,C=a.d,w=a.tx,A=a.ty,S=this.minX,O=this.minY,L=this.maxX,N=this.maxY,U=d;U<v;U+=2){var $=l[U],G=l[U+1],z=T*$+R*G+w,V=C*G+b*$+A;S=Math.min(S,z-m),L=Math.max(L,z+m),O=Math.min(O,V-g),N=Math.max(N,V+g)}this.minX=S,this.minY=O,this.maxX=L,this.maxY=N},s.prototype.addBounds=function(a){var l=this.minX,d=this.minY,v=this.maxX,m=this.maxY;this.minX=a.minX<l?a.minX:l,this.minY=a.minY<d?a.minY:d,this.maxX=a.maxX>v?a.maxX:v,this.maxY=a.maxY>m?a.maxY:m},s.prototype.addBoundsMask=function(a,l){var d=a.minX>l.minX?a.minX:l.minX,v=a.minY>l.minY?a.minY:l.minY,m=a.maxX<l.maxX?a.maxX:l.maxX,g=a.maxY<l.maxY?a.maxY:l.maxY;if(d<=m&&v<=g){var T=this.minX,b=this.minY,R=this.maxX,C=this.maxY;this.minX=d<T?d:T,this.minY=v<b?v:b,this.maxX=m>R?m:R,this.maxY=g>C?g:C}},s.prototype.addBoundsMatrix=function(a,l){this.addFrameMatrix(l,a.minX,a.minY,a.maxX,a.maxY)},s.prototype.addBoundsArea=function(a,l){var d=a.minX>l.x?a.minX:l.x,v=a.minY>l.y?a.minY:l.y,m=a.maxX<l.x+l.width?a.maxX:l.x+l.width,g=a.maxY<l.y+l.height?a.maxY:l.y+l.height;if(d<=m&&v<=g){var T=this.minX,b=this.minY,R=this.maxX,C=this.maxY;this.minX=d<T?d:T,this.minY=v<b?v:b,this.maxX=m>R?m:R,this.maxY=g>C?g:C}},s.prototype.pad=function(a,l){a===void 0&&(a=0),l===void 0&&(l=a),this.isEmpty()||(this.minX-=a,this.maxX+=a,this.minY-=l,this.maxY+=l)},s.prototype.addFramePad=function(a,l,d,v,m,g){a-=m,l-=g,d+=m,v+=g,this.minX=this.minX<a?this.minX:a,this.maxX=this.maxX>d?this.maxX:d,this.minY=this.minY<l?this.minY:l,this.maxY=this.maxY>v?this.maxY:v},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$j=function(s,a){return extendStatics$j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$j(s,a)};function __extends$j(s,a){extendStatics$j(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var DisplayObject=function(s){__extends$j(a,s);function a(){var l=s.call(this)||this;return l.tempDisplayObjectParent=null,l.transform=new Transform,l.alpha=1,l.visible=!0,l.renderable=!0,l.cullable=!1,l.cullArea=null,l.parent=null,l.worldAlpha=1,l._lastSortedIndex=0,l._zIndex=0,l.filterArea=null,l.filters=null,l._enabledFilters=null,l._bounds=new Bounds$1,l._localBounds=null,l._boundsID=0,l._boundsRect=null,l._localBoundsRect=null,l._mask=null,l._maskRefCount=0,l._destroyed=!1,l.isSprite=!1,l.isMask=!1,l}return a.mixin=function(l){for(var d=Object.keys(l),v=0;v<d.length;++v){var m=d[v];Object.defineProperty(a.prototype,m,Object.getOwnPropertyDescriptor(l,m))}},Object.defineProperty(a.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),a.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},a.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},a.prototype.getBounds=function(l,d){return l||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),d||(this._boundsRect||(this._boundsRect=new Rectangle),d=this._boundsRect),this._bounds.getRectangle(d)},a.prototype.getLocalBounds=function(l){l||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),l=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds$1);var d=this.transform,v=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var m=this._bounds,g=this._boundsID;this._bounds=this._localBounds;var T=this.getBounds(!1,l);return this.parent=v,this.transform=d,this._bounds=m,this._bounds.updateID+=this._boundsID-g,T},a.prototype.toGlobal=function(l,d,v){return v===void 0&&(v=!1),v||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(l,d)},a.prototype.toLocal=function(l,d,v,m){return d&&(l=d.toGlobal(l,v,m)),m||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(l,v)},a.prototype.setParent=function(l){if(!l||!l.addChild)throw new Error("setParent: Argument must be a Container");return l.addChild(this),l},a.prototype.setTransform=function(l,d,v,m,g,T,b,R,C){return l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=1),m===void 0&&(m=1),g===void 0&&(g=0),T===void 0&&(T=0),b===void 0&&(b=0),R===void 0&&(R=0),C===void 0&&(C=0),this.position.x=l,this.position.y=d,this.scale.x=v||1,this.scale.y=m||1,this.rotation=g,this.skew.x=T,this.skew.y=b,this.pivot.x=R,this.pivot.y=C,this},a.prototype.destroy=function(l){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(a.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),a.prototype.enableTempParent=function(){var l=this.parent;return this.parent=this._tempDisplayObjectParent,l},a.prototype.disableTempParent=function(l){this.parent=l},Object.defineProperty(a.prototype,"x",{get:function(){return this.position.x},set:function(l){this.transform.position.x=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.position.y},set:function(l){this.transform.position.y=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this.transform.position},set:function(l){this.transform.position.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this.transform.scale},set:function(l){this.transform.scale.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(l){this.transform.pivot.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"skew",{get:function(){return this.transform.skew},set:function(l){this.transform.skew.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(l){this.transform.rotation=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.transform.rotation*RAD_TO_DEG},set:function(l){this.transform.rotation=l*DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"zIndex",{get:function(){return this._zIndex},set:function(l){this._zIndex=l,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"worldVisible",{get:function(){var l=this;do{if(!l.visible)return!1;l=l.parent}while(l);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mask",{get:function(){return this._mask},set:function(l){if(this._mask!==l){if(this._mask){var d=this._mask.isMaskData?this._mask.maskObject:this._mask;d&&(d._maskRefCount--,d._maskRefCount===0&&(d.renderable=!0,d.isMask=!1))}if(this._mask=l,this._mask){var d=this._mask.isMaskData?this._mask.maskObject:this._mask;d&&(d._maskRefCount===0&&(d.renderable=!1,d.isMask=!0),d._maskRefCount++)}}},enumerable:!1,configurable:!0}),a}(EventEmitter),TemporaryDisplayObject=function(s){__extends$j(a,s);function a(){var l=s!==null&&s.apply(this,arguments)||this;return l.sortDirty=null,l}return a}(DisplayObject);DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$4;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$4||(ENV$4={}));var RENDERER_TYPE$4;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$4||(RENDERER_TYPE$4={}));var BUFFER_BITS$4;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$4||(BUFFER_BITS$4={}));var BLEND_MODES$4;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$4||(BLEND_MODES$4={}));var DRAW_MODES$4;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$4||(DRAW_MODES$4={}));var FORMATS$4;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$4||(FORMATS$4={}));var TARGETS$4;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$4||(TARGETS$4={}));var TYPES$4;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$4||(TYPES$4={}));var SAMPLER_TYPES$4;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$4||(SAMPLER_TYPES$4={}));var SCALE_MODES$4;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$4||(SCALE_MODES$4={}));var WRAP_MODES$4;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$4||(WRAP_MODES$4={}));var MIPMAP_MODES$4;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$4||(MIPMAP_MODES$4={}));var ALPHA_MODES$4;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$4||(ALPHA_MODES$4={}));var CLEAR_MODES$4;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$4||(CLEAR_MODES$4={}));var GC_MODES$4;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$4||(GC_MODES$4={}));var PRECISION$4;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$4||(PRECISION$4={}));var MASK_TYPES$4;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR"})(MASK_TYPES$4||(MASK_TYPES$4={}));var COLOR_MASK_BITS$4;(function(s){s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=4]="BLUE",s[s.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$4||(COLOR_MASK_BITS$4={}));var MSAA_QUALITY$4;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$4||(MSAA_QUALITY$4={}));var BUFFER_TYPE$4;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$4||(BUFFER_TYPE$4={}));function sortChildren(s,a){return s.zIndex===a.zIndex?s._lastSortedIndex-a._lastSortedIndex:s.zIndex-a.zIndex}var Container=function(s){__extends$j(a,s);function a(){var l=s.call(this)||this;return l.children=[],l.sortableChildren=settings$1.SORTABLE_CHILDREN,l.sortDirty=!1,l}return a.prototype.onChildrenChange=function(l){},a.prototype.addChild=function(){for(var l=arguments,d=[],v=0;v<arguments.length;v++)d[v]=l[v];if(d.length>1)for(var m=0;m<d.length;m++)this.addChild(d[m]);else{var g=d[0];g.parent&&g.parent.removeChild(g),g.parent=this,this.sortDirty=!0,g.transform._parentID=-1,this.children.push(g),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",g,this,this.children.length-1),g.emit("added",this)}return d[0]},a.prototype.addChildAt=function(l,d){if(d<0||d>this.children.length)throw new Error(l+"addChildAt: The index "+d+" supplied is out of bounds "+this.children.length);return l.parent&&l.parent.removeChild(l),l.parent=this,this.sortDirty=!0,l.transform._parentID=-1,this.children.splice(d,0,l),this._boundsID++,this.onChildrenChange(d),l.emit("added",this),this.emit("childAdded",l,this,d),l},a.prototype.swapChildren=function(l,d){if(l!==d){var v=this.getChildIndex(l),m=this.getChildIndex(d);this.children[v]=d,this.children[m]=l,this.onChildrenChange(v<m?v:m)}},a.prototype.getChildIndex=function(l){var d=this.children.indexOf(l);if(d===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return d},a.prototype.setChildIndex=function(l,d){if(d<0||d>=this.children.length)throw new Error("The index "+d+" supplied is out of bounds "+this.children.length);var v=this.getChildIndex(l);removeItems(this.children,v,1),this.children.splice(d,0,l),this.onChildrenChange(d)},a.prototype.getChildAt=function(l){if(l<0||l>=this.children.length)throw new Error("getChildAt: Index ("+l+") does not exist.");return this.children[l]},a.prototype.removeChild=function(){for(var l=arguments,d=[],v=0;v<arguments.length;v++)d[v]=l[v];if(d.length>1)for(var m=0;m<d.length;m++)this.removeChild(d[m]);else{var g=d[0],T=this.children.indexOf(g);if(T===-1)return null;g.parent=null,g.transform._parentID=-1,removeItems(this.children,T,1),this._boundsID++,this.onChildrenChange(T),g.emit("removed",this),this.emit("childRemoved",g,this,T)}return d[0]},a.prototype.removeChildAt=function(l){var d=this.getChildAt(l);return d.parent=null,d.transform._parentID=-1,removeItems(this.children,l,1),this._boundsID++,this.onChildrenChange(l),d.emit("removed",this),this.emit("childRemoved",d,this,l),d},a.prototype.removeChildren=function(l,d){l===void 0&&(l=0),d===void 0&&(d=this.children.length);var v=l,m=d,g=m-v,T;if(g>0&&g<=m){T=this.children.splice(v,g);for(var b=0;b<T.length;++b)T[b].parent=null,T[b].transform&&(T[b].transform._parentID=-1);this._boundsID++,this.onChildrenChange(l);for(var b=0;b<T.length;++b)T[b].emit("removed",this),this.emit("childRemoved",T[b],this,b);return T}else if(g===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},a.prototype.sortChildren=function(){for(var l=!1,d=0,v=this.children.length;d<v;++d){var m=this.children[d];m._lastSortedIndex=d,!l&&m.zIndex!==0&&(l=!0)}l&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},a.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var l=0,d=this.children.length;l<d;++l){var v=this.children[l];v.visible&&v.updateTransform()}},a.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var l=0;l<this.children.length;l++){var d=this.children[l];if(!(!d.visible||!d.renderable))if(d.calculateBounds(),d._mask){var v=d._mask.isMaskData?d._mask.maskObject:d._mask;v?(v.calculateBounds(),this._bounds.addBoundsMask(d._bounds,v._bounds)):this._bounds.addBounds(d._bounds)}else d.filterArea?this._bounds.addBoundsArea(d._bounds,d.filterArea):this._bounds.addBounds(d._bounds)}this._bounds.updateID=this._boundsID},a.prototype.getLocalBounds=function(l,d){d===void 0&&(d=!1);var v=s.prototype.getLocalBounds.call(this,l);if(!d)for(var m=0,g=this.children.length;m<g;++m){var T=this.children[m];T.visible&&T.updateTransform()}return v},a.prototype._calculateBounds=function(){},a.prototype._renderWithCulling=function(l){var d=l.renderTexture.sourceFrame;if(d.width>0&&d.height>0){var v,m;if(this.cullArea?(v=this.cullArea,m=this.worldTransform):this._render!==a.prototype._render&&(v=this.getBounds(!0)),v&&d.intersects(v,m))this._render(l);else if(this.cullArea)return;for(var g=0,T=this.children.length;g<T;++g){var b=this.children[g],R=b.cullable;b.cullable=R||!this.cullArea,b.render(l),b.cullable=R}}},a.prototype.render=function(l){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(l);else if(this.cullable)this._renderWithCulling(l);else{this._render(l);for(var d=0,v=this.children.length;d<v;++d)this.children[d].render(l)}},a.prototype.renderAdvanced=function(l){var d=this.filters,v=this._mask;if(d){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var m=0;m<d.length;m++)d[m].enabled&&this._enabledFilters.push(d[m])}var g=d&&this._enabledFilters&&this._enabledFilters.length||v&&(!v.isMaskData||v.enabled&&(v.autoDetect||v.type!==MASK_TYPES$4.NONE));if(g&&l.batch.flush(),d&&this._enabledFilters&&this._enabledFilters.length&&l.filter.push(this,this._enabledFilters),v&&l.mask.push(this,this._mask),this.cullable)this._renderWithCulling(l);else{this._render(l);for(var m=0,T=this.children.length;m<T;++m)this.children[m].render(l)}g&&l.batch.flush(),v&&l.mask.pop(this),d&&this._enabledFilters&&this._enabledFilters.length&&l.filter.pop()},a.prototype._render=function(l){},a.prototype.destroy=function(l){s.prototype.destroy.call(this),this.sortDirty=!1;var d=typeof l=="boolean"?l:l&&l.children,v=this.removeChildren(0,this.children.length);if(d)for(var m=0;m<v.length;++m)v[m].destroy(l)},Object.defineProperty(a.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(l){var d=this.getLocalBounds().width;d!==0?this.scale.x=l/d:this.scale.x=1,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(l){var d=this.getLocalBounds().height;d!==0?this.scale.y=l/d:this.scale.y=1,this._height=l},enumerable:!1,configurable:!0}),a}(DisplayObject);Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$2=function(){return __assign$2=Object.assign||function(a){for(var l=arguments,d,v=1,m=arguments.length;v<m;v++){d=l[v];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a},__assign$2.apply(this,arguments)},ExtensionType;(function(s){s.Application="application",s.RendererPlugin="renderer-webgl-plugin",s.CanvasRendererPlugin="renderer-canvas-plugin",s.Loader="loader",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser"})(ExtensionType||(ExtensionType={}));var normalizeExtension=function(s){if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");var a=typeof s.extension!="object"?{type:s.extension}:s.extension;s=__assign$2(__assign$2({},a),{ref:s})}if(typeof s=="object")s=__assign$2({},s);else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},extensions={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var s=arguments,a=this,l=[],d=0;d<arguments.length;d++)l[d]=s[d];return l.map(normalizeExtension).forEach(function(v){v.type.forEach(function(m){var g,T;return(T=(g=a._removeHandlers)[m])===null||T===void 0?void 0:T.call(g,v)})}),this},add:function(){for(var s=arguments,a=this,l=[],d=0;d<arguments.length;d++)l[d]=s[d];return l.map(normalizeExtension).forEach(function(v){v.type.forEach(function(m){var g=a._addHandlers,T=a._queue;g[m]?g[m](v):(T[m]=T[m]||[],T[m].push(v))})}),this},handle:function(s,a,l){var d=this._addHandlers=this._addHandlers||{},v=this._removeHandlers=this._removeHandlers||{};if(d[s]||v[s])throw new Error("Extension type "+s+" already has a handler");d[s]=a,v[s]=l;var m=this._queue;return m[s]&&(m[s].forEach(function(g){return a(g)}),delete m[s]),this},handleByMap:function(s,a){return this.handle(s,function(l){a[l.name]=l.ref},function(l){delete a[l.name]})},handleByList:function(s,a){return this.handle(s,function(l){var d,v;a.push(l.ref),s===ExtensionType.Loader&&((v=(d=l.ref).add)===null||v===void 0||v.call(d))},function(l){var d=a.indexOf(l.ref);d!==-1&&a.splice(d,1)})}};/*!
 * @pixi/runner - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Runner=function(){function s(a){this.items=[],this._name=a,this._aliasCount=0}return s.prototype.emit=function(a,l,d,v,m,g,T,b){if(arguments.length>8)throw new Error("max arguments reached");var R=this,C=R.name,w=R.items;this._aliasCount++;for(var A=0,S=w.length;A<S;A++)w[A][C](a,l,d,v,m,g,T,b);return w===this.items&&this._aliasCount--,this},s.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},s.prototype.add=function(a){return a[this._name]&&(this.ensureNonAliasedItems(),this.remove(a),this.items.push(a)),this},s.prototype.remove=function(a){var l=this.items.indexOf(a);return l!==-1&&(this.ensureNonAliasedItems(),this.items.splice(l,1)),this},s.prototype.contains=function(a){return this.items.indexOf(a)!==-1},s.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},s.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(s.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),s}();Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});/*!
 * @pixi/ticker - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.TARGET_FPMS=.06;var UPDATE_PRIORITY;(function(s){s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY"})(UPDATE_PRIORITY||(UPDATE_PRIORITY={}));var TickerListener=function(){function s(a,l,d,v){l===void 0&&(l=null),d===void 0&&(d=0),v===void 0&&(v=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=a,this.context=l,this.priority=d,this.once=v}return s.prototype.match=function(a,l){return l===void 0&&(l=null),this.fn===a&&this.context===l},s.prototype.emit=function(a){this.fn&&(this.context?this.fn.call(this.context,a):this.fn(a));var l=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),l},s.prototype.connect=function(a){this.previous=a,a.next&&(a.next.previous=this),this.next=a.next,a.next=this},s.prototype.destroy=function(a){a===void 0&&(a=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var l=this.next;return this.next=a?null:l,this.previous=null,l},s}(),Ticker=function(){function s(){var a=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/settings$1.TARGET_FPMS,this.elapsedMS=1/settings$1.TARGET_FPMS,this._tick=function(l){a._requestId=null,a.started&&(a.update(l),a.started&&a._requestId===null&&a._head.next&&(a._requestId=requestAnimationFrame(a._tick)))}}return s.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},s.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},s.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},s.prototype.add=function(a,l,d){return d===void 0&&(d=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(a,l,d))},s.prototype.addOnce=function(a,l,d){return d===void 0&&(d=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(a,l,d,!0))},s.prototype._addListener=function(a){var l=this._head.next,d=this._head;if(!l)a.connect(d);else{for(;l;){if(a.priority>l.priority){a.connect(d);break}d=l,l=l.next}a.previous||a.connect(d)}return this._startIfPossible(),this},s.prototype.remove=function(a,l){for(var d=this._head.next;d;)d.match(a,l)?d=d.destroy():d=d.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(s.prototype,"count",{get:function(){if(!this._head)return 0;for(var a=0,l=this._head;l=l.next;)a++;return a},enumerable:!1,configurable:!0}),s.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},s.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},s.prototype.destroy=function(){if(!this._protected){this.stop();for(var a=this._head.next;a;)a=a.destroy(!0);this._head.destroy(),this._head=null}},s.prototype.update=function(a){a===void 0&&(a=performance.now());var l;if(a>this.lastTime){if(l=this.elapsedMS=a-this.lastTime,l>this._maxElapsedMS&&(l=this._maxElapsedMS),l*=this.speed,this._minElapsedMS){var d=a-this._lastFrame|0;if(d<this._minElapsedMS)return;this._lastFrame=a-d%this._minElapsedMS}this.deltaMS=l,this.deltaTime=this.deltaMS*settings$1.TARGET_FPMS;for(var v=this._head,m=v.next;m;)m=m.emit(this.deltaTime);v.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=a},Object.defineProperty(s.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var l=Math.min(this.maxFPS,a),d=Math.min(Math.max(0,l)/1e3,settings$1.TARGET_FPMS);this._maxElapsedMS=1/d},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(a){if(a===0)this._minElapsedMS=0;else{var l=Math.max(this.minFPS,a);this._minElapsedMS=1/(l/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(s,"shared",{get:function(){if(!s._shared){var a=s._shared=new s;a.autoStart=!0,a._protected=!0}return s._shared},enumerable:!1,configurable:!0}),Object.defineProperty(s,"system",{get:function(){if(!s._system){var a=s._system=new s;a.autoStart=!0,a._protected=!0}return s._system},enumerable:!1,configurable:!0}),s}(),TickerPlugin=function(){function s(){}return s.init=function(a){var l=this;a=Object.assign({autoStart:!0,sharedTicker:!1},a),Object.defineProperty(this,"ticker",{set:function(d){this._ticker&&this._ticker.remove(this.render,this),this._ticker=d,d&&d.add(this.render,this,UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){l._ticker.stop()},this.start=function(){l._ticker.start()},this._ticker=null,this.ticker=a.sharedTicker?Ticker.shared:new Ticker,a.autoStart&&this.start()},s.destroy=function(){if(this._ticker){var a=this._ticker;this.ticker=null,a.destroy()}},s.extension=ExtensionType.Application,s}();/*!
 * @pixi/core - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.PREFER_ENV=isMobile$2.any?ENV$5.WEBGL:ENV$5.WEBGL2;settings$1.STRICT_TEXTURE_CACHE=!1;var INSTALLED=[];function autoDetectResource(s,a){if(!s)return null;var l="";if(typeof s=="string"){var d=/\.(\w{3,4})(?:$|\?|#)/i.exec(s);d&&(l=d[1].toLowerCase())}for(var v=INSTALLED.length-1;v>=0;--v){var m=INSTALLED[v];if(m.test&&m.test(s,l))return new m(s,a)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$i=function(s,a){return extendStatics$i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$i(s,a)};function __extends$i(s,a){extendStatics$i(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var __assign$1=function(){return __assign$1=Object.assign||function(a){for(var l=arguments,d,v=1,m=arguments.length;v<m;v++){d=l[v];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a},__assign$1.apply(this,arguments)};function __rest(s,a){var l={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&a.indexOf(d)<0&&(l[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,d=Object.getOwnPropertySymbols(s);v<d.length;v++)a.indexOf(d[v])<0&&Object.prototype.propertyIsEnumerable.call(s,d[v])&&(l[d[v]]=s[d[v]]);return l}var Resource=function(){function s(a,l){a===void 0&&(a=0),l===void 0&&(l=0),this._width=a,this._height=l,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}return s.prototype.bind=function(a){this.onResize.add(a),this.onUpdate.add(a),this.onError.add(a),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},s.prototype.unbind=function(a){this.onResize.remove(a),this.onUpdate.remove(a),this.onError.remove(a)},s.prototype.resize=function(a,l){(a!==this._width||l!==this._height)&&(this._width=a,this._height=l,this.onResize.emit(a,l))},Object.defineProperty(s.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),s.prototype.update=function(){this.destroyed||this.onUpdate.emit()},s.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(s.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),s.prototype.style=function(a,l,d){return!1},s.prototype.dispose=function(){},s.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},s.test=function(a,l){return!1},s}(),BufferResource=function(s){__extends$i(a,s);function a(l,d){var v=this,m=d||{},g=m.width,T=m.height;if(!g||!T)throw new Error("BufferResource width or height invalid");return v=s.call(this,g,T)||this,v.data=l,v}return a.prototype.upload=function(l,d,v){var m=l.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.alphaMode===ALPHA_MODES$5.UNPACK);var g=d.realWidth,T=d.realHeight;return v.width===g&&v.height===T?m.texSubImage2D(d.target,0,0,0,g,T,d.format,v.type,this.data):(v.width=g,v.height=T,m.texImage2D(d.target,0,v.internalFormat,g,T,0,d.format,v.type,this.data)),!0},a.prototype.dispose=function(){this.data=null},a.test=function(l){return l instanceof Float32Array||l instanceof Uint8Array||l instanceof Uint32Array},a}(Resource),defaultBufferOptions={scaleMode:SCALE_MODES$5.NEAREST,format:FORMATS$5.RGBA,alphaMode:ALPHA_MODES$5.NPM},BaseTexture=function(s){__extends$i(a,s);function a(l,d){l===void 0&&(l=null),d===void 0&&(d=null);var v=s.call(this)||this;d=d||{};var m=d.alphaMode,g=d.mipmap,T=d.anisotropicLevel,b=d.scaleMode,R=d.width,C=d.height,w=d.wrapMode,A=d.format,S=d.type,O=d.target,L=d.resolution,N=d.resourceOptions;return l&&!(l instanceof Resource)&&(l=autoDetectResource(l,N),l.internal=!0),v.resolution=L||settings$1.RESOLUTION,v.width=Math.round((R||0)*v.resolution)/v.resolution,v.height=Math.round((C||0)*v.resolution)/v.resolution,v._mipmap=g!==void 0?g:settings$1.MIPMAP_TEXTURES,v.anisotropicLevel=T!==void 0?T:settings$1.ANISOTROPIC_LEVEL,v._wrapMode=w||settings$1.WRAP_MODE,v._scaleMode=b!==void 0?b:settings$1.SCALE_MODE,v.format=A||FORMATS$5.RGBA,v.type=S||TYPES$5.UNSIGNED_BYTE,v.target=O||TARGETS$5.TEXTURE_2D,v.alphaMode=m!==void 0?m:ALPHA_MODES$5.UNPACK,v.uid=uid(),v.touched=0,v.isPowerOfTwo=!1,v._refreshPOT(),v._glTextures={},v.dirtyId=0,v.dirtyStyleId=0,v.cacheId=null,v.valid=R>0&&C>0,v.textureCacheIds=[],v.destroyed=!1,v.resource=null,v._batchEnabled=0,v._batchLocation=0,v.parentTextureArray=null,v.setResource(l),v}return Object.defineProperty(a.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mipmap",{get:function(){return this._mipmap},set:function(l){this._mipmap!==l&&(this._mipmap=l,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(l){this._scaleMode!==l&&(this._scaleMode=l,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(l){this._wrapMode!==l&&(this._wrapMode=l,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),a.prototype.setStyle=function(l,d){var v;return l!==void 0&&l!==this.scaleMode&&(this.scaleMode=l,v=!0),d!==void 0&&d!==this.mipmap&&(this.mipmap=d,v=!0),v&&this.dirtyStyleId++,this},a.prototype.setSize=function(l,d,v){return v=v||this.resolution,this.setRealSize(l*v,d*v,v)},a.prototype.setRealSize=function(l,d,v){return this.resolution=v||this.resolution,this.width=Math.round(l)/this.resolution,this.height=Math.round(d)/this.resolution,this._refreshPOT(),this.update(),this},a.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},a.prototype.setResolution=function(l){var d=this.resolution;return d===l?this:(this.resolution=l,this.valid&&(this.width=Math.round(this.width*d)/l,this.height=Math.round(this.height*d)/l,this.emit("update",this)),this._refreshPOT(),this)},a.prototype.setResource=function(l){if(this.resource===l)return this;if(this.resource)throw new Error("Resource can be set only once");return l.bind(this),this.resource=l,this},a.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},a.prototype.onError=function(l){this.emit("error",this,l)},a.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.dispose(),a.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},a.prototype.dispose=function(){this.emit("dispose",this)},a.prototype.castToBaseTexture=function(){return this},a.from=function(l,d,v){v===void 0&&(v=settings$1.STRICT_TEXTURE_CACHE);var m=typeof l=="string",g=null;if(m)g=l;else{if(!l._pixiId){var T=d&&d.pixiIdPrefix||"pixiid";l._pixiId=T+"_"+uid()}g=l._pixiId}var b=BaseTextureCache[g];if(m&&v&&!b)throw new Error('The cacheId "'+g+'" does not exist in BaseTextureCache.');return b||(b=new a(l,d),b.cacheId=g,a.addToCache(b,g)),b},a.fromBuffer=function(l,d,v,m){l=l||new Float32Array(d*v*4);var g=new BufferResource(l,{width:d,height:v}),T=l instanceof Float32Array?TYPES$5.FLOAT:TYPES$5.UNSIGNED_BYTE;return new a(g,Object.assign(defaultBufferOptions,m||{width:d,height:v,type:T}))},a.addToCache=function(l,d){d&&(l.textureCacheIds.indexOf(d)===-1&&l.textureCacheIds.push(d),BaseTextureCache[d]&&console.warn("BaseTexture added to the cache with an id ["+d+"] that already had an entry"),BaseTextureCache[d]=l)},a.removeFromCache=function(l){if(typeof l=="string"){var d=BaseTextureCache[l];if(d){var v=d.textureCacheIds.indexOf(l);return v>-1&&d.textureCacheIds.splice(v,1),delete BaseTextureCache[l],d}}else if(l&&l.textureCacheIds){for(var m=0;m<l.textureCacheIds.length;++m)delete BaseTextureCache[l.textureCacheIds[m]];return l.textureCacheIds.length=0,l}return null},a._globalBatch=0,a}(EventEmitter),AbstractMultiResource=function(s){__extends$i(a,s);function a(l,d){var v=this,m=d||{},g=m.width,T=m.height;v=s.call(this,g,T)||this,v.items=[],v.itemDirtyIds=[];for(var b=0;b<l;b++){var R=new BaseTexture;v.items.push(R),v.itemDirtyIds.push(-2)}return v.length=l,v._load=null,v.baseTexture=null,v}return a.prototype.initFromArray=function(l,d){for(var v=0;v<this.length;v++)!l[v]||(l[v].castToBaseTexture?this.addBaseTextureAt(l[v].castToBaseTexture(),v):l[v]instanceof Resource?this.addResourceAt(l[v],v):this.addResourceAt(autoDetectResource(l[v],d),v))},a.prototype.dispose=function(){for(var l=0,d=this.length;l<d;l++)this.items[l].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},a.prototype.addResourceAt=function(l,d){if(!this.items[d])throw new Error("Index "+d+" is out of bounds");return l.valid&&!this.valid&&this.resize(l.width,l.height),this.items[d].setResource(l),this},a.prototype.bind=function(l){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");s.prototype.bind.call(this,l);for(var d=0;d<this.length;d++)this.items[d].parentTextureArray=l,this.items[d].on("update",l.update,l)},a.prototype.unbind=function(l){s.prototype.unbind.call(this,l);for(var d=0;d<this.length;d++)this.items[d].parentTextureArray=null,this.items[d].off("update",l.update,l)},a.prototype.load=function(){var l=this;if(this._load)return this._load;var d=this.items.map(function(m){return m.resource}).filter(function(m){return m}),v=d.map(function(m){return m.load()});return this._load=Promise.all(v).then(function(){var m=l.items[0],g=m.realWidth,T=m.realHeight;return l.resize(g,T),Promise.resolve(l)}),this._load},a}(Resource),ArrayResource=function(s){__extends$i(a,s);function a(l,d){var v=this,m=d||{},g=m.width,T=m.height,b,R;return Array.isArray(l)?(b=l,R=l.length):R=l,v=s.call(this,R,{width:g,height:T})||this,b&&v.initFromArray(b,d),v}return a.prototype.addBaseTextureAt=function(l,d){if(l.resource)this.addResourceAt(l.resource,d);else throw new Error("ArrayResource does not support RenderTexture");return this},a.prototype.bind=function(l){s.prototype.bind.call(this,l),l.target=TARGETS$5.TEXTURE_2D_ARRAY},a.prototype.upload=function(l,d,v){var m=this,g=m.length,T=m.itemDirtyIds,b=m.items,R=l.gl;v.dirtyId<0&&R.texImage3D(R.TEXTURE_2D_ARRAY,0,v.internalFormat,this._width,this._height,g,0,d.format,v.type,null);for(var C=0;C<g;C++){var w=b[C];T[C]<w.dirtyId&&(T[C]=w.dirtyId,w.valid&&R.texSubImage3D(R.TEXTURE_2D_ARRAY,0,0,0,C,w.resource.width,w.resource.height,1,d.format,v.type,w.resource.source))}return!0},a}(AbstractMultiResource),BaseImageResource=function(s){__extends$i(a,s);function a(l){var d=this,v=l,m=v.naturalWidth||v.videoWidth||v.width,g=v.naturalHeight||v.videoHeight||v.height;return d=s.call(this,m,g)||this,d.source=l,d.noSubImage=!1,d}return a.crossOrigin=function(l,d,v){v===void 0&&d.indexOf("data:")!==0?l.crossOrigin=determineCrossOrigin(d):v!==!1&&(l.crossOrigin=typeof v=="string"?v:"anonymous")},a.prototype.upload=function(l,d,v,m){var g=l.gl,T=d.realWidth,b=d.realHeight;if(m=m||this.source,m instanceof HTMLImageElement){if(!m.complete||m.naturalWidth===0)return!1}else if(m instanceof HTMLVideoElement&&m.readyState<=1)return!1;return g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.alphaMode===ALPHA_MODES$5.UNPACK),!this.noSubImage&&d.target===g.TEXTURE_2D&&v.width===T&&v.height===b?g.texSubImage2D(g.TEXTURE_2D,0,0,0,d.format,v.type,m):(v.width=T,v.height=b,g.texImage2D(d.target,0,v.internalFormat,d.format,v.type,m)),!0},a.prototype.update=function(){if(!this.destroyed){var l=this.source,d=l.naturalWidth||l.videoWidth||l.width,v=l.naturalHeight||l.videoHeight||l.height;this.resize(d,v),s.prototype.update.call(this)}},a.prototype.dispose=function(){this.source=null},a}(Resource),CanvasResource=function(s){__extends$i(a,s);function a(l){return s.call(this,l)||this}return a.test=function(l){var d=globalThis.OffscreenCanvas;return d&&l instanceof d?!0:globalThis.HTMLCanvasElement&&l instanceof HTMLCanvasElement},a}(BaseImageResource),CubeResource=function(s){__extends$i(a,s);function a(l,d){var v=this,m=d||{},g=m.width,T=m.height,b=m.autoLoad,R=m.linkBaseTexture;if(l&&l.length!==a.SIDES)throw new Error("Invalid length. Got "+l.length+", expected 6");v=s.call(this,6,{width:g,height:T})||this;for(var C=0;C<a.SIDES;C++)v.items[C].target=TARGETS$5.TEXTURE_CUBE_MAP_POSITIVE_X+C;return v.linkBaseTexture=R!==!1,l&&v.initFromArray(l,d),b!==!1&&v.load(),v}return a.prototype.bind=function(l){s.prototype.bind.call(this,l),l.target=TARGETS$5.TEXTURE_CUBE_MAP},a.prototype.addBaseTextureAt=function(l,d,v){if(!this.items[d])throw new Error("Index "+d+" is out of bounds");if(!this.linkBaseTexture||l.parentTextureArray||Object.keys(l._glTextures).length>0)if(l.resource)this.addResourceAt(l.resource,d);else throw new Error("CubeResource does not support copying of renderTexture.");else l.target=TARGETS$5.TEXTURE_CUBE_MAP_POSITIVE_X+d,l.parentTextureArray=this.baseTexture,this.items[d]=l;return l.valid&&!this.valid&&this.resize(l.realWidth,l.realHeight),this.items[d]=l,this},a.prototype.upload=function(l,d,v){for(var m=this.itemDirtyIds,g=0;g<a.SIDES;g++){var T=this.items[g];(m[g]<T.dirtyId||v.dirtyId<d.dirtyId)&&(T.valid&&T.resource?(T.resource.upload(l,T,v),m[g]=T.dirtyId):m[g]<-1&&(l.gl.texImage2D(T.target,0,v.internalFormat,d.realWidth,d.realHeight,0,d.format,v.type,null),m[g]=-1))}return!0},a.test=function(l){return Array.isArray(l)&&l.length===a.SIDES},a.SIDES=6,a}(AbstractMultiResource),ImageResource=function(s){__extends$i(a,s);function a(l,d){var v=this;if(d=d||{},!(l instanceof HTMLImageElement)){var m=new Image;BaseImageResource.crossOrigin(m,l,d.crossorigin),m.src=l,l=m}return v=s.call(this,l)||this,!l.complete&&!!v._width&&!!v._height&&(v._width=0,v._height=0),v.url=l.src,v._process=null,v.preserveBitmap=!1,v.createBitmap=(d.createBitmap!==void 0?d.createBitmap:settings$1.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,v.alphaMode=typeof d.alphaMode=="number"?d.alphaMode:null,v.bitmap=null,v._load=null,d.autoLoad!==!1&&v.load(),v}return a.prototype.load=function(l){var d=this;return this._load?this._load:(l!==void 0&&(this.createBitmap=l),this._load=new Promise(function(v,m){var g=d.source;d.url=g.src;var T=function(){d.destroyed||(g.onload=null,g.onerror=null,d.resize(g.width,g.height),d._load=null,d.createBitmap?v(d.process()):v(d))};g.complete&&g.src?T():(g.onload=T,g.onerror=function(b){m(b),d.onError.emit(b)})}),this._load)},a.prototype.process=function(){var l=this,d=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var v=globalThis.createImageBitmap,m=!d.crossOrigin||d.crossOrigin==="anonymous";return this._process=fetch(d.src,{mode:m?"cors":"no-cors"}).then(function(g){return g.blob()}).then(function(g){return v(g,0,0,d.width,d.height,{premultiplyAlpha:l.alphaMode===ALPHA_MODES$5.UNPACK?"premultiply":"none"})}).then(function(g){return l.destroyed?Promise.reject():(l.bitmap=g,l.update(),l._process=null,Promise.resolve(l))}),this._process},a.prototype.upload=function(l,d,v){if(typeof this.alphaMode=="number"&&(d.alphaMode=this.alphaMode),!this.createBitmap)return s.prototype.upload.call(this,l,d,v);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(s.prototype.upload.call(this,l,d,v,this.bitmap),!this.preserveBitmap){var m=!0,g=d._glTextures;for(var T in g){var b=g[T];if(b!==v&&b.dirtyId!==d.dirtyId){m=!1;break}}m&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},a.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,s.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},a.test=function(l){return typeof l=="string"||l instanceof HTMLImageElement},a}(BaseImageResource),SVGResource=function(s){__extends$i(a,s);function a(l,d){var v=this;return d=d||{},v=s.call(this,document.createElement("canvas"))||this,v._width=0,v._height=0,v.svg=l,v.scale=d.scale||1,v._overrideWidth=d.width,v._overrideHeight=d.height,v._resolve=null,v._crossorigin=d.crossorigin,v._load=null,d.autoLoad!==!1&&v.load(),v}return a.prototype.load=function(){var l=this;return this._load?this._load:(this._load=new Promise(function(d){if(l._resolve=function(){l.resize(l.source.width,l.source.height),d(l)},a.SVG_XML.test(l.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");l.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(l.svg)))}l._loadSvg()}),this._load)},a.prototype._loadSvg=function(){var l=this,d=new Image;BaseImageResource.crossOrigin(d,this.svg,this._crossorigin),d.src=this.svg,d.onerror=function(v){!l._resolve||(d.onerror=null,l.onError.emit(v))},d.onload=function(){if(!!l._resolve){var v=d.width,m=d.height;if(!v||!m)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var g=v*l.scale,T=m*l.scale;(l._overrideWidth||l._overrideHeight)&&(g=l._overrideWidth||l._overrideHeight/m*v,T=l._overrideHeight||l._overrideWidth/v*m),g=Math.round(g),T=Math.round(T);var b=l.source;b.width=g,b.height=T,b._pixiId="canvas_"+uid(),b.getContext("2d").drawImage(d,0,0,v,m,0,0,g,T),l._resolve(),l._resolve=null}}},a.getSize=function(l){var d=a.SVG_SIZE.exec(l),v={};return d&&(v[d[1]]=Math.round(parseFloat(d[3])),v[d[5]]=Math.round(parseFloat(d[7]))),v},a.prototype.dispose=function(){s.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},a.test=function(l,d){return d==="svg"||typeof l=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(l)||typeof l=="string"&&a.SVG_XML.test(l)},a.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,a.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,a}(BaseImageResource),VideoResource=function(s){__extends$i(a,s);function a(l,d){var v=this;if(d=d||{},!(l instanceof HTMLVideoElement)){var m=document.createElement("video");m.setAttribute("preload","auto"),m.setAttribute("webkit-playsinline",""),m.setAttribute("playsinline",""),typeof l=="string"&&(l=[l]);var g=l[0].src||l[0];BaseImageResource.crossOrigin(m,g,d.crossorigin);for(var T=0;T<l.length;++T){var b=document.createElement("source"),R=l[T],C=R.src,w=R.mime;C=C||l[T];var A=C.split("?").shift().toLowerCase(),S=A.slice(A.lastIndexOf(".")+1);w=w||a.MIME_TYPES[S]||"video/"+S,b.src=C,b.type=w,m.appendChild(b)}l=m}return v=s.call(this,l)||this,v.noSubImage=!0,v._autoUpdate=!0,v._isConnectedToTicker=!1,v._updateFPS=d.updateFPS||0,v._msToNextUpdate=0,v.autoPlay=d.autoPlay!==!1,v._load=null,v._resolve=null,v._onCanPlay=v._onCanPlay.bind(v),v._onError=v._onError.bind(v),d.autoLoad!==!1&&v.load(),v}return a.prototype.update=function(l){if(!this.destroyed){var d=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-d),(!this._updateFPS||this._msToNextUpdate<=0)&&(s.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},a.prototype.load=function(){var l=this;if(this._load)return this._load;var d=this.source;return(d.readyState===d.HAVE_ENOUGH_DATA||d.readyState===d.HAVE_FUTURE_DATA)&&d.width&&d.height&&(d.complete=!0),d.addEventListener("play",this._onPlayStart.bind(this)),d.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(d.addEventListener("canplay",this._onCanPlay),d.addEventListener("canplaythrough",this._onCanPlay),d.addEventListener("error",this._onError,!0)),this._load=new Promise(function(v){l.valid?v(l):(l._resolve=v,d.load())}),this._load},a.prototype._onError=function(l){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(l)},a.prototype._isSourcePlaying=function(){var l=this.source;return l.currentTime>0&&l.paused===!1&&l.ended===!1&&l.readyState>2},a.prototype._isSourceReady=function(){var l=this.source;return l.readyState===3||l.readyState===4},a.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},a.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},a.prototype._onCanPlay=function(){var l=this.source;l.removeEventListener("canplay",this._onCanPlay),l.removeEventListener("canplaythrough",this._onCanPlay);var d=this.valid;this.resize(l.videoWidth,l.videoHeight),!d&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&l.play()},a.prototype.dispose=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var l=this.source;l&&(l.removeEventListener("error",this._onError,!0),l.pause(),l.src="",l.load()),s.prototype.dispose.call(this)},Object.defineProperty(a.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(l){l!==this._autoUpdate&&(this._autoUpdate=l,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(l){l!==this._updateFPS&&(this._updateFPS=l)},enumerable:!1,configurable:!0}),a.test=function(l,d){return globalThis.HTMLVideoElement&&l instanceof HTMLVideoElement||a.TYPES.indexOf(d)>-1},a.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],a.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},a}(BaseImageResource),ImageBitmapResource=function(s){__extends$i(a,s);function a(l){return s.call(this,l)||this}return a.test=function(l){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&l instanceof ImageBitmap},a}(BaseImageResource);INSTALLED.push(ImageResource,ImageBitmapResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);var _resources={__proto__:null,Resource,BaseImageResource,INSTALLED,autoDetectResource,AbstractMultiResource,ArrayResource,BufferResource,CanvasResource,CubeResource,ImageResource,SVGResource,VideoResource,ImageBitmapResource},DepthResource=function(s){__extends$i(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.prototype.upload=function(l,d,v){var m=l.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.alphaMode===ALPHA_MODES$5.UNPACK);var g=d.realWidth,T=d.realHeight;return v.width===g&&v.height===T?m.texSubImage2D(d.target,0,0,0,g,T,d.format,v.type,this.data):(v.width=g,v.height=T,m.texImage2D(d.target,0,v.internalFormat,g,T,0,d.format,v.type,this.data)),!0},a}(BufferResource),Framebuffer=function(){function s(a,l){this.width=Math.round(a||100),this.height=Math.round(l||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY$5.NONE}return Object.defineProperty(s.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),s.prototype.addColorTexture=function(a,l){return a===void 0&&(a=0),this.colorTextures[a]=l||new BaseTexture(null,{scaleMode:SCALE_MODES$5.NEAREST,resolution:1,mipmap:MIPMAP_MODES$5.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},s.prototype.addDepthTexture=function(a){return this.depthTexture=a||new BaseTexture(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES$5.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES$5.OFF,format:FORMATS$5.DEPTH_COMPONENT,type:TYPES$5.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},s.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},s.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},s.prototype.resize=function(a,l){if(a=Math.round(a),l=Math.round(l),!(a===this.width&&l===this.height)){this.width=a,this.height=l,this.dirtyId++,this.dirtySize++;for(var d=0;d<this.colorTextures.length;d++){var v=this.colorTextures[d],m=v.resolution;v.setSize(a/m,l/m)}if(this.depthTexture){var m=this.depthTexture.resolution;this.depthTexture.setSize(a/m,l/m)}}},s.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},s.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},s}(),BaseRenderTexture=function(s){__extends$i(a,s);function a(l){l===void 0&&(l={});var d=this;if(typeof l=="number"){var v=arguments[0],m=arguments[1],g=arguments[2],T=arguments[3];l={width:v,height:m,scaleMode:g,resolution:T}}return l.width=l.width||100,l.height=l.height||100,l.multisample=l.multisample!==void 0?l.multisample:MSAA_QUALITY$5.NONE,d=s.call(this,null,l)||this,d.mipmap=MIPMAP_MODES$5.OFF,d.valid=!0,d.clearColor=[0,0,0,0],d.framebuffer=new Framebuffer(d.realWidth,d.realHeight).addColorTexture(0,d),d.framebuffer.multisample=l.multisample,d.maskStack=[],d.filterStack=[{}],d}return a.prototype.resize=function(l,d){this.framebuffer.resize(l*this.resolution,d*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},a.prototype.dispose=function(){this.framebuffer.dispose(),s.prototype.dispose.call(this)},a.prototype.destroy=function(){s.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},a}(BaseTexture),TextureUvs=function(){function s(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return s.prototype.set=function(a,l,d){var v=l.width,m=l.height;if(d){var g=a.width/2/v,T=a.height/2/m,b=a.x/v+g,R=a.y/m+T;d=groupD8.add(d,groupD8.NW),this.x0=b+g*groupD8.uX(d),this.y0=R+T*groupD8.uY(d),d=groupD8.add(d,2),this.x1=b+g*groupD8.uX(d),this.y1=R+T*groupD8.uY(d),d=groupD8.add(d,2),this.x2=b+g*groupD8.uX(d),this.y2=R+T*groupD8.uY(d),d=groupD8.add(d,2),this.x3=b+g*groupD8.uX(d),this.y3=R+T*groupD8.uY(d)}else this.x0=a.x/v,this.y0=a.y/m,this.x1=(a.x+a.width)/v,this.y1=a.y/m,this.x2=(a.x+a.width)/v,this.y2=(a.y+a.height)/m,this.x3=a.x/v,this.y3=(a.y+a.height)/m;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},s.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},s}(),DEFAULT_UVS=new TextureUvs;function removeAllHandlers(s){s.destroy=function(){},s.on=function(){},s.once=function(){},s.emit=function(){}}var Texture=function(s){__extends$i(a,s);function a(l,d,v,m,g,T){var b=s.call(this)||this;if(b.noFrame=!1,d||(b.noFrame=!0,d=new Rectangle(0,0,1,1)),l instanceof a&&(l=l.baseTexture),b.baseTexture=l,b._frame=d,b.trim=m,b.valid=!1,b._uvs=DEFAULT_UVS,b.uvMatrix=null,b.orig=v||d,b._rotate=Number(g||0),g===!0)b._rotate=2;else if(b._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return b.defaultAnchor=T?new Point(T.x,T.y):new Point(0,0),b._updateID=0,b.textureCacheIds=[],l.valid?b.noFrame?l.valid&&b.onBaseTextureUpdated(l):b.frame=d:l.once("loaded",b.onBaseTextureUpdated,b),b.noFrame&&l.on("update",b.onBaseTextureUpdated,b),b}return a.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},a.prototype.onBaseTextureUpdated=function(l){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=l.width,this._frame.height=l.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},a.prototype.destroy=function(l){if(this.baseTexture){if(l){var d=this.baseTexture.resource;d&&d.url&&TextureCache[d.url]&&a.removeFromCache(d.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,a.removeFromCache(this),this.textureCacheIds=null},a.prototype.clone=function(){var l=this._frame.clone(),d=this._frame===this.orig?l:this.orig.clone(),v=new a(this.baseTexture,!this.noFrame&&l,d,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(v._frame=l),v},a.prototype.updateUvs=function(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},a.from=function(l,d,v){d===void 0&&(d={}),v===void 0&&(v=settings$1.STRICT_TEXTURE_CACHE);var m=typeof l=="string",g=null;if(m)g=l;else if(l instanceof BaseTexture){if(!l.cacheId){var T=d&&d.pixiIdPrefix||"pixiid";l.cacheId=T+"-"+uid(),BaseTexture.addToCache(l,l.cacheId)}g=l.cacheId}else{if(!l._pixiId){var T=d&&d.pixiIdPrefix||"pixiid";l._pixiId=T+"_"+uid()}g=l._pixiId}var b=TextureCache[g];if(m&&v&&!b)throw new Error('The cacheId "'+g+'" does not exist in TextureCache.');return!b&&!(l instanceof BaseTexture)?(d.resolution||(d.resolution=getResolutionOfUrl(l)),b=new a(new BaseTexture(l,d)),b.baseTexture.cacheId=g,BaseTexture.addToCache(b.baseTexture,g),a.addToCache(b,g)):!b&&l instanceof BaseTexture&&(b=new a(l),a.addToCache(b,g)),b},a.fromURL=function(l,d){var v=Object.assign({autoLoad:!1},d==null?void 0:d.resourceOptions),m=a.from(l,Object.assign({resourceOptions:v},d),!1),g=m.baseTexture.resource;return m.baseTexture.valid?Promise.resolve(m):g.load().then(function(){return Promise.resolve(m)})},a.fromBuffer=function(l,d,v,m){return new a(BaseTexture.fromBuffer(l,d,v,m))},a.fromLoader=function(l,d,v,m){var g=new BaseTexture(l,Object.assign({scaleMode:settings$1.SCALE_MODE,resolution:getResolutionOfUrl(d)},m)),T=g.resource;T instanceof ImageResource&&(T.url=d);var b=new a(g);return v||(v=d),BaseTexture.addToCache(b.baseTexture,v),a.addToCache(b,v),v!==d&&(BaseTexture.addToCache(b.baseTexture,d),a.addToCache(b,d)),b.baseTexture.valid?Promise.resolve(b):new Promise(function(R){b.baseTexture.once("loaded",function(){return R(b)})})},a.addToCache=function(l,d){d&&(l.textureCacheIds.indexOf(d)===-1&&l.textureCacheIds.push(d),TextureCache[d]&&console.warn("Texture added to the cache with an id ["+d+"] that already had an entry"),TextureCache[d]=l)},a.removeFromCache=function(l){if(typeof l=="string"){var d=TextureCache[l];if(d){var v=d.textureCacheIds.indexOf(l);return v>-1&&d.textureCacheIds.splice(v,1),delete TextureCache[l],d}}else if(l&&l.textureCacheIds){for(var m=0;m<l.textureCacheIds.length;++m)TextureCache[l.textureCacheIds[m]]===l&&delete TextureCache[l.textureCacheIds[m]];return l.textureCacheIds.length=0,l}return null},Object.defineProperty(a.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"frame",{get:function(){return this._frame},set:function(l){this._frame=l,this.noFrame=!1;var d=l.x,v=l.y,m=l.width,g=l.height,T=d+m>this.baseTexture.width,b=v+g>this.baseTexture.height;if(T||b){var R=T&&b?"and":"or",C="X: "+d+" + "+m+" = "+(d+m)+" > "+this.baseTexture.width,w="Y: "+v+" + "+g+" = "+(v+g)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(C+" "+R+" "+w))}this.valid=m&&g&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=l),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rotate",{get:function(){return this._rotate},set:function(l){this._rotate=l,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),a.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(a,"EMPTY",{get:function(){return a._EMPTY||(a._EMPTY=new a(new BaseTexture),removeAllHandlers(a._EMPTY),removeAllHandlers(a._EMPTY.baseTexture)),a._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(a,"WHITE",{get:function(){if(!a._WHITE){var l=settings$1.ADAPTER.createCanvas(16,16),d=l.getContext("2d");l.width=16,l.height=16,d.fillStyle="white",d.fillRect(0,0,16,16),a._WHITE=new a(BaseTexture.from(l)),removeAllHandlers(a._WHITE),removeAllHandlers(a._WHITE.baseTexture)}return a._WHITE},enumerable:!1,configurable:!0}),a}(EventEmitter),RenderTexture=function(s){__extends$i(a,s);function a(l,d){var v=s.call(this,l,d)||this;return v.valid=!0,v.filterFrame=null,v.filterPoolKey=null,v.updateUvs(),v}return Object.defineProperty(a.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(l){this.framebuffer.multisample=l},enumerable:!1,configurable:!0}),a.prototype.resize=function(l,d,v){v===void 0&&(v=!0);var m=this.baseTexture.resolution,g=Math.round(l*m)/m,T=Math.round(d*m)/m;this.valid=g>0&&T>0,this._frame.width=this.orig.width=g,this._frame.height=this.orig.height=T,v&&this.baseTexture.resize(g,T),this.updateUvs()},a.prototype.setResolution=function(l){var d=this.baseTexture;d.resolution!==l&&(d.setResolution(l),this.resize(d.width,d.height,!1))},a.create=function(l){for(var d=arguments,v=[],m=1;m<arguments.length;m++)v[m-1]=d[m];return typeof l=="number"&&(deprecation$1("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),l={width:l,height:v[0],scaleMode:v[1],resolution:v[2]}),new a(new BaseRenderTexture(l))},a}(Texture),RenderTexturePool=function(){function s(a){this.texturePool={},this.textureOptions=a||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return s.prototype.createTexture=function(a,l,d){d===void 0&&(d=MSAA_QUALITY$5.NONE);var v=new BaseRenderTexture(Object.assign({width:a,height:l,resolution:1,multisample:d},this.textureOptions));return new RenderTexture(v)},s.prototype.getOptimalTexture=function(a,l,d,v){d===void 0&&(d=1),v===void 0&&(v=MSAA_QUALITY$5.NONE);var m;a=Math.ceil(a*d-1e-6),l=Math.ceil(l*d-1e-6),!this.enableFullScreen||a!==this._pixelsWidth||l!==this._pixelsHeight?(a=nextPow2(a),l=nextPow2(l),m=((a&65535)<<16|l&65535)>>>0,v>1&&(m+=v*4294967296)):m=v>1?-v:-1,this.texturePool[m]||(this.texturePool[m]=[]);var g=this.texturePool[m].pop();return g||(g=this.createTexture(a,l,v)),g.filterPoolKey=m,g.setResolution(d),g},s.prototype.getFilterTexture=function(a,l,d){var v=this.getOptimalTexture(a.width,a.height,l||a.resolution,d||MSAA_QUALITY$5.NONE);return v.filterFrame=a.filterFrame,v},s.prototype.returnTexture=function(a){var l=a.filterPoolKey;a.filterFrame=null,this.texturePool[l].push(a)},s.prototype.returnFilterTexture=function(a){this.returnTexture(a)},s.prototype.clear=function(a){if(a=a!==!1,a)for(var l in this.texturePool){var d=this.texturePool[l];if(d)for(var v=0;v<d.length;v++)d[v].destroy(!0)}this.texturePool={}},s.prototype.setScreenSize=function(a){if(!(a.width===this._pixelsWidth&&a.height===this._pixelsHeight)){this.enableFullScreen=a.width>0&&a.height>0;for(var l in this.texturePool)if(Number(l)<0){var d=this.texturePool[l];if(d)for(var v=0;v<d.length;v++)d[v].destroy(!0);this.texturePool[l]=[]}this._pixelsWidth=a.width,this._pixelsHeight=a.height}},s.SCREEN_KEY=-1,s}(),Attribute=function(){function s(a,l,d,v,m,g,T){l===void 0&&(l=0),d===void 0&&(d=!1),v===void 0&&(v=TYPES$5.FLOAT),this.buffer=a,this.size=l,this.normalized=d,this.type=v,this.stride=m,this.start=g,this.instance=T}return s.prototype.destroy=function(){this.buffer=null},s.from=function(a,l,d,v,m){return new s(a,l,d,v,m)},s}(),UID$4=0,Buffer=function(){function s(a,l,d){l===void 0&&(l=!0),d===void 0&&(d=!1),this.data=a||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=d,this.static=l,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}return s.prototype.update=function(a){a instanceof Array&&(a=new Float32Array(a)),this.data=a||this.data,this._updateID++},s.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},s.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(s.prototype,"index",{get:function(){return this.type===BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER},set:function(a){this.type=a?BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE$5.ARRAY_BUFFER},enumerable:!1,configurable:!0}),s.from=function(a){return a instanceof Array&&(a=new Float32Array(a)),new s(a)},s}(),map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(s,a){for(var l=0,d=0,v={},m=0;m<s.length;m++)d+=a[m],l+=s[m].length;for(var g=new ArrayBuffer(l*4),T=null,b=0,m=0;m<s.length;m++){var R=a[m],C=s[m],w=getBufferType(C);v[w]||(v[w]=new map$1[w](g)),T=v[w];for(var A=0;A<C.length;A++){var S=(A/R|0)*d+b,O=A%R;T[S+O]=C[A]}b+=R}return new Float32Array(g)}var byteSizeMap$1={5126:4,5123:2,5121:1},UID$3=0,map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Geometry=function(){function s(a,l){a===void 0&&(a=[]),l===void 0&&(l={}),this.buffers=a,this.indexBuffer=null,this.attributes=l,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}return s.prototype.addAttribute=function(a,l,d,v,m,g,T,b){if(d===void 0&&(d=0),v===void 0&&(v=!1),b===void 0&&(b=!1),!l)throw new Error("You must pass a buffer when creating an attribute");l instanceof Buffer||(l instanceof Array&&(l=new Float32Array(l)),l=new Buffer(l));var R=a.split("|");if(R.length>1){for(var C=0;C<R.length;C++)this.addAttribute(R[C],l,d,v,m);return this}var w=this.buffers.indexOf(l);return w===-1&&(this.buffers.push(l),w=this.buffers.length-1),this.attributes[a]=new Attribute(w,d,v,m,g,T,b),this.instanced=this.instanced||b,this},s.prototype.getAttribute=function(a){return this.attributes[a]},s.prototype.getBuffer=function(a){return this.buffers[this.getAttribute(a).buffer]},s.prototype.addIndex=function(a){return a instanceof Buffer||(a instanceof Array&&(a=new Uint16Array(a)),a=new Buffer(a)),a.type=BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER,this.indexBuffer=a,this.buffers.indexOf(a)===-1&&this.buffers.push(a),this},s.prototype.getIndex=function(){return this.indexBuffer},s.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var a=[],l=[],d=new Buffer,v;for(v in this.attributes){var m=this.attributes[v],g=this.buffers[m.buffer];a.push(g.data),l.push(m.size*byteSizeMap$1[m.type]/4),m.buffer=0}for(d.data=interleaveTypedArrays(a,l),v=0;v<this.buffers.length;v++)this.buffers[v]!==this.indexBuffer&&this.buffers[v].destroy();return this.buffers=[d],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},s.prototype.getSize=function(){for(var a in this.attributes){var l=this.attributes[a],d=this.buffers[l.buffer];return d.data.length/(l.stride/4||l.size)}return 0},s.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},s.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},s.prototype.clone=function(){for(var a=new s,l=0;l<this.buffers.length;l++)a.buffers[l]=new Buffer(this.buffers[l].data.slice(0));for(var l in this.attributes){var d=this.attributes[l];a.attributes[l]=new Attribute(d.buffer,d.size,d.normalized,d.type,d.stride,d.start,d.instance)}return this.indexBuffer&&(a.indexBuffer=a.buffers[this.buffers.indexOf(this.indexBuffer)],a.indexBuffer.type=BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER),a},s.merge=function(a){for(var l=new s,d=[],v=[],m=[],g,T=0;T<a.length;T++){g=a[T];for(var b=0;b<g.buffers.length;b++)v[b]=v[b]||0,v[b]+=g.buffers[b].data.length,m[b]=0}for(var T=0;T<g.buffers.length;T++)d[T]=new map[getBufferType(g.buffers[T].data)](v[T]),l.buffers[T]=new Buffer(d[T]);for(var T=0;T<a.length;T++){g=a[T];for(var b=0;b<g.buffers.length;b++)d[b].set(g.buffers[b].data,m[b]),m[b]+=g.buffers[b].data.length}if(l.attributes=g.attributes,g.indexBuffer){l.indexBuffer=l.buffers[g.buffers.indexOf(g.indexBuffer)],l.indexBuffer.type=BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER;for(var R=0,C=0,w=0,A=0,T=0;T<g.buffers.length;T++)if(g.buffers[T]!==g.indexBuffer){A=T;break}for(var T in g.attributes){var S=g.attributes[T];(S.buffer|0)===A&&(C+=S.size*byteSizeMap$1[S.type]/4)}for(var T=0;T<a.length;T++){for(var O=a[T].indexBuffer.data,b=0;b<O.length;b++)l.indexBuffer.data[b+w]+=R;R+=a[T].buffers[A].data.length/C,w+=O.length}}return l},s}(),Quad=function(s){__extends$i(a,s);function a(){var l=s.call(this)||this;return l.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),l}return a}(Geometry),QuadUv=function(s){__extends$i(a,s);function a(){var l=s.call(this)||this;return l.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),l.uvs=new Float32Array([0,0,1,0,1,1,0,1]),l.vertexBuffer=new Buffer(l.vertices),l.uvBuffer=new Buffer(l.uvs),l.addAttribute("aVertexPosition",l.vertexBuffer).addAttribute("aTextureCoord",l.uvBuffer).addIndex([0,1,2,0,2,3]),l}return a.prototype.map=function(l,d){var v=0,m=0;return this.uvs[0]=v,this.uvs[1]=m,this.uvs[2]=v+d.width/l.width,this.uvs[3]=m,this.uvs[4]=v+d.width/l.width,this.uvs[5]=m+d.height/l.height,this.uvs[6]=v,this.uvs[7]=m+d.height/l.height,v=d.x,m=d.y,this.vertices[0]=v,this.vertices[1]=m,this.vertices[2]=v+d.width,this.vertices[3]=m,this.vertices[4]=v+d.width,this.vertices[5]=m+d.height,this.vertices[6]=v,this.vertices[7]=m+d.height,this.invalidate(),this},a.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},a}(Geometry),UID$2=0,UniformGroup=function(){function s(a,l,d){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$2++,this.static=!!l,this.ubo=!!d,a instanceof Buffer?(this.buffer=a,this.buffer.type=BUFFER_TYPE$5.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=a,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE$5.UNIFORM_BUFFER,this.autoManage=!0))}return s.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},s.prototype.add=function(a,l,d){if(!this.ubo)this.uniforms[a]=new s(l,d);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},s.from=function(a,l,d){return new s(a,l,d)},s.uboFrom=function(a,l){return new s(a,l!=null?l:!0,!0)},s}(),FilterState=function(){function s(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY$5.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}return s.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},s}(),tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix,FilterSystem=function(){function s(a){this.renderer=a,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.texturePool.setScreenSize(a.view),this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return s.prototype.push=function(a,l){for(var d,v,m=this.renderer,g=this.defaultFilterStack,T=this.statePool.pop()||new FilterState,b=this.renderer.renderTexture,R=l[0].resolution,C=l[0].multisample,w=l[0].padding,A=l[0].autoFit,S=(d=l[0].legacy)!==null&&d!==void 0?d:!0,O=1;O<l.length;O++){var L=l[O];R=Math.min(R,L.resolution),C=Math.min(C,L.multisample),w=this.useMaxPadding?Math.max(w,L.padding):w+L.padding,A=A&&L.autoFit,S=S||((v=L.legacy)!==null&&v!==void 0?v:!0)}g.length===1&&(this.defaultFilterStack[0].renderTexture=b.current),g.push(T),T.resolution=R,T.multisample=C,T.legacy=S,T.target=a,T.sourceFrame.copyFrom(a.filterArea||a.getBounds(!0)),T.sourceFrame.pad(w);var N=this.tempRect.copyFrom(b.sourceFrame);m.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(m.projection.transform).invert(),N),A?(T.sourceFrame.fit(N),(T.sourceFrame.width<=0||T.sourceFrame.height<=0)&&(T.sourceFrame.width=0,T.sourceFrame.height=0)):T.sourceFrame.intersects(N)||(T.sourceFrame.width=0,T.sourceFrame.height=0),this.roundFrame(T.sourceFrame,b.current?b.current.resolution:m.resolution,b.sourceFrame,b.destinationFrame,m.projection.transform),T.renderTexture=this.getOptimalFilterTexture(T.sourceFrame.width,T.sourceFrame.height,R,C),T.filters=l,T.destinationFrame.width=T.renderTexture.width,T.destinationFrame.height=T.renderTexture.height;var U=this.tempRect;U.x=0,U.y=0,U.width=T.sourceFrame.width,U.height=T.sourceFrame.height,T.renderTexture.filterFrame=T.sourceFrame,T.bindingSourceFrame.copyFrom(b.sourceFrame),T.bindingDestinationFrame.copyFrom(b.destinationFrame),T.transform=m.projection.transform,m.projection.transform=null,b.bind(T.renderTexture,T.sourceFrame,U),m.framebuffer.clear(0,0,0,0)},s.prototype.pop=function(){var a=this.defaultFilterStack,l=a.pop(),d=l.filters;this.activeState=l;var v=this.globalUniforms.uniforms;v.outputFrame=l.sourceFrame,v.resolution=l.resolution;var m=v.inputSize,g=v.inputPixel,T=v.inputClamp;if(m[0]=l.destinationFrame.width,m[1]=l.destinationFrame.height,m[2]=1/m[0],m[3]=1/m[1],g[0]=Math.round(m[0]*l.resolution),g[1]=Math.round(m[1]*l.resolution),g[2]=1/g[0],g[3]=1/g[1],T[0]=.5*g[2],T[1]=.5*g[3],T[2]=l.sourceFrame.width*m[2]-.5*g[2],T[3]=l.sourceFrame.height*m[3]-.5*g[3],l.legacy){var b=v.filterArea;b[0]=l.destinationFrame.width,b[1]=l.destinationFrame.height,b[2]=l.sourceFrame.x,b[3]=l.sourceFrame.y,v.filterClamp=v.inputClamp}this.globalUniforms.update();var R=a[a.length-1];if(this.renderer.framebuffer.blit(),d.length===1)d[0].apply(this,l.renderTexture,R.renderTexture,CLEAR_MODES$5.BLEND,l),this.returnFilterTexture(l.renderTexture);else{var C=l.renderTexture,w=this.getOptimalFilterTexture(C.width,C.height,l.resolution);w.filterFrame=C.filterFrame;var A=0;for(A=0;A<d.length-1;++A){A===1&&l.multisample>1&&(w=this.getOptimalFilterTexture(C.width,C.height,l.resolution),w.filterFrame=C.filterFrame),d[A].apply(this,C,w,CLEAR_MODES$5.CLEAR,l);var S=C;C=w,w=S}d[A].apply(this,C,R.renderTexture,CLEAR_MODES$5.BLEND,l),A>1&&l.multisample>1&&this.returnFilterTexture(l.renderTexture),this.returnFilterTexture(C),this.returnFilterTexture(w)}l.clear(),this.statePool.push(l)},s.prototype.bindAndClear=function(a,l){l===void 0&&(l=CLEAR_MODES$5.CLEAR);var d=this.renderer,v=d.renderTexture,m=d.state;if(a===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,a&&a.filterFrame){var g=this.tempRect;g.x=0,g.y=0,g.width=a.filterFrame.width,g.height=a.filterFrame.height,v.bind(a,a.filterFrame,g)}else a!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?v.bind(a):this.renderer.renderTexture.bind(a,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var T=m.stateId&1||this.forceClear;(l===CLEAR_MODES$5.CLEAR||l===CLEAR_MODES$5.BLIT&&T)&&this.renderer.framebuffer.clear(0,0,0,0)},s.prototype.applyFilter=function(a,l,d,v){var m=this.renderer;m.state.set(a.state),this.bindAndClear(d,v),a.uniforms.uSampler=l,a.uniforms.filterGlobals=this.globalUniforms,m.shader.bind(a),a.legacy=!!a.program.attributeData.aTextureCoord,a.legacy?(this.quadUv.map(l._frame,l.filterFrame),m.geometry.bind(this.quadUv),m.geometry.draw(DRAW_MODES$5.TRIANGLES)):(m.geometry.bind(this.quad),m.geometry.draw(DRAW_MODES$5.TRIANGLE_STRIP))},s.prototype.calculateSpriteMatrix=function(a,l){var d=this.activeState,v=d.sourceFrame,m=d.destinationFrame,g=l._texture.orig,T=a.set(m.width,0,0,m.height,v.x,v.y),b=l.worldTransform.copyTo(Matrix.TEMP_MATRIX);return b.invert(),T.prepend(b),T.scale(1/g.width,1/g.height),T.translate(l.anchor.x,l.anchor.y),T},s.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},s.prototype.getOptimalFilterTexture=function(a,l,d,v){return d===void 0&&(d=1),v===void 0&&(v=MSAA_QUALITY$5.NONE),this.texturePool.getOptimalTexture(a,l,d,v)},s.prototype.getFilterTexture=function(a,l,d){if(typeof a=="number"){var v=a;a=l,l=v}a=a||this.activeState.renderTexture;var m=this.texturePool.getOptimalTexture(a.width,a.height,l||a.resolution,d||MSAA_QUALITY$5.NONE);return m.filterFrame=a.filterFrame,m},s.prototype.returnFilterTexture=function(a){this.texturePool.returnTexture(a)},s.prototype.emptyPool=function(){this.texturePool.clear(!0)},s.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},s.prototype.transformAABB=function(a,l){var d=tempPoints[0],v=tempPoints[1],m=tempPoints[2],g=tempPoints[3];d.set(l.left,l.top),v.set(l.left,l.bottom),m.set(l.right,l.top),g.set(l.right,l.bottom),a.apply(d,d),a.apply(v,v),a.apply(m,m),a.apply(g,g);var T=Math.min(d.x,v.x,m.x,g.x),b=Math.min(d.y,v.y,m.y,g.y),R=Math.max(d.x,v.x,m.x,g.x),C=Math.max(d.y,v.y,m.y,g.y);l.x=T,l.y=b,l.width=R-T,l.height=C-b},s.prototype.roundFrame=function(a,l,d,v,m){if(!(a.width<=0||a.height<=0||d.width<=0||d.height<=0)){if(m){var g=m.a,T=m.b,b=m.c,R=m.d;if((Math.abs(T)>1e-4||Math.abs(b)>1e-4)&&(Math.abs(g)>1e-4||Math.abs(R)>1e-4))return}m=m?tempMatrix$2.copyFrom(m):tempMatrix$2.identity(),m.translate(-d.x,-d.y).scale(v.width/d.width,v.height/d.height).translate(v.x,v.y),this.transformAABB(m,a),a.ceil(l),this.transformAABB(m.invert(),a)}},s}(),ObjectRenderer=function(){function s(a){this.renderer=a}return s.prototype.flush=function(){},s.prototype.destroy=function(){this.renderer=null},s.prototype.start=function(){},s.prototype.stop=function(){this.flush()},s.prototype.render=function(a){},s}(),BatchSystem=function(){function s(a){this.renderer=a,this.emptyRenderer=new ObjectRenderer(a),this.currentRenderer=this.emptyRenderer}return s.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},s.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},s.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},s.prototype.copyBoundTextures=function(a,l){for(var d=this.renderer.texture.boundTextures,v=l-1;v>=0;--v)a[v]=d[v]||null,a[v]&&(a[v]._batchLocation=v)},s.prototype.boundArray=function(a,l,d,v){for(var m=a.elements,g=a.ids,T=a.count,b=0,R=0;R<T;R++){var C=m[R],w=C._batchLocation;if(w>=0&&w<v&&l[w]===C){g[R]=w;continue}for(;b<v;){var A=l[b];if(A&&A._batchEnabled===d&&A._batchLocation===b){b++;continue}g[R]=b,C._batchLocation=b,l[b]=C;break}}},s.prototype.destroy=function(){this.renderer=null},s}(),CONTEXT_UID_COUNTER=0,ContextSystem=function(){function s(a){this.renderer=a,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),a.view.addEventListener("webglcontextlost",this.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(s.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),s.prototype.contextChange=function(a){this.gl=a,this.renderer.gl=a,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext()},s.prototype.initFromContext=function(a){this.gl=a,this.validateContext(a),this.renderer.gl=a,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(a)},s.prototype.initFromOptions=function(a){var l=this.createContext(this.renderer.view,a);this.initFromContext(l)},s.prototype.createContext=function(a,l){var d;if(settings$1.PREFER_ENV>=ENV$5.WEBGL2&&(d=a.getContext("webgl2",l)),d)this.webGLVersion=2;else if(this.webGLVersion=1,d=a.getContext("webgl",l)||a.getContext("experimental-webgl",l),!d)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=d,this.getExtensions(),this.gl},s.prototype.getExtensions=function(){var a=this.gl,l={anisotropicFiltering:a.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),s3tc:a.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:a.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:a.getExtension("WEBGL_compressed_texture_etc"),etc1:a.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:a.getExtension("WEBGL_compressed_texture_atc"),astc:a.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,l,{drawBuffers:a.getExtension("WEBGL_draw_buffers"),depthTexture:a.getExtension("WEBGL_depth_texture"),loseContext:a.getExtension("WEBGL_lose_context"),vertexArrayObject:a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:a.getExtension("OES_element_index_uint"),floatTexture:a.getExtension("OES_texture_float"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),textureHalfFloat:a.getExtension("OES_texture_half_float"),textureHalfFloatLinear:a.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,l,{colorBufferFloat:a.getExtension("EXT_color_buffer_float")})},s.prototype.handleContextLost=function(a){a.preventDefault()},s.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},s.prototype.destroy=function(){var a=this.renderer.view;this.renderer=null,a.removeEventListener("webglcontextlost",this.handleContextLost),a.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},s.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},s.prototype.validateContext=function(a){var l=a.getContextAttributes(),d="WebGL2RenderingContext"in globalThis&&a instanceof globalThis.WebGL2RenderingContext;d&&(this.webGLVersion=2),l&&!l.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var v=d||!!a.getExtension("OES_element_index_uint");this.supports.uint32Indices=v,v||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},s}(),GLFramebuffer=function(){function s(a){this.framebuffer=a,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY$5.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return s}(),tempRectangle=new Rectangle,FramebufferSystem=function(){function s(a){this.renderer=a,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}return s.prototype.contextChange=function(){var a=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var l=this.renderer.context.extensions.drawBuffers,d=this.renderer.context.extensions.depthTexture;settings$1.PREFER_ENV===ENV$5.WEBGL_LEGACY&&(l=null,d=null),l?a.drawBuffers=function(v){return l.drawBuffersWEBGL(v)}:(this.hasMRT=!1,a.drawBuffers=function(){}),d||(this.writeDepthTexture=!1)}else this.msaaSamples=a.getInternalformatParameter(a.RENDERBUFFER,a.RGBA8,a.SAMPLES)},s.prototype.bind=function(a,l,d){d===void 0&&(d=0);var v=this.gl;if(a){var m=a.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(a);this.current!==a&&(this.current=a,v.bindFramebuffer(v.FRAMEBUFFER,m.framebuffer)),m.mipLevel!==d&&(a.dirtyId++,a.dirtyFormat++,m.mipLevel=d),m.dirtyId!==a.dirtyId&&(m.dirtyId=a.dirtyId,m.dirtyFormat!==a.dirtyFormat?(m.dirtyFormat=a.dirtyFormat,m.dirtySize=a.dirtySize,this.updateFramebuffer(a,d)):m.dirtySize!==a.dirtySize&&(m.dirtySize=a.dirtySize,this.resizeFramebuffer(a)));for(var g=0;g<a.colorTextures.length;g++){var T=a.colorTextures[g];this.renderer.texture.unbind(T.parentTextureArray||T)}if(a.depthTexture&&this.renderer.texture.unbind(a.depthTexture),l){var b=l.width>>d,R=l.height>>d,C=b/l.width;this.setViewport(l.x*C,l.y*C,b,R)}else{var b=a.width>>d,R=a.height>>d;this.setViewport(0,0,b,R)}}else this.current&&(this.current=null,v.bindFramebuffer(v.FRAMEBUFFER,null)),l?this.setViewport(l.x,l.y,l.width,l.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},s.prototype.setViewport=function(a,l,d,v){var m=this.viewport;a=Math.round(a),l=Math.round(l),d=Math.round(d),v=Math.round(v),(m.width!==d||m.height!==v||m.x!==a||m.y!==l)&&(m.x=a,m.y=l,m.width=d,m.height=v,this.gl.viewport(a,l,d,v))},Object.defineProperty(s.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),s.prototype.clear=function(a,l,d,v,m){m===void 0&&(m=BUFFER_BITS$5.COLOR|BUFFER_BITS$5.DEPTH);var g=this.gl;g.clearColor(a,l,d,v),g.clear(m)},s.prototype.initFramebuffer=function(a){var l=this.gl,d=new GLFramebuffer(l.createFramebuffer());return d.multisample=this.detectSamples(a.multisample),a.glFramebuffers[this.CONTEXT_UID]=d,this.managedFramebuffers.push(a),a.disposeRunner.add(this),d},s.prototype.resizeFramebuffer=function(a){var l=this.gl,d=a.glFramebuffers[this.CONTEXT_UID];d.msaaBuffer&&(l.bindRenderbuffer(l.RENDERBUFFER,d.msaaBuffer),l.renderbufferStorageMultisample(l.RENDERBUFFER,d.multisample,l.RGBA8,a.width,a.height)),d.stencil&&(l.bindRenderbuffer(l.RENDERBUFFER,d.stencil),d.msaaBuffer?l.renderbufferStorageMultisample(l.RENDERBUFFER,d.multisample,l.DEPTH24_STENCIL8,a.width,a.height):l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,a.width,a.height));var v=a.colorTextures,m=v.length;l.drawBuffers||(m=Math.min(m,1));for(var g=0;g<m;g++){var T=v[g],b=T.parentTextureArray||T;this.renderer.texture.bind(b,0)}a.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(a.depthTexture,0)},s.prototype.updateFramebuffer=function(a,l){var d=this.gl,v=a.glFramebuffers[this.CONTEXT_UID],m=a.colorTextures,g=m.length;d.drawBuffers||(g=Math.min(g,1)),v.multisample>1&&this.canMultisampleFramebuffer(a)?(v.msaaBuffer=v.msaaBuffer||d.createRenderbuffer(),d.bindRenderbuffer(d.RENDERBUFFER,v.msaaBuffer),d.renderbufferStorageMultisample(d.RENDERBUFFER,v.multisample,d.RGBA8,a.width,a.height),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,v.msaaBuffer)):v.msaaBuffer&&(d.deleteRenderbuffer(v.msaaBuffer),v.msaaBuffer=null,v.blitFramebuffer&&(v.blitFramebuffer.dispose(),v.blitFramebuffer=null));for(var T=[],b=0;b<g;b++){var R=m[b],C=R.parentTextureArray||R;this.renderer.texture.bind(C,0),!(b===0&&v.msaaBuffer)&&(d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+b,R.target,C._glTextures[this.CONTEXT_UID].texture,l),T.push(d.COLOR_ATTACHMENT0+b))}if(T.length>1&&d.drawBuffers(T),a.depthTexture){var w=this.writeDepthTexture;if(w){var A=a.depthTexture;this.renderer.texture.bind(A,0),d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,A._glTextures[this.CONTEXT_UID].texture,l)}}(a.stencil||a.depth)&&!(a.depthTexture&&this.writeDepthTexture)?(v.stencil=v.stencil||d.createRenderbuffer(),d.bindRenderbuffer(d.RENDERBUFFER,v.stencil),v.msaaBuffer?d.renderbufferStorageMultisample(d.RENDERBUFFER,v.multisample,d.DEPTH24_STENCIL8,a.width,a.height):d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,a.width,a.height),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,v.stencil)):v.stencil&&(d.deleteRenderbuffer(v.stencil),v.stencil=null)},s.prototype.canMultisampleFramebuffer=function(a){return this.renderer.context.webGLVersion!==1&&a.colorTextures.length<=1&&!a.depthTexture},s.prototype.detectSamples=function(a){var l=this.msaaSamples,d=MSAA_QUALITY$5.NONE;if(a<=1||l===null)return d;for(var v=0;v<l.length;v++)if(l[v]<=a){d=l[v];break}return d===1&&(d=MSAA_QUALITY$5.NONE),d},s.prototype.blit=function(a,l,d){var v=this,m=v.current,g=v.renderer,T=v.gl,b=v.CONTEXT_UID;if(g.context.webGLVersion===2&&!!m){var R=m.glFramebuffers[b];if(!!R){if(!a){if(!R.msaaBuffer)return;var C=m.colorTextures[0];if(!C)return;R.blitFramebuffer||(R.blitFramebuffer=new Framebuffer(m.width,m.height),R.blitFramebuffer.addColorTexture(0,C)),a=R.blitFramebuffer,a.colorTextures[0]!==C&&(a.colorTextures[0]=C,a.dirtyId++,a.dirtyFormat++),(a.width!==m.width||a.height!==m.height)&&(a.width=m.width,a.height=m.height,a.dirtyId++,a.dirtySize++)}l||(l=tempRectangle,l.width=m.width,l.height=m.height),d||(d=l);var w=l.width===d.width&&l.height===d.height;this.bind(a),T.bindFramebuffer(T.READ_FRAMEBUFFER,R.framebuffer),T.blitFramebuffer(l.left,l.top,l.right,l.bottom,d.left,d.top,d.right,d.bottom,T.COLOR_BUFFER_BIT,w?T.NEAREST:T.LINEAR)}}},s.prototype.disposeFramebuffer=function(a,l){var d=a.glFramebuffers[this.CONTEXT_UID],v=this.gl;if(!!d){delete a.glFramebuffers[this.CONTEXT_UID];var m=this.managedFramebuffers.indexOf(a);m>=0&&this.managedFramebuffers.splice(m,1),a.disposeRunner.remove(this),l||(v.deleteFramebuffer(d.framebuffer),d.msaaBuffer&&v.deleteRenderbuffer(d.msaaBuffer),d.stencil&&v.deleteRenderbuffer(d.stencil)),d.blitFramebuffer&&d.blitFramebuffer.dispose()}},s.prototype.disposeAll=function(a){var l=this.managedFramebuffers;this.managedFramebuffers=[];for(var d=0;d<l.length;d++)this.disposeFramebuffer(l[d],a)},s.prototype.forceStencil=function(){var a=this.current;if(!!a){var l=a.glFramebuffers[this.CONTEXT_UID];if(!(!l||l.stencil)){a.stencil=!0;var d=a.width,v=a.height,m=this.gl,g=m.createRenderbuffer();m.bindRenderbuffer(m.RENDERBUFFER,g),l.msaaBuffer?m.renderbufferStorageMultisample(m.RENDERBUFFER,l.multisample,m.DEPTH24_STENCIL8,d,v):m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_STENCIL,d,v),l.stencil=g,m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,g)}}},s.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle},s.prototype.destroy=function(){this.renderer=null},s}(),byteSizeMap={5126:4,5123:2,5121:1},GeometrySystem=function(){function s(a){this.renderer=a,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return s.prototype.contextChange=function(){this.disposeAll(!0);var a=this.gl=this.renderer.gl,l=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,l.webGLVersion!==2){var d=this.renderer.context.extensions.vertexArrayObject;settings$1.PREFER_ENV===ENV$5.WEBGL_LEGACY&&(d=null),d?(a.createVertexArray=function(){return d.createVertexArrayOES()},a.bindVertexArray=function(m){return d.bindVertexArrayOES(m)},a.deleteVertexArray=function(m){return d.deleteVertexArrayOES(m)}):(this.hasVao=!1,a.createVertexArray=function(){return null},a.bindVertexArray=function(){return null},a.deleteVertexArray=function(){return null})}if(l.webGLVersion!==2){var v=a.getExtension("ANGLE_instanced_arrays");v?(a.vertexAttribDivisor=function(m,g){return v.vertexAttribDivisorANGLE(m,g)},a.drawElementsInstanced=function(m,g,T,b,R){return v.drawElementsInstancedANGLE(m,g,T,b,R)},a.drawArraysInstanced=function(m,g,T,b){return v.drawArraysInstancedANGLE(m,g,T,b)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=l.webGLVersion===2||!!l.extensions.uint32ElementIndex},s.prototype.bind=function(a,l){l=l||this.renderer.shader.shader;var d=this.gl,v=a.glVertexArrayObjects[this.CONTEXT_UID],m=!1;v||(this.managedGeometries[a.id]=a,a.disposeRunner.add(this),a.glVertexArrayObjects[this.CONTEXT_UID]=v={},m=!0);var g=v[l.program.id]||this.initGeometryVao(a,l,m);this._activeGeometry=a,this._activeVao!==g&&(this._activeVao=g,this.hasVao?d.bindVertexArray(g):this.activateVao(a,l.program)),this.updateBuffers()},s.prototype.reset=function(){this.unbind()},s.prototype.updateBuffers=function(){for(var a=this._activeGeometry,l=this.renderer.buffer,d=0;d<a.buffers.length;d++){var v=a.buffers[d];l.update(v)}},s.prototype.checkCompatibility=function(a,l){var d=a.attributes,v=l.attributeData;for(var m in v)if(!d[m])throw new Error('shader and geometry incompatible, geometry missing the "'+m+'" attribute')},s.prototype.getSignature=function(a,l){var d=a.attributes,v=l.attributeData,m=["g",a.id];for(var g in d)v[g]&&m.push(g,v[g].location);return m.join("-")},s.prototype.initGeometryVao=function(a,l,d){d===void 0&&(d=!0);var v=this.gl,m=this.CONTEXT_UID,g=this.renderer.buffer,T=l.program;T.glPrograms[m]||this.renderer.shader.generateProgram(l),this.checkCompatibility(a,T);var b=this.getSignature(a,T),R=a.glVertexArrayObjects[this.CONTEXT_UID],C=R[b];if(C)return R[T.id]=C,C;var w=a.buffers,A=a.attributes,S={},O={};for(var L in w)S[L]=0,O[L]=0;for(var L in A)!A[L].size&&T.attributeData[L]?A[L].size=T.attributeData[L].size:A[L].size||console.warn("PIXI Geometry attribute '"+L+"' size cannot be determined (likely the bound shader does not have the attribute)"),S[A[L].buffer]+=A[L].size*byteSizeMap[A[L].type];for(var L in A){var N=A[L],U=N.size;N.stride===void 0&&(S[N.buffer]===U*byteSizeMap[N.type]?N.stride=0:N.stride=S[N.buffer]),N.start===void 0&&(N.start=O[N.buffer],O[N.buffer]+=U*byteSizeMap[N.type])}C=v.createVertexArray(),v.bindVertexArray(C);for(var $=0;$<w.length;$++){var G=w[$];g.bind(G),d&&G._glBuffers[m].refCount++}return this.activateVao(a,T),this._activeVao=C,R[T.id]=C,R[b]=C,C},s.prototype.disposeGeometry=function(a,l){var d;if(!!this.managedGeometries[a.id]){delete this.managedGeometries[a.id];var v=a.glVertexArrayObjects[this.CONTEXT_UID],m=this.gl,g=a.buffers,T=(d=this.renderer)===null||d===void 0?void 0:d.buffer;if(a.disposeRunner.remove(this),!!v){if(T)for(var b=0;b<g.length;b++){var R=g[b]._glBuffers[this.CONTEXT_UID];R&&(R.refCount--,R.refCount===0&&!l&&T.dispose(g[b],l))}if(!l){for(var C in v)if(C[0]==="g"){var w=v[C];this._activeVao===w&&this.unbind(),m.deleteVertexArray(w)}}delete a.glVertexArrayObjects[this.CONTEXT_UID]}}},s.prototype.disposeAll=function(a){for(var l=Object.keys(this.managedGeometries),d=0;d<l.length;d++)this.disposeGeometry(this.managedGeometries[l[d]],a)},s.prototype.activateVao=function(a,l){var d=this.gl,v=this.CONTEXT_UID,m=this.renderer.buffer,g=a.buffers,T=a.attributes;a.indexBuffer&&m.bind(a.indexBuffer);var b=null;for(var R in T){var C=T[R],w=g[C.buffer],A=w._glBuffers[v];if(l.attributeData[R]){b!==A&&(m.bind(w),b=A);var S=l.attributeData[R].location;if(d.enableVertexAttribArray(S),d.vertexAttribPointer(S,C.size,C.type||d.FLOAT,C.normalized,C.stride,C.start),C.instance)if(this.hasInstance)d.vertexAttribDivisor(S,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},s.prototype.draw=function(a,l,d,v){var m=this.gl,g=this._activeGeometry;if(g.indexBuffer){var T=g.indexBuffer.data.BYTES_PER_ELEMENT,b=T===2?m.UNSIGNED_SHORT:m.UNSIGNED_INT;T===2||T===4&&this.canUseUInt32ElementIndex?g.instanced?m.drawElementsInstanced(a,l||g.indexBuffer.data.length,b,(d||0)*T,v||1):m.drawElements(a,l||g.indexBuffer.data.length,b,(d||0)*T):console.warn("unsupported index buffer type: uint32")}else g.instanced?m.drawArraysInstanced(a,d,l||g.getSize(),v||1):m.drawArrays(a,d,l||g.getSize());return this},s.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},s.prototype.destroy=function(){this.renderer=null},s}(),MaskData=function(){function s(a){a===void 0&&(a=null),this.type=MASK_TYPES$5.NONE,this.autoDetect=!0,this.maskObject=a||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=settings$1.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(s.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(a){a?this._filters?this._filters[0]=a:this._filters=[a]:this._filters=null},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES$5.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},s.prototype.copyCountersOrReset=function(a){a?(this._stencilCounter=a._stencilCounter,this._scissorCounter=a._scissorCounter,this._scissorRect=a._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},s}();function compileShader(s,a,l){var d=s.createShader(a);return s.shaderSource(d,l),s.compileShader(d),d}function logPrettyShaderError(s,a){var l=s.getShaderSource(a).split(`
`).map(function(R,C){return C+": "+R}),d=s.getShaderInfoLog(a),v=d.split(`
`),m={},g=v.map(function(R){return parseFloat(R.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(R){return R&&!m[R]?(m[R]=!0,!0):!1}),T=[""];g.forEach(function(R){l[R-1]="%c"+l[R-1]+"%c",T.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var b=l.join(`
`);T[0]=b,console.error(d),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,T),console.groupEnd()}function logProgramError(s,a,l,d){s.getProgramParameter(a,s.LINK_STATUS)||(s.getShaderParameter(l,s.COMPILE_STATUS)||logPrettyShaderError(s,l),s.getShaderParameter(d,s.COMPILE_STATUS)||logPrettyShaderError(s,d),console.error("PixiJS Error: Could not initialize shader."),s.getProgramInfoLog(a)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",s.getProgramInfoLog(a)))}function booleanArray(s){for(var a=new Array(s),l=0;l<a.length;l++)a[l]=!1;return a}function defaultValue(s,a){switch(s){case"float":return 0;case"vec2":return new Float32Array(2*a);case"vec3":return new Float32Array(3*a);case"vec4":return new Float32Array(4*a);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*a);case"ivec3":return new Int32Array(3*a);case"ivec4":return new Int32Array(4*a);case"uvec2":return new Uint32Array(2*a);case"uvec3":return new Uint32Array(3*a);case"uvec4":return new Uint32Array(4*a);case"bool":return!1;case"bvec2":return booleanArray(2*a);case"bvec3":return booleanArray(3*a);case"bvec4":return booleanArray(4*a);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var unknownContext={},context=unknownContext;function getTestContext(){if(context===unknownContext||context&&context.isContextLost()){var s=settings$1.ADAPTER.createCanvas(),a=void 0;settings$1.PREFER_ENV>=ENV$5.WEBGL2&&(a=s.getContext("webgl2",{})),a||(a=s.getContext("webgl",{})||s.getContext("experimental-webgl",{}),a?a.getExtension("WEBGL_draw_buffers"):a=null),context=a}return context}var maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION$5.MEDIUM;var s=getTestContext();if(s&&s.getShaderPrecisionFormat){var a=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);maxFragmentPrecision=a.precision?PRECISION$5.HIGH:PRECISION$5.MEDIUM}}return maxFragmentPrecision}function setPrecision(s,a,l){if(s.substring(0,9)!=="precision"){var d=a;return a===PRECISION$5.HIGH&&l!==PRECISION$5.HIGH&&(d=PRECISION$5.MEDIUM),"precision "+d+` float;
`+s}else if(l!==PRECISION$5.HIGH&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}var GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(s){return GLSL_TO_SIZE[s]}var GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(s,a){if(!GL_TABLE){var l=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var d=0;d<l.length;++d){var v=l[d];GL_TABLE[s[v]]=GL_TO_GLSL_TYPES[v]}}return GL_TABLE[a]}var uniformParsers=[{test:function(s){return s.type==="float"&&s.size===1},code:function(s){return`
            if(uv["`+s+'"] !== ud["'+s+`"].value)
            {
                ud["`+s+'"].value = uv["'+s+`"]
                gl.uniform1f(ud["`+s+'"].location, uv["'+s+`"])
            }
            `}},{test:function(s){return(s.type==="sampler2D"||s.type==="samplerCube"||s.type==="sampler2DArray")&&s.size===1&&!s.isArray},code:function(s){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+s+`"], t);

            if(ud["`+s+`"].value !== t)
            {
                ud["`+s+`"].value = t;
                gl.uniform1i(ud["`+s+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(s,a){return s.type==="mat3"&&s.size===1&&a.a!==void 0},code:function(s){return`
            gl.uniformMatrix3fv(ud["`+s+'"].location, false, uv["'+s+`"].toArray(true));
            `},codeUbo:function(s){return`
                var `+s+"_matrix = uv."+s+`.toArray(true);

                data[offset] = `+s+`_matrix[0];
                data[offset+1] = `+s+`_matrix[1];
                data[offset+2] = `+s+`_matrix[2];
        
                data[offset + 4] = `+s+`_matrix[3];
                data[offset + 5] = `+s+`_matrix[4];
                data[offset + 6] = `+s+`_matrix[5];
        
                data[offset + 8] = `+s+`_matrix[6];
                data[offset + 9] = `+s+`_matrix[7];
                data[offset + 10] = `+s+`_matrix[8];
            `}},{test:function(s,a){return s.type==="vec2"&&s.size===1&&a.x!==void 0},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+s+`"].location, v.x, v.y);
                }`},codeUbo:function(s){return`
                v = uv.`+s+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(s){return s.type==="vec2"&&s.size===1},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+s+`"].location, v[0], v[1]);
                }
            `}},{test:function(s,a){return s.type==="vec4"&&s.size===1&&a.width!==void 0},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+s+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(s){return`
                    v = uv.`+s+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(s){return s.type==="vec4"&&s.size===1},code:function(s){return`
                cv = ud["`+s+`"].value;
                v = uv["`+s+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+s+`"].location, v[0], v[1], v[2], v[3])
                }`}}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(s,a){var l,d=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var v in s.uniforms){var m=a[v];if(!m){!((l=s.uniforms[v])===null||l===void 0)&&l.group&&(s.uniforms[v].ubo?d.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+v+", '"+v+`');
                    `):d.push(`
                        renderer.shader.syncUniformGroup(uv.`+v+`, syncData);
                    `));continue}for(var g=s.uniforms[v],T=!1,b=0;b<uniformParsers.length;b++)if(uniformParsers[b].test(m,g)){d.push(uniformParsers[b].code(v,g)),T=!0;break}if(!T){var R=m.size===1?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS,C=R[m.type].replace("location",'ud["'+v+'"].location');d.push(`
            cu = ud["`+v+`"];
            cv = cu.value;
            v = uv["`+v+`"];
            `+C+";")}}return new Function("ud","uv","renderer","syncData",d.join(`
`))}var fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(s){for(var a="",l=0;l<s;++l)l>0&&(a+=`
else `),l<s-1&&(a+="if(test == "+l+".0){}");return a}function checkMaxIfStatementsInShader(s,a){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var l=a.createShader(a.FRAGMENT_SHADER);;){var d=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(s));if(a.shaderSource(l,d),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))s=s/2|0;else break}return s}var unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{var s=new Function("param1","param2","param3","return param1[param2] === param3;");unsafeEval=s({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,UID$1=0,nameCache={},Program=function(){function s(a,l,d){d===void 0&&(d="pixi-shader"),this.id=UID$1++,this.vertexSrc=a||s.defaultVertexSrc,this.fragmentSrc=l||s.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(d=d.replace(/\s+/g,"-"),nameCache[d]?(nameCache[d]++,d+="-"+nameCache[d]):nameCache[d]=1,this.vertexSrc="#define SHADER_NAME "+d+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+d+`
`+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,settings$1.PRECISION_VERTEX,PRECISION$5.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,settings$1.PRECISION_FRAGMENT,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(s,"defaultVertexSrc",{get:function(){return defaultVertex$3},enumerable:!1,configurable:!0}),Object.defineProperty(s,"defaultFragmentSrc",{get:function(){return defaultFragment$2},enumerable:!1,configurable:!0}),s.from=function(a,l,d){var v=a+l,m=ProgramCache[v];return m||(ProgramCache[v]=m=new s(a,l,d)),m},s}(),Shader=function(){function s(a,l){this.uniformBindCount=0,this.program=a,l?l instanceof UniformGroup?this.uniformGroup=l:this.uniformGroup=new UniformGroup(l):this.uniformGroup=new UniformGroup({})}return s.prototype.checkUniformExists=function(a,l){if(l.uniforms[a])return!0;for(var d in l.uniforms){var v=l.uniforms[d];if(v.group&&this.checkUniformExists(a,v))return!0}return!1},s.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(s.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),s.from=function(a,l,d){var v=Program.from(a,l);return new s(v,d)},s}(),BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5,State$1=function(){function s(){this.data=0,this.blendMode=BLEND_MODES$5.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(s.prototype,"blend",{get:function(){return!!(this.data&1<<BLEND$1)},set:function(a){!!(this.data&1<<BLEND$1)!==a&&(this.data^=1<<BLEND$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"offsets",{get:function(){return!!(this.data&1<<OFFSET$1)},set:function(a){!!(this.data&1<<OFFSET$1)!==a&&(this.data^=1<<OFFSET$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"culling",{get:function(){return!!(this.data&1<<CULLING$1)},set:function(a){!!(this.data&1<<CULLING$1)!==a&&(this.data^=1<<CULLING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"depthTest",{get:function(){return!!(this.data&1<<DEPTH_TEST$1)},set:function(a){!!(this.data&1<<DEPTH_TEST$1)!==a&&(this.data^=1<<DEPTH_TEST$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"depthMask",{get:function(){return!!(this.data&1<<DEPTH_MASK$1)},set:function(a){!!(this.data&1<<DEPTH_MASK$1)!==a&&(this.data^=1<<DEPTH_MASK$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<WINDING$1)},set:function(a){!!(this.data&1<<WINDING$1)!==a&&(this.data^=1<<WINDING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"blendMode",{get:function(){return this._blendMode},set:function(a){this.blend=a!==BLEND_MODES$5.NONE,this._blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(a){this.offsets=!!a,this._polygonOffset=a},enumerable:!1,configurable:!0}),s.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},s.for2d=function(){var a=new s;return a.depthTest=!1,a.blend=!0,a},s}(),defaultFragment$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Filter=function(s){__extends$i(a,s);function a(l,d,v){var m=this,g=Program.from(l||a.defaultVertexSrc,d||a.defaultFragmentSrc);return m=s.call(this,g,v)||this,m.padding=0,m.resolution=settings$1.FILTER_RESOLUTION,m.multisample=settings$1.FILTER_MULTISAMPLE,m.enabled=!0,m.autoFit=!0,m.state=new State$1,m}return a.prototype.apply=function(l,d,v,m,g){l.applyFilter(this,d,v,m)},Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resolution",{get:function(){return this._resolution},set:function(l){this._resolution=l},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultVertexSrc",{get:function(){return defaultVertex$2},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultFragmentSrc",{get:function(){return defaultFragment$1},enumerable:!1,configurable:!0}),a}(Shader),vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,tempMat$1=new Matrix,TextureMatrix=function(){function s(a,l){this._texture=a,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof l>"u"?.5:l,this.isSimple=!1}return Object.defineProperty(s.prototype,"texture",{get:function(){return this._texture},set:function(a){this._texture=a,this._textureID=-1},enumerable:!1,configurable:!0}),s.prototype.multiplyUvs=function(a,l){l===void 0&&(l=a);for(var d=this.mapCoord,v=0;v<a.length;v+=2){var m=a[v],g=a[v+1];l[v]=m*d.a+g*d.c+d.tx,l[v+1]=m*d.b+g*d.d+d.ty}return l},s.prototype.update=function(a){var l=this._texture;if(!l||!l.valid||!a&&this._textureID===l._updateID)return!1;this._textureID=l._updateID,this._updateID++;var d=l._uvs;this.mapCoord.set(d.x1-d.x0,d.y1-d.y0,d.x3-d.x0,d.y3-d.y0,d.x0,d.y0);var v=l.orig,m=l.trim;m&&(tempMat$1.set(v.width/m.width,0,0,v.height/m.height,-m.x/m.width,-m.y/m.height),this.mapCoord.append(tempMat$1));var g=l.baseTexture,T=this.uClampFrame,b=this.clampMargin/g.resolution,R=this.clampOffset;return T[0]=(l._frame.x+b+R)/g.width,T[1]=(l._frame.y+b+R)/g.height,T[2]=(l._frame.x+l._frame.width-b+R)/g.width,T[3]=(l._frame.y+l._frame.height-b+R)/g.height,this.uClampOffset[0]=R/g.realWidth,this.uClampOffset[1]=R/g.realHeight,this.isSimple=l._frame.width===g.width&&l._frame.height===g.height&&l.rotate===0,!0},s}(),SpriteMaskFilter=function(s){__extends$i(a,s);function a(l,d,v){var m=this,g=null;return typeof l!="string"&&d===void 0&&v===void 0&&(g=l,l=void 0,d=void 0,v=void 0),m=s.call(this,l||vertex$4,d||fragment$7,v)||this,m.maskSprite=g,m.maskMatrix=new Matrix,m}return Object.defineProperty(a.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(l){this._maskSprite=l,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),a.prototype.apply=function(l,d,v,m){var g=this._maskSprite,T=g._texture;!T.valid||(T.uvMatrix||(T.uvMatrix=new TextureMatrix(T,0)),T.uvMatrix.update(),this.uniforms.npmAlpha=T.baseTexture.alphaMode?0:1,this.uniforms.mask=T,this.uniforms.otherMatrix=l.calculateSpriteMatrix(this.maskMatrix,g).prepend(T.uvMatrix.mapCoord),this.uniforms.alpha=g.worldAlpha,this.uniforms.maskClamp=T.uvMatrix.uClampFrame,l.applyFilter(this,d,v,m))},a}(Filter),MaskSystem=function(){function s(a){this.renderer=a,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return s.prototype.setMaskStack=function(a){this.maskStack=a,this.renderer.scissor.setMaskStack(a),this.renderer.stencil.setMaskStack(a)},s.prototype.push=function(a,l){var d=l;if(!d.isMaskData){var v=this.maskDataPool.pop()||new MaskData;v.pooled=!0,v.maskObject=l,d=v}var m=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(d.copyCountersOrReset(m),d._colorMask=m?m._colorMask:15,d.autoDetect&&this.detect(d),d._target=a,d.type!==MASK_TYPES$5.SPRITE&&this.maskStack.push(d),d.enabled)switch(d.type){case MASK_TYPES$5.SCISSOR:this.renderer.scissor.push(d);break;case MASK_TYPES$5.STENCIL:this.renderer.stencil.push(d);break;case MASK_TYPES$5.SPRITE:d.copyCountersOrReset(null),this.pushSpriteMask(d);break;case MASK_TYPES$5.COLOR:this.pushColorMask(d);break}d.type===MASK_TYPES$5.SPRITE&&this.maskStack.push(d)},s.prototype.pop=function(a){var l=this.maskStack.pop();if(!(!l||l._target!==a)){if(l.enabled)switch(l.type){case MASK_TYPES$5.SCISSOR:this.renderer.scissor.pop(l);break;case MASK_TYPES$5.STENCIL:this.renderer.stencil.pop(l.maskObject);break;case MASK_TYPES$5.SPRITE:this.popSpriteMask(l);break;case MASK_TYPES$5.COLOR:this.popColorMask(l);break}if(l.reset(),l.pooled&&this.maskDataPool.push(l),this.maskStack.length!==0){var d=this.maskStack[this.maskStack.length-1];d.type===MASK_TYPES$5.SPRITE&&d._filters&&(d._filters[0].maskSprite=d.maskObject)}}},s.prototype.detect=function(a){var l=a.maskObject;l?l.isSprite?a.type=MASK_TYPES$5.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(a)?a.type=MASK_TYPES$5.SCISSOR:a.type=MASK_TYPES$5.STENCIL:a.type=MASK_TYPES$5.COLOR},s.prototype.pushSpriteMask=function(a){var l,d,v=a.maskObject,m=a._target,g=a._filters;g||(g=this.alphaMaskPool[this.alphaMaskIndex],g||(g=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]));var T=this.renderer,b=T.renderTexture,R,C;if(b.current){var w=b.current;R=a.resolution||w.resolution,C=(l=a.multisample)!==null&&l!==void 0?l:w.multisample}else R=a.resolution||T.resolution,C=(d=a.multisample)!==null&&d!==void 0?d:T.multisample;g[0].resolution=R,g[0].multisample=C,g[0].maskSprite=v;var A=m.filterArea;m.filterArea=v.getBounds(!0),T.filter.push(m,g),m.filterArea=A,a._filters||this.alphaMaskIndex++},s.prototype.popSpriteMask=function(a){this.renderer.filter.pop(),a._filters?a._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},s.prototype.pushColorMask=function(a){var l=a._colorMask,d=a._colorMask=l&a.colorMask;d!==l&&this.renderer.gl.colorMask((d&1)!==0,(d&2)!==0,(d&4)!==0,(d&8)!==0)},s.prototype.popColorMask=function(a){var l=a._colorMask,d=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;d!==l&&this.renderer.gl.colorMask((d&1)!==0,(d&2)!==0,(d&4)!==0,(d&8)!==0)},s.prototype.destroy=function(){this.renderer=null},s}(),AbstractMaskSystem=function(){function s(a){this.renderer=a,this.maskStack=[],this.glConst=0}return s.prototype.getStackLength=function(){return this.maskStack.length},s.prototype.setMaskStack=function(a){var l=this.renderer.gl,d=this.getStackLength();this.maskStack=a;var v=this.getStackLength();v!==d&&(v===0?l.disable(this.glConst):(l.enable(this.glConst),this._useCurrent()))},s.prototype._useCurrent=function(){},s.prototype.destroy=function(){this.renderer=null,this.maskStack=null},s}(),tempMatrix$1=new Matrix,rectPool=[],ScissorSystem=function(s){__extends$i(a,s);function a(l){var d=s.call(this,l)||this;return d.glConst=settings$1.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,d}return a.prototype.getStackLength=function(){var l=this.maskStack[this.maskStack.length-1];return l?l._scissorCounter:0},a.prototype.calcScissorRect=function(l){var d;if(!l._scissorRectLocal){var v=l._scissorRect,m=l.maskObject,g=this.renderer,T=g.renderTexture,b=m.getBounds(!0,(d=rectPool.pop())!==null&&d!==void 0?d:new Rectangle);this.roundFrameToPixels(b,T.current?T.current.resolution:g.resolution,T.sourceFrame,T.destinationFrame,g.projection.transform),v&&b.fit(v),l._scissorRectLocal=b}},a.isMatrixRotated=function(l){if(!l)return!1;var d=l.a,v=l.b,m=l.c,g=l.d;return(Math.abs(v)>1e-4||Math.abs(m)>1e-4)&&(Math.abs(d)>1e-4||Math.abs(g)>1e-4)},a.prototype.testScissor=function(l){var d=l.maskObject;if(!d.isFastRect||!d.isFastRect()||a.isMatrixRotated(d.worldTransform)||a.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(l);var v=l._scissorRectLocal;return v.width>0&&v.height>0},a.prototype.roundFrameToPixels=function(l,d,v,m,g){a.isMatrixRotated(g)||(g=g?tempMatrix$1.copyFrom(g):tempMatrix$1.identity(),g.translate(-v.x,-v.y).scale(m.width/v.width,m.height/v.height).translate(m.x,m.y),this.renderer.filter.transformAABB(g,l),l.fit(m),l.x=Math.round(l.x*d),l.y=Math.round(l.y*d),l.width=Math.round(l.width*d),l.height=Math.round(l.height*d))},a.prototype.push=function(l){l._scissorRectLocal||this.calcScissorRect(l);var d=this.renderer.gl;l._scissorRect||d.enable(d.SCISSOR_TEST),l._scissorCounter++,l._scissorRect=l._scissorRectLocal,this._useCurrent()},a.prototype.pop=function(l){var d=this.renderer.gl;l&&rectPool.push(l._scissorRectLocal),this.getStackLength()>0?this._useCurrent():d.disable(d.SCISSOR_TEST)},a.prototype._useCurrent=function(){var l=this.maskStack[this.maskStack.length-1]._scissorRect,d;this.renderer.renderTexture.current?d=l.y:d=this.renderer.height-l.height-l.y,this.renderer.gl.scissor(l.x,d,l.width,l.height)},a}(AbstractMaskSystem),StencilSystem=function(s){__extends$i(a,s);function a(l){var d=s.call(this,l)||this;return d.glConst=settings$1.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,d}return a.prototype.getStackLength=function(){var l=this.maskStack[this.maskStack.length-1];return l?l._stencilCounter:0},a.prototype.push=function(l){var d=l.maskObject,v=this.renderer.gl,m=l._stencilCounter;m===0&&(this.renderer.framebuffer.forceStencil(),v.clearStencil(0),v.clear(v.STENCIL_BUFFER_BIT),v.enable(v.STENCIL_TEST)),l._stencilCounter++;var g=l._colorMask;g!==0&&(l._colorMask=0,v.colorMask(!1,!1,!1,!1)),v.stencilFunc(v.EQUAL,m,4294967295),v.stencilOp(v.KEEP,v.KEEP,v.INCR),d.renderable=!0,d.render(this.renderer),this.renderer.batch.flush(),d.renderable=!1,g!==0&&(l._colorMask=g,v.colorMask((g&1)!==0,(g&2)!==0,(g&4)!==0,(g&8)!==0)),this._useCurrent()},a.prototype.pop=function(l){var d=this.renderer.gl;if(this.getStackLength()===0)d.disable(d.STENCIL_TEST);else{var v=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,m=v?v._colorMask:15;m!==0&&(v._colorMask=0,d.colorMask(!1,!1,!1,!1)),d.stencilOp(d.KEEP,d.KEEP,d.DECR),l.renderable=!0,l.render(this.renderer),this.renderer.batch.flush(),l.renderable=!1,m!==0&&(v._colorMask=m,d.colorMask((m&1)!==0,(m&2)!==0,(m&4)!==0,(m&8)!==0)),this._useCurrent()}},a.prototype._useCurrent=function(){var l=this.renderer.gl;l.stencilFunc(l.EQUAL,this.getStackLength(),4294967295),l.stencilOp(l.KEEP,l.KEEP,l.KEEP)},a}(AbstractMaskSystem),ProjectionSystem=function(){function s(a){this.renderer=a,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}return s.prototype.update=function(a,l,d,v){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=l||this.sourceFrame||a,this.calculateProjection(this.destinationFrame,this.sourceFrame,d,v),this.transform&&this.projectionMatrix.append(this.transform);var m=this.renderer;m.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,m.globalUniforms.update(),m.shader.shader&&m.shader.syncUniformGroup(m.shader.shader.uniforms.globals)},s.prototype.calculateProjection=function(a,l,d,v){var m=this.projectionMatrix,g=v?-1:1;m.identity(),m.a=1/l.width*2,m.d=g*(1/l.height*2),m.tx=-1-l.x*m.a,m.ty=-g-l.y*m.d},s.prototype.setTransform=function(a){},s.prototype.destroy=function(){this.renderer=null},s}(),tempRect=new Rectangle,tempRect2=new Rectangle,RenderTextureSystem=function(){function s(a){this.renderer=a,this.clearColor=a._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}return s.prototype.bind=function(a,l,d){a===void 0&&(a=null);var v=this.renderer;this.current=a;var m,g,T;a?(m=a.baseTexture,T=m.resolution,l||(tempRect.width=a.frame.width,tempRect.height=a.frame.height,l=tempRect),d||(tempRect2.x=a.frame.x,tempRect2.y=a.frame.y,tempRect2.width=l.width,tempRect2.height=l.height,d=tempRect2),g=m.framebuffer):(T=v.resolution,l||(tempRect.width=v.screen.width,tempRect.height=v.screen.height,l=tempRect),d||(d=tempRect,d.width=l.width,d.height=l.height));var b=this.viewportFrame;b.x=d.x*T,b.y=d.y*T,b.width=d.width*T,b.height=d.height*T,a||(b.y=v.view.height-(b.y+b.height)),b.ceil(),this.renderer.framebuffer.bind(g,b),this.renderer.projection.update(d,l,T,!g),a?this.renderer.mask.setMaskStack(m.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(l),this.destinationFrame.copyFrom(d)},s.prototype.clear=function(a,l){this.current?a=a||this.current.baseTexture.clearColor:a=a||this.clearColor;var d=this.destinationFrame,v=this.current?this.current.baseTexture:this.renderer.screen,m=d.width!==v.width||d.height!==v.height;if(m){var g=this.viewportFrame,T=g.x,b=g.y,R=g.width,C=g.height;T=Math.round(T),b=Math.round(b),R=Math.round(R),C=Math.round(C),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(T,b,R,C)}this.renderer.framebuffer.clear(a[0],a[1],a[2],a[3],l),m&&this.renderer.scissor.pop()},s.prototype.resize=function(){this.bind(null)},s.prototype.reset=function(){this.bind(null)},s.prototype.destroy=function(){this.renderer=null},s}();function uboUpdate(s,a,l,d,v){l.buffer.update(v)}var UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(s){for(var a=s.map(function(b){return{data:b,offset:0,dataLen:0,dirty:0}}),l=0,d=0,v=0,m=0;m<a.length;m++){var g=a[m];if(l=GLSL_TO_STD40_SIZE[g.data.type],g.data.size>1&&(l=Math.max(l,16)*g.data.size),g.dataLen=l,d%l!==0&&d<16){var T=d%l%16;d+=T,v+=T}d+l>16?(v=Math.ceil(v/16)*16,g.offset=v,v+=l,d=l):(g.offset=v,d+=l,v+=l)}return v=Math.ceil(v/16)*16,{uboElements:a,size:v}}function getUBOData(s,a){var l=[];for(var d in s)a[d]&&l.push(a[d]);return l.sort(function(v,m){return v.index-m.index}),l}function generateUniformBufferSync(s,a){if(!s.autoManage)return{size:0,syncFunc:uboUpdate};for(var l=getUBOData(s.uniforms,a),d=createUBOElements(l),v=d.uboElements,m=d.size,g=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],T=0;T<v.length;T++){for(var b=v[T],R=s.uniforms[b.data.name],C=b.data.name,w=!1,A=0;A<uniformParsers.length;A++){var S=uniformParsers[A];if(S.codeUbo&&S.test(b.data,R)){g.push("offset = "+b.offset/4+";",uniformParsers[A].codeUbo(b.data.name,R)),w=!0;break}}if(!w)if(b.data.size>1){var O=mapSize(b.data.type),L=Math.max(GLSL_TO_STD40_SIZE[b.data.type]/16,1),N=O/L,U=(4-N%4)%4;g.push(`
                cv = ud.`+C+`.value;
                v = uv.`+C+`;
                offset = `+b.offset/4+`;

                t = 0;

                for(var i=0; i < `+b.data.size*L+`; i++)
                {
                    for(var j = 0; j < `+N+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+U+`;
                }

                `)}else{var $=UBO_TO_SINGLE_SETTERS[b.data.type];g.push(`
                cv = ud.`+C+`.value;
                v = uv.`+C+`;
                offset = `+b.offset/4+`;
                `+$+`;
                `)}}return g.push(`
       renderer.buffer.update(buffer);
    `),{size:m,syncFunc:new Function("ud","uv","renderer","syncData","buffer",g.join(`
`))}}var IGLUniformData=function(){function s(){}return s}(),GLProgram=function(){function s(a,l){this.program=a,this.uniformData=l,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return s.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},s}();function getAttributeData(s,a){for(var l={},d=a.getProgramParameter(s,a.ACTIVE_ATTRIBUTES),v=0;v<d;v++){var m=a.getActiveAttrib(s,v);if(m.name.indexOf("gl_")!==0){var g=mapType(a,m.type),T={type:g,name:m.name,size:mapSize(g),location:a.getAttribLocation(s,m.name)};l[m.name]=T}}return l}function getUniformData(s,a){for(var l={},d=a.getProgramParameter(s,a.ACTIVE_UNIFORMS),v=0;v<d;v++){var m=a.getActiveUniform(s,v),g=m.name.replace(/\[.*?\]$/,""),T=!!m.name.match(/\[.*?\]$/),b=mapType(a,m.type);l[g]={name:g,index:v,type:b,size:m.size,isArray:T,value:defaultValue(b,m.size)}}return l}function generateProgram(s,a){var l=compileShader(s,s.VERTEX_SHADER,a.vertexSrc),d=compileShader(s,s.FRAGMENT_SHADER,a.fragmentSrc),v=s.createProgram();if(s.attachShader(v,l),s.attachShader(v,d),s.linkProgram(v),s.getProgramParameter(v,s.LINK_STATUS)||logProgramError(s,v,l,d),a.attributeData=getAttributeData(v,s),a.uniformData=getUniformData(v,s),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(a.vertexSrc)){var m=Object.keys(a.attributeData);m.sort(function(C,w){return C>w?1:-1});for(var g=0;g<m.length;g++)a.attributeData[m[g]].location=g,s.bindAttribLocation(v,g,m[g]);s.linkProgram(v)}s.deleteShader(l),s.deleteShader(d);var T={};for(var g in a.uniformData){var b=a.uniformData[g];T[g]={location:s.getUniformLocation(v,g),value:defaultValue(b.type,b.size)}}var R=new GLProgram(v,T);return R}var UID=0,defaultSyncData={textureCount:0,uboCount:0},ShaderSystem=function(){function s(a){this.destroyed=!1,this.renderer=a,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}return s.prototype.systemCheck=function(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},s.prototype.contextChange=function(a){this.gl=a,this.reset()},s.prototype.bind=function(a,l){a.uniforms.globals=this.renderer.globalUniforms;var d=a.program,v=d.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(a);return this.shader=a,this.program!==d&&(this.program=d,this.gl.useProgram(v.program)),l||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(a.uniformGroup,defaultSyncData)),v},s.prototype.setUniforms=function(a){var l=this.shader.program,d=l.glPrograms[this.renderer.CONTEXT_UID];l.syncUniforms(d.uniformData,a,this.renderer)},s.prototype.syncUniformGroup=function(a,l){var d=this.getGlProgram();(!a.static||a.dirtyId!==d.uniformDirtyGroups[a.id])&&(d.uniformDirtyGroups[a.id]=a.dirtyId,this.syncUniforms(a,d,l))},s.prototype.syncUniforms=function(a,l,d){var v=a.syncUniforms[this.shader.program.id]||this.createSyncGroups(a);v(l.uniformData,a.uniforms,this.renderer,d)},s.prototype.createSyncGroups=function(a){var l=this.getSignature(a,this.shader.program.uniformData,"u");return this.cache[l]||(this.cache[l]=generateUniformsSync(a,this.shader.program.uniformData)),a.syncUniforms[this.shader.program.id]=this.cache[l],a.syncUniforms[this.shader.program.id]},s.prototype.syncUniformBufferGroup=function(a,l){var d=this.getGlProgram();if(!a.static||a.dirtyId!==0||!d.uniformGroups[a.id]){a.dirtyId=0;var v=d.uniformGroups[a.id]||this.createSyncBufferGroup(a,d,l);a.buffer.update(),v(d.uniformData,a.uniforms,this.renderer,defaultSyncData,a.buffer)}this.renderer.buffer.bindBufferBase(a.buffer,d.uniformBufferBindings[l])},s.prototype.createSyncBufferGroup=function(a,l,d){var v=this.renderer.gl;this.renderer.buffer.bind(a.buffer);var m=this.gl.getUniformBlockIndex(l.program,d);l.uniformBufferBindings[d]=this.shader.uniformBindCount,v.uniformBlockBinding(l.program,m,this.shader.uniformBindCount),this.shader.uniformBindCount++;var g=this.getSignature(a,this.shader.program.uniformData,"ubo"),T=this._uboCache[g];if(T||(T=this._uboCache[g]=generateUniformBufferSync(a,this.shader.program.uniformData)),a.autoManage){var b=new Float32Array(T.size/4);a.buffer.update(b)}return l.uniformGroups[a.id]=T.syncFunc,l.uniformGroups[a.id]},s.prototype.getSignature=function(a,l,d){var v=a.uniforms,m=[d+"-"];for(var g in v)m.push(g),l[g]&&m.push(l[g].type);return m.join("-")},s.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},s.prototype.generateProgram=function(a){var l=this.gl,d=a.program,v=generateProgram(l,d);return d.glPrograms[this.renderer.CONTEXT_UID]=v,v},s.prototype.reset=function(){this.program=null,this.shader=null},s.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},s}();function mapWebGLBlendModesToPixi(s,a){return a===void 0&&(a=[]),a[BLEND_MODES$5.NORMAL]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.ADD]=[s.ONE,s.ONE],a[BLEND_MODES$5.MULTIPLY]=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.SCREEN]=[s.ONE,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.OVERLAY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.DARKEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.LIGHTEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.COLOR_DODGE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.COLOR_BURN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.HARD_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.SOFT_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.DIFFERENCE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.EXCLUSION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.HUE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.SATURATION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.COLOR]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.LUMINOSITY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.NONE]=[0,0],a[BLEND_MODES$5.NORMAL_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.ADD_NPM]=[s.SRC_ALPHA,s.ONE,s.ONE,s.ONE],a[BLEND_MODES$5.SCREEN_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.SRC_IN]=[s.DST_ALPHA,s.ZERO],a[BLEND_MODES$5.SRC_OUT]=[s.ONE_MINUS_DST_ALPHA,s.ZERO],a[BLEND_MODES$5.SRC_ATOP]=[s.DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.DST_OVER]=[s.ONE_MINUS_DST_ALPHA,s.ONE],a[BLEND_MODES$5.DST_IN]=[s.ZERO,s.SRC_ALPHA],a[BLEND_MODES$5.DST_OUT]=[s.ZERO,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.DST_ATOP]=[s.ONE_MINUS_DST_ALPHA,s.SRC_ALPHA],a[BLEND_MODES$5.XOR]=[s.ONE_MINUS_DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],a[BLEND_MODES$5.SUBTRACT]=[s.ONE,s.ONE,s.ONE,s.ONE,s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD],a}var BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,StateSystem=function(){function s(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES$5.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State$1,this.defaultState.blend=!0}return s.prototype.contextChange=function(a){this.gl=a,this.blendModes=mapWebGLBlendModesToPixi(a),this.set(this.defaultState),this.reset()},s.prototype.set=function(a){if(a=a||this.defaultState,this.stateId!==a.data){for(var l=this.stateId^a.data,d=0;l;)l&1&&this.map[d].call(this,!!(a.data&1<<d)),l=l>>1,d++;this.stateId=a.data}for(var d=0;d<this.checks.length;d++)this.checks[d](this,a)},s.prototype.forceState=function(a){a=a||this.defaultState;for(var l=0;l<this.map.length;l++)this.map[l].call(this,!!(a.data&1<<l));for(var l=0;l<this.checks.length;l++)this.checks[l](this,a);this.stateId=a.data},s.prototype.setBlend=function(a){this.updateCheck(s.checkBlendMode,a),this.gl[a?"enable":"disable"](this.gl.BLEND)},s.prototype.setOffset=function(a){this.updateCheck(s.checkPolygonOffset,a),this.gl[a?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},s.prototype.setDepthTest=function(a){this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST)},s.prototype.setDepthMask=function(a){this.gl.depthMask(a)},s.prototype.setCullFace=function(a){this.gl[a?"enable":"disable"](this.gl.CULL_FACE)},s.prototype.setFrontFace=function(a){this.gl.frontFace(this.gl[a?"CW":"CCW"])},s.prototype.setBlendMode=function(a){if(a!==this.blendMode){this.blendMode=a;var l=this.blendModes[a],d=this.gl;l.length===2?d.blendFunc(l[0],l[1]):d.blendFuncSeparate(l[0],l[1],l[2],l[3]),l.length===6?(this._blendEq=!0,d.blendEquationSeparate(l[4],l[5])):this._blendEq&&(this._blendEq=!1,d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD))}},s.prototype.setPolygonOffset=function(a,l){this.gl.polygonOffset(a,l)},s.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},s.prototype.updateCheck=function(a,l){var d=this.checks.indexOf(a);l&&d===-1?this.checks.push(a):!l&&d!==-1&&this.checks.splice(d,1)},s.checkBlendMode=function(a,l){a.setBlendMode(l.blendMode)},s.checkPolygonOffset=function(a,l){a.setPolygonOffset(1,l.polygonOffset)},s.prototype.destroy=function(){this.gl=null},s}(),TextureGCSystem=function(){function s(a){this.renderer=a,this.count=0,this.checkCount=0,this.maxIdle=settings$1.GC_MAX_IDLE,this.checkCountMax=settings$1.GC_MAX_CHECK_COUNT,this.mode=settings$1.GC_MODE}return s.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==GC_MODES$5.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},s.prototype.run=function(){for(var a=this.renderer.texture,l=a.managedTextures,d=!1,v=0;v<l.length;v++){var m=l[v];!m.framebuffer&&this.count-m.touched>this.maxIdle&&(a.destroyTexture(m,!0),l[v]=null,d=!0)}if(d){for(var g=0,v=0;v<l.length;v++)l[v]!==null&&(l[g++]=l[v]);l.length=g}},s.prototype.unload=function(a){var l=this.renderer.texture,d=a._texture;d&&!d.framebuffer&&l.destroyTexture(d);for(var v=a.children.length-1;v>=0;v--)this.unload(a.children[v])},s.prototype.destroy=function(){this.renderer=null},s}();function mapTypeAndFormatToInternalFormat(s){var a,l,d,v,m,g,T,b,R,C,w,A,S,O,L,N,U,$,G,z,V,X,ie;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?ie=(a={},a[TYPES$5.UNSIGNED_BYTE]=(l={},l[FORMATS$5.RGBA]=s.RGBA8,l[FORMATS$5.RGB]=s.RGB8,l[FORMATS$5.RG]=s.RG8,l[FORMATS$5.RED]=s.R8,l[FORMATS$5.RGBA_INTEGER]=s.RGBA8UI,l[FORMATS$5.RGB_INTEGER]=s.RGB8UI,l[FORMATS$5.RG_INTEGER]=s.RG8UI,l[FORMATS$5.RED_INTEGER]=s.R8UI,l[FORMATS$5.ALPHA]=s.ALPHA,l[FORMATS$5.LUMINANCE]=s.LUMINANCE,l[FORMATS$5.LUMINANCE_ALPHA]=s.LUMINANCE_ALPHA,l),a[TYPES$5.BYTE]=(d={},d[FORMATS$5.RGBA]=s.RGBA8_SNORM,d[FORMATS$5.RGB]=s.RGB8_SNORM,d[FORMATS$5.RG]=s.RG8_SNORM,d[FORMATS$5.RED]=s.R8_SNORM,d[FORMATS$5.RGBA_INTEGER]=s.RGBA8I,d[FORMATS$5.RGB_INTEGER]=s.RGB8I,d[FORMATS$5.RG_INTEGER]=s.RG8I,d[FORMATS$5.RED_INTEGER]=s.R8I,d),a[TYPES$5.UNSIGNED_SHORT]=(v={},v[FORMATS$5.RGBA_INTEGER]=s.RGBA16UI,v[FORMATS$5.RGB_INTEGER]=s.RGB16UI,v[FORMATS$5.RG_INTEGER]=s.RG16UI,v[FORMATS$5.RED_INTEGER]=s.R16UI,v[FORMATS$5.DEPTH_COMPONENT]=s.DEPTH_COMPONENT16,v),a[TYPES$5.SHORT]=(m={},m[FORMATS$5.RGBA_INTEGER]=s.RGBA16I,m[FORMATS$5.RGB_INTEGER]=s.RGB16I,m[FORMATS$5.RG_INTEGER]=s.RG16I,m[FORMATS$5.RED_INTEGER]=s.R16I,m),a[TYPES$5.UNSIGNED_INT]=(g={},g[FORMATS$5.RGBA_INTEGER]=s.RGBA32UI,g[FORMATS$5.RGB_INTEGER]=s.RGB32UI,g[FORMATS$5.RG_INTEGER]=s.RG32UI,g[FORMATS$5.RED_INTEGER]=s.R32UI,g[FORMATS$5.DEPTH_COMPONENT]=s.DEPTH_COMPONENT24,g),a[TYPES$5.INT]=(T={},T[FORMATS$5.RGBA_INTEGER]=s.RGBA32I,T[FORMATS$5.RGB_INTEGER]=s.RGB32I,T[FORMATS$5.RG_INTEGER]=s.RG32I,T[FORMATS$5.RED_INTEGER]=s.R32I,T),a[TYPES$5.FLOAT]=(b={},b[FORMATS$5.RGBA]=s.RGBA32F,b[FORMATS$5.RGB]=s.RGB32F,b[FORMATS$5.RG]=s.RG32F,b[FORMATS$5.RED]=s.R32F,b[FORMATS$5.DEPTH_COMPONENT]=s.DEPTH_COMPONENT32F,b),a[TYPES$5.HALF_FLOAT]=(R={},R[FORMATS$5.RGBA]=s.RGBA16F,R[FORMATS$5.RGB]=s.RGB16F,R[FORMATS$5.RG]=s.RG16F,R[FORMATS$5.RED]=s.R16F,R),a[TYPES$5.UNSIGNED_SHORT_5_6_5]=(C={},C[FORMATS$5.RGB]=s.RGB565,C),a[TYPES$5.UNSIGNED_SHORT_4_4_4_4]=(w={},w[FORMATS$5.RGBA]=s.RGBA4,w),a[TYPES$5.UNSIGNED_SHORT_5_5_5_1]=(A={},A[FORMATS$5.RGBA]=s.RGB5_A1,A),a[TYPES$5.UNSIGNED_INT_2_10_10_10_REV]=(S={},S[FORMATS$5.RGBA]=s.RGB10_A2,S[FORMATS$5.RGBA_INTEGER]=s.RGB10_A2UI,S),a[TYPES$5.UNSIGNED_INT_10F_11F_11F_REV]=(O={},O[FORMATS$5.RGB]=s.R11F_G11F_B10F,O),a[TYPES$5.UNSIGNED_INT_5_9_9_9_REV]=(L={},L[FORMATS$5.RGB]=s.RGB9_E5,L),a[TYPES$5.UNSIGNED_INT_24_8]=(N={},N[FORMATS$5.DEPTH_STENCIL]=s.DEPTH24_STENCIL8,N),a[TYPES$5.FLOAT_32_UNSIGNED_INT_24_8_REV]=(U={},U[FORMATS$5.DEPTH_STENCIL]=s.DEPTH32F_STENCIL8,U),a):ie=($={},$[TYPES$5.UNSIGNED_BYTE]=(G={},G[FORMATS$5.RGBA]=s.RGBA,G[FORMATS$5.RGB]=s.RGB,G[FORMATS$5.ALPHA]=s.ALPHA,G[FORMATS$5.LUMINANCE]=s.LUMINANCE,G[FORMATS$5.LUMINANCE_ALPHA]=s.LUMINANCE_ALPHA,G),$[TYPES$5.UNSIGNED_SHORT_5_6_5]=(z={},z[FORMATS$5.RGB]=s.RGB,z),$[TYPES$5.UNSIGNED_SHORT_4_4_4_4]=(V={},V[FORMATS$5.RGBA]=s.RGBA,V),$[TYPES$5.UNSIGNED_SHORT_5_5_5_1]=(X={},X[FORMATS$5.RGBA]=s.RGBA,X),$),ie}var GLTexture=function(){function s(a){this.texture=a,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES$5.UNSIGNED_BYTE,this.internalFormat=FORMATS$5.RGBA,this.samplerType=0}return s}(),TextureSystem=function(){function s(a){this.renderer=a,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}return s.prototype.contextChange=function(){var a=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(a);var l=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=l;for(var d=0;d<l;d++)this.boundTextures[d]=null;this.emptyTextures={};var v=new GLTexture(a.createTexture());a.bindTexture(a.TEXTURE_2D,v.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[a.TEXTURE_2D]=v,this.emptyTextures[a.TEXTURE_CUBE_MAP]=new GLTexture(a.createTexture()),a.bindTexture(a.TEXTURE_CUBE_MAP,this.emptyTextures[a.TEXTURE_CUBE_MAP].texture);for(var d=0;d<6;d++)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);for(var d=0;d<this.boundTextures.length;d++)this.bind(null,d)},s.prototype.bind=function(a,l){l===void 0&&(l=0);var d=this.gl;if(a=a==null?void 0:a.castToBaseTexture(),a&&a.valid&&!a.parentTextureArray){a.touched=this.renderer.textureGC.count;var v=a._glTextures[this.CONTEXT_UID]||this.initTexture(a);this.boundTextures[l]!==a&&(this.currentLocation!==l&&(this.currentLocation=l,d.activeTexture(d.TEXTURE0+l)),d.bindTexture(a.target,v.texture)),v.dirtyId!==a.dirtyId&&(this.currentLocation!==l&&(this.currentLocation=l,d.activeTexture(d.TEXTURE0+l)),this.updateTexture(a)),this.boundTextures[l]=a}else this.currentLocation!==l&&(this.currentLocation=l,d.activeTexture(d.TEXTURE0+l)),d.bindTexture(d.TEXTURE_2D,this.emptyTextures[d.TEXTURE_2D].texture),this.boundTextures[l]=null},s.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var a=0;a<this.boundTextures.length;a++)this.boundTextures[a]=this.unknownTexture},s.prototype.unbind=function(a){var l=this,d=l.gl,v=l.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var m=0;m<v.length;m++)v[m]===this.unknownTexture&&this.bind(null,m)}for(var m=0;m<v.length;m++)v[m]===a&&(this.currentLocation!==m&&(d.activeTexture(d.TEXTURE0+m),this.currentLocation=m),d.bindTexture(a.target,this.emptyTextures[a.target].texture),v[m]=null)},s.prototype.ensureSamplerType=function(a){var l=this,d=l.boundTextures,v=l.hasIntegerTextures,m=l.CONTEXT_UID;if(!!v)for(var g=a-1;g>=0;--g){var T=d[g];if(T){var b=T._glTextures[m];b.samplerType!==SAMPLER_TYPES$5.FLOAT&&this.renderer.texture.unbind(T)}}},s.prototype.initTexture=function(a){var l=new GLTexture(this.gl.createTexture());return l.dirtyId=-1,a._glTextures[this.CONTEXT_UID]=l,this.managedTextures.push(a),a.on("dispose",this.destroyTexture,this),l},s.prototype.initTextureType=function(a,l){var d,v;l.internalFormat=(v=(d=this.internalFormats[a.type])===null||d===void 0?void 0:d[a.format])!==null&&v!==void 0?v:a.format,this.webGLVersion===2&&a.type===TYPES$5.HALF_FLOAT?l.type=this.gl.HALF_FLOAT:l.type=a.type},s.prototype.updateTexture=function(a){var l=a._glTextures[this.CONTEXT_UID];if(!!l){var d=this.renderer;if(this.initTextureType(a,l),a.resource&&a.resource.upload(d,a,l))l.samplerType!==SAMPLER_TYPES$5.FLOAT&&(this.hasIntegerTextures=!0);else{var v=a.realWidth,m=a.realHeight,g=d.gl;(l.width!==v||l.height!==m||l.dirtyId<0)&&(l.width=v,l.height=m,g.texImage2D(a.target,0,l.internalFormat,v,m,0,a.format,l.type,null))}a.dirtyStyleId!==l.dirtyStyleId&&this.updateTextureStyle(a),l.dirtyId=a.dirtyId}},s.prototype.destroyTexture=function(a,l){var d=this.gl;if(a=a.castToBaseTexture(),a._glTextures[this.CONTEXT_UID]&&(this.unbind(a),d.deleteTexture(a._glTextures[this.CONTEXT_UID].texture),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.CONTEXT_UID],!l)){var v=this.managedTextures.indexOf(a);v!==-1&&removeItems(this.managedTextures,v,1)}},s.prototype.updateTextureStyle=function(a){var l=a._glTextures[this.CONTEXT_UID];!l||((a.mipmap===MIPMAP_MODES$5.POW2||this.webGLVersion!==2)&&!a.isPowerOfTwo?l.mipmap=!1:l.mipmap=a.mipmap>=1,this.webGLVersion!==2&&!a.isPowerOfTwo?l.wrapMode=WRAP_MODES$5.CLAMP:l.wrapMode=a.wrapMode,a.resource&&a.resource.style(this.renderer,a,l)||this.setStyle(a,l),l.dirtyStyleId=a.dirtyStyleId)},s.prototype.setStyle=function(a,l){var d=this.gl;if(l.mipmap&&a.mipmap!==MIPMAP_MODES$5.ON_MANUAL&&d.generateMipmap(a.target),d.texParameteri(a.target,d.TEXTURE_WRAP_S,l.wrapMode),d.texParameteri(a.target,d.TEXTURE_WRAP_T,l.wrapMode),l.mipmap){d.texParameteri(a.target,d.TEXTURE_MIN_FILTER,a.scaleMode===SCALE_MODES$5.LINEAR?d.LINEAR_MIPMAP_LINEAR:d.NEAREST_MIPMAP_NEAREST);var v=this.renderer.context.extensions.anisotropicFiltering;if(v&&a.anisotropicLevel>0&&a.scaleMode===SCALE_MODES$5.LINEAR){var m=Math.min(a.anisotropicLevel,d.getParameter(v.MAX_TEXTURE_MAX_ANISOTROPY_EXT));d.texParameterf(a.target,v.TEXTURE_MAX_ANISOTROPY_EXT,m)}}else d.texParameteri(a.target,d.TEXTURE_MIN_FILTER,a.scaleMode===SCALE_MODES$5.LINEAR?d.LINEAR:d.NEAREST);d.texParameteri(a.target,d.TEXTURE_MAG_FILTER,a.scaleMode===SCALE_MODES$5.LINEAR?d.LINEAR:d.NEAREST)},s.prototype.destroy=function(){this.renderer=null},s}(),_systems={__proto__:null,FilterSystem,BatchSystem,ContextSystem,FramebufferSystem,GeometrySystem,MaskSystem,ScissorSystem,StencilSystem,ProjectionSystem,RenderTextureSystem,ShaderSystem,StateSystem,TextureGCSystem,TextureSystem},tempMatrix=new Matrix,AbstractRenderer=function(s){__extends$i(a,s);function a(l,d){l===void 0&&(l=RENDERER_TYPE$5.UNKNOWN);var v=s.call(this)||this;return d=Object.assign({},settings$1.RENDER_OPTIONS,d),v.options=d,v.type=l,v.screen=new Rectangle(0,0,d.width,d.height),v.view=d.view||settings$1.ADAPTER.createCanvas(),v.resolution=d.resolution||settings$1.RESOLUTION,v.useContextAlpha=d.useContextAlpha,v.autoDensity=!!d.autoDensity,v.preserveDrawingBuffer=d.preserveDrawingBuffer,v.clearBeforeRender=d.clearBeforeRender,v._backgroundColor=0,v._backgroundColorRgba=[0,0,0,1],v._backgroundColorString="#000000",v.backgroundColor=d.backgroundColor||v._backgroundColor,v.backgroundAlpha=d.backgroundAlpha,d.transparent!==void 0&&(deprecation$1("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),v.useContextAlpha=d.transparent,v.backgroundAlpha=d.transparent?0:1),v._lastObjectRendered=null,v.plugins={},v}return a.prototype.initPlugins=function(l){for(var d in l)this.plugins[d]=new l[d](this)},Object.defineProperty(a.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),a.prototype.resize=function(l,d){this.view.width=Math.round(l*this.resolution),this.view.height=Math.round(d*this.resolution);var v=this.view.width/this.resolution,m=this.view.height/this.resolution;this.screen.width=v,this.screen.height=m,this.autoDensity&&(this.view.style.width=v+"px",this.view.style.height=m+"px"),this.emit("resize",v,m)},a.prototype.generateTexture=function(l,d,v,m){d===void 0&&(d={}),typeof d=="number"&&(deprecation$1("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),d={scaleMode:d,resolution:v,region:m});var g=d.region,T=__rest(d,["region"]);m=g||l.getLocalBounds(null,!0),m.width===0&&(m.width=1),m.height===0&&(m.height=1);var b=RenderTexture.create(__assign$1({width:m.width,height:m.height},T));return tempMatrix.tx=-m.x,tempMatrix.ty=-m.y,this.render(l,{renderTexture:b,clear:!1,transform:tempMatrix,skipUpdateTransform:!!l.parent}),b},a.prototype.destroy=function(l){for(var d in this.plugins)this.plugins[d].destroy(),this.plugins[d]=null;l&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var v=this;v.plugins=null,v.type=RENDERER_TYPE$5.UNKNOWN,v.view=null,v.screen=null,v._tempDisplayObjectParent=null,v.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(a.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(l){this._backgroundColor=l,this._backgroundColorString=hex2string(l),hex2rgb(l,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(l){this._backgroundColorRgba[3]=l},enumerable:!1,configurable:!0}),a}(EventEmitter),GLBuffer=function(){function s(a){this.buffer=a||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return s}(),BufferSystem=function(){function s(a){this.renderer=a,this.managedBuffers={},this.boundBufferBases={}}return s.prototype.destroy=function(){this.renderer=null},s.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},s.prototype.bind=function(a){var l=this,d=l.gl,v=l.CONTEXT_UID,m=a._glBuffers[v]||this.createGLBuffer(a);d.bindBuffer(a.type,m.buffer)},s.prototype.bindBufferBase=function(a,l){var d=this,v=d.gl,m=d.CONTEXT_UID;if(this.boundBufferBases[l]!==a){var g=a._glBuffers[m]||this.createGLBuffer(a);this.boundBufferBases[l]=a,v.bindBufferBase(v.UNIFORM_BUFFER,l,g.buffer)}},s.prototype.bindBufferRange=function(a,l,d){var v=this,m=v.gl,g=v.CONTEXT_UID;d=d||0;var T=a._glBuffers[g]||this.createGLBuffer(a);m.bindBufferRange(m.UNIFORM_BUFFER,l||0,T.buffer,d*256,256)},s.prototype.update=function(a){var l=this,d=l.gl,v=l.CONTEXT_UID,m=a._glBuffers[v];if(a._updateID!==m.updateID)if(m.updateID=a._updateID,d.bindBuffer(a.type,m.buffer),m.byteLength>=a.data.byteLength)d.bufferSubData(a.type,0,a.data);else{var g=a.static?d.STATIC_DRAW:d.DYNAMIC_DRAW;m.byteLength=a.data.byteLength,d.bufferData(a.type,a.data,g)}},s.prototype.dispose=function(a,l){if(!!this.managedBuffers[a.id]){delete this.managedBuffers[a.id];var d=a._glBuffers[this.CONTEXT_UID],v=this.gl;a.disposeRunner.remove(this),d&&(l||v.deleteBuffer(d.buffer),delete a._glBuffers[this.CONTEXT_UID])}},s.prototype.disposeAll=function(a){for(var l=Object.keys(this.managedBuffers),d=0;d<l.length;d++)this.dispose(this.managedBuffers[l[d]],a)},s.prototype.createGLBuffer=function(a){var l=this,d=l.CONTEXT_UID,v=l.gl;return a._glBuffers[d]=new GLBuffer(v.createBuffer()),this.managedBuffers[a.id]=a,a.disposeRunner.add(this),a._glBuffers[d]},s}(),Renderer=function(s){__extends$i(a,s);function a(l){var d=s.call(this,RENDERER_TYPE$5.WEBGL,l)||this;return l=d.options,d.gl=null,d.CONTEXT_UID=0,d.runners={destroy:new Runner("destroy"),contextChange:new Runner("contextChange"),reset:new Runner("reset"),update:new Runner("update"),postrender:new Runner("postrender"),prerender:new Runner("prerender"),resize:new Runner("resize")},d.runners.contextChange.add(d),d.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0),d.addSystem(MaskSystem,"mask").addSystem(ContextSystem,"context").addSystem(StateSystem,"state").addSystem(ShaderSystem,"shader").addSystem(TextureSystem,"texture").addSystem(BufferSystem,"buffer").addSystem(GeometrySystem,"geometry").addSystem(FramebufferSystem,"framebuffer").addSystem(ScissorSystem,"scissor").addSystem(StencilSystem,"stencil").addSystem(ProjectionSystem,"projection").addSystem(TextureGCSystem,"textureGC").addSystem(FilterSystem,"filter").addSystem(RenderTextureSystem,"renderTexture").addSystem(BatchSystem,"batch"),d.initPlugins(a.__plugins),d.multisample=void 0,l.context?d.context.initFromContext(l.context):d.context.initFromOptions({alpha:!!d.useContextAlpha,antialias:l.antialias,premultipliedAlpha:d.useContextAlpha&&d.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:l.preserveDrawingBuffer,powerPreference:d.options.powerPreference}),d.renderingToScreen=!0,sayHello(d.context.webGLVersion===2?"WebGL 2":"WebGL 1"),d.resize(d.options.width,d.options.height),d}return a.create=function(l){if(isWebGLSupported())return new a(l);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},a.prototype.contextChange=function(){var l=this.gl,d;if(this.context.webGLVersion===1){var v=l.getParameter(l.FRAMEBUFFER_BINDING);l.bindFramebuffer(l.FRAMEBUFFER,null),d=l.getParameter(l.SAMPLES),l.bindFramebuffer(l.FRAMEBUFFER,v)}else{var v=l.getParameter(l.DRAW_FRAMEBUFFER_BINDING);l.bindFramebuffer(l.DRAW_FRAMEBUFFER,null),d=l.getParameter(l.SAMPLES),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,v)}d>=MSAA_QUALITY$5.HIGH?this.multisample=MSAA_QUALITY$5.HIGH:d>=MSAA_QUALITY$5.MEDIUM?this.multisample=MSAA_QUALITY$5.MEDIUM:d>=MSAA_QUALITY$5.LOW?this.multisample=MSAA_QUALITY$5.LOW:this.multisample=MSAA_QUALITY$5.NONE},a.prototype.addSystem=function(l,d){var v=new l(this);if(this[d])throw new Error('Whoops! The name "'+d+'" is already in use');this[d]=v;for(var m in this.runners)this.runners[m].add(v);return this},a.prototype.render=function(l,d){var v,m,g,T;if(d&&(d instanceof RenderTexture?(deprecation$1("6.0.0","Renderer#render arguments changed, use options instead."),v=d,m=arguments[2],g=arguments[3],T=arguments[4]):(v=d.renderTexture,m=d.clear,g=d.transform,T=d.skipUpdateTransform)),this.renderingToScreen=!v,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=g,!this.context.isLost){if(v||(this._lastObjectRendered=l),!T){var b=l.enableTempParent();l.updateTransform(),l.disableTempParent(b)}this.renderTexture.bind(v),this.batch.currentRenderer.start(),(m!==void 0?m:this.clearBeforeRender)&&this.renderTexture.clear(),l.render(this),this.batch.currentRenderer.flush(),v&&v.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},a.prototype.generateTexture=function(l,d,v,m){d===void 0&&(d={});var g=s.prototype.generateTexture.call(this,l,d,v,m);return this.framebuffer.blit(),g},a.prototype.resize=function(l,d){s.prototype.resize.call(this,l,d),this.runners.resize.emit(this.screen.height,this.screen.width)},a.prototype.reset=function(){return this.runners.reset.emit(),this},a.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},a.prototype.destroy=function(l){this.runners.destroy.emit();for(var d in this.runners)this.runners[d].destroy();s.prototype.destroy.call(this,l),this.gl=null},Object.defineProperty(a.prototype,"extract",{get:function(){return deprecation$1("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),a.registerPlugin=function(l,d){deprecation$1("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),extensions.add({name:l,type:ExtensionType.RendererPlugin,ref:d})},a.__plugins={},a}(AbstractRenderer);extensions.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);function autoDetectRenderer(s){return Renderer.create(s)}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultVertex$1=$defaultVertex,defaultFilterVertex=$defaultFilterVertex,System$1=function(){function s(a){deprecation$1("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=a}return s.prototype.destroy=function(){this.renderer=null},s}(),BatchDrawCall=function(){function s(){this.texArray=null,this.blend=0,this.type=DRAW_MODES$5.TRIANGLES,this.start=0,this.size=0,this.data=null}return s}(),BatchTextureArray=function(){function s(){this.elements=[],this.ids=[],this.count=0}return s.prototype.clear=function(){for(var a=0;a<this.count;a++)this.elements[a]=null;this.count=0},s}(),ViewableBuffer=function(){function s(a){typeof a=="number"?this.rawBinaryData=new ArrayBuffer(a):a instanceof Uint8Array?this.rawBinaryData=a.buffer:this.rawBinaryData=a,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(s.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),s.prototype.view=function(a){return this[a+"View"]},s.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},s.sizeOf=function(a){switch(a){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(a+" isn't a valid view type")}},s}(),AbstractBatchRenderer=function(s){__extends$i(a,s);function a(l){var d=s.call(this,l)||this;return d.shaderGenerator=null,d.geometryClass=null,d.vertexSize=null,d.state=State$1.for2d(),d.size=settings$1.SPRITE_BATCH_SIZE*4,d._vertexCount=0,d._indexCount=0,d._bufferedElements=[],d._bufferedTextures=[],d._bufferSize=0,d._shader=null,d._packedGeometries=[],d._packedGeometryPoolSize=2,d._flushId=0,d._aBuffers={},d._iBuffers={},d.MAX_TEXTURES=1,d.renderer.on("prerender",d.onPrerender,d),l.runners.contextChange.add(d),d._dcIndex=0,d._aIndex=0,d._iIndex=0,d._attributeBuffer=null,d._indexBuffer=null,d._tempBoundTextures=[],d}return a.prototype.contextChange=function(){var l=this.renderer.gl;settings$1.PREFER_ENV===ENV$5.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS),settings$1.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,l)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var d=0;d<this._packedGeometryPoolSize;d++)this._packedGeometries[d]=new this.geometryClass;this.initFlushBuffers()},a.prototype.initFlushBuffers=function(){for(var l=a._drawCallPool,d=a._textureArrayPool,v=this.size/4,m=Math.floor(v/this.MAX_TEXTURES)+1;l.length<v;)l.push(new BatchDrawCall);for(;d.length<m;)d.push(new BatchTextureArray);for(var g=0;g<this.MAX_TEXTURES;g++)this._tempBoundTextures[g]=null},a.prototype.onPrerender=function(){this._flushId=0},a.prototype.render=function(l){!l._texture.valid||(this._vertexCount+l.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=l.vertexData.length/2,this._indexCount+=l.indices.length,this._bufferedTextures[this._bufferSize]=l._texture.baseTexture,this._bufferedElements[this._bufferSize++]=l)},a.prototype.buildTexturesAndDrawCalls=function(){var l=this,d=l._bufferedTextures,v=l.MAX_TEXTURES,m=a._textureArrayPool,g=this.renderer.batch,T=this._tempBoundTextures,b=this.renderer.textureGC.count,R=++BaseTexture._globalBatch,C=0,w=m[0],A=0;g.copyBoundTextures(T,v);for(var S=0;S<this._bufferSize;++S){var O=d[S];d[S]=null,O._batchEnabled!==R&&(w.count>=v&&(g.boundArray(w,T,R,v),this.buildDrawCalls(w,A,S),A=S,w=m[++C],++R),O._batchEnabled=R,O.touched=b,w.elements[w.count++]=O)}w.count>0&&(g.boundArray(w,T,R,v),this.buildDrawCalls(w,A,this._bufferSize),++C,++R);for(var S=0;S<T.length;S++)T[S]=null;BaseTexture._globalBatch=R},a.prototype.buildDrawCalls=function(l,d,v){var m=this,g=m._bufferedElements,T=m._attributeBuffer,b=m._indexBuffer,R=m.vertexSize,C=a._drawCallPool,w=this._dcIndex,A=this._aIndex,S=this._iIndex,O=C[w];O.start=this._iIndex,O.texArray=l;for(var L=d;L<v;++L){var N=g[L],U=N._texture.baseTexture,$=premultiplyBlendMode[U.alphaMode?1:0][N.blendMode];g[L]=null,d<L&&O.blend!==$&&(O.size=S-O.start,d=L,O=C[++w],O.texArray=l,O.start=S),this.packInterleavedGeometry(N,T,b,A,S),A+=N.vertexData.length/2*R,S+=N.indices.length,O.blend=$}d<v&&(O.size=S-O.start,++w),this._dcIndex=w,this._aIndex=A,this._iIndex=S},a.prototype.bindAndClearTexArray=function(l){for(var d=this.renderer.texture,v=0;v<l.count;v++)d.bind(l.elements[v],l.ids[v]),l.elements[v]=null;l.count=0},a.prototype.updateGeometry=function(){var l=this,d=l._packedGeometries,v=l._attributeBuffer,m=l._indexBuffer;settings$1.CAN_UPLOAD_SAME_BUFFER?(d[this._flushId]._buffer.update(v.rawBinaryData),d[this._flushId]._indexBuffer.update(m),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,d[this._flushId]=new this.geometryClass),d[this._flushId]._buffer.update(v.rawBinaryData),d[this._flushId]._indexBuffer.update(m),this.renderer.geometry.bind(d[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},a.prototype.drawBatches=function(){for(var l=this._dcIndex,d=this.renderer,v=d.gl,m=d.state,g=a._drawCallPool,T=null,b=0;b<l;b++){var R=g[b],C=R.texArray,w=R.type,A=R.size,S=R.start,O=R.blend;T!==C&&(T=C,this.bindAndClearTexArray(C)),this.state.blendMode=O,m.set(this.state),v.drawElements(w,A,v.UNSIGNED_SHORT,S*2)}},a.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},a.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),settings$1.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},a.prototype.stop=function(){this.flush()},a.prototype.destroy=function(){for(var l=0;l<this._packedGeometryPoolSize;l++)this._packedGeometries[l]&&this._packedGeometries[l].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),s.prototype.destroy.call(this)},a.prototype.getAttributeBuffer=function(l){var d=nextPow2(Math.ceil(l/8)),v=log2(d),m=d*8;this._aBuffers.length<=v&&(this._iBuffers.length=v+1);var g=this._aBuffers[m];return g||(this._aBuffers[m]=g=new ViewableBuffer(m*this.vertexSize*4)),g},a.prototype.getIndexBuffer=function(l){var d=nextPow2(Math.ceil(l/12)),v=log2(d),m=d*12;this._iBuffers.length<=v&&(this._iBuffers.length=v+1);var g=this._iBuffers[v];return g||(this._iBuffers[v]=g=new Uint16Array(m)),g},a.prototype.packInterleavedGeometry=function(l,d,v,m,g){for(var T=d.uint32View,b=d.float32View,R=m/this.vertexSize,C=l.uvs,w=l.indices,A=l.vertexData,S=l._texture.baseTexture._batchLocation,O=Math.min(l.worldAlpha,1),L=O<1&&l._texture.baseTexture.alphaMode?premultiplyTint(l._tintRGB,O):l._tintRGB+(O*255<<24),N=0;N<A.length;N+=2)b[m++]=A[N],b[m++]=A[N+1],b[m++]=C[N],b[m++]=C[N+1],T[m++]=L,b[m++]=S;for(var N=0;N<w.length;N++)v[g++]=R+w[N]},a._drawCallPool=[],a._textureArrayPool=[],a}(ObjectRenderer),BatchShaderGenerator=function(){function s(a,l){if(this.vertexSrc=a,this.fragTemplate=l,this.programCache={},this.defaultGroupCache={},l.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(l.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return s.prototype.generateShader=function(a){if(!this.programCache[a]){for(var l=new Int32Array(a),d=0;d<a;d++)l[d]=d;this.defaultGroupCache[a]=UniformGroup.from({uSamplers:l},!0);var v=this.fragTemplate;v=v.replace(/%count%/gi,""+a),v=v.replace(/%forloop%/gi,this.generateSampleSrc(a)),this.programCache[a]=new Program(this.vertexSrc,v)}var m={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[a]};return new Shader(this.programCache[a],m)},s.prototype.generateSampleSrc=function(a){var l="";l+=`
`,l+=`
`;for(var d=0;d<a;d++)d>0&&(l+=`
else `),d<a-1&&(l+="if(vTextureId < "+d+".5)"),l+=`
{`,l+=`
	color = texture2D(uSamplers[`+d+"], vTextureCoord);",l+=`
}`;return l+=`
`,l+=`
`,l},s}(),BatchGeometry=function(s){__extends$i(a,s);function a(l){l===void 0&&(l=!1);var d=s.call(this)||this;return d._buffer=new Buffer(null,l,!1),d._indexBuffer=new Buffer(null,l,!0),d.addAttribute("aVertexPosition",d._buffer,2,!1,TYPES$5.FLOAT).addAttribute("aTextureCoord",d._buffer,2,!1,TYPES$5.FLOAT).addAttribute("aColor",d._buffer,4,!0,TYPES$5.UNSIGNED_BYTE).addAttribute("aTextureId",d._buffer,1,!0,TYPES$5.FLOAT).addIndex(d._indexBuffer),d}return a}(Geometry),defaultVertex=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,defaultFragment=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,BatchPluginFactory=function(){function s(){}return s.create=function(a){var l=Object.assign({vertex:defaultVertex,fragment:defaultFragment,geometryClass:BatchGeometry,vertexSize:6},a),d=l.vertex,v=l.fragment,m=l.vertexSize,g=l.geometryClass;return function(T){__extends$i(b,T);function b(R){var C=T.call(this,R)||this;return C.shaderGenerator=new BatchShaderGenerator(d,v),C.geometryClass=g,C.vertexSize=m,C}return b}(AbstractBatchRenderer)},Object.defineProperty(s,"defaultVertexSrc",{get:function(){return defaultVertex},enumerable:!1,configurable:!0}),Object.defineProperty(s,"defaultFragmentTemplate",{get:function(){return defaultFragment},enumerable:!1,configurable:!0}),s}(),BatchRenderer=BatchPluginFactory.create();Object.assign(BatchRenderer,{extension:{name:"batch",type:ExtensionType.RendererPlugin}});var resources={},_loop_1=function(s){Object.defineProperty(resources,s,{get:function(){return deprecation$1("6.0.0","PIXI.systems."+s+" has moved to PIXI."+s),_resources[s]}})};for(var name in _resources)_loop_1(name);var systems={},_loop_2=function(s){Object.defineProperty(systems,s,{get:function(){return deprecation$1("6.0.0","PIXI.resources."+s+" has moved to PIXI."+s),_systems[s]}})};for(var name in _systems)_loop_2(name);var VERSION="6.5.1";/*!
 * @pixi/accessibility - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);var KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,AccessibilityManager=function(){function s(a){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile$2.tablet||isMobile$2.phone)&&this.createTouchHook();var l=document.createElement("div");l.style.width=DIV_TOUCH_SIZE+"px",l.style.height=DIV_TOUCH_SIZE+"px",l.style.position="absolute",l.style.top=DIV_TOUCH_POS_X+"px",l.style.left=DIV_TOUCH_POS_Y+"px",l.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=l,this.renderer=a,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(s.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),s.prototype.createTouchHook=function(){var a=this,l=document.createElement("button");l.style.width=DIV_HOOK_SIZE+"px",l.style.height=DIV_HOOK_SIZE+"px",l.style.position="absolute",l.style.top=DIV_HOOK_POS_X+"px",l.style.left=DIV_HOOK_POS_Y+"px",l.style.zIndex=DIV_HOOK_ZINDEX.toString(),l.style.backgroundColor="#FF0000",l.title="select to enable accessibility for this content",l.addEventListener("focus",function(){a._isMobileAccessibility=!0,a.activate(),a.destroyTouchHook()}),document.body.appendChild(l),this._hookDiv=l},s.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},s.prototype.activate=function(){var a;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(a=this.renderer.view.parentNode)===null||a===void 0||a.appendChild(this.div))},s.prototype.deactivate=function(){var a;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(a=this.div.parentNode)===null||a===void 0||a.removeChild(this.div))},s.prototype.updateAccessibleObjects=function(a){if(!(!a.visible||!a.accessibleChildren)){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);var l=a.children;if(l)for(var d=0;d<l.length;d++)this.updateAccessibleObjects(l[d])}},s.prototype.update=function(){var a=performance.now();if(!(isMobile$2.android.device&&a<this.androidUpdateCount)&&(this.androidUpdateCount=a+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var l=this.renderer.view.getBoundingClientRect(),d=l.left,v=l.top,m=l.width,g=l.height,T=this.renderer,b=T.width,R=T.height,C=T.resolution,w=m/b*C,A=g/R*C,S=this.div;S.style.left=d+"px",S.style.top=v+"px",S.style.width=b+"px",S.style.height=R+"px";for(var O=0;O<this.children.length;O++){var L=this.children[O];if(L.renderId!==this.renderId)L._accessibleActive=!1,removeItems(this.children,O,1),this.div.removeChild(L._accessibleDiv),this.pool.push(L._accessibleDiv),L._accessibleDiv=null,O--;else{S=L._accessibleDiv;var N=L.hitArea,U=L.worldTransform;L.hitArea?(S.style.left=(U.tx+N.x*U.a)*w+"px",S.style.top=(U.ty+N.y*U.d)*A+"px",S.style.width=N.width*U.a*w+"px",S.style.height=N.height*U.d*A+"px"):(N=L.getBounds(),this.capHitArea(N),S.style.left=N.x*w+"px",S.style.top=N.y*A+"px",S.style.width=N.width*w+"px",S.style.height=N.height*A+"px",S.title!==L.accessibleTitle&&L.accessibleTitle!==null&&(S.title=L.accessibleTitle),S.getAttribute("aria-label")!==L.accessibleHint&&L.accessibleHint!==null&&S.setAttribute("aria-label",L.accessibleHint)),(L.accessibleTitle!==S.title||L.tabIndex!==S.tabIndex)&&(S.title=L.accessibleTitle,S.tabIndex=L.tabIndex,this.debug&&this.updateDebugHTML(S))}}this.renderId++}},s.prototype.updateDebugHTML=function(a){a.innerHTML="type: "+a.type+"</br> title : "+a.title+"</br> tabIndex: "+a.tabIndex},s.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0);var l=this.renderer,d=l.width,v=l.height;a.x+a.width>d&&(a.width=d-a.x),a.y+a.height>v&&(a.height=v-a.y)},s.prototype.addChild=function(a){var l=this.pool.pop();l||(l=document.createElement("button"),l.style.width=DIV_TOUCH_SIZE+"px",l.style.height=DIV_TOUCH_SIZE+"px",l.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",l.style.position="absolute",l.style.zIndex=DIV_TOUCH_ZINDEX.toString(),l.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?l.setAttribute("aria-live","off"):l.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?l.setAttribute("aria-relevant","additions"):l.setAttribute("aria-relevant","text"),l.addEventListener("click",this._onClick.bind(this)),l.addEventListener("focus",this._onFocus.bind(this)),l.addEventListener("focusout",this._onFocusOut.bind(this))),l.style.pointerEvents=a.accessiblePointerEvents,l.type=a.accessibleType,a.accessibleTitle&&a.accessibleTitle!==null?l.title=a.accessibleTitle:(!a.accessibleHint||a.accessibleHint===null)&&(l.title="displayObject "+a.tabIndex),a.accessibleHint&&a.accessibleHint!==null&&l.setAttribute("aria-label",a.accessibleHint),this.debug&&this.updateDebugHTML(l),a._accessibleActive=!0,a._accessibleDiv=l,l.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},s.prototype._onClick=function(a){var l=this.renderer.plugins.interaction,d=a.target.displayObject,v=l.eventData;l.dispatchEvent(d,"click",v),l.dispatchEvent(d,"pointertap",v),l.dispatchEvent(d,"tap",v)},s.prototype._onFocus=function(a){a.target.getAttribute("aria-live")||a.target.setAttribute("aria-live","assertive");var l=this.renderer.plugins.interaction,d=a.target.displayObject,v=l.eventData;l.dispatchEvent(d,"mouseover",v)},s.prototype._onFocusOut=function(a){a.target.getAttribute("aria-live")||a.target.setAttribute("aria-live","polite");var l=this.renderer.plugins.interaction,d=a.target.displayObject,v=l.eventData;l.dispatchEvent(d,"mouseout",v)},s.prototype._onKeyDown=function(a){a.keyCode===KEY_CODE_TAB&&this.activate()},s.prototype._onMouseMove=function(a){a.movementX===0&&a.movementY===0||this.deactivate()},s.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},s.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]},s}();/*!
 * @pixi/interaction - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var InteractionData=function(){function s(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(s.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),s.prototype.getLocalPosition=function(a,l,d){return a.worldTransform.applyInverse(d||this.global,l)},s.prototype.copyEvent=function(a){"isPrimary"in a&&a.isPrimary&&(this.isPrimary=!0),this.button="button"in a&&a.button;var l="buttons"in a&&a.buttons;this.buttons=Number.isInteger(l)?l:"which"in a&&a.which,this.width="width"in a&&a.width,this.height="height"in a&&a.height,this.tiltX="tiltX"in a&&a.tiltX,this.tiltY="tiltY"in a&&a.tiltY,this.pointerType="pointerType"in a&&a.pointerType,this.pressure="pressure"in a&&a.pressure,this.rotationAngle="rotationAngle"in a&&a.rotationAngle,this.twist="twist"in a&&a.twist||0,this.tangentialPressure="tangentialPressure"in a&&a.tangentialPressure||0},s.prototype.reset=function(){this.isPrimary=!1},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$h=function(s,a){return extendStatics$h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$h(s,a)};function __extends$h(s,a){extendStatics$h(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var InteractionEvent=function(){function s(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return s.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},s.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},s}(),InteractionTrackingData=function(){function s(a){this._pointerId=a,this._flags=s.FLAGS.NONE}return s.prototype._doSet=function(a,l){l?this._flags=this._flags|a:this._flags=this._flags&~a},Object.defineProperty(s.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"flags",{get:function(){return this._flags},set:function(a){this._flags=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"none",{get:function(){return this._flags===s.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"over",{get:function(){return(this._flags&s.FLAGS.OVER)!==0},set:function(a){this._doSet(s.FLAGS.OVER,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"rightDown",{get:function(){return(this._flags&s.FLAGS.RIGHT_DOWN)!==0},set:function(a){this._doSet(s.FLAGS.RIGHT_DOWN,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"leftDown",{get:function(){return(this._flags&s.FLAGS.LEFT_DOWN)!==0},set:function(a){this._doSet(s.FLAGS.LEFT_DOWN,a)},enumerable:!1,configurable:!0}),s.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),s}(),TreeSearch=function(){function s(){this._tempPoint=new Point}return s.prototype.recursiveFindHit=function(a,l,d,v,m){var g;if(!l||!l.visible)return!1;var T=a.data.global;m=l.interactive||m;var b=!1,R=m,C=!0;if(l.hitArea)v&&(l.worldTransform.applyInverse(T,this._tempPoint),l.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?b=!0:(v=!1,C=!1)),R=!1;else if(l._mask&&v){var w=l._mask.isMaskData?l._mask.maskObject:l._mask;w&&!(!((g=w.containsPoint)===null||g===void 0)&&g.call(w,T))&&(v=!1)}if(C&&l.interactiveChildren&&l.children)for(var A=l.children,S=A.length-1;S>=0;S--){var O=A[S],L=this.recursiveFindHit(a,O,d,v,R);if(L){if(!O.parent)continue;R=!1,L&&(a.target&&(v=!1),b=!0)}}return m&&(v&&!a.target&&!l.hitArea&&l.containsPoint&&l.containsPoint(T)&&(b=!0),l.interactive&&(b&&!a.target&&(a.target=l),d&&d(a,l,!!b))),b},s.prototype.findHit=function(a,l,d,v){this.recursiveFindHit(a,l,d,v,!1)},s}(),interactiveTarget={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(s){s?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};DisplayObject.mixin(interactiveTarget);var MOUSE_POINTER_ID=1,hitTestEvent={target:null,data:{global:null}},InteractionManager=function(s){__extends$h(a,s);function a(l,d){var v=s.call(this)||this;return d=d||{},v.renderer=l,v.autoPreventDefault=d.autoPreventDefault!==void 0?d.autoPreventDefault:!0,v.interactionFrequency=d.interactionFrequency||10,v.mouse=new InteractionData,v.mouse.identifier=MOUSE_POINTER_ID,v.mouse.global.set(-999999),v.activeInteractionData={},v.activeInteractionData[MOUSE_POINTER_ID]=v.mouse,v.interactionDataPool=[],v.eventData=new InteractionEvent,v.interactionDOMElement=null,v.moveWhenInside=!1,v.eventsAdded=!1,v.tickerAdded=!1,v.mouseOverRenderer=!("PointerEvent"in globalThis),v.supportsTouchEvents="ontouchstart"in globalThis,v.supportsPointerEvents=!!globalThis.PointerEvent,v.onPointerUp=v.onPointerUp.bind(v),v.processPointerUp=v.processPointerUp.bind(v),v.onPointerCancel=v.onPointerCancel.bind(v),v.processPointerCancel=v.processPointerCancel.bind(v),v.onPointerDown=v.onPointerDown.bind(v),v.processPointerDown=v.processPointerDown.bind(v),v.onPointerMove=v.onPointerMove.bind(v),v.processPointerMove=v.processPointerMove.bind(v),v.onPointerOut=v.onPointerOut.bind(v),v.processPointerOverOut=v.processPointerOverOut.bind(v),v.onPointerOver=v.onPointerOver.bind(v),v.cursorStyles={default:"inherit",pointer:"pointer"},v.currentCursorMode=null,v.cursor=null,v.resolution=1,v.delayedEvents=[],v.search=new TreeSearch,v._tempDisplayObject=new TemporaryDisplayObject,v._eventListenerOptions={capture:!0,passive:!1},v._useSystemTicker=d.useSystemTicker!==void 0?d.useSystemTicker:!0,v.setTargetElement(v.renderer.view,v.renderer.resolution),v}return Object.defineProperty(a.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(l){this._useSystemTicker=l,l?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),a.prototype.hitTest=function(l,d){return hitTestEvent.target=null,hitTestEvent.data.global=l,d||(d=this.lastObjectRendered),this.processInteractive(hitTestEvent,d,null,!0),hitTestEvent.target},a.prototype.setTargetElement=function(l,d){d===void 0&&(d=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=l,this.resolution=d,this.addEvents(),this.addTickerListener()},a.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},a.prototype.removeTickerListener=function(){!this.tickerAdded||(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},a.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var l=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(l.msContentZooming="none",l.msTouchAction="none"):this.supportsPointerEvents&&(l.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},a.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var l=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(l.msContentZooming="",l.msTouchAction=""):this.supportsPointerEvents&&(l.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},a.prototype.tickerUpdate=function(l){this._deltaTime+=l,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},a.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var l in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(l)){var d=this.activeInteractionData[l];if(d.originalEvent&&d.pointerType!=="touch"){var v=this.configureInteractionEventForDOMEvent(this.eventData,d.originalEvent,d);this.processInteractive(v,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},a.prototype.setCursorMode=function(l){l=l||"default";var d=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(d=!1),this.currentCursorMode!==l){this.currentCursorMode=l;var v=this.cursorStyles[l];if(v)switch(typeof v){case"string":d&&(this.interactionDOMElement.style.cursor=v);break;case"function":v(l);break;case"object":d&&Object.assign(this.interactionDOMElement.style,v);break}else d&&typeof l=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,l)&&(this.interactionDOMElement.style.cursor=l)}},a.prototype.dispatchEvent=function(l,d,v){(!v.stopPropagationHint||l===v.stopsPropagatingAt)&&(v.currentTarget=l,v.type=d,l.emit(d,v),l[d]&&l[d](v))},a.prototype.delayDispatchEvent=function(l,d,v){this.delayedEvents.push({displayObject:l,eventString:d,eventData:v})},a.prototype.mapPositionToPoint=function(l,d,v){var m;this.interactionDOMElement.parentElement?m=this.interactionDOMElement.getBoundingClientRect():m={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var g=1/this.resolution;l.x=(d-m.left)*(this.interactionDOMElement.width/m.width)*g,l.y=(v-m.top)*(this.interactionDOMElement.height/m.height)*g},a.prototype.processInteractive=function(l,d,v,m){var g=this.search.findHit(l,d,v,m),T=this.delayedEvents;if(!T.length)return g;l.stopPropagationHint=!1;var b=T.length;this.delayedEvents=[];for(var R=0;R<b;R++){var C=T[R],w=C.displayObject,A=C.eventString,S=C.eventData;S.stopsPropagatingAt===w&&(S.stopPropagationHint=!0),this.dispatchEvent(w,A,S)}return g},a.prototype.onPointerDown=function(l){if(!(this.supportsTouchEvents&&l.pointerType==="touch")){var d=this.normalizeToPointerData(l);if(this.autoPreventDefault&&d[0].isNormalized){var v=l.cancelable||!("cancelable"in l);v&&l.preventDefault()}for(var m=d.length,g=0;g<m;g++){var T=d[g],b=this.getInteractionDataForPointerId(T),R=this.configureInteractionEventForDOMEvent(this.eventData,T,b);if(R.data.originalEvent=l,this.processInteractive(R,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",R),T.pointerType==="touch")this.emit("touchstart",R);else if(T.pointerType==="mouse"||T.pointerType==="pen"){var C=T.button===2;this.emit(C?"rightdown":"mousedown",this.eventData)}}}},a.prototype.processPointerDown=function(l,d,v){var m=l.data,g=l.data.identifier;if(v){if(d.trackedPointers[g]||(d.trackedPointers[g]=new InteractionTrackingData(g)),this.dispatchEvent(d,"pointerdown",l),m.pointerType==="touch")this.dispatchEvent(d,"touchstart",l);else if(m.pointerType==="mouse"||m.pointerType==="pen"){var T=m.button===2;T?d.trackedPointers[g].rightDown=!0:d.trackedPointers[g].leftDown=!0,this.dispatchEvent(d,T?"rightdown":"mousedown",l)}}},a.prototype.onPointerComplete=function(l,d,v){var m=this.normalizeToPointerData(l),g=m.length,T=l.target;l.composedPath&&l.composedPath().length>0&&(T=l.composedPath()[0]);for(var b=T!==this.interactionDOMElement?"outside":"",R=0;R<g;R++){var C=m[R],w=this.getInteractionDataForPointerId(C),A=this.configureInteractionEventForDOMEvent(this.eventData,C,w);if(A.data.originalEvent=l,this.processInteractive(A,this.lastObjectRendered,v,d||!b),this.emit(d?"pointercancel":"pointerup"+b,A),C.pointerType==="mouse"||C.pointerType==="pen"){var S=C.button===2;this.emit(S?"rightup"+b:"mouseup"+b,A)}else C.pointerType==="touch"&&(this.emit(d?"touchcancel":"touchend"+b,A),this.releaseInteractionDataForPointerId(C.pointerId))}},a.prototype.onPointerCancel=function(l){this.supportsTouchEvents&&l.pointerType==="touch"||this.onPointerComplete(l,!0,this.processPointerCancel)},a.prototype.processPointerCancel=function(l,d){var v=l.data,m=l.data.identifier;d.trackedPointers[m]!==void 0&&(delete d.trackedPointers[m],this.dispatchEvent(d,"pointercancel",l),v.pointerType==="touch"&&this.dispatchEvent(d,"touchcancel",l))},a.prototype.onPointerUp=function(l){this.supportsTouchEvents&&l.pointerType==="touch"||this.onPointerComplete(l,!1,this.processPointerUp)},a.prototype.processPointerUp=function(l,d,v){var m=l.data,g=l.data.identifier,T=d.trackedPointers[g],b=m.pointerType==="touch",R=m.pointerType==="mouse"||m.pointerType==="pen",C=!1;if(R){var w=m.button===2,A=InteractionTrackingData.FLAGS,S=w?A.RIGHT_DOWN:A.LEFT_DOWN,O=T!==void 0&&T.flags&S;v?(this.dispatchEvent(d,w?"rightup":"mouseup",l),O&&(this.dispatchEvent(d,w?"rightclick":"click",l),C=!0)):O&&this.dispatchEvent(d,w?"rightupoutside":"mouseupoutside",l),T&&(w?T.rightDown=!1:T.leftDown=!1)}v?(this.dispatchEvent(d,"pointerup",l),b&&this.dispatchEvent(d,"touchend",l),T&&((!R||C)&&this.dispatchEvent(d,"pointertap",l),b&&(this.dispatchEvent(d,"tap",l),T.over=!1))):T&&(this.dispatchEvent(d,"pointerupoutside",l),b&&this.dispatchEvent(d,"touchendoutside",l)),T&&T.none&&delete d.trackedPointers[g]},a.prototype.onPointerMove=function(l){if(!(this.supportsTouchEvents&&l.pointerType==="touch")){var d=this.normalizeToPointerData(l);(d[0].pointerType==="mouse"||d[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var v=d.length,m=0;m<v;m++){var g=d[m],T=this.getInteractionDataForPointerId(g),b=this.configureInteractionEventForDOMEvent(this.eventData,g,T);b.data.originalEvent=l,this.processInteractive(b,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",b),g.pointerType==="touch"&&this.emit("touchmove",b),(g.pointerType==="mouse"||g.pointerType==="pen")&&this.emit("mousemove",b)}d[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},a.prototype.processPointerMove=function(l,d,v){var m=l.data,g=m.pointerType==="touch",T=m.pointerType==="mouse"||m.pointerType==="pen";T&&this.processPointerOverOut(l,d,v),(!this.moveWhenInside||v)&&(this.dispatchEvent(d,"pointermove",l),g&&this.dispatchEvent(d,"touchmove",l),T&&this.dispatchEvent(d,"mousemove",l))},a.prototype.onPointerOut=function(l){if(!(this.supportsTouchEvents&&l.pointerType==="touch")){var d=this.normalizeToPointerData(l),v=d[0];v.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var m=this.getInteractionDataForPointerId(v),g=this.configureInteractionEventForDOMEvent(this.eventData,v,m);g.data.originalEvent=v,this.processInteractive(g,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",g),v.pointerType==="mouse"||v.pointerType==="pen"?this.emit("mouseout",g):this.releaseInteractionDataForPointerId(m.identifier)}},a.prototype.processPointerOverOut=function(l,d,v){var m=l.data,g=l.data.identifier,T=m.pointerType==="mouse"||m.pointerType==="pen",b=d.trackedPointers[g];v&&!b&&(b=d.trackedPointers[g]=new InteractionTrackingData(g)),b!==void 0&&(v&&this.mouseOverRenderer?(b.over||(b.over=!0,this.delayDispatchEvent(d,"pointerover",l),T&&this.delayDispatchEvent(d,"mouseover",l)),T&&this.cursor===null&&(this.cursor=d.cursor)):b.over&&(b.over=!1,this.dispatchEvent(d,"pointerout",this.eventData),T&&this.dispatchEvent(d,"mouseout",l),b.none&&delete d.trackedPointers[g]))},a.prototype.onPointerOver=function(l){var d=this.normalizeToPointerData(l),v=d[0],m=this.getInteractionDataForPointerId(v),g=this.configureInteractionEventForDOMEvent(this.eventData,v,m);g.data.originalEvent=v,v.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",g),(v.pointerType==="mouse"||v.pointerType==="pen")&&this.emit("mouseover",g)},a.prototype.getInteractionDataForPointerId=function(l){var d=l.pointerId,v;return d===MOUSE_POINTER_ID||l.pointerType==="mouse"?v=this.mouse:this.activeInteractionData[d]?v=this.activeInteractionData[d]:(v=this.interactionDataPool.pop()||new InteractionData,v.identifier=d,this.activeInteractionData[d]=v),v.copyEvent(l),v},a.prototype.releaseInteractionDataForPointerId=function(l){var d=this.activeInteractionData[l];d&&(delete this.activeInteractionData[l],d.reset(),this.interactionDataPool.push(d))},a.prototype.configureInteractionEventForDOMEvent=function(l,d,v){return l.data=v,this.mapPositionToPoint(v.global,d.clientX,d.clientY),d.pointerType==="touch"&&(d.globalX=v.global.x,d.globalY=v.global.y),v.originalEvent=d,l.reset(),l},a.prototype.normalizeToPointerData=function(l){var d=[];if(this.supportsTouchEvents&&l instanceof TouchEvent)for(var v=0,m=l.changedTouches.length;v<m;v++){var g=l.changedTouches[v];typeof g.button>"u"&&(g.button=l.touches.length?1:0),typeof g.buttons>"u"&&(g.buttons=l.touches.length?1:0),typeof g.isPrimary>"u"&&(g.isPrimary=l.touches.length===1&&l.type==="touchstart"),typeof g.width>"u"&&(g.width=g.radiusX||1),typeof g.height>"u"&&(g.height=g.radiusY||1),typeof g.tiltX>"u"&&(g.tiltX=0),typeof g.tiltY>"u"&&(g.tiltY=0),typeof g.pointerType>"u"&&(g.pointerType="touch"),typeof g.pointerId>"u"&&(g.pointerId=g.identifier||0),typeof g.pressure>"u"&&(g.pressure=g.force||.5),typeof g.twist>"u"&&(g.twist=0),typeof g.tangentialPressure>"u"&&(g.tangentialPressure=0),typeof g.layerX>"u"&&(g.layerX=g.offsetX=g.clientX),typeof g.layerY>"u"&&(g.layerY=g.offsetY=g.clientY),g.isNormalized=!0,d.push(g)}else if(!globalThis.MouseEvent||l instanceof MouseEvent&&(!this.supportsPointerEvents||!(l instanceof globalThis.PointerEvent))){var T=l;typeof T.isPrimary>"u"&&(T.isPrimary=!0),typeof T.width>"u"&&(T.width=1),typeof T.height>"u"&&(T.height=1),typeof T.tiltX>"u"&&(T.tiltX=0),typeof T.tiltY>"u"&&(T.tiltY=0),typeof T.pointerType>"u"&&(T.pointerType="mouse"),typeof T.pointerId>"u"&&(T.pointerId=MOUSE_POINTER_ID),typeof T.pressure>"u"&&(T.pressure=.5),typeof T.twist>"u"&&(T.twist=0),typeof T.tangentialPressure>"u"&&(T.tangentialPressure=0),T.isNormalized=!0,d.push(T)}else d.push(l);return d},a.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},a.extension={name:"interaction",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]},a}(EventEmitter);/*!
 * @pixi/extract - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,Extract=function(){function s(a){this.renderer=a}return s.prototype.image=function(a,l,d){var v=new Image;return v.src=this.base64(a,l,d),v},s.prototype.base64=function(a,l,d){return this.canvas(a).toDataURL(l,d)},s.prototype.canvas=function(a,l){var d=this.renderer,v,m=!1,g,T=!1;a&&(a instanceof RenderTexture?g=a:(g=this.renderer.generateTexture(a),T=!0)),g?(v=g.baseTexture.resolution,l=l!=null?l:g.frame,m=!1,d.renderTexture.bind(g)):(v=d.resolution,l||(l=TEMP_RECT,l.width=d.width,l.height=d.height),m=!0,d.renderTexture.bind(null));var b=Math.round(l.width*v),R=Math.round(l.height*v),C=new CanvasRenderTarget(b,R,1),w=new Uint8Array(BYTES_PER_PIXEL*b*R),A=d.gl;A.readPixels(Math.round(l.x*v),Math.round(l.y*v),b,R,A.RGBA,A.UNSIGNED_BYTE,w);var S=C.context.getImageData(0,0,b,R);if(s.arrayPostDivide(w,S.data),C.context.putImageData(S,0,0),m){var O=new CanvasRenderTarget(C.width,C.height,1);O.context.scale(1,-1),O.context.drawImage(C.canvas,0,-R),C.destroy(),C=O}return T&&g.destroy(!0),C.canvas},s.prototype.pixels=function(a,l){var d=this.renderer,v,m,g=!1;a&&(a instanceof RenderTexture?m=a:(m=this.renderer.generateTexture(a),g=!0)),m?(v=m.baseTexture.resolution,l=l!=null?l:m.frame,d.renderTexture.bind(m)):(v=d.resolution,l||(l=TEMP_RECT,l.width=d.width,l.height=d.height),d.renderTexture.bind(null));var T=Math.round(l.width*v),b=Math.round(l.height*v),R=new Uint8Array(BYTES_PER_PIXEL*T*b),C=d.gl;return C.readPixels(Math.round(l.x*v),Math.round(l.y*v),T,b,C.RGBA,C.UNSIGNED_BYTE,R),g&&m.destroy(!0),s.arrayPostDivide(R,R),R},s.prototype.destroy=function(){this.renderer=null},s.arrayPostDivide=function(a,l){for(var d=0;d<a.length;d+=4){var v=l[d+3]=a[d+3];v!==0?(l[d]=Math.round(Math.min(a[d]*255/v,255)),l[d+1]=Math.round(Math.min(a[d+1]*255/v,255)),l[d+2]=Math.round(Math.min(a[d+2]*255/v,255))):(l[d]=a[d],l[d+1]=a[d+1],l[d+2]=a[d+2])}},s.extension={name:"extract",type:ExtensionType.RendererPlugin},s}();/*!
 * @pixi/loaders - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var SignalBinding=function(){function s(a,l,d){l===void 0&&(l=!1),this._fn=a,this._once=l,this._thisArg=d,this._next=this._prev=this._owner=null}return s.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},s}();function _addSignalBinding(s,a){return s._head?(s._tail._next=a,a._prev=s._tail,s._tail=a):(s._head=a,s._tail=a),a._owner=s,a}var Signal=function(){function s(){this._head=this._tail=void 0}return s.prototype.handlers=function(a){a===void 0&&(a=!1);var l=this._head;if(a)return!!l;for(var d=[];l;)d.push(l),l=l._next;return d},s.prototype.has=function(a){if(!(a instanceof SignalBinding))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return a._owner===this},s.prototype.dispatch=function(){for(var a=arguments,l=[],d=0;d<arguments.length;d++)l[d]=a[d];var v=this._head;if(!v)return!1;for(;v;)v._once&&this.detach(v),v._fn.apply(v._thisArg,l),v=v._next;return!0},s.prototype.add=function(a,l){if(l===void 0&&(l=null),typeof a!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(a,!1,l))},s.prototype.once=function(a,l){if(l===void 0&&(l=null),typeof a!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(a,!0,l))},s.prototype.detach=function(a){if(!(a instanceof SignalBinding))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return a._owner!==this?this:(a._prev&&(a._prev._next=a._next),a._next&&(a._next._prev=a._prev),a===this._head?(this._head=a._next,a._next===null&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null),a._owner=null,this)},s.prototype.detachAll=function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;return this},s}();function parseUri(s,a){a=a||{};for(var l={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},d=l.parser[a.strictMode?"strict":"loose"].exec(s),v={},m=14;m--;)v[l.key[m]]=d[m]||"";return v[l.q.name]={},v[l.key[12]].replace(l.q.parser,function(g,T,b){T&&(v[l.q.name][T]=b)}),v}var useXdr,tempAnchor=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204,STATUS_IE_BUG_EMPTY=1223,STATUS_TYPE_OK=2;function _noop$1(){}function setExtMap(s,a,l){a&&a.indexOf(".")===0&&(a=a.substring(1)),a&&(s[a]=l)}function reqType(s){return s.toString().replace("object ","")}var LoaderResource=function(){function s(a,l,d){if(this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof a!="string"||typeof l!="string")throw new Error("Both name and url are required for constructing a resource.");d=d||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,l.indexOf("data:")===0),this.name=a,this.url=l,this.extension=this._getExtension(),this.data=null,this.crossOrigin=d.crossOrigin===!0?"anonymous":d.crossOrigin,this.timeout=d.timeout||0,this.loadType=d.loadType||this._determineLoadType(),this.xhrType=d.xhrType,this.metadata=d.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Signal,this.onProgress=new Signal,this.onComplete=new Signal,this.onAfterMiddleware=new Signal}return s.setExtensionLoadType=function(a,l){setExtMap(s._loadTypeMap,a,l)},s.setExtensionXhrType=function(a,l){setExtMap(s._xhrTypeMap,a,l)},Object.defineProperty(s.prototype,"isDataUrl",{get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isComplete",{get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isLoading",{get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),s.prototype.complete=function(){this._clearEvents(),this._finish()},s.prototype.abort=function(a){if(!this.error){if(this.error=new Error(a),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},s.prototype.load=function(a){var l=this;if(!this.isLoading){if(this.isComplete){a&&setTimeout(function(){return a(l)},1);return}else a&&this.onComplete.once(a);switch(this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:typeof useXdr>"u"&&(useXdr=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},s.prototype._hasFlag=function(a){return(this._flags&a)!==0},s.prototype._setFlag=function(a,l){this._flags=l?this._flags|a:this._flags&~a},s.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},s.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},s.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:a==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},s.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:a==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(a),this.data===null){this.abort("Unsupported element: "+a);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var l=this.metadata.mimeType,d=0;d<this.url.length;++d)this.data.appendChild(this._createSource(a,this.url[d],Array.isArray(l)?l[d]:l));else{var l=this.metadata.mimeType;this.data.appendChild(this._createSource(a,this.url,Array.isArray(l)?l[0]:l))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},s.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(a.withCredentials=!0),a.open("GET",this.url,!0),a.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?a.responseType=s.XHR_RESPONSE_TYPE.TEXT:a.responseType=this.xhrType,a.addEventListener("error",this._boundXhrOnError,!1),a.addEventListener("timeout",this._boundXhrOnTimeout,!1),a.addEventListener("abort",this._boundXhrOnAbort,!1),a.addEventListener("progress",this._boundOnProgress,!1),a.addEventListener("load",this._boundXhrOnLoad,!1),a.send()},s.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var a=this.xhr=new globalThis.XDomainRequest;a.timeout=this.timeout||5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXhrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){return a.send()},1)},s.prototype._createSource=function(a,l,d){d||(d=a+"/"+this._getExtension(l));var v=document.createElement("source");return v.src=l,v.type=d,v},s.prototype._onError=function(a){this.abort("Failed to load element using: "+a.target.nodeName)},s.prototype._onProgress=function(a){a&&a.lengthComputable&&this.onProgress.dispatch(this,a.loaded/a.total)},s.prototype._onTimeout=function(){this.abort("Load timed out.")},s.prototype._xhrOnError=function(){var a=this.xhr;this.abort(reqType(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},s.prototype._xhrOnTimeout=function(){var a=this.xhr;this.abort(reqType(a)+" Request timed out.")},s.prototype._xhrOnAbort=function(){var a=this.xhr;this.abort(reqType(a)+" Request was aborted by the user.")},s.prototype._xhrOnLoad=function(){var a=this.xhr,l="",d=typeof a.status>"u"?STATUS_OK:a.status;(a.responseType===""||a.responseType==="text"||typeof a.responseType>"u")&&(l=a.responseText),d===STATUS_NONE&&(l.length>0||a.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?d=STATUS_OK:d===STATUS_IE_BUG_EMPTY&&(d=STATUS_EMPTY);var v=d/100|0;if(v===STATUS_TYPE_OK)if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=l,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(l),this.type=s.TYPE.JSON}catch(T){this.abort("Error trying to parse loaded json: "+T);return}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var m=new DOMParser;this.data=m.parseFromString(l,"text/xml")}else{var g=document.createElement("div");g.innerHTML=l,this.data=g}this.type=s.TYPE.XML}catch(T){this.abort("Error trying to parse loaded xml: "+T);return}else this.data=a.response||l;else{this.abort("["+a.status+"] "+a.statusText+": "+a.responseURL);return}this.complete()},s.prototype._determineCrossOrigin=function(a,l){if(a.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";l=l||globalThis.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=a;var d=parseUri(tempAnchor.href,{strictMode:!0}),v=!d.port&&l.port===""||d.port===l.port,m=d.protocol?d.protocol+":":"";return d.host!==l.hostname||!v||m!==l.protocol?"anonymous":""},s.prototype._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},s.prototype._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},s.prototype._getExtension=function(a){a===void 0&&(a=this.url);var l="";if(this.isDataUrl){var d=a.indexOf("/");l=a.substring(d+1,a.indexOf(";",d))}else{var v=a.indexOf("?"),m=a.indexOf("#"),g=Math.min(v>-1?v:a.length,m>-1?m:a.length);a=a.substring(0,g),l=a.substring(a.lastIndexOf(".")+1)}return l.toLowerCase()},s.prototype._getMimeFromXhrType=function(a){switch(a){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},s}();(function(s){(function(a){a[a.NONE=0]="NONE",a[a.DATA_URL=1]="DATA_URL",a[a.COMPLETE=2]="COMPLETE",a[a.LOADING=4]="LOADING"})(s.STATUS_FLAGS||(s.STATUS_FLAGS={})),function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.JSON=1]="JSON",a[a.XML=2]="XML",a[a.IMAGE=3]="IMAGE",a[a.AUDIO=4]="AUDIO",a[a.VIDEO=5]="VIDEO",a[a.TEXT=6]="TEXT"}(s.TYPE||(s.TYPE={})),function(a){a[a.XHR=1]="XHR",a[a.IMAGE=2]="IMAGE",a[a.AUDIO=3]="AUDIO",a[a.VIDEO=4]="VIDEO"}(s.LOAD_TYPE||(s.LOAD_TYPE={})),function(a){a.DEFAULT="text",a.BUFFER="arraybuffer",a.BLOB="blob",a.DOCUMENT="document",a.JSON="json",a.TEXT="text"}(s.XHR_RESPONSE_TYPE||(s.XHR_RESPONSE_TYPE={})),s._loadTypeMap={gif:s.LOAD_TYPE.IMAGE,png:s.LOAD_TYPE.IMAGE,bmp:s.LOAD_TYPE.IMAGE,jpg:s.LOAD_TYPE.IMAGE,jpeg:s.LOAD_TYPE.IMAGE,tif:s.LOAD_TYPE.IMAGE,tiff:s.LOAD_TYPE.IMAGE,webp:s.LOAD_TYPE.IMAGE,tga:s.LOAD_TYPE.IMAGE,svg:s.LOAD_TYPE.IMAGE,"svg+xml":s.LOAD_TYPE.IMAGE,mp3:s.LOAD_TYPE.AUDIO,ogg:s.LOAD_TYPE.AUDIO,wav:s.LOAD_TYPE.AUDIO,mp4:s.LOAD_TYPE.VIDEO,webm:s.LOAD_TYPE.VIDEO},s._xhrTypeMap={xhtml:s.XHR_RESPONSE_TYPE.DOCUMENT,html:s.XHR_RESPONSE_TYPE.DOCUMENT,htm:s.XHR_RESPONSE_TYPE.DOCUMENT,xml:s.XHR_RESPONSE_TYPE.DOCUMENT,tmx:s.XHR_RESPONSE_TYPE.DOCUMENT,svg:s.XHR_RESPONSE_TYPE.DOCUMENT,tsx:s.XHR_RESPONSE_TYPE.DOCUMENT,gif:s.XHR_RESPONSE_TYPE.BLOB,png:s.XHR_RESPONSE_TYPE.BLOB,bmp:s.XHR_RESPONSE_TYPE.BLOB,jpg:s.XHR_RESPONSE_TYPE.BLOB,jpeg:s.XHR_RESPONSE_TYPE.BLOB,tif:s.XHR_RESPONSE_TYPE.BLOB,tiff:s.XHR_RESPONSE_TYPE.BLOB,webp:s.XHR_RESPONSE_TYPE.BLOB,tga:s.XHR_RESPONSE_TYPE.BLOB,json:s.XHR_RESPONSE_TYPE.JSON,text:s.XHR_RESPONSE_TYPE.TEXT,txt:s.XHR_RESPONSE_TYPE.TEXT,ttf:s.XHR_RESPONSE_TYPE.BUFFER,otf:s.XHR_RESPONSE_TYPE.BUFFER},s.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(LoaderResource||(LoaderResource={}));function _noop(){}function onlyOnce(s){return function(){for(var l=arguments,d=[],v=0;v<arguments.length;v++)d[v]=l[v];if(s===null)throw new Error("Callback was already called.");var m=s;s=null,m.apply(this,d)}}var AsyncQueueItem=function(){function s(a,l){this.data=a,this.callback=l}return s}(),AsyncQueue=function(){function s(a,l){var d=this;if(l===void 0&&(l=1),this.workers=0,this.saturated=_noop,this.unsaturated=_noop,this.empty=_noop,this.drain=_noop,this.error=_noop,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(v,m,g){if(g&&typeof g!="function")throw new Error("task callback must be a function");if(d.started=!0,v==null&&d.idle()){setTimeout(function(){return d.drain()},1);return}var T=new AsyncQueueItem(v,typeof g=="function"?g:_noop);m?d._tasks.unshift(T):d._tasks.push(T),setTimeout(d.process,1)},this.process=function(){for(;!d.paused&&d.workers<d.concurrency&&d._tasks.length;){var v=d._tasks.shift();d._tasks.length===0&&d.empty(),d.workers+=1,d.workers===d.concurrency&&d.saturated(),d._worker(v.data,onlyOnce(d._next(v)))}},this._worker=a,l===0)throw new Error("Concurrency must not be zero");this.concurrency=l,this.buffer=l/4}return s.prototype._next=function(a){var l=this;return function(){for(var d=arguments,v=[],m=0;m<arguments.length;m++)v[m]=d[m];l.workers-=1,a.callback.apply(a,v),v[0]!=null&&l.error(v[0],a.data),l.workers<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()}},s.prototype.push=function(a,l){this._insert(a,!1,l)},s.prototype.kill=function(){this.workers=0,this.drain=_noop,this.started=!1,this._tasks=[]},s.prototype.unshift=function(a,l){this._insert(a,!0,l)},s.prototype.length=function(){return this._tasks.length},s.prototype.running=function(){return this.workers},s.prototype.idle=function(){return this._tasks.length+this.workers===0},s.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},s.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var a=1;a<=this.concurrency;a++)this.process()}},s.eachSeries=function(a,l,d,v){var m=0,g=a.length;function T(b){if(b||m===g){d&&d(b);return}v?setTimeout(function(){l(a[m++],T)},1):l(a[m++],T)}T()},s.queue=function(a,l){return new s(a,l)},s}(),MAX_PROGRESS=100,rgxExtractUrlHash=/(#[\w-]+)?$/,Loader=function(){function s(a,l){var d=this;a===void 0&&(a=""),l===void 0&&(l=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(b,R){return d._loadResource(b,R)},this.resources={},this.baseUrl=a,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(b,R){return d._loadResource(b,R)},this._queue=AsyncQueue.queue(this._boundLoadResource,l),this._queue.pause(),this.resources={},this.onProgress=new Signal,this.onError=new Signal,this.onLoad=new Signal,this.onStart=new Signal,this.onComplete=new Signal;for(var v=0;v<s._plugins.length;++v){var m=s._plugins[v],g=m.pre,T=m.use;g&&this.pre(g),T&&this.use(T)}this._protected=!1}return s.prototype._add=function(a,l,d,v){if(this.loading&&(!d||!d.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[a])throw new Error('Resource named "'+a+'" already exists.');if(l=this._prepareUrl(l),this.resources[a]=new LoaderResource(a,l,d),typeof v=="function"&&this.resources[a].onAfterMiddleware.once(v),this.loading){for(var m=d.parentResource,g=[],T=0;T<m.children.length;++T)m.children[T].isComplete||g.push(m.children[T]);var b=m.progressChunk*(g.length+1),R=b/(g.length+2);m.children.push(this.resources[a]),m.progressChunk=R;for(var T=0;T<g.length;++T)g[T].progressChunk=R;this.resources[a].progressChunk=R}return this._queue.push(this.resources[a]),this},s.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},s.prototype.use=function(a){return this._afterMiddleware.push(a),this},s.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var a in this.resources){var l=this.resources[a];l._onLoadBinding&&l._onLoadBinding.detach(),l.isLoading&&l.abort("loader reset")}return this.resources={},this},s.prototype.load=function(a){if(deprecation$1("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof a=="function"&&this.onComplete.once(a),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var l=this._queue._tasks.length,d=MAX_PROGRESS/l,v=0;v<this._queue._tasks.length;++v)this._queue._tasks[v].data.progressChunk=d;this._onStart(),this._queue.resume()}return this},Object.defineProperty(s.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(a){this._queue.concurrency=a},enumerable:!1,configurable:!0}),s.prototype._prepareUrl=function(a){var l=parseUri(a,{strictMode:!0}),d;if(l.protocol||!l.path||a.indexOf("//")===0?d=a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&a.charAt(0)!=="/"?d=this.baseUrl+"/"+a:d=this.baseUrl+a,this.defaultQueryString){var v=rgxExtractUrlHash.exec(d)[0];d=d.slice(0,d.length-v.length),d.indexOf("?")!==-1?d+="&"+this.defaultQueryString:d+="?"+this.defaultQueryString,d+=v}return d},s.prototype._loadResource=function(a,l){var d=this;a._dequeue=l,AsyncQueue.eachSeries(this._beforeMiddleware,function(v,m){v.call(d,a,function(){m(a.isComplete?{}:null)})},function(){a.isComplete?d._onLoad(a):(a._onLoadBinding=a.onComplete.once(d._onLoad,d),a.load())},!0)},s.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},s.prototype._onComplete=function(){this.progress=MAX_PROGRESS,this.loading=!1,this.onComplete.dispatch(this,this.resources)},s.prototype._onLoad=function(a){var l=this;a._onLoadBinding=null,this._resourcesParsing.push(a),a._dequeue(),AsyncQueue.eachSeries(this._afterMiddleware,function(d,v){d.call(l,a,v)},function(){a.onAfterMiddleware.dispatch(a),l.progress=Math.min(MAX_PROGRESS,l.progress+a.progressChunk),l.onProgress.dispatch(l,a),a.error?l.onError.dispatch(a.error,l,a):l.onLoad.dispatch(l,a),l._resourcesParsing.splice(l._resourcesParsing.indexOf(a),1),l._queue.idle()&&l._resourcesParsing.length===0&&l._onComplete()},!0)},s.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(s,"shared",{get:function(){var a=s._shared;return a||(a=new s,a._protected=!0,s._shared=a),a},enumerable:!1,configurable:!0}),s.registerPlugin=function(a){return deprecation$1("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),extensions.add({type:ExtensionType.Loader,ref:a}),s},s._plugins=[],s}();extensions.handleByList(ExtensionType.Loader,Loader._plugins);Loader.prototype.add=function(a,l,d,v){if(Array.isArray(a)){for(var m=0;m<a.length;++m)this.add(a[m]);return this}if(typeof a=="object"&&(d=a,v=l||d.callback||d.onComplete,l=d.url,a=d.name||d.key||d.url),typeof l!="string"&&(v=d,d=l,l=a),typeof l!="string")throw new Error("No url passed to add resource to loader.");return typeof d=="function"&&(v=d,d=null),this._add(a,l,d,v)};var AppLoaderPlugin=function(){function s(){}return s.init=function(a){a=Object.assign({sharedLoader:!1},a),this.loader=a.sharedLoader?Loader.shared:new Loader},s.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},s.extension=ExtensionType.Application,s}(),TextureLoader=function(){function s(){}return s.add=function(){LoaderResource.setExtensionLoadType("svg",LoaderResource.LOAD_TYPE.XHR),LoaderResource.setExtensionXhrType("svg",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},s.use=function(a,l){if(a.data&&(a.type===LoaderResource.TYPE.IMAGE||a.extension==="svg")){var d=a.data,v=a.url,m=a.name,g=a.metadata;Texture.fromLoader(d,v,m,g).then(function(T){a.texture=T,l()}).catch(l)}else l()},s.extension=ExtensionType.Loader,s}(),_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encodeBinary(s){for(var a="",l=0;l<s.length;){for(var d=[0,0,0],v=[0,0,0,0],m=0;m<d.length;++m)l<s.length?d[m]=s.charCodeAt(l++)&255:d[m]=0;v[0]=d[0]>>2,v[1]=(d[0]&3)<<4|d[1]>>4,v[2]=(d[1]&15)<<2|d[2]>>6,v[3]=d[2]&63;var g=l-(s.length-1);switch(g){case 2:v[3]=64,v[2]=64;break;case 1:v[3]=64;break}for(var m=0;m<v.length;++m)a+=_keyStr.charAt(v[m])}return a}function parsing(s,a){if(!s.data){a();return}if(s.xhr&&s.xhrType===LoaderResource.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof s.data=="string"){var l=s.xhr.getResponseHeader("content-type");if(l&&l.indexOf("image")===0){s.data=new Image,s.data.src="data:"+l+";base64,"+encodeBinary(s.xhr.responseText),s.type=LoaderResource.TYPE.IMAGE,s.data.onload=function(){s.data.onload=null,a()};return}}else if(s.data.type.indexOf("image")===0){var d=globalThis.URL||globalThis.webkitURL,v=d.createObjectURL(s.data);s.blob=s.data,s.data=new Image,s.data.src=v,s.type=LoaderResource.TYPE.IMAGE,s.data.onload=function(){d.revokeObjectURL(v),s.data.onload=null,a()};return}}a()}var ParsingLoader=function(){function s(){}return s.extension=ExtensionType.Loader,s.use=parsing,s}();extensions.add(TextureLoader,ParsingLoader);/*!
 * @pixi/compressed-textures - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _a$2,INTERNAL_FORMATS;(function(s){s[s.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",s[s.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",s[s.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",s[s.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",s[s.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",s[s.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",s[s.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",s[s.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",s[s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",s[s.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",s[s.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",s[s.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(INTERNAL_FORMATS||(INTERNAL_FORMATS={}));var INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=(_a$2={},_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,_a$2);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$g=function(s,a){return extendStatics$g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$g(s,a)};function __extends$g(s,a){extendStatics$g(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}function __awaiter(s,a,l,d){function v(m){return m instanceof l?m:new l(function(g){g(m)})}return new(l||(l=Promise))(function(m,g){function T(C){try{R(d.next(C))}catch(w){g(w)}}function b(C){try{R(d.throw(C))}catch(w){g(w)}}function R(C){C.done?m(C.value):v(C.value).then(T,b)}R((d=d.apply(s,a||[])).next())})}function __generator(s,a){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,v,m,g;return g={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function T(R){return function(C){return b([R,C])}}function b(R){if(d)throw new TypeError("Generator is already executing.");for(;l;)try{if(d=1,v&&(m=R[0]&2?v.return:R[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,R[1])).done)return m;switch(v=0,m&&(R=[R[0]&2,m.value]),R[0]){case 0:case 1:m=R;break;case 4:return l.label++,{value:R[1],done:!1};case 5:l.label++,v=R[1],R=[0];continue;case 7:R=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(R[0]===6||R[0]===2)){l=0;continue}if(R[0]===3&&(!m||R[1]>m[0]&&R[1]<m[3])){l.label=R[1];break}if(R[0]===6&&l.label<m[1]){l.label=m[1],m=R;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(R);break}m[2]&&l.ops.pop(),l.trys.pop();continue}R=a.call(s,l)}catch(C){R=[6,C],v=0}finally{d=m=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}}var BlobResource=function(s){__extends$g(a,s);function a(l,d){d===void 0&&(d={width:1,height:1,autoLoad:!0});var v=this,m,g;return typeof l=="string"?(m=l,g=new Uint8Array):(m=null,g=l),v=s.call(this,g,d)||this,v.origin=m,v.buffer=g?new ViewableBuffer(g):null,v.origin&&d.autoLoad!==!1&&v.load(),g&&g.length&&(v.loaded=!0,v.onBlobLoaded(v.buffer.rawBinaryData)),v}return a.prototype.onBlobLoaded=function(l){},a.prototype.load=function(){return __awaiter(this,void 0,Promise,function(){var l,d,v;return __generator(this,function(m){switch(m.label){case 0:return[4,fetch(this.origin)];case 1:return l=m.sent(),[4,l.blob()];case 2:return d=m.sent(),[4,d.arrayBuffer()];case 3:return v=m.sent(),this.data=new Uint32Array(v),this.buffer=new ViewableBuffer(v),this.loaded=!0,this.onBlobLoaded(v),this.update(),[2,this]}})})},a}(BufferResource),CompressedTextureResource=function(s){__extends$g(a,s);function a(l,d){var v=s.call(this,l,d)||this;return v.format=d.format,v.levels=d.levels||1,v._width=d.width,v._height=d.height,v._extension=a._formatToExtension(v.format),(d.levelBuffers||v.buffer)&&(v._levelBuffers=d.levelBuffers||a._createLevelBuffers(l instanceof Uint8Array?l:v.buffer.uint8View,v.format,v.levels,4,4,v.width,v.height)),v}return a.prototype.upload=function(l,d,v){var m=l.gl,g=l.context.extensions[this._extension];if(!g)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var T=0,b=this.levels;T<b;T++){var R=this._levelBuffers[T],C=R.levelID,w=R.levelWidth,A=R.levelHeight,S=R.levelBuffer;m.compressedTexImage2D(m.TEXTURE_2D,C,this.format,w,A,0,S)}return!0},a.prototype.onBlobLoaded=function(){this._levelBuffers=a._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},a._formatToExtension=function(l){if(l>=33776&&l<=33779)return"s3tc";if(l>=37488&&l<=37497)return"etc";if(l>=35840&&l<=35843)return"pvrtc";if(l>=36196)return"etc1";if(l>=35986&&l<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},a._createLevelBuffers=function(l,d,v,m,g,T,b){for(var R=new Array(v),C=l.byteOffset,w=T,A=b,S=w+m-1&~(m-1),O=A+g-1&~(g-1),L=S*O*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[d],N=0;N<v;N++)R[N]={levelID:N,levelWidth:v>1?w:S,levelHeight:v>1?A:O,levelBuffer:new Uint8Array(l.buffer,C,L)},C+=L,w=w>>1||1,A=A>>1||1,S=w+m-1&~(m-1),O=A+g-1&~(g-1),L=S*O*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[d];return R},a}(BlobResource),CompressedTextureLoader=function(){function s(){}return s.use=function(a,l){var d=a.data,v=this;if(a.type===LoaderResource.TYPE.JSON&&d&&d.cacheID&&d.textures){for(var m=d.textures,g=void 0,T=void 0,b=0,R=m.length;b<R;b++){var C=m[b],w=C.src,A=C.format;if(A||(T=w),s.textureFormats[A]){g=w;break}}if(g=g||T,!g){l(new Error("Cannot load compressed-textures in "+a.url+", make sure you provide a fallback"));return}if(g===a.url){l(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var S={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata,parentResource:a},O=url.resolve(a.url.replace(v.baseUrl,""),g),L=d.cacheID;v.add(L,O,S,function(N){if(N.error){l(N.error);return}var U=N.texture,$=U===void 0?null:U,G=N.textures,z=G===void 0?{}:G;Object.assign(a,{texture:$,textures:z}),l()})}else l()},Object.defineProperty(s,"textureExtensions",{get:function(){if(!s._textureExtensions){var a=document.createElement("canvas"),l=a.getContext("webgl");if(!l)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var d={s3tc:l.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:l.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:l.getExtension("WEBGL_compressed_texture_etc"),etc1:l.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:l.getExtension("WEBGL_compressed_texture_atc"),astc:l.getExtension("WEBGL_compressed_texture_astc")};s._textureExtensions=d}return s._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(s,"textureFormats",{get:function(){if(!s._textureFormats){var a=s.textureExtensions;s._textureFormats={};for(var l in a){var d=a[l];!d||Object.assign(s._textureFormats,Object.getPrototypeOf(d))}}return s._textureFormats},enumerable:!1,configurable:!0}),s.extension=ExtensionType.Loader,s}();function registerCompressedTextures(s,a,l){var d={textures:{},texture:null};if(!a)return d;var v=a.map(function(m){return new Texture(new BaseTexture(m,Object.assign({mipmap:MIPMAP_MODES$5.OFF,alphaMode:ALPHA_MODES$5.NO_PREMULTIPLIED_ALPHA},l)))});return v.forEach(function(m,g){var T=m.baseTexture,b=s+"-"+(g+1);BaseTexture.addToCache(T,b),Texture.addToCache(m,b),g===0&&(BaseTexture.addToCache(T,s),Texture.addToCache(m,s),d.texture=m),d.textures[b]=m}),d}var _a$1,_b$1,DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},DXGI_FORMAT;(function(s){s[s.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",s[s.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",s[s.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",s[s.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",s[s.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",s[s.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",s[s.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",s[s.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",s[s.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",s[s.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",s[s.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",s[s.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",s[s.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",s[s.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",s[s.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",s[s.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",s[s.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",s[s.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",s[s.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",s[s.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",s[s.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",s[s.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",s[s.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",s[s.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",s[s.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",s[s.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",s[s.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",s[s.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",s[s.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",s[s.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",s[s.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",s[s.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",s[s.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",s[s.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",s[s.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",s[s.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",s[s.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",s[s.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",s[s.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",s[s.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",s[s.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",s[s.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",s[s.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",s[s.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",s[s.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",s[s.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",s[s.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",s[s.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",s[s.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",s[s.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",s[s.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",s[s.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",s[s.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",s[s.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",s[s.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",s[s.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",s[s.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",s[s.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",s[s.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",s[s.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",s[s.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",s[s.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",s[s.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",s[s.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",s[s.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",s[s.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",s[s.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",s[s.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",s[s.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",s[s.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",s[s.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",s[s.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",s[s.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",s[s.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",s[s.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",s[s.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",s[s.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",s[s.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",s[s.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",s[s.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",s[s.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",s[s.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",s[s.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",s[s.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",s[s.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",s[s.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",s[s.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",s[s.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",s[s.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",s[s.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",s[s.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",s[s.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",s[s.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",s[s.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",s[s.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",s[s.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",s[s.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",s[s.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",s[s.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",s[s.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",s[s.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",s[s.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",s[s.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",s[s.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",s[s.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",s[s.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",s[s.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",s[s.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",s[s.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",s[s.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",s[s.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",s[s.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",s[s.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",s[s.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",s[s.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",s[s.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",s[s.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",s[s.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",s[s.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",s[s.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",s[s.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",s[s.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(DXGI_FORMAT||(DXGI_FORMAT={}));var D3D10_RESOURCE_DIMENSION;(function(s){s[s.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",s[s.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",s[s.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(D3D10_RESOURCE_DIMENSION||(D3D10_RESOURCE_DIMENSION={}));var PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT=(_a$1={},_a$1[FOURCC_DXT1]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_a$1[FOURCC_DXT3]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_a$1[FOURCC_DXT5]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_a$1),DXGI_TO_FORMAT=(_b$1={},_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,_b$1);function parseDDS(s){var a=new Uint32Array(s),l=a[0];if(l!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");var d=new Uint32Array(s,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),v=d[DDS_FIELDS.HEIGHT],m=d[DDS_FIELDS.WIDTH],g=d[DDS_FIELDS.MIPMAP_COUNT],T=new Uint32Array(s,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),b=T[PF_FLAGS];if(b&DDPF_FOURCC){var R=T[DDS_PF_FIELDS.FOURCC];if(R!==FOURCC_DX10){var C=FOURCC_TO_FORMAT[R],w=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,A=new Uint8Array(s,w),S=new CompressedTextureResource(A,{format:C,width:m,height:v,levels:g});return[S]}var O=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,L=new Uint32Array(a.buffer,O,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),N=L[DDS_DX10_FIELDS.DXGI_FORMAT],U=L[DDS_DX10_FIELDS.RESOURCE_DIMENSION],$=L[DDS_DX10_FIELDS.MISC_FLAG],G=L[DDS_DX10_FIELDS.ARRAY_SIZE],z=DXGI_TO_FORMAT[N];if(z===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+N);if($===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(U===D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var V=new Array,X=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(G===1)V.push(new Uint8Array(s,X));else{for(var ie=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[z],re=0,J=m,se=v,xe=0;xe<g;xe++){var Ae=Math.max(1,J+3&-4),Ue=Math.max(1,se+3&-4),ze=Ae*Ue*ie;re+=ze,J=J>>>1,se=se>>>1}for(var Ce=X,xe=0;xe<G;xe++)V.push(new Uint8Array(s,Ce,re)),Ce+=re}return V.map(function(ye){return new CompressedTextureResource(ye,{format:z,width:m,height:v,levels:g})})}throw b&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):b&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):b&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):b&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var _a$3,_b,_c,FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT=(_a$3={},_a$3[TYPES$5.UNSIGNED_BYTE]=1,_a$3[TYPES$5.UNSIGNED_SHORT]=2,_a$3[TYPES$5.INT]=4,_a$3[TYPES$5.UNSIGNED_INT]=4,_a$3[TYPES$5.FLOAT]=4,_a$3[TYPES$5.HALF_FLOAT]=8,_a$3),FORMATS_TO_COMPONENTS=(_b={},_b[FORMATS$5.RGBA]=4,_b[FORMATS$5.RGB]=3,_b[FORMATS$5.RG]=2,_b[FORMATS$5.RED]=1,_b[FORMATS$5.LUMINANCE]=1,_b[FORMATS$5.LUMINANCE_ALPHA]=2,_b[FORMATS$5.ALPHA]=1,_b),TYPES_TO_BYTES_PER_PIXEL=(_c={},_c[TYPES$5.UNSIGNED_SHORT_4_4_4_4]=2,_c[TYPES$5.UNSIGNED_SHORT_5_5_5_1]=2,_c[TYPES$5.UNSIGNED_SHORT_5_6_5]=2,_c);function parseKTX(s,a,l){l===void 0&&(l=!1);var d=new DataView(a);if(!validate(s,d))return null;var v=d.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,m=d.getUint32(KTX_FIELDS.GL_TYPE,v),g=d.getUint32(KTX_FIELDS.GL_FORMAT,v),T=d.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,v),b=d.getUint32(KTX_FIELDS.PIXEL_WIDTH,v),R=d.getUint32(KTX_FIELDS.PIXEL_HEIGHT,v)||1,C=d.getUint32(KTX_FIELDS.PIXEL_DEPTH,v)||1,w=d.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,v)||1,A=d.getUint32(KTX_FIELDS.NUMBER_OF_FACES,v),S=d.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,v),O=d.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,v);if(R===0||C!==1)throw new Error("Only 2D textures are supported");if(A!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(w!==1)throw new Error("WebGL does not support array textures");var L=4,N=4,U=b+3&-4,$=R+3&-4,G=new Array(w),z=b*R;m===0&&(z=U*$);var V;if(m!==0?TYPES_TO_BYTES_PER_COMPONENT[m]?V=TYPES_TO_BYTES_PER_COMPONENT[m]*FORMATS_TO_COMPONENTS[g]:V=TYPES_TO_BYTES_PER_PIXEL[m]:V=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[T],V===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var X=l?parseKvData(d,O,v):null,ie=z*V,re=ie,J=b,se=R,xe=U,Ae=$,Ue=FILE_HEADER_SIZE+O,ze=0;ze<S;ze++){for(var Ce=d.getUint32(Ue,v),ye=Ue+4,Re=0;Re<w;Re++){var Fe=G[Re];Fe||(Fe=G[Re]=new Array(S)),Fe[ze]={levelID:ze,levelWidth:S>1||m!==0?J:xe,levelHeight:S>1||m!==0?se:Ae,levelBuffer:new Uint8Array(a,ye,re)},ye+=re}Ue+=Ce+4,Ue=Ue%4!==0?Ue+4-Ue%4:Ue,J=J>>1||1,se=se>>1||1,xe=J+L-1&~(L-1),Ae=se+N-1&~(N-1),re=xe*Ae*V}return m!==0?{uncompressed:G.map(function(He){var q=He[0].levelBuffer,oe=!1;return m===TYPES$5.FLOAT?q=new Float32Array(He[0].levelBuffer.buffer,He[0].levelBuffer.byteOffset,He[0].levelBuffer.byteLength/4):m===TYPES$5.UNSIGNED_INT?(oe=!0,q=new Uint32Array(He[0].levelBuffer.buffer,He[0].levelBuffer.byteOffset,He[0].levelBuffer.byteLength/4)):m===TYPES$5.INT&&(oe=!0,q=new Int32Array(He[0].levelBuffer.buffer,He[0].levelBuffer.byteOffset,He[0].levelBuffer.byteLength/4)),{resource:new BufferResource(q,{width:He[0].levelWidth,height:He[0].levelHeight}),type:m,format:oe?convertFormatToInteger(g):g}}),kvData:X}:{compressed:G.map(function(He){return new CompressedTextureResource(null,{format:T,width:b,height:R,levels:S,levelBuffers:He})}),kvData:X}}function validate(s,a){for(var l=0;l<FILE_IDENTIFIER.length;l++)if(a.getUint8(l)!==FILE_IDENTIFIER[l])return console.error(s+" is not a valid *.ktx file!"),!1;return!0}function convertFormatToInteger(s){switch(s){case FORMATS$5.RGBA:return FORMATS$5.RGBA_INTEGER;case FORMATS$5.RGB:return FORMATS$5.RGB_INTEGER;case FORMATS$5.RG:return FORMATS$5.RG_INTEGER;case FORMATS$5.RED:return FORMATS$5.RED_INTEGER;default:return s}}function parseKvData(s,a,l){for(var d=new Map,v=0;v<a;){var m=s.getUint32(FILE_HEADER_SIZE+v,l),g=FILE_HEADER_SIZE+v+4,T=3-(m+3)%4;if(m===0||m>a-v){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var b=0;b<m&&s.getUint8(g+b)!==0;b++);if(b===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var R=new TextDecoder().decode(new Uint8Array(s.buffer,g,b)),C=new DataView(s.buffer,g+b+1,m-b-1);d.set(R,C),v+=4+m+T}return d}LoaderResource.setExtensionXhrType("dds",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var DDSLoader=function(){function s(){}return s.use=function(a,l){if(a.extension==="dds"&&a.data)try{Object.assign(a,registerCompressedTextures(a.name||a.url,parseDDS(a.data),a.metadata))}catch(d){l(d);return}l()},s.extension=ExtensionType.Loader,s}();LoaderResource.setExtensionXhrType("ktx",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var KTXLoader=function(){function s(){}return s.use=function(a,l){if(a.extension==="ktx"&&a.data)try{var d=a.name||a.url,v=parseKTX(d,a.data,this.loadKeyValueData),m=v.compressed,g=v.uncompressed,T=v.kvData;if(m){var b=registerCompressedTextures(d,m,a.metadata);if(T&&b.textures)for(var R in b.textures)b.textures[R].baseTexture.ktxKeyValueData=T;Object.assign(a,b)}else if(g){var C={};g.forEach(function(w,A){var S=new Texture(new BaseTexture(w.resource,{mipmap:MIPMAP_MODES$5.OFF,alphaMode:ALPHA_MODES$5.NO_PREMULTIPLIED_ALPHA,type:w.type,format:w.format})),O=d+"-"+(A+1);T&&(S.baseTexture.ktxKeyValueData=T),BaseTexture.addToCache(S.baseTexture,O),Texture.addToCache(S,O),A===0&&(C[d]=S,BaseTexture.addToCache(S.baseTexture,d),Texture.addToCache(S,d)),C[O]=S}),Object.assign(a,{textures:C})}}catch(w){l(w);return}l()},s.extension=ExtensionType.Loader,s.loadKeyValueData=!1,s}();/*!
 * @pixi/particle-container - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$f=function(s,a){return extendStatics$f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$f(s,a)};function __extends$f(s,a){extendStatics$f(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var ParticleContainer=function(s){__extends$f(a,s);function a(l,d,v,m){l===void 0&&(l=1500),v===void 0&&(v=16384),m===void 0&&(m=!1);var g=s.call(this)||this,T=16384;return v>T&&(v=T),g._properties=[!1,!0,!1,!1,!1],g._maxSize=l,g._batchSize=v,g._buffers=null,g._bufferUpdateIDs=[],g._updateID=0,g.interactiveChildren=!1,g.blendMode=BLEND_MODES$5.NORMAL,g.autoResize=m,g.roundPixels=!0,g.baseTexture=null,g.setProperties(d),g._tint=0,g.tintRgb=new Float32Array(4),g.tint=16777215,g}return a.prototype.setProperties=function(l){l&&(this._properties[0]="vertices"in l||"scale"in l?!!l.vertices||!!l.scale:this._properties[0],this._properties[1]="position"in l?!!l.position:this._properties[1],this._properties[2]="rotation"in l?!!l.rotation:this._properties[2],this._properties[3]="uvs"in l?!!l.uvs:this._properties[3],this._properties[4]="tint"in l||"alpha"in l?!!l.tint||!!l.alpha:this._properties[4])},a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l,hex2rgb(l,this.tintRgb)},enumerable:!1,configurable:!0}),a.prototype.render=function(l){var d=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return d.onChildrenChange(0)})),l.batch.setObjectRenderer(l.plugins.particle),l.plugins.particle.render(this))},a.prototype.onChildrenChange=function(l){for(var d=Math.floor(l/this._batchSize);this._bufferUpdateIDs.length<d;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[d]=++this._updateID},a.prototype.dispose=function(){if(this._buffers){for(var l=0;l<this._buffers.length;++l)this._buffers[l].destroy();this._buffers=null}},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},a}(Container),ParticleBuffer=function(){function s(a,l,d){this.geometry=new Geometry,this.indexBuffer=null,this.size=d,this.dynamicProperties=[],this.staticProperties=[];for(var v=0;v<a.length;++v){var m=a[v];m={attributeName:m.attributeName,size:m.size,uploadFunction:m.uploadFunction,type:m.type||TYPES$5.FLOAT,offset:m.offset},l[v]?this.dynamicProperties.push(m):this.staticProperties.push(m)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return s.prototype.initBuffers=function(){var a=this.geometry,l=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),a.addIndex(this.indexBuffer),this.dynamicStride=0;for(var d=0;d<this.dynamicProperties.length;++d){var v=this.dynamicProperties[d];v.offset=l,l+=v.size,this.dynamicStride+=v.size}var m=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(m),this.dynamicDataUint32=new Uint32Array(m),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);var g=0;this.staticStride=0;for(var d=0;d<this.staticProperties.length;++d){var v=this.staticProperties[d];v.offset=g,g+=v.size,this.staticStride+=v.size}var T=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(T),this.staticDataUint32=new Uint32Array(T),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(var d=0;d<this.dynamicProperties.length;++d){var v=this.dynamicProperties[d];a.addAttribute(v.attributeName,this.dynamicBuffer,0,v.type===TYPES$5.UNSIGNED_BYTE,v.type,this.dynamicStride*4,v.offset*4)}for(var d=0;d<this.staticProperties.length;++d){var v=this.staticProperties[d];a.addAttribute(v.attributeName,this.staticBuffer,0,v.type===TYPES$5.UNSIGNED_BYTE,v.type,this.staticStride*4,v.offset*4)}},s.prototype.uploadDynamic=function(a,l,d){for(var v=0;v<this.dynamicProperties.length;v++){var m=this.dynamicProperties[v];m.uploadFunction(a,l,d,m.type===TYPES$5.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,m.offset)}this.dynamicBuffer._updateID++},s.prototype.uploadStatic=function(a,l,d){for(var v=0;v<this.staticProperties.length;v++){var m=this.staticProperties[v];m.uploadFunction(a,l,d,m.type===TYPES$5.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,m.offset)}this.staticBuffer._updateID++},s.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},s}(),fragment$6=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,ParticleRenderer=function(s){__extends$f(a,s);function a(l){var d=s.call(this,l)||this;return d.shader=null,d.properties=null,d.tempMatrix=new Matrix,d.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:d.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:d.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:d.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:d.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES$5.UNSIGNED_BYTE,uploadFunction:d.uploadTint,offset:0}],d.shader=Shader.from(vertex$3,fragment$6,{}),d.state=State$1.for2d(),d}return a.prototype.render=function(l){var d=l.children,v=l._maxSize,m=l._batchSize,g=this.renderer,T=d.length;if(T!==0){T>v&&!l.autoResize&&(T=v);var b=l._buffers;b||(b=l._buffers=this.generateBuffers(l));var R=d[0]._texture.baseTexture,C=R.alphaMode>0;this.state.blendMode=correctBlendMode(l.blendMode,C),g.state.set(this.state);var w=g.gl,A=l.worldTransform.copyTo(this.tempMatrix);A.prepend(g.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=A.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(l.tintRgb,l.worldAlpha,this.shader.uniforms.uColor,C),this.shader.uniforms.uSampler=R,this.renderer.shader.bind(this.shader);for(var S=!1,O=0,L=0;O<T;O+=m,L+=1){var N=T-O;N>m&&(N=m),L>=b.length&&b.push(this._generateOneMoreBuffer(l));var U=b[L];U.uploadDynamic(d,O,N);var $=l._bufferUpdateIDs[L]||0;S=S||U._updateID<$,S&&(U._updateID=l._updateID,U.uploadStatic(d,O,N)),g.geometry.bind(U.geometry),w.drawElements(w.TRIANGLES,N*6,w.UNSIGNED_SHORT,0)}}},a.prototype.generateBuffers=function(l){for(var d=[],v=l._maxSize,m=l._batchSize,g=l._properties,T=0;T<v;T+=m)d.push(new ParticleBuffer(this.properties,g,m));return d},a.prototype._generateOneMoreBuffer=function(l){var d=l._batchSize,v=l._properties;return new ParticleBuffer(this.properties,v,d)},a.prototype.uploadVertices=function(l,d,v,m,g,T){for(var b=0,R=0,C=0,w=0,A=0;A<v;++A){var S=l[d+A],O=S._texture,L=S.scale.x,N=S.scale.y,U=O.trim,$=O.orig;U?(R=U.x-S.anchor.x*$.width,b=R+U.width,w=U.y-S.anchor.y*$.height,C=w+U.height):(b=$.width*(1-S.anchor.x),R=$.width*-S.anchor.x,C=$.height*(1-S.anchor.y),w=$.height*-S.anchor.y),m[T]=R*L,m[T+1]=w*N,m[T+g]=b*L,m[T+g+1]=w*N,m[T+g*2]=b*L,m[T+g*2+1]=C*N,m[T+g*3]=R*L,m[T+g*3+1]=C*N,T+=g*4}},a.prototype.uploadPosition=function(l,d,v,m,g,T){for(var b=0;b<v;b++){var R=l[d+b].position;m[T]=R.x,m[T+1]=R.y,m[T+g]=R.x,m[T+g+1]=R.y,m[T+g*2]=R.x,m[T+g*2+1]=R.y,m[T+g*3]=R.x,m[T+g*3+1]=R.y,T+=g*4}},a.prototype.uploadRotation=function(l,d,v,m,g,T){for(var b=0;b<v;b++){var R=l[d+b].rotation;m[T]=R,m[T+g]=R,m[T+g*2]=R,m[T+g*3]=R,T+=g*4}},a.prototype.uploadUvs=function(l,d,v,m,g,T){for(var b=0;b<v;++b){var R=l[d+b]._texture._uvs;R?(m[T]=R.x0,m[T+1]=R.y0,m[T+g]=R.x1,m[T+g+1]=R.y1,m[T+g*2]=R.x2,m[T+g*2+1]=R.y2,m[T+g*3]=R.x3,m[T+g*3+1]=R.y3,T+=g*4):(m[T]=0,m[T+1]=0,m[T+g]=0,m[T+g+1]=0,m[T+g*2]=0,m[T+g*2+1]=0,m[T+g*3]=0,m[T+g*3+1]=0,T+=g*4)}},a.prototype.uploadTint=function(l,d,v,m,g,T){for(var b=0;b<v;++b){var R=l[d+b],C=R._texture.baseTexture.alphaMode>0,w=R.alpha,A=w<1&&C?premultiplyTint(R._tintRGB,w):R._tintRGB+(w*255<<24);m[T]=A,m[T+g]=A,m[T+g*2]=A,m[T+g*3]=A,T+=g*4}},a.prototype.destroy=function(){s.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},a.extension={name:"particle",type:ExtensionType.RendererPlugin},a}(ObjectRenderer);/*!
 * @pixi/graphics - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var LINE_JOIN;(function(s){s.MITER="miter",s.BEVEL="bevel",s.ROUND="round"})(LINE_JOIN||(LINE_JOIN={}));var LINE_CAP;(function(s){s.BUTT="butt",s.ROUND="round",s.SQUARE="square"})(LINE_CAP||(LINE_CAP={}));var GRAPHICS_CURVES={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(s,a){if(a===void 0&&(a=20),!this.adaptive||!s||isNaN(s))return a;var l=Math.ceil(s/this.maxLength);return l<this.minSegments?l=this.minSegments:l>this.maxSegments&&(l=this.maxSegments),l}},FillStyle=function(){function s(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}return s.prototype.clone=function(){var a=new s;return a.color=this.color,a.alpha=this.alpha,a.texture=this.texture,a.matrix=this.matrix,a.visible=this.visible,a},s.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1},s.prototype.destroy=function(){this.texture=null,this.matrix=null},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$e=function(s,a){return extendStatics$e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$e(s,a)};function __extends$e(s,a){extendStatics$e(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}function fixOrientation(s,a){var l,d;a===void 0&&(a=!1);var v=s.length;if(!(v<6)){for(var m=0,g=0,T=s[v-2],b=s[v-1];g<v;g+=2){var R=s[g],C=s[g+1];m+=(R-T)*(C+b),T=R,b=C}if(!a&&m>0||a&&m<=0)for(var w=v/2,g=w+w%2;g<v;g+=2){var A=v-g-2,S=v-g-1,O=g,L=g+1;l=[s[O],s[A]],s[A]=l[0],s[O]=l[1],d=[s[L],s[S]],s[S]=d[0],s[L]=d[1]}}}var buildPoly={build:function(s){s.points=s.shape.points.slice()},triangulate:function(s,a){var l=s.points,d=s.holes,v=a.points,m=a.indices;if(l.length>=6){fixOrientation(l,!1);for(var g=[],T=0;T<d.length;T++){var b=d[T];fixOrientation(b.points,!0),g.push(l.length/2),l=l.concat(b.points)}var R=earcut$1.exports(l,g,2);if(!R)return;for(var C=v.length/2,T=0;T<R.length;T+=3)m.push(R[T]+C),m.push(R[T+1]+C),m.push(R[T+2]+C);for(var T=0;T<l.length;T++)v.push(l[T])}}},buildCircle={build:function(s){var a=s.points,l,d,v,m,g,T;if(s.type===SHAPES.CIRC){var b=s.shape;l=b.x,d=b.y,g=T=b.radius,v=m=0}else if(s.type===SHAPES.ELIP){var R=s.shape;l=R.x,d=R.y,g=R.width,T=R.height,v=m=0}else{var C=s.shape,w=C.width/2,A=C.height/2;l=C.x+w,d=C.y+A,g=T=Math.max(0,Math.min(C.radius,Math.min(w,A))),v=w-g,m=A-T}if(!(g>=0&&T>=0&&v>=0&&m>=0)){a.length=0;return}var S=Math.ceil(2.3*Math.sqrt(g+T)),O=S*8+(v?4:0)+(m?4:0);if(a.length=O,O!==0){if(S===0){a.length=8,a[0]=a[6]=l+v,a[1]=a[3]=d+m,a[2]=a[4]=l-v,a[5]=a[7]=d-m;return}var L=0,N=S*4+(v?2:0)+2,U=N,$=O;{var G=v+g,z=m,V=l+G,X=l-G,ie=d+z;if(a[L++]=V,a[L++]=ie,a[--N]=ie,a[--N]=X,m){var re=d-z;a[U++]=X,a[U++]=re,a[--$]=re,a[--$]=V}}for(var J=1;J<S;J++){var se=Math.PI/2*(J/S),G=v+Math.cos(se)*g,z=m+Math.sin(se)*T,V=l+G,X=l-G,ie=d+z,re=d-z;a[L++]=V,a[L++]=ie,a[--N]=ie,a[--N]=X,a[U++]=X,a[U++]=re,a[--$]=re,a[--$]=V}{var G=v,z=m+T,V=l+G,X=l-G,ie=d+z,re=d-z;a[L++]=V,a[L++]=ie,a[--$]=re,a[--$]=V,v&&(a[L++]=X,a[L++]=ie,a[--$]=re,a[--$]=X)}}},triangulate:function(s,a){var l=s.points,d=a.points,v=a.indices;if(l.length!==0){var m=d.length/2,g=m,T,b;if(s.type!==SHAPES.RREC){var R=s.shape;T=R.x,b=R.y}else{var C=s.shape;T=C.x+C.width/2,b=C.y+C.height/2}var w=s.matrix;d.push(s.matrix?w.a*T+w.c*b+w.tx:T,s.matrix?w.b*T+w.d*b+w.ty:b),m++,d.push(l[0],l[1]);for(var A=2;A<l.length;A+=2)d.push(l[A],l[A+1]),v.push(m++,g,m);v.push(g+1,g,m)}}},buildRectangle={build:function(s){var a=s.shape,l=a.x,d=a.y,v=a.width,m=a.height,g=s.points;g.length=0,g.push(l,d,l+v,d,l+v,d+m,l,d+m)},triangulate:function(s,a){var l=s.points,d=a.points,v=d.length/2;d.push(l[0],l[1],l[2],l[3],l[6],l[7],l[4],l[5]),a.indices.push(v,v+1,v+2,v+1,v+2,v+3)}};function getPt(s,a,l){var d=a-s;return s+d*l}function quadraticBezierCurve(s,a,l,d,v,m,g){g===void 0&&(g=[]);for(var T=20,b=g,R=0,C=0,w=0,A=0,S=0,O=0,L=0,N=0;L<=T;++L)N=L/T,R=getPt(s,l,N),C=getPt(a,d,N),w=getPt(l,v,N),A=getPt(d,m,N),S=getPt(R,w,N),O=getPt(C,A,N),!(L===0&&b[b.length-2]===S&&b[b.length-1]===O)&&b.push(S,O);return b}var buildRoundedRectangle={build:function(s){if(Graphics.nextRoundedRectBehavior){buildCircle.build(s);return}var a=s.shape,l=s.points,d=a.x,v=a.y,m=a.width,g=a.height,T=Math.max(0,Math.min(a.radius,Math.min(m,g)/2));l.length=0,T?(quadraticBezierCurve(d,v+T,d,v,d+T,v,l),quadraticBezierCurve(d+m-T,v,d+m,v,d+m,v+T,l),quadraticBezierCurve(d+m,v+g-T,d+m,v+g,d+m-T,v+g,l),quadraticBezierCurve(d+T,v+g,d,v+g,d,v+g-T,l)):l.push(d,v,d+m,v,d+m,v+g,d,v+g)},triangulate:function(s,a){if(Graphics.nextRoundedRectBehavior){buildCircle.triangulate(s,a);return}for(var l=s.points,d=a.points,v=a.indices,m=d.length/2,g=earcut$1.exports(l,null,2),T=0,b=g.length;T<b;T+=3)v.push(g[T]+m),v.push(g[T+1]+m),v.push(g[T+2]+m);for(var T=0,b=l.length;T<b;T++)d.push(l[T],l[++T])}};function square(s,a,l,d,v,m,g,T){var b=s-l*v,R=a-d*v,C=s+l*m,w=a+d*m,A,S;g?(A=d,S=-l):(A=-d,S=l);var O=b+A,L=R+S,N=C+A,U=w+S;return T.push(O,L),T.push(N,U),2}function round(s,a,l,d,v,m,g,T){var b=l-s,R=d-a,C=Math.atan2(b,R),w=Math.atan2(v-s,m-a);T&&C<w?C+=Math.PI*2:!T&&C>w&&(w+=Math.PI*2);var A=C,S=w-C,O=Math.abs(S),L=Math.sqrt(b*b+R*R),N=(15*O*Math.sqrt(L)/Math.PI>>0)+1,U=S/N;if(A+=U,T){g.push(s,a),g.push(l,d);for(var $=1,G=A;$<N;$++,G+=U)g.push(s,a),g.push(s+Math.sin(G)*L,a+Math.cos(G)*L);g.push(s,a),g.push(v,m)}else{g.push(l,d),g.push(s,a);for(var $=1,G=A;$<N;$++,G+=U)g.push(s+Math.sin(G)*L,a+Math.cos(G)*L),g.push(s,a);g.push(v,m),g.push(s,a)}return N*2}function buildNonNativeLine(s,a){var l=s.shape,d=s.points||l.points.slice(),v=a.closePointEps;if(d.length!==0){var m=s.lineStyle,g=new Point(d[0],d[1]),T=new Point(d[d.length-2],d[d.length-1]),b=l.type!==SHAPES.POLY||l.closeStroke,R=Math.abs(g.x-T.x)<v&&Math.abs(g.y-T.y)<v;if(b){d=d.slice(),R&&(d.pop(),d.pop(),T.set(d[d.length-2],d[d.length-1]));var C=(g.x+T.x)*.5,w=(T.y+g.y)*.5;d.unshift(C,w),d.push(C,w)}var A=a.points,S=d.length/2,O=d.length,L=A.length/2,N=m.width/2,U=N*N,$=m.miterLimit*m.miterLimit,G=d[0],z=d[1],V=d[2],X=d[3],ie=0,re=0,J=-(z-X),se=G-V,xe=0,Ae=0,Ue=Math.sqrt(J*J+se*se);J/=Ue,se/=Ue,J*=N,se*=N;var ze=m.alignment,Ce=(1-ze)*2,ye=ze*2;b||(m.cap===LINE_CAP.ROUND?O+=round(G-J*(Ce-ye)*.5,z-se*(Ce-ye)*.5,G-J*Ce,z-se*Ce,G+J*ye,z+se*ye,A,!0)+2:m.cap===LINE_CAP.SQUARE&&(O+=square(G,z,J,se,Ce,ye,!0,A))),A.push(G-J*Ce,z-se*Ce),A.push(G+J*ye,z+se*ye);for(var Re=1;Re<S-1;++Re){G=d[(Re-1)*2],z=d[(Re-1)*2+1],V=d[Re*2],X=d[Re*2+1],ie=d[(Re+1)*2],re=d[(Re+1)*2+1],J=-(z-X),se=G-V,Ue=Math.sqrt(J*J+se*se),J/=Ue,se/=Ue,J*=N,se*=N,xe=-(X-re),Ae=V-ie,Ue=Math.sqrt(xe*xe+Ae*Ae),xe/=Ue,Ae/=Ue,xe*=N,Ae*=N;var Fe=V-G,He=z-X,q=V-ie,oe=re-X,Te=He*q-oe*Fe,we=Te<0;if(Math.abs(Te)<.1){A.push(V-J*Ce,X-se*Ce),A.push(V+J*ye,X+se*ye);continue}var De=(-J+G)*(-se+X)-(-J+V)*(-se+z),Z=(-xe+ie)*(-Ae+X)-(-xe+V)*(-Ae+re),he=(Fe*Z-q*De)/Te,ue=(oe*De-He*Z)/Te,pe=(he-V)*(he-V)+(ue-X)*(ue-X),Pe=V+(he-V)*Ce,Me=X+(ue-X)*Ce,ge=V-(he-V)*ye,Ee=X-(ue-X)*ye,D=Math.min(Fe*Fe+He*He,q*q+oe*oe),H=we?Ce:ye,K=D+H*H*U,Q=pe<=K;Q?m.join===LINE_JOIN.BEVEL||pe/U>$?(we?(A.push(Pe,Me),A.push(V+J*ye,X+se*ye),A.push(Pe,Me),A.push(V+xe*ye,X+Ae*ye)):(A.push(V-J*Ce,X-se*Ce),A.push(ge,Ee),A.push(V-xe*Ce,X-Ae*Ce),A.push(ge,Ee)),O+=2):m.join===LINE_JOIN.ROUND?we?(A.push(Pe,Me),A.push(V+J*ye,X+se*ye),O+=round(V,X,V+J*ye,X+se*ye,V+xe*ye,X+Ae*ye,A,!0)+4,A.push(Pe,Me),A.push(V+xe*ye,X+Ae*ye)):(A.push(V-J*Ce,X-se*Ce),A.push(ge,Ee),O+=round(V,X,V-J*Ce,X-se*Ce,V-xe*Ce,X-Ae*Ce,A,!1)+4,A.push(V-xe*Ce,X-Ae*Ce),A.push(ge,Ee)):(A.push(Pe,Me),A.push(ge,Ee)):(A.push(V-J*Ce,X-se*Ce),A.push(V+J*ye,X+se*ye),m.join===LINE_JOIN.ROUND?we?O+=round(V,X,V+J*ye,X+se*ye,V+xe*ye,X+Ae*ye,A,!0)+2:O+=round(V,X,V-J*Ce,X-se*Ce,V-xe*Ce,X-Ae*Ce,A,!1)+2:m.join===LINE_JOIN.MITER&&pe/U<=$&&(we?(A.push(ge,Ee),A.push(ge,Ee)):(A.push(Pe,Me),A.push(Pe,Me)),O+=2),A.push(V-xe*Ce,X-Ae*Ce),A.push(V+xe*ye,X+Ae*ye),O+=2)}G=d[(S-2)*2],z=d[(S-2)*2+1],V=d[(S-1)*2],X=d[(S-1)*2+1],J=-(z-X),se=G-V,Ue=Math.sqrt(J*J+se*se),J/=Ue,se/=Ue,J*=N,se*=N,A.push(V-J*Ce,X-se*Ce),A.push(V+J*ye,X+se*ye),b||(m.cap===LINE_CAP.ROUND?O+=round(V-J*(Ce-ye)*.5,X-se*(Ce-ye)*.5,V-J*Ce,X-se*Ce,V+J*ye,X+se*ye,A,!1)+2:m.cap===LINE_CAP.SQUARE&&(O+=square(V,X,J,se,Ce,ye,!1,A)));for(var ne=a.indices,me=GRAPHICS_CURVES.epsilon*GRAPHICS_CURVES.epsilon,Re=L;Re<O+L-2;++Re)G=A[Re*2],z=A[Re*2+1],V=A[(Re+1)*2],X=A[(Re+1)*2+1],ie=A[(Re+2)*2],re=A[(Re+2)*2+1],!(Math.abs(G*(X-re)+V*(re-z)+ie*(z-X))<me)&&ne.push(Re,Re+1,Re+2)}}function buildNativeLine(s,a){var l=0,d=s.shape,v=s.points||d.points,m=d.type!==SHAPES.POLY||d.closeStroke;if(v.length!==0){var g=a.points,T=a.indices,b=v.length/2,R=g.length/2,C=R;for(g.push(v[0],v[1]),l=1;l<b;l++)g.push(v[l*2],v[l*2+1]),T.push(C,C+1),C++;m&&T.push(C,R)}}function buildLine(s,a){s.lineStyle.native?buildNativeLine(s,a):buildNonNativeLine(s,a)}var ArcUtils=function(){function s(){}return s.curveTo=function(a,l,d,v,m,g){var T=g[g.length-2],b=g[g.length-1],R=b-l,C=T-a,w=v-l,A=d-a,S=Math.abs(R*A-C*w);if(S<1e-8||m===0)return(g[g.length-2]!==a||g[g.length-1]!==l)&&g.push(a,l),null;var O=R*R+C*C,L=w*w+A*A,N=R*w+C*A,U=m*Math.sqrt(O)/S,$=m*Math.sqrt(L)/S,G=U*N/O,z=$*N/L,V=U*A+$*C,X=U*w+$*R,ie=C*($+G),re=R*($+G),J=A*(U+z),se=w*(U+z),xe=Math.atan2(re-X,ie-V),Ae=Math.atan2(se-X,J-V);return{cx:V+a,cy:X+l,radius:m,startAngle:xe,endAngle:Ae,anticlockwise:C*w>A*R}},s.arc=function(a,l,d,v,m,g,T,b,R){for(var C=T-g,w=GRAPHICS_CURVES._segmentsCount(Math.abs(C)*m,Math.ceil(Math.abs(C)/PI_2)*40),A=C/(w*2),S=A*2,O=Math.cos(A),L=Math.sin(A),N=w-1,U=N%1/N,$=0;$<=N;++$){var G=$+U*$,z=A+g+S*G,V=Math.cos(z),X=-Math.sin(z);R.push((O*V+L*X)*m+d,(O*-X+L*V)*m+v)}},s}(),BezierUtils=function(){function s(){}return s.curveLength=function(a,l,d,v,m,g,T,b){for(var R=10,C=0,w=0,A=0,S=0,O=0,L=0,N=0,U=0,$=0,G=0,z=0,V=a,X=l,ie=1;ie<=R;++ie)w=ie/R,A=w*w,S=A*w,O=1-w,L=O*O,N=L*O,U=N*a+3*L*w*d+3*O*A*m+S*T,$=N*l+3*L*w*v+3*O*A*g+S*b,G=V-U,z=X-$,V=U,X=$,C+=Math.sqrt(G*G+z*z);return C},s.curveTo=function(a,l,d,v,m,g,T){var b=T[T.length-2],R=T[T.length-1];T.length-=2;var C=GRAPHICS_CURVES._segmentsCount(s.curveLength(b,R,a,l,d,v,m,g)),w=0,A=0,S=0,O=0,L=0;T.push(b,R);for(var N=1,U=0;N<=C;++N)U=N/C,w=1-U,A=w*w,S=A*w,O=U*U,L=O*U,T.push(S*b+3*A*U*a+3*w*O*d+L*m,S*R+3*A*U*l+3*w*O*v+L*g)},s}(),QuadraticUtils=function(){function s(){}return s.curveLength=function(a,l,d,v,m,g){var T=a-2*d+m,b=l-2*v+g,R=2*d-2*a,C=2*v-2*l,w=4*(T*T+b*b),A=4*(T*R+b*C),S=R*R+C*C,O=2*Math.sqrt(w+A+S),L=Math.sqrt(w),N=2*w*L,U=2*Math.sqrt(S),$=A/L;return(N*O+L*A*(O-U)+(4*S*w-A*A)*Math.log((2*L+$+O)/($+U)))/(4*N)},s.curveTo=function(a,l,d,v,m){for(var g=m[m.length-2],T=m[m.length-1],b=GRAPHICS_CURVES._segmentsCount(s.curveLength(g,T,a,l,d,v)),R=0,C=0,w=1;w<=b;++w){var A=w/b;R=g+(a-g)*A,C=T+(l-T)*A,m.push(R+(a+(d-a)*A-R)*A,C+(l+(v-l)*A-C)*A)}},s}(),BatchPart=function(){function s(){this.reset()}return s.prototype.begin=function(a,l,d){this.reset(),this.style=a,this.start=l,this.attribStart=d},s.prototype.end=function(a,l){this.attribSize=l-this.attribStart,this.size=a-this.start},s.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},s}(),_a,FILL_COMMANDS=(_a={},_a[SHAPES.POLY]=buildPoly,_a[SHAPES.CIRC]=buildCircle,_a[SHAPES.ELIP]=buildCircle,_a[SHAPES.RECT]=buildRectangle,_a[SHAPES.RREC]=buildRoundedRectangle,_a),BATCH_POOL=[],DRAW_CALL_POOL=[],GraphicsData=function(){function s(a,l,d,v){l===void 0&&(l=null),d===void 0&&(d=null),v===void 0&&(v=null),this.points=[],this.holes=[],this.shape=a,this.lineStyle=d,this.fillStyle=l,this.matrix=v,this.type=a.type}return s.prototype.clone=function(){return new s(this.shape,this.fillStyle,this.lineStyle,this.matrix)},s.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},s}(),tmpPoint=new Point,GraphicsGeometry=function(s){__extends$e(a,s);function a(){var l=s.call(this)||this;return l.closePointEps=1e-4,l.boundsPadding=0,l.uvsFloat32=null,l.indicesUint16=null,l.batchable=!1,l.points=[],l.colors=[],l.uvs=[],l.indices=[],l.textureIds=[],l.graphicsData=[],l.drawCalls=[],l.batchDirty=-1,l.batches=[],l.dirty=0,l.cacheDirty=-1,l.clearDirty=0,l.shapeIndex=0,l._bounds=new Bounds$1,l.boundsDirty=-1,l}return Object.defineProperty(a.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),a.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var l=0;l<this.drawCalls.length;l++)this.drawCalls[l].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[l]);this.drawCalls.length=0;for(var l=0;l<this.batches.length;l++){var d=this.batches[l];d.reset(),BATCH_POOL.push(d)}this.batches.length=0},a.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},a.prototype.drawShape=function(l,d,v,m){d===void 0&&(d=null),v===void 0&&(v=null),m===void 0&&(m=null);var g=new GraphicsData(l,d,v,m);return this.graphicsData.push(g),this.dirty++,this},a.prototype.drawHole=function(l,d){if(d===void 0&&(d=null),!this.graphicsData.length)return null;var v=new GraphicsData(l,null,null,d),m=this.graphicsData[this.graphicsData.length-1];return v.lineStyle=m.lineStyle,m.holes.push(v),this.dirty++,this},a.prototype.destroy=function(){s.prototype.destroy.call(this);for(var l=0;l<this.graphicsData.length;++l)this.graphicsData[l].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},a.prototype.containsPoint=function(l){for(var d=this.graphicsData,v=0;v<d.length;++v){var m=d[v];if(!!m.fillStyle.visible&&m.shape&&(m.matrix?m.matrix.applyInverse(l,tmpPoint):tmpPoint.copyFrom(l),m.shape.contains(tmpPoint.x,tmpPoint.y))){var g=!1;if(m.holes)for(var T=0;T<m.holes.length;T++){var b=m.holes[T];if(b.shape.contains(tmpPoint.x,tmpPoint.y)){g=!0;break}}if(!g)return!0}}return!1},a.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var l=this.uvs,d=this.graphicsData,v=null,m=null;this.batches.length>0&&(v=this.batches[this.batches.length-1],m=v.style);for(var g=this.shapeIndex;g<d.length;g++){this.shapeIndex++;var T=d[g],b=T.fillStyle,R=T.lineStyle,C=FILL_COMMANDS[T.type];C.build(T),T.matrix&&this.transformPoints(T.points,T.matrix),(b.visible||R.visible)&&this.processHoles(T.holes);for(var w=0;w<2;w++){var A=w===0?b:R;if(!!A.visible){var S=A.texture.baseTexture,O=this.indices.length,L=this.points.length/2;S.wrapMode=WRAP_MODES$5.REPEAT,w===0?this.processFill(T):this.processLine(T);var N=this.points.length/2-L;N!==0&&(v&&!this._compareStyles(m,A)&&(v.end(O,L),v=null),v||(v=BATCH_POOL.pop()||new BatchPart,v.begin(A,O,L),this.batches.push(v),m=A),this.addUvs(this.points,l,A.texture,L,N,A.matrix))}}}var U=this.indices.length,$=this.points.length/2;if(v&&v.end(U,$),this.batches.length===0){this.batchable=!0;return}var G=$>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&G===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=G?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},a.prototype._compareStyles=function(l,d){return!(!l||!d||l.texture.baseTexture!==d.texture.baseTexture||l.color+l.alpha!==d.color+d.alpha||!!l.native!=!!d.native)},a.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var l=0,d=this.graphicsData.length;l<d;l++){var v=this.graphicsData[l],m=v.fillStyle,g=v.lineStyle;if(m&&!m.texture.baseTexture.valid||g&&!g.texture.baseTexture.valid)return!1}return!0},a.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var l=this.batches,d=0,v=l.length;d<v;d++)for(var m=l[d],g=0;g<m.size;g++){var T=m.start+g;this.indicesUint16[T]=this.indicesUint16[T]-m.attribStart}},a.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var l=this.batches,d=0;d<l.length;d++)if(l[d].style.native)return!1;return this.points.length<a.BATCHABLE_SIZE*2},a.prototype.buildDrawCalls=function(){for(var l=++BaseTexture._globalBatch,d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[d]);this.drawCalls.length=0;var v=this.colors,m=this.textureIds,g=DRAW_CALL_POOL.pop();g||(g=new BatchDrawCall,g.texArray=new BatchTextureArray),g.texArray.count=0,g.start=0,g.size=0,g.type=DRAW_MODES$5.TRIANGLES;var T=0,b=null,R=0,C=!1,w=DRAW_MODES$5.TRIANGLES,A=0;this.drawCalls.push(g);for(var d=0;d<this.batches.length;d++){var S=this.batches[d],O=8,L=S.style,N=L.texture.baseTexture;C!==!!L.native&&(C=!!L.native,w=C?DRAW_MODES$5.LINES:DRAW_MODES$5.TRIANGLES,b=null,T=O,l++),b!==N&&(b=N,N._batchEnabled!==l&&(T===O&&(l++,T=0,g.size>0&&(g=DRAW_CALL_POOL.pop(),g||(g=new BatchDrawCall,g.texArray=new BatchTextureArray),this.drawCalls.push(g)),g.start=A,g.size=0,g.texArray.count=0,g.type=w),N.touched=1,N._batchEnabled=l,N._batchLocation=T,N.wrapMode=WRAP_MODES$5.REPEAT,g.texArray.elements[g.texArray.count++]=N,T++)),g.size+=S.size,A+=S.size,R=N._batchLocation,this.addColors(v,L.color,L.alpha,S.attribSize,S.attribStart),this.addTextureIds(m,R,S.attribSize,S.attribStart)}BaseTexture._globalBatch=l,this.packAttributes()},a.prototype.packAttributes=function(){for(var l=this.points,d=this.uvs,v=this.colors,m=this.textureIds,g=new ArrayBuffer(l.length*3*4),T=new Float32Array(g),b=new Uint32Array(g),R=0,C=0;C<l.length/2;C++)T[R++]=l[C*2],T[R++]=l[C*2+1],T[R++]=d[C*2],T[R++]=d[C*2+1],b[R++]=v[C],T[R++]=m[C];this._buffer.update(g),this._indexBuffer.update(this.indicesUint16)},a.prototype.processFill=function(l){if(l.holes.length)buildPoly.triangulate(l,this);else{var d=FILL_COMMANDS[l.type];d.triangulate(l,this)}},a.prototype.processLine=function(l){buildLine(l,this);for(var d=0;d<l.holes.length;d++)buildLine(l.holes[d],this)},a.prototype.processHoles=function(l){for(var d=0;d<l.length;d++){var v=l[d],m=FILL_COMMANDS[v.type];m.build(v),v.matrix&&this.transformPoints(v.points,v.matrix)}},a.prototype.calculateBounds=function(){var l=this._bounds;l.clear(),l.addVertexData(this.points,0,this.points.length),l.pad(this.boundsPadding,this.boundsPadding)},a.prototype.transformPoints=function(l,d){for(var v=0;v<l.length/2;v++){var m=l[v*2],g=l[v*2+1];l[v*2]=d.a*m+d.c*g+d.tx,l[v*2+1]=d.b*m+d.d*g+d.ty}},a.prototype.addColors=function(l,d,v,m,g){g===void 0&&(g=0);var T=(d>>16)+(d&65280)+((d&255)<<16),b=premultiplyTint(T,v);l.length=Math.max(l.length,g+m);for(var R=0;R<m;R++)l[g+R]=b},a.prototype.addTextureIds=function(l,d,v,m){m===void 0&&(m=0),l.length=Math.max(l.length,m+v);for(var g=0;g<v;g++)l[m+g]=d},a.prototype.addUvs=function(l,d,v,m,g,T){T===void 0&&(T=null);for(var b=0,R=d.length,C=v.frame;b<g;){var w=l[(m+b)*2],A=l[(m+b)*2+1];if(T){var S=T.a*w+T.c*A+T.tx;A=T.b*w+T.d*A+T.ty,w=S}b++,d.push(w/C.width,A/C.height)}var O=v.baseTexture;(C.width<O.width||C.height<O.height)&&this.adjustUvs(d,v,R,g)},a.prototype.adjustUvs=function(l,d,v,m){for(var g=d.baseTexture,T=1e-6,b=v+m*2,R=d.frame,C=R.width/g.width,w=R.height/g.height,A=R.x/R.width,S=R.y/R.height,O=Math.floor(l[v]+T),L=Math.floor(l[v+1]+T),N=v+2;N<b;N+=2)O=Math.min(O,Math.floor(l[N]+T)),L=Math.min(L,Math.floor(l[N+1]+T));A-=O,S-=L;for(var N=v;N<b;N+=2)l[N]=(l[N]+A)*C,l[N+1]=(l[N+1]+S)*w},a.BATCHABLE_SIZE=100,a}(BatchGeometry),LineStyle=function(s){__extends$e(a,s);function a(){var l=s!==null&&s.apply(this,arguments)||this;return l.width=0,l.alignment=.5,l.native=!1,l.cap=LINE_CAP.BUTT,l.join=LINE_JOIN.MITER,l.miterLimit=10,l}return a.prototype.clone=function(){var l=new a;return l.color=this.color,l.alpha=this.alpha,l.texture=this.texture,l.matrix=this.matrix,l.visible=this.visible,l.width=this.width,l.alignment=this.alignment,l.native=this.native,l.cap=this.cap,l.join=this.join,l.miterLimit=this.miterLimit,l},a.prototype.reset=function(){s.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},a}(FillStyle),temp=new Float32Array(3),DEFAULT_SHADERS={},Graphics=function(s){__extends$e(a,s);function a(l){l===void 0&&(l=null);var d=s.call(this)||this;return d.shader=null,d.pluginName="batch",d.currentPath=null,d.batches=[],d.batchTint=-1,d.batchDirty=-1,d.vertexData=null,d._fillStyle=new FillStyle,d._lineStyle=new LineStyle,d._matrix=null,d._holeMode=!1,d.state=State$1.for2d(),d._geometry=l||new GraphicsGeometry,d._geometry.refCount++,d._transformID=-1,d.tint=16777215,d.blendMode=BLEND_MODES$5.NORMAL,d}return Object.defineProperty(a.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),a.prototype.clone=function(){return this.finishPoly(),new a(this._geometry)},Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),a.prototype.lineStyle=function(l,d,v,m,g){return l===void 0&&(l=null),d===void 0&&(d=0),v===void 0&&(v=1),m===void 0&&(m=.5),g===void 0&&(g=!1),typeof l=="number"&&(l={width:l,color:d,alpha:v,alignment:m,native:g}),this.lineTextureStyle(l)},a.prototype.lineTextureStyle=function(l){l=Object.assign({width:0,texture:Texture.WHITE,color:l&&l.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10},l),this.currentPath&&this.startPoly();var d=l.width>0&&l.alpha>0;return d?(l.matrix&&(l.matrix=l.matrix.clone(),l.matrix.invert()),Object.assign(this._lineStyle,{visible:d},l)):this._lineStyle.reset(),this},a.prototype.startPoly=function(){if(this.currentPath){var l=this.currentPath.points,d=this.currentPath.points.length;d>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(l[d-2],l[d-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1},a.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},a.prototype.moveTo=function(l,d){return this.startPoly(),this.currentPath.points[0]=l,this.currentPath.points[1]=d,this},a.prototype.lineTo=function(l,d){this.currentPath||this.moveTo(0,0);var v=this.currentPath.points,m=v[v.length-2],g=v[v.length-1];return(m!==l||g!==d)&&v.push(l,d),this},a.prototype._initCurve=function(l,d){l===void 0&&(l=0),d===void 0&&(d=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[l,d]):this.moveTo(l,d)},a.prototype.quadraticCurveTo=function(l,d,v,m){this._initCurve();var g=this.currentPath.points;return g.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(l,d,v,m,g),this},a.prototype.bezierCurveTo=function(l,d,v,m,g,T){return this._initCurve(),BezierUtils.curveTo(l,d,v,m,g,T,this.currentPath.points),this},a.prototype.arcTo=function(l,d,v,m,g){this._initCurve(l,d);var T=this.currentPath.points,b=ArcUtils.curveTo(l,d,v,m,g,T);if(b){var R=b.cx,C=b.cy,w=b.radius,A=b.startAngle,S=b.endAngle,O=b.anticlockwise;this.arc(R,C,w,A,S,O)}return this},a.prototype.arc=function(l,d,v,m,g,T){if(T===void 0&&(T=!1),m===g)return this;!T&&g<=m?g+=PI_2:T&&m<=g&&(m+=PI_2);var b=g-m;if(b===0)return this;var R=l+Math.cos(m)*v,C=d+Math.sin(m)*v,w=this._geometry.closePointEps,A=this.currentPath?this.currentPath.points:null;if(A){var S=Math.abs(A[A.length-2]-R),O=Math.abs(A[A.length-1]-C);S<w&&O<w||A.push(R,C)}else this.moveTo(R,C),A=this.currentPath.points;return ArcUtils.arc(R,C,l,d,v,m,g,T,A),this},a.prototype.beginFill=function(l,d){return l===void 0&&(l=0),d===void 0&&(d=1),this.beginTextureFill({texture:Texture.WHITE,color:l,alpha:d})},a.prototype.beginTextureFill=function(l){l=Object.assign({texture:Texture.WHITE,color:16777215,alpha:1,matrix:null},l),this.currentPath&&this.startPoly();var d=l.alpha>0;return d?(l.matrix&&(l.matrix=l.matrix.clone(),l.matrix.invert()),Object.assign(this._fillStyle,{visible:d},l)):this._fillStyle.reset(),this},a.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},a.prototype.drawRect=function(l,d,v,m){return this.drawShape(new Rectangle(l,d,v,m))},a.prototype.drawRoundedRect=function(l,d,v,m,g){return this.drawShape(new RoundedRectangle(l,d,v,m,g))},a.prototype.drawCircle=function(l,d,v){return this.drawShape(new Circle(l,d,v))},a.prototype.drawEllipse=function(l,d,v,m){return this.drawShape(new Ellipse(l,d,v,m))},a.prototype.drawPolygon=function(){for(var l=arguments,d=[],v=0;v<arguments.length;v++)d[v]=l[v];var m,g=!0,T=d[0];T.points?(g=T.closeStroke,m=T.points):Array.isArray(d[0])?m=d[0]:m=d;var b=new Polygon(m);return b.closeStroke=g,this.drawShape(b),this},a.prototype.drawShape=function(l){return this._holeMode?this._geometry.drawHole(l,this._matrix):this._geometry.drawShape(l,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},a.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},a.prototype.isFastRect=function(){var l=this._geometry.graphicsData;return l.length===1&&l[0].shape.type===SHAPES.RECT&&!l[0].matrix&&!l[0].holes.length&&!(l[0].lineStyle.visible&&l[0].lineStyle.width)},a.prototype._render=function(l){this.finishPoly();var d=this._geometry;d.updateBatches(),d.batchable?(this.batchDirty!==d.batchDirty&&this._populateBatches(),this._renderBatched(l)):(l.batch.flush(),this._renderDirect(l))},a.prototype._populateBatches=function(){var l=this._geometry,d=this.blendMode,v=l.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=l.batchDirty,this.batches.length=v,this.vertexData=new Float32Array(l.points);for(var m=0;m<v;m++){var g=l.batches[m],T=g.style.color,b=new Float32Array(this.vertexData.buffer,g.attribStart*4*2,g.attribSize*2),R=new Float32Array(l.uvsFloat32.buffer,g.attribStart*4*2,g.attribSize*2),C=new Uint16Array(l.indicesUint16.buffer,g.start*2,g.size),w={vertexData:b,blendMode:d,indices:C,uvs:R,_batchRGB:hex2rgb(T),_tintRGB:T,_texture:g.style.texture,alpha:g.style.alpha,worldAlpha:1};this.batches[m]=w}},a.prototype._renderBatched=function(l){if(!!this.batches.length){l.batch.setObjectRenderer(l.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var d=0,v=this.batches.length;d<v;d++){var m=this.batches[d];m.worldAlpha=this.worldAlpha*m.alpha,l.plugins[this.pluginName].render(m)}}},a.prototype._renderDirect=function(l){var d=this._resolveDirectShader(l),v=this._geometry,m=this.tint,g=this.worldAlpha,T=d.uniforms,b=v.drawCalls;T.translationMatrix=this.transform.worldTransform,T.tint[0]=(m>>16&255)/255*g,T.tint[1]=(m>>8&255)/255*g,T.tint[2]=(m&255)/255*g,T.tint[3]=g,l.shader.bind(d),l.geometry.bind(v,d),l.state.set(this.state);for(var R=0,C=b.length;R<C;R++)this._renderDrawCallDirect(l,v.drawCalls[R])},a.prototype._renderDrawCallDirect=function(l,d){for(var v=d.texArray,m=d.type,g=d.size,T=d.start,b=v.count,R=0;R<b;R++)l.texture.bind(v.elements[R],R);l.geometry.draw(m,g,T)},a.prototype._resolveDirectShader=function(l){var d=this.shader,v=this.pluginName;if(!d){if(!DEFAULT_SHADERS[v]){for(var m=l.plugins[v].MAX_TEXTURES,g=new Int32Array(m),T=0;T<m;T++)g[T]=T;var b={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:g},!0)},R=l.plugins[v]._shader.program;DEFAULT_SHADERS[v]=new Shader(R,b)}d=DEFAULT_SHADERS[v]}return d},a.prototype._calculateBounds=function(){this.finishPoly();var l=this._geometry;if(!!l.graphicsData.length){var d=l.bounds,v=d.minX,m=d.minY,g=d.maxX,T=d.maxY;this._bounds.addFrame(this.transform,v,m,g,T)}},a.prototype.containsPoint=function(l){return this.worldTransform.applyInverse(l,a._TEMP_POINT),this._geometry.containsPoint(a._TEMP_POINT)},a.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var l=hex2rgb(this.tint,temp),d=0;d<this.batches.length;d++){var v=this.batches[d],m=v._batchRGB,g=l[0]*m[0]*255,T=l[1]*m[1]*255,b=l[2]*m[2]*255,R=(g<<16)+(T<<8)+(b|0);v._tintRGB=(R>>16)+(R&65280)+((R&255)<<16)}}},a.prototype.calculateVertices=function(){var l=this.transform._worldID;if(this._transformID!==l){this._transformID=l;for(var d=this.transform.worldTransform,v=d.a,m=d.b,g=d.c,T=d.d,b=d.tx,R=d.ty,C=this._geometry.points,w=this.vertexData,A=0,S=0;S<C.length;S+=2){var O=C[S],L=C[S+1];w[A++]=v*O+g*L+b,w[A++]=T*L+m*O+R}}},a.prototype.closePath=function(){var l=this.currentPath;return l&&(l.closeStroke=!0,this.finishPoly()),this},a.prototype.setMatrix=function(l){return this._matrix=l,this},a.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},a.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},a.prototype.destroy=function(l){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,s.prototype.destroy.call(this,l)},a.nextRoundedRectBehavior=!1,a._TEMP_POINT=new Point,a}(Container),graphicsUtils={buildPoly,buildCircle,buildRectangle,buildRoundedRectangle,buildLine,ArcUtils,BezierUtils,QuadraticUtils,BatchPart,FILL_COMMANDS,BATCH_POOL,DRAW_CALL_POOL};/*!
 * @pixi/sprite - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$d=function(s,a){return extendStatics$d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$d(s,a)};function __extends$d(s,a){extendStatics$d(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]),Sprite=function(s){__extends$d(a,s);function a(l){var d=s.call(this)||this;return d._anchor=new ObservablePoint(d._onAnchorUpdate,d,l?l.defaultAnchor.x:0,l?l.defaultAnchor.y:0),d._texture=null,d._width=0,d._height=0,d._tint=null,d._tintRGB=null,d.tint=16777215,d.blendMode=BLEND_MODES$5.NORMAL,d._cachedTint=16777215,d.uvs=null,d.texture=l||Texture.EMPTY,d.vertexData=new Float32Array(8),d.vertexTrimmedData=null,d._transformID=-1,d._textureID=-1,d._transformTrimmedID=-1,d._textureTrimmedID=-1,d.indices=indices,d.pluginName="batch",d.isSprite=!0,d._roundPixels=settings$1.ROUND_PIXELS,d}return a.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)},a.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},a.prototype.calculateVertices=function(){var l=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===l._updateID)){this._textureID!==l._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=l._updateID;var d=this.transform.worldTransform,v=d.a,m=d.b,g=d.c,T=d.d,b=d.tx,R=d.ty,C=this.vertexData,w=l.trim,A=l.orig,S=this._anchor,O=0,L=0,N=0,U=0;if(w?(L=w.x-S._x*A.width,O=L+w.width,U=w.y-S._y*A.height,N=U+w.height):(L=-S._x*A.width,O=L+A.width,U=-S._y*A.height,N=U+A.height),C[0]=v*L+g*U+b,C[1]=T*U+m*L+R,C[2]=v*O+g*U+b,C[3]=T*U+m*O+R,C[4]=v*O+g*N+b,C[5]=T*N+m*O+R,C[6]=v*L+g*N+b,C[7]=T*N+m*L+R,this._roundPixels)for(var $=settings$1.RESOLUTION,G=0;G<C.length;++G)C[G]=Math.round((C[G]*$|0)/$)}},a.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var l=this._texture,d=this.vertexTrimmedData,v=l.orig,m=this._anchor,g=this.transform.worldTransform,T=g.a,b=g.b,R=g.c,C=g.d,w=g.tx,A=g.ty,S=-m._x*v.width,O=S+v.width,L=-m._y*v.height,N=L+v.height;d[0]=T*S+R*L+w,d[1]=C*L+b*S+A,d[2]=T*O+R*L+w,d[3]=C*L+b*O+A,d[4]=T*O+R*N+w,d[5]=C*N+b*O+A,d[6]=T*S+R*N+w,d[7]=C*N+b*S+A},a.prototype._render=function(l){this.calculateVertices(),l.batch.setObjectRenderer(l.plugins[this.pluginName]),l.plugins[this.pluginName].render(this)},a.prototype._calculateBounds=function(){var l=this._texture.trim,d=this._texture.orig;!l||l.width===d.width&&l.height===d.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},a.prototype.getLocalBounds=function(l){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds$1),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),l||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),l=this._localBoundsRect),this._localBounds.getRectangle(l)):s.prototype.getLocalBounds.call(this,l)},a.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,tempPoint$2);var d=this._texture.orig.width,v=this._texture.orig.height,m=-d*this.anchor.x,g=0;return tempPoint$2.x>=m&&tempPoint$2.x<m+d&&(g=-v*this.anchor.y,tempPoint$2.y>=g&&tempPoint$2.y<g+v)},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var d=typeof l=="boolean"?l:l&&l.texture;if(d){var v=typeof l=="boolean"?l:l&&l.baseTexture;this._texture.destroy(!!v)}this._texture=null},a.from=function(l,d){var v=l instanceof Texture?l:Texture.from(l,d);return new a(v)},Object.defineProperty(a.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){this._roundPixels!==l&&(this._transformID=-1),this._roundPixels=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(l){var d=sign(this.scale.x)||1;this.scale.x=d*l/this._texture.orig.width,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(l){var d=sign(this.scale.y)||1;this.scale.y=d*l/this._texture.orig.height,this._height=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"anchor",{get:function(){return this._anchor},set:function(l){this._anchor.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l,this._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"texture",{get:function(){return this._texture},set:function(l){this._texture!==l&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=l||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,l&&(l.baseTexture.valid?this._onTextureUpdate():l.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),a}(Container);/*!
 * @pixi/text - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$c=function(s,a){return extendStatics$c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$c(s,a)};function __extends$c(s,a){extendStatics$c(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var TEXT_GRADIENT;(function(s){s[s.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",s[s.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(TEXT_GRADIENT||(TEXT_GRADIENT={}));var defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],TextStyle=function(){function s(a){this.styleID=0,this.reset(),deepCopyProperties(this,a,a)}return s.prototype.clone=function(){var a={};return deepCopyProperties(a,this,defaultStyle),new s(a)},s.prototype.reset=function(){deepCopyProperties(this,defaultStyle,defaultStyle)},Object.defineProperty(s.prototype,"align",{get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"breakWords",{get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(a){this._dropShadowAlpha!==a&&(this._dropShadowAlpha=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(a){var l=getColor(a);this._dropShadowColor!==l&&(this._dropShadowColor=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fill",{get:function(){return this._fill},set:function(a){var l=getColor(a);this._fill!==l&&(this._fill=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(a){areArraysEqual(this._fillGradientStops,a)||(this._fillGradientStops=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontSize",{get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"leading",{get:function(){return this._leading},set:function(a){this._leading!==a&&(this._leading=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"padding",{get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stroke",{get:function(){return this._stroke},set:function(a){var l=getColor(a);this._stroke!==l&&(this._stroke=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"trim",{get:function(){return this._trim},set:function(a){this._trim!==a&&(this._trim=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(a){this._whiteSpace!==a&&(this._whiteSpace=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)},enumerable:!1,configurable:!0}),s.prototype.toFontString=function(){var a=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,l=this.fontFamily;Array.isArray(this.fontFamily)||(l=this.fontFamily.split(","));for(var d=l.length-1;d>=0;d--){var v=l[d].trim();!/([\"\'])[^\'\"]+\1/.test(v)&&genericFontFamilies.indexOf(v)<0&&(v='"'+v+'"'),l[d]=v}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+l.join(",")},s}();function getSingleColor(s){return typeof s=="number"?hex2string(s):(typeof s=="string"&&s.indexOf("0x")===0&&(s=s.replace("0x","#")),s)}function getColor(s){if(Array.isArray(s)){for(var a=0;a<s.length;++a)s[a]=getSingleColor(s[a]);return s}else return getSingleColor(s)}function areArraysEqual(s,a){if(!Array.isArray(s)||!Array.isArray(a)||s.length!==a.length)return!1;for(var l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}function deepCopyProperties(s,a,l){for(var d in l)Array.isArray(a[d])?s[d]=a[d].slice():s[d]=a[d]}var TextMetrics=function(){function s(a,l,d,v,m,g,T,b,R){this.text=a,this.style=l,this.width=d,this.height=v,this.lines=m,this.lineWidths=g,this.lineHeight=T,this.maxLineWidth=b,this.fontProperties=R}return s.measureText=function(a,l,d,v){v===void 0&&(v=s._canvas),d=d==null?l.wordWrap:d;var m=l.toFontString(),g=s.measureFont(m);g.fontSize===0&&(g.fontSize=l.fontSize,g.ascent=l.fontSize);var T=v.getContext("2d");T.font=m;for(var b=d?s.wordWrap(a,l,v):a,R=b.split(/(?:\r\n|\r|\n)/),C=new Array(R.length),w=0,A=0;A<R.length;A++){var S=T.measureText(R[A]).width+(R[A].length-1)*l.letterSpacing;C[A]=S,w=Math.max(w,S)}var O=w+l.strokeThickness;l.dropShadow&&(O+=l.dropShadowDistance);var L=l.lineHeight||g.fontSize+l.strokeThickness,N=Math.max(L,g.fontSize+l.strokeThickness)+(R.length-1)*(L+l.leading);return l.dropShadow&&(N+=l.dropShadowDistance),new s(a,l,O,N,R,C,L+l.leading,w,g)},s.wordWrap=function(a,l,d){d===void 0&&(d=s._canvas);for(var v=d.getContext("2d"),m=0,g="",T="",b=Object.create(null),R=l.letterSpacing,C=l.whiteSpace,w=s.collapseSpaces(C),A=s.collapseNewlines(C),S=!w,O=l.wordWrapWidth+R,L=s.tokenize(a),N=0;N<L.length;N++){var U=L[N];if(s.isNewline(U)){if(!A){T+=s.addLine(g),S=!w,g="",m=0;continue}U=" "}if(w){var $=s.isBreakingSpace(U),G=s.isBreakingSpace(g[g.length-1]);if($&&G)continue}var z=s.getFromCache(U,R,b,v);if(z>O)if(g!==""&&(T+=s.addLine(g),g="",m=0),s.canBreakWords(U,l.breakWords))for(var V=s.wordWrapSplit(U),X=0;X<V.length;X++){for(var ie=V[X],re=1;V[X+re];){var J=V[X+re],se=ie[ie.length-1];if(!s.canBreakChars(se,J,U,X,l.breakWords))ie+=J;else break;re++}X+=ie.length-1;var xe=s.getFromCache(ie,R,b,v);xe+m>O&&(T+=s.addLine(g),S=!1,g="",m=0),g+=ie,m+=xe}else{g.length>0&&(T+=s.addLine(g),g="",m=0);var Ae=N===L.length-1;T+=s.addLine(U,!Ae),S=!1,g="",m=0}else z+m>O&&(S=!1,T+=s.addLine(g),g="",m=0),(g.length>0||!s.isBreakingSpace(U)||S)&&(g+=U,m+=z)}return T+=s.addLine(g,!1),T},s.addLine=function(a,l){return l===void 0&&(l=!0),a=s.trimRight(a),a=l?a+`
`:a,a},s.getFromCache=function(a,l,d,v){var m=d[a];if(typeof m!="number"){var g=a.length*l;m=v.measureText(a).width+g,d[a]=m}return m},s.collapseSpaces=function(a){return a==="normal"||a==="pre-line"},s.collapseNewlines=function(a){return a==="normal"},s.trimRight=function(a){if(typeof a!="string")return"";for(var l=a.length-1;l>=0;l--){var d=a[l];if(!s.isBreakingSpace(d))break;a=a.slice(0,-1)}return a},s.isNewline=function(a){return typeof a!="string"?!1:s._newlines.indexOf(a.charCodeAt(0))>=0},s.isBreakingSpace=function(a,l){return typeof a!="string"?!1:s._breakingSpaces.indexOf(a.charCodeAt(0))>=0},s.tokenize=function(a){var l=[],d="";if(typeof a!="string")return l;for(var v=0;v<a.length;v++){var m=a[v],g=a[v+1];if(s.isBreakingSpace(m,g)||s.isNewline(m)){d!==""&&(l.push(d),d=""),l.push(m);continue}d+=m}return d!==""&&l.push(d),l},s.canBreakWords=function(a,l){return l},s.canBreakChars=function(a,l,d,v,m){return!0},s.wordWrapSplit=function(a){return a.split("")},s.measureFont=function(a){if(s._fonts[a])return s._fonts[a];var l={ascent:0,descent:0,fontSize:0},d=s._canvas,v=s._context;v.font=a;var m=s.METRICS_STRING+s.BASELINE_SYMBOL,g=Math.ceil(v.measureText(m).width),T=Math.ceil(v.measureText(s.BASELINE_SYMBOL).width),b=Math.ceil(s.HEIGHT_MULTIPLIER*T);T=T*s.BASELINE_MULTIPLIER|0,d.width=g,d.height=b,v.fillStyle="#f00",v.fillRect(0,0,g,b),v.font=a,v.textBaseline="alphabetic",v.fillStyle="#000",v.fillText(m,0,T);var R=v.getImageData(0,0,g,b).data,C=R.length,w=g*4,A=0,S=0,O=!1;for(A=0;A<T;++A){for(var L=0;L<w;L+=4)if(R[S+L]!==255){O=!0;break}if(!O)S+=w;else break}for(l.ascent=T-A,S=C-w,O=!1,A=b;A>T;--A){for(var L=0;L<w;L+=4)if(R[S+L]!==255){O=!0;break}if(!O)S-=w;else break}return l.descent=A-T,l.fontSize=l.ascent+l.descent,s._fonts[a]=l,l},s.clearMetrics=function(a){a===void 0&&(a=""),a?delete s._fonts[a]:s._fonts={}},Object.defineProperty(s,"_canvas",{get:function(){if(!s.__canvas){var a=void 0;try{var l=new OffscreenCanvas(0,0),d=l.getContext("2d");if(d&&d.measureText)return s.__canvas=l,l;a=settings$1.ADAPTER.createCanvas()}catch{a=settings$1.ADAPTER.createCanvas()}a.width=a.height=10,s.__canvas=a}return s.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(s,"_context",{get:function(){return s.__context||(s.__context=s._canvas.getContext("2d")),s.__context},enumerable:!1,configurable:!0}),s}();TextMetrics._fonts={};TextMetrics.METRICS_STRING="|\xC9q\xC5";TextMetrics.BASELINE_SYMBOL="M";TextMetrics.BASELINE_MULTIPLIER=1.4;TextMetrics.HEIGHT_MULTIPLIER=2;TextMetrics._newlines=[10,13];TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Text=function(s){__extends$c(a,s);function a(l,d,v){var m=this,g=!1;v||(v=settings$1.ADAPTER.createCanvas(),g=!0),v.width=3,v.height=3;var T=Texture.from(v);return T.orig=new Rectangle,T.trim=new Rectangle,m=s.call(this,T)||this,m._ownCanvas=g,m.canvas=v,m.context=v.getContext("2d"),m._resolution=settings$1.RESOLUTION,m._autoResolution=!0,m._text=null,m._style=null,m._styleListener=null,m._font="",m.text=l,m.style=d,m.localStyleID=-1,m}return a.prototype.updateText=function(l){var d=this._style;if(this.localStyleID!==d.styleID&&(this.dirty=!0,this.localStyleID=d.styleID),!(!this.dirty&&l)){this._font=this._style.toFontString();var v=this.context,m=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),g=m.width,T=m.height,b=m.lines,R=m.lineHeight,C=m.lineWidths,w=m.maxLineWidth,A=m.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,g)+d.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,T)+d.padding*2)*this._resolution),v.scale(this._resolution,this._resolution),v.clearRect(0,0,this.canvas.width,this.canvas.height),v.font=this._font,v.lineWidth=d.strokeThickness,v.textBaseline=d.textBaseline,v.lineJoin=d.lineJoin,v.miterLimit=d.miterLimit;for(var S,O,L=d.dropShadow?2:1,N=0;N<L;++N){var U=d.dropShadow&&N===0,$=U?Math.ceil(Math.max(1,T)+d.padding*2):0,G=$*this._resolution;if(U){v.fillStyle="black",v.strokeStyle="black";var z=d.dropShadowColor,V=hex2rgb(typeof z=="number"?z:string2hex(z)),X=d.dropShadowBlur*this._resolution,ie=d.dropShadowDistance*this._resolution;v.shadowColor="rgba("+V[0]*255+","+V[1]*255+","+V[2]*255+","+d.dropShadowAlpha+")",v.shadowBlur=X,v.shadowOffsetX=Math.cos(d.dropShadowAngle)*ie,v.shadowOffsetY=Math.sin(d.dropShadowAngle)*ie+G}else v.fillStyle=this._generateFillStyle(d,b,m),v.strokeStyle=d.stroke,v.shadowColor="black",v.shadowBlur=0,v.shadowOffsetX=0,v.shadowOffsetY=0;var re=(R-A.fontSize)/2;(!a.nextLineHeightBehavior||R-A.fontSize<0)&&(re=0);for(var J=0;J<b.length;J++)S=d.strokeThickness/2,O=d.strokeThickness/2+J*R+A.ascent+re,d.align==="right"?S+=w-C[J]:d.align==="center"&&(S+=(w-C[J])/2),d.stroke&&d.strokeThickness&&this.drawLetterSpacing(b[J],S+d.padding,O+d.padding-$,!0),d.fill&&this.drawLetterSpacing(b[J],S+d.padding,O+d.padding-$)}this.updateTexture()}},a.prototype.drawLetterSpacing=function(l,d,v,m){m===void 0&&(m=!1);var g=this._style,T=g.letterSpacing,b=a.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(T===0||b){b&&(this.context.letterSpacing=T,this.context.textLetterSpacing=T),m?this.context.strokeText(l,d,v):this.context.fillText(l,d,v);return}for(var R=d,C=Array.from?Array.from(l):l.split(""),w=this.context.measureText(l).width,A=0,S=0;S<C.length;++S){var O=C[S];m?this.context.strokeText(O,R,v):this.context.fillText(O,R,v);for(var L="",N=S+1;N<C.length;++N)L+=C[N];A=this.context.measureText(L).width,R+=w-A+T,w=A}},a.prototype.updateTexture=function(){var l=this.canvas;if(this._style.trim){var d=trimCanvas(l);d.data&&(l.width=d.width,l.height=d.height,this.context.putImageData(d.data,0,0))}var v=this._texture,m=this._style,g=m.trim?0:m.padding,T=v.baseTexture;v.trim.width=v._frame.width=l.width/this._resolution,v.trim.height=v._frame.height=l.height/this._resolution,v.trim.x=-g,v.trim.y=-g,v.orig.width=v._frame.width-g*2,v.orig.height=v._frame.height-g*2,this._onTextureUpdate(),T.setRealSize(l.width,l.height,this._resolution),v.updateUvs(),this.dirty=!1},a.prototype._render=function(l){this._autoResolution&&this._resolution!==l.resolution&&(this._resolution=l.resolution,this.dirty=!0),this.updateText(!0),s.prototype._render.call(this,l)},a.prototype.updateTransform=function(){this.updateText(!0),s.prototype.updateTransform.call(this)},a.prototype.getBounds=function(l,d){return this.updateText(!0),this._textureID===-1&&(l=!1),s.prototype.getBounds.call(this,l,d)},a.prototype.getLocalBounds=function(l){return this.updateText(!0),s.prototype.getLocalBounds.call(this,l)},a.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},a.prototype._generateFillStyle=function(l,d,v){var m=l.fill;if(Array.isArray(m)){if(m.length===1)return m[0]}else return m;var g,T=l.dropShadow?l.dropShadowDistance:0,b=l.padding||0,R=this.canvas.width/this._resolution-T-b*2,C=this.canvas.height/this._resolution-T-b*2,w=m.slice(),A=l.fillGradientStops.slice();if(!A.length)for(var S=w.length+1,O=1;O<S;++O)A.push(O/S);if(w.unshift(m[0]),A.unshift(0),w.push(m[m.length-1]),A.push(1),l.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){g=this.context.createLinearGradient(R/2,b,R/2,C+b);for(var L=v.fontProperties.fontSize+l.strokeThickness,O=0;O<d.length;O++){var N=v.lineHeight*(O-1)+L,U=v.lineHeight*O,$=U;O>0&&N>U&&($=(U+N)/2);var G=U+L,z=v.lineHeight*(O+1),V=G;O+1<d.length&&z<G&&(V=(G+z)/2);for(var X=(V-$)/C,ie=0;ie<w.length;ie++){var re=0;typeof A[ie]=="number"?re=A[ie]:re=ie/w.length;var J=Math.min(1,Math.max(0,$/C+re*X));J=Number(J.toFixed(5)),g.addColorStop(J,w[ie])}}}else{g=this.context.createLinearGradient(b,C/2,R+b,C/2);for(var se=w.length+1,xe=1,O=0;O<w.length;O++){var Ae=void 0;typeof A[O]=="number"?Ae=A[O]:Ae=xe/se,g.addColorStop(Ae,w[O]),xe++}}return g},a.prototype.destroy=function(l){typeof l=="boolean"&&(l={children:l}),l=Object.assign({},defaultDestroyOptions,l),s.prototype.destroy.call(this,l),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(a.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(l){this.updateText(!0);var d=sign(this.scale.x)||1;this.scale.x=d*l/this._texture.orig.width,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(l){this.updateText(!0);var d=sign(this.scale.y)||1;this.scale.y=d*l/this._texture.orig.height,this._height=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"style",{get:function(){return this._style},set:function(l){l=l||{},l instanceof TextStyle?this._style=l:this._style=new TextStyle(l),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(l){l=String(l==null?"":l),this._text!==l&&(this._text=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resolution",{get:function(){return this._resolution},set:function(l){this._autoResolution=!1,this._resolution!==l&&(this._resolution=l,this.dirty=!0)},enumerable:!1,configurable:!0}),a.nextLineHeightBehavior=!1,a.experimentalLetterSpacing=!1,a}(Sprite);/*!
 * @pixi/prepare - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$b=function(s,a){return extendStatics$b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$b(s,a)};function __extends$b(s,a){extendStatics$b(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var CountLimiter=function(){function s(a){this.maxItemsPerFrame=a,this.itemsLeft=0}return s.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},s.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},s}();function findMultipleBaseTextures(s,a){var l=!1;if(s&&s._textures&&s._textures.length){for(var d=0;d<s._textures.length;d++)if(s._textures[d]instanceof Texture){var v=s._textures[d].baseTexture;a.indexOf(v)===-1&&(a.push(v),l=!0)}}return l}function findBaseTexture(s,a){if(s.baseTexture instanceof BaseTexture){var l=s.baseTexture;return a.indexOf(l)===-1&&a.push(l),!0}return!1}function findTexture(s,a){if(s._texture&&s._texture instanceof Texture){var l=s._texture.baseTexture;return a.indexOf(l)===-1&&a.push(l),!0}return!1}function drawText(s,a){return a instanceof Text?(a.updateText(!0),!0):!1}function calculateTextStyle(s,a){if(a instanceof TextStyle){var l=a.toFontString();return TextMetrics.measureFont(l),!0}return!1}function findText(s,a){if(s instanceof Text){a.indexOf(s.style)===-1&&a.push(s.style),a.indexOf(s)===-1&&a.push(s);var l=s._texture.baseTexture;return a.indexOf(l)===-1&&a.push(l),!0}return!1}function findTextStyle(s,a){return s instanceof TextStyle?(a.indexOf(s)===-1&&a.push(s),!0):!1}var BasePrepare=function(){function s(a){var l=this;this.limiter=new CountLimiter(settings$1.UPLOADS_PER_FRAME),this.renderer=a,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!l.queue||l.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return s.prototype.upload=function(a,l){var d=this;return typeof a=="function"&&(l=a,a=null),l&&deprecation$1("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(v){a&&d.add(a);var m=function(){l==null||l(),v()};d.queue.length?(d.completes.push(m),d.ticking||(d.ticking=!0,Ticker.system.addOnce(d.tick,d,UPDATE_PRIORITY.UTILITY))):m()})},s.prototype.tick=function(){setTimeout(this.delayedTick,0)},s.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],l=!1;if(a&&!a._destroyed){for(var d=0,v=this.uploadHooks.length;d<v;d++)if(this.uploadHooks[d](this.uploadHookHelper,a)){this.queue.shift(),l=!0;break}}l||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var m=this.completes.slice(0);this.completes.length=0;for(var d=0,v=m.length;d<v;d++)m[d]()}},s.prototype.registerFindHook=function(a){return a&&this.addHooks.push(a),this},s.prototype.registerUploadHook=function(a){return a&&this.uploadHooks.push(a),this},s.prototype.add=function(a){for(var l=0,d=this.addHooks.length;l<d&&!this.addHooks[l](a,this.queue);l++);if(a instanceof Container)for(var l=a.children.length-1;l>=0;l--)this.add(a.children[l]);return this},s.prototype.destroy=function(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},s}();function uploadBaseTextures(s,a){return a instanceof BaseTexture?(a._glTextures[s.CONTEXT_UID]||s.texture.bind(a),!0):!1}function uploadGraphics(s,a){if(!(a instanceof Graphics))return!1;var l=a.geometry;a.finishPoly(),l.updateBatches();for(var d=l.batches,v=0;v<d.length;v++){var m=d[v].style.texture;m&&uploadBaseTextures(s,m.baseTexture)}return l.batchable||s.geometry.bind(l,a._resolveDirectShader(s)),!0}function findGraphics(s,a){return s instanceof Graphics?(a.push(s),!0):!1}var Prepare=function(s){__extends$b(a,s);function a(l){var d=s.call(this,l)||this;return d.uploadHookHelper=d.renderer,d.registerFindHook(findGraphics),d.registerUploadHook(uploadBaseTextures),d.registerUploadHook(uploadGraphics),d}return a.extension={name:"prepare",type:ExtensionType.RendererPlugin},a}(BasePrepare),TimeLimiter=function(){function s(a){this.maxMilliseconds=a,this.frameStart=0}return s.prototype.beginFrame=function(){this.frameStart=Date.now()},s.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},s}();/*!
 * @pixi/spritesheet - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Spritesheet=function(){function s(a,l,d){d===void 0&&(d=null),this.linkedSheets=[],this._texture=a instanceof Texture?a:null,this.baseTexture=a instanceof BaseTexture?a:this._texture.baseTexture,this.textures={},this.animations={},this.data=l;var v=this.baseTexture.resource;this.resolution=this._updateResolution(d||(v?v.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return s.prototype._updateResolution=function(a){a===void 0&&(a=null);var l=this.data.meta.scale,d=getResolutionOfUrl(a,null);return d===null&&(d=l!==void 0?parseFloat(l):1),d!==1&&this.baseTexture.setResolution(d),d},s.prototype.parse=function(a){var l=this;return a&&deprecation$1("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(d){l._callback=function(v){a==null||a(v),d(v)},l._batchIndex=0,l._frameKeys.length<=s.BATCH_SIZE?(l._processFrames(0),l._processAnimations(),l._parseComplete()):l._nextBatch()})},s.prototype._processFrames=function(a){for(var l=a,d=s.BATCH_SIZE;l-a<d&&l<this._frameKeys.length;){var v=this._frameKeys[l],m=this._frames[v],g=m.frame;if(g){var T=null,b=null,R=m.trimmed!==!1&&m.sourceSize?m.sourceSize:m.frame,C=new Rectangle(0,0,Math.floor(R.w)/this.resolution,Math.floor(R.h)/this.resolution);m.rotated?T=new Rectangle(Math.floor(g.x)/this.resolution,Math.floor(g.y)/this.resolution,Math.floor(g.h)/this.resolution,Math.floor(g.w)/this.resolution):T=new Rectangle(Math.floor(g.x)/this.resolution,Math.floor(g.y)/this.resolution,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution),m.trimmed!==!1&&m.spriteSourceSize&&(b=new Rectangle(Math.floor(m.spriteSourceSize.x)/this.resolution,Math.floor(m.spriteSourceSize.y)/this.resolution,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution)),this.textures[v]=new Texture(this.baseTexture,T,C,b,m.rotated?2:0,m.anchor),Texture.addToCache(this.textures[v],v)}l++}},s.prototype._processAnimations=function(){var a=this.data.animations||{};for(var l in a){this.animations[l]=[];for(var d=0;d<a[l].length;d++){var v=a[l][d];this.animations[l].push(this.textures[v])}}},s.prototype._parseComplete=function(){var a=this._callback;this._callback=null,this._batchIndex=0,a.call(this,this.textures)},s.prototype._nextBatch=function(){var a=this;this._processFrames(this._batchIndex*s.BATCH_SIZE),this._batchIndex++,setTimeout(function(){a._batchIndex*s.BATCH_SIZE<a._frameKeys.length?a._nextBatch():(a._processAnimations(),a._parseComplete())},0)},s.prototype.destroy=function(a){var l;a===void 0&&(a=!1);for(var d in this.textures)this.textures[d].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,a&&((l=this._texture)===null||l===void 0||l.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},s.BATCH_SIZE=1e3,s}(),SpritesheetLoader=function(){function s(){}return s.use=function(a,l){var d,v,m=this,g=a.name+"_image";if(!a.data||a.type!==LoaderResource.TYPE.JSON||!a.data.frames||m.resources[g]){l();return}var T=(v=(d=a.data)===null||d===void 0?void 0:d.meta)===null||v===void 0?void 0:v.related_multi_packs;if(Array.isArray(T))for(var b=function(O){if(typeof O!="string")return"continue";var L=O.replace(".json",""),N=url.resolve(a.url.replace(m.baseUrl,""),O);if(m.resources[L]||Object.values(m.resources).some(function($){return url.format(url.parse($.url))===N}))return"continue";var U={crossOrigin:a.crossOrigin,loadType:LoaderResource.LOAD_TYPE.XHR,xhrType:LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:a,metadata:a.metadata};m.add(L,N,U)},R=0,C=T;R<C.length;R++){var w=C[R];b(w)}var A={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata,parentResource:a},S=s.getResourcePath(a,m.baseUrl);m.add(g,S,A,function(L){if(L.error){l(L.error);return}var N=new Spritesheet(L.texture,a.data,a.url);N.parse().then(function(){a.spritesheet=N,a.textures=N.textures,l()})})},s.getResourcePath=function(a,l){return a.isDataUrl?a.data.meta.image:url.resolve(a.url.replace(l,""),a.data.meta.image)},s.extension=ExtensionType.Loader,s}();/*!
 * @pixi/sprite-tiling - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$a=function(s,a){return extendStatics$a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$a(s,a)};function __extends$a(s,a){extendStatics$a(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var tempPoint$1=new Point,TilingSprite=function(s){__extends$a(a,s);function a(l,d,v){d===void 0&&(d=100),v===void 0&&(v=100);var m=s.call(this,l)||this;return m.tileTransform=new Transform,m._width=d,m._height=v,m.uvMatrix=m.texture.uvMatrix||new TextureMatrix(l),m.pluginName="tilingSprite",m.uvRespectAnchor=!1,m}return Object.defineProperty(a.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(l){this.uvMatrix.clampMargin=l,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(l){this.tileTransform.scale.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(l){this.tileTransform.position.copyFrom(l)},enumerable:!1,configurable:!0}),a.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},a.prototype._render=function(l){var d=this._texture;!d||!d.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),l.batch.setObjectRenderer(l.plugins[this.pluginName]),l.plugins[this.pluginName].render(this))},a.prototype._calculateBounds=function(){var l=this._width*-this._anchor._x,d=this._height*-this._anchor._y,v=this._width*(1-this._anchor._x),m=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,l,d,v,m)},a.prototype.getLocalBounds=function(l){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),l||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),l=this._localBoundsRect),this._bounds.getRectangle(l)):s.prototype.getLocalBounds.call(this,l)},a.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,tempPoint$1);var d=this._width,v=this._height,m=-d*this.anchor._x;if(tempPoint$1.x>=m&&tempPoint$1.x<m+d){var g=-v*this.anchor._y;if(tempPoint$1.y>=g&&tempPoint$1.y<g+v)return!0}return!1},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this.tileTransform=null,this.uvMatrix=null},a.from=function(l,d){var v=l instanceof Texture?l:Texture.from(l,d);return new a(v,d.width,d.height)},Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(l){this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(l){this._height=l},enumerable:!1,configurable:!0}),a}(Sprite),fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,tempMat=new Matrix,TilingSpriteRenderer=function(s){__extends$a(a,s);function a(l){var d=s.call(this,l)||this;return l.runners.contextChange.add(d),d.quad=new QuadUv,d.state=State$1.for2d(),d}return a.prototype.contextChange=function(){var l=this.renderer,d={globals:l.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,d),this.shader=l.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,d):Shader.from(gl1VertexSrc,gl1FragmentSrc,d)},a.prototype.render=function(l){var d=this.renderer,v=this.quad,m=v.vertices;m[0]=m[6]=l._width*-l.anchor.x,m[1]=m[3]=l._height*-l.anchor.y,m[2]=m[4]=l._width*(1-l.anchor.x),m[5]=m[7]=l._height*(1-l.anchor.y);var g=l.uvRespectAnchor?l.anchor.x:0,T=l.uvRespectAnchor?l.anchor.y:0;m=v.uvs,m[0]=m[6]=-g,m[1]=m[3]=-T,m[2]=m[4]=1-g,m[5]=m[7]=1-T,v.invalidate();var b=l._texture,R=b.baseTexture,C=R.alphaMode>0,w=l.tileTransform.localTransform,A=l.uvMatrix,S=R.isPowerOfTwo&&b.frame.width===R.width&&b.frame.height===R.height;S&&(R._glTextures[d.CONTEXT_UID]?S=R.wrapMode!==WRAP_MODES$5.CLAMP:R.wrapMode===WRAP_MODES$5.CLAMP&&(R.wrapMode=WRAP_MODES$5.REPEAT));var O=S?this.simpleShader:this.shader,L=b.width,N=b.height,U=l._width,$=l._height;tempMat.set(w.a*L/U,w.b*L/$,w.c*N/U,w.d*N/$,w.tx/U,w.ty/$),tempMat.invert(),S?tempMat.prepend(A.mapCoord):(O.uniforms.uMapCoord=A.mapCoord.toArray(!0),O.uniforms.uClampFrame=A.uClampFrame,O.uniforms.uClampOffset=A.uClampOffset),O.uniforms.uTransform=tempMat.toArray(!0),O.uniforms.uColor=premultiplyTintToRgba(l.tint,l.worldAlpha,O.uniforms.uColor,C),O.uniforms.translationMatrix=l.transform.worldTransform.toArray(!0),O.uniforms.uSampler=b,d.shader.bind(O),d.geometry.bind(v),this.state.blendMode=correctBlendMode(l.blendMode,C),d.state.set(this.state),d.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},a.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin},a}(ObjectRenderer);/*!
 * @pixi/mesh - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$9=function(s,a){return extendStatics$9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$9(s,a)};function __extends$9(s,a){extendStatics$9(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var MeshBatchUvs=function(){function s(a,l){this.uvBuffer=a,this.uvMatrix=l,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return s.prototype.update=function(a){if(!(!a&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var l=this.uvBuffer.data;(!this.data||this.data.length!==l.length)&&(this.data=new Float32Array(l.length)),this.uvMatrix.multiplyUvs(l,this.data),this._updateID++}},s}(),tempPoint=new Point,tempPolygon=new Polygon,Mesh=function(s){__extends$9(a,s);function a(l,d,v,m){m===void 0&&(m=DRAW_MODES$5.TRIANGLES);var g=s.call(this)||this;return g.geometry=l,g.shader=d,g.state=v||State$1.for2d(),g.drawMode=m,g.start=0,g.size=0,g.uvs=null,g.indices=null,g.vertexData=new Float32Array(1),g.vertexDirty=-1,g._transformID=-1,g._roundPixels=settings$1.ROUND_PIXELS,g.batchUvs=null,g}return Object.defineProperty(a.prototype,"geometry",{get:function(){return this._geometry},set:function(l){this._geometry!==l&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=l,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"material",{get:function(){return this.shader},set:function(l){this.shader=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){this._roundPixels!==l&&(this._transformID=-1),this._roundPixels=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(l){this.shader.tint=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(l){this.shader.texture=l},enumerable:!1,configurable:!0}),a.prototype._render=function(l){var d=this.geometry.buffers[0].data,v=this.shader;v.batchable&&this.drawMode===DRAW_MODES$5.TRIANGLES&&d.length<a.BATCHABLE_SIZE*2?this._renderToBatch(l):this._renderDefault(l)},a.prototype._renderDefault=function(l){var d=this.shader;d.alpha=this.worldAlpha,d.update&&d.update(),l.batch.flush(),d.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),l.shader.bind(d),l.state.set(this.state),l.geometry.bind(this.geometry,d),l.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},a.prototype._renderToBatch=function(l){var d=this.geometry,v=this.shader;v.uvMatrix&&(v.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=d.indexBuffer.data,this._tintRGB=v._tintRGB,this._texture=v.texture;var m=this.material.pluginName;l.batch.setObjectRenderer(l.plugins[m]),l.plugins[m].render(this)},a.prototype.calculateVertices=function(){var l=this.geometry,d=l.buffers[0],v=d.data,m=d._updateID;if(!(m===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==v.length&&(this.vertexData=new Float32Array(v.length));for(var g=this.transform.worldTransform,T=g.a,b=g.b,R=g.c,C=g.d,w=g.tx,A=g.ty,S=this.vertexData,O=0;O<S.length/2;O++){var L=v[O*2],N=v[O*2+1];S[O*2]=T*L+R*N+w,S[O*2+1]=b*L+C*N+A}if(this._roundPixels)for(var U=settings$1.RESOLUTION,O=0;O<S.length;++O)S[O]=Math.round((S[O]*U|0)/U);this.vertexDirty=m}},a.prototype.calculateUvs=function(){var l=this.geometry.buffers[1],d=this.shader;d.uvMatrix.isSimple?this.uvs=l.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(l,d.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},a.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},a.prototype.containsPoint=function(l){if(!this.getBounds().contains(l.x,l.y))return!1;this.worldTransform.applyInverse(l,tempPoint);for(var d=this.geometry.getBuffer("aVertexPosition").data,v=tempPolygon.points,m=this.geometry.getIndex().data,g=m.length,T=this.drawMode===4?3:1,b=0;b+2<g;b+=T){var R=m[b]*2,C=m[b+1]*2,w=m[b+2]*2;if(v[0]=d[R],v[1]=d[R+1],v[2]=d[C],v[3]=d[C+1],v[4]=d[w],v[5]=d[w+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1},a.prototype.destroy=function(l){s.prototype.destroy.call(this,l),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},a.BATCHABLE_SIZE=100,a}(Container),fragment$5=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,MeshMaterial=function(s){__extends$9(a,s);function a(l,d){var v=this,m={uSampler:l,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return d=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},d),d.uniforms&&Object.assign(m,d.uniforms),v=s.call(this,d.program||Program.from(vertex$2,fragment$5),m)||this,v._colorDirty=!1,v.uvMatrix=new TextureMatrix(l),v.batchable=d.program===void 0,v.pluginName=d.pluginName,v.tint=d.tint,v.alpha=d.alpha,v}return Object.defineProperty(a.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(l){this.uniforms.uSampler!==l&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!l.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=l,this.uvMatrix.texture=l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this._alpha},set:function(l){l!==this._alpha&&(this._alpha=l,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){l!==this._tint&&(this._tint=l,this._tintRGB=(l>>16)+(l&65280)+((l&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),a.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var l=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,l.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},a}(Shader),MeshGeometry=function(s){__extends$9(a,s);function a(l,d,v){var m=s.call(this)||this,g=new Buffer(l),T=new Buffer(d,!0),b=new Buffer(v,!0,!0);return m.addAttribute("aVertexPosition",g,2,!1,TYPES$5.FLOAT).addAttribute("aTextureCoord",T,2,!1,TYPES$5.FLOAT).addIndex(b),m._updateId=-1,m}return Object.defineProperty(a.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),a}(Geometry);/*!
 * @pixi/text-bitmap - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$8=function(s,a){return extendStatics$8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$8(s,a)};function __extends$8(s,a){extendStatics$8(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var BitmapFontData=function(){function s(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return s}(),TextFormat=function(){function s(){}return s.test=function(a){return typeof a=="string"&&a.indexOf("info face=")===0},s.parse=function(a){var l=a.match(/^[a-z]+\s+.+$/gm),d={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var v in l){var m=l[v].match(/^[a-z]+/gm)[0],g=l[v].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),T={};for(var b in g){var R=g[b].split("="),C=R[0],w=R[1].replace(/"/gm,""),A=parseFloat(w),S=isNaN(A)?w:A;T[C]=S}d[m].push(T)}var O=new BitmapFontData;return d.info.forEach(function(L){return O.info.push({face:L.face,size:parseInt(L.size,10)})}),d.common.forEach(function(L){return O.common.push({lineHeight:parseInt(L.lineHeight,10)})}),d.page.forEach(function(L){return O.page.push({id:parseInt(L.id,10),file:L.file})}),d.char.forEach(function(L){return O.char.push({id:parseInt(L.id,10),page:parseInt(L.page,10),x:parseInt(L.x,10),y:parseInt(L.y,10),width:parseInt(L.width,10),height:parseInt(L.height,10),xoffset:parseInt(L.xoffset,10),yoffset:parseInt(L.yoffset,10),xadvance:parseInt(L.xadvance,10)})}),d.kerning.forEach(function(L){return O.kerning.push({first:parseInt(L.first,10),second:parseInt(L.second,10),amount:parseInt(L.amount,10)})}),d.distanceField.forEach(function(L){return O.distanceField.push({distanceRange:parseInt(L.distanceRange,10),fieldType:L.fieldType})}),O},s}(),XMLFormat=function(){function s(){}return s.test=function(a){return a instanceof XMLDocument&&a.getElementsByTagName("page").length&&a.getElementsByTagName("info")[0].getAttribute("face")!==null},s.parse=function(a){for(var l=new BitmapFontData,d=a.getElementsByTagName("info"),v=a.getElementsByTagName("common"),m=a.getElementsByTagName("page"),g=a.getElementsByTagName("char"),T=a.getElementsByTagName("kerning"),b=a.getElementsByTagName("distanceField"),R=0;R<d.length;R++)l.info.push({face:d[R].getAttribute("face"),size:parseInt(d[R].getAttribute("size"),10)});for(var R=0;R<v.length;R++)l.common.push({lineHeight:parseInt(v[R].getAttribute("lineHeight"),10)});for(var R=0;R<m.length;R++)l.page.push({id:parseInt(m[R].getAttribute("id"),10)||0,file:m[R].getAttribute("file")});for(var R=0;R<g.length;R++){var C=g[R];l.char.push({id:parseInt(C.getAttribute("id"),10),page:parseInt(C.getAttribute("page"),10)||0,x:parseInt(C.getAttribute("x"),10),y:parseInt(C.getAttribute("y"),10),width:parseInt(C.getAttribute("width"),10),height:parseInt(C.getAttribute("height"),10),xoffset:parseInt(C.getAttribute("xoffset"),10),yoffset:parseInt(C.getAttribute("yoffset"),10),xadvance:parseInt(C.getAttribute("xadvance"),10)})}for(var R=0;R<T.length;R++)l.kerning.push({first:parseInt(T[R].getAttribute("first"),10),second:parseInt(T[R].getAttribute("second"),10),amount:parseInt(T[R].getAttribute("amount"),10)});for(var R=0;R<b.length;R++)l.distanceField.push({fieldType:b[R].getAttribute("fieldType"),distanceRange:parseInt(b[R].getAttribute("distanceRange"),10)});return l},s}(),XMLStringFormat=function(){function s(){}return s.test=function(a){if(typeof a=="string"&&a.indexOf("<font>")>-1){var l=new globalThis.DOMParser().parseFromString(a,"text/xml");return XMLFormat.test(l)}return!1},s.parse=function(a){var l=new globalThis.DOMParser().parseFromString(a,"text/xml");return XMLFormat.parse(l)},s}(),formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(s){for(var a=0;a<formats.length;a++)if(formats[a].test(s))return formats[a];return null}function generateFillStyle(s,a,l,d,v,m){var g=l.fill;if(Array.isArray(g)){if(g.length===1)return g[0]}else return g;var T,b=l.dropShadow?l.dropShadowDistance:0,R=l.padding||0,C=s.width/d-b-R*2,w=s.height/d-b-R*2,A=g.slice(),S=l.fillGradientStops.slice();if(!S.length)for(var O=A.length+1,L=1;L<O;++L)S.push(L/O);if(A.unshift(g[0]),S.unshift(0),A.push(g[g.length-1]),S.push(1),l.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){T=a.createLinearGradient(C/2,R,C/2,w+R);for(var N=0,U=m.fontProperties.fontSize+l.strokeThickness,$=U/w,L=0;L<v.length;L++)for(var G=m.lineHeight*L,z=0;z<A.length;z++){var V=0;typeof S[z]=="number"?V=S[z]:V=z/A.length;var X=G/w+V*$,ie=Math.max(N,X);ie=Math.min(ie,1),T.addColorStop(ie,A[z]),N=ie}}else{T=a.createLinearGradient(R,w/2,C+R,w/2);for(var re=A.length+1,J=1,L=0;L<A.length;L++){var se=void 0;typeof S[L]=="number"?se=S[L]:se=J/re,T.addColorStop(se,A[L]),J++}}return T}function drawGlyph(s,a,l,d,v,m,g){var T=l.text,b=l.fontProperties;a.translate(d,v),a.scale(m,m);var R=g.strokeThickness/2,C=-(g.strokeThickness/2);if(a.font=g.toFontString(),a.lineWidth=g.strokeThickness,a.textBaseline=g.textBaseline,a.lineJoin=g.lineJoin,a.miterLimit=g.miterLimit,a.fillStyle=generateFillStyle(s,a,g,m,[T],l),a.strokeStyle=g.stroke,g.dropShadow){var w=g.dropShadowColor,A=hex2rgb(typeof w=="number"?w:string2hex(w)),S=g.dropShadowBlur*m,O=g.dropShadowDistance*m;a.shadowColor="rgba("+A[0]*255+","+A[1]*255+","+A[2]*255+","+g.dropShadowAlpha+")",a.shadowBlur=S,a.shadowOffsetX=Math.cos(g.dropShadowAngle)*O,a.shadowOffsetY=Math.sin(g.dropShadowAngle)*O}else a.shadowColor="black",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;g.stroke&&g.strokeThickness&&a.strokeText(T,R,C+l.lineHeight-b.descent),g.fill&&a.fillText(T,R,C+l.lineHeight-b.descent),a.setTransform(1,0,0,1,0,0),a.fillStyle="rgba(0, 0, 0, 0)"}function splitTextToCharacters(s){return Array.from?Array.from(s):s.split("")}function resolveCharacters(s){typeof s=="string"&&(s=[s]);for(var a=[],l=0,d=s.length;l<d;l++){var v=s[l];if(Array.isArray(v)){if(v.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+v.length+".");var m=v[0].charCodeAt(0),g=v[1].charCodeAt(0);if(g<m)throw new Error("[BitmapFont]: Invalid character range.");for(var T=m,b=g;T<=b;T++)a.push(String.fromCharCode(T))}else a.push.apply(a,splitTextToCharacters(v))}if(a.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return a}function extractCharCode(s){return s.codePointAt?s.codePointAt(0):s.charCodeAt(0)}var BitmapFont=function(){function s(a,l,d){var v,m,g=a.info[0],T=a.common[0],b=a.page[0],R=a.distanceField[0],C=getResolutionOfUrl(b.file),w={};this._ownsTextures=d,this.font=g.face,this.size=g.size,this.lineHeight=T.lineHeight/C,this.chars={},this.pageTextures=w;for(var A=0;A<a.page.length;A++){var S=a.page[A],O=S.id,L=S.file;w[O]=l instanceof Array?l[A]:l[L],(R==null?void 0:R.fieldType)&&R.fieldType!=="none"&&(w[O].baseTexture.alphaMode=ALPHA_MODES$5.NO_PREMULTIPLIED_ALPHA)}for(var A=0;A<a.char.length;A++){var N=a.char[A],O=N.id,U=N.page,$=a.char[A],G=$.x,z=$.y,V=$.width,X=$.height,ie=$.xoffset,re=$.yoffset,J=$.xadvance;G/=C,z/=C,V/=C,X/=C,ie/=C,re/=C,J/=C;var se=new Rectangle(G+w[U].frame.x/C,z+w[U].frame.y/C,V,X);this.chars[O]={xOffset:ie,yOffset:re,xAdvance:J,kerning:{},texture:new Texture(w[U].baseTexture,se),page:U}}for(var A=0;A<a.kerning.length;A++){var xe=a.kerning[A],Ae=xe.first,Ue=xe.second,ze=xe.amount;Ae/=C,Ue/=C,ze/=C,this.chars[Ue]&&(this.chars[Ue].kerning[Ae]=ze)}this.distanceFieldRange=R==null?void 0:R.distanceRange,this.distanceFieldType=(m=(v=R==null?void 0:R.fieldType)===null||v===void 0?void 0:v.toLowerCase())!==null&&m!==void 0?m:"none"}return s.prototype.destroy=function(){for(var a in this.chars)this.chars[a].texture.destroy(),this.chars[a].texture=null;for(var a in this.pageTextures)this._ownsTextures&&this.pageTextures[a].destroy(!0),this.pageTextures[a]=null;this.chars=null,this.pageTextures=null},s.install=function(a,l,d){var v;if(a instanceof BitmapFontData)v=a;else{var m=autoDetectFormat(a);if(!m)throw new Error("Unrecognized data format for font.");v=m.parse(a)}l instanceof Texture&&(l=[l]);var g=new s(v,l,d);return s.available[g.font]=g,g},s.uninstall=function(a){var l=s.available[a];if(!l)throw new Error("No font found named '"+a+"'");l.destroy(),delete s.available[a]},s.from=function(a,l,d){if(!a)throw new Error("[BitmapFont] Property `name` is required.");var v=Object.assign({},s.defaultOptions,d),m=v.chars,g=v.padding,T=v.resolution,b=v.textureWidth,R=v.textureHeight,C=resolveCharacters(m),w=l instanceof TextStyle?l:new TextStyle(l),A=b,S=new BitmapFontData;S.info[0]={face:w.fontFamily,size:w.fontSize},S.common[0]={lineHeight:w.fontSize};for(var O=0,L=0,N,U,$,G=0,z=[],V=0;V<C.length;V++){N||(N=settings$1.ADAPTER.createCanvas(),N.width=b,N.height=R,U=N.getContext("2d"),$=new BaseTexture(N,{resolution:T}),z.push(new Texture($)),S.page.push({id:z.length-1,file:""}));var X=TextMetrics.measureText(C[V],w,!1,N),ie=X.width,re=Math.ceil(X.height),J=Math.ceil((w.fontStyle==="italic"?2:1)*ie);if(L>=R-re*T){if(L===0)throw new Error("[BitmapFont] textureHeight "+R+"px is "+("too small for "+w.fontSize+"px fonts"));--V,N=null,U=null,$=null,L=0,O=0,G=0;continue}if(G=Math.max(re+X.fontProperties.descent,G),J*T+O>=A){--V,L+=G*T,L=Math.ceil(L),O=0,G=0;continue}drawGlyph(N,U,X,O,L,T,w);var se=extractCharCode(X.text);S.char.push({id:se,page:z.length-1,x:O/T,y:L/T,width:J,height:re,xoffset:0,yoffset:0,xadvance:Math.ceil(ie-(w.dropShadow?w.dropShadowDistance:0)-(w.stroke?w.strokeThickness:0))}),O+=(J+2*g)*T,O=Math.ceil(O)}for(var V=0,xe=C.length;V<xe;V++)for(var Ae=C[V],Ue=0;Ue<xe;Ue++){var ze=C[Ue],Ce=U.measureText(Ae).width,ye=U.measureText(ze).width,Re=U.measureText(Ae+ze).width,Fe=Re-(Ce+ye);Fe&&S.kerning.push({first:extractCharCode(Ae),second:extractCharCode(ze),amount:Fe})}var He=new s(S,z,!0);return s.available[a]!==void 0&&s.uninstall(a),s.available[a]=He,He},s.ALPHA=[["a","z"],["A","Z"]," "],s.NUMERIC=[["0","9"]],s.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],s.ASCII=[[" ","~"]],s.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:s.ALPHANUMERIC},s.available={},s}(),msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],BitmapText=function(s){__extends$8(a,s);function a(l,d){d===void 0&&(d={});var v=s.call(this)||this;v._tint=16777215;var m=Object.assign({},a.styleDefaults,d),g=m.align,T=m.tint,b=m.maxWidth,R=m.letterSpacing,C=m.fontName,w=m.fontSize;if(!BitmapFont.available[C])throw new Error('Missing BitmapFont "'+C+'"');return v._activePagesMeshData=[],v._textWidth=0,v._textHeight=0,v._align=g,v._tint=T,v._fontName=C,v._fontSize=w||BitmapFont.available[C].size,v.text=l,v._maxWidth=b,v._maxLineHeight=0,v._letterSpacing=R,v._anchor=new ObservablePoint(function(){v.dirty=!0},v,0,0),v._roundPixels=settings$1.ROUND_PIXELS,v.dirty=!0,v._resolution=settings$1.RESOLUTION,v._autoResolution=!0,v._textureCache={},v}return a.prototype.updateText=function(){for(var l,d=BitmapFont.available[this._fontName],v=this._fontSize/d.size,m=new Point,g=[],T=[],b=[],R=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",C=splitTextToCharacters(R),w=this._maxWidth*d.size/this._fontSize,A=d.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData,S=null,O=0,L=0,N=0,U=-1,$=0,G=0,z=0,V=0,X=0;X<C.length;X++){var ie=C[X],re=extractCharCode(ie);if(/(?:\s)/.test(ie)&&(U=X,$=O,V++),ie==="\r"||ie===`
`){T.push(O),b.push(-1),L=Math.max(L,O),++N,++G,m.x=0,m.y+=d.lineHeight,S=null,V=0;continue}var J=d.chars[re];if(!!J){S&&J.kerning[S]&&(m.x+=J.kerning[S]);var se=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};se.texture=J.texture,se.line=N,se.charCode=re,se.position.x=m.x+J.xOffset+this._letterSpacing/2,se.position.y=m.y+J.yOffset,se.prevSpaces=V,g.push(se),O=se.position.x+Math.max(J.xAdvance,J.texture.orig.width),m.x+=J.xAdvance+this._letterSpacing,z=Math.max(z,J.yOffset+J.texture.height),S=re,U!==-1&&w>0&&m.x>w&&(++G,removeItems(g,1+U-G,1+X-U),X=U,U=-1,T.push($),b.push(g.length>0?g[g.length-1].prevSpaces:0),L=Math.max(L,$),N++,m.x=0,m.y+=d.lineHeight,S=null,V=0)}}var xe=C[C.length-1];xe!=="\r"&&xe!==`
`&&(/(?:\s)/.test(xe)&&(O=$),T.push(O),L=Math.max(L,O),b.push(-1));for(var Ae=[],X=0;X<=N;X++){var Ue=0;this._align==="right"?Ue=L-T[X]:this._align==="center"?Ue=(L-T[X])/2:this._align==="justify"&&(Ue=b[X]<0?0:(L-T[X])/b[X]),Ae.push(Ue)}for(var ze=g.length,Ce={},ye=[],Re=this._activePagesMeshData,X=0;X<Re.length;X++)A.push(Re[X]);for(var X=0;X<ze;X++){var Fe=g[X].texture,He=Fe.baseTexture.uid;if(!Ce[He]){var q=A.pop();if(!q){var oe=new MeshGeometry,Te=void 0,we=void 0;d.distanceFieldType==="none"?(Te=new MeshMaterial(Texture.EMPTY),we=BLEND_MODES$5.NORMAL):(Te=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),we=BLEND_MODES$5.NORMAL_NPM);var De=new Mesh(oe,Te);De.blendMode=we,q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:De,vertices:null,uvs:null,indices:null}}q.index=0,q.indexCount=0,q.vertexCount=0,q.uvsCount=0,q.total=0;var Z=this._textureCache;Z[He]=Z[He]||new Texture(Fe.baseTexture),q.mesh.texture=Z[He],q.mesh.tint=this._tint,ye.push(q),Ce[He]=q}Ce[He].total++}for(var X=0;X<Re.length;X++)ye.indexOf(Re[X])===-1&&this.removeChild(Re[X].mesh);for(var X=0;X<ye.length;X++)ye[X].mesh.parent!==this&&this.addChild(ye[X].mesh);this._activePagesMeshData=ye;for(var X in Ce){var q=Ce[X],he=q.total;if(!(((l=q.indices)===null||l===void 0?void 0:l.length)>6*he)||q.vertices.length<Mesh.BATCHABLE_SIZE*2)q.vertices=new Float32Array(4*2*he),q.uvs=new Float32Array(4*2*he),q.indices=new Uint16Array(6*he);else for(var ue=q.total,pe=q.vertices,Pe=ue*4*2;Pe<pe.length;Pe++)pe[Pe]=0;q.mesh.size=6*he}for(var X=0;X<ze;X++){var ie=g[X],Me=ie.position.x+Ae[ie.line]*(this._align==="justify"?ie.prevSpaces:1);this._roundPixels&&(Me=Math.round(Me));var ge=Me*v,Ee=ie.position.y*v,Fe=ie.texture,D=Ce[Fe.baseTexture.uid],H=Fe.frame,K=Fe._uvs,Q=D.index++;D.indices[Q*6+0]=0+Q*4,D.indices[Q*6+1]=1+Q*4,D.indices[Q*6+2]=2+Q*4,D.indices[Q*6+3]=0+Q*4,D.indices[Q*6+4]=2+Q*4,D.indices[Q*6+5]=3+Q*4,D.vertices[Q*8+0]=ge,D.vertices[Q*8+1]=Ee,D.vertices[Q*8+2]=ge+H.width*v,D.vertices[Q*8+3]=Ee,D.vertices[Q*8+4]=ge+H.width*v,D.vertices[Q*8+5]=Ee+H.height*v,D.vertices[Q*8+6]=ge,D.vertices[Q*8+7]=Ee+H.height*v,D.uvs[Q*8+0]=K.x0,D.uvs[Q*8+1]=K.y0,D.uvs[Q*8+2]=K.x1,D.uvs[Q*8+3]=K.y1,D.uvs[Q*8+4]=K.x2,D.uvs[Q*8+5]=K.y2,D.uvs[Q*8+6]=K.x3,D.uvs[Q*8+7]=K.y3}this._textWidth=L*v,this._textHeight=(m.y+d.lineHeight)*v;for(var X in Ce){var q=Ce[X];if(this.anchor.x!==0||this.anchor.y!==0)for(var ne=0,me=this._textWidth*this.anchor.x,be=this._textHeight*this.anchor.y,ve=0;ve<q.total;ve++)q.vertices[ne++]-=me,q.vertices[ne++]-=be,q.vertices[ne++]-=me,q.vertices[ne++]-=be,q.vertices[ne++]-=me,q.vertices[ne++]-=be,q.vertices[ne++]-=me,q.vertices[ne++]-=be;this._maxLineHeight=z*v;var _e=q.mesh.geometry.getBuffer("aVertexPosition"),fe=q.mesh.geometry.getBuffer("aTextureCoord"),Ne=q.mesh.geometry.getIndex();_e.data=q.vertices,fe.data=q.uvs,Ne.data=q.indices,_e.update(),fe.update(),Ne.update()}for(var X=0;X<g.length;X++)charRenderDataPool.push(g[X])},a.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},a.prototype._render=function(l){this._autoResolution&&this._resolution!==l.resolution&&(this._resolution=l.resolution,this.dirty=!0);var d=BitmapFont.available[this._fontName],v=d.distanceFieldRange,m=d.distanceFieldType,g=d.size;if(m!=="none")for(var T=this.worldTransform,b=T.a,R=T.b,C=T.c,w=T.d,A=Math.sqrt(b*b+R*R),S=Math.sqrt(C*C+w*w),O=(Math.abs(A)+Math.abs(S))/2,L=this._fontSize/g,N=0,U=this._activePagesMeshData;N<U.length;N++){var $=U[N];$.mesh.shader.uniforms.uFWidth=O*v*L*this._resolution}s.prototype._render.call(this,l)},a.prototype.getLocalBounds=function(){return this.validate(),s.prototype.getLocalBounds.call(this)},a.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(a.prototype,"tint",{get:function(){return this._tint},set:function(l){if(this._tint!==l){this._tint=l;for(var d=0;d<this._activePagesMeshData.length;d++)this._activePagesMeshData[d].mesh.tint=l}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"align",{get:function(){return this._align},set:function(l){this._align!==l&&(this._align=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontName",{get:function(){return this._fontName},set:function(l){if(!BitmapFont.available[l])throw new Error('Missing BitmapFont "'+l+'"');this._fontName!==l&&(this._fontName=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontSize",{get:function(){return this._fontSize},set:function(l){this._fontSize!==l&&(this._fontSize=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"anchor",{get:function(){return this._anchor},set:function(l){typeof l=="number"?this._anchor.set(l):this._anchor.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(l){l=String(l==null?"":l),this._text!==l&&(this._text=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(l){this._maxWidth!==l&&(this._maxWidth=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(l){this._letterSpacing!==l&&(this._letterSpacing=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){l!==this._roundPixels&&(this._roundPixels=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resolution",{get:function(){return this._resolution},set:function(l){this._autoResolution=!1,this._resolution!==l&&(this._resolution=l,this.dirty=!0)},enumerable:!1,configurable:!0}),a.prototype.destroy=function(l){var d=this._textureCache;for(var v in d){var m=d[v];m.destroy(),delete d[v]}this._textureCache=null,s.prototype.destroy.call(this,l)},a.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},a}(Container),BitmapFontLoader=function(){function s(){}return s.add=function(){LoaderResource.setExtensionXhrType("fnt",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},s.use=function(a,l){var d=autoDetectFormat(a.data);if(!d){l();return}for(var v=s.getBaseUrl(this,a),m=d.parse(a.data),g={},T=function(L){g[L.metadata.pageFile]=L.texture,Object.keys(g).length===m.page.length&&(a.bitmapFont=BitmapFont.install(m,g,!0),l())},b=0;b<m.page.length;++b){var R=m.page[b].file,C=v+R,w=!1;for(var A in this.resources){var S=this.resources[A];if(S.url===C){S.metadata.pageFile=R,S.texture?T(S):S.onAfterMiddleware.add(T),w=!0;break}}if(!w){var O={crossOrigin:a.crossOrigin,loadType:LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:R},a.metadata.imageMetadata),parentResource:a};this.add(C,O,T)}}},s.getBaseUrl=function(a,l){var d=l.isDataUrl?"":s.dirname(l.url);return l.isDataUrl&&(d==="."&&(d=""),a.baseUrl&&d&&a.baseUrl.charAt(a.baseUrl.length-1)==="/"&&(d+="/")),d=d.replace(a.baseUrl,""),d&&d.charAt(d.length-1)!=="/"&&(d+="/"),d},s.dirname=function(a){var l=a.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return l===a?".":l===""?"/":l},s.extension=ExtensionType.Loader,s}();/*!
 * @pixi/filter-alpha - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$7=function(s,a){return extendStatics$7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$7(s,a)};function __extends$7(s,a){extendStatics$7(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment$4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,AlphaFilter=function(s){__extends$7(a,s);function a(l){l===void 0&&(l=1);var d=s.call(this,defaultVertex$1,fragment$4,{uAlpha:1})||this;return d.alpha=l,d}return Object.defineProperty(a.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(l){this.uniforms.uAlpha=l},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/filter-blur - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$6=function(s,a){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$6(s,a)};function __extends$6(s,a){extendStatics$6(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(s,a){var l=Math.ceil(s/2),d=vertTemplate,v="",m;a?m="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":m="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var g=0;g<s;g++){var T=m.replace("%index%",g.toString());T=T.replace("%sampleIndex%",g-(l-1)+".0"),v+=T,v+=`
`}return d=d.replace("%blur%",v),d=d.replace("%size%",s.toString()),d}var GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(s){for(var a=GAUSSIAN_VALUES[s],l=a.length,d=fragTemplate,v="",m="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",g,T=0;T<s;T++){var b=m.replace("%index%",T.toString());g=T,T>=l&&(g=s-T-1),b=b.replace("%value%",a[g].toString()),v+=b,v+=`
`}return d=d.replace("%blur%",v),d=d.replace("%size%",s.toString()),d}/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$3;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$3||(ENV$3={}));var RENDERER_TYPE$3;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$3||(RENDERER_TYPE$3={}));var BUFFER_BITS$3;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$3||(BUFFER_BITS$3={}));var BLEND_MODES$3;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$3||(BLEND_MODES$3={}));var DRAW_MODES$3;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$3||(DRAW_MODES$3={}));var FORMATS$3;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$3||(FORMATS$3={}));var TARGETS$3;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$3||(TARGETS$3={}));var TYPES$3;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$3||(TYPES$3={}));var SAMPLER_TYPES$3;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$3||(SAMPLER_TYPES$3={}));var SCALE_MODES$3;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$3||(SCALE_MODES$3={}));var WRAP_MODES$3;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$3||(WRAP_MODES$3={}));var MIPMAP_MODES$3;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$3||(MIPMAP_MODES$3={}));var ALPHA_MODES$3;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$3||(ALPHA_MODES$3={}));var CLEAR_MODES$3;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$3||(CLEAR_MODES$3={}));var GC_MODES$3;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$3||(GC_MODES$3={}));var PRECISION$3;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$3||(PRECISION$3={}));var MASK_TYPES$3;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR"})(MASK_TYPES$3||(MASK_TYPES$3={}));var COLOR_MASK_BITS$3;(function(s){s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=4]="BLUE",s[s.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$3||(COLOR_MASK_BITS$3={}));var MSAA_QUALITY$3;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$3||(MSAA_QUALITY$3={}));var BUFFER_TYPE$3;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$3||(BUFFER_TYPE$3={}));var BlurFilterPass=function(s){__extends$6(a,s);function a(l,d,v,m,g){d===void 0&&(d=8),v===void 0&&(v=4),m===void 0&&(m=settings$1.FILTER_RESOLUTION),g===void 0&&(g=5);var T=this,b=generateBlurVertSource(g,l),R=generateBlurFragSource(g);return T=s.call(this,b,R)||this,T.horizontal=l,T.resolution=m,T._quality=0,T.quality=v,T.blur=d,T}return a.prototype.apply=function(l,d,v,m){if(v?this.horizontal?this.uniforms.strength=1/v.width*(v.width/d.width):this.uniforms.strength=1/v.height*(v.height/d.height):this.horizontal?this.uniforms.strength=1/l.renderer.width*(l.renderer.width/d.width):this.uniforms.strength=1/l.renderer.height*(l.renderer.height/d.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)l.applyFilter(this,d,v,m);else{var g=l.getFilterTexture(),T=l.renderer,b=d,R=g;this.state.blend=!1,l.applyFilter(this,b,R,CLEAR_MODES$3.CLEAR);for(var C=1;C<this.passes-1;C++){l.bindAndClear(b,CLEAR_MODES$3.BLIT),this.uniforms.uSampler=R;var w=R;R=b,b=w,T.shader.bind(this),T.geometry.draw(5)}this.state.blend=!0,l.applyFilter(this,R,v,m),l.returnFilterTexture(g)}},Object.defineProperty(a.prototype,"blur",{get:function(){return this.strength},set:function(l){this.padding=1+Math.abs(l)*2,this.strength=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"quality",{get:function(){return this._quality},set:function(l){this._quality=l,this.passes=l},enumerable:!1,configurable:!0}),a}(Filter),BlurFilter=function(s){__extends$6(a,s);function a(l,d,v,m){l===void 0&&(l=8),d===void 0&&(d=4),v===void 0&&(v=settings$1.FILTER_RESOLUTION),m===void 0&&(m=5);var g=s.call(this)||this;return g.blurXFilter=new BlurFilterPass(!0,l,d,v,m),g.blurYFilter=new BlurFilterPass(!1,l,d,v,m),g.resolution=v,g.quality=d,g.blur=l,g.repeatEdgePixels=!1,g}return a.prototype.apply=function(l,d,v,m){var g=Math.abs(this.blurXFilter.strength),T=Math.abs(this.blurYFilter.strength);if(g&&T){var b=l.getFilterTexture();this.blurXFilter.apply(l,d,b,CLEAR_MODES$3.CLEAR),this.blurYFilter.apply(l,b,v,m),l.returnFilterTexture(b)}else T?this.blurYFilter.apply(l,d,v,m):this.blurXFilter.apply(l,d,v,m)},a.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(a.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=this.blurYFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(l){this.blurXFilter.quality=this.blurYFilter.quality=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(l){this.blurYFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(l){this.blurYFilter.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(l){this._repeatEdgePixels=l,this.updatePadding()},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/filter-color-matrix - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$5=function(s,a){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$5(s,a)};function __extends$5(s,a){extendStatics$5(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment$3=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,ColorMatrixFilter=function(s){__extends$5(a,s);function a(){var l=this,d={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return l=s.call(this,defaultFilterVertex,fragment$3,d)||this,l.alpha=1,l}return a.prototype._loadMatrix=function(l,d){d===void 0&&(d=!1);var v=l;d&&(this._multiply(v,this.uniforms.m,l),v=this._colorMatrix(v)),this.uniforms.m=v},a.prototype._multiply=function(l,d,v){return l[0]=d[0]*v[0]+d[1]*v[5]+d[2]*v[10]+d[3]*v[15],l[1]=d[0]*v[1]+d[1]*v[6]+d[2]*v[11]+d[3]*v[16],l[2]=d[0]*v[2]+d[1]*v[7]+d[2]*v[12]+d[3]*v[17],l[3]=d[0]*v[3]+d[1]*v[8]+d[2]*v[13]+d[3]*v[18],l[4]=d[0]*v[4]+d[1]*v[9]+d[2]*v[14]+d[3]*v[19]+d[4],l[5]=d[5]*v[0]+d[6]*v[5]+d[7]*v[10]+d[8]*v[15],l[6]=d[5]*v[1]+d[6]*v[6]+d[7]*v[11]+d[8]*v[16],l[7]=d[5]*v[2]+d[6]*v[7]+d[7]*v[12]+d[8]*v[17],l[8]=d[5]*v[3]+d[6]*v[8]+d[7]*v[13]+d[8]*v[18],l[9]=d[5]*v[4]+d[6]*v[9]+d[7]*v[14]+d[8]*v[19]+d[9],l[10]=d[10]*v[0]+d[11]*v[5]+d[12]*v[10]+d[13]*v[15],l[11]=d[10]*v[1]+d[11]*v[6]+d[12]*v[11]+d[13]*v[16],l[12]=d[10]*v[2]+d[11]*v[7]+d[12]*v[12]+d[13]*v[17],l[13]=d[10]*v[3]+d[11]*v[8]+d[12]*v[13]+d[13]*v[18],l[14]=d[10]*v[4]+d[11]*v[9]+d[12]*v[14]+d[13]*v[19]+d[14],l[15]=d[15]*v[0]+d[16]*v[5]+d[17]*v[10]+d[18]*v[15],l[16]=d[15]*v[1]+d[16]*v[6]+d[17]*v[11]+d[18]*v[16],l[17]=d[15]*v[2]+d[16]*v[7]+d[17]*v[12]+d[18]*v[17],l[18]=d[15]*v[3]+d[16]*v[8]+d[17]*v[13]+d[18]*v[18],l[19]=d[15]*v[4]+d[16]*v[9]+d[17]*v[14]+d[18]*v[19]+d[19],l},a.prototype._colorMatrix=function(l){var d=new Float32Array(l);return d[4]/=255,d[9]/=255,d[14]/=255,d[19]/=255,d},a.prototype.brightness=function(l,d){var v=[l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0];this._loadMatrix(v,d)},a.prototype.tint=function(l,d){var v=l>>16&255,m=l>>8&255,g=l&255,T=[v/255,0,0,0,0,0,m/255,0,0,0,0,0,g/255,0,0,0,0,0,1,0];this._loadMatrix(T,d)},a.prototype.greyscale=function(l,d){var v=[l,l,l,0,0,l,l,l,0,0,l,l,l,0,0,0,0,0,1,0];this._loadMatrix(v,d)},a.prototype.blackAndWhite=function(l){var d=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.hue=function(l,d){l=(l||0)/180*Math.PI;var v=Math.cos(l),m=Math.sin(l),g=Math.sqrt,T=1/3,b=g(T),R=v+(1-v)*T,C=T*(1-v)-b*m,w=T*(1-v)+b*m,A=T*(1-v)+b*m,S=v+T*(1-v),O=T*(1-v)-b*m,L=T*(1-v)-b*m,N=T*(1-v)+b*m,U=v+T*(1-v),$=[R,C,w,0,0,A,S,O,0,0,L,N,U,0,0,0,0,0,1,0];this._loadMatrix($,d)},a.prototype.contrast=function(l,d){var v=(l||0)+1,m=-.5*(v-1),g=[v,0,0,0,m,0,v,0,0,m,0,0,v,0,m,0,0,0,1,0];this._loadMatrix(g,d)},a.prototype.saturate=function(l,d){l===void 0&&(l=0);var v=l*2/3+1,m=(v-1)*-.5,g=[v,m,m,0,0,m,v,m,0,0,m,m,v,0,0,0,0,0,1,0];this._loadMatrix(g,d)},a.prototype.desaturate=function(){this.saturate(-1)},a.prototype.negative=function(l){var d=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.sepia=function(l){var d=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.technicolor=function(l){var d=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.polaroid=function(l){var d=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.toBGR=function(l){var d=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.kodachrome=function(l){var d=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.browni=function(l){var d=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.vintage=function(l){var d=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.colorTone=function(l,d,v,m,g){l=l||.2,d=d||.15,v=v||16770432,m=m||3375104;var T=(v>>16&255)/255,b=(v>>8&255)/255,R=(v&255)/255,C=(m>>16&255)/255,w=(m>>8&255)/255,A=(m&255)/255,S=[.3,.59,.11,0,0,T,b,R,l,0,C,w,A,d,0,T-C,b-w,R-A,0,0];this._loadMatrix(S,g)},a.prototype.night=function(l,d){l=l||.1;var v=[l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0];this._loadMatrix(v,d)},a.prototype.predator=function(l,d){var v=[11.224130630493164*l,-4.794486999511719*l,-2.8746118545532227*l,0*l,.40342438220977783*l,-3.6330697536468506*l,9.193157196044922*l,-2.951810836791992*l,0*l,-1.316135048866272*l,-3.2184197902679443*l,-4.2375030517578125*l,7.476448059082031*l,0*l,.8044459223747253*l,0,0,0,1,0];this._loadMatrix(v,d)},a.prototype.lsd=function(l){var d=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(d,l)},a.prototype.reset=function(){var l=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(l,!1)},Object.defineProperty(a.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(l){this.uniforms.m=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(l){this.uniforms.uAlpha=l},enumerable:!1,configurable:!0}),a}(Filter);ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$4=function(s,a){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$4(s,a)};function __extends$4(s,a){extendStatics$4(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment$2=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,DisplacementFilter=function(s){__extends$4(a,s);function a(l,d){var v=this,m=new Matrix;return l.renderable=!1,v=s.call(this,vertex$1,fragment$2,{mapSampler:l._texture,filterMatrix:m,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,v.maskSprite=l,v.maskMatrix=m,d==null&&(d=20),v.scale=new Point(d,d),v}return a.prototype.apply=function(l,d,v,m){this.uniforms.filterMatrix=l.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var g=this.maskSprite.worldTransform,T=Math.sqrt(g.a*g.a+g.b*g.b),b=Math.sqrt(g.c*g.c+g.d*g.d);T!==0&&b!==0&&(this.uniforms.rotation[0]=g.a/T,this.uniforms.rotation[1]=g.b/T,this.uniforms.rotation[2]=g.c/b,this.uniforms.rotation[3]=g.d/b),l.applyFilter(this,d,v,m)},Object.defineProperty(a.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(l){this.uniforms.mapSampler=l},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/filter-fxaa - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$3=function(s,a){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$3(s,a)};function __extends$3(s,a){extendStatics$3(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var vertex=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,fragment$1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,FXAAFilter=function(s){__extends$3(a,s);function a(){return s.call(this,vertex,fragment$1)||this}return a}(Filter);/*!
 * @pixi/filter-noise - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$2=function(s,a){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$2(s,a)};function __extends$2(s,a){extendStatics$2(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var fragment=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,NoiseFilter=function(s){__extends$2(a,s);function a(l,d){l===void 0&&(l=.5),d===void 0&&(d=Math.random());var v=s.call(this,defaultFilterVertex,fragment,{uNoise:0,uSeed:0})||this;return v.noise=l,v.seed=d,v}return Object.defineProperty(a.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(l){this.uniforms.uNoise=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(l){this.uniforms.uSeed=l},enumerable:!1,configurable:!0}),a}(Filter);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$2;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$2||(ENV$2={}));var RENDERER_TYPE$2;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$2||(RENDERER_TYPE$2={}));var BUFFER_BITS$2;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$2||(BUFFER_BITS$2={}));var BLEND_MODES$2;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$2||(BLEND_MODES$2={}));var DRAW_MODES$2;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$2||(DRAW_MODES$2={}));var FORMATS$2;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$2||(FORMATS$2={}));var TARGETS$2;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$2||(TARGETS$2={}));var TYPES$2;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$2||(TYPES$2={}));var SAMPLER_TYPES$2;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$2||(SAMPLER_TYPES$2={}));var SCALE_MODES$2;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$2||(SCALE_MODES$2={}));var WRAP_MODES$2;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$2||(WRAP_MODES$2={}));var MIPMAP_MODES$2;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$2||(MIPMAP_MODES$2={}));var ALPHA_MODES$2;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$2||(ALPHA_MODES$2={}));var CLEAR_MODES$2;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$2||(CLEAR_MODES$2={}));var GC_MODES$2;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$2||(GC_MODES$2={}));var PRECISION$2;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$2||(PRECISION$2={}));var MASK_TYPES$2;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR"})(MASK_TYPES$2||(MASK_TYPES$2={}));var COLOR_MASK_BITS$2;(function(s){s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=4]="BLUE",s[s.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$2||(COLOR_MASK_BITS$2={}));var MSAA_QUALITY$2;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$2||(MSAA_QUALITY$2={}));var BUFFER_TYPE$2;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$2||(BUFFER_TYPE$2={}));var _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=MSAA_QUALITY$2.NONE;var CacheData=function(){function s(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return s}();Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(s){s!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(s){s!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(s){if(this._cacheAsBitmap!==s){this._cacheAsBitmap=s;var a;s?(this._cacheData||(this._cacheData=new CacheData),a=this._cacheData,a.originalRender=this.render,a.originalRenderCanvas=this.renderCanvas,a.originalUpdateTransform=this.updateTransform,a.originalCalculateBounds=this.calculateBounds,a.originalGetLocalBounds=this.getLocalBounds,a.originalDestroy=this.destroy,a.originalContainsPoint=this.containsPoint,a.originalMask=this._mask,a.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(a=this._cacheData,a.sprite&&this._destroyCachedDisplayObject(),this.render=a.originalRender,this.renderCanvas=a.originalRenderCanvas,this.calculateBounds=a.originalCalculateBounds,this.getLocalBounds=a.originalGetLocalBounds,this.destroy=a.originalDestroy,this.updateTransform=a.originalUpdateTransform,this.containsPoint=a.originalContainsPoint,this._mask=a.originalMask,this.filterArea=a.originalFilterArea)}}}});DisplayObject.prototype._renderCached=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(a))};DisplayObject.prototype._initCachedDisplayObject=function(a){var l;if(!(this._cacheData&&this._cacheData.sprite)){var d=this.alpha;this.alpha=1,a.batch.flush();var v=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var m=this.filters[0].padding;v.pad(m)}v.ceil(settings$1.RESOLUTION);var g=a.renderTexture.current,T=a.renderTexture.sourceFrame.clone(),b=a.renderTexture.destinationFrame.clone(),R=a.projection.transform,C=RenderTexture.create({width:v.width,height:v.height,resolution:this.cacheAsBitmapResolution||a.resolution,multisample:(l=this.cacheAsBitmapMultisample)!==null&&l!==void 0?l:a.multisample}),w="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=w,BaseTexture.addToCache(C.baseTexture,w),Texture.addToCache(C,w);var A=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-v.x,-v.y);this.render=this._cacheData.originalRender,a.render(this,{renderTexture:C,clear:!0,transform:A,skipUpdateTransform:!1}),a.framebuffer.blit(),a.projection.transform=R,a.renderTexture.bind(g,T,b),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=d;var S=new Sprite(C);S.transform.worldTransform=this.transform.worldTransform,S.anchor.x=-(v.x/v.width),S.anchor.y=-(v.y/v.height),S.alpha=d,S._bounds=this._bounds,this._cacheData.sprite=S,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=S.containsPoint.bind(S)}};DisplayObject.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(a))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(a){if(!(this._cacheData&&this._cacheData.sprite)){var l=this.getLocalBounds(null,!0),d=this.alpha;this.alpha=1;var v=a.context,m=a._projTransform;l.ceil(settings$1.RESOLUTION);var g=RenderTexture.create({width:l.width,height:l.height}),T="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=T,BaseTexture.addToCache(g.baseTexture,T),Texture.addToCache(g,T);var b=_tempMatrix;this.transform.localTransform.copyTo(b),b.invert(),b.tx-=l.x,b.ty-=l.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,{renderTexture:g,clear:!0,transform:b,skipUpdateTransform:!1}),a.context=v,a._projTransform=m,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=d;var R=new Sprite(g);R.transform.worldTransform=this.transform.worldTransform,R.anchor.x=-(l.x/l.width),R.anchor.y=-(l.y/l.height),R.alpha=d,R._bounds=this._bounds,this._cacheData.sprite=R,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=R.containsPoint.bind(R)}};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(a){this.cacheAsBitmap=!1,this.destroy(a)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(a,l){for(var d=0,v=this.children.length;d<v;d++)if(this.children[d].name===a)return this.children[d];if(l)for(var d=0,v=this.children.length;d<v;d++){var m=this.children[d];if(!!m.getChildByName){var g=m.getChildByName(a,!0);if(g)return g}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject.prototype.getGlobalPosition=function(a,l){return a===void 0&&(a=new Point),l===void 0&&(l=!1),this.parent?this.parent.toGlobal(this.position,a,l):(a.x=this.position.x,a.y=this.position.y),a};/*!
 * @pixi/app - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ResizePlugin=function(){function s(){}return s.init=function(a){var l=this;Object.defineProperty(this,"resizeTo",{set:function(d){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=d,d&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!l._resizeTo||(l.cancelResize(),l._resizeId=requestAnimationFrame(function(){return l.resize()}))},this.cancelResize=function(){l._resizeId&&(cancelAnimationFrame(l._resizeId),l._resizeId=null)},this.resize=function(){if(!!l._resizeTo){l.cancelResize();var d,v;if(l._resizeTo===globalThis.window)d=globalThis.innerWidth,v=globalThis.innerHeight;else{var m=l._resizeTo,g=m.clientWidth,T=m.clientHeight;d=g,v=T}l.renderer.resize(d,v)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=a.resizeTo||null},s.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},s.extension=ExtensionType.Application,s}();/*!
 * @pixi/settings - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$1;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV$1||(ENV$1={}));var RENDERER_TYPE$1;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE$1||(RENDERER_TYPE$1={}));var BUFFER_BITS$1;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS$1||(BUFFER_BITS$1={}));var BLEND_MODES$1;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES$1||(BLEND_MODES$1={}));var DRAW_MODES$1;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$1||(DRAW_MODES$1={}));var FORMATS$1;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$1||(FORMATS$1={}));var TARGETS$1;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$1||(TARGETS$1={}));var TYPES$1;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$1||(TYPES$1={}));var SAMPLER_TYPES$1;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES$1||(SAMPLER_TYPES$1={}));var SCALE_MODES$1;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES$1||(SCALE_MODES$1={}));var WRAP_MODES$1;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$1||(WRAP_MODES$1={}));var MIPMAP_MODES$1;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$1||(MIPMAP_MODES$1={}));var ALPHA_MODES$1;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$1||(ALPHA_MODES$1={}));var CLEAR_MODES$1;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES$1||(CLEAR_MODES$1={}));var GC_MODES$1;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES$1||(GC_MODES$1={}));var PRECISION$1;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION$1||(PRECISION$1={}));var MASK_TYPES$1;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR"})(MASK_TYPES$1||(MASK_TYPES$1={}));var COLOR_MASK_BITS$1;(function(s){s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=4]="BLUE",s[s.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$1||(COLOR_MASK_BITS$1={}));var MSAA_QUALITY$1;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY$1||(MSAA_QUALITY$1={}));var BUFFER_TYPE$1;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$1||(BUFFER_TYPE$1={}));var BrowserAdapter={createCanvas:function(s,a){var l=document.createElement("canvas");return l.width=s,l.height=a,l},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var s;return(s=document.baseURI)!==null&&s!==void 0?s:window.location.href},fetch:function(s,a){return fetch(s,a)}},appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(s){return typeof s<"u"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(s){return function(a){return a.test(s)}}function isMobile$1(s){var a={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator<"u"?a={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?a.userAgent=s:s&&s.userAgent&&(a={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var l=a.userAgent,d=l.split("[FBAN");typeof d[1]<"u"&&(l=d[0]),d=l.split("Twitter"),typeof d[1]<"u"&&(l=d[0]);var v=createMatch(l),m={apple:{phone:v(appleIphone)&&!v(windowsPhone),ipod:v(appleIpod),tablet:!v(appleIphone)&&(v(appleTablet)||isAppleTabletOnIos13(a))&&!v(windowsPhone),universal:v(appleUniversal),device:(v(appleIphone)||v(appleIpod)||v(appleTablet)||v(appleUniversal)||isAppleTabletOnIos13(a))&&!v(windowsPhone)},amazon:{phone:v(amazonPhone),tablet:!v(amazonPhone)&&v(amazonTablet),device:v(amazonPhone)||v(amazonTablet)},android:{phone:!v(windowsPhone)&&v(amazonPhone)||!v(windowsPhone)&&v(androidPhone),tablet:!v(windowsPhone)&&!v(amazonPhone)&&!v(androidPhone)&&(v(amazonTablet)||v(androidTablet)),device:!v(windowsPhone)&&(v(amazonPhone)||v(amazonTablet)||v(androidPhone)||v(androidTablet))||v(/\bokhttp\b/i)},windows:{phone:v(windowsPhone),tablet:v(windowsTablet),device:v(windowsPhone)||v(windowsTablet)},other:{blackberry:v(otherBlackBerry),blackberry10:v(otherBlackBerry10),opera:v(otherOpera),firefox:v(otherFirefox),chrome:v(otherChrome),device:v(otherBlackBerry)||v(otherBlackBerry10)||v(otherOpera)||v(otherFirefox)||v(otherChrome)},any:!1,phone:!1,tablet:!1};return m.any=m.apple.device||m.android.device||m.windows.device||m.other.device,m.phone=m.apple.phone||m.android.phone||m.windows.phone,m.tablet=m.apple.tablet||m.android.tablet||m.windows.tablet,m}var isMobile=isMobile$1(globalThis.navigator);function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(s){var a=!0;if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){var l=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(l){var d=parseInt(l[1],10);d<11&&(a=!1)}}if(isMobile.android.device){var l=navigator.userAgent.match(/Android\s([0-9.]*)/);if(l){var d=parseInt(l[1],10);d<7&&(a=!1)}}}return a?s:4}var settings={ADAPTER:BrowserAdapter,MIPMAP_TEXTURES:MIPMAP_MODES$1.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$1.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$1.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$1.CLAMP,SCALE_MODE:SCALE_MODES$1.LINEAR,PRECISION_VERTEX:PRECISION$1.HIGH,PRECISION_FRAGMENT:isMobile.apple.device?PRECISION$1.HIGH:PRECISION$1.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule$1(s,a,l){return l={path:a,exports:{},require:function(d,v){return commonjsRequire$1(d,v==null?l.path:v)}},s(l,l.exports),l.exports}function commonjsRequire$1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}createCommonjsModule$1(function(s){var a=Object.prototype.hasOwnProperty,l="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(l=!1));function v(b,R,C){this.fn=b,this.context=R,this.once=C||!1}function m(b,R,C,w,A){if(typeof C!="function")throw new TypeError("The listener must be a function");var S=new v(C,w||b,A),O=l?l+R:R;return b._events[O]?b._events[O].fn?b._events[O]=[b._events[O],S]:b._events[O].push(S):(b._events[O]=S,b._eventsCount++),b}function g(b,R){--b._eventsCount===0?b._events=new d:delete b._events[R]}function T(){this._events=new d,this._eventsCount=0}T.prototype.eventNames=function(){var R=[],C,w;if(this._eventsCount===0)return R;for(w in C=this._events)a.call(C,w)&&R.push(l?w.slice(1):w);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(C)):R},T.prototype.listeners=function(R){var C=l?l+R:R,w=this._events[C];if(!w)return[];if(w.fn)return[w.fn];for(var A=0,S=w.length,O=new Array(S);A<S;A++)O[A]=w[A].fn;return O},T.prototype.listenerCount=function(R){var C=l?l+R:R,w=this._events[C];return w?w.fn?1:w.length:0},T.prototype.emit=function(R,C,w,A,S,O){var L=arguments,N=l?l+R:R;if(!this._events[N])return!1;var U=this._events[N],$=arguments.length,G,z;if(U.fn){switch(U.once&&this.removeListener(R,U.fn,void 0,!0),$){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,C),!0;case 3:return U.fn.call(U.context,C,w),!0;case 4:return U.fn.call(U.context,C,w,A),!0;case 5:return U.fn.call(U.context,C,w,A,S),!0;case 6:return U.fn.call(U.context,C,w,A,S,O),!0}for(z=1,G=new Array($-1);z<$;z++)G[z-1]=L[z];U.fn.apply(U.context,G)}else{var V=U.length,X;for(z=0;z<V;z++)switch(U[z].once&&this.removeListener(R,U[z].fn,void 0,!0),$){case 1:U[z].fn.call(U[z].context);break;case 2:U[z].fn.call(U[z].context,C);break;case 3:U[z].fn.call(U[z].context,C,w);break;case 4:U[z].fn.call(U[z].context,C,w,A);break;default:if(!G)for(X=1,G=new Array($-1);X<$;X++)G[X-1]=L[X];U[z].fn.apply(U[z].context,G)}}return!0},T.prototype.on=function(R,C,w){return m(this,R,C,w,!1)},T.prototype.once=function(R,C,w){return m(this,R,C,w,!0)},T.prototype.removeListener=function(R,C,w,A){var S=l?l+R:R;if(!this._events[S])return this;if(!C)return g(this,S),this;var O=this._events[S];if(O.fn)O.fn===C&&(!A||O.once)&&(!w||O.context===w)&&g(this,S);else{for(var L=0,N=[],U=O.length;L<U;L++)(O[L].fn!==C||A&&!O[L].once||w&&O[L].context!==w)&&N.push(O[L]);N.length?this._events[S]=N.length===1?N[0]:N:g(this,S)}return this},T.prototype.removeAllListeners=function(R){var C;return R?(C=l?l+R:R,this._events[C]&&g(this,C)):(this._events=new d,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prefixed=l,T.EventEmitter=T,s.exports=T});createCommonjsModule$1(function(s,a){(function(l){var d=a&&!a.nodeType&&a,v=s&&!s.nodeType&&s,m=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1;(m.global===m||m.window===m||m.self===m)&&(l=m);var g,T=2147483647,b=36,R=1,C=26,w=38,A=700,S=72,O=128,L="-",N=/^xn--/,U=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,G={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=b-R,V=Math.floor,X=String.fromCharCode,ie;function re(q){throw RangeError(G[q])}function J(q,oe){for(var Te=q.length,we=[];Te--;)we[Te]=oe(q[Te]);return we}function se(q,oe){var Te=q.split("@"),we="";Te.length>1&&(we=Te[0]+"@",q=Te[1]),q=q.replace($,".");var De=q.split("."),Z=J(De,oe).join(".");return we+Z}function xe(q){for(var oe=[],Te=0,we=q.length,De,Z;Te<we;)De=q.charCodeAt(Te++),De>=55296&&De<=56319&&Te<we?(Z=q.charCodeAt(Te++),(Z&64512)==56320?oe.push(((De&1023)<<10)+(Z&1023)+65536):(oe.push(De),Te--)):oe.push(De);return oe}function Ae(q){return J(q,function(oe){var Te="";return oe>65535&&(oe-=65536,Te+=X(oe>>>10&1023|55296),oe=56320|oe&1023),Te+=X(oe),Te}).join("")}function Ue(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:b}function ze(q,oe){return q+22+75*(q<26)-((oe!=0)<<5)}function Ce(q,oe,Te){var we=0;for(q=Te?V(q/A):q>>1,q+=V(q/oe);q>z*C>>1;we+=b)q=V(q/z);return V(we+(z+1)*q/(q+w))}function ye(q){var oe=[],Te=q.length,we,De=0,Z=O,he=S,ue,pe,Pe,Me,ge,Ee,D,H,K;for(ue=q.lastIndexOf(L),ue<0&&(ue=0),pe=0;pe<ue;++pe)q.charCodeAt(pe)>=128&&re("not-basic"),oe.push(q.charCodeAt(pe));for(Pe=ue>0?ue+1:0;Pe<Te;){for(Me=De,ge=1,Ee=b;Pe>=Te&&re("invalid-input"),D=Ue(q.charCodeAt(Pe++)),(D>=b||D>V((T-De)/ge))&&re("overflow"),De+=D*ge,H=Ee<=he?R:Ee>=he+C?C:Ee-he,!(D<H);Ee+=b)K=b-H,ge>V(T/K)&&re("overflow"),ge*=K;we=oe.length+1,he=Ce(De-Me,we,Me==0),V(De/we)>T-Z&&re("overflow"),Z+=V(De/we),De%=we,oe.splice(De++,0,Z)}return Ae(oe)}function Re(q){var oe,Te,we,De,Z,he,ue,pe,Pe,Me,ge,Ee=[],D,H,K,Q;for(q=xe(q),D=q.length,oe=O,Te=0,Z=S,he=0;he<D;++he)ge=q[he],ge<128&&Ee.push(X(ge));for(we=De=Ee.length,De&&Ee.push(L);we<D;){for(ue=T,he=0;he<D;++he)ge=q[he],ge>=oe&&ge<ue&&(ue=ge);for(H=we+1,ue-oe>V((T-Te)/H)&&re("overflow"),Te+=(ue-oe)*H,oe=ue,he=0;he<D;++he)if(ge=q[he],ge<oe&&++Te>T&&re("overflow"),ge==oe){for(pe=Te,Pe=b;Me=Pe<=Z?R:Pe>=Z+C?C:Pe-Z,!(pe<Me);Pe+=b)Q=pe-Me,K=b-Me,Ee.push(X(ze(Me+Q%K,0))),pe=V(Q/K);Ee.push(X(ze(pe,0))),Z=Ce(Te,H,we==De),Te=0,++we}++Te,++oe}return Ee.join("")}function Fe(q){return se(q,function(oe){return N.test(oe)?ye(oe.slice(4).toLowerCase()):oe})}function He(q){return se(q,function(oe){return U.test(oe)?"xn--"+Re(oe):oe})}if(g={version:"1.3.2",ucs2:{decode:xe,encode:Ae},decode:ye,encode:Re,toASCII:He,toUnicode:Fe},d&&v)if(s.exports==d)v.exports=g;else for(ie in g)g.hasOwnProperty(ie)&&(d[ie]=g[ie]);else l.punycode=g})(commonjsGlobal$1)});function hasOwnProperty(s,a){return Object.prototype.hasOwnProperty.call(s,a)}var decode=function(s,a,l,d){a=a||"&",l=l||"=";var v={};if(typeof s!="string"||s.length===0)return v;var m=/\+/g;s=s.split(a);var g=1e3;d&&typeof d.maxKeys=="number"&&(g=d.maxKeys);var T=s.length;g>0&&T>g&&(T=g);for(var b=0;b<T;++b){var R=s[b].replace(m,"%20"),C=R.indexOf(l),w,A,S,O;C>=0?(w=R.substr(0,C),A=R.substr(C+1)):(w=R,A=""),S=decodeURIComponent(w),O=decodeURIComponent(A),hasOwnProperty(v,S)?Array.isArray(v[S])?v[S].push(O):v[S]=[v[S],O]:v[S]=O}return v},stringifyPrimitive=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}},encode=function(s,a,l,d){return a=a||"&",l=l||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(v){var m=encodeURIComponent(stringifyPrimitive(v))+l;return Array.isArray(s[v])?s[v].map(function(g){return m+encodeURIComponent(stringifyPrimitive(g))}).join(a):m+encodeURIComponent(stringifyPrimitive(s[v]))}).join(a):d?encodeURIComponent(stringifyPrimitive(d))+l+encodeURIComponent(stringifyPrimitive(s)):""};createCommonjsModule$1(function(s,a){a.decode=a.parse=decode,a.encode=a.stringify=encode});/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV;(function(s){s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2"})(ENV||(ENV={}));var RENDERER_TYPE;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS"})(RENDERER_TYPE||(RENDERER_TYPE={}));var BUFFER_BITS;(function(s){s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL"})(BUFFER_BITS||(BUFFER_BITS={}));var BLEND_MODES;(function(s){s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR"})(BLEND_MODES||(BLEND_MODES={}));var DRAW_MODES;(function(s){s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES||(DRAW_MODES={}));var FORMATS;(function(s){s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS||(FORMATS={}));var TARGETS;(function(s){s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS||(TARGETS={}));var TYPES;(function(s){s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES||(TYPES={}));var SAMPLER_TYPES;(function(s){s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT"})(SAMPLER_TYPES||(SAMPLER_TYPES={}));var SCALE_MODES;(function(s){s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR"})(SCALE_MODES||(SCALE_MODES={}));var WRAP_MODES;(function(s){s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES||(WRAP_MODES={}));var MIPMAP_MODES;(function(s){s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES||(MIPMAP_MODES={}));var ALPHA_MODES;(function(s){s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES||(ALPHA_MODES={}));var CLEAR_MODES;(function(s){s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT"})(CLEAR_MODES||(CLEAR_MODES={}));var GC_MODES;(function(s){s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL"})(GC_MODES||(GC_MODES={}));var PRECISION;(function(s){s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp"})(PRECISION||(PRECISION={}));var MASK_TYPES;(function(s){s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR"})(MASK_TYPES||(MASK_TYPES={}));var COLOR_MASK_BITS;(function(s){s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=4]="BLUE",s[s.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS||(COLOR_MASK_BITS={}));var MSAA_QUALITY;(function(s){s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH"})(MSAA_QUALITY||(MSAA_QUALITY={}));var BUFFER_TYPE;(function(s){s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE||(BUFFER_TYPE={}));/*!
 * @pixi/utils - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function mapPremultipliedBlendModes(){for(var s=[],a=[],l=0;l<32;l++)s[l]=l,a[l]=l;s[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,s[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,s[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,a[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,a[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,a[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;var d=[];return d.push(a),d.push(s),d}mapPremultipliedBlendModes();var warnings={};function deprecation(s,a,l){if(l===void 0&&(l=3),!warnings[a]){var d=new Error().stack;typeof d>"u"?console.warn("PixiJS Deprecation Warning: ",a+`
Deprecated since v`+s):(d=d.split(`
`).splice(l).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a+`
Deprecated since v`+s),console.warn(d),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",a+`
Deprecated since v`+s),console.warn(d))),warnings[a]=!0}}(function(){function s(a,l,d){this.canvas=settings.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=d||settings.RESOLUTION,this.resize(a,l)}return s.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.resize=function(a,l){this.canvas.width=Math.round(a*this.resolution),this.canvas.height=Math.round(l*this.resolution)},s.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(s.prototype,"width",{get:function(){return this.canvas.width},set:function(a){this.canvas.width=Math.round(a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this.canvas.height},set:function(a){this.canvas.height=Math.round(a)},enumerable:!1,configurable:!0}),s})();var Application=function(){function s(a){var l=this;this.stage=new Container,a=Object.assign({forceCanvas:!1},a),this.renderer=autoDetectRenderer(a),s._plugins.forEach(function(d){d.init.call(l,a)})}return s.registerPlugin=function(a){deprecation("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),extensions.add({type:ExtensionType.Application,ref:a})},s.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(s.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),s.prototype.destroy=function(a,l){var d=this,v=s._plugins.slice(0);v.reverse(),v.forEach(function(m){m.destroy.call(d)}),this.stage.destroy(l),this.stage=null,this.renderer.destroy(a),this.renderer=null},s._plugins=[],s}();extensions.handleByList(ExtensionType.Application,Application._plugins);extensions.add(ResizePlugin);/*!
 * @pixi/mesh-extras - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(s,a){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics$1(s,a)};function __extends$1(s,a){extendStatics$1(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var PlaneGeometry=function(s){__extends$1(a,s);function a(l,d,v,m){l===void 0&&(l=100),d===void 0&&(d=100),v===void 0&&(v=10),m===void 0&&(m=10);var g=s.call(this)||this;return g.segWidth=v,g.segHeight=m,g.width=l,g.height=d,g.build(),g}return a.prototype.build=function(){for(var l=this.segWidth*this.segHeight,d=[],v=[],m=[],g=this.segWidth-1,T=this.segHeight-1,b=this.width/g,R=this.height/T,C=0;C<l;C++){var w=C%this.segWidth,A=C/this.segWidth|0;d.push(w*b,A*R),v.push(w/g,A/T)}for(var S=g*T,C=0;C<S;C++){var O=C%g,L=C/g|0,N=L*this.segWidth+O,U=L*this.segWidth+O+1,$=(L+1)*this.segWidth+O,G=(L+1)*this.segWidth+O+1;m.push(N,U,$,U,G,$)}this.buffers[0].data=new Float32Array(d),this.buffers[1].data=new Float32Array(v),this.indexBuffer.data=new Uint16Array(m),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},a}(MeshGeometry),RopeGeometry=function(s){__extends$1(a,s);function a(l,d,v){l===void 0&&(l=200),v===void 0&&(v=0);var m=s.call(this,new Float32Array(d.length*4),new Float32Array(d.length*4),new Uint16Array((d.length-1)*6))||this;return m.points=d,m._width=l,m.textureScale=v,m.build(),m}return Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),a.prototype.build=function(){var l=this.points;if(!!l){var d=this.getBuffer("aVertexPosition"),v=this.getBuffer("aTextureCoord"),m=this.getIndex();if(!(l.length<1)){d.data.length/4!==l.length&&(d.data=new Float32Array(l.length*4),v.data=new Float32Array(l.length*4),m.data=new Uint16Array((l.length-1)*6));var g=v.data,T=m.data;g[0]=0,g[1]=0,g[2]=0,g[3]=1;for(var b=0,R=l[0],C=this._width*this.textureScale,w=l.length,A=0;A<w;A++){var S=A*4;if(this.textureScale>0){var O=R.x-l[A].x,L=R.y-l[A].y,N=Math.sqrt(O*O+L*L);R=l[A],b+=N/C}else b=A/(w-1);g[S]=b,g[S+1]=0,g[S+2]=b,g[S+3]=1}for(var U=0,A=0;A<w-1;A++){var S=A*2;T[U++]=S,T[U++]=S+1,T[U++]=S+2,T[U++]=S+2,T[U++]=S+1,T[U++]=S+3}v.update(),m.update(),this.updateVertices()}}},a.prototype.updateVertices=function(){var l=this.points;if(!(l.length<1)){for(var d=l[0],v,m=0,g=0,T=this.buffers[0].data,b=l.length,R=0;R<b;R++){var C=l[R],w=R*4;R<l.length-1?v=l[R+1]:v=C,g=-(v.x-d.x),m=v.y-d.y;var A=Math.sqrt(m*m+g*g),S=this.textureScale>0?this.textureScale*this._width/2:this._width/2;m/=A,g/=A,m*=S,g*=S,T[w]=C.x+m,T[w+1]=C.y+g,T[w+2]=C.x-m,T[w+3]=C.y-g,d=C}this.buffers[0].update()}},a.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},a}(MeshGeometry),SimpleRope=function(s){__extends$1(a,s);function a(l,d,v){v===void 0&&(v=0);var m=this,g=new RopeGeometry(l.height,d,v),T=new MeshMaterial(l);return v>0&&(l.baseTexture.wrapMode=WRAP_MODES$5.REPEAT),m=s.call(this,g,T)||this,m.autoUpdate=!0,m}return a.prototype._render=function(l){var d=this.geometry;(this.autoUpdate||d._width!==this.shader.texture.height)&&(d._width=this.shader.texture.height,d.update()),s.prototype._render.call(this,l)},a}(Mesh),SimplePlane=function(s){__extends$1(a,s);function a(l,d,v){var m=this,g=new PlaneGeometry(l.width,l.height,d,v),T=new MeshMaterial(Texture.WHITE);return m=s.call(this,g,T)||this,m.texture=l,m.autoResize=!0,m}return a.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var l=this.geometry,d=this.shader.texture,v=d.width,m=d.height;this.autoResize&&(l.width!==v||l.height!==m)&&(l.width=this.shader.texture.width,l.height=this.shader.texture.height,l.build())},Object.defineProperty(a.prototype,"texture",{get:function(){return this.shader.texture},set:function(l){this.shader.texture!==l&&(this.shader.texture=l,this._textureID=-1,l.baseTexture.valid?this.textureUpdated():l.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),a.prototype._render=function(l){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),s.prototype._render.call(this,l)},a.prototype.destroy=function(l){this.shader.texture.off("update",this.textureUpdated,this),s.prototype.destroy.call(this,l)},a}(Mesh),SimpleMesh=function(s){__extends$1(a,s);function a(l,d,v,m,g){l===void 0&&(l=Texture.EMPTY);var T=this,b=new MeshGeometry(d,v,m);b.getBuffer("aVertexPosition").static=!1;var R=new MeshMaterial(l);return T=s.call(this,b,R,null,g)||this,T.autoUpdate=!0,T}return Object.defineProperty(a.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(l){this.geometry.getBuffer("aVertexPosition").data=l},enumerable:!1,configurable:!0}),a.prototype._render=function(l){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),s.prototype._render.call(this,l)},a}(Mesh),DEFAULT_BORDER_SIZE=10,NineSlicePlane=function(s){__extends$1(a,s);function a(l,d,v,m,g){d===void 0&&(d=DEFAULT_BORDER_SIZE),v===void 0&&(v=DEFAULT_BORDER_SIZE),m===void 0&&(m=DEFAULT_BORDER_SIZE),g===void 0&&(g=DEFAULT_BORDER_SIZE);var T=s.call(this,Texture.WHITE,4,4)||this;return T._origWidth=l.orig.width,T._origHeight=l.orig.height,T._width=T._origWidth,T._height=T._origHeight,T._leftWidth=d,T._rightWidth=m,T._topHeight=v,T._bottomHeight=g,T.texture=l,T}return a.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(a.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(l){this.geometry.getBuffer("aVertexPosition").data=l},enumerable:!1,configurable:!0}),a.prototype.updateHorizontalVertices=function(){var l=this.vertices,d=this._getMinScale();l[9]=l[11]=l[13]=l[15]=this._topHeight*d,l[17]=l[19]=l[21]=l[23]=this._height-this._bottomHeight*d,l[25]=l[27]=l[29]=l[31]=this._height},a.prototype.updateVerticalVertices=function(){var l=this.vertices,d=this._getMinScale();l[2]=l[10]=l[18]=l[26]=this._leftWidth*d,l[4]=l[12]=l[20]=l[28]=this._width-this._rightWidth*d,l[6]=l[14]=l[22]=l[30]=this._width},a.prototype._getMinScale=function(){var l=this._leftWidth+this._rightWidth,d=this._width>l?1:this._width/l,v=this._topHeight+this._bottomHeight,m=this._height>v?1:this._height/v,g=Math.min(d,m);return g},Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(l){this._width=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(l){this._height=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(l){this._leftWidth=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(l){this._rightWidth=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"topHeight",{get:function(){return this._topHeight},set:function(l){this._topHeight=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(l){this._bottomHeight=l,this._refresh()},enumerable:!1,configurable:!0}),a.prototype._refresh=function(){var l=this.texture,d=this.geometry.buffers[1].data;this._origWidth=l.orig.width,this._origHeight=l.orig.height;var v=1/this._origWidth,m=1/this._origHeight;d[0]=d[8]=d[16]=d[24]=0,d[1]=d[3]=d[5]=d[7]=0,d[6]=d[14]=d[22]=d[30]=1,d[25]=d[27]=d[29]=d[31]=1,d[2]=d[10]=d[18]=d[26]=v*this._leftWidth,d[4]=d[12]=d[20]=d[28]=1-v*this._rightWidth,d[9]=d[11]=d[13]=d[15]=m*this._topHeight,d[17]=d[19]=d[21]=d[23]=1-m*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},a}(SimplePlane);/*!
 * @pixi/sprite-animated - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(s,a){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])},extendStatics(s,a)};function __extends(s,a){extendStatics(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var AnimatedSprite=function(s){__extends(a,s);function a(l,d){d===void 0&&(d=!0);var v=s.call(this,l[0]instanceof Texture?l[0]:l[0].texture)||this;return v._textures=null,v._durations=null,v._autoUpdate=d,v._isConnectedToTicker=!1,v.animationSpeed=1,v.loop=!0,v.updateAnchor=!1,v.onComplete=null,v.onFrameChange=null,v.onLoop=null,v._currentTime=0,v._playing=!1,v._previousFrame=null,v.textures=l,v}return a.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},a.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},a.prototype.gotoAndStop=function(l){this.stop();var d=this.currentFrame;this._currentTime=l,d!==this.currentFrame&&this.updateTexture()},a.prototype.gotoAndPlay=function(l){var d=this.currentFrame;this._currentTime=l,d!==this.currentFrame&&this.updateTexture(),this.play()},a.prototype.update=function(l){if(!!this._playing){var d=this.animationSpeed*l,v=this.currentFrame;if(this._durations!==null){var m=this._currentTime%1*this._durations[this.currentFrame];for(m+=d/60*1e3;m<0;)this._currentTime--,m+=this._durations[this.currentFrame];var g=Math.sign(this.animationSpeed*l);for(this._currentTime=Math.floor(this._currentTime);m>=this._durations[this.currentFrame];)m-=this._durations[this.currentFrame]*g,this._currentTime+=g;this._currentTime+=m/this._durations[this.currentFrame]}else this._currentTime+=d;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):v!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<v?this.onLoop():this.animationSpeed<0&&this.currentFrame>v&&this.onLoop()),this.updateTexture())}},a.prototype.updateTexture=function(){var l=this.currentFrame;this._previousFrame!==l&&(this._previousFrame=l,this._texture=this._textures[l],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},a.prototype.destroy=function(l){this.stop(),s.prototype.destroy.call(this,l),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},a.fromFrames=function(l){for(var d=[],v=0;v<l.length;++v)d.push(Texture.from(l[v]));return new a(d)},a.fromImages=function(l){for(var d=[],v=0;v<l.length;++v)d.push(Texture.from(l[v]));return new a(d)},Object.defineProperty(a.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textures",{get:function(){return this._textures},set:function(l){if(l[0]instanceof Texture)this._textures=l,this._durations=null;else{this._textures=[],this._durations=[];for(var d=0;d<l.length;d++)this._textures.push(l[d].texture),this._durations.push(l[d].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentFrame",{get:function(){var l=Math.floor(this._currentTime)%this._textures.length;return l<0&&(l+=this._textures.length),l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(l){l!==this._autoUpdate&&(this._autoUpdate=l,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),a}(Sprite);/*!
 * pixi.js - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */extensions.add(AccessibilityManager,Extract,InteractionManager,ParticleRenderer,Prepare,BatchRenderer,TilingSpriteRenderer,BitmapFontLoader,CompressedTextureLoader,DDSLoader,KTXLoader,SpritesheetLoader,TickerPlugin,AppLoaderPlugin);var filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};const pixi=Object.freeze(Object.defineProperty({__proto__:null,utils,filters,AccessibilityManager,accessibleTarget,InteractionData,InteractionEvent,InteractionManager,InteractionTrackingData,interactiveTarget,get ExtensionType(){return ExtensionType},extensions,AbstractBatchRenderer,AbstractMultiResource,AbstractRenderer,ArrayResource,Attribute,BaseImageResource,BaseRenderTexture,BaseTexture,BatchDrawCall,BatchGeometry,BatchPluginFactory,BatchRenderer,BatchShaderGenerator,BatchSystem,BatchTextureArray,Buffer,BufferResource,CanvasResource,ContextSystem,CubeResource,Filter,FilterState,FilterSystem,Framebuffer,FramebufferSystem,GLFramebuffer,GLProgram,GLTexture,Geometry,GeometrySystem,IGLUniformData,INSTALLED,ImageBitmapResource,ImageResource,MaskData,MaskSystem,ObjectRenderer,Program,ProjectionSystem,Quad,QuadUv,RenderTexture,RenderTexturePool,RenderTextureSystem,Renderer,Resource,SVGResource,ScissorSystem,Shader,ShaderSystem,SpriteMaskFilter,State:State$1,StateSystem,StencilSystem,System:System$1,Texture,TextureGCSystem,TextureMatrix,TextureSystem,TextureUvs,UniformGroup,VERSION,VideoResource,ViewableBuffer,autoDetectRenderer,autoDetectResource,checkMaxIfStatementsInShader,createUBOElements,defaultFilterVertex,defaultVertex:defaultVertex$1,generateProgram,generateUniformBufferSync,getTestContext,getUBOData,resources,systems,uniformParsers,Extract,AppLoaderPlugin,Loader,get LoaderResource(){return LoaderResource},TextureLoader,BlobResource,CompressedTextureLoader,CompressedTextureResource,DDSLoader,FORMATS_TO_COMPONENTS,get INTERNAL_FORMATS(){return INTERNAL_FORMATS},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,KTXLoader,TYPES_TO_BYTES_PER_COMPONENT,TYPES_TO_BYTES_PER_PIXEL,parseDDS,parseKTX,ParticleContainer,ParticleRenderer,BasePrepare,CountLimiter,Prepare,TimeLimiter,Spritesheet,SpritesheetLoader,TilingSprite,TilingSpriteRenderer,BitmapFont,BitmapFontData,BitmapFontLoader,BitmapText,TextFormat,XMLFormat,XMLStringFormat,autoDetectFormat,Ticker,TickerPlugin,get UPDATE_PRIORITY(){return UPDATE_PRIORITY},Application,ResizePlugin,get ALPHA_MODES(){return ALPHA_MODES$5},get BLEND_MODES(){return BLEND_MODES$5},get BUFFER_BITS(){return BUFFER_BITS$5},get BUFFER_TYPE(){return BUFFER_TYPE$5},get CLEAR_MODES(){return CLEAR_MODES$5},get COLOR_MASK_BITS(){return COLOR_MASK_BITS$5},get DRAW_MODES(){return DRAW_MODES$5},get ENV(){return ENV$5},get FORMATS(){return FORMATS$5},get GC_MODES(){return GC_MODES$5},get MASK_TYPES(){return MASK_TYPES$5},get MIPMAP_MODES(){return MIPMAP_MODES$5},get MSAA_QUALITY(){return MSAA_QUALITY$5},get PRECISION(){return PRECISION$5},get RENDERER_TYPE(){return RENDERER_TYPE$5},get SAMPLER_TYPES(){return SAMPLER_TYPES$5},get SCALE_MODES(){return SCALE_MODES$5},get TARGETS(){return TARGETS$5},get TYPES(){return TYPES$5},get WRAP_MODES(){return WRAP_MODES$5},Bounds:Bounds$1,Container,DisplayObject,TemporaryDisplayObject,FillStyle,GRAPHICS_CURVES,Graphics,GraphicsData,GraphicsGeometry,get LINE_CAP(){return LINE_CAP},get LINE_JOIN(){return LINE_JOIN},LineStyle,graphicsUtils,Circle,DEG_TO_RAD,Ellipse,Matrix,ObservablePoint,PI_2,Point,Polygon,RAD_TO_DEG,Rectangle,RoundedRectangle,get SHAPES(){return SHAPES},Transform,groupD8,Mesh,MeshBatchUvs,MeshGeometry,MeshMaterial,NineSlicePlane,PlaneGeometry,RopeGeometry,SimpleMesh,SimplePlane,SimpleRope,Runner,Sprite,AnimatedSprite,get TEXT_GRADIENT(){return TEXT_GRADIENT},Text,TextMetrics,TextStyle,BrowserAdapter:BrowserAdapter$1,isMobile:isMobile$2,settings:settings$1},Symbol.toStringTag,{value:"Module"}));var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(s,a){(function(){var l,d="4.17.21",v=200,m="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",g="Expected a function",T="Invalid `variable` option passed into `_.template`",b="__lodash_hash_undefined__",R=500,C="__lodash_placeholder__",w=1,A=2,S=4,O=1,L=2,N=1,U=2,$=4,G=8,z=16,V=32,X=64,ie=128,re=256,J=512,se=30,xe="...",Ae=800,Ue=16,ze=1,Ce=2,ye=3,Re=1/0,Fe=9007199254740991,He=17976931348623157e292,q=0/0,oe=4294967295,Te=oe-1,we=oe>>>1,De=[["ary",ie],["bind",N],["bindKey",U],["curry",G],["curryRight",z],["flip",J],["partial",V],["partialRight",X],["rearg",re]],Z="[object Arguments]",he="[object Array]",ue="[object AsyncFunction]",pe="[object Boolean]",Pe="[object Date]",Me="[object DOMException]",ge="[object Error]",Ee="[object Function]",D="[object GeneratorFunction]",H="[object Map]",K="[object Number]",Q="[object Null]",ne="[object Object]",me="[object Promise]",be="[object Proxy]",ve="[object RegExp]",_e="[object Set]",fe="[object String]",Ne="[object Symbol]",Oe="[object Undefined]",Be="[object WeakMap]",Xe="[object WeakSet]",qe="[object ArrayBuffer]",et="[object DataView]",tt="[object Float32Array]",it="[object Float64Array]",xt="[object Int8Array]",Kt="[object Int16Array]",Ar="[object Int32Array]",er="[object Uint8Array]",Pr="[object Uint8ClampedArray]",mt="[object Uint16Array]",Ct="[object Uint32Array]",on=/\b__p \+= '';/g,Ga=/\b(__p \+=) '' \+/g,ka=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ls=/&(?:amp|lt|gt|quot|#39);/g,hs=/[&<>"']/g,Ha=RegExp(ls.source),Xa=RegExp(hs.source),Va=/<%-([\s\S]+?)%>/g,Wa=/<%([\s\S]+?)%>/g,cs=/<%=([\s\S]+?)%>/g,za=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ja=/^\w*$/,Ya=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kn=/[\\^$.*+?()[\]{}|]/g,qa=RegExp(Kn.source),Zn=/^\s+/,Ka=/\s/,Za=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ja=/\{\n\/\* \[wrapped with (.+)\] \*/,Qa=/,? & /,eu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tu=/[()=,{}\[\]\/\s]/,ru=/\\(\\)?/g,nu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fs=/\w*$/,iu=/^[-+]0x[0-9a-f]+$/i,su=/^0b[01]+$/i,ou=/^\[object .+?Constructor\]$/,au=/^0o[0-7]+$/i,uu=/^(?:0|[1-9]\d*)$/,lu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,an=/($^)/,hu=/['\n\r\u2028\u2029\\]/g,un="\\ud800-\\udfff",cu="\\u0300-\\u036f",fu="\\ufe20-\\ufe2f",du="\\u20d0-\\u20ff",ds=cu+fu+du,ps="\\u2700-\\u27bf",vs="a-z\\xdf-\\xf6\\xf8-\\xff",pu="\\xac\\xb1\\xd7\\xf7",vu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_u="\\u2000-\\u206f",mu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_s="A-Z\\xc0-\\xd6\\xd8-\\xde",ms="\\ufe0e\\ufe0f",gs=pu+vu+_u+mu,Jn="['\u2019]",gu="["+un+"]",ys="["+gs+"]",ln="["+ds+"]",Ts="\\d+",yu="["+ps+"]",Es="["+vs+"]",xs="[^"+un+gs+Ts+ps+vs+_s+"]",Qn="\\ud83c[\\udffb-\\udfff]",Tu="(?:"+ln+"|"+Qn+")",bs="[^"+un+"]",ei="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",Sr="["+_s+"]",Rs="\\u200d",Is="(?:"+Es+"|"+xs+")",Eu="(?:"+Sr+"|"+xs+")",Cs="(?:"+Jn+"(?:d|ll|m|re|s|t|ve))?",ws="(?:"+Jn+"(?:D|LL|M|RE|S|T|VE))?",As=Tu+"?",Ps="["+ms+"]?",xu="(?:"+Rs+"(?:"+[bs,ei,ti].join("|")+")"+Ps+As+")*",bu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ru="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ss=Ps+As+xu,Iu="(?:"+[yu,ei,ti].join("|")+")"+Ss,Cu="(?:"+[bs+ln+"?",ln,ei,ti,gu].join("|")+")",wu=RegExp(Jn,"g"),Au=RegExp(ln,"g"),ri=RegExp(Qn+"(?="+Qn+")|"+Cu+Ss,"g"),Pu=RegExp([Sr+"?"+Es+"+"+Cs+"(?="+[ys,Sr,"$"].join("|")+")",Eu+"+"+ws+"(?="+[ys,Sr+Is,"$"].join("|")+")",Sr+"?"+Is+"+"+Cs,Sr+"+"+ws,Ru,bu,Ts,Iu].join("|"),"g"),Su=RegExp("["+Rs+un+ds+ms+"]"),Ou=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Nu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mu=-1,ut={};ut[tt]=ut[it]=ut[xt]=ut[Kt]=ut[Ar]=ut[er]=ut[Pr]=ut[mt]=ut[Ct]=!0,ut[Z]=ut[he]=ut[qe]=ut[pe]=ut[et]=ut[Pe]=ut[ge]=ut[Ee]=ut[H]=ut[K]=ut[ne]=ut[ve]=ut[_e]=ut[fe]=ut[Be]=!1;var at={};at[Z]=at[he]=at[qe]=at[et]=at[pe]=at[Pe]=at[tt]=at[it]=at[xt]=at[Kt]=at[Ar]=at[H]=at[K]=at[ne]=at[ve]=at[_e]=at[fe]=at[Ne]=at[er]=at[Pr]=at[mt]=at[Ct]=!0,at[ge]=at[Ee]=at[Be]=!1;var Lu={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Uu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Du=parseFloat,$u=parseInt,Os=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2,Gu=typeof self=="object"&&self&&self.Object===Object&&self,gt=Os||Gu||Function("return this")(),ni=a&&!a.nodeType&&a,yr=ni&&!0&&s&&!s.nodeType&&s,Ns=yr&&yr.exports===ni,ii=Ns&&Os.process,Bt=function(){try{var j=yr&&yr.require&&yr.require("util").types;return j||ii&&ii.binding&&ii.binding("util")}catch{}}(),Ms=Bt&&Bt.isArrayBuffer,Ls=Bt&&Bt.isDate,Us=Bt&&Bt.isMap,Fs=Bt&&Bt.isRegExp,Bs=Bt&&Bt.isSet,Ds=Bt&&Bt.isTypedArray;function Ot(j,te,ee){switch(ee.length){case 0:return j.call(te);case 1:return j.call(te,ee[0]);case 2:return j.call(te,ee[0],ee[1]);case 3:return j.call(te,ee[0],ee[1],ee[2])}return j.apply(te,ee)}function ku(j,te,ee,Se){for(var Ve=-1,rt=j==null?0:j.length;++Ve<rt;){var pt=j[Ve];te(Se,pt,ee(pt),j)}return Se}function Dt(j,te){for(var ee=-1,Se=j==null?0:j.length;++ee<Se&&te(j[ee],ee,j)!==!1;);return j}function Hu(j,te){for(var ee=j==null?0:j.length;ee--&&te(j[ee],ee,j)!==!1;);return j}function $s(j,te){for(var ee=-1,Se=j==null?0:j.length;++ee<Se;)if(!te(j[ee],ee,j))return!1;return!0}function hr(j,te){for(var ee=-1,Se=j==null?0:j.length,Ve=0,rt=[];++ee<Se;){var pt=j[ee];te(pt,ee,j)&&(rt[Ve++]=pt)}return rt}function hn(j,te){var ee=j==null?0:j.length;return!!ee&&Or(j,te,0)>-1}function si(j,te,ee){for(var Se=-1,Ve=j==null?0:j.length;++Se<Ve;)if(ee(te,j[Se]))return!0;return!1}function lt(j,te){for(var ee=-1,Se=j==null?0:j.length,Ve=Array(Se);++ee<Se;)Ve[ee]=te(j[ee],ee,j);return Ve}function cr(j,te){for(var ee=-1,Se=te.length,Ve=j.length;++ee<Se;)j[Ve+ee]=te[ee];return j}function oi(j,te,ee,Se){var Ve=-1,rt=j==null?0:j.length;for(Se&&rt&&(ee=j[++Ve]);++Ve<rt;)ee=te(ee,j[Ve],Ve,j);return ee}function Xu(j,te,ee,Se){var Ve=j==null?0:j.length;for(Se&&Ve&&(ee=j[--Ve]);Ve--;)ee=te(ee,j[Ve],Ve,j);return ee}function ai(j,te){for(var ee=-1,Se=j==null?0:j.length;++ee<Se;)if(te(j[ee],ee,j))return!0;return!1}var Vu=ui("length");function Wu(j){return j.split("")}function zu(j){return j.match(eu)||[]}function Gs(j,te,ee){var Se;return ee(j,function(Ve,rt,pt){if(te(Ve,rt,pt))return Se=rt,!1}),Se}function cn(j,te,ee,Se){for(var Ve=j.length,rt=ee+(Se?1:-1);Se?rt--:++rt<Ve;)if(te(j[rt],rt,j))return rt;return-1}function Or(j,te,ee){return te===te?il(j,te,ee):cn(j,ks,ee)}function ju(j,te,ee,Se){for(var Ve=ee-1,rt=j.length;++Ve<rt;)if(Se(j[Ve],te))return Ve;return-1}function ks(j){return j!==j}function Hs(j,te){var ee=j==null?0:j.length;return ee?hi(j,te)/ee:q}function ui(j){return function(te){return te==null?l:te[j]}}function li(j){return function(te){return j==null?l:j[te]}}function Xs(j,te,ee,Se,Ve){return Ve(j,function(rt,pt,ot){ee=Se?(Se=!1,rt):te(ee,rt,pt,ot)}),ee}function Yu(j,te){var ee=j.length;for(j.sort(te);ee--;)j[ee]=j[ee].value;return j}function hi(j,te){for(var ee,Se=-1,Ve=j.length;++Se<Ve;){var rt=te(j[Se]);rt!==l&&(ee=ee===l?rt:ee+rt)}return ee}function ci(j,te){for(var ee=-1,Se=Array(j);++ee<j;)Se[ee]=te(ee);return Se}function qu(j,te){return lt(te,function(ee){return[ee,j[ee]]})}function Vs(j){return j&&j.slice(0,Ys(j)+1).replace(Zn,"")}function Nt(j){return function(te){return j(te)}}function fi(j,te){return lt(te,function(ee){return j[ee]})}function Vr(j,te){return j.has(te)}function Ws(j,te){for(var ee=-1,Se=j.length;++ee<Se&&Or(te,j[ee],0)>-1;);return ee}function zs(j,te){for(var ee=j.length;ee--&&Or(te,j[ee],0)>-1;);return ee}function Ku(j,te){for(var ee=j.length,Se=0;ee--;)j[ee]===te&&++Se;return Se}var Zu=li(Lu),Ju=li(Uu);function Qu(j){return"\\"+Bu[j]}function el(j,te){return j==null?l:j[te]}function Nr(j){return Su.test(j)}function tl(j){return Ou.test(j)}function rl(j){for(var te,ee=[];!(te=j.next()).done;)ee.push(te.value);return ee}function di(j){var te=-1,ee=Array(j.size);return j.forEach(function(Se,Ve){ee[++te]=[Ve,Se]}),ee}function js(j,te){return function(ee){return j(te(ee))}}function fr(j,te){for(var ee=-1,Se=j.length,Ve=0,rt=[];++ee<Se;){var pt=j[ee];(pt===te||pt===C)&&(j[ee]=C,rt[Ve++]=ee)}return rt}function fn(j){var te=-1,ee=Array(j.size);return j.forEach(function(Se){ee[++te]=Se}),ee}function nl(j){var te=-1,ee=Array(j.size);return j.forEach(function(Se){ee[++te]=[Se,Se]}),ee}function il(j,te,ee){for(var Se=ee-1,Ve=j.length;++Se<Ve;)if(j[Se]===te)return Se;return-1}function sl(j,te,ee){for(var Se=ee+1;Se--;)if(j[Se]===te)return Se;return Se}function Mr(j){return Nr(j)?al(j):Vu(j)}function zt(j){return Nr(j)?ul(j):Wu(j)}function Ys(j){for(var te=j.length;te--&&Ka.test(j.charAt(te)););return te}var ol=li(Fu);function al(j){for(var te=ri.lastIndex=0;ri.test(j);)++te;return te}function ul(j){return j.match(ri)||[]}function ll(j){return j.match(Pu)||[]}var hl=function j(te){te=te==null?gt:Lr.defaults(gt.Object(),te,Lr.pick(gt,Nu));var ee=te.Array,Se=te.Date,Ve=te.Error,rt=te.Function,pt=te.Math,ot=te.Object,pi=te.RegExp,cl=te.String,$t=te.TypeError,dn=ee.prototype,fl=rt.prototype,Ur=ot.prototype,pn=te["__core-js_shared__"],vn=fl.toString,st=Ur.hasOwnProperty,dl=0,qs=function(){var y=/[^.]+$/.exec(pn&&pn.keys&&pn.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),_n=Ur.toString,pl=vn.call(ot),vl=gt._,_l=pi("^"+vn.call(st).replace(Kn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=Ns?te.Buffer:l,dr=te.Symbol,gn=te.Uint8Array,Ks=mn?mn.allocUnsafe:l,yn=js(ot.getPrototypeOf,ot),Zs=ot.create,Js=Ur.propertyIsEnumerable,Tn=dn.splice,Qs=dr?dr.isConcatSpreadable:l,Wr=dr?dr.iterator:l,Tr=dr?dr.toStringTag:l,En=function(){try{var y=Ir(ot,"defineProperty");return y({},"",{}),y}catch{}}(),ml=te.clearTimeout!==gt.clearTimeout&&te.clearTimeout,gl=Se&&Se.now!==gt.Date.now&&Se.now,yl=te.setTimeout!==gt.setTimeout&&te.setTimeout,xn=pt.ceil,bn=pt.floor,vi=ot.getOwnPropertySymbols,Tl=mn?mn.isBuffer:l,eo=te.isFinite,El=dn.join,xl=js(ot.keys,ot),vt=pt.max,Tt=pt.min,bl=Se.now,Rl=te.parseInt,to=pt.random,Il=dn.reverse,_i=Ir(te,"DataView"),zr=Ir(te,"Map"),mi=Ir(te,"Promise"),Fr=Ir(te,"Set"),jr=Ir(te,"WeakMap"),Yr=Ir(ot,"create"),Rn=jr&&new jr,Br={},Cl=Cr(_i),wl=Cr(zr),Al=Cr(mi),Pl=Cr(Fr),Sl=Cr(jr),In=dr?dr.prototype:l,qr=In?In.valueOf:l,ro=In?In.toString:l;function F(y){if(ct(y)&&!We(y)&&!(y instanceof Je)){if(y instanceof Gt)return y;if(st.call(y,"__wrapped__"))return ia(y)}return new Gt(y)}var Dr=function(){function y(){}return function(E){if(!ht(E))return{};if(Zs)return Zs(E);y.prototype=E;var I=new y;return y.prototype=l,I}}();function Cn(){}function Gt(y,E){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!E,this.__index__=0,this.__values__=l}F.templateSettings={escape:Va,evaluate:Wa,interpolate:cs,variable:"",imports:{_:F}},F.prototype=Cn.prototype,F.prototype.constructor=F,Gt.prototype=Dr(Cn.prototype),Gt.prototype.constructor=Gt;function Je(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=oe,this.__views__=[]}function Ol(){var y=new Je(this.__wrapped__);return y.__actions__=wt(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=wt(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=wt(this.__views__),y}function Nl(){if(this.__filtered__){var y=new Je(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function Ml(){var y=this.__wrapped__.value(),E=this.__dir__,I=We(y),P=E<0,M=I?y.length:0,B=Wh(0,M,this.__views__),k=B.start,W=B.end,Y=W-k,ae=P?W:k-1,le=this.__iteratees__,de=le.length,Ie=0,Le=Tt(Y,this.__takeCount__);if(!I||!P&&M==Y&&Le==Y)return wo(y,this.__actions__);var Ge=[];e:for(;Y--&&Ie<Le;){ae+=E;for(var Ye=-1,ke=y[ae];++Ye<de;){var Ze=le[Ye],Qe=Ze.iteratee,Ut=Ze.type,It=Qe(ke);if(Ut==Ce)ke=It;else if(!It){if(Ut==ze)continue e;break e}}Ge[Ie++]=ke}return Ge}Je.prototype=Dr(Cn.prototype),Je.prototype.constructor=Je;function Er(y){var E=-1,I=y==null?0:y.length;for(this.clear();++E<I;){var P=y[E];this.set(P[0],P[1])}}function Ll(){this.__data__=Yr?Yr(null):{},this.size=0}function Ul(y){var E=this.has(y)&&delete this.__data__[y];return this.size-=E?1:0,E}function Fl(y){var E=this.__data__;if(Yr){var I=E[y];return I===b?l:I}return st.call(E,y)?E[y]:l}function Bl(y){var E=this.__data__;return Yr?E[y]!==l:st.call(E,y)}function Dl(y,E){var I=this.__data__;return this.size+=this.has(y)?0:1,I[y]=Yr&&E===l?b:E,this}Er.prototype.clear=Ll,Er.prototype.delete=Ul,Er.prototype.get=Fl,Er.prototype.has=Bl,Er.prototype.set=Dl;function tr(y){var E=-1,I=y==null?0:y.length;for(this.clear();++E<I;){var P=y[E];this.set(P[0],P[1])}}function $l(){this.__data__=[],this.size=0}function Gl(y){var E=this.__data__,I=wn(E,y);if(I<0)return!1;var P=E.length-1;return I==P?E.pop():Tn.call(E,I,1),--this.size,!0}function kl(y){var E=this.__data__,I=wn(E,y);return I<0?l:E[I][1]}function Hl(y){return wn(this.__data__,y)>-1}function Xl(y,E){var I=this.__data__,P=wn(I,y);return P<0?(++this.size,I.push([y,E])):I[P][1]=E,this}tr.prototype.clear=$l,tr.prototype.delete=Gl,tr.prototype.get=kl,tr.prototype.has=Hl,tr.prototype.set=Xl;function rr(y){var E=-1,I=y==null?0:y.length;for(this.clear();++E<I;){var P=y[E];this.set(P[0],P[1])}}function Vl(){this.size=0,this.__data__={hash:new Er,map:new(zr||tr),string:new Er}}function Wl(y){var E=$n(this,y).delete(y);return this.size-=E?1:0,E}function zl(y){return $n(this,y).get(y)}function jl(y){return $n(this,y).has(y)}function Yl(y,E){var I=$n(this,y),P=I.size;return I.set(y,E),this.size+=I.size==P?0:1,this}rr.prototype.clear=Vl,rr.prototype.delete=Wl,rr.prototype.get=zl,rr.prototype.has=jl,rr.prototype.set=Yl;function xr(y){var E=-1,I=y==null?0:y.length;for(this.__data__=new rr;++E<I;)this.add(y[E])}function ql(y){return this.__data__.set(y,b),this}function Kl(y){return this.__data__.has(y)}xr.prototype.add=xr.prototype.push=ql,xr.prototype.has=Kl;function jt(y){var E=this.__data__=new tr(y);this.size=E.size}function Zl(){this.__data__=new tr,this.size=0}function Jl(y){var E=this.__data__,I=E.delete(y);return this.size=E.size,I}function Ql(y){return this.__data__.get(y)}function eh(y){return this.__data__.has(y)}function th(y,E){var I=this.__data__;if(I instanceof tr){var P=I.__data__;if(!zr||P.length<v-1)return P.push([y,E]),this.size=++I.size,this;I=this.__data__=new rr(P)}return I.set(y,E),this.size=I.size,this}jt.prototype.clear=Zl,jt.prototype.delete=Jl,jt.prototype.get=Ql,jt.prototype.has=eh,jt.prototype.set=th;function no(y,E){var I=We(y),P=!I&&wr(y),M=!I&&!P&&gr(y),B=!I&&!P&&!M&&Hr(y),k=I||P||M||B,W=k?ci(y.length,cl):[],Y=W.length;for(var ae in y)(E||st.call(y,ae))&&!(k&&(ae=="length"||M&&(ae=="offset"||ae=="parent")||B&&(ae=="buffer"||ae=="byteLength"||ae=="byteOffset")||or(ae,Y)))&&W.push(ae);return W}function io(y){var E=y.length;return E?y[Ai(0,E-1)]:l}function rh(y,E){return Gn(wt(y),br(E,0,y.length))}function nh(y){return Gn(wt(y))}function gi(y,E,I){(I!==l&&!Yt(y[E],I)||I===l&&!(E in y))&&nr(y,E,I)}function Kr(y,E,I){var P=y[E];(!(st.call(y,E)&&Yt(P,I))||I===l&&!(E in y))&&nr(y,E,I)}function wn(y,E){for(var I=y.length;I--;)if(Yt(y[I][0],E))return I;return-1}function ih(y,E,I,P){return pr(y,function(M,B,k){E(P,M,I(M),k)}),P}function so(y,E){return y&&Jt(E,_t(E),y)}function sh(y,E){return y&&Jt(E,Pt(E),y)}function nr(y,E,I){E=="__proto__"&&En?En(y,E,{configurable:!0,enumerable:!0,value:I,writable:!0}):y[E]=I}function yi(y,E){for(var I=-1,P=E.length,M=ee(P),B=y==null;++I<P;)M[I]=B?l:Qi(y,E[I]);return M}function br(y,E,I){return y===y&&(I!==l&&(y=y<=I?y:I),E!==l&&(y=y>=E?y:E)),y}function kt(y,E,I,P,M,B){var k,W=E&w,Y=E&A,ae=E&S;if(I&&(k=M?I(y,P,M,B):I(y)),k!==l)return k;if(!ht(y))return y;var le=We(y);if(le){if(k=jh(y),!W)return wt(y,k)}else{var de=Et(y),Ie=de==Ee||de==D;if(gr(y))return So(y,W);if(de==ne||de==Z||Ie&&!M){if(k=Y||Ie?{}:qo(y),!W)return Y?Fh(y,sh(k,y)):Uh(y,so(k,y))}else{if(!at[de])return M?y:{};k=Yh(y,de,W)}}B||(B=new jt);var Le=B.get(y);if(Le)return Le;B.set(y,k),Ia(y)?y.forEach(function(ke){k.add(kt(ke,E,I,ke,y,B))}):ba(y)&&y.forEach(function(ke,Ze){k.set(Ze,kt(ke,E,I,Ze,y,B))});var Ge=ae?Y?$i:Di:Y?Pt:_t,Ye=le?l:Ge(y);return Dt(Ye||y,function(ke,Ze){Ye&&(Ze=ke,ke=y[Ze]),Kr(k,Ze,kt(ke,E,I,Ze,y,B))}),k}function oh(y){var E=_t(y);return function(I){return oo(I,y,E)}}function oo(y,E,I){var P=I.length;if(y==null)return!P;for(y=ot(y);P--;){var M=I[P],B=E[M],k=y[M];if(k===l&&!(M in y)||!B(k))return!1}return!0}function ao(y,E,I){if(typeof y!="function")throw new $t(g);return nn(function(){y.apply(l,I)},E)}function Zr(y,E,I,P){var M=-1,B=hn,k=!0,W=y.length,Y=[],ae=E.length;if(!W)return Y;I&&(E=lt(E,Nt(I))),P?(B=si,k=!1):E.length>=v&&(B=Vr,k=!1,E=new xr(E));e:for(;++M<W;){var le=y[M],de=I==null?le:I(le);if(le=P||le!==0?le:0,k&&de===de){for(var Ie=ae;Ie--;)if(E[Ie]===de)continue e;Y.push(le)}else B(E,de,P)||Y.push(le)}return Y}var pr=Uo(Zt),uo=Uo(Ei,!0);function ah(y,E){var I=!0;return pr(y,function(P,M,B){return I=!!E(P,M,B),I}),I}function An(y,E,I){for(var P=-1,M=y.length;++P<M;){var B=y[P],k=E(B);if(k!=null&&(W===l?k===k&&!Lt(k):I(k,W)))var W=k,Y=B}return Y}function uh(y,E,I,P){var M=y.length;for(I=je(I),I<0&&(I=-I>M?0:M+I),P=P===l||P>M?M:je(P),P<0&&(P+=M),P=I>P?0:wa(P);I<P;)y[I++]=E;return y}function lo(y,E){var I=[];return pr(y,function(P,M,B){E(P,M,B)&&I.push(P)}),I}function yt(y,E,I,P,M){var B=-1,k=y.length;for(I||(I=Kh),M||(M=[]);++B<k;){var W=y[B];E>0&&I(W)?E>1?yt(W,E-1,I,P,M):cr(M,W):P||(M[M.length]=W)}return M}var Ti=Fo(),ho=Fo(!0);function Zt(y,E){return y&&Ti(y,E,_t)}function Ei(y,E){return y&&ho(y,E,_t)}function Pn(y,E){return hr(E,function(I){return ar(y[I])})}function Rr(y,E){E=_r(E,y);for(var I=0,P=E.length;y!=null&&I<P;)y=y[Qt(E[I++])];return I&&I==P?y:l}function co(y,E,I){var P=E(y);return We(y)?P:cr(P,I(y))}function bt(y){return y==null?y===l?Oe:Q:Tr&&Tr in ot(y)?Vh(y):nc(y)}function xi(y,E){return y>E}function lh(y,E){return y!=null&&st.call(y,E)}function hh(y,E){return y!=null&&E in ot(y)}function ch(y,E,I){return y>=Tt(E,I)&&y<vt(E,I)}function bi(y,E,I){for(var P=I?si:hn,M=y[0].length,B=y.length,k=B,W=ee(B),Y=1/0,ae=[];k--;){var le=y[k];k&&E&&(le=lt(le,Nt(E))),Y=Tt(le.length,Y),W[k]=!I&&(E||M>=120&&le.length>=120)?new xr(k&&le):l}le=y[0];var de=-1,Ie=W[0];e:for(;++de<M&&ae.length<Y;){var Le=le[de],Ge=E?E(Le):Le;if(Le=I||Le!==0?Le:0,!(Ie?Vr(Ie,Ge):P(ae,Ge,I))){for(k=B;--k;){var Ye=W[k];if(!(Ye?Vr(Ye,Ge):P(y[k],Ge,I)))continue e}Ie&&Ie.push(Ge),ae.push(Le)}}return ae}function fh(y,E,I,P){return Zt(y,function(M,B,k){E(P,I(M),B,k)}),P}function Jr(y,E,I){E=_r(E,y),y=Qo(y,E);var P=y==null?y:y[Qt(Xt(E))];return P==null?l:Ot(P,y,I)}function fo(y){return ct(y)&&bt(y)==Z}function dh(y){return ct(y)&&bt(y)==qe}function ph(y){return ct(y)&&bt(y)==Pe}function Qr(y,E,I,P,M){return y===E?!0:y==null||E==null||!ct(y)&&!ct(E)?y!==y&&E!==E:vh(y,E,I,P,Qr,M)}function vh(y,E,I,P,M,B){var k=We(y),W=We(E),Y=k?he:Et(y),ae=W?he:Et(E);Y=Y==Z?ne:Y,ae=ae==Z?ne:ae;var le=Y==ne,de=ae==ne,Ie=Y==ae;if(Ie&&gr(y)){if(!gr(E))return!1;k=!0,le=!1}if(Ie&&!le)return B||(B=new jt),k||Hr(y)?zo(y,E,I,P,M,B):Hh(y,E,Y,I,P,M,B);if(!(I&O)){var Le=le&&st.call(y,"__wrapped__"),Ge=de&&st.call(E,"__wrapped__");if(Le||Ge){var Ye=Le?y.value():y,ke=Ge?E.value():E;return B||(B=new jt),M(Ye,ke,I,P,B)}}return Ie?(B||(B=new jt),Xh(y,E,I,P,M,B)):!1}function _h(y){return ct(y)&&Et(y)==H}function Ri(y,E,I,P){var M=I.length,B=M,k=!P;if(y==null)return!B;for(y=ot(y);M--;){var W=I[M];if(k&&W[2]?W[1]!==y[W[0]]:!(W[0]in y))return!1}for(;++M<B;){W=I[M];var Y=W[0],ae=y[Y],le=W[1];if(k&&W[2]){if(ae===l&&!(Y in y))return!1}else{var de=new jt;if(P)var Ie=P(ae,le,Y,y,E,de);if(!(Ie===l?Qr(le,ae,O|L,P,de):Ie))return!1}}return!0}function po(y){if(!ht(y)||Jh(y))return!1;var E=ar(y)?_l:ou;return E.test(Cr(y))}function mh(y){return ct(y)&&bt(y)==ve}function gh(y){return ct(y)&&Et(y)==_e}function yh(y){return ct(y)&&zn(y.length)&&!!ut[bt(y)]}function vo(y){return typeof y=="function"?y:y==null?St:typeof y=="object"?We(y)?go(y[0],y[1]):mo(y):Da(y)}function Ii(y){if(!rn(y))return xl(y);var E=[];for(var I in ot(y))st.call(y,I)&&I!="constructor"&&E.push(I);return E}function Th(y){if(!ht(y))return rc(y);var E=rn(y),I=[];for(var P in y)P=="constructor"&&(E||!st.call(y,P))||I.push(P);return I}function Ci(y,E){return y<E}function _o(y,E){var I=-1,P=At(y)?ee(y.length):[];return pr(y,function(M,B,k){P[++I]=E(M,B,k)}),P}function mo(y){var E=ki(y);return E.length==1&&E[0][2]?Zo(E[0][0],E[0][1]):function(I){return I===y||Ri(I,y,E)}}function go(y,E){return Xi(y)&&Ko(E)?Zo(Qt(y),E):function(I){var P=Qi(I,y);return P===l&&P===E?es(I,y):Qr(E,P,O|L)}}function Sn(y,E,I,P,M){y!==E&&Ti(E,function(B,k){if(M||(M=new jt),ht(B))Eh(y,E,k,I,Sn,P,M);else{var W=P?P(Wi(y,k),B,k+"",y,E,M):l;W===l&&(W=B),gi(y,k,W)}},Pt)}function Eh(y,E,I,P,M,B,k){var W=Wi(y,I),Y=Wi(E,I),ae=k.get(Y);if(ae){gi(y,I,ae);return}var le=B?B(W,Y,I+"",y,E,k):l,de=le===l;if(de){var Ie=We(Y),Le=!Ie&&gr(Y),Ge=!Ie&&!Le&&Hr(Y);le=Y,Ie||Le||Ge?We(W)?le=W:ft(W)?le=wt(W):Le?(de=!1,le=So(Y,!0)):Ge?(de=!1,le=Oo(Y,!0)):le=[]:sn(Y)||wr(Y)?(le=W,wr(W)?le=Aa(W):(!ht(W)||ar(W))&&(le=qo(Y))):de=!1}de&&(k.set(Y,le),M(le,Y,P,B,k),k.delete(Y)),gi(y,I,le)}function yo(y,E){var I=y.length;if(!!I)return E+=E<0?I:0,or(E,I)?y[E]:l}function To(y,E,I){E.length?E=lt(E,function(B){return We(B)?function(k){return Rr(k,B.length===1?B[0]:B)}:B}):E=[St];var P=-1;E=lt(E,Nt($e()));var M=_o(y,function(B,k,W){var Y=lt(E,function(ae){return ae(B)});return{criteria:Y,index:++P,value:B}});return Yu(M,function(B,k){return Lh(B,k,I)})}function xh(y,E){return Eo(y,E,function(I,P){return es(y,P)})}function Eo(y,E,I){for(var P=-1,M=E.length,B={};++P<M;){var k=E[P],W=Rr(y,k);I(W,k)&&en(B,_r(k,y),W)}return B}function bh(y){return function(E){return Rr(E,y)}}function wi(y,E,I,P){var M=P?ju:Or,B=-1,k=E.length,W=y;for(y===E&&(E=wt(E)),I&&(W=lt(y,Nt(I)));++B<k;)for(var Y=0,ae=E[B],le=I?I(ae):ae;(Y=M(W,le,Y,P))>-1;)W!==y&&Tn.call(W,Y,1),Tn.call(y,Y,1);return y}function xo(y,E){for(var I=y?E.length:0,P=I-1;I--;){var M=E[I];if(I==P||M!==B){var B=M;or(M)?Tn.call(y,M,1):Oi(y,M)}}return y}function Ai(y,E){return y+bn(to()*(E-y+1))}function Rh(y,E,I,P){for(var M=-1,B=vt(xn((E-y)/(I||1)),0),k=ee(B);B--;)k[P?B:++M]=y,y+=I;return k}function Pi(y,E){var I="";if(!y||E<1||E>Fe)return I;do E%2&&(I+=y),E=bn(E/2),E&&(y+=y);while(E);return I}function Ke(y,E){return zi(Jo(y,E,St),y+"")}function Ih(y){return io(Xr(y))}function Ch(y,E){var I=Xr(y);return Gn(I,br(E,0,I.length))}function en(y,E,I,P){if(!ht(y))return y;E=_r(E,y);for(var M=-1,B=E.length,k=B-1,W=y;W!=null&&++M<B;){var Y=Qt(E[M]),ae=I;if(Y==="__proto__"||Y==="constructor"||Y==="prototype")return y;if(M!=k){var le=W[Y];ae=P?P(le,Y,W):l,ae===l&&(ae=ht(le)?le:or(E[M+1])?[]:{})}Kr(W,Y,ae),W=W[Y]}return y}var bo=Rn?function(y,E){return Rn.set(y,E),y}:St,wh=En?function(y,E){return En(y,"toString",{configurable:!0,enumerable:!1,value:rs(E),writable:!0})}:St;function Ah(y){return Gn(Xr(y))}function Ht(y,E,I){var P=-1,M=y.length;E<0&&(E=-E>M?0:M+E),I=I>M?M:I,I<0&&(I+=M),M=E>I?0:I-E>>>0,E>>>=0;for(var B=ee(M);++P<M;)B[P]=y[P+E];return B}function Ph(y,E){var I;return pr(y,function(P,M,B){return I=E(P,M,B),!I}),!!I}function On(y,E,I){var P=0,M=y==null?P:y.length;if(typeof E=="number"&&E===E&&M<=we){for(;P<M;){var B=P+M>>>1,k=y[B];k!==null&&!Lt(k)&&(I?k<=E:k<E)?P=B+1:M=B}return M}return Si(y,E,St,I)}function Si(y,E,I,P){var M=0,B=y==null?0:y.length;if(B===0)return 0;E=I(E);for(var k=E!==E,W=E===null,Y=Lt(E),ae=E===l;M<B;){var le=bn((M+B)/2),de=I(y[le]),Ie=de!==l,Le=de===null,Ge=de===de,Ye=Lt(de);if(k)var ke=P||Ge;else ae?ke=Ge&&(P||Ie):W?ke=Ge&&Ie&&(P||!Le):Y?ke=Ge&&Ie&&!Le&&(P||!Ye):Le||Ye?ke=!1:ke=P?de<=E:de<E;ke?M=le+1:B=le}return Tt(B,Te)}function Ro(y,E){for(var I=-1,P=y.length,M=0,B=[];++I<P;){var k=y[I],W=E?E(k):k;if(!I||!Yt(W,Y)){var Y=W;B[M++]=k===0?0:k}}return B}function Io(y){return typeof y=="number"?y:Lt(y)?q:+y}function Mt(y){if(typeof y=="string")return y;if(We(y))return lt(y,Mt)+"";if(Lt(y))return ro?ro.call(y):"";var E=y+"";return E=="0"&&1/y==-Re?"-0":E}function vr(y,E,I){var P=-1,M=hn,B=y.length,k=!0,W=[],Y=W;if(I)k=!1,M=si;else if(B>=v){var ae=E?null:Gh(y);if(ae)return fn(ae);k=!1,M=Vr,Y=new xr}else Y=E?[]:W;e:for(;++P<B;){var le=y[P],de=E?E(le):le;if(le=I||le!==0?le:0,k&&de===de){for(var Ie=Y.length;Ie--;)if(Y[Ie]===de)continue e;E&&Y.push(de),W.push(le)}else M(Y,de,I)||(Y!==W&&Y.push(de),W.push(le))}return W}function Oi(y,E){return E=_r(E,y),y=Qo(y,E),y==null||delete y[Qt(Xt(E))]}function Co(y,E,I,P){return en(y,E,I(Rr(y,E)),P)}function Nn(y,E,I,P){for(var M=y.length,B=P?M:-1;(P?B--:++B<M)&&E(y[B],B,y););return I?Ht(y,P?0:B,P?B+1:M):Ht(y,P?B+1:0,P?M:B)}function wo(y,E){var I=y;return I instanceof Je&&(I=I.value()),oi(E,function(P,M){return M.func.apply(M.thisArg,cr([P],M.args))},I)}function Ni(y,E,I){var P=y.length;if(P<2)return P?vr(y[0]):[];for(var M=-1,B=ee(P);++M<P;)for(var k=y[M],W=-1;++W<P;)W!=M&&(B[M]=Zr(B[M]||k,y[W],E,I));return vr(yt(B,1),E,I)}function Ao(y,E,I){for(var P=-1,M=y.length,B=E.length,k={};++P<M;){var W=P<B?E[P]:l;I(k,y[P],W)}return k}function Mi(y){return ft(y)?y:[]}function Li(y){return typeof y=="function"?y:St}function _r(y,E){return We(y)?y:Xi(y,E)?[y]:na(nt(y))}var Sh=Ke;function mr(y,E,I){var P=y.length;return I=I===l?P:I,!E&&I>=P?y:Ht(y,E,I)}var Po=ml||function(y){return gt.clearTimeout(y)};function So(y,E){if(E)return y.slice();var I=y.length,P=Ks?Ks(I):new y.constructor(I);return y.copy(P),P}function Ui(y){var E=new y.constructor(y.byteLength);return new gn(E).set(new gn(y)),E}function Oh(y,E){var I=E?Ui(y.buffer):y.buffer;return new y.constructor(I,y.byteOffset,y.byteLength)}function Nh(y){var E=new y.constructor(y.source,fs.exec(y));return E.lastIndex=y.lastIndex,E}function Mh(y){return qr?ot(qr.call(y)):{}}function Oo(y,E){var I=E?Ui(y.buffer):y.buffer;return new y.constructor(I,y.byteOffset,y.length)}function No(y,E){if(y!==E){var I=y!==l,P=y===null,M=y===y,B=Lt(y),k=E!==l,W=E===null,Y=E===E,ae=Lt(E);if(!W&&!ae&&!B&&y>E||B&&k&&Y&&!W&&!ae||P&&k&&Y||!I&&Y||!M)return 1;if(!P&&!B&&!ae&&y<E||ae&&I&&M&&!P&&!B||W&&I&&M||!k&&M||!Y)return-1}return 0}function Lh(y,E,I){for(var P=-1,M=y.criteria,B=E.criteria,k=M.length,W=I.length;++P<k;){var Y=No(M[P],B[P]);if(Y){if(P>=W)return Y;var ae=I[P];return Y*(ae=="desc"?-1:1)}}return y.index-E.index}function Mo(y,E,I,P){for(var M=-1,B=y.length,k=I.length,W=-1,Y=E.length,ae=vt(B-k,0),le=ee(Y+ae),de=!P;++W<Y;)le[W]=E[W];for(;++M<k;)(de||M<B)&&(le[I[M]]=y[M]);for(;ae--;)le[W++]=y[M++];return le}function Lo(y,E,I,P){for(var M=-1,B=y.length,k=-1,W=I.length,Y=-1,ae=E.length,le=vt(B-W,0),de=ee(le+ae),Ie=!P;++M<le;)de[M]=y[M];for(var Le=M;++Y<ae;)de[Le+Y]=E[Y];for(;++k<W;)(Ie||M<B)&&(de[Le+I[k]]=y[M++]);return de}function wt(y,E){var I=-1,P=y.length;for(E||(E=ee(P));++I<P;)E[I]=y[I];return E}function Jt(y,E,I,P){var M=!I;I||(I={});for(var B=-1,k=E.length;++B<k;){var W=E[B],Y=P?P(I[W],y[W],W,I,y):l;Y===l&&(Y=y[W]),M?nr(I,W,Y):Kr(I,W,Y)}return I}function Uh(y,E){return Jt(y,Hi(y),E)}function Fh(y,E){return Jt(y,jo(y),E)}function Mn(y,E){return function(I,P){var M=We(I)?ku:ih,B=E?E():{};return M(I,y,$e(P,2),B)}}function $r(y){return Ke(function(E,I){var P=-1,M=I.length,B=M>1?I[M-1]:l,k=M>2?I[2]:l;for(B=y.length>3&&typeof B=="function"?(M--,B):l,k&&Rt(I[0],I[1],k)&&(B=M<3?l:B,M=1),E=ot(E);++P<M;){var W=I[P];W&&y(E,W,P,B)}return E})}function Uo(y,E){return function(I,P){if(I==null)return I;if(!At(I))return y(I,P);for(var M=I.length,B=E?M:-1,k=ot(I);(E?B--:++B<M)&&P(k[B],B,k)!==!1;);return I}}function Fo(y){return function(E,I,P){for(var M=-1,B=ot(E),k=P(E),W=k.length;W--;){var Y=k[y?W:++M];if(I(B[Y],Y,B)===!1)break}return E}}function Bh(y,E,I){var P=E&N,M=tn(y);function B(){var k=this&&this!==gt&&this instanceof B?M:y;return k.apply(P?I:this,arguments)}return B}function Bo(y){return function(E){E=nt(E);var I=Nr(E)?zt(E):l,P=I?I[0]:E.charAt(0),M=I?mr(I,1).join(""):E.slice(1);return P[y]()+M}}function Gr(y){return function(E){return oi(Fa(Ua(E).replace(wu,"")),y,"")}}function tn(y){return function(){var E=arguments;switch(E.length){case 0:return new y;case 1:return new y(E[0]);case 2:return new y(E[0],E[1]);case 3:return new y(E[0],E[1],E[2]);case 4:return new y(E[0],E[1],E[2],E[3]);case 5:return new y(E[0],E[1],E[2],E[3],E[4]);case 6:return new y(E[0],E[1],E[2],E[3],E[4],E[5]);case 7:return new y(E[0],E[1],E[2],E[3],E[4],E[5],E[6])}var I=Dr(y.prototype),P=y.apply(I,E);return ht(P)?P:I}}function Dh(y,E,I){var P=tn(y);function M(){for(var B=arguments.length,k=ee(B),W=B,Y=kr(M);W--;)k[W]=arguments[W];var ae=B<3&&k[0]!==Y&&k[B-1]!==Y?[]:fr(k,Y);if(B-=ae.length,B<I)return Ho(y,E,Ln,M.placeholder,l,k,ae,l,l,I-B);var le=this&&this!==gt&&this instanceof M?P:y;return Ot(le,this,k)}return M}function Do(y){return function(E,I,P){var M=ot(E);if(!At(E)){var B=$e(I,3);E=_t(E),I=function(W){return B(M[W],W,M)}}var k=y(E,I,P);return k>-1?M[B?E[k]:k]:l}}function $o(y){return sr(function(E){var I=E.length,P=I,M=Gt.prototype.thru;for(y&&E.reverse();P--;){var B=E[P];if(typeof B!="function")throw new $t(g);if(M&&!k&&Dn(B)=="wrapper")var k=new Gt([],!0)}for(P=k?P:I;++P<I;){B=E[P];var W=Dn(B),Y=W=="wrapper"?Gi(B):l;Y&&Vi(Y[0])&&Y[1]==(ie|G|V|re)&&!Y[4].length&&Y[9]==1?k=k[Dn(Y[0])].apply(k,Y[3]):k=B.length==1&&Vi(B)?k[W]():k.thru(B)}return function(){var ae=arguments,le=ae[0];if(k&&ae.length==1&&We(le))return k.plant(le).value();for(var de=0,Ie=I?E[de].apply(this,ae):le;++de<I;)Ie=E[de].call(this,Ie);return Ie}})}function Ln(y,E,I,P,M,B,k,W,Y,ae){var le=E&ie,de=E&N,Ie=E&U,Le=E&(G|z),Ge=E&J,Ye=Ie?l:tn(y);function ke(){for(var Ze=arguments.length,Qe=ee(Ze),Ut=Ze;Ut--;)Qe[Ut]=arguments[Ut];if(Le)var It=kr(ke),Ft=Ku(Qe,It);if(P&&(Qe=Mo(Qe,P,M,Le)),B&&(Qe=Lo(Qe,B,k,Le)),Ze-=Ft,Le&&Ze<ae){var dt=fr(Qe,It);return Ho(y,E,Ln,ke.placeholder,I,Qe,dt,W,Y,ae-Ze)}var qt=de?I:this,lr=Ie?qt[y]:y;return Ze=Qe.length,W?Qe=ic(Qe,W):Ge&&Ze>1&&Qe.reverse(),le&&Y<Ze&&(Qe.length=Y),this&&this!==gt&&this instanceof ke&&(lr=Ye||tn(lr)),lr.apply(qt,Qe)}return ke}function Go(y,E){return function(I,P){return fh(I,y,E(P),{})}}function Un(y,E){return function(I,P){var M;if(I===l&&P===l)return E;if(I!==l&&(M=I),P!==l){if(M===l)return P;typeof I=="string"||typeof P=="string"?(I=Mt(I),P=Mt(P)):(I=Io(I),P=Io(P)),M=y(I,P)}return M}}function Fi(y){return sr(function(E){return E=lt(E,Nt($e())),Ke(function(I){var P=this;return y(E,function(M){return Ot(M,P,I)})})})}function Fn(y,E){E=E===l?" ":Mt(E);var I=E.length;if(I<2)return I?Pi(E,y):E;var P=Pi(E,xn(y/Mr(E)));return Nr(E)?mr(zt(P),0,y).join(""):P.slice(0,y)}function $h(y,E,I,P){var M=E&N,B=tn(y);function k(){for(var W=-1,Y=arguments.length,ae=-1,le=P.length,de=ee(le+Y),Ie=this&&this!==gt&&this instanceof k?B:y;++ae<le;)de[ae]=P[ae];for(;Y--;)de[ae++]=arguments[++W];return Ot(Ie,M?I:this,de)}return k}function ko(y){return function(E,I,P){return P&&typeof P!="number"&&Rt(E,I,P)&&(I=P=l),E=ur(E),I===l?(I=E,E=0):I=ur(I),P=P===l?E<I?1:-1:ur(P),Rh(E,I,P,y)}}function Bn(y){return function(E,I){return typeof E=="string"&&typeof I=="string"||(E=Vt(E),I=Vt(I)),y(E,I)}}function Ho(y,E,I,P,M,B,k,W,Y,ae){var le=E&G,de=le?k:l,Ie=le?l:k,Le=le?B:l,Ge=le?l:B;E|=le?V:X,E&=~(le?X:V),E&$||(E&=~(N|U));var Ye=[y,E,M,Le,de,Ge,Ie,W,Y,ae],ke=I.apply(l,Ye);return Vi(y)&&ea(ke,Ye),ke.placeholder=P,ta(ke,y,E)}function Bi(y){var E=pt[y];return function(I,P){if(I=Vt(I),P=P==null?0:Tt(je(P),292),P&&eo(I)){var M=(nt(I)+"e").split("e"),B=E(M[0]+"e"+(+M[1]+P));return M=(nt(B)+"e").split("e"),+(M[0]+"e"+(+M[1]-P))}return E(I)}}var Gh=Fr&&1/fn(new Fr([,-0]))[1]==Re?function(y){return new Fr(y)}:ss;function Xo(y){return function(E){var I=Et(E);return I==H?di(E):I==_e?nl(E):qu(E,y(E))}}function ir(y,E,I,P,M,B,k,W){var Y=E&U;if(!Y&&typeof y!="function")throw new $t(g);var ae=P?P.length:0;if(ae||(E&=~(V|X),P=M=l),k=k===l?k:vt(je(k),0),W=W===l?W:je(W),ae-=M?M.length:0,E&X){var le=P,de=M;P=M=l}var Ie=Y?l:Gi(y),Le=[y,E,I,P,M,le,de,B,k,W];if(Ie&&tc(Le,Ie),y=Le[0],E=Le[1],I=Le[2],P=Le[3],M=Le[4],W=Le[9]=Le[9]===l?Y?0:y.length:vt(Le[9]-ae,0),!W&&E&(G|z)&&(E&=~(G|z)),!E||E==N)var Ge=Bh(y,E,I);else E==G||E==z?Ge=Dh(y,E,W):(E==V||E==(N|V))&&!M.length?Ge=$h(y,E,I,P):Ge=Ln.apply(l,Le);var Ye=Ie?bo:ea;return ta(Ye(Ge,Le),y,E)}function Vo(y,E,I,P){return y===l||Yt(y,Ur[I])&&!st.call(P,I)?E:y}function Wo(y,E,I,P,M,B){return ht(y)&&ht(E)&&(B.set(E,y),Sn(y,E,l,Wo,B),B.delete(E)),y}function kh(y){return sn(y)?l:y}function zo(y,E,I,P,M,B){var k=I&O,W=y.length,Y=E.length;if(W!=Y&&!(k&&Y>W))return!1;var ae=B.get(y),le=B.get(E);if(ae&&le)return ae==E&&le==y;var de=-1,Ie=!0,Le=I&L?new xr:l;for(B.set(y,E),B.set(E,y);++de<W;){var Ge=y[de],Ye=E[de];if(P)var ke=k?P(Ye,Ge,de,E,y,B):P(Ge,Ye,de,y,E,B);if(ke!==l){if(ke)continue;Ie=!1;break}if(Le){if(!ai(E,function(Ze,Qe){if(!Vr(Le,Qe)&&(Ge===Ze||M(Ge,Ze,I,P,B)))return Le.push(Qe)})){Ie=!1;break}}else if(!(Ge===Ye||M(Ge,Ye,I,P,B))){Ie=!1;break}}return B.delete(y),B.delete(E),Ie}function Hh(y,E,I,P,M,B,k){switch(I){case et:if(y.byteLength!=E.byteLength||y.byteOffset!=E.byteOffset)return!1;y=y.buffer,E=E.buffer;case qe:return!(y.byteLength!=E.byteLength||!B(new gn(y),new gn(E)));case pe:case Pe:case K:return Yt(+y,+E);case ge:return y.name==E.name&&y.message==E.message;case ve:case fe:return y==E+"";case H:var W=di;case _e:var Y=P&O;if(W||(W=fn),y.size!=E.size&&!Y)return!1;var ae=k.get(y);if(ae)return ae==E;P|=L,k.set(y,E);var le=zo(W(y),W(E),P,M,B,k);return k.delete(y),le;case Ne:if(qr)return qr.call(y)==qr.call(E)}return!1}function Xh(y,E,I,P,M,B){var k=I&O,W=Di(y),Y=W.length,ae=Di(E),le=ae.length;if(Y!=le&&!k)return!1;for(var de=Y;de--;){var Ie=W[de];if(!(k?Ie in E:st.call(E,Ie)))return!1}var Le=B.get(y),Ge=B.get(E);if(Le&&Ge)return Le==E&&Ge==y;var Ye=!0;B.set(y,E),B.set(E,y);for(var ke=k;++de<Y;){Ie=W[de];var Ze=y[Ie],Qe=E[Ie];if(P)var Ut=k?P(Qe,Ze,Ie,E,y,B):P(Ze,Qe,Ie,y,E,B);if(!(Ut===l?Ze===Qe||M(Ze,Qe,I,P,B):Ut)){Ye=!1;break}ke||(ke=Ie=="constructor")}if(Ye&&!ke){var It=y.constructor,Ft=E.constructor;It!=Ft&&"constructor"in y&&"constructor"in E&&!(typeof It=="function"&&It instanceof It&&typeof Ft=="function"&&Ft instanceof Ft)&&(Ye=!1)}return B.delete(y),B.delete(E),Ye}function sr(y){return zi(Jo(y,l,aa),y+"")}function Di(y){return co(y,_t,Hi)}function $i(y){return co(y,Pt,jo)}var Gi=Rn?function(y){return Rn.get(y)}:ss;function Dn(y){for(var E=y.name+"",I=Br[E],P=st.call(Br,E)?I.length:0;P--;){var M=I[P],B=M.func;if(B==null||B==y)return M.name}return E}function kr(y){var E=st.call(F,"placeholder")?F:y;return E.placeholder}function $e(){var y=F.iteratee||ns;return y=y===ns?vo:y,arguments.length?y(arguments[0],arguments[1]):y}function $n(y,E){var I=y.__data__;return Zh(E)?I[typeof E=="string"?"string":"hash"]:I.map}function ki(y){for(var E=_t(y),I=E.length;I--;){var P=E[I],M=y[P];E[I]=[P,M,Ko(M)]}return E}function Ir(y,E){var I=el(y,E);return po(I)?I:l}function Vh(y){var E=st.call(y,Tr),I=y[Tr];try{y[Tr]=l;var P=!0}catch{}var M=_n.call(y);return P&&(E?y[Tr]=I:delete y[Tr]),M}var Hi=vi?function(y){return y==null?[]:(y=ot(y),hr(vi(y),function(E){return Js.call(y,E)}))}:os,jo=vi?function(y){for(var E=[];y;)cr(E,Hi(y)),y=yn(y);return E}:os,Et=bt;(_i&&Et(new _i(new ArrayBuffer(1)))!=et||zr&&Et(new zr)!=H||mi&&Et(mi.resolve())!=me||Fr&&Et(new Fr)!=_e||jr&&Et(new jr)!=Be)&&(Et=function(y){var E=bt(y),I=E==ne?y.constructor:l,P=I?Cr(I):"";if(P)switch(P){case Cl:return et;case wl:return H;case Al:return me;case Pl:return _e;case Sl:return Be}return E});function Wh(y,E,I){for(var P=-1,M=I.length;++P<M;){var B=I[P],k=B.size;switch(B.type){case"drop":y+=k;break;case"dropRight":E-=k;break;case"take":E=Tt(E,y+k);break;case"takeRight":y=vt(y,E-k);break}}return{start:y,end:E}}function zh(y){var E=y.match(Ja);return E?E[1].split(Qa):[]}function Yo(y,E,I){E=_r(E,y);for(var P=-1,M=E.length,B=!1;++P<M;){var k=Qt(E[P]);if(!(B=y!=null&&I(y,k)))break;y=y[k]}return B||++P!=M?B:(M=y==null?0:y.length,!!M&&zn(M)&&or(k,M)&&(We(y)||wr(y)))}function jh(y){var E=y.length,I=new y.constructor(E);return E&&typeof y[0]=="string"&&st.call(y,"index")&&(I.index=y.index,I.input=y.input),I}function qo(y){return typeof y.constructor=="function"&&!rn(y)?Dr(yn(y)):{}}function Yh(y,E,I){var P=y.constructor;switch(E){case qe:return Ui(y);case pe:case Pe:return new P(+y);case et:return Oh(y,I);case tt:case it:case xt:case Kt:case Ar:case er:case Pr:case mt:case Ct:return Oo(y,I);case H:return new P;case K:case fe:return new P(y);case ve:return Nh(y);case _e:return new P;case Ne:return Mh(y)}}function qh(y,E){var I=E.length;if(!I)return y;var P=I-1;return E[P]=(I>1?"& ":"")+E[P],E=E.join(I>2?", ":" "),y.replace(Za,`{
/* [wrapped with `+E+`] */
`)}function Kh(y){return We(y)||wr(y)||!!(Qs&&y&&y[Qs])}function or(y,E){var I=typeof y;return E=E==null?Fe:E,!!E&&(I=="number"||I!="symbol"&&uu.test(y))&&y>-1&&y%1==0&&y<E}function Rt(y,E,I){if(!ht(I))return!1;var P=typeof E;return(P=="number"?At(I)&&or(E,I.length):P=="string"&&E in I)?Yt(I[E],y):!1}function Xi(y,E){if(We(y))return!1;var I=typeof y;return I=="number"||I=="symbol"||I=="boolean"||y==null||Lt(y)?!0:ja.test(y)||!za.test(y)||E!=null&&y in ot(E)}function Zh(y){var E=typeof y;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?y!=="__proto__":y===null}function Vi(y){var E=Dn(y),I=F[E];if(typeof I!="function"||!(E in Je.prototype))return!1;if(y===I)return!0;var P=Gi(I);return!!P&&y===P[0]}function Jh(y){return!!qs&&qs in y}var Qh=pn?ar:as;function rn(y){var E=y&&y.constructor,I=typeof E=="function"&&E.prototype||Ur;return y===I}function Ko(y){return y===y&&!ht(y)}function Zo(y,E){return function(I){return I==null?!1:I[y]===E&&(E!==l||y in ot(I))}}function ec(y){var E=Vn(y,function(P){return I.size===R&&I.clear(),P}),I=E.cache;return E}function tc(y,E){var I=y[1],P=E[1],M=I|P,B=M<(N|U|ie),k=P==ie&&I==G||P==ie&&I==re&&y[7].length<=E[8]||P==(ie|re)&&E[7].length<=E[8]&&I==G;if(!(B||k))return y;P&N&&(y[2]=E[2],M|=I&N?0:$);var W=E[3];if(W){var Y=y[3];y[3]=Y?Mo(Y,W,E[4]):W,y[4]=Y?fr(y[3],C):E[4]}return W=E[5],W&&(Y=y[5],y[5]=Y?Lo(Y,W,E[6]):W,y[6]=Y?fr(y[5],C):E[6]),W=E[7],W&&(y[7]=W),P&ie&&(y[8]=y[8]==null?E[8]:Tt(y[8],E[8])),y[9]==null&&(y[9]=E[9]),y[0]=E[0],y[1]=M,y}function rc(y){var E=[];if(y!=null)for(var I in ot(y))E.push(I);return E}function nc(y){return _n.call(y)}function Jo(y,E,I){return E=vt(E===l?y.length-1:E,0),function(){for(var P=arguments,M=-1,B=vt(P.length-E,0),k=ee(B);++M<B;)k[M]=P[E+M];M=-1;for(var W=ee(E+1);++M<E;)W[M]=P[M];return W[E]=I(k),Ot(y,this,W)}}function Qo(y,E){return E.length<2?y:Rr(y,Ht(E,0,-1))}function ic(y,E){for(var I=y.length,P=Tt(E.length,I),M=wt(y);P--;){var B=E[P];y[P]=or(B,I)?M[B]:l}return y}function Wi(y,E){if(!(E==="constructor"&&typeof y[E]=="function")&&E!="__proto__")return y[E]}var ea=ra(bo),nn=yl||function(y,E){return gt.setTimeout(y,E)},zi=ra(wh);function ta(y,E,I){var P=E+"";return zi(y,qh(P,sc(zh(P),I)))}function ra(y){var E=0,I=0;return function(){var P=bl(),M=Ue-(P-I);if(I=P,M>0){if(++E>=Ae)return arguments[0]}else E=0;return y.apply(l,arguments)}}function Gn(y,E){var I=-1,P=y.length,M=P-1;for(E=E===l?P:E;++I<E;){var B=Ai(I,M),k=y[B];y[B]=y[I],y[I]=k}return y.length=E,y}var na=ec(function(y){var E=[];return y.charCodeAt(0)===46&&E.push(""),y.replace(Ya,function(I,P,M,B){E.push(M?B.replace(ru,"$1"):P||I)}),E});function Qt(y){if(typeof y=="string"||Lt(y))return y;var E=y+"";return E=="0"&&1/y==-Re?"-0":E}function Cr(y){if(y!=null){try{return vn.call(y)}catch{}try{return y+""}catch{}}return""}function sc(y,E){return Dt(De,function(I){var P="_."+I[0];E&I[1]&&!hn(y,P)&&y.push(P)}),y.sort()}function ia(y){if(y instanceof Je)return y.clone();var E=new Gt(y.__wrapped__,y.__chain__);return E.__actions__=wt(y.__actions__),E.__index__=y.__index__,E.__values__=y.__values__,E}function oc(y,E,I){(I?Rt(y,E,I):E===l)?E=1:E=vt(je(E),0);var P=y==null?0:y.length;if(!P||E<1)return[];for(var M=0,B=0,k=ee(xn(P/E));M<P;)k[B++]=Ht(y,M,M+=E);return k}function ac(y){for(var E=-1,I=y==null?0:y.length,P=0,M=[];++E<I;){var B=y[E];B&&(M[P++]=B)}return M}function uc(){var y=arguments.length;if(!y)return[];for(var E=ee(y-1),I=arguments[0],P=y;P--;)E[P-1]=arguments[P];return cr(We(I)?wt(I):[I],yt(E,1))}var lc=Ke(function(y,E){return ft(y)?Zr(y,yt(E,1,ft,!0)):[]}),hc=Ke(function(y,E){var I=Xt(E);return ft(I)&&(I=l),ft(y)?Zr(y,yt(E,1,ft,!0),$e(I,2)):[]}),cc=Ke(function(y,E){var I=Xt(E);return ft(I)&&(I=l),ft(y)?Zr(y,yt(E,1,ft,!0),l,I):[]});function fc(y,E,I){var P=y==null?0:y.length;return P?(E=I||E===l?1:je(E),Ht(y,E<0?0:E,P)):[]}function dc(y,E,I){var P=y==null?0:y.length;return P?(E=I||E===l?1:je(E),E=P-E,Ht(y,0,E<0?0:E)):[]}function pc(y,E){return y&&y.length?Nn(y,$e(E,3),!0,!0):[]}function vc(y,E){return y&&y.length?Nn(y,$e(E,3),!0):[]}function mc(y,E,I,P){var M=y==null?0:y.length;return M?(I&&typeof I!="number"&&Rt(y,E,I)&&(I=0,P=M),uh(y,E,I,P)):[]}function sa(y,E,I){var P=y==null?0:y.length;if(!P)return-1;var M=I==null?0:je(I);return M<0&&(M=vt(P+M,0)),cn(y,$e(E,3),M)}function oa(y,E,I){var P=y==null?0:y.length;if(!P)return-1;var M=P-1;return I!==l&&(M=je(I),M=I<0?vt(P+M,0):Tt(M,P-1)),cn(y,$e(E,3),M,!0)}function aa(y){var E=y==null?0:y.length;return E?yt(y,1):[]}function gc(y){var E=y==null?0:y.length;return E?yt(y,Re):[]}function yc(y,E){var I=y==null?0:y.length;return I?(E=E===l?1:je(E),yt(y,E)):[]}function Tc(y){for(var E=-1,I=y==null?0:y.length,P={};++E<I;){var M=y[E];P[M[0]]=M[1]}return P}function ua(y){return y&&y.length?y[0]:l}function Ec(y,E,I){var P=y==null?0:y.length;if(!P)return-1;var M=I==null?0:je(I);return M<0&&(M=vt(P+M,0)),Or(y,E,M)}function xc(y){var E=y==null?0:y.length;return E?Ht(y,0,-1):[]}var bc=Ke(function(y){var E=lt(y,Mi);return E.length&&E[0]===y[0]?bi(E):[]}),Rc=Ke(function(y){var E=Xt(y),I=lt(y,Mi);return E===Xt(I)?E=l:I.pop(),I.length&&I[0]===y[0]?bi(I,$e(E,2)):[]}),Ic=Ke(function(y){var E=Xt(y),I=lt(y,Mi);return E=typeof E=="function"?E:l,E&&I.pop(),I.length&&I[0]===y[0]?bi(I,l,E):[]});function Cc(y,E){return y==null?"":El.call(y,E)}function Xt(y){var E=y==null?0:y.length;return E?y[E-1]:l}function wc(y,E,I){var P=y==null?0:y.length;if(!P)return-1;var M=P;return I!==l&&(M=je(I),M=M<0?vt(P+M,0):Tt(M,P-1)),E===E?sl(y,E,M):cn(y,ks,M,!0)}function Ac(y,E){return y&&y.length?yo(y,je(E)):l}var Pc=Ke(la);function la(y,E){return y&&y.length&&E&&E.length?wi(y,E):y}function Sc(y,E,I){return y&&y.length&&E&&E.length?wi(y,E,$e(I,2)):y}function Oc(y,E,I){return y&&y.length&&E&&E.length?wi(y,E,l,I):y}var Nc=sr(function(y,E){var I=y==null?0:y.length,P=yi(y,E);return xo(y,lt(E,function(M){return or(M,I)?+M:M}).sort(No)),P});function Mc(y,E){var I=[];if(!(y&&y.length))return I;var P=-1,M=[],B=y.length;for(E=$e(E,3);++P<B;){var k=y[P];E(k,P,y)&&(I.push(k),M.push(P))}return xo(y,M),I}function ji(y){return y==null?y:Il.call(y)}function Lc(y,E,I){var P=y==null?0:y.length;return P?(I&&typeof I!="number"&&Rt(y,E,I)?(E=0,I=P):(E=E==null?0:je(E),I=I===l?P:je(I)),Ht(y,E,I)):[]}function Uc(y,E){return On(y,E)}function Fc(y,E,I){return Si(y,E,$e(I,2))}function Bc(y,E){var I=y==null?0:y.length;if(I){var P=On(y,E);if(P<I&&Yt(y[P],E))return P}return-1}function Dc(y,E){return On(y,E,!0)}function $c(y,E,I){return Si(y,E,$e(I,2),!0)}function Gc(y,E){var I=y==null?0:y.length;if(I){var P=On(y,E,!0)-1;if(Yt(y[P],E))return P}return-1}function kc(y){return y&&y.length?Ro(y):[]}function Hc(y,E){return y&&y.length?Ro(y,$e(E,2)):[]}function Xc(y){var E=y==null?0:y.length;return E?Ht(y,1,E):[]}function Vc(y,E,I){return y&&y.length?(E=I||E===l?1:je(E),Ht(y,0,E<0?0:E)):[]}function Wc(y,E,I){var P=y==null?0:y.length;return P?(E=I||E===l?1:je(E),E=P-E,Ht(y,E<0?0:E,P)):[]}function zc(y,E){return y&&y.length?Nn(y,$e(E,3),!1,!0):[]}function jc(y,E){return y&&y.length?Nn(y,$e(E,3)):[]}var Yc=Ke(function(y){return vr(yt(y,1,ft,!0))}),qc=Ke(function(y){var E=Xt(y);return ft(E)&&(E=l),vr(yt(y,1,ft,!0),$e(E,2))}),Kc=Ke(function(y){var E=Xt(y);return E=typeof E=="function"?E:l,vr(yt(y,1,ft,!0),l,E)});function Zc(y){return y&&y.length?vr(y):[]}function Jc(y,E){return y&&y.length?vr(y,$e(E,2)):[]}function Qc(y,E){return E=typeof E=="function"?E:l,y&&y.length?vr(y,l,E):[]}function Yi(y){if(!(y&&y.length))return[];var E=0;return y=hr(y,function(I){if(ft(I))return E=vt(I.length,E),!0}),ci(E,function(I){return lt(y,ui(I))})}function ha(y,E){if(!(y&&y.length))return[];var I=Yi(y);return E==null?I:lt(I,function(P){return Ot(E,l,P)})}var ef=Ke(function(y,E){return ft(y)?Zr(y,E):[]}),tf=Ke(function(y){return Ni(hr(y,ft))}),rf=Ke(function(y){var E=Xt(y);return ft(E)&&(E=l),Ni(hr(y,ft),$e(E,2))}),nf=Ke(function(y){var E=Xt(y);return E=typeof E=="function"?E:l,Ni(hr(y,ft),l,E)}),sf=Ke(Yi);function of(y,E){return Ao(y||[],E||[],Kr)}function af(y,E){return Ao(y||[],E||[],en)}var uf=Ke(function(y){var E=y.length,I=E>1?y[E-1]:l;return I=typeof I=="function"?(y.pop(),I):l,ha(y,I)});function ca(y){var E=F(y);return E.__chain__=!0,E}function lf(y,E){return E(y),y}function kn(y,E){return E(y)}var hf=sr(function(y){var E=y.length,I=E?y[0]:0,P=this.__wrapped__,M=function(B){return yi(B,y)};return E>1||this.__actions__.length||!(P instanceof Je)||!or(I)?this.thru(M):(P=P.slice(I,+I+(E?1:0)),P.__actions__.push({func:kn,args:[M],thisArg:l}),new Gt(P,this.__chain__).thru(function(B){return E&&!B.length&&B.push(l),B}))});function cf(){return ca(this)}function ff(){return new Gt(this.value(),this.__chain__)}function df(){this.__values__===l&&(this.__values__=Ca(this.value()));var y=this.__index__>=this.__values__.length,E=y?l:this.__values__[this.__index__++];return{done:y,value:E}}function pf(){return this}function vf(y){for(var E,I=this;I instanceof Cn;){var P=ia(I);P.__index__=0,P.__values__=l,E?M.__wrapped__=P:E=P;var M=P;I=I.__wrapped__}return M.__wrapped__=y,E}function _f(){var y=this.__wrapped__;if(y instanceof Je){var E=y;return this.__actions__.length&&(E=new Je(this)),E=E.reverse(),E.__actions__.push({func:kn,args:[ji],thisArg:l}),new Gt(E,this.__chain__)}return this.thru(ji)}function mf(){return wo(this.__wrapped__,this.__actions__)}var gf=Mn(function(y,E,I){st.call(y,I)?++y[I]:nr(y,I,1)});function yf(y,E,I){var P=We(y)?$s:ah;return I&&Rt(y,E,I)&&(E=l),P(y,$e(E,3))}function Tf(y,E){var I=We(y)?hr:lo;return I(y,$e(E,3))}var Ef=Do(sa),xf=Do(oa);function bf(y,E){return yt(Hn(y,E),1)}function Rf(y,E){return yt(Hn(y,E),Re)}function If(y,E,I){return I=I===l?1:je(I),yt(Hn(y,E),I)}function fa(y,E){var I=We(y)?Dt:pr;return I(y,$e(E,3))}function da(y,E){var I=We(y)?Hu:uo;return I(y,$e(E,3))}var Cf=Mn(function(y,E,I){st.call(y,I)?y[I].push(E):nr(y,I,[E])});function wf(y,E,I,P){y=At(y)?y:Xr(y),I=I&&!P?je(I):0;var M=y.length;return I<0&&(I=vt(M+I,0)),jn(y)?I<=M&&y.indexOf(E,I)>-1:!!M&&Or(y,E,I)>-1}var Af=Ke(function(y,E,I){var P=-1,M=typeof E=="function",B=At(y)?ee(y.length):[];return pr(y,function(k){B[++P]=M?Ot(E,k,I):Jr(k,E,I)}),B}),Pf=Mn(function(y,E,I){nr(y,I,E)});function Hn(y,E){var I=We(y)?lt:_o;return I(y,$e(E,3))}function Sf(y,E,I,P){return y==null?[]:(We(E)||(E=E==null?[]:[E]),I=P?l:I,We(I)||(I=I==null?[]:[I]),To(y,E,I))}var Of=Mn(function(y,E,I){y[I?0:1].push(E)},function(){return[[],[]]});function Nf(y,E,I){var P=We(y)?oi:Xs,M=arguments.length<3;return P(y,$e(E,4),I,M,pr)}function Mf(y,E,I){var P=We(y)?Xu:Xs,M=arguments.length<3;return P(y,$e(E,4),I,M,uo)}function Lf(y,E){var I=We(y)?hr:lo;return I(y,Wn($e(E,3)))}function Uf(y){var E=We(y)?io:Ih;return E(y)}function Ff(y,E,I){(I?Rt(y,E,I):E===l)?E=1:E=je(E);var P=We(y)?rh:Ch;return P(y,E)}function Bf(y){var E=We(y)?nh:Ah;return E(y)}function Df(y){if(y==null)return 0;if(At(y))return jn(y)?Mr(y):y.length;var E=Et(y);return E==H||E==_e?y.size:Ii(y).length}function $f(y,E,I){var P=We(y)?ai:Ph;return I&&Rt(y,E,I)&&(E=l),P(y,$e(E,3))}var Gf=Ke(function(y,E){if(y==null)return[];var I=E.length;return I>1&&Rt(y,E[0],E[1])?E=[]:I>2&&Rt(E[0],E[1],E[2])&&(E=[E[0]]),To(y,yt(E,1),[])}),Xn=gl||function(){return gt.Date.now()};function kf(y,E){if(typeof E!="function")throw new $t(g);return y=je(y),function(){if(--y<1)return E.apply(this,arguments)}}function pa(y,E,I){return E=I?l:E,E=y&&E==null?y.length:E,ir(y,ie,l,l,l,l,E)}function va(y,E){var I;if(typeof E!="function")throw new $t(g);return y=je(y),function(){return--y>0&&(I=E.apply(this,arguments)),y<=1&&(E=l),I}}var qi=Ke(function(y,E,I){var P=N;if(I.length){var M=fr(I,kr(qi));P|=V}return ir(y,P,E,I,M)}),ma=Ke(function(y,E,I){var P=N|U;if(I.length){var M=fr(I,kr(ma));P|=V}return ir(E,P,y,I,M)});function ga(y,E,I){E=I?l:E;var P=ir(y,G,l,l,l,l,l,E);return P.placeholder=ga.placeholder,P}function ya(y,E,I){E=I?l:E;var P=ir(y,z,l,l,l,l,l,E);return P.placeholder=ya.placeholder,P}function Ta(y,E,I){var P,M,B,k,W,Y,ae=0,le=!1,de=!1,Ie=!0;if(typeof y!="function")throw new $t(g);E=Vt(E)||0,ht(I)&&(le=!!I.leading,de="maxWait"in I,B=de?vt(Vt(I.maxWait)||0,E):B,Ie="trailing"in I?!!I.trailing:Ie);function Le(dt){var qt=P,lr=M;return P=M=l,ae=dt,k=y.apply(lr,qt),k}function Ge(dt){return ae=dt,W=nn(Ze,E),le?Le(dt):k}function Ye(dt){var qt=dt-Y,lr=dt-ae,$a=E-qt;return de?Tt($a,B-lr):$a}function ke(dt){var qt=dt-Y,lr=dt-ae;return Y===l||qt>=E||qt<0||de&&lr>=B}function Ze(){var dt=Xn();if(ke(dt))return Qe(dt);W=nn(Ze,Ye(dt))}function Qe(dt){return W=l,Ie&&P?Le(dt):(P=M=l,k)}function Ut(){W!==l&&Po(W),ae=0,P=Y=M=W=l}function It(){return W===l?k:Qe(Xn())}function Ft(){var dt=Xn(),qt=ke(dt);if(P=arguments,M=this,Y=dt,qt){if(W===l)return Ge(Y);if(de)return Po(W),W=nn(Ze,E),Le(Y)}return W===l&&(W=nn(Ze,E)),k}return Ft.cancel=Ut,Ft.flush=It,Ft}var Hf=Ke(function(y,E){return ao(y,1,E)}),Xf=Ke(function(y,E,I){return ao(y,Vt(E)||0,I)});function Vf(y){return ir(y,J)}function Vn(y,E){if(typeof y!="function"||E!=null&&typeof E!="function")throw new $t(g);var I=function(){var P=arguments,M=E?E.apply(this,P):P[0],B=I.cache;if(B.has(M))return B.get(M);var k=y.apply(this,P);return I.cache=B.set(M,k)||B,k};return I.cache=new(Vn.Cache||rr),I}Vn.Cache=rr;function Wn(y){if(typeof y!="function")throw new $t(g);return function(){var E=arguments;switch(E.length){case 0:return!y.call(this);case 1:return!y.call(this,E[0]);case 2:return!y.call(this,E[0],E[1]);case 3:return!y.call(this,E[0],E[1],E[2])}return!y.apply(this,E)}}function Wf(y){return va(2,y)}var zf=Sh(function(y,E){E=E.length==1&&We(E[0])?lt(E[0],Nt($e())):lt(yt(E,1),Nt($e()));var I=E.length;return Ke(function(P){for(var M=-1,B=Tt(P.length,I);++M<B;)P[M]=E[M].call(this,P[M]);return Ot(y,this,P)})}),Ki=Ke(function(y,E){var I=fr(E,kr(Ki));return ir(y,V,l,E,I)}),Ea=Ke(function(y,E){var I=fr(E,kr(Ea));return ir(y,X,l,E,I)}),jf=sr(function(y,E){return ir(y,re,l,l,l,E)});function Yf(y,E){if(typeof y!="function")throw new $t(g);return E=E===l?E:je(E),Ke(y,E)}function qf(y,E){if(typeof y!="function")throw new $t(g);return E=E==null?0:vt(je(E),0),Ke(function(I){var P=I[E],M=mr(I,0,E);return P&&cr(M,P),Ot(y,this,M)})}function Kf(y,E,I){var P=!0,M=!0;if(typeof y!="function")throw new $t(g);return ht(I)&&(P="leading"in I?!!I.leading:P,M="trailing"in I?!!I.trailing:M),Ta(y,E,{leading:P,maxWait:E,trailing:M})}function Zf(y){return pa(y,1)}function Jf(y,E){return Ki(Li(E),y)}function Qf(){if(!arguments.length)return[];var y=arguments[0];return We(y)?y:[y]}function ed(y){return kt(y,S)}function td(y,E){return E=typeof E=="function"?E:l,kt(y,S,E)}function rd(y){return kt(y,w|S)}function nd(y,E){return E=typeof E=="function"?E:l,kt(y,w|S,E)}function id(y,E){return E==null||oo(y,E,_t(E))}function Yt(y,E){return y===E||y!==y&&E!==E}var sd=Bn(xi),od=Bn(function(y,E){return y>=E}),wr=fo(function(){return arguments}())?fo:function(y){return ct(y)&&st.call(y,"callee")&&!Js.call(y,"callee")},We=ee.isArray,ad=Ms?Nt(Ms):dh;function At(y){return y!=null&&zn(y.length)&&!ar(y)}function ft(y){return ct(y)&&At(y)}function ud(y){return y===!0||y===!1||ct(y)&&bt(y)==pe}var gr=Tl||as,ld=Ls?Nt(Ls):ph;function hd(y){return ct(y)&&y.nodeType===1&&!sn(y)}function cd(y){if(y==null)return!0;if(At(y)&&(We(y)||typeof y=="string"||typeof y.splice=="function"||gr(y)||Hr(y)||wr(y)))return!y.length;var E=Et(y);if(E==H||E==_e)return!y.size;if(rn(y))return!Ii(y).length;for(var I in y)if(st.call(y,I))return!1;return!0}function fd(y,E){return Qr(y,E)}function dd(y,E,I){I=typeof I=="function"?I:l;var P=I?I(y,E):l;return P===l?Qr(y,E,l,I):!!P}function Zi(y){if(!ct(y))return!1;var E=bt(y);return E==ge||E==Me||typeof y.message=="string"&&typeof y.name=="string"&&!sn(y)}function pd(y){return typeof y=="number"&&eo(y)}function ar(y){if(!ht(y))return!1;var E=bt(y);return E==Ee||E==D||E==ue||E==be}function xa(y){return typeof y=="number"&&y==je(y)}function zn(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=Fe}function ht(y){var E=typeof y;return y!=null&&(E=="object"||E=="function")}function ct(y){return y!=null&&typeof y=="object"}var ba=Us?Nt(Us):_h;function vd(y,E){return y===E||Ri(y,E,ki(E))}function _d(y,E,I){return I=typeof I=="function"?I:l,Ri(y,E,ki(E),I)}function md(y){return Ra(y)&&y!=+y}function gd(y){if(Qh(y))throw new Ve(m);return po(y)}function yd(y){return y===null}function Td(y){return y==null}function Ra(y){return typeof y=="number"||ct(y)&&bt(y)==K}function sn(y){if(!ct(y)||bt(y)!=ne)return!1;var E=yn(y);if(E===null)return!0;var I=st.call(E,"constructor")&&E.constructor;return typeof I=="function"&&I instanceof I&&vn.call(I)==pl}var Ji=Fs?Nt(Fs):mh;function Ed(y){return xa(y)&&y>=-Fe&&y<=Fe}var Ia=Bs?Nt(Bs):gh;function jn(y){return typeof y=="string"||!We(y)&&ct(y)&&bt(y)==fe}function Lt(y){return typeof y=="symbol"||ct(y)&&bt(y)==Ne}var Hr=Ds?Nt(Ds):yh;function xd(y){return y===l}function bd(y){return ct(y)&&Et(y)==Be}function Rd(y){return ct(y)&&bt(y)==Xe}var Id=Bn(Ci),Cd=Bn(function(y,E){return y<=E});function Ca(y){if(!y)return[];if(At(y))return jn(y)?zt(y):wt(y);if(Wr&&y[Wr])return rl(y[Wr]());var E=Et(y),I=E==H?di:E==_e?fn:Xr;return I(y)}function ur(y){if(!y)return y===0?y:0;if(y=Vt(y),y===Re||y===-Re){var E=y<0?-1:1;return E*He}return y===y?y:0}function je(y){var E=ur(y),I=E%1;return E===E?I?E-I:E:0}function wa(y){return y?br(je(y),0,oe):0}function Vt(y){if(typeof y=="number")return y;if(Lt(y))return q;if(ht(y)){var E=typeof y.valueOf=="function"?y.valueOf():y;y=ht(E)?E+"":E}if(typeof y!="string")return y===0?y:+y;y=Vs(y);var I=su.test(y);return I||au.test(y)?$u(y.slice(2),I?2:8):iu.test(y)?q:+y}function Aa(y){return Jt(y,Pt(y))}function wd(y){return y?br(je(y),-Fe,Fe):y===0?y:0}function nt(y){return y==null?"":Mt(y)}var Ad=$r(function(y,E){if(rn(E)||At(E)){Jt(E,_t(E),y);return}for(var I in E)st.call(E,I)&&Kr(y,I,E[I])}),Pa=$r(function(y,E){Jt(E,Pt(E),y)}),Yn=$r(function(y,E,I,P){Jt(E,Pt(E),y,P)}),Pd=$r(function(y,E,I,P){Jt(E,_t(E),y,P)}),Sd=sr(yi);function Od(y,E){var I=Dr(y);return E==null?I:so(I,E)}var Nd=Ke(function(y,E){y=ot(y);var I=-1,P=E.length,M=P>2?E[2]:l;for(M&&Rt(E[0],E[1],M)&&(P=1);++I<P;)for(var B=E[I],k=Pt(B),W=-1,Y=k.length;++W<Y;){var ae=k[W],le=y[ae];(le===l||Yt(le,Ur[ae])&&!st.call(y,ae))&&(y[ae]=B[ae])}return y}),Md=Ke(function(y){return y.push(l,Wo),Ot(Sa,l,y)});function Ld(y,E){return Gs(y,$e(E,3),Zt)}function Ud(y,E){return Gs(y,$e(E,3),Ei)}function Fd(y,E){return y==null?y:Ti(y,$e(E,3),Pt)}function Bd(y,E){return y==null?y:ho(y,$e(E,3),Pt)}function Dd(y,E){return y&&Zt(y,$e(E,3))}function $d(y,E){return y&&Ei(y,$e(E,3))}function Gd(y){return y==null?[]:Pn(y,_t(y))}function kd(y){return y==null?[]:Pn(y,Pt(y))}function Qi(y,E,I){var P=y==null?l:Rr(y,E);return P===l?I:P}function Hd(y,E){return y!=null&&Yo(y,E,lh)}function es(y,E){return y!=null&&Yo(y,E,hh)}var Xd=Go(function(y,E,I){E!=null&&typeof E.toString!="function"&&(E=_n.call(E)),y[E]=I},rs(St)),Vd=Go(function(y,E,I){E!=null&&typeof E.toString!="function"&&(E=_n.call(E)),st.call(y,E)?y[E].push(I):y[E]=[I]},$e),Wd=Ke(Jr);function _t(y){return At(y)?no(y):Ii(y)}function Pt(y){return At(y)?no(y,!0):Th(y)}function zd(y,E){var I={};return E=$e(E,3),Zt(y,function(P,M,B){nr(I,E(P,M,B),P)}),I}function jd(y,E){var I={};return E=$e(E,3),Zt(y,function(P,M,B){nr(I,M,E(P,M,B))}),I}var Yd=$r(function(y,E,I){Sn(y,E,I)}),Sa=$r(function(y,E,I,P){Sn(y,E,I,P)}),qd=sr(function(y,E){var I={};if(y==null)return I;var P=!1;E=lt(E,function(B){return B=_r(B,y),P||(P=B.length>1),B}),Jt(y,$i(y),I),P&&(I=kt(I,w|A|S,kh));for(var M=E.length;M--;)Oi(I,E[M]);return I});function Kd(y,E){return Oa(y,Wn($e(E)))}var Zd=sr(function(y,E){return y==null?{}:xh(y,E)});function Oa(y,E){if(y==null)return{};var I=lt($i(y),function(P){return[P]});return E=$e(E),Eo(y,I,function(P,M){return E(P,M[0])})}function Jd(y,E,I){E=_r(E,y);var P=-1,M=E.length;for(M||(M=1,y=l);++P<M;){var B=y==null?l:y[Qt(E[P])];B===l&&(P=M,B=I),y=ar(B)?B.call(y):B}return y}function Qd(y,E,I){return y==null?y:en(y,E,I)}function ep(y,E,I,P){return P=typeof P=="function"?P:l,y==null?y:en(y,E,I,P)}var Na=Xo(_t),Ma=Xo(Pt);function tp(y,E,I){var P=We(y),M=P||gr(y)||Hr(y);if(E=$e(E,4),I==null){var B=y&&y.constructor;M?I=P?new B:[]:ht(y)?I=ar(B)?Dr(yn(y)):{}:I={}}return(M?Dt:Zt)(y,function(k,W,Y){return E(I,k,W,Y)}),I}function rp(y,E){return y==null?!0:Oi(y,E)}function np(y,E,I){return y==null?y:Co(y,E,Li(I))}function ip(y,E,I,P){return P=typeof P=="function"?P:l,y==null?y:Co(y,E,Li(I),P)}function Xr(y){return y==null?[]:fi(y,_t(y))}function sp(y){return y==null?[]:fi(y,Pt(y))}function op(y,E,I){return I===l&&(I=E,E=l),I!==l&&(I=Vt(I),I=I===I?I:0),E!==l&&(E=Vt(E),E=E===E?E:0),br(Vt(y),E,I)}function ap(y,E,I){return E=ur(E),I===l?(I=E,E=0):I=ur(I),y=Vt(y),ch(y,E,I)}function up(y,E,I){if(I&&typeof I!="boolean"&&Rt(y,E,I)&&(E=I=l),I===l&&(typeof E=="boolean"?(I=E,E=l):typeof y=="boolean"&&(I=y,y=l)),y===l&&E===l?(y=0,E=1):(y=ur(y),E===l?(E=y,y=0):E=ur(E)),y>E){var P=y;y=E,E=P}if(I||y%1||E%1){var M=to();return Tt(y+M*(E-y+Du("1e-"+((M+"").length-1))),E)}return Ai(y,E)}var lp=Gr(function(y,E,I){return E=E.toLowerCase(),y+(I?La(E):E)});function La(y){return ts(nt(y).toLowerCase())}function Ua(y){return y=nt(y),y&&y.replace(lu,Zu).replace(Au,"")}function hp(y,E,I){y=nt(y),E=Mt(E);var P=y.length;I=I===l?P:br(je(I),0,P);var M=I;return I-=E.length,I>=0&&y.slice(I,M)==E}function cp(y){return y=nt(y),y&&Xa.test(y)?y.replace(hs,Ju):y}function fp(y){return y=nt(y),y&&qa.test(y)?y.replace(Kn,"\\$&"):y}var dp=Gr(function(y,E,I){return y+(I?"-":"")+E.toLowerCase()}),pp=Gr(function(y,E,I){return y+(I?" ":"")+E.toLowerCase()}),vp=Bo("toLowerCase");function _p(y,E,I){y=nt(y),E=je(E);var P=E?Mr(y):0;if(!E||P>=E)return y;var M=(E-P)/2;return Fn(bn(M),I)+y+Fn(xn(M),I)}function mp(y,E,I){y=nt(y),E=je(E);var P=E?Mr(y):0;return E&&P<E?y+Fn(E-P,I):y}function gp(y,E,I){y=nt(y),E=je(E);var P=E?Mr(y):0;return E&&P<E?Fn(E-P,I)+y:y}function yp(y,E,I){return I||E==null?E=0:E&&(E=+E),Rl(nt(y).replace(Zn,""),E||0)}function Tp(y,E,I){return(I?Rt(y,E,I):E===l)?E=1:E=je(E),Pi(nt(y),E)}function Ep(){var y=arguments,E=nt(y[0]);return y.length<3?E:E.replace(y[1],y[2])}var xp=Gr(function(y,E,I){return y+(I?"_":"")+E.toLowerCase()});function bp(y,E,I){return I&&typeof I!="number"&&Rt(y,E,I)&&(E=I=l),I=I===l?oe:I>>>0,I?(y=nt(y),y&&(typeof E=="string"||E!=null&&!Ji(E))&&(E=Mt(E),!E&&Nr(y))?mr(zt(y),0,I):y.split(E,I)):[]}var Rp=Gr(function(y,E,I){return y+(I?" ":"")+ts(E)});function Ip(y,E,I){return y=nt(y),I=I==null?0:br(je(I),0,y.length),E=Mt(E),y.slice(I,I+E.length)==E}function Cp(y,E,I){var P=F.templateSettings;I&&Rt(y,E,I)&&(E=l),y=nt(y),E=Yn({},E,P,Vo);var M=Yn({},E.imports,P.imports,Vo),B=_t(M),k=fi(M,B),W,Y,ae=0,le=E.interpolate||an,de="__p += '",Ie=pi((E.escape||an).source+"|"+le.source+"|"+(le===cs?nu:an).source+"|"+(E.evaluate||an).source+"|$","g"),Le="//# sourceURL="+(st.call(E,"sourceURL")?(E.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mu+"]")+`
`;y.replace(Ie,function(ke,Ze,Qe,Ut,It,Ft){return Qe||(Qe=Ut),de+=y.slice(ae,Ft).replace(hu,Qu),Ze&&(W=!0,de+=`' +
__e(`+Ze+`) +
'`),It&&(Y=!0,de+=`';
`+It+`;
__p += '`),Qe&&(de+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),ae=Ft+ke.length,ke}),de+=`';
`;var Ge=st.call(E,"variable")&&E.variable;if(!Ge)de=`with (obj) {
`+de+`
}
`;else if(tu.test(Ge))throw new Ve(T);de=(Y?de.replace(on,""):de).replace(Ga,"$1").replace(ka,"$1;"),de="function("+(Ge||"obj")+`) {
`+(Ge?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(W?", __e = _.escape":"")+(Y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var Ye=Ba(function(){return rt(B,Le+"return "+de).apply(l,k)});if(Ye.source=de,Zi(Ye))throw Ye;return Ye}function wp(y){return nt(y).toLowerCase()}function Ap(y){return nt(y).toUpperCase()}function Pp(y,E,I){if(y=nt(y),y&&(I||E===l))return Vs(y);if(!y||!(E=Mt(E)))return y;var P=zt(y),M=zt(E),B=Ws(P,M),k=zs(P,M)+1;return mr(P,B,k).join("")}function Sp(y,E,I){if(y=nt(y),y&&(I||E===l))return y.slice(0,Ys(y)+1);if(!y||!(E=Mt(E)))return y;var P=zt(y),M=zs(P,zt(E))+1;return mr(P,0,M).join("")}function Op(y,E,I){if(y=nt(y),y&&(I||E===l))return y.replace(Zn,"");if(!y||!(E=Mt(E)))return y;var P=zt(y),M=Ws(P,zt(E));return mr(P,M).join("")}function Np(y,E){var I=se,P=xe;if(ht(E)){var M="separator"in E?E.separator:M;I="length"in E?je(E.length):I,P="omission"in E?Mt(E.omission):P}y=nt(y);var B=y.length;if(Nr(y)){var k=zt(y);B=k.length}if(I>=B)return y;var W=I-Mr(P);if(W<1)return P;var Y=k?mr(k,0,W).join(""):y.slice(0,W);if(M===l)return Y+P;if(k&&(W+=Y.length-W),Ji(M)){if(y.slice(W).search(M)){var ae,le=Y;for(M.global||(M=pi(M.source,nt(fs.exec(M))+"g")),M.lastIndex=0;ae=M.exec(le);)var de=ae.index;Y=Y.slice(0,de===l?W:de)}}else if(y.indexOf(Mt(M),W)!=W){var Ie=Y.lastIndexOf(M);Ie>-1&&(Y=Y.slice(0,Ie))}return Y+P}function Mp(y){return y=nt(y),y&&Ha.test(y)?y.replace(ls,ol):y}var Lp=Gr(function(y,E,I){return y+(I?" ":"")+E.toUpperCase()}),ts=Bo("toUpperCase");function Fa(y,E,I){return y=nt(y),E=I?l:E,E===l?tl(y)?ll(y):zu(y):y.match(E)||[]}var Ba=Ke(function(y,E){try{return Ot(y,l,E)}catch(I){return Zi(I)?I:new Ve(I)}}),Up=sr(function(y,E){return Dt(E,function(I){I=Qt(I),nr(y,I,qi(y[I],y))}),y});function Fp(y){var E=y==null?0:y.length,I=$e();return y=E?lt(y,function(P){if(typeof P[1]!="function")throw new $t(g);return[I(P[0]),P[1]]}):[],Ke(function(P){for(var M=-1;++M<E;){var B=y[M];if(Ot(B[0],this,P))return Ot(B[1],this,P)}})}function Bp(y){return oh(kt(y,w))}function rs(y){return function(){return y}}function Dp(y,E){return y==null||y!==y?E:y}var $p=$o(),Gp=$o(!0);function St(y){return y}function ns(y){return vo(typeof y=="function"?y:kt(y,w))}function kp(y){return mo(kt(y,w))}function Hp(y,E){return go(y,kt(E,w))}var Xp=Ke(function(y,E){return function(I){return Jr(I,y,E)}}),Vp=Ke(function(y,E){return function(I){return Jr(y,I,E)}});function is(y,E,I){var P=_t(E),M=Pn(E,P);I==null&&!(ht(E)&&(M.length||!P.length))&&(I=E,E=y,y=this,M=Pn(E,_t(E)));var B=!(ht(I)&&"chain"in I)||!!I.chain,k=ar(y);return Dt(M,function(W){var Y=E[W];y[W]=Y,k&&(y.prototype[W]=function(){var ae=this.__chain__;if(B||ae){var le=y(this.__wrapped__),de=le.__actions__=wt(this.__actions__);return de.push({func:Y,args:arguments,thisArg:y}),le.__chain__=ae,le}return Y.apply(y,cr([this.value()],arguments))})}),y}function Wp(){return gt._===this&&(gt._=vl),this}function ss(){}function zp(y){return y=je(y),Ke(function(E){return yo(E,y)})}var jp=Fi(lt),Yp=Fi($s),qp=Fi(ai);function Da(y){return Xi(y)?ui(Qt(y)):bh(y)}function Kp(y){return function(E){return y==null?l:Rr(y,E)}}var Zp=ko(),Jp=ko(!0);function os(){return[]}function as(){return!1}function Qp(){return{}}function ev(){return""}function tv(){return!0}function rv(y,E){if(y=je(y),y<1||y>Fe)return[];var I=oe,P=Tt(y,oe);E=$e(E),y-=oe;for(var M=ci(P,E);++I<y;)E(I);return M}function nv(y){return We(y)?lt(y,Qt):Lt(y)?[y]:wt(na(nt(y)))}function iv(y){var E=++dl;return nt(y)+E}var sv=Un(function(y,E){return y+E},0),ov=Bi("ceil"),av=Un(function(y,E){return y/E},1),uv=Bi("floor");function lv(y){return y&&y.length?An(y,St,xi):l}function hv(y,E){return y&&y.length?An(y,$e(E,2),xi):l}function cv(y){return Hs(y,St)}function fv(y,E){return Hs(y,$e(E,2))}function dv(y){return y&&y.length?An(y,St,Ci):l}function pv(y,E){return y&&y.length?An(y,$e(E,2),Ci):l}var vv=Un(function(y,E){return y*E},1),_v=Bi("round"),mv=Un(function(y,E){return y-E},0);function gv(y){return y&&y.length?hi(y,St):0}function yv(y,E){return y&&y.length?hi(y,$e(E,2)):0}return F.after=kf,F.ary=pa,F.assign=Ad,F.assignIn=Pa,F.assignInWith=Yn,F.assignWith=Pd,F.at=Sd,F.before=va,F.bind=qi,F.bindAll=Up,F.bindKey=ma,F.castArray=Qf,F.chain=ca,F.chunk=oc,F.compact=ac,F.concat=uc,F.cond=Fp,F.conforms=Bp,F.constant=rs,F.countBy=gf,F.create=Od,F.curry=ga,F.curryRight=ya,F.debounce=Ta,F.defaults=Nd,F.defaultsDeep=Md,F.defer=Hf,F.delay=Xf,F.difference=lc,F.differenceBy=hc,F.differenceWith=cc,F.drop=fc,F.dropRight=dc,F.dropRightWhile=pc,F.dropWhile=vc,F.fill=mc,F.filter=Tf,F.flatMap=bf,F.flatMapDeep=Rf,F.flatMapDepth=If,F.flatten=aa,F.flattenDeep=gc,F.flattenDepth=yc,F.flip=Vf,F.flow=$p,F.flowRight=Gp,F.fromPairs=Tc,F.functions=Gd,F.functionsIn=kd,F.groupBy=Cf,F.initial=xc,F.intersection=bc,F.intersectionBy=Rc,F.intersectionWith=Ic,F.invert=Xd,F.invertBy=Vd,F.invokeMap=Af,F.iteratee=ns,F.keyBy=Pf,F.keys=_t,F.keysIn=Pt,F.map=Hn,F.mapKeys=zd,F.mapValues=jd,F.matches=kp,F.matchesProperty=Hp,F.memoize=Vn,F.merge=Yd,F.mergeWith=Sa,F.method=Xp,F.methodOf=Vp,F.mixin=is,F.negate=Wn,F.nthArg=zp,F.omit=qd,F.omitBy=Kd,F.once=Wf,F.orderBy=Sf,F.over=jp,F.overArgs=zf,F.overEvery=Yp,F.overSome=qp,F.partial=Ki,F.partialRight=Ea,F.partition=Of,F.pick=Zd,F.pickBy=Oa,F.property=Da,F.propertyOf=Kp,F.pull=Pc,F.pullAll=la,F.pullAllBy=Sc,F.pullAllWith=Oc,F.pullAt=Nc,F.range=Zp,F.rangeRight=Jp,F.rearg=jf,F.reject=Lf,F.remove=Mc,F.rest=Yf,F.reverse=ji,F.sampleSize=Ff,F.set=Qd,F.setWith=ep,F.shuffle=Bf,F.slice=Lc,F.sortBy=Gf,F.sortedUniq=kc,F.sortedUniqBy=Hc,F.split=bp,F.spread=qf,F.tail=Xc,F.take=Vc,F.takeRight=Wc,F.takeRightWhile=zc,F.takeWhile=jc,F.tap=lf,F.throttle=Kf,F.thru=kn,F.toArray=Ca,F.toPairs=Na,F.toPairsIn=Ma,F.toPath=nv,F.toPlainObject=Aa,F.transform=tp,F.unary=Zf,F.union=Yc,F.unionBy=qc,F.unionWith=Kc,F.uniq=Zc,F.uniqBy=Jc,F.uniqWith=Qc,F.unset=rp,F.unzip=Yi,F.unzipWith=ha,F.update=np,F.updateWith=ip,F.values=Xr,F.valuesIn=sp,F.without=ef,F.words=Fa,F.wrap=Jf,F.xor=tf,F.xorBy=rf,F.xorWith=nf,F.zip=sf,F.zipObject=of,F.zipObjectDeep=af,F.zipWith=uf,F.entries=Na,F.entriesIn=Ma,F.extend=Pa,F.extendWith=Yn,is(F,F),F.add=sv,F.attempt=Ba,F.camelCase=lp,F.capitalize=La,F.ceil=ov,F.clamp=op,F.clone=ed,F.cloneDeep=rd,F.cloneDeepWith=nd,F.cloneWith=td,F.conformsTo=id,F.deburr=Ua,F.defaultTo=Dp,F.divide=av,F.endsWith=hp,F.eq=Yt,F.escape=cp,F.escapeRegExp=fp,F.every=yf,F.find=Ef,F.findIndex=sa,F.findKey=Ld,F.findLast=xf,F.findLastIndex=oa,F.findLastKey=Ud,F.floor=uv,F.forEach=fa,F.forEachRight=da,F.forIn=Fd,F.forInRight=Bd,F.forOwn=Dd,F.forOwnRight=$d,F.get=Qi,F.gt=sd,F.gte=od,F.has=Hd,F.hasIn=es,F.head=ua,F.identity=St,F.includes=wf,F.indexOf=Ec,F.inRange=ap,F.invoke=Wd,F.isArguments=wr,F.isArray=We,F.isArrayBuffer=ad,F.isArrayLike=At,F.isArrayLikeObject=ft,F.isBoolean=ud,F.isBuffer=gr,F.isDate=ld,F.isElement=hd,F.isEmpty=cd,F.isEqual=fd,F.isEqualWith=dd,F.isError=Zi,F.isFinite=pd,F.isFunction=ar,F.isInteger=xa,F.isLength=zn,F.isMap=ba,F.isMatch=vd,F.isMatchWith=_d,F.isNaN=md,F.isNative=gd,F.isNil=Td,F.isNull=yd,F.isNumber=Ra,F.isObject=ht,F.isObjectLike=ct,F.isPlainObject=sn,F.isRegExp=Ji,F.isSafeInteger=Ed,F.isSet=Ia,F.isString=jn,F.isSymbol=Lt,F.isTypedArray=Hr,F.isUndefined=xd,F.isWeakMap=bd,F.isWeakSet=Rd,F.join=Cc,F.kebabCase=dp,F.last=Xt,F.lastIndexOf=wc,F.lowerCase=pp,F.lowerFirst=vp,F.lt=Id,F.lte=Cd,F.max=lv,F.maxBy=hv,F.mean=cv,F.meanBy=fv,F.min=dv,F.minBy=pv,F.stubArray=os,F.stubFalse=as,F.stubObject=Qp,F.stubString=ev,F.stubTrue=tv,F.multiply=vv,F.nth=Ac,F.noConflict=Wp,F.noop=ss,F.now=Xn,F.pad=_p,F.padEnd=mp,F.padStart=gp,F.parseInt=yp,F.random=up,F.reduce=Nf,F.reduceRight=Mf,F.repeat=Tp,F.replace=Ep,F.result=Jd,F.round=_v,F.runInContext=j,F.sample=Uf,F.size=Df,F.snakeCase=xp,F.some=$f,F.sortedIndex=Uc,F.sortedIndexBy=Fc,F.sortedIndexOf=Bc,F.sortedLastIndex=Dc,F.sortedLastIndexBy=$c,F.sortedLastIndexOf=Gc,F.startCase=Rp,F.startsWith=Ip,F.subtract=mv,F.sum=gv,F.sumBy=yv,F.template=Cp,F.times=rv,F.toFinite=ur,F.toInteger=je,F.toLength=wa,F.toLower=wp,F.toNumber=Vt,F.toSafeInteger=wd,F.toString=nt,F.toUpper=Ap,F.trim=Pp,F.trimEnd=Sp,F.trimStart=Op,F.truncate=Np,F.unescape=Mp,F.uniqueId=iv,F.upperCase=Lp,F.upperFirst=ts,F.each=fa,F.eachRight=da,F.first=ua,is(F,function(){var y={};return Zt(F,function(E,I){st.call(F.prototype,I)||(y[I]=E)}),y}(),{chain:!1}),F.VERSION=d,Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){F[y].placeholder=F}),Dt(["drop","take"],function(y,E){Je.prototype[y]=function(I){I=I===l?1:vt(je(I),0);var P=this.__filtered__&&!E?new Je(this):this.clone();return P.__filtered__?P.__takeCount__=Tt(I,P.__takeCount__):P.__views__.push({size:Tt(I,oe),type:y+(P.__dir__<0?"Right":"")}),P},Je.prototype[y+"Right"]=function(I){return this.reverse()[y](I).reverse()}}),Dt(["filter","map","takeWhile"],function(y,E){var I=E+1,P=I==ze||I==ye;Je.prototype[y]=function(M){var B=this.clone();return B.__iteratees__.push({iteratee:$e(M,3),type:I}),B.__filtered__=B.__filtered__||P,B}}),Dt(["head","last"],function(y,E){var I="take"+(E?"Right":"");Je.prototype[y]=function(){return this[I](1).value()[0]}}),Dt(["initial","tail"],function(y,E){var I="drop"+(E?"":"Right");Je.prototype[y]=function(){return this.__filtered__?new Je(this):this[I](1)}}),Je.prototype.compact=function(){return this.filter(St)},Je.prototype.find=function(y){return this.filter(y).head()},Je.prototype.findLast=function(y){return this.reverse().find(y)},Je.prototype.invokeMap=Ke(function(y,E){return typeof y=="function"?new Je(this):this.map(function(I){return Jr(I,y,E)})}),Je.prototype.reject=function(y){return this.filter(Wn($e(y)))},Je.prototype.slice=function(y,E){y=je(y);var I=this;return I.__filtered__&&(y>0||E<0)?new Je(I):(y<0?I=I.takeRight(-y):y&&(I=I.drop(y)),E!==l&&(E=je(E),I=E<0?I.dropRight(-E):I.take(E-y)),I)},Je.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},Je.prototype.toArray=function(){return this.take(oe)},Zt(Je.prototype,function(y,E){var I=/^(?:filter|find|map|reject)|While$/.test(E),P=/^(?:head|last)$/.test(E),M=F[P?"take"+(E=="last"?"Right":""):E],B=P||/^find/.test(E);!M||(F.prototype[E]=function(){var k=this.__wrapped__,W=P?[1]:arguments,Y=k instanceof Je,ae=W[0],le=Y||We(k),de=function(Ze){var Qe=M.apply(F,cr([Ze],W));return P&&Ie?Qe[0]:Qe};le&&I&&typeof ae=="function"&&ae.length!=1&&(Y=le=!1);var Ie=this.__chain__,Le=!!this.__actions__.length,Ge=B&&!Ie,Ye=Y&&!Le;if(!B&&le){k=Ye?k:new Je(this);var ke=y.apply(k,W);return ke.__actions__.push({func:kn,args:[de],thisArg:l}),new Gt(ke,Ie)}return Ge&&Ye?y.apply(this,W):(ke=this.thru(de),Ge?P?ke.value()[0]:ke.value():ke)})}),Dt(["pop","push","shift","sort","splice","unshift"],function(y){var E=dn[y],I=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",P=/^(?:pop|shift)$/.test(y);F.prototype[y]=function(){var M=arguments;if(P&&!this.__chain__){var B=this.value();return E.apply(We(B)?B:[],M)}return this[I](function(k){return E.apply(We(k)?k:[],M)})}}),Zt(Je.prototype,function(y,E){var I=F[E];if(I){var P=I.name+"";st.call(Br,P)||(Br[P]=[]),Br[P].push({name:E,func:I})}}),Br[Ln(l,U).name]=[{name:"wrapper",func:l}],Je.prototype.clone=Ol,Je.prototype.reverse=Nl,Je.prototype.value=Ml,F.prototype.at=hf,F.prototype.chain=cf,F.prototype.commit=ff,F.prototype.next=df,F.prototype.plant=vf,F.prototype.reverse=_f,F.prototype.toJSON=F.prototype.valueOf=F.prototype.value=mf,F.prototype.first=F.prototype.head,Wr&&(F.prototype[Wr]=pf),F},Lr=hl();yr?((yr.exports=Lr)._=Lr,ni._=Lr):gt._=Lr}).call(commonjsGlobal$2)})(lodash,lodash.exports);const _=lodash.exports,isAnyPropertySet=s=>{for(const a in s)if(s[a]!==void 0)return!0;return!1},omitUndefined=s=>_.omitBy(s,_.isUndefined),_sfc_main$5=defineComponent({__name:"PixiApplication",props:{autoStart:{type:Boolean,required:!1,default:void 0},width:{type:Number,required:!1,default:void 0},height:{type:Number,required:!1,default:void 0},view:{type:HTMLCanvasElement,required:!1,default:void 0},useContextAlpha:{type:Boolean,required:!1,default:void 0},autoDensity:{type:Boolean,required:!1,default:void 0},antialias:{type:Boolean,required:!1,default:void 0},preserveDrawingBuffer:{type:Boolean,required:!1,default:void 0},resolution:{type:Number,required:!1,default:void 0},forceCanvas:{type:Boolean,required:!1,default:void 0},backgroundColor:{type:Number,required:!1,default:void 0},backgroundAlpha:{type:Number,required:!1,default:void 0},clearBeforeRender:{type:Boolean,required:!1,default:void 0},powerPreference:{type:String,required:!1,default:void 0},sharedTicker:{type:Boolean,required:!1,default:void 0},sharedLoader:{type:Boolean,required:!1,default:void 0},resizeTo:{type:Object,required:!1,default:void 0}},setup(s,{expose:a}){const l=s,d=ref(),v=new Application(isAnyPropertySet(l)?omitUndefined(l):void 0);return a({application:v}),onMounted(()=>{d.value.appendChild(v.view)}),(m,g)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:d},[renderSlot(m.$slots,"default",{application:unref(v)})],512))}});function queryKey(s){for(var a=[],l=0;l<s.length;l++){var d=s[l];if(!componentRegistered(d))throw new Error("Tried to create a query with an unregistered component");if(typeof d=="object"){var v=d.operator==="not"?"!":d.operator;a.push(v+d.Component._typeId)}else a.push(d._typeId)}return a.sort().join("-")}const hasWindow=typeof window<"u",now=hasWindow&&typeof window.performance<"u"?performance.now.bind(performance):Date.now.bind(Date);function componentRegistered(s){return typeof s=="object"&&s.Component._typeId!==void 0||s.isComponent&&s._typeId!==void 0}class SystemManager{constructor(a){this._systems=[],this._executeSystems=[],this.world=a,this.lastExecutedSystem=null}registerSystem(a,l){if(!a.isSystem)throw new Error(`System '${a.name}' does not extend 'System' class`);if(this.getSystem(a)!==void 0)return console.warn(`System '${a.getName()}' already registered.`),this;var d=new a(this.world,l);return d.init&&d.init(l),d.order=this._systems.length,this._systems.push(d),d.execute&&(this._executeSystems.push(d),this.sortSystems()),this}unregisterSystem(a){let l=this.getSystem(a);return l===void 0?(console.warn(`Can unregister system '${a.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(l),1),l.execute&&this._executeSystems.splice(this._executeSystems.indexOf(l),1),this)}sortSystems(){this._executeSystems.sort((a,l)=>a.priority-l.priority||a.order-l.order)}getSystem(a){return this._systems.find(l=>l instanceof a)}getSystems(){return this._systems}removeSystem(a){var l=this._systems.indexOf(a);!~l||this._systems.splice(l,1)}executeSystem(a,l,d){if(a.initialized&&a.canExecute()){let v=now();a.execute(l,d),a.executeTime=now()-v,this.lastExecutedSystem=a,a.clearEvents()}}stop(){this._executeSystems.forEach(a=>a.stop())}execute(a,l,d){this._executeSystems.forEach(v=>(d||v.enabled)&&this.executeSystem(v,a,l))}stats(){for(var a={numSystems:this._systems.length,systems:{}},l=0;l<this._systems.length;l++){var d=this._systems[l],v=a.systems[d.getName()]={queries:{},executeTime:d.executeTime};for(var m in d.ctx)v.queries[m]=d.ctx[m].stats()}return a}}class ObjectPool{constructor(a,l){this.freeList=[],this.count=0,this.T=a,this.isObjectPool=!0,typeof l<"u"&&this.expand(l)}acquire(){this.freeList.length<=0&&this.expand(Math.round(this.count*.2)+1);var a=this.freeList.pop();return a}release(a){a.reset(),this.freeList.push(a)}expand(a){for(var l=0;l<a;l++){var d=new this.T;d._pool=this,this.freeList.push(d)}this.count+=a}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class EventDispatcher{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(a,l){let d=this._listeners;d[a]===void 0&&(d[a]=[]),d[a].indexOf(l)===-1&&d[a].push(l)}hasEventListener(a,l){return this._listeners[a]!==void 0&&this._listeners[a].indexOf(l)!==-1}removeEventListener(a,l){var d=this._listeners[a];if(d!==void 0){var v=d.indexOf(l);v!==-1&&d.splice(v,1)}}dispatchEvent(a,l,d){this.stats.fired++;var v=this._listeners[a];if(v!==void 0)for(var m=v.slice(0),g=0;g<m.length;g++)m[g].call(this,l,d)}resetCounters(){this.stats.fired=this.stats.handled=0}}class Query{constructor(a,l){if(this.Components=[],this.NotComponents=[],a.forEach(m=>{typeof m=="object"?this.NotComponents.push(m.Component):this.Components.push(m)}),this.Components.length===0)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new EventDispatcher,this.reactive=!1,this.key=queryKey(a);for(var d=0;d<l._entities.length;d++){var v=l._entities[d];this.match(v)&&(v.queries.push(this),this.entities.push(v))}}addEntity(a){a.queries.push(this),this.entities.push(a),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED,a)}removeEntity(a){let l=this.entities.indexOf(a);~l&&(this.entities.splice(l,1),l=a.queries.indexOf(this),a.queries.splice(l,1),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_REMOVED,a))}match(a){return a.hasAllComponents(this.Components)&&!a.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(a=>a.name),not:this.NotComponents.map(a=>a.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}Query.prototype.ENTITY_ADDED="Query#ENTITY_ADDED";Query.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED";Query.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class QueryManager{constructor(a){this._world=a,this._queries={}}onEntityRemoved(a){for(var l in this._queries){var d=this._queries[l];a.queries.indexOf(d)!==-1&&d.removeEntity(a)}}onEntityComponentAdded(a,l){for(var d in this._queries){var v=this._queries[d];if(!!~v.NotComponents.indexOf(l)&&~v.entities.indexOf(a)){v.removeEntity(a);continue}!~v.Components.indexOf(l)||!v.match(a)||~v.entities.indexOf(a)||v.addEntity(a)}}onEntityComponentRemoved(a,l){for(var d in this._queries){var v=this._queries[d];if(!!~v.NotComponents.indexOf(l)&&!~v.entities.indexOf(a)&&v.match(a)){v.addEntity(a);continue}if(!!~v.Components.indexOf(l)&&!!~v.entities.indexOf(a)&&!v.match(a)){v.removeEntity(a);continue}}}getQuery(a){var l=queryKey(a),d=this._queries[l];return d||(this._queries[l]=d=new Query(a,this._world)),d}stats(){var a={};for(var l in this._queries)a[l]=this._queries[l].stats();return a}}class Component{constructor(a){if(a!==!1){const l=this.constructor.schema;for(const d in l)if(a&&a.hasOwnProperty(d))this[d]=a[d];else{const v=l[d];if(v.hasOwnProperty("default"))this[d]=v.type.clone(v.default);else{const m=v.type;this[d]=m.clone(m.default)}}}this._pool=null}copy(a){const l=this.constructor.schema;for(const d in l){const v=l[d];a.hasOwnProperty(d)&&(this[d]=v.type.copy(a[d],this[d]))}return this}clone(){return new this.constructor().copy(this)}reset(){const a=this.constructor.schema;for(const l in a){const d=a[l];if(d.hasOwnProperty("default"))this[l]=d.type.copy(d.default,this[l]);else{const v=d.type;this[l]=v.copy(v.default,this[l])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(a){const l=this.constructor.schema;Object.keys(a).forEach(d=>{l.hasOwnProperty(d)||console.warn(`Trying to set attribute '${d}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)})}}Component.schema={};Component.isComponent=!0;Component.getName=function(){return this.displayName||this.name};class SystemStateComponent extends Component{}SystemStateComponent.isSystemStateComponent=!0;class EntityPool extends ObjectPool{constructor(a,l,d){super(l,void 0),this.entityManager=a,typeof d<"u"&&this.expand(d)}expand(a){for(var l=0;l<a;l++){var d=new this.T(this.entityManager);d._pool=this,this.freeList.push(d)}this.count+=a}}class EntityManager{constructor(a){this.world=a,this.componentsManager=a.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new QueryManager(this),this.eventDispatcher=new EventDispatcher,this._entityPool=new EntityPool(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(a){return this._entitiesByNames[a]}createEntity(a){var l=this._entityPool.acquire();return l.alive=!0,l.name=a||"",a&&(this._entitiesByNames[a]?console.warn(`Entity name '${a}' already exist`):this._entitiesByNames[a]=l),this._entities.push(l),this.eventDispatcher.dispatchEvent(ENTITY_CREATED,l),l}entityAddComponent(a,l,d){if(typeof l._typeId>"u"&&!this.world.componentsManager._ComponentsMap[l._typeId])throw new Error(`Attempted to add unregistered component "${l.getName()}"`);if(!~a._ComponentTypes.indexOf(l)){a._ComponentTypes.push(l),l.__proto__===SystemStateComponent&&a.numStateComponents++;var v=this.world.componentsManager.getComponentsPool(l),m=v?v.acquire():new l(d);v&&d&&m.copy(d),a._components[l._typeId]=m,this._queryManager.onEntityComponentAdded(a,l),this.world.componentsManager.componentAddedToEntity(l),this.eventDispatcher.dispatchEvent(COMPONENT_ADDED,a,l)}}entityRemoveComponent(a,l,d){var v=a._ComponentTypes.indexOf(l);!~v||(this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE,a,l),d?this._entityRemoveComponentSync(a,l,v):(a._ComponentTypesToRemove.length===0&&this.entitiesWithComponentsToRemove.push(a),a._ComponentTypes.splice(v,1),a._ComponentTypesToRemove.push(l),a._componentsToRemove[l._typeId]=a._components[l._typeId],delete a._components[l._typeId]),this._queryManager.onEntityComponentRemoved(a,l),l.__proto__===SystemStateComponent&&(a.numStateComponents--,a.numStateComponents===0&&!a.alive&&a.remove()))}_entityRemoveComponentSync(a,l,d){a._ComponentTypes.splice(d,1);var v=a._components[l._typeId];delete a._components[l._typeId],v.dispose(),this.world.componentsManager.componentRemovedFromEntity(l)}entityRemoveAllComponents(a,l){let d=a._ComponentTypes;for(let v=d.length-1;v>=0;v--)d[v].__proto__!==SystemStateComponent&&this.entityRemoveComponent(a,d[v],l)}removeEntity(a,l){var d=this._entities.indexOf(a);if(!~d)throw new Error("Tried to remove entity not in list");a.alive=!1,this.entityRemoveAllComponents(a,l),a.numStateComponents===0&&(this.eventDispatcher.dispatchEvent(ENTITY_REMOVED,a),this._queryManager.onEntityRemoved(a),l===!0?this._releaseEntity(a,d):this.entitiesToRemove.push(a))}_releaseEntity(a,l){this._entities.splice(l,1),this._entitiesByNames[a.name]&&delete this._entitiesByNames[a.name],a._pool.release(a)}removeAllEntities(){for(var a=this._entities.length-1;a>=0;a--)this.removeEntity(this._entities[a])}processDeferredRemoval(){if(!!this.deferredRemovalEnabled){for(let l=0;l<this.entitiesToRemove.length;l++){let d=this.entitiesToRemove[l],v=this._entities.indexOf(d);this._releaseEntity(d,v)}this.entitiesToRemove.length=0;for(let l=0;l<this.entitiesWithComponentsToRemove.length;l++){let d=this.entitiesWithComponentsToRemove[l];for(;d._ComponentTypesToRemove.length>0;){let v=d._ComponentTypesToRemove.pop();var a=d._componentsToRemove[v._typeId];delete d._componentsToRemove[v._typeId],a.dispose(),this.world.componentsManager.componentRemovedFromEntity(v)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(a){return this._queryManager.getQuery(a)}count(){return this._entities.length}stats(){var a={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var l in this.componentsManager._componentPool){var d=this.componentsManager._componentPool[l];a.componentPool[d.T.getName()]={used:d.totalUsed(),size:d.count}}return a}}const ENTITY_CREATED="EntityManager#ENTITY_CREATE",ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class ComponentManager{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(a){return this.Components.indexOf(a)!==-1}registerComponent(a,l){if(this.Components.indexOf(a)!==-1){console.warn(`Component type: '${a.getName()}' already registered.`);return}const d=a.schema;if(!d)throw new Error(`Component "${a.getName()}" has no schema property.`);for(const v in d)if(!d[v].type)throw new Error(`Invalid schema for component "${a.getName()}". Missing type for "${v}" property.`);a._typeId=this.nextComponentId++,this.Components.push(a),this._ComponentsMap[a._typeId]=a,this.numComponents[a._typeId]=0,l===void 0?l=new ObjectPool(a):l===!1&&(l=void 0),this._componentPool[a._typeId]=l}componentAddedToEntity(a){this.numComponents[a._typeId]++}componentRemovedFromEntity(a){this.numComponents[a._typeId]--}getComponentsPool(a){return this._componentPool[a._typeId]}}const Version="0.3.1";class Entity{constructor(a){this._entityManager=a||null,this.id=a._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(a,l){var d=this._components[a._typeId];return!d&&l===!0&&(d=this._componentsToRemove[a._typeId]),d}getRemovedComponent(a){return this._componentsToRemove[a._typeId]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(a){var l=this._components[a._typeId];if(!!l){for(var d=0;d<this.queries.length;d++){var v=this.queries[d];v.reactive&&v.Components.indexOf(a)!==-1&&v.eventDispatcher.dispatchEvent(Query.prototype.COMPONENT_CHANGED,this,l)}return l}}addComponent(a,l){return this._entityManager.entityAddComponent(this,a,l),this}removeComponent(a,l){return this._entityManager.entityRemoveComponent(this,a,l),this}hasComponent(a,l){return!!~this._ComponentTypes.indexOf(a)||l===!0&&this.hasRemovedComponent(a)}hasRemovedComponent(a){return!!~this._ComponentTypesToRemove.indexOf(a)}hasAllComponents(a){for(var l=0;l<a.length;l++)if(!this.hasComponent(a[l]))return!1;return!0}hasAnyComponents(a){for(var l=0;l<a.length;l++)if(this.hasComponent(a[l]))return!0;return!1}removeAllComponents(a){return this._entityManager.entityRemoveAllComponents(this,a)}copy(a){for(var l in a._components){var d=a._components[l];this.addComponent(d.constructor);var v=this.getComponent(d.constructor);v.copy(d)}return this}clone(){return new Entity(this._entityManager).copy(this)}reset(){this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0;for(var a in this._components)delete this._components[a]}remove(a){return this._entityManager.removeEntity(this,a)}}const DEFAULT_OPTIONS={entityPoolSize:0,entityClass:Entity};class World{constructor(a={}){if(this.options=Object.assign({},DEFAULT_OPTIONS,a),this.componentsManager=new ComponentManager(this),this.entityManager=new EntityManager(this),this.systemManager=new SystemManager(this),this.enabled=!0,this.eventQueues={},hasWindow&&typeof CustomEvent<"u"){var l=new CustomEvent("ecsy-world-created",{detail:{world:this,version:Version}});window.dispatchEvent(l)}this.lastTime=now()/1e3}registerComponent(a,l){return this.componentsManager.registerComponent(a,l),this}registerSystem(a,l){return this.systemManager.registerSystem(a,l),this}hasRegisteredComponent(a){return this.componentsManager.hasComponent(a)}unregisterSystem(a){return this.systemManager.unregisterSystem(a),this}getSystem(a){return this.systemManager.getSystem(a)}getSystems(){return this.systemManager.getSystems()}execute(a,l){a||(l=now()/1e3,a=l-this.lastTime,this.lastTime=l),this.enabled&&(this.systemManager.execute(a,l),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(a){return this.entityManager.createEntity(a)}stats(){var a={entities:this.entityManager.stats(),system:this.systemManager.stats()};return a}}class System{canExecute(){if(this._mandatoryQueries.length===0)return!0;for(let l=0;l<this._mandatoryQueries.length;l++){var a=this._mandatoryQueries[l];if(a.entities.length===0)return!1}return!0}getName(){return this.constructor.getName()}constructor(a,l){if(this.world=a,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,l&&l.priority&&(this.priority=l.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var d in this.constructor.queries){var v=this.constructor.queries[d],m=v.components;if(!m||m.length===0)throw new Error("'components' attribute can't be empty in a query");let b=m.filter(C=>!componentRegistered(C));if(b.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${d}' with unregistered components: [${b.map(C=>C.getName()).join(", ")}]`);var g=this.world.entityManager.queryComponents(m);this._queries[d]=g,v.mandatory===!0&&this._mandatoryQueries.push(g),this.queries[d]={results:g.entities};var T=["added","removed","changed"];const R={added:Query.prototype.ENTITY_ADDED,removed:Query.prototype.ENTITY_REMOVED,changed:Query.prototype.COMPONENT_CHANGED};v.listen&&T.forEach(C=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${T.join(", ")}) for query '${d}' but it does not implement the 'execute' method.`),v.listen[C]){let w=v.listen[C];if(C==="changed"){if(g.reactive=!0,w===!0){let A=this.queries[d][C]=[];g.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,S=>{A.indexOf(S)===-1&&A.push(S)})}else if(Array.isArray(w)){let A=this.queries[d][C]=[];g.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,(S,O)=>{w.indexOf(O.constructor)!==-1&&A.indexOf(S)===-1&&A.push(S)})}}else{let A=this.queries[d][C]=[];g.eventDispatcher.addEventListener(R[C],S=>{A.indexOf(S)===-1&&A.push(S)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let l in this.queries){var a=this.queries[l];if(a.added&&(a.added.length=0),a.removed&&(a.removed.length=0),a.changed)if(Array.isArray(a.changed))a.changed.length=0;else for(let d in a.changed)a.changed[d].length=0}}toJSON(){var a={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var l=this.constructor.queries;for(let d in l){let v=this.queries[d],m=l[d],g=a.queries[d]={key:this._queries[d].key};g.mandatory=m.mandatory===!0,g.reactive=m.listen&&(m.listen.added===!0||m.listen.removed===!0||m.listen.changed===!0||Array.isArray(m.listen.changed)),g.reactive&&(g.listen={},["added","removed","changed"].forEach(b=>{v[b]&&(g.listen[b]={entities:v[b].length})}))}}return a}}System.isSystem=!0;System.getName=function(){return this.displayName||this.name};class TagComponent extends Component{constructor(){super(!1)}}TagComponent.isTagComponent=!0;const copyValue=s=>s,cloneValue=s=>s,copyArray=(s,a)=>{if(!s)return s;if(!a)return s.slice();a.length=0;for(let l=0;l<s.length;l++)a.push(s[l]);return a},cloneArray=s=>s&&s.slice(),copyJSON=s=>JSON.parse(JSON.stringify(s)),cloneJSON=s=>JSON.parse(JSON.stringify(s));function createType(s){var a=["name","default","copy","clone"],l=a.filter(d=>!s.hasOwnProperty(d));if(l.length>0)throw new Error(`createType expects a type definition with the following properties: ${l.join(", ")}`);return s.isType=!0,s}const Types={Number:createType({name:"Number",default:0,copy:copyValue,clone:cloneValue}),Boolean:createType({name:"Boolean",default:!1,copy:copyValue,clone:cloneValue}),String:createType({name:"String",default:"",copy:copyValue,clone:cloneValue}),Array:createType({name:"Array",default:[],copy:copyArray,clone:cloneArray}),Ref:createType({name:"Ref",default:void 0,copy:copyValue,clone:cloneValue}),JSON:createType({name:"JSON",default:null,copy:copyJSON,clone:cloneJSON})};function generateId(s){for(var a="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",d=l.length,v=0;v<s;v++)a+=l.charAt(Math.floor(Math.random()*d));return a}function injectScript(s,a){var l=document.createElement("script");l.src=s,l.onload=a,(document.head||document.documentElement).appendChild(l)}function hookConsoleAndErrors(s){var a=["error","warning","log"];a.forEach(l=>{if(typeof console[l]=="function"){var d=console[l].bind(console);console[l]=(...v)=>(s.send({method:"console",type:l,args:JSON.stringify(v)}),d.apply(null,v))}}),window.addEventListener("error",l=>{s.send({method:"error",error:JSON.stringify({message:l.error.message,stack:l.error.stack})})})}function includeRemoteIdHTML(s){let a=document.createElement("div");return a.style.cssText=`
    align-items: center;
    background-color: #333;
    color: #aaa;
    display:flex;
    font-family: Arial;
    font-size: 1.1em;
    height: 40px;
    justify-content: center;
    left: 0;
    opacity: 0.9;
    position: absolute;
    right: 0;
    text-align: center;
    top: 0;
  `,a.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${s}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(a),a}function enableRemoteDevtools(remoteId){if(!hasWindow){console.warn("Remote devtools not available outside the browser");return}window.generateNewCode=()=>{window.localStorage.clear(),remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=s=>{var a=s.detail.world;Version=s.detail.version,worldsBeforeLoading.push(a)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",function(){infoDiv.innerHTML="Connected",connection.on("data",function(data){if(data.type==="init"){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(s=>{var a=new CustomEvent("ecsy-world-created",{detail:{world:s,version:Version}});window.dispatchEvent(a)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if(data.type==="executeScript"){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value})}})})})})};injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}hasWindow&&new URLSearchParams(window.location.search).has("enable-remote-devtools")&&enableRemoteDevtools();const Wt=class{constructor(a,l){this.x=a,this.y=l}static angle(a,l){return Math.atan2(l.y-a.y,l.x-a.x)*(180/Math.PI)}static distance(a,l){return Math.sqrt(Math.pow(l.x-a.x,2)+Math.pow(l.y-a.y,2))}static scale(a,l){return new Wt(a.x*l.x,a.y*l.y)}static min(a,l){return new Wt(Math.min(a.x,l.x),Math.min(a.y,l.y))}static max(a,l){return new Wt(Math.max(a.x,l.x),Math.max(a.y,l.y))}static lerp(a,l,d){return new Wt(a.x*(1-d)+l.x*d,a.y*(1-d)+l.y*d)}static subtracts(a,l){return new Wt(a.x-l.x,a.y-l.y)}static multiplies(a,l){return new Wt(a.x*l,a.y*l)}static divides(a,l,d){let v=a.x/l,m=a.y/l;return d&&(v=Math[d](v),m=Math[d](m)),new Wt(v,m)}static adds(a,l){return new Wt(a.x+l.x,a.y+l.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalized(){const a=this.magnitude();return new Wt(this.x!==0?this.x/a:0,this.y!==0?this.y/a:0)}equals(a){return this.x===a.x&&this.y===a.y}toString(){return`${this.x},${this.y}`}};let Vector2=Wt;ce(Vector2,"ZERO",Object.seal(new Wt(0,0)));class Input{static addKeyStatus(a,l){this.keysStatus[a]=l}static setMouseButton(a,l){l==="click"?this.mouseClick=1:l==="dblclick"?this.mouseClick=2:this.mouseButtons[a]=l}static clearKeysStatus(){for(const a of Object.keys(this.keysStatus))this.keysStatus[a]==="keyup"&&(this.keysStatus[a]=void 0)}static clearMouseStatuses(){for(const a of Object.keys(this.mouseButtons)){const l=parseInt(a);this.mouseButtons[l]==="mouseup"&&(this.mouseButtons[l]=void 0)}this.mouseClick=0}static isKey(a,l){return this.keysStatus[a]===l}static isKeyPressed(a){return this.isKey(a,"keypress")}static isKeyDown(a){return this.isKey(a,"keydown")}static isKeyUp(a){return this.isKey(a,"keyup")}static isMouseButtonUp(a){return this.mouseButtons[a]==="mouseup"}static isMouseButtonDown(a){return this.mouseButtons[a]==="mousedown"}static isMouseClick(){return this.mouseClick===1}static isMouseDblClick(){return this.mouseClick===2}}ce(Input,"keysStatus",{}),ce(Input,"mousePosition",Vector2.ZERO),ce(Input,"mouseButtons",{}),ce(Input,"mouseClick",0);class Constants{}ce(Constants,"CELL_SIZE",16),ce(Constants,"ANIMATION_UNIT_SPEED",250);const filterEmpty=Boolean,getOptions=()=>window.location.hash.indexOf("?")===-1?{}:window.location.hash.substring(window.location.hash.indexOf("?")+1).split("&").filter(filterEmpty).map(s=>s.split("=")).reduce((s,a)=>(s[a[0]]=a[1].split(",").filter(filterEmpty),s),{}),toEqual=s=>a=>a.equals(s),arrayIncludesByEquals=(s,a)=>s.find(toEqual(a))!=null,toWorldPositionCellCenter=s=>new Vector2(s.x-s.x%Constants.CELL_SIZE+Constants.CELL_SIZE/2,s.y-s.y%Constants.CELL_SIZE+Constants.CELL_SIZE/2),toWorldPosition=s=>new Vector2(s.x*Constants.CELL_SIZE+Constants.CELL_SIZE/2,s.y*Constants.CELL_SIZE+Constants.CELL_SIZE/2),cellPositionToVector=(s,a)=>toWorldPosition(new Vector2(s,a)),toGridPosition=s=>Vector2.divides(s,Constants.CELL_SIZE,"floor"),getMouseGridPosition=()=>toGridPosition(Input.mousePosition),convertPathfindingPathToPositions=s=>s.map(({position:a})=>a),getCell=s=>{const a=s.getComponent(TransformComponent),{x:l,y:d}=toGridPosition(a.position);return{x:l,y:d}},falsePredicate=()=>!1,keepOrder=()=>0,not=s=>a=>!s(a);class TransformComponent extends Component{constructor(){super(...arguments);ce(this,"position");ce(this,"rotation")}get gridPosition(){return toGridPosition(this.position)}distance(l){return Vector2.distance(this.position,l.position)}}ce(TransformComponent,"schema",{position:{type:Types.Ref},rotation:{type:Types.Number,default:0}});class SizeComponent extends Component{}ce(SizeComponent,"schema",{width:{type:Types.Number,default:0},height:{type:Types.Number,default:0}});class SelectableComponent extends Component{}ce(SelectableComponent,"schema",{selected:{type:Types.Boolean,default:!1}});class MovableComponent extends Component{}ce(MovableComponent,"schema",{moving:{type:Types.Boolean,default:!1}});class HealthComponent extends Component{constructor(){super(...arguments);ce(this,"points");ce(this,"maxPoints")}takeHit(l){this.points-=l,console.log("take hit")}}ce(HealthComponent,"schema",{points:{type:Types.Number,default:10},maxPoints:{type:Types.Number,default:10}});class MoveTransformVelocityComponent extends Component{constructor(){super(...arguments);ce(this,"moveSpeed");ce(this,"velocity")}calculateMovement(l){return Vector2.multiplies(this.velocity,this.moveSpeed*(l/1e3))}}ce(MoveTransformVelocityComponent,"schema",{moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO}});class MovePositionDirectComponent extends Component{constructor(){super(...arguments);ce(this,"movePosition")}}ce(MovePositionDirectComponent,"schema",{movePosition:{type:Types.Ref,default:null}});class PlayerMovementMouseComponent extends TagComponent{}class PlayerMovementKeysComponent extends TagComponent{}class MoveVelocityComponent extends Component{constructor(){super(...arguments);ce(this,"moveSpeed");ce(this,"velocity")}calculateMovement(l){return Vector2.multiplies(this.velocity,this.moveSpeed*(l/1e3))}}ce(MoveVelocityComponent,"schema",{moveSpeed:{type:Types.Number,default:100},velocity:{type:Types.Ref,default:Vector2.ZERO}});class Bounds{constructor(a,l){ce(this,"extends");ce(this,"min");ce(this,"max");this.center=a,this.size=l,this.extends=new Vector2(l.x/2,l.y/2),this.min=Vector2.subtracts(this.center,this.extends),this.max=Vector2.adds(this.center,this.extends)}contains(a){return a.x>=this.min.x&&a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y}}class AliveComponent extends Component{}ce(AliveComponent,"schema",{alive:{type:Types.Boolean,default:!0}});class EntityHelper{static isAlive(a){const l=a.getComponent(AliveComponent);return(l==null?void 0:l.alive)||!1}static isPositionInsideEntity(a,l,d){const v=a.getComponent(TransformComponent),m=a.getComponent(SizeComponent);return!v||!m?!1:new Bounds(v.position,new Vector2(m.width,m.height)).contains(new Vector2(l,d))}static isObjectInsideContainer(a,l){const d=a.getComponent(TransformComponent);return d?d.position.x>=l.x&&d.position.x<=l.x+l.width&&d.position.y>=l.y&&d.position.y<=l.y+l.height:!1}static deselect(a){const l=a.getMutableComponent(SelectableComponent);!l||(l.selected=!1)}static select(a){const l=a.getMutableComponent(SelectableComponent);!l||(l.selected=!0)}static isSelected(a){const l=a.getComponent(SelectableComponent);return l?l.selected:!1}static isMoving(a){const l=a.getComponent(MovePositionDirectComponent);return l?l.movePosition!==null:!1}}class TeamComponent extends Component{}ce(TeamComponent,"schema",{number:{type:Types.Number}});const isInRange=(s,a)=>{if(!s.hasComponent(TransformComponent))return falsePredicate;const l=s.getComponent(TransformComponent).position;return d=>{if(!d.hasComponent(TransformComponent))return!1;const v=d.getComponent(TransformComponent);return Vector2.distance(l,v.position)<=a}},byClosestDistance=s=>{if(!s.hasComponent(TransformComponent))return keepOrder;const a=s.getComponent(TransformComponent);return(l,d)=>{if(!l.hasComponent(TransformComponent)&&!d.hasComponent(TransformComponent))return 0;if(!l.hasComponent(TransformComponent))return 1;if(!d.hasComponent(TransformComponent))return-1;const v=l.getComponent(TransformComponent),m=d.getComponent(TransformComponent);return a.distance(v)-a.distance(m)}},isOnTeam=s=>a=>a.hasComponent(TeamComponent)?a.getComponent(TeamComponent).number===s:!1,isSameEntity=s=>a=>a.id===s.id,getEntityAtPosition=(s,a,l)=>{var d;return(d=s.find(v=>EntityHelper.isPositionInsideEntity(v,a,l)))!=null?d:null},isAlive=()=>s=>{var a,l;return(l=(a=s.getComponent(AliveComponent))==null?void 0:a.alive)!=null?l:!0},qn=class extends System{constructor(l,d){super(l,d);ce(this,"startPosition",null);ce(this,"deselectEntitiesTimeout",null);ce(this,"app");ce(this,"rectangle");this.app=d.app,this.rectangle=new Graphics,this.rectangle.visible=!1,this.app.stage.addChild(this.rectangle)}getSelected(){return this.queries.selectable.results.filter(l=>{var d;return((d=l.getComponent(SelectableComponent))==null?void 0:d.selected)||!1})}startSelect(){this.rectangle.visible=!0}updateSelect(){const l=Input.mousePosition.x-this.startPosition.x,d=Input.mousePosition.y-this.startPosition.y;this.getSelected().forEach(EntityHelper.deselect),this.rectangle.clear(),this.rectangle.lineStyle(1,0),this.rectangle.drawRect(this.startPosition.x,this.startPosition.y,l,d)}endSelect(){this.selectEntities(),this.startPosition=null,this.rectangle.visible=!1,this.rectangle.clear()}selectEntities(){this.isSimpleClick()?this.selectOneEntity():this.selectMultipleEntities()}isSimpleClick(){return Vector2.distance(this.startPosition,Input.mousePosition)<qn.SINGLE_UNIT_DISTANCE}selectOneEntity(){const l=this.getEntityAtPosition(Input.mousePosition.x,Input.mousePosition.y);if(l&&isOnTeam(1)(l))EntityHelper.select(l);else{Input.isMouseDblClick()||(this.deselectEntitiesTimeout=setTimeout(()=>{this.getSelected().forEach(EntityHelper.deselect)},300));return}}selectMultipleEntities(){const l=Input.mousePosition.x-this.startPosition.x,d=Input.mousePosition.y-this.startPosition.y;this.queries.selectable.results.filter(v=>EntityHelper.isObjectInsideContainer(v,{x:this.startPosition.x,y:this.startPosition.y,width:l,height:d})).filter(isOnTeam(1)).forEach(v=>EntityHelper.select(v))}getEntityAtPosition(l,d){return getEntityAtPosition(this.queries.selectable.results,l,d)}execute(l,d){Input.isMouseDblClick()&&this.deselectEntitiesTimeout!==null&&clearTimeout(this.deselectEntitiesTimeout),this.startPosition===null?Input.isMouseButtonDown(0)&&(this.startPosition=Input.mousePosition,this.startSelect()):Input.isMouseButtonUp(0)?this.endSelect():Vector2.distance(this.startPosition,Input.mousePosition)>qn.SINGLE_UNIT_DISTANCE&&this.updateSelect()}};let PlayerSelectionSystem=qn;ce(PlayerSelectionSystem,"queries",{selectable:{components:[SelectableComponent]}}),ce(PlayerSelectionSystem,"SINGLE_UNIT_DISTANCE",5);class HealthSystem extends System{execute(a,l){this.queries.healthy.added!==void 0&&this.queries.healthy.added.forEach(this.updateStatus),this.queries.healthy.changed!==void 0&&this.queries.healthy.changed.forEach(this.updateStatus)}updateStatus(a){const l=a.getComponent(HealthComponent);if(!!l&&!!a.hasComponent(AliveComponent)&&l.points===0){const d=a.getMutableComponent(AliveComponent);if(!d)return;d.alive=!1}}}ce(HealthSystem,"queries",{healthy:{components:[HealthComponent],listen:{added:!0,changed:!0}}});class SpriteComponent extends Component{}ce(SpriteComponent,"schema",{sprite:{type:Types.Ref}});class PixiJsSystem extends System{constructor(l,d){super(l,d);ce(this,"app");this.app=d.app}}class AnimatedSpriteComponent extends Component{constructor(){super(...arguments);ce(this,"state")}}ce(AnimatedSpriteComponent,"schema",{sprite:{type:Types.Ref},state:{type:Types.String}});class AliveSystem extends PixiJsSystem{execute(a,l){this.queries.alives.changed&&this.queries.alives.changed.forEach(d=>{this.isDead(d)&&this.handleDead(d)})}isDead(a){const l=a.getMutableComponent(AliveComponent);return l?!l.alive:!1}handleDead(a){if(a.removeComponent(SelectableComponent),a.removeComponent(HealthComponent),a.hasComponent(SpriteComponent)){const l=a.getComponent(SpriteComponent);l.sprite.texture=this.app.loader.resources.dead.texture}if(a.hasComponent(AnimatedSpriteComponent)){const l=a.getComponent(AnimatedSpriteComponent);l.sprite.textures=[this.app.loader.resources.dead.texture]}}}ce(AliveSystem,"queries",{alives:{components:[AliveComponent],listen:{changed:!0}}});class InputSystem extends System{constructor(l,d){super(l,d);ce(this,"canvas");ce(this,"keyQueue",[]);ce(this,"mouseEvents",[]);this.canvas=d.canvas,this.canvas.addEventListener("mousedown",v=>{this.mouseEvents.push(v)}),this.canvas.addEventListener("mouseup",v=>{this.mouseEvents.push(v)}),this.canvas.addEventListener("click",v=>{this.mouseEvents.push(v)}),this.canvas.addEventListener("dblclick",v=>{this.mouseEvents.push(v)}),this.canvas.addEventListener("mousemove",v=>{Input.mousePosition=new Vector2(v.offsetX,v.offsetY)}),window.addEventListener("keydown",v=>{this.keyQueue.push(v)}),window.addEventListener("keyup",v=>{this.keyQueue.push(v)}),window.addEventListener("keypress",v=>{this.keyQueue.push(v)})}execute(l,d){if(Input.clearMouseStatuses(),this.mouseEvents.length>0){let v;for(;v=this.mouseEvents.shift();)Input.setMouseButton(v.button,v.type)}if(Input.clearKeysStatus(),this.keyQueue.length>0){let v;for(;v=this.keyQueue.pop();)Input.addKeyStatus(v.key,v.type);this.keyQueue=[]}}}class MovePositionDirectSystem extends System{execute(a,l){for(const d of this.queries.entities.results){const v=d.getMutableComponent(MovePositionDirectComponent);if((v==null?void 0:v.movePosition)==null)continue;const m=d.getMutableComponent(TransformComponent);!m||this.moveByMoveVelocity(d,m,v)}}moveByTransformVelocity(a,l,d){const v=a.getMutableComponent(MoveTransformVelocityComponent);if(v){if(Vector2.distance(l.position,d.movePosition)<1){l.position=d.movePosition,d.movePosition=null,v.velocity=Vector2.ZERO;return}v.velocity=Vector2.subtracts(d.movePosition,l.position).normalized()}}moveByMoveVelocity(a,l,d){const v=a.getMutableComponent(MoveVelocityComponent);if(v){if(Vector2.distance(l.position,d.movePosition)<1){l.position=d.movePosition,d.movePosition=null,v.velocity=Vector2.ZERO;return}v.velocity=Vector2.subtracts(d.movePosition,l.position).normalized()}}}ce(MovePositionDirectSystem,"queries",{entities:{components:[MovePositionDirectComponent]}});class ControlledComponent extends Component{}ce(ControlledComponent,"schema",{by:{type:Types.String,default:null}});class FollowComponent extends Component{constructor(){super(...arguments);ce(this,"follow")}}ce(FollowComponent,"schema",{follow:{type:Types.Ref,default:null}});class MovePathComponent extends Component{constructor(){super(...arguments);ce(this,"path")}}ce(MovePathComponent,"schema",{path:{type:Types.Array,default:[]}});const isPositionEqual=(s,a)=>s.x===a.x&&s.y===a.y;class Node$1{constructor(a=null,l){ce(this,"g",0);ce(this,"h",0);ce(this,"f",0);this.parent=a,this.position=l}calculateF(){this.f=this.g+this.h}equals(a){return a instanceof Node$1?isPositionEqual(this.position,a.position):!1}toString(){return this.position.x+","+this.position.y}}const getLowestFNode=s=>{let a=s[0];for(let l=1;l<s.length;l++){const d=s[l];d.f<a.f&&(a=d)}return a!=null?a:null},createPathFromEndNode=s=>{const a=[];a.push(s);let l=s;for(;l.parent!==null;)a.push(l.parent),l=l.parent;return a.reverse(),a},relativeAdjacentPositions=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0},{x:-1,y:-1},{x:-1,y:1},{x:1,y:-1},{x:1,y:1}],isPositionInsideGrid=(s,a)=>a.y>=0&&a.y<s.length&&a.x>=0&&a.x<s[a.y].length,generateAdjacentNodes=(s,a)=>relativeAdjacentPositions.map(l=>{const d={x:a.position.x+l.x,y:a.position.y+l.y};if(!!isPositionInsideGrid(s,d)&&s[d.y][d.x]===0)return new Node$1(a,d)}).filter(filterEmpty),MOVE_STRAIGHT_COST=10,MOVE_DIAGONAL_COST=14,calculateDistanceCost=(s,a)=>{const l=Math.abs(s.position.x-a.position.x),d=Math.abs(s.position.y-a.position.y),v=Math.abs(l-d);return MOVE_DIAGONAL_COST*Math.min(l,d)+MOVE_STRAIGHT_COST*v},astar=(s,a,l)=>{const d=new Node$1(null,a),v=new Node$1(null,l),m=[],g=[];for(m.push(d);m.length>0;){const T=getLowestFNode(m);if(T==null)break;if(m.splice(m.indexOf(T),1),g.push(T),T.equals(v))return createPathFromEndNode(T);const b=generateAdjacentNodes(s,T);for(const R of b)if(!arrayIncludesByEquals(g,R)){if(R.g=T.g+1,R.h=calculateDistanceCost(R,v),R.calculateF(),arrayIncludesByEquals(m,R)){const C=m.find(toEqual(R));if(R.g>C.g)continue}m.push(R)}}return[]};class PlayerMovementMouseSystem extends PixiJsSystem{constructor(l,d){super(l,d);ce(this,"map",null);d.eventBus.on("level:loaded",v=>{this.map=v.detail.level.collisionMap})}execute(l,d){if(Input.isMouseButtonUp(2)||Input.isMouseDblClick())for(const v of this.queries.playerEntities.results){const m=v.getComponent(SelectableComponent);if(!m||!m.selected)continue;const g=v.getComponent(TransformComponent);if(!!g&&this.map!=null){const T=getEntityAtPosition(this.queries.entities.results,Input.mousePosition.x,Input.mousePosition.y);if(T!=null){const w=v.getMutableComponent(FollowComponent);if(w!=null){w.follow=T;continue}}const b=v.getMutableComponent(FollowComponent);b!=null&&b.follow!=null&&(b.follow=null);const R=astar(this.map,g.gridPosition,getMouseGridPosition()),C=v.getMutableComponent(MovePathComponent);C.path=convertPathfindingPathToPositions(R.slice(1)),v.hasComponent(ControlledComponent)&&(v.getMutableComponent(ControlledComponent).by="player")}}}}ce(PlayerMovementMouseSystem,"queries",{playerEntities:{components:[PlayerMovementMouseComponent]},entities:{components:[TransformComponent,SizeComponent]}});class MoveVelocitySystem extends System{execute(a,l){this.queries.bodies.results.forEach(d=>this.updateEntityBody(d,a))}updateEntityBody(a,l){const d=a.getMutableComponent(MoveVelocityComponent);if((d==null?void 0:d.velocity)==null)return;const v=a.getMutableComponent(TransformComponent);!v||(v.position.x=v.position.x+d.velocity.x,v.position.y=v.position.y+d.velocity.y)}}ce(MoveVelocitySystem,"queries",{bodies:{components:[MoveVelocityComponent,TransformComponent],listen:{added:!0}}});class SpriteSystem extends PixiJsSystem{execute(a,l){var d,v,m,g;if(((v=(d=this.queries.sprites.added)==null?void 0:d.length)!=null?v:0)>0)for(const T of this.queries.sprites.added){const b=T.getMutableComponent(SpriteComponent);this.app.stage.addChild(b.sprite)}if(this.queries.sprites.results.forEach(T=>{const b=T.getMutableComponent(SpriteComponent),R=T.getComponent(TransformComponent);R!=null&&b.sprite.position.set(R.position.x,R.position.y)}),((g=(m=this.queries.animatedSprites.added)==null?void 0:m.length)!=null?g:0)>0)for(const T of this.queries.animatedSprites.added){const b=T.getMutableComponent(AnimatedSpriteComponent);this.app.stage.addChild(b.sprite);const R=T.getComponent(TransformComponent);R!=null&&b.sprite.position.set(R.position.x,R.position.y)}this.queries.animatedSprites.results.forEach(T=>{const b=T.getMutableComponent(AnimatedSpriteComponent),R=T.getComponent(TransformComponent);R!=null&&b.sprite.position.set(R.position.x,R.position.y)})}}ce(SpriteSystem,"queries",{sprites:{components:[SpriteComponent],listen:{added:!0}},animatedSprites:{components:[AnimatedSpriteComponent],listen:{added:!0}}});class GraphicsComponent extends Component{constructor(){super(...arguments);ce(this,"addedToStage",!1)}}ce(GraphicsComponent,"schema",{graphics:{type:Types.Ref},addedToStage:{type:Types.Boolean}});class AttackComponent extends Component{constructor(){super(...arguments);ce(this,"aggroRange");ce(this,"attackRange");ce(this,"attackDamage")}attack(l){l.getMutableComponent(HealthComponent).takeHit(this.attackDamage)}}ce(AttackComponent,"schema",{aggroRange:{type:Types.Number},attackRange:{type:Types.Number},attackDamage:{type:Types.Number}});const getHealthColor=s=>s>=.66?65280:s>=.33?16776960:16711680;class GraphicsSystem extends PixiJsSystem{constructor(l,d){var v;super(l,d);ce(this,"showAllHealth");ce(this,"showDebugAggro");this.showAllHealth=d.options.showallhealth!==void 0?d.options.showallhealth[0]=="true":!1,this.showDebugAggro=(v=d.options.debug)==null?void 0:v.includes("aggro")}drawHealthBar(l,d,v){d.beginFill(0),d.drawRect(-8,12,16,5),d.endFill();const m=l.getComponent(HealthComponent);if(m){const g=m.points/m.maxPoints;d.beginFill(getHealthColor(g)),d.drawRect(-7,13,14*g,3),d.endFill()}}drawSelectionIndicators(l,d,v){const m=l.getComponent(SizeComponent),g=4,T=-m.width/2-g,b=-m.height/2-g,R=m.width/2+g;d.lineStyle(1,0).moveTo(T,-6).lineTo(T,b).lineTo(T/2,b),d.lineStyle(1,0).moveTo(R/2,b).lineTo(R,b).lineTo(R,-6)}drawAggroRadius(l,d,v){const m=l.getComponent(AttackComponent);m!=null&&(d.lineStyle(1,16711680),d.drawCircle(0,0,m.aggroRange))}execute(l,d){var v,m,g,T;if(((m=(v=this.queries.graphics.results)==null?void 0:v.length)!=null?m:0)>0)for(const b of this.queries.graphics.results){const R=b.getMutableComponent(GraphicsComponent);if(R.addedToStage||(this.app.stage.addChild(R.graphics),R.addedToStage=!0),b.hasComponent(SelectableComponent)){const C=b.getComponent(TransformComponent).position,w=(T=(g=b.getComponent(SpriteComponent))==null?void 0:g.sprite)!=null?T:b.getComponent(AnimatedSpriteComponent).sprite;R.graphics.clear(),R.graphics.position.set(C.x,C.y),EntityHelper.isSelected(b)&&this.drawSelectionIndicators(b,R.graphics,w),(this.showAllHealth||EntityHelper.isSelected(b))&&this.drawHealthBar(b,R.graphics,w),this.showDebugAggro&&this.drawAggroRadius(b,R.graphics,w)}else R.graphics.clear()}}}ce(GraphicsSystem,"queries",{graphics:{components:[GraphicsComponent]}});const require$$0=getAugmentedNamespace(pixi);var __assign=commonjsGlobal$2&&commonjsGlobal$2.__assign||function(){return __assign=Object.assign||function(s){for(var a,l=1,d=arguments.length;l<d;l++){a=arguments[l];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},__assign.apply(this,arguments)},DashLine_1=void 0,PIXI=require$$0,dashLineOptionsDefault={dash:[10,5],width:1,color:16777215,alpha:1,scale:1,useTexture:!1,alignment:.5},DashLine=function(){function s(a,l){l===void 0&&(l={}),this.cursor=new PIXI.Point,this.scale=1,this.graphics=a,l=__assign(__assign({},dashLineOptionsDefault),l),this.dash=l.dash,this.dashSize=this.dash.reduce(function(d,v){return d+v}),this.useTexture=l.useTexture,this.options=l,this.setLineStyle()}return s.prototype.setLineStyle=function(){var a=this.options;if(this.useTexture){var l=s.getTexture(a,this.dashSize);this.graphics.lineTextureStyle({width:a.width*a.scale,color:a.color,alpha:a.alpha,texture:l,alignment:a.alignment}),this.activeTexture=l}else this.graphics.lineStyle({width:a.width*a.scale,color:a.color,alpha:a.alpha,cap:a.cap,join:a.join,alignment:a.alignment});this.scale=a.scale},s.distance=function(a,l,d,v){return Math.sqrt(Math.pow(d-a,2)+Math.pow(v-l,2))},s.prototype.moveTo=function(a,l){return this.lineLength=0,this.cursor.set(a,l),this.start=new PIXI.Point(a,l),this.graphics.moveTo(this.cursor.x,this.cursor.y),this},s.prototype.lineTo=function(a,l,d){typeof this.lineLength===void 0&&this.moveTo(0,0);var v=s.distance(this.cursor.x,this.cursor.y,a,l),m=Math.atan2(l-this.cursor.y,a-this.cursor.x),g=d&&a===this.start.x&&l===this.start.y;if(this.useTexture)if(this.graphics.moveTo(this.cursor.x,this.cursor.y),this.adjustLineStyle(m),g&&this.dash.length%2===0){var T=Math.min(this.dash[this.dash.length-1],v);this.graphics.lineTo(a-Math.cos(m)*T,l-Math.sin(m)*T),this.graphics.closePath()}else this.graphics.lineTo(a,l);else{for(var b=Math.cos(m),R=Math.sin(m),C=this.cursor.x,w=this.cursor.y,A=this.lineLength%(this.dashSize*this.scale),S=0,O=0,L=0,N=0;N<this.dash.length;N++){var U=this.dash[N]*this.scale;if(A<L+U){S=N,O=A-L;break}else L+=U}for(var $=v;$>0;){var U=this.dash[S]*this.scale-O,G=$>U?U:$;if(g){var z=s.distance(C+b*G,w+R*G,this.start.x,this.start.y);if(z<=G){if(S%2===0){var V=s.distance(C,w,this.start.x,this.start.y)-this.dash[this.dash.length-1]*this.scale;C+=b*V,w+=R*V,this.graphics.lineTo(C,w)}break}}C+=b*G,w+=R*G,S%2?this.graphics.moveTo(C,w):this.graphics.lineTo(C,w),$-=G,S++,S=S===this.dash.length?0:S,O=0}}return this.lineLength+=v,this.cursor.set(a,l),this},s.prototype.closePath=function(){this.lineTo(this.start.x,this.start.y,!0)},s.prototype.drawCircle=function(a,l,d,v,m){v===void 0&&(v=80);var g=Math.PI*2/v,T=0,b;m?(b=new PIXI.Point(a+Math.cos(T)*d,l+Math.sin(T)*d),m.apply(b,b),this.moveTo(b[0],b[1])):(b=new PIXI.Point(a+Math.cos(T)*d,l+Math.sin(T)*d),this.moveTo(b.x,b.y)),T+=g;for(var R=1;R<v+1;R++){var C=R===v?b:[a+Math.cos(T)*d,l+Math.sin(T)*d];this.lineTo(C[0],C[1]),T+=g}return this},s.prototype.drawEllipse=function(a,l,d,v,m,g){m===void 0&&(m=80);for(var T=Math.PI*2/m,b,R=new PIXI.Point,C=0;C<Math.PI*2;C+=T){var w=a-d*Math.sin(C),A=l-v*Math.cos(C);g&&(R.set(w,A),g.apply(R,R),w=R.x,A=R.y),C===0?(this.moveTo(w,A),b={x:w,y:A}):this.lineTo(w,A)}return this.lineTo(b.x,b.y,!0),this},s.prototype.drawPolygon=function(a,l){var d=new PIXI.Point;if(typeof a[0]=="number")if(l){d.set(a[0],a[1]),l.apply(d,d),this.moveTo(d.x,d.y);for(var v=2;v<a.length;v+=2)d.set(a[v],a[v+1]),l.apply(d,d),this.lineTo(d.x,d.y,v===a.length-2)}else{this.moveTo(a[0],a[1]);for(var v=2;v<a.length;v+=2)this.lineTo(a[v],a[v+1],v===a.length-2)}else if(l){var m=a[0];d.copyFrom(m),l.apply(d,d),this.moveTo(d.x,d.y);for(var v=1;v<a.length;v++){var g=a[v];d.copyFrom(g),l.apply(d,d),this.lineTo(d.x,d.y,v===a.length-1)}}else{var m=a[0];this.moveTo(m.x,m.y);for(var v=1;v<a.length;v++){var T=a[v];this.lineTo(T.x,T.y,v===a.length-1)}}return this},s.prototype.drawRect=function(a,l,d,v,m){if(m){var g=new PIXI.Point;g.set(a,l),m.apply(g,g),this.moveTo(g.x,g.y),g.set(a+d,l),m.apply(g,g),this.lineTo(g.x,g.y),g.set(a+d,l+v),m.apply(g,g),this.lineTo(g.x,g.y),g.set(a,l+v),m.apply(g,g),this.lineTo(g.x,g.y),g.set(a,l),m.apply(g,g),this.lineTo(g.x,g.y,!0)}else this.moveTo(a,l).lineTo(a+d,l).lineTo(a+d,l+v).lineTo(a,l+v).lineTo(a,l,!0);return this},s.prototype.adjustLineStyle=function(a){var l=this.graphics.line;l.matrix=new PIXI.Matrix,a&&l.matrix.rotate(a),this.scale!==1&&l.matrix.scale(this.scale,this.scale);var d=-this.lineLength;l.matrix.translate(this.cursor.x+d*Math.cos(a),this.cursor.y+d*Math.sin(a)),this.graphics.lineStyle(l)},s.getTexture=function(a,l){var d=a.dash.toString();if(s.dashTextureCache[d])return s.dashTextureCache[d];var v=document.createElement("canvas");v.width=l,v.height=Math.ceil(a.width);var m=v.getContext("2d");if(!m){console.warn("Did not get context from canvas");return}m.strokeStyle="white",m.globalAlpha=a.alpha,m.lineWidth=a.width;var g=0,T=a.width/2;m.moveTo(g,T);for(var b=0;b<a.dash.length;b+=2)g+=a.dash[b],m.lineTo(g,T),a.dash.length!==b+1&&(g+=a.dash[b+1],m.moveTo(g,T));m.stroke();var R=s.dashTextureCache[d]=PIXI.Texture.from(v);return R.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST,R},s.dashTextureCache={},s}();DashLine_1=DashLine;class GridSystem extends PixiJsSystem{constructor(l,d){super(l,d);ce(this,"graphics");ce(this,"options");this.options=d.options,window.onresize=()=>this.draw(),this.graphics=this.app.stage.addChildAt(new Graphics,0),this.draw()}execute(l,d){}draw(){var d;if(this.graphics.clear(),!((d=this.options.debug)!=null&&d.includes("grid")))return;const l=new DashLine_1(this.graphics,{dash:[5,5],width:1,color:11184810});for(let v=Constants.CELL_SIZE;v<this.app.screen.height;v+=Constants.CELL_SIZE)l.moveTo(0,v).lineTo(this.app.screen.width,v);for(let v=Constants.CELL_SIZE;v<this.app.screen.width;v+=Constants.CELL_SIZE)l.moveTo(v,0).lineTo(v,this.app.screen.height)}}class AssetComponent extends Component{constructor(){super(...arguments);ce(this,"animations")}}ce(AssetComponent,"schema",{animations:{type:Types.Ref}});class TargetComponent extends Component{}ce(TargetComponent,"schema",{target:{type:Types.Ref,default:null}});class CollidableComponent extends TagComponent{}class EntityFactory{constructor(a,l){this.world=a,this.animations=l}createUnit(a){const l=Constants.CELL_SIZE,d=Constants.CELL_SIZE;let v=Math.random()*360;v-=v%90;const m=this.animations[a.color].swordsmen,g=new AnimatedSprite(m.idle.north.textures);return g.anchor.set(.5),g.position.set(a.position.x,a.position.y),g.animationSpeed=.25,g.play(),this.world.createEntity().addComponent(TransformComponent,{position:new Vector2(a.position.x,a.position.y),rotation:v}).addComponent(SizeComponent,{width:l,height:d}).addComponent(MovableComponent).addComponent(SelectableComponent).addComponent(HealthComponent,{points:10,maxPoints:10}).addComponent(AliveComponent).addComponent(MoveVelocityComponent,{moveSpeed:50}).addComponent(PlayerMovementKeysComponent).addComponent(MovePositionDirectComponent).addComponent(PlayerMovementMouseComponent).addComponent(AnimatedSpriteComponent,{sprite:g,state:"idle_north"}).addComponent(GraphicsComponent,{graphics:new Graphics}).addComponent(MovePathComponent,{path:[]}).addComponent(CollidableComponent).addComponent(TeamComponent,a.team).addComponent(FollowComponent).addComponent(AttackComponent,{aggroRange:80,attackRange:16,attackDamage:1}).addComponent(TargetComponent).addComponent(ControlledComponent).addComponent(AssetComponent,{animations:m})}}function t(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);a&&(d=d.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),l.push.apply(l,d)}return l}function e(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?t(Object(l),!0).forEach(function(d){r(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function r(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function n(s){return s.slice(0,-1)}function o(s,a=0){return a?Array.from(Array(a-s).keys()).map(l=>l+s):Array.from(Array(s).keys())}function c(s){return[...new Set(s)]}function u(s,a){const l=c(s.map(g=>g.set)).filter(Boolean),d=(v=o(1,s.length+1),m=l,[v,m].reduce((g,T)=>g.filter(b=>!T.includes(b)))).sort(()=>.5-a());var v,m;s.filter(g=>!g.set).forEach((g,T)=>g.set=d[T])}function f(s,a,l=.5){n(s).forEach((d,v)=>{const m=s[v+1],g=d.set!==m.set,T=a()<=l;g&&T&&(function(b,R,C){b.forEach(w=>{w.set===R&&(w.set=C)})}(s,m.set,d.set),d.right=!1,m.left=!1)})}function i(s=8,a=s,l=!0,d=1){const v=function(R){return function(){let C=R+=1831565813;return C=Math.imul(C^C>>>15,1|C),C^=C+Math.imul(C^C>>>7,61|C),((C^C>>>14)>>>0)/4294967296}}(d),m=[],g=o(s);for(let R=0;R<a;R+=1){const C=g.map(w=>({x:w,y:R,top:l||R>0,left:l||w>0,bottom:l||R<a-1,right:l||w<s-1}));m.push(C)}n(m).forEach((R,C)=>{u(R,v),f(R,v),function(w,A,S){const O=Object.values(function(N,U){let $=c(N.map(G=>G.set)).reduce((G,z)=>e(e({},G),{},{[z]:[]}),{});return N.forEach(G=>$[G.set].push(G)),$}(w)),{ceil:L}=Math;O.forEach(N=>{(function(U,$,G){$=$==null?1:$;const z=U==null?0:U.length;if(!z||$<1)return[];$=$>z?z:$;let V=-1;const X=z-1,ie=[...U];for(;++V<$;){const re=V+Math.floor(G()*(X-V+1)),J=ie[re];ie[re]=ie[V],ie[V]=J}return ie.slice(0,$)})(N,L(S()*N.length),S).forEach(U=>{if(U){const $=A[U.x];U.bottom=!1,$.top=!1,$.set=U.set}})})}(R,m[C+1],v)});const T=(b=m)[b.length-1];var b;return u(T,v),f(T,v,1),m}const getGridSizeByScreen=s=>({width:Math.ceil(s.screen.width/Constants.CELL_SIZE),height:Math.ceil(s.screen.height/Constants.CELL_SIZE)}),createEmptyGrid=s=>Array.from({length:s.height},()=>Array.from({length:s.width},()=>0)),generateMaze=s=>{const a=i(Math.floor(s.width/2),Math.floor(s.height/2),!0,Math.random()*1e3);return convertEllerMazeToGrid(a)},convertEllerMazeToGrid=s=>{const a=[];for(const l of s){a[l[0].y*2]=[],a[l[0].y*2+1]=[],a[l[0].y*2+2]=[];for(const d of l)a[d.y*2][d.x*2]=1,a[d.y*2+1][d.x*2]=d.left?1:0,a[d.y*2][d.x*2+1]=d.top?1:0,a[d.y*2][d.x*2+2]=1,a[d.y*2+1][d.x*2+1]=0,a[d.y*2+1][d.x*2+2]=d.right?1:0,a[d.y*2+2][d.x*2+2]=1,a[d.y*2+2][d.x*2+1]=d.bottom?1:0,a[d.y*2+2][d.x*2]=1}return a};class Level{constructor(a,l){this.app=a,this.world=l}}const DEFAULT_SPEED=.25;class Animation{constructor(a,l,d){this.textures=a,this.speed=l,this.loop=d}set(a){a.textures=this.textures,a.animationSpeed=this.speed,a.loop=this.loop,a.play()}}const colors=["red","blue"],units=["swordsmen","crosscowsoldier","knight","juggernaut","catapult","cannon"],colorlessUnits=["catapult","cannon"],directions=["north","northeast","east","southeast","south","southwest","west","northwest"],states=["idle","move","attack","dying","dead"],loopableStates=["move","attack"],getAnimationKey=(s,a,l,d)=>colorlessUnits.includes(a)?`${a}.${l}.${d}`:`${a}.${s}.${l}.${d}`,getAnimation=(s,a,l,d,v)=>{const m=getAnimationKey(a,l,d,v);return s.animations[m]!=null?new Animation(s.animations[m],DEFAULT_SPEED,loopableStates.includes(d)):s.textures[m+".png"]!=null?new Animation([s.textures[m+".png"]],DEFAULT_SPEED,!1):null},loadByDirection=(s,a,l,d)=>directions.reduce((v,m)=>({...v,[m]:getAnimation(s,a,l,d,m)}),{}),loadByUnit=(s,a,l)=>states.reduce((d,v)=>({...d,[v]:loadByDirection(s,a,l,v)}),{}),loadByColor=(s,a)=>units.reduce((l,d)=>({...l,[d]:loadByUnit(s,a,d)}),{}),load=s=>colors.reduce((a,l)=>({...a,[l]:loadByColor(s,l)}),{}),ROTATION_TO_DIRECTION_MAP=new Map([[-135,"northwest"],[-90,"north"],[-45,"northeast"],[0,"east"],[45,"southeast"],[90,"south"],[135,"southwest"],[180,"west"]]),rotationToDirection=s=>{var a;return(a=ROTATION_TO_DIRECTION_MAP.get(s))!=null?a:"north"};class RandomUnitsLevel extends Level{constructor(l,d){super(l,d);ce(this,"_collisionMap");ce(this,"entityFactory");ce(this,"unitAnimations");this._collisionMap=createEmptyGrid(getGridSizeByScreen(l)),this.unitAnimations=load(l.loader.resources.unit.spritesheet),this.entityFactory=new EntityFactory(d,this.unitAnimations)}get collisionMap(){return this._collisionMap}load(){Array.from(Array(100)).forEach(()=>{const l=toWorldPositionCellCenter(new Vector2(Math.round(Math.random()*this.app.screen.width),Math.round(Math.random()*this.app.screen.height)+Constants.CELL_SIZE/2));this.entityFactory.createUnit({position:l,color:"red",team:{number:Math.round(Math.random()+1)}})})}}class PathFindingLevel extends Level{constructor(l,d){super(l,d);ce(this,"map");ce(this,"entityFactory");ce(this,"unitAnimations");this.map=generateMaze(getGridSizeByScreen(l)),this.unitAnimations=load(l.loader.resources.unit.spritesheet),this.entityFactory=new EntityFactory(d,this.unitAnimations)}get collisionMap(){return this.map}load(){this.entityFactory.createUnit({position:cellPositionToVector(1,1),color:"red",team:{number:1}}),this.entityFactory.createUnit({position:cellPositionToVector(3,1),color:"red",team:{number:2}})}}class BehaviorTreeComponent extends Component{}ce(BehaviorTreeComponent,"schema",{tree:{type:Types.Ref,default:!1}});class Tree{constructor(a){this.root=a}update(){this.root.evaluate()}}var State=(s=>(s.RUNNING="running",s.SUCCESS="success",s.FAILURE="failure",s))(State||{});class Node{constructor(a=[]){ce(this,"_state","failure");ce(this,"parent",null);ce(this,"_children",[]);ce(this,"data",new Map);this.children=a}get state(){return this._state}set state(a){this._state=a}get children(){return this._children}set children(a){a.forEach(l=>this.attach(l))}attach(a){this._children.push(a),a.parent=this}detach(a){this._children=this._children.filter(l=>l!==a),a.parent=null}evaluate(){return this.state}getData(a){return this.data.has(a)?this.data.get(a):this.getDataOfParent(a)}getDataOfParent(a){var l,d;return(d=(l=this.parent)==null?void 0:l.getData(a))!=null?d:null}setData(a,l){this.data.set(a,l)}hasChildren(){return this.children.length>0}running(){return this.state="running"}success(){return this.state="success"}failure(){return this.state="failure"}}const invertStateMap=new Map([[State.FAILURE,State.SUCCESS],[State.SUCCESS,State.FAILURE],[State.RUNNING,State.RUNNING]]);class Inventer extends Node{evaluate(){if(!this.hasChildren())return this.failure();const a=this.children[0].evaluate();return invertStateMap.has(a)?this.state=invertStateMap.get(a):this.failure()}}class Selector extends Node{evaluate(){if(!this.hasChildren())return this.success();for(const a of this.children){const l=a.evaluate();if(l===State.SUCCESS)return this.success();l===State.RUNNING&&(this.state=State.RUNNING)}return this.state===State.FAILURE?this.failure():this.children.length===0?this.success():this.state}}class Sequence extends Node{evaluate(){let a=!1;for(const l of this.children)switch(l.evaluate()){case State.RUNNING:a=!0;continue;case State.SUCCESS:continue;case State.FAILURE:default:return this.failure()}return a?this.running():this.success()}}class GameTime{}ce(GameTime,"delta",0);class Timer extends Node{constructor(l){var d;super(l.children);ce(this,"delay");ce(this,"elapsedCallback");ce(this,"_countdownTimer");this.delay=l.delay,this._countdownTimer=this.delay,this.elapsedCallback=(d=l.elapsedCallback)!=null?d:null}get countdownTimer(){return this._countdownTimer}isElapsed(){return this.countdownTimer<=0}reset(){this._countdownTimer=this.delay}evaluate(){return this.isElapsed()&&this.reset(),this.hasChildren()?(this._countdownTimer-=GameTime.delta,this.isElapsed()?(this.state=this.children[0].evaluate(),this.elapsedCallback&&this.elapsedCallback(),this.state):this.running()):this.failure()}}const setEntityAnimation=(s,a)=>{var d;const l=s.getMutableComponent(AnimatedSpriteComponent);if(l!=null){const v=s.getComponent(AssetComponent);if(v==null)return;const m=s.getComponent(TransformComponent),g=rotationToDirection((d=m==null?void 0:m.rotation)!=null?d:0);if(l.state!==`${a}_${g}`){const T=l.state;v.animations[a][g].set(l.sprite),l.state=`${a}_${g}`,console.log(s.id+": update state from "+T+" to "+l.state),l.sprite.play()}}};class EntityNode extends Node{evaluate(){const a=this.getData("entity");return a==null?this.failure():this.evaluateByEntity(a)}}class Attack extends EntityNode{evaluateByEntity(a){const l=a.getComponent(AttackComponent),d=this.getData("target");return setEntityAnimation(a,"attack"),l.attack(d),this.success()}}class Follow$1 extends EntityNode{evaluateByEntity(a){const l=a.getComponent(TargetComponent),d=a.getMutableComponent(FollowComponent);return l==null||d==null?this.failure():(d.follow=l.target,this.success())}}class HasTarget extends EntityNode{evaluateByEntity(a){return a.hasComponent(TargetComponent)?a.getComponent(TargetComponent).target==null?this.failure():this.success():this.failure()}}class IsControlledBy extends EntityNode{constructor(a){super([]),this.by=a}evaluateByEntity(a){return a.hasComponent(ControlledComponent)?a.getComponent(ControlledComponent).by===this.by?this.success():this.failure():this.failure()}}class IsControlledByPlayer extends IsControlledBy{constructor(){super("player")}}const getEntitiesInRange=(s,a,l)=>a.filter(not(isSameEntity(s))).filter(not(isOnTeam(s.getComponent(TeamComponent).number))).filter(isAlive()).filter(isInRange(s,l)).sort(byClosestDistance(s));class IsEnemyInRange extends EntityNode{constructor(a,l,d){super(),this.entities=a,this.componentConstructor=l,this.componentProperty=d}evaluateByEntity(a){const l=a.getComponent(this.componentConstructor)[this.componentProperty],d=getEntitiesInRange(a,this.entities,l);return d.length==0?this.failure():(this.parent.setData("target",d[0]),this.success())}}class IsEnemyInAggroRange extends IsEnemyInRange{constructor(a){super(a,AttackComponent,"aggroRange")}}class IsEnemyInAttackRange extends IsEnemyInRange{constructor(a){super(a,AttackComponent,"attackRange")}}class IsMoving extends EntityNode{evaluateByEntity(a){return a.hasComponent(MovePositionDirectComponent)?a.getComponent(MovePositionDirectComponent).movePosition==null?this.failure():this.success():this.failure()}}class SetTarget extends EntityNode{evaluateByEntity(a){const l=this.getData("target");if(l==null||!a.hasComponent(TargetComponent))return this.failure();const d=a.getMutableComponent(TargetComponent);return d.target=l,this.success()}}class UnsetTarget extends EntityNode{evaluateByEntity(a){if(!a.hasComponent(TargetComponent))return this.failure();const l=a.getMutableComponent(TargetComponent);return l.target==null?this.failure():(l.target=null,this.success())}}class BehaviorTreeLevel extends Level{constructor(l,d){super(l,d);ce(this,"map");ce(this,"entityFactory");ce(this,"unitAnimations");this.map=createEmptyGrid(getGridSizeByScreen(l)),this.unitAnimations=load(l.loader.resources.unit.spritesheet),this.entityFactory=new EntityFactory(d,this.unitAnimations)}get collisionMap(){return this.map}load(){const l=this.entityFactory.createUnit({position:cellPositionToVector(1,1),color:"blue",team:{number:1}}),d=this.entityFactory.createUnit({position:cellPositionToVector(1,3),color:"red",team:{number:2}}),v=[l,d],m=new Tree(new Selector([new Sequence([new Inventer([new HasTarget]),new IsEnemyInAggroRange(v),new SetTarget]),new Sequence([new IsMoving,new Inventer([new IsEnemyInAggroRange(v)]),new UnsetTarget]),new Sequence([new HasTarget,new Selector([new Sequence([new IsEnemyInAttackRange(v),new Timer({delay:1e3,children:[new Attack]})]),new Sequence([new Inventer([new IsControlledByPlayer]),new Follow$1])])])]));m.root.setData("entity",l),l.addComponent(BehaviorTreeComponent,{tree:m})}}class MapSystem extends PixiJsSystem{constructor(l,d){super(l,d);ce(this,"graphics");ce(this,"map",null);this.graphics=this.app.stage.addChildAt(new Graphics,0),d.eventBus.on("level:loaded",v=>{this.map=v.detail.level.collisionMap,this.draw()})}execute(l,d){}draw(){this.graphics.clear(),this.map!=null&&(this.graphics.beginFill(0),this.map.forEach((l,d)=>{l.forEach((v,m)=>{if(v==1){const g=cellPositionToVector(m,d);this.graphics.drawRect(g.x-8,g.y-8,16,16)}})}),this.graphics.endFill())}}class MovePathSystem extends System{execute(a,l){var d;for(const v of this.queries.entities.results){const m=v.getMutableComponent(MovePathComponent);if(m.path.length==0){const R=v.getComponent(MoveVelocityComponent);(R==null?void 0:R.velocity)!=null&&Vector2.ZERO.equals(R.velocity)&&(v.hasComponent(ControlledComponent)&&(v.getMutableComponent(ControlledComponent).by=null),(d=v.getComponent(AnimatedSpriteComponent))!=null&&d.state.startsWith("attack")||setEntityAnimation(v,"idle"));continue}const g=v.getMutableComponent(MovePositionDirectComponent);if(g.movePosition!=null)continue;const T=m.path[0];if(!this.canEntityMoveToCell(v,T))continue;m.path.shift(),g.movePosition=cellPositionToVector(T.x,T.y);const b=v.getMutableComponent(TransformComponent);b.position.equals(g.movePosition)||(b.rotation=Vector2.angle(b.position,g.movePosition)),setEntityAnimation(v,"move")}}canEntityMoveToCell(a,l){return this.queries.colliders.results.filter(not(isSameEntity(a))).find(m=>{const g=getCell(m);return l.x===g.x&&l.y===g.y})==null}}ce(MovePathSystem,"queries",{entities:{components:[MovePathComponent]},colliders:{components:[CollidableComponent]}});const us=class{constructor(a){ce(this,"eventTarget");a=a||""+ ++us.counter,this.eventTarget=document.appendChild(document.createComment("EventBus: "+a))}on(a,l){this.eventTarget.addEventListener(a,l)}once(a,l){this.eventTarget.addEventListener(a,l,{once:!0})}off(a,l){this.eventTarget.removeEventListener(a,l)}emit(a,l){return this.eventTarget.dispatchEvent(new CustomEvent(a,{detail:l}))}};let EventBus=us;ce(EventBus,"counter",0);class GameTimeSystem extends System{execute(a,l){GameTime.delta=a}}class FollowSystem extends System{constructor(l,d){super(l,d);ce(this,"map",null);d.eventBus.on("level:loaded",v=>{this.map=v.detail.level.collisionMap})}execute(l,d){var v,m;if(((v=this.queries.entities.changed)!=null?v:[]).length>0)for(const g of this.queries.entities.changed)this.updateFollowingEntity(g);for(const g of this.queries.entities.results)g.getComponent(FollowComponent).follow!=null&&((m=g.getComponent(MovePathComponent))==null?void 0:m.path)!=null&&this.updateFollowingEntity(g)}updateFollowingEntity(l){const d=l.getComponent(FollowComponent);if(d.follow==null)return;const v=d.follow.getComponent(TransformComponent),m=astar(this.map,l.getComponent(TransformComponent).gridPosition,v.gridPosition),g=l.getMutableComponent(MovePathComponent);g.path=convertPathfindingPathToPositions(m.slice(1).slice(0,-1))}}ce(FollowSystem,"queries",{entities:{components:[FollowComponent],listen:{changed:!0}}});class BehaviorTreeSystem extends System{constructor(){super(...arguments);ce(this,"timePassed",0);ce(this,"triggerTime",1e3)}execute(l,d){this.timePassed+=l;for(const v of this.queries.entities.results)v.getComponent(BehaviorTreeComponent).tree.update()}}ce(BehaviorTreeSystem,"queries",{entities:{components:[BehaviorTreeComponent]}});class TargetSystem extends System{execute(a,l){this.checkDead()}checkDead(){for(const a of this.queries.entities.results){const l=a.getComponent(TargetComponent);if(l.target===null)return;const d=l.target.getComponent(AliveComponent);d!==null&&!d.alive&&(a.getMutableComponent(TargetComponent).target=null)}}}ce(TargetSystem,"queries",{entities:{components:[TargetComponent]}});class Engine{constructor(a){ce(this,"world");ce(this,"eventBus");this.app=a,this.world=new World;const l=this.eventBus=new EventBus;let d=0;const v=getOptions();d=performance.now(),this.app.ticker.add(()=>{T()}),this.app.loader.add("swordsmen_blue","assets/swordsmen.blue.move.west_06.png").add("swordsmen_red","assets/swordsmen.red.move.west_06.png").add("dead","assets/swordsmen.blue.dead.south.png").add("unit","assets/unit.json").load(()=>{g()}),this.world.registerComponent(TransformComponent).registerComponent(SizeComponent).registerComponent(SelectableComponent).registerComponent(MovableComponent).registerComponent(HealthComponent).registerComponent(AliveComponent).registerComponent(MoveTransformVelocityComponent).registerComponent(MovePositionDirectComponent).registerComponent(PlayerMovementMouseComponent).registerComponent(PlayerMovementKeysComponent).registerComponent(MoveVelocityComponent).registerComponent(SpriteComponent).registerComponent(AnimatedSpriteComponent).registerComponent(GraphicsComponent).registerComponent(MovePathComponent).registerComponent(CollidableComponent).registerComponent(TeamComponent).registerComponent(AttackComponent).registerComponent(FollowComponent).registerComponent(BehaviorTreeComponent).registerComponent(TargetComponent).registerComponent(ControlledComponent).registerComponent(AssetComponent).registerSystem(PlayerSelectionSystem,{app:a,eventBus:l}).registerSystem(HealthSystem,{eventBus:l}).registerSystem(AliveSystem,{app:a,eventBus:l}).registerSystem(InputSystem,{canvas:a.view}).registerSystem(MovePositionDirectSystem).registerSystem(PlayerMovementMouseSystem,{app:a,eventBus:l}).registerSystem(MoveVelocitySystem,{eventBus:l}).registerSystem(SpriteSystem,{app:a,eventBus:l}).registerSystem(GraphicsSystem,{app:a,options:v,eventBus:l}).registerSystem(GridSystem,{app:a,options:v,eventBus:l}).registerSystem(MapSystem,{app:a,eventBus:l}).registerSystem(MovePathSystem,{eventBus:l}).registerSystem(GameTimeSystem).registerSystem(FollowSystem,{app:a,eventBus:l}).registerSystem(BehaviorTreeSystem).registerSystem(TargetSystem);let m;const g=()=>{if(v.level!=null&&v.level[0]!=null){const b=v.level[0].toLowerCase();if(b==="randomunits")m=new RandomUnitsLevel(a,this.world);else if(b==="pathfinding")m=new PathFindingLevel(a,this.world);else if(b==="behaviortree")m=new BehaviorTreeLevel(a,this.world);else{alert("level not found");return}}else m=new RandomUnitsLevel(a,this.world);m.load(),l.emit("level:loaded",{level:m})},T=()=>{const b=performance.now(),R=b-d;this.world.execute(R,b),d=b}}}const _sfc_main$4=defineComponent({__name:"GameView",setup(s){const a=ref();return window.addEventListener("contextmenu",l=>{l.preventDefault()}),onMounted(()=>{new Engine(a.value.application)}),(l,d)=>{const v=_sfc_main$5;return openBlock(),createBlock(v,{ref_key:"pixi",ref:a,class:"overflow-hidden","resize-to":l.window,"background-color":34816},null,8,["resize-to"])}}});class Plugin{constructor(a){this.parent=a,this.paused=!1}destroy(){}down(a){return!1}move(a){return!1}up(a){return!1}wheel(a){return!1}update(a){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule(s,a,l){return l={path:a,exports:{},require:function(d,v){return commonjsRequire(d,v==null?l.path:v)}},s(l,l.exports),l.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var penner=createCommonjsModule(function(s,a){(function(){var l,d;d=function(v){return s.exports=v},l={linear:function(v,m,g,T){return g*v/T+m},easeInQuad:function(v,m,g,T){return g*(v/=T)*v+m},easeOutQuad:function(v,m,g,T){return-g*(v/=T)*(v-2)+m},easeInOutQuad:function(v,m,g,T){return(v/=T/2)<1?g/2*v*v+m:-g/2*(--v*(v-2)-1)+m},easeInCubic:function(v,m,g,T){return g*(v/=T)*v*v+m},easeOutCubic:function(v,m,g,T){return g*((v=v/T-1)*v*v+1)+m},easeInOutCubic:function(v,m,g,T){return(v/=T/2)<1?g/2*v*v*v+m:g/2*((v-=2)*v*v+2)+m},easeInQuart:function(v,m,g,T){return g*(v/=T)*v*v*v+m},easeOutQuart:function(v,m,g,T){return-g*((v=v/T-1)*v*v*v-1)+m},easeInOutQuart:function(v,m,g,T){return(v/=T/2)<1?g/2*v*v*v*v+m:-g/2*((v-=2)*v*v*v-2)+m},easeInQuint:function(v,m,g,T){return g*(v/=T)*v*v*v*v+m},easeOutQuint:function(v,m,g,T){return g*((v=v/T-1)*v*v*v*v+1)+m},easeInOutQuint:function(v,m,g,T){return(v/=T/2)<1?g/2*v*v*v*v*v+m:g/2*((v-=2)*v*v*v*v+2)+m},easeInSine:function(v,m,g,T){return-g*Math.cos(v/T*(Math.PI/2))+g+m},easeOutSine:function(v,m,g,T){return g*Math.sin(v/T*(Math.PI/2))+m},easeInOutSine:function(v,m,g,T){return-g/2*(Math.cos(Math.PI*v/T)-1)+m},easeInExpo:function(v,m,g,T){return v===0?m:g*Math.pow(2,10*(v/T-1))+m},easeOutExpo:function(v,m,g,T){return v===T?m+g:g*(-Math.pow(2,-10*v/T)+1)+m},easeInOutExpo:function(v,m,g,T){return(v/=T/2)<1?g/2*Math.pow(2,10*(v-1))+m:g/2*(-Math.pow(2,-10*--v)+2)+m},easeInCirc:function(v,m,g,T){return-g*(Math.sqrt(1-(v/=T)*v)-1)+m},easeOutCirc:function(v,m,g,T){return g*Math.sqrt(1-(v=v/T-1)*v)+m},easeInOutCirc:function(v,m,g,T){return(v/=T/2)<1?-g/2*(Math.sqrt(1-v*v)-1)+m:g/2*(Math.sqrt(1-(v-=2)*v)+1)+m},easeInElastic:function(v,m,g,T){var b,R,C;return C=1.70158,R=0,b=g,v===0||(v/=T),R||(R=T*.3),b<Math.abs(g)?(b=g,C=R/4):C=R/(2*Math.PI)*Math.asin(g/b),-(b*Math.pow(2,10*(v-=1))*Math.sin((v*T-C)*(2*Math.PI)/R))+m},easeOutElastic:function(v,m,g,T){var b,R,C;return C=1.70158,R=0,b=g,v===0||(v/=T),R||(R=T*.3),b<Math.abs(g)?(b=g,C=R/4):C=R/(2*Math.PI)*Math.asin(g/b),b*Math.pow(2,-10*v)*Math.sin((v*T-C)*(2*Math.PI)/R)+g+m},easeInOutElastic:function(v,m,g,T){var b,R,C;return C=1.70158,R=0,b=g,v===0||(v/=T/2),R||(R=T*(.3*1.5)),b<Math.abs(g)?(b=g,C=R/4):C=R/(2*Math.PI)*Math.asin(g/b),v<1?-.5*(b*Math.pow(2,10*(v-=1))*Math.sin((v*T-C)*(2*Math.PI)/R))+m:b*Math.pow(2,-10*(v-=1))*Math.sin((v*T-C)*(2*Math.PI)/R)*.5+g+m},easeInBack:function(v,m,g,T,b){return b===void 0&&(b=1.70158),g*(v/=T)*v*((b+1)*v-b)+m},easeOutBack:function(v,m,g,T,b){return b===void 0&&(b=1.70158),g*((v=v/T-1)*v*((b+1)*v+b)+1)+m},easeInOutBack:function(v,m,g,T,b){return b===void 0&&(b=1.70158),(v/=T/2)<1?g/2*(v*v*(((b*=1.525)+1)*v-b))+m:g/2*((v-=2)*v*(((b*=1.525)+1)*v+b)+2)+m},easeInBounce:function(v,m,g,T){var b;return b=l.easeOutBounce(T-v,0,g,T),g-b+m},easeOutBounce:function(v,m,g,T){return(v/=T)<1/2.75?g*(7.5625*v*v)+m:v<2/2.75?g*(7.5625*(v-=1.5/2.75)*v+.75)+m:v<2.5/2.75?g*(7.5625*(v-=2.25/2.75)*v+.9375)+m:g*(7.5625*(v-=2.625/2.75)*v+.984375)+m},easeInOutBounce:function(v,m,g,T){var b;return v<T/2?(b=l.easeInBounce(v*2,0,g,T),b*.5+m):(b=l.easeOutBounce(v*2-T,0,g,T),b*.5+g*.5+m)}},d(l)}).call(commonjsGlobal)});function ease(s,a){if(s){if(typeof s=="function")return s;if(typeof s=="string")return penner[s]}else return penner[a]}const DEFAULT_ANIMATE_OPTIONS={removeOnInterrupt:!1,ease:"linear",time:1e3};class Animate extends Plugin{__init(){this.startWidth=null}__init2(){this.startHeight=null}__init3(){this.deltaWidth=null}__init4(){this.deltaHeight=null}__init5(){this.width=null}__init6(){this.height=null}__init7(){this.time=0}constructor(a,l={}){super(a),Animate.prototype.__init.call(this),Animate.prototype.__init2.call(this),Animate.prototype.__init3.call(this),Animate.prototype.__init4.call(this),Animate.prototype.__init5.call(this),Animate.prototype.__init6.call(this),Animate.prototype.__init7.call(this),this.options=Object.assign({},DEFAULT_ANIMATE_OPTIONS,l),this.options.ease=ease(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),this.keepCenter||this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(a){if(!this.paused)if(this.time+=a,this.time>=this.options.time)this.complete();else{const l=new Point(this.parent.scale.x,this.parent.scale.y),d=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const v=this.startWidth,m=this.deltaWidth;this.parent.fitWidth(v+m*d,this.keepCenter,this.height===null)}if(this.height!==null){const v=this.startHeight,m=this.deltaHeight;this.parent.fitHeight(v+m*d,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const v=this.startX,m=this.startY,g=this.deltaX,T=this.deltaY,b=new Point(this.parent.x,this.parent.y);this.parent.moveCenter(v+g*d,m+T*d),this.parent.emit("moved",{viewport:this.parent,original:b,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:l,type:"animate"})}}}function _optionalChain$1(s){let a,l=s[0],d=1;for(;d<s.length;){const v=s[d],m=s[d+1];if(d+=2,(v==="optionalAccess"||v==="optionalCall")&&l==null)return;v==="access"||v==="optionalAccess"?(a=l,l=m(l)):(v==="call"||v==="optionalCall")&&(l=m((...g)=>l.call(a,...g)),a=void 0)}return l}const DEFAULT_BOUNCE_OPTIONS={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class Bounce extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},DEFAULT_BOUNCE_OPTIONS,l),this.ease=ease(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const d=this.options.underflow.toLowerCase();d==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=d.indexOf("left")!==-1?-1:d.indexOf("right")!==-1?1:0,this.underflowY=d.indexOf("top")!==-1?-1:d.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(a){if(!this.paused){if(this.bounce(),this.toX){const l=this.toX;l.time+=a,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),l.time>=this.options.time?(this.parent.x=l.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(l.time,l.start,l.delta,this.options.time)}if(this.toY){const l=this.toY;l.time+=a,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),l.time>=this.options.time?(this.parent.y=l.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(l.time,l.start,l.delta,this.options.time)}}}calcUnderflowX(){let a;switch(this.underflowX){case-1:a=0;break;case 1:a=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:a=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return a}calcUnderflowY(){let a;switch(this.underflowY){case-1:a=0;break;case 1:a=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:a=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return a}oob(){const a=this.options.bounceBox;if(a){const l=typeof a.x>"u"?0:a.x,d=typeof a.y>"u"?0:a.y,v=typeof a.width>"u"?this.parent.worldWidth:a.width,m=typeof a.height>"u"?this.parent.worldHeight:a.height;return{left:this.parent.left<l,right:this.parent.right>v,top:this.parent.top<d,bottom:this.parent.bottom>m,topLeft:new Point(l*this.parent.scale.x,d*this.parent.scale.y),bottomRight:new Point(v*this.parent.scale.x-this.parent.screenWidth,m*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new Point(0,0),bottomRight:new Point(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let a,l=this.parent.plugins.get("decelerate",!0);l&&(l.x||l.y)&&(l.x&&l.percentChangeX===_optionalChain$1([l,"access",m=>m.options,"optionalAccess",m=>m.friction])||l.y&&l.percentChangeY===_optionalChain$1([l,"access",m=>m.options,"optionalAccess",m=>m.friction]))&&(a=this.oob(),(a.left&&this.left||a.right&&this.right)&&(l.percentChangeX=this.options.friction),(a.top&&this.top||a.bottom&&this.bottom)&&(l.percentChangeY=this.options.friction));const d=this.parent.plugins.get("drag",!0)||{},v=this.parent.plugins.get("pinch",!0)||{};if(l=l||{},!_optionalChain$1([d,"optionalAccess",m=>m.active])&&!_optionalChain$1([v,"optionalAccess",m=>m.active])&&(!this.toX||!this.toY)&&(!l.x||!l.y)){a=a||this.oob();const m=a.topLeft,g=a.bottomRight;if(!this.toX&&!l.x){let T=null;a.left&&this.left?T=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-m.x:a.right&&this.right&&(T=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-g.x),T!==null&&this.parent.x!==T&&(this.toX={time:0,start:this.parent.x,delta:T-this.parent.x,end:T},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!l.y){let T=null;a.top&&this.top?T=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-m.y:a.bottom&&this.bottom&&(T=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-g.y),T!==null&&this.parent.y!==T&&(this.toY={time:0,start:this.parent.y,delta:T-this.parent.y,end:T},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const DEFAULT_CLAMP_OPTIONS={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class Clamp extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},DEFAULT_CLAMP_OPTIONS,l),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const a=this.options.underflow.toLowerCase();a==="none"?this.noUnderflow=!0:a==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=a.indexOf("left")!==-1?-1:a.indexOf("right")!==-1?1:0,this.underflowY=a.indexOf("top")!==-1?-1:a.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const a={x:this.parent.x,y:this.parent.y},l=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let d=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,d=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,d=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,d=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,l.x=0,d=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,l.x=0,d=!0);d&&this.parent.emit("moved",{viewport:this.parent,original:a,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let d=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,d=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,d=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,d=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,l.y=0,d=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,l.y=0,d=!0);d&&this.parent.emit("moved",{viewport:this.parent,original:a,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const DEFAULT_CLAMP_ZOOM_OPTIONS={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class ClampZoom extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},DEFAULT_CLAMP_ZOOM_OPTIONS,l),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let a=this.parent.worldScreenWidth,l=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&a<this.options.minWidth){const d=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/d,a=this.parent.worldScreenWidth,l=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&a>this.options.maxWidth){const d=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/d,a=this.parent.worldScreenWidth,l=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&l<this.options.minHeight){const d=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/d,a=this.parent.worldScreenWidth,l=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&l>this.options.maxHeight){const d=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/d,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const a={x:null,y:null},l={x:null,y:null};if(typeof this.options.minScale=="number")a.x=this.options.minScale,a.y=this.options.minScale;else if(this.options.minScale!==null){const m=this.options.minScale;a.x=typeof m.x>"u"?null:m.x,a.y=typeof m.y>"u"?null:m.y}if(typeof this.options.maxScale=="number")l.x=this.options.maxScale,l.y=this.options.maxScale;else if(this.options.maxScale!==null){const m=this.options.maxScale;l.x=typeof m.x>"u"?null:m.x,l.y=typeof m.y>"u"?null:m.y}let d=this.parent.scale.x,v=this.parent.scale.y;a.x!==null&&d<a.x&&(d=a.x),l.x!==null&&d>l.x&&(d=l.x),a.y!==null&&v<a.y&&(v=a.y),l.y!==null&&v>l.y&&(v=l.y),(d!==this.parent.scale.x||v!==this.parent.scale.y)&&(this.parent.scale.set(d,v),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const DEFAULT_DECELERATE_OPTIONS={friction:.98,bounce:.8,minSpeed:.01},TP=16;class Decelerate extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},DEFAULT_DECELERATE_OPTIONS,l),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",d=>this.moved(d))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const a=this.parent.input.count();return(a===1||a>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}moved(a){if(this.saved.length){const l=this.saved[this.saved.length-1];a.type==="clamp-x"?l.x===a.original.x&&(l.x=this.parent.x):a.type==="clamp-y"&&l.y===a.original.y&&(l.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const a=performance.now();for(const l of this.saved)if(l.time>=a-100){const d=a-l.time;this.x=(this.parent.x-l.x)/d,this.y=(this.parent.y-l.y)/d,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(a){a=a||{},typeof a.x<"u"&&(this.x=a.x,this.percentChangeX=this.options.friction),typeof a.y<"u"&&(this.y=a.y,this.percentChangeY=this.options.friction)}update(a){if(this.paused)return;const l=this.x||this.y,d=this.timeSinceRelease,v=this.timeSinceRelease+a;if(this.x){const m=this.percentChangeX,g=Math.log(m);this.parent.x+=this.x*TP/g*(Math.pow(m,v/TP)-Math.pow(m,d/TP)),this.x*=Math.pow(this.percentChangeX,a/TP)}if(this.y){const m=this.percentChangeY,g=Math.log(m);this.parent.y+=this.y*TP/g*(Math.pow(m,v/TP)-Math.pow(m,d/TP)),this.y*=Math.pow(this.percentChangeY,a/TP)}this.timeSinceRelease+=a,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),l&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const DEFAULT_DRAG_OPTIONS={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20};class Drag extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},DEFAULT_DRAG_OPTIONS,l),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(a){window.addEventListener("keydown",l=>{a.includes(l.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",l=>{a.includes(l.code)&&(this.keyIsPressed=!1)})}mouseButtons(a){!a||a==="all"?this.mouse=[!0,!0,!0]:this.mouse=[a.indexOf("left")!==-1,a.indexOf("middle")!==-1,a.indexOf("right")!==-1]}parseUnderflow(){const a=this.options.underflow.toLowerCase();a==="center"?(this.underflowX=0,this.underflowY=0):(a.includes("left")?this.underflowX=-1:a.includes("right")?this.underflowX=1:this.underflowX=0,a.includes("top")?this.underflowY=-1:a.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(a){const l=a.data.pointerType==="mouse",d=this.parent.input.count();return!!((d===1||d>1&&!this.parent.plugins.get("pinch",!0))&&(!l||this.mouse[a.data.button]))}checkKeyPress(a){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&a.data.pointerType==="touch"}down(a){return this.paused||!this.options.pressDrag?!1:this.checkButtons(a)&&this.checkKeyPress(a)?(this.last={x:a.data.global.x,y:a.data.global.y},this.current=a.data.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(a){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===a.data.pointerId){const l=a.data.global.x,d=a.data.global.y,v=this.parent.input.count();if(v===1||v>1&&!this.parent.plugins.get("pinch",!0)){const m=l-this.last.x,g=d-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(m)||this.yDirection&&this.parent.input.checkThreshold(g)){const T={x:l,y:d};return this.xDirection&&(this.parent.x+=(T.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(T.y-this.last.y)*this.options.factor),this.last=T,this.moved||this.parent.emit("drag-start",{event:a,screen:new Point(this.last.x,this.last.y),world:this.parent.toWorld(new Point(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(a){if(this.paused)return!1;const l=this.parent.input.touches;if(l.length===1){const d=l[0];return d.last&&(this.last={x:d.last.x,y:d.last.y},this.current=d.id),this.moved=!1,!0}else if(this.last&&this.moved){const d=new Point(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:a,screen:d,world:this.parent.toWorld(d),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(a){if(this.paused)return!1;if(this.options.wheel){const l=this.parent.plugins.get("wheel",!0);if(!l||!l.options.wheelZoom&&!a.ctrlKey){const d=a.deltaMode?this.options.lineHeight:1;return this.xDirection&&(this.parent.x+=a.deltaX*d*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=a.deltaY*d*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||a.preventDefault(),this.parent.options.stopPropagation&&a.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const a=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,a.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,a.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,a.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,a.y=0)}}const DEFAULT_FOLLOW_OPTIONS={speed:0,acceleration:null,radius:null};class Follow extends Plugin{constructor(a,l,d={}){super(a),this.target=l,this.options=Object.assign({},DEFAULT_FOLLOW_OPTIONS,d),this.velocity={x:0,y:0}}update(a){if(this.paused)return;const l=this.parent.center;let d=this.target.x,v=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-l.y,2)+Math.pow(this.target.x-l.x,2))>this.options.radius){const b=Math.atan2(this.target.y-l.y,this.target.x-l.x);d=this.target.x-Math.cos(b)*this.options.radius,v=this.target.y-Math.sin(b)*this.options.radius}else return;const m=d-l.x,g=v-l.y;if(m||g)if(this.options.speed)if(this.options.acceleration){const T=Math.atan2(v-l.y,d-l.x),b=Math.sqrt(Math.pow(m,2)+Math.pow(g,2));if(b){const R=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);b>R?this.velocity={x:Math.min(this.velocity.x+this.options.acceleration*a,this.options.speed),y:Math.min(this.velocity.y+this.options.acceleration*a,this.options.speed)}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const C=Math.cos(T)*this.velocity.x,w=Math.sin(T)*this.velocity.y,A=Math.abs(C)>Math.abs(m)?d:l.x+C,S=Math.abs(w)>Math.abs(g)?v:l.y+w;this.parent.moveCenter(A,S),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const T=Math.atan2(v-l.y,d-l.x),b=Math.cos(T)*this.options.speed,R=Math.sin(T)*this.options.speed,C=Math.abs(b)>Math.abs(m)?d:l.x+b,w=Math.abs(R)>Math.abs(g)?v:l.y+R;this.parent.moveCenter(C,w),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(d,v),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const MOUSE_EDGES_OPTIONS={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class MouseEdges extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},MOUSE_EDGES_OPTIONS,l),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const a=this.options.distance;a!==null?(this.left=a,this.top=a,this.right=this.parent.worldScreenWidth-a,this.bottom=this.parent.worldScreenHeight-a):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.worldScreenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.worldScreenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(a){if(this.paused||a.data.pointerType!=="mouse"&&a.data.identifier!==1||!this.options.allowButtons&&a.data.buttons!==0)return!1;const l=a.data.global.x,d=a.data.global.y;if(this.radiusSquared){const v=this.parent.toScreen(this.parent.center);if(Math.pow(v.x-l,2)+Math.pow(v.y-d,2)>=this.radiusSquared){const g=Math.atan2(v.y-d,v.x-l);this.options.linear?(this.horizontal=Math.round(Math.cos(g))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(g))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(g)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(g)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&l<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&l>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&d<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&d>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const a=this.parent.plugins.get("decelerate",!0);this.horizontal&&a&&!this.options.noDecelerate&&a.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const a=this.parent.plugins.get("decelerate",!0);this.vertical&&a&&!this.options.noDecelerate&&a.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const a=this.parent.center;this.horizontal&&(a.x+=this.horizontal*this.options.speed),this.vertical&&(a.y+=this.vertical*this.options.speed),this.parent.moveCenter(a),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const DEFAULT_PINCH_OPTIONS={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class Pinch extends Plugin{__init(){this.active=!1}__init2(){this.pinching=!1}__init3(){this.moved=!1}constructor(a,l={}){super(a),Pinch.prototype.__init.call(this),Pinch.prototype.__init2.call(this),Pinch.prototype.__init3.call(this),this.options=Object.assign({},DEFAULT_PINCH_OPTIONS,l)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(a){if(this.paused||!this.active)return!1;const l=a.data.global.x,d=a.data.global.y,v=this.parent.input.touches;if(v.length>=2){const m=v[0],g=v[1],T=m.last&&g.last?Math.sqrt(Math.pow(g.last.x-m.last.x,2)+Math.pow(g.last.y-m.last.y,2)):null;if(m.id===a.data.pointerId?m.last={x:l,y:d,data:a.data}:g.id===a.data.pointerId&&(g.last={x:l,y:d,data:a.data}),T){let b;const R={x:m.last.x+(g.last.x-m.last.x)/2,y:m.last.y+(g.last.y-m.last.y)/2};this.options.center||(b=this.parent.toLocal(R));let C=Math.sqrt(Math.pow(g.last.x-m.last.x,2)+Math.pow(g.last.y-m.last.y,2));C=C===0?C=1e-10:C;const w=(1-T/C)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=w),this.isAxisY()&&(this.parent.scale.y+=w),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:R});const A=this.parent.plugins.get("clamp-zoom",!0);if(A&&A.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const S=this.parent.toGlobal(b);this.parent.x+=(R.x-S.x)*this.options.factor,this.parent.y+=(R.y-S.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(R.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(R.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=R,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const DEFAULT_SNAP_OPTIONS={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class Snap extends Plugin{constructor(a,l,d,v={}){super(a),this.options=Object.assign({},DEFAULT_SNAP_OPTIONS,v),this.ease=ease(v.ease,"easeInOutSine"),this.x=l,this.y=d,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const a=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-a.x,this.deltaY=this.y-a.y,this.startX=a.x,this.startY=a.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const a=this.parent.plugins.get("decelerate",!0);a&&(a.x||a.y)&&(a.percentChangeX=a.percentChangeY=this.options.friction)}return!1}update(a){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const l=this.snapping;l.time+=a;let d,v,m;const g=this.startX,T=this.startY,b=this.deltaX,R=this.deltaY;if(l.time>this.options.time)d=!0,v=g+b,m=T+R;else{const C=this.ease(l.time,0,1,this.options.time);v=g+b*C,m=T+R*C}this.options.topLeft?this.parent.moveCorner(v,m):this.parent.moveCenter(v,m),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),d&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const l=this.options.topLeft?this.parent.corner:this.parent.center;(l.x!==this.x||l.y!==this.y)&&this.snapStart()}}}const DEFAULT_SNAP_ZOOM_OPTIONS={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class SnapZoom extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},DEFAULT_SNAP_ZOOM_OPTIONS,l),this.ease=ease(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=a.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=a.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(a.container.scale.x=this.xScale,a.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):l.forceStart&&this.createSnapping()}createSnapping(){const a=this.parent.worldScreenWidth,l=this.parent.worldScreenHeight,d=this.parent.screenWidth/this.xScale,v=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:a,startY:l,deltaX:d-a,deltaY:v-l},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(a){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let l;if(!this.options.center&&!this.options.noMove&&(l=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const d=this.snapping;if(d.time+=a,d.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const m=this.snapping,g=this.ease(m.time,m.startX,m.deltaX,this.options.time),T=this.ease(m.time,m.startY,m.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/g,this.parent.scale.y=this.parent.screenHeight/T}const v=this.parent.plugins.get("clamp-zoom",!0);v&&v.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(l))}}resume(){this.snapping=null,super.resume()}}const DEFAULT_WHEEL_OPTIONS={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class Wheel extends Plugin{constructor(a,l={}){super(a),this.options=Object.assign({},DEFAULT_WHEEL_OPTIONS,l),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(a){window.addEventListener("keydown",l=>{a.includes(l.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",l=>{a.includes(l.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const a=this.smoothingCenter,l=this.smoothing;let d;this.options.center||(d=this.parent.toLocal(a)),this.isAxisX()&&(this.parent.scale.x+=l.x),this.isAxisY()&&(this.parent.scale.y+=l.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const v=this.parent.plugins.get("clamp-zoom",!0);if(v&&v.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const m=this.parent.toGlobal(d);this.parent.x+=a.x-m.x,this.parent.y+=a.y-m.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(a){if(this.paused)return;const l=this.parent.input.getPointerPosition(a),d=-a.deltaY*(a.deltaMode?this.options.lineHeight:1)/200,v=Math.pow(2,(1+this.options.percent)*d);let m;this.options.center||(m=this.parent.toLocal(l)),this.isAxisX()&&(this.parent.scale.x*=v),this.isAxisY()&&(this.parent.scale.y*=v),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const g=this.parent.plugins.get("clamp-zoom",!0);if(g&&g.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const T=this.parent.toGlobal(m);this.parent.x+=l.x-T.x,this.parent.y+=l.y-T.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:a.deltaX,dy:a.deltaY,dz:a.deltaZ},event:a,viewport:this.parent})}wheel(a){if(this.paused||!this.checkKeyPress())return!1;if(a.ctrlKey&&this.options.trackpadPinch)this.pinch(a);else if(this.options.wheelZoom){const l=this.parent.input.getPointerPosition(a),v=(this.options.reverse?-1:1)*-a.deltaY*(a.deltaMode?this.options.lineHeight:1)/500,m=Math.pow(2,(1+this.options.percent)*v);if(this.options.smooth){const g={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+g.x)*m-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+g.y)*m-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=l}else{let g;this.options.center||(g=this.parent.toLocal(l)),this.isAxisX()&&(this.parent.scale.x*=m),this.isAxisY()&&(this.parent.scale.y*=m),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const T=this.parent.plugins.get("clamp-zoom",!0);if(T&&T.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const b=this.parent.toGlobal(g);this.parent.x+=l.x-b.x,this.parent.y+=l.y-b.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:a.deltaX,dy:a.deltaY,dz:a.deltaZ},event:a,viewport:this.parent})}return!this.parent.options.passiveWheel}}class InputManager{constructor(a){this.viewport=a,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new Rectangle(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=a=>this.handleWheel(a),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(a){if(this.viewport.pause||!this.viewport.worldVisible)return;if(a.data.pointerType==="mouse"?this.isMouseDown=!0:this.get(a.data.pointerId)||this.touches.push({id:a.data.pointerId,last:null}),this.count()===1){this.last=a.data.global.clone();const d=this.viewport.plugins.get("decelerate",!0),v=this.viewport.plugins.get("bounce",!0);(!d||!d.isActive())&&(!v||!v.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(a)&&this.viewport.options.stopPropagation&&a.stopPropagation()}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(a){return Math.abs(a)>=this.viewport.threshold}move(a){if(this.viewport.pause||!this.viewport.worldVisible)return;const l=this.viewport.plugins.move(a);if(this.clickedAvailable&&this.last){const d=a.data.global.x-this.last.x,v=a.data.global.y-this.last.y;(this.checkThreshold(d)||this.checkThreshold(v))&&(this.clickedAvailable=!1)}l&&this.viewport.options.stopPropagation&&a.stopPropagation()}up(a){if(this.viewport.pause||!this.viewport.worldVisible)return;a.data.pointerType==="mouse"&&(this.isMouseDown=!1),a.data.pointerType!=="mouse"&&this.remove(a.data.pointerId);const l=this.viewport.plugins.up(a);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:a,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),l&&this.viewport.options.stopPropagation&&a.stopPropagation()}getPointerPosition(a){const l=new Point;return this.viewport.options.interaction?this.viewport.options.interaction.mapPositionToPoint(l,a.clientX,a.clientY):(l.x=a.clientX,l.y=a.clientY),l}handleWheel(a){if(this.viewport.pause||!this.viewport.worldVisible||this.viewport.options.interaction&&this.viewport.options.interaction.interactionDOMElement!==a.target)return;const l=this.viewport.toLocal(this.getPointerPosition(a));this.viewport.left<=l.x&&l.x<=this.viewport.right&&this.viewport.top<=l.y&&l.y<=this.viewport.bottom&&this.viewport.plugins.wheel(a)&&!this.viewport.options.passiveWheel&&a.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(a){for(const l of this.touches)if(l.id===a)return l;return null}remove(a){for(let l=0;l<this.touches.length;l++)if(this.touches[l].id===a){this.touches.splice(l,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}function _optionalChain(s){let a,l=s[0],d=1;for(;d<s.length;){const v=s[d],m=s[d+1];if(d+=2,(v==="optionalAccess"||v==="optionalCall")&&l==null)return;v==="access"||v==="optionalAccess"?(a=l,l=m(l)):(v==="call"||v==="optionalCall")&&(l=m((...g)=>l.call(a,...g)),a=void 0)}return l}const PLUGIN_ORDER=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class PluginManager{constructor(a){this.viewport=a,this.list=[],this.plugins={}}add(a,l,d=PLUGIN_ORDER.length){this.plugins[a]=l;const v=PLUGIN_ORDER.indexOf(a);v!==-1&&PLUGIN_ORDER.splice(v,1),PLUGIN_ORDER.splice(d,0,a),this.sort()}get(a,l){return l&&_optionalChain([this,"access",d=>d.plugins,"access",d=>d[a],"optionalAccess",d=>d.paused])?null:this.plugins[a]}update(a){for(const l of this.list)l.update(a)}resize(){for(const a of this.list)a.resize()}reset(){for(const a of this.list)a.reset()}removeAll(){this.plugins={},this.sort()}remove(a){this.plugins[a]&&(delete this.plugins[a],this.viewport.emit(`${a}-remove`),this.sort())}pause(a){_optionalChain([this,"access",l=>l.plugins,"access",l=>l[a],"optionalAccess",l=>l.pause,"call",l=>l()])}resume(a){_optionalChain([this,"access",l=>l.plugins,"access",l=>l[a],"optionalAccess",l=>l.resume,"call",l=>l()])}sort(){this.list=[];for(const a of PLUGIN_ORDER)this.plugins[a]&&this.list.push(this.plugins[a])}down(a){let l=!1;for(const d of this.list)d.down(a)&&(l=!0);return l}move(a){let l=!1;for(const d of this.viewport.plugins.list)d.move(a)&&(l=!0);return l}up(a){let l=!1;for(const d of this.list)d.up(a)&&(l=!0);return l}wheel(a){let l=!1;for(const d of this.list)d.wheel(a)&&(l=!0);return l}}const DEFAULT_VIEWPORT_OPTIONS={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1,ticker:Ticker.shared};class Viewport extends Container{__init(){this._disableOnContextMenu=a=>a.preventDefault()}constructor(a={}){super(),Viewport.prototype.__init.call(this),this.options=Object.assign({},{divWheel:document.body},DEFAULT_VIEWPORT_OPTIONS,a),this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&this.options.divWheel.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new InputManager(this),this.plugins=new PluginManager(this)}destroy(a){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.divWheel.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(a)}update(a){this.pause||(this.plugins.update(a),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Rectangle(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(a=window.innerWidth,l=window.innerHeight,d,v){this.screenWidth=a,this.screenHeight=l,typeof d<"u"&&(this._worldWidth=d),typeof v<"u"&&(this._worldHeight=v),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(a){this._worldWidth=a,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(a){this._worldHeight=a,this.plugins.resize()}getVisibleBounds(){return new Rectangle(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(a,l){return arguments.length===2?this.toLocal(new Point(a,l)):this.toLocal(a)}toScreen(a,l){return arguments.length===2?this.toGlobal(new Point(a,l)):this.toGlobal(a)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new Point(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(a){this.moveCenter(a)}moveCenter(...a){let l,d;typeof a[0]=="number"?(l=a[0],d=a[1]):(l=a[0].x,d=a[0].y);const v=(this.worldScreenWidth/2-l)*this.scale.x,m=(this.worldScreenHeight/2-d)*this.scale.y;return(this.x!==v||this.y!==m)&&(this.position.set(v,m),this.plugins.reset(),this.dirty=!0),this}get corner(){return new Point(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(a){this.moveCorner(a)}moveCorner(...a){let l,d;return a.length===1?(l=-a[0].x*this.scale.x,d=-a[0].y*this.scale.y):(l=-a[0]*this.scale.x,d=-a[1]*this.scale.y),(l!==this.x||d!==this.y)&&(this.position.set(l,d),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(a){return this.screenWidth/a}findFitHeight(a){return this.screenHeight/a}findFit(a,l){const d=this.screenWidth/a,v=this.screenHeight/l;return Math.min(d,v)}findCover(a,l){const d=this.screenWidth/a,v=this.screenHeight/l;return Math.max(d,v)}fitWidth(a=this.worldWidth,l,d=!0,v){let m;l&&(m=this.center),this.scale.x=this.screenWidth/a,d&&(this.scale.y=this.scale.x);const g=this.plugins.get("clamp-zoom",!0);return!v&&g&&g.clamp(),l&&m&&this.moveCenter(m),this}fitHeight(a=this.worldHeight,l,d=!0,v){let m;l&&(m=this.center),this.scale.y=this.screenHeight/a,d&&(this.scale.x=this.scale.y);const g=this.plugins.get("clamp-zoom",!0);return!v&&g&&g.clamp(),l&&m&&this.moveCenter(m),this}fitWorld(a){let l;a&&(l=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const d=this.plugins.get("clamp-zoom",!0);return d&&d.clamp(),a&&l&&this.moveCenter(l),this}fit(a,l=this.worldWidth,d=this.worldHeight){let v;a&&(v=this.center),this.scale.x=this.screenWidth/l,this.scale.y=this.screenHeight/d,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const m=this.plugins.get("clamp-zoom",!0);return m&&m.clamp(),a&&v&&this.moveCenter(v),this}setZoom(a,l){let d;l&&(d=this.center),this.scale.set(a);const v=this.plugins.get("clamp-zoom",!0);return v&&v.clamp(),l&&d&&this.moveCenter(d),this}zoomPercent(a,l){return this.setZoom(this.scale.x+this.scale.x*a,l)}zoom(a,l){return this.fitWidth(a+this.worldScreenWidth,l),this}get scaled(){return this.scale.x}set scaled(a){this.setZoom(a,!0)}snapZoom(a){return this.plugins.add("snap-zoom",new SnapZoom(this,a)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new Point(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(a){this.x=-a*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(a){this.x=-a*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(a){this.y=-a*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(a){this.y=-a*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(a){this._dirty=a}get forceHitArea(){return this._forceHitArea}set forceHitArea(a){a?(this._forceHitArea=a,this.hitArea=a):(this._forceHitArea=null,this.hitArea=new Rectangle(0,0,this.worldWidth,this.worldHeight))}drag(a){return this.plugins.add("drag",new Drag(this,a)),this}clamp(a){return this.plugins.add("clamp",new Clamp(this,a)),this}decelerate(a){return this.plugins.add("decelerate",new Decelerate(this,a)),this}bounce(a){return this.plugins.add("bounce",new Bounce(this,a)),this}pinch(a){return this.plugins.add("pinch",new Pinch(this,a)),this}snap(a,l,d){return this.plugins.add("snap",new Snap(this,a,l,d)),this}follow(a,l){return this.plugins.add("follow",new Follow(this,a,l)),this}wheel(a){return this.plugins.add("wheel",new Wheel(this,a)),this}animate(a){return this.plugins.add("animate",new Animate(this,a)),this}clampZoom(a){return this.plugins.add("clamp-zoom",new ClampZoom(this,a)),this}mouseEdges(a){return this.plugins.add("mouse-edges",new MouseEdges(this,a)),this}get pause(){return!!this._pause}set pause(a){this._pause=a,this.lastViewport=null,this.moving=!1,this.zooming=!1,a&&this.input.pause()}ensureVisible(a,l,d,v,m){m&&(d>this.worldScreenWidth||v>this.worldScreenHeight)&&(this.fit(!0,d,v),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let g=!1;a<this.left?(this.left=a,g=!0):a+d>this.right&&(this.right=a+d,g=!0),l<this.top?(this.top=l,g=!0):l+v>this.bottom&&(this.bottom=l+v,g=!0),g&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const EVENTS=["clicked","drag-start","drag-end","drag-remove","pinch-start","pinch-end","pinch-remove","snap-start","snap-end","snap-remove","snap-zoom-start","snap-zoom-end","snap-zoom-remove","bounce-x-start","bounce-x-end","bounce-y-start","bounce-y-end","bounce-remove","wheel","wheel-remove","wheel-scroll","wheel-scroll-remove","mouse-edge-start","mouse-edge-end","mouse-edge-remove","moved","moved-end","zoomed","zoomed-end","frame-end"],_sfc_main$3=defineComponent({__name:"PixiViewport",props:{screenWidth:{type:Number,required:!1,default:void 0},screenHeight:{type:Number,required:!1,default:void 0},worldWidth:{type:Number,required:!1,default:void 0},worldHeight:{type:Number,required:!1,default:void 0},threshold:{type:Number,required:!1,default:void 0},passiveWheel:{type:Boolean,required:!1,default:void 0},stopPropagation:{type:Boolean,required:!1,default:void 0},forceHitArea:{type:Rectangle,required:!1,default:void 0},noTicker:{type:Boolean,required:!1,default:void 0},interaction:{type:InteractionManager,required:!1,default:void 0},disableOnContextMenu:{type:Boolean,required:!1,default:void 0},divWheel:{type:HTMLElement,required:!1,default:void 0},ticker:{type:Ticker,required:!1,default:void 0},drag:{type:Object,required:!1,default:void 0},clamp:{type:Object,required:!1,default:void 0},decelerate:{type:Object,required:!1,default:void 0},bounce:{type:Object,required:!1,default:void 0},pinch:{type:Object,required:!1,default:void 0},snap:{type:Object,required:!1,default:void 0},follow:{type:Object,required:!1,default:void 0},wheel:{type:Object,required:!1,default:void 0},animate:{type:Object,required:!1,default:void 0},clampZoom:{type:Object,required:!1,default:void 0},mouseEdges:{type:Object,required:!1,default:void 0}},emits:["clicked","drag-start","drag-end","pinch-end","snap-start","snap-end","snap-zoom-start","snap-zoom-end","bounce-x-start","bounce-x-end","bounce-y-start","bounce-y-end","wheel","wheel-scroll","mouse-edge-start","mouse-edge-end","moved","zoomed","moved-end","zoomed-end","frame-end"],setup(s,{expose:a,emit:l}){var R,C;const d=s,v=getCurrentInstance(),m=["drag","clamp","decelerate","bounce","pinch","snap","follow","wheel","animate","clampZoom","mouseEdges"],g=isAnyPropertySet(d)?new Viewport(omitUndefined(_.omit(d,m))):new Viewport;for(const w of m)if(d[w]!=null){const A=typeof d[w]=="object"?d[w].options:void 0;if(w==="snap"){const S=d[w];g.snap(S.x,S.y,A)}else if(w==="follow"){const S=d[w];g.follow(S.target,A)}else g[w](A)}const T=(C=(R=v==null?void 0:v.parent)==null?void 0:R.exposed)==null?void 0:C.application;if(T==null)throw new Error("pixi-viewport must be used inside pixi-application");const b=new Map;return onMounted(()=>{EVENTS.forEach(w=>{const A=(...S)=>l(w,...S);g.addListener(w,A),b.set(w,A)}),T.stage.addChild(g)}),onUnmounted(()=>{T.stage.removeChild(g),b.forEach((w,A)=>{w!=null&&g.removeListener(A,w)})}),a({viewport:g}),(w,A)=>renderSlot(w.$slots,"default",{viewport:unref(g)})}});class Animator{constructor(a,l){this.sprite=a,this.model=l}set(a,l){this.model.getAnimation(a,l).set(this.sprite)}}class Model{constructor(a,l){this.name=a,this.animations=l}getAnimation(a,l){return this.animations[a][l]}}class AnimationManager{constructor(a){ce(this,"unitAnimations");this.unitAnimations=load(a)}getModel(a,l){return new Model(`${a}_${l}`,this.unitAnimations[a][l])}createAnimator(a,l,d){return new Animator(a,this.getModel(l,d))}}const _hoisted_1$1=createBaseVNode("h1",{class:"text-xl font-bold"},"Animator preview",-1),_hoisted_2$1=createBaseVNode("label",{for:"color"},"Color: ",-1),_hoisted_3=["value"],_hoisted_4=createBaseVNode("label",{for:"unit"},"Unit: ",-1),_hoisted_5=["value"],_hoisted_6=createBaseVNode("label",{for:"animation"},"Animation: ",-1),_hoisted_7=["value"],_hoisted_8=createBaseVNode("label",{for:"direction"},"Direction: ",-1),_hoisted_9=["value"],_sfc_main$2=defineComponent({__name:"AnimatorPreview",setup(s){const a=ref(),l=ref(),d=ref(colors[0]);watch(()=>d.value,()=>w());const v=ref(units[0]);watch(()=>v.value,()=>w());const m=ref(states[0]);watch(()=>m.value,()=>A());const g=ref(directions[0]);watch(()=>g.value,()=>A());let T,b,R;onMounted(()=>{const S=a.value.application;S.loader.resources.unit!=null?C():S.loader.add("unit","assets/unit.json").load(()=>{T=new AnimationManager(S.loader.resources.unit.spritesheet),C()})});const C=()=>{R=new AnimatedSprite(T.getModel("blue","swordsmen").getAnimation("idle","north").textures),R.anchor.set(.5),R.position.set(a.value.application.view.width/2,a.value.application.view.height/2),b=T.createAnimator(R,d.value,v.value),b.set(m.value,g.value),l.value.viewport.addChild(R)};onUnmounted(()=>{l.value.viewport.removeChild(R)});const w=()=>{b=T.createAnimator(R,d.value,v.value),A()},A=()=>{b.set(m.value,g.value)};return(S,O)=>{const L=_sfc_main$3,N=_sfc_main$5;return openBlock(),createElementBlock("div",null,[_hoisted_1$1,createBaseVNode("div",null,[_hoisted_2$1,withDirectives(createBaseVNode("select",{id:"color","onUpdate:modelValue":O[0]||(O[0]=U=>d.value=U)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(colors,U=>(openBlock(),createElementBlock("option",{key:U,value:U},toDisplayString(U),9,_hoisted_3))),128))],512),[[vModelSelect,d.value]]),_hoisted_4,withDirectives(createBaseVNode("select",{id:"unit","onUpdate:modelValue":O[1]||(O[1]=U=>v.value=U)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(units,U=>(openBlock(),createElementBlock("option",{key:U,value:U},toDisplayString(U),9,_hoisted_5))),128))],512),[[vModelSelect,v.value]]),_hoisted_6,withDirectives(createBaseVNode("select",{id:"animation","onUpdate:modelValue":O[2]||(O[2]=U=>m.value=U)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(states,U=>(openBlock(),createElementBlock("option",{key:U,value:U},toDisplayString(U),9,_hoisted_7))),128))],512),[[vModelSelect,m.value]]),_hoisted_8,withDirectives(createBaseVNode("select",{id:"direction","onUpdate:modelValue":O[3]||(O[3]=U=>g.value=U)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(directions,U=>(openBlock(),createElementBlock("option",{key:U,value:U},toDisplayString(U),9,_hoisted_9))),128))],512),[[vModelSelect,g.value]]),createVNode(N,{ref_key:"applicationInstance",ref:a,width:500,height:500},{default:withCtx(({application:U})=>[createVNode(L,{ref_key:"viewportInstance",ref:l,"screen-width":U.view.width,"screen-height":U.view.height,interaction:U.renderer.plugins.interaction,wheel:{options:{center:new Point(U.view.width/2,U.view.height/2)}}},null,8,["screen-width","screen-height","interaction","wheel"])]),_:1},512)])])}}}),_export_sfc=(s,a)=>{const l=s.__vccOpts||s;for(const[d,v]of a)l[d]=v;return l},_sfc_main$1={},_hoisted_1={class:"m-3"},_hoisted_2=createBaseVNode("h1",{class:"text-3xl font-bold underline"},"World Editor",-1);function _sfc_render$1(s,a){const l=_sfc_main$2;return openBlock(),createElementBlock("div",_hoisted_1,[_hoisted_2,createVNode(l)])}const WorldEditorView=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),routes=[{path:"/",redirect:"/game"},{path:"/game",component:_sfc_main$4},{path:"/worldeditor",component:WorldEditorView}],_sfc_main={};function _sfc_render(s,a){const l=resolveComponent("router-view");return openBlock(),createBlock(l)}const App=_export_sfc(_sfc_main,[["render",_sfc_render]]),app=createApp(App),router=createRouter({history:createWebHashHistory(),routes});app.use(router);app.config.globalProperties.window=window;app.mount("#app");
